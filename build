#!/bin/sh
#DEBUG=-g

while [ $# != 0 ]; do
  if [ "$1" = -g ]; then DEBUG=-g
  elif [ "$1" = -a ]; then ALL=yes
  fi
  shift
done

node_modules/coffee-script/bin/coffee -c parse.cs leisure.cs prim.cs game.cs
node_modules/coffee-script/bin/coffee -c repl.cs runRepl.cs testLeisure.cs replCore.cs browserRepl.cs testing.cs bootLeisure.cs notebook.cs
echo prelude...
node runRepl $DEBUG -q -b 0 -c prelude
#node --debug-brk runRepl $DEBUG -q -b 0 -c prelude
#node runRepl $DEBUG -v -b 0 -c prelude
echo std...
#node --debug-brk runRepl $DEBUG -q -b 1 -c std
node runRepl $DEBUG -q -b 1 -c std
#node runRepl $DEBUG -v -b 1 -c std
echo tests...
node testLeisure
#node_modules/coffee-script/bin/coffee -c chippy.cs
#node runRepl -c -r chippy chip.lsr
#node_modules/coffee-script/bin/coffee -c coaster.cs
#node runRepl -c -r coaster coast.lsr
node_modules/coffee-script/bin/coffee -c blocky.cs
node runRepl $DEBUG -c -r blocky block

if [ -n "$ALL" ]; then
    node runRepl $DEBUG -c maps
    node runRepl $DEBUG -c -r maps svg
    node runRepl $DEBUG -c -r maps -r svg parseAst
fi