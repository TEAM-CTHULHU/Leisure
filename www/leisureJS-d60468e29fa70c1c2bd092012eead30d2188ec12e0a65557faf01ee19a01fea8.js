;(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2012, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var L_anno, L_apply, L_lambda, L_let, L_lit, L_ref, LeisureObject, Leisure_BaseCons, Leisure_cons, Leisure_nil, Nil, anno, apply, ast2Json, ast2JsonEncodings, astString, charCodes, checkType, cons, consEq, consFrom, define, ensureLeisureClass, evalFunc, foldLeft, functionInfo, getAnnoBody, getAnnoData, getAnnoName, getApplyArg, getApplyFunc, getDataType, getLambdaBody, getLambdaVar, getLetBody, getLetName, getLetValue, getLitVal, getRefName, getType, head, jsType, json2Ast, json2AstEncodings, lambda, lazy, leisureAddFunc, letStr, lit, llet, lz, makeSuper, mkProto, nameFunc, nameSub, primCons, primFoldLeft, ref, resolve, root, rz, save, setDataType, setType, supertypes, tail, throwError, _, _ref, _ref1, _ref2, _ref3,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  _ref = root = module.exports = require('./base'), resolve = _ref.resolve, lazy = _ref.lazy;

  _ = require('./lodash.min');

  rz = resolve;

  lz = lazy;

  charCodes = {
    "'": '$a',
    ',': '$b',
    '$': '$$',
    '@': '$d',
    '?': '$e',
    '/': '$f',
    '*': '$g',
    '&': '$h',
    '^': '$i',
    '!': '$k',
    '`': '$l',
    '~': '$m',
    '-': '$_',
    '+': '$o',
    '=': '$p',
    '|': '$q',
    '[': '$r',
    ']': '$s',
    '{': '$t',
    '}': '$u',
    '"': '$v',
    ':': '$w',
    ';': '$x',
    '<': '$y',
    '>': '$z',
    '%': '$A',
    '.': '$B'
  };

  nameSub = function(name) {
    var code, i, s, _i, _ref1;

    s = '';
    for (i = _i = 0, _ref1 = name.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
      code = charCodes[name[i]];
      s += code != null ? code : name[i];
    }
    return s;
  };

  setDataType = function(func, dataType) {
    if (dataType) {
      func.dataType = dataType;
    }
    return func;
  };

  setType = function(func, type) {
    if (type) {
      func.type = type;
    }
    func.__proto__ = (ensureLeisureClass(type)).prototype;
    return func;
  };

  LeisureObject = (function() {
    function LeisureObject() {}

    return LeisureObject;

  })();

  LeisureObject.prototype.className = 'LeisureObject';

  global.Leisure_Object = LeisureObject;

  supertypes = {};

  root.leisureClassChange = 0;

  ensureLeisureClass = function(leisureClass) {
    var cl;

    cl = "Leisure_" + (nameSub(leisureClass));
    if (global[cl] == null) {
      global[cl] = eval("(function " + cl + "(){})");
      supertypes[cl] = 'Leisure_Object';
      root.leisureClassChange++;
    }
    return global[cl];
  };

  makeSuper = function(type, supertype) {
    supertypes["Leisure_" + (nameSub(type))] = "Leisure_" + (nameSub(supertype));
    return root.leisureClassChange++;
  };

  ensureLeisureClass('cons');

  ensureLeisureClass('nil');

  supertypes.Leisure_cons = 'Leisure_Object';

  supertypes.Leisure_nil = 'Leisure_Object';

  ensureLeisureClass('ast');

  ensureLeisureClass('lit');

  Leisure_lit.prototype.toString = function() {
    return "lit(" + (getLitVal(this)) + ")";
  };

  ensureLeisureClass('ref');

  Leisure_ref.prototype.toString = function() {
    return "ref(" + (getRefName(this)) + ")";
  };

  ensureLeisureClass('lambda');

  Leisure_lambda.prototype.toString = function() {
    return "lambda(" + (astString(this)) + ")";
  };

  ensureLeisureClass('apply');

  Leisure_apply.prototype.toString = function() {
    return "apply(" + (astString(this)) + ")";
  };

  ensureLeisureClass('let');

  Leisure_let.prototype.toString = function() {
    return "let(" + (astString(this)) + ")";
  };

  ensureLeisureClass('anno');

  Leisure_anno.prototype.toString = function() {
    return "anno(" + (astString(this)) + ")";
  };

  ensureLeisureClass('doc');

  ensureLeisureClass('srcLocation');

  ensureLeisureClass('pattern');

  makeSuper('lit', 'ast');

  makeSuper('ref', 'ast');

  makeSuper('lambda', 'ast');

  makeSuper('apply', 'ast');

  makeSuper('let', 'ast');

  makeSuper('anno', 'ast');

  astString = function(ast) {
    var argStr, funcStr, _ref1;

    switch (getType(ast)) {
      case 'lit':
        return getLitVal(ast);
      case 'ref':
        return getRefName(ast);
      case 'apply':
        funcStr = astString(getApplyFunc(ast));
        if ((_ref1 = getType(getApplyFunc(ast))) === 'lambda' || _ref1 === 'let') {
          funcStr = "(" + funcStr + ")";
        }
        argStr = astString(getApplyArg(ast));
        if (getType(getApplyArg(ast)) === 'apply') {
          argStr = "(" + argStr + ")";
        }
        return "" + funcStr + " " + argStr;
      case 'lambda':
        return "\\" + (getLambdaVar(ast)) + " . " + (astString(getLambdaBody(ast)));
      case 'let':
        return "\\\\" + (letStr(ast));
      case 'anno':
        return "\\@" + (getAnnoName(ast)) + " " + (getAnnoData(ast)) + " . " + (astString(getAnnoBody(ast)));
    }
  };

  letStr = function(ast) {
    var binding, body;

    body = getLetBody(ast);
    binding = "(" + (getLetName(ast)) + " = " + (astString(getLetValue(ast))) + ")";
    if (body instanceof Leisure_let) {
      return "" + binding + " " + (letStr(body));
    } else {
      return "" + binding + " . " + (astString(body));
    }
  };

  Leisure_BaseCons = (function(_super) {
    __extends(Leisure_BaseCons, _super);

    function Leisure_BaseCons() {
      _ref1 = Leisure_BaseCons.__super__.constructor.apply(this, arguments);
      return _ref1;
    }

    Leisure_BaseCons.prototype.head = function() {
      throw new Error("Not Implemented");
    };

    Leisure_BaseCons.prototype.tail = function() {
      throw new Error("Not Implemented");
    };

    Leisure_BaseCons.prototype.isNil = function() {
      return false;
    };

    Leisure_BaseCons.prototype.find = function(func) {
      if (func(this.head())) {
        return this.head();
      } else {
        return this.tail().find(func);
      }
    };

    Leisure_BaseCons.prototype.removeAll = function(func) {
      var t;

      t = this.tail().removeAll(func);
      if (func(this.head())) {
        return t;
      } else if (t === this.tail()) {
        return this;
      } else {
        return cons(this.head(), t);
      }
    };

    Leisure_BaseCons.prototype.map = function(func) {
      return cons(func(this.head()), this.tail().map(func));
    };

    Leisure_BaseCons.prototype.foldl = function(func, arg) {
      return this.tail().foldl(func, func(arg, this.head()));
    };

    Leisure_BaseCons.prototype.foldl1 = function(func) {
      return this.tail().foldl(func, this.head());
    };

    Leisure_BaseCons.prototype.foldr = function(func, arg) {
      return func(this.head(), this.tail().foldr(func, arg));
    };

    Leisure_BaseCons.prototype.foldr1 = function(func) {
      if (this.tail() === Nil) {
        return this.head();
      } else {
        return func(this.head(), this.tail().foldr1(func));
      }
    };

    Leisure_BaseCons.prototype.toArray = function() {
      return this.foldl((function(i, el) {
        i.push(el);
        return i;
      }), []);
    };

    Leisure_BaseCons.prototype.join = function(str) {
      return this.toArray().join(str);
    };

    Leisure_BaseCons.prototype.reverse = function() {
      return this.rev(Nil);
    };

    Leisure_BaseCons.prototype.rev = function(result) {
      return this.tail().rev(cons(this.head(), result));
    };

    Leisure_BaseCons.prototype.elementString = function() {
      var _ref2;

      return "" + (((_ref2 = this.head()) != null ? _ref2.constructor : void 0) === this.constructor || this.head() instanceof Leisure_nil ? '[' + this.head().elementString() + ']' : this.head()) + (this.tail() instanceof Leisure_nil ? '' : this.tail() instanceof Leisure_BaseCons ? " " + (this.tail().elementString()) : " | " + (this.tail()));
    };

    Leisure_BaseCons.prototype.equals = function(other) {
      return this === other || (other instanceof Leisure_BaseCons && consEq(this.head(), other.head()) && consEq(this.tail(), other.tail()));
    };

    Leisure_BaseCons.prototype.each = function(block) {
      block(this.head());
      return this.tail().each(block);
    };

    Leisure_BaseCons.prototype.length = function() {
      return this.foldl((function(i, el) {
        return i + 1;
      }), 0);
    };

    Leisure_BaseCons.prototype.last = function() {
      var t;

      t = this.tail();
      if (t === Nil) {
        return this.head();
      } else {
        return t.last();
      }
    };

    Leisure_BaseCons.prototype.append = function(l) {
      return cons(this.head(), this.tail().append(l));
    };

    Leisure_BaseCons.prototype.toString = function() {
      return "" + (this.stringName()) + "[" + (this.elementString()) + "]";
    };

    Leisure_BaseCons.prototype.stringName = function() {
      return "BaseCons";
    };

    return Leisure_BaseCons;

  })(LeisureObject);

  consEq = function(a, b) {
    return a === b || (a instanceof Leisure_BaseCons && a.equals(b));
  };

  Leisure_cons = (function(_super) {
    __extends(Leisure_cons, _super);

    function Leisure_cons() {
      _ref2 = Leisure_cons.__super__.constructor.apply(this, arguments);
      return _ref2;
    }

    Leisure_cons.prototype.head = function() {
      return this(function() {
        return function(a) {
          return function(b) {
            return rz(a);
          };
        };
      });
    };

    Leisure_cons.prototype.tail = function() {
      return this(function() {
        return function(a) {
          return function(b) {
            return rz(b);
          };
        };
      });
    };

    Leisure_cons.prototype.stringName = function() {
      return "Cons";
    };

    return Leisure_cons;

  })(Leisure_BaseCons);

  global.Leisure_cons = Leisure_cons;

  Leisure_nil = (function(_super) {
    __extends(Leisure_nil, _super);

    function Leisure_nil() {
      _ref3 = Leisure_nil.__super__.constructor.apply(this, arguments);
      return _ref3;
    }

    Leisure_nil.prototype.isNil = function() {
      return true;
    };

    Leisure_nil.prototype.find = function() {
      return this;
    };

    Leisure_nil.prototype.removeAll = function() {
      return this;
    };

    Leisure_nil.prototype.map = function(func) {
      return Nil;
    };

    Leisure_nil.prototype.foldl = function(func, arg) {
      return arg;
    };

    Leisure_nil.prototype.foldr = function(func, arg) {
      return arg;
    };

    Leisure_nil.prototype.reverse = function() {
      return this;
    };

    Leisure_nil.prototype.rev = function(result) {
      return result;
    };

    Leisure_nil.prototype.equals = function(other) {
      return other instanceof Leisure_nil;
    };

    Leisure_nil.prototype.each = function() {};

    Leisure_nil.prototype.toArray = function() {
      return [];
    };

    Leisure_nil.prototype.join = function() {
      return '';
    };

    Leisure_nil.prototype.append = function(l) {
      return l;
    };

    Leisure_nil.prototype.toString = function() {
      return "Cons[]";
    };

    Leisure_nil.prototype.elementString = function() {
      return '';
    };

    return Leisure_nil;

  })(LeisureObject);

  global.Leisure_nil = Leisure_nil;

  jsType = function(v) {
    var t;

    t = typeof v;
    if (t === 'object') {
      return v.constructor || t;
    } else {
      return t;
    }
  };

  mkProto = function(protoFunc, value) {
    value.__proto__ = protoFunc.prototype;
    return value;
  };

  throwError = function(msg) {
    throw (msg instanceof Error ? msg : new Error(String(msg)));
  };

  checkType = function(value, type) {
    if (!(value instanceof type)) {
      return throwError("Type error: expected type: " + type + ", but got: " + (jsType(value)));
    }
  };

  primCons = setDataType((function(a) {
    return function(b) {
      return mkProto(Leisure_cons, setType((function(f) {
        return rz(f)(a)(b);
      }), 'cons'));
    };
  }), 'cons');

  Nil = mkProto(Leisure_nil, setDataType(setType((function(a) {
    return function(b) {
      return rz(b);
    };
  }), 'nil'), 'nil'));

  cons = function(a, b) {
    return primCons(lz(a))(lz(b));
  };

  foldLeft = function(func, val, thing) {
    if (thing instanceof Leisure_cons) {
      return thing.foldl(func, val);
    } else {
      return primFoldLeft(func, val, thing, 0);
    }
  };

  primFoldLeft = function(func, val, array, index) {
    if (index < array.length) {
      return primFoldLeft(func, func(val, array[index]), array, index + 1);
    } else {
      return val;
    }
  };

  global.leisureFuncs = {};

  global.leisureFuncNames = Nil;

  leisureAddFunc = global.leisureAddFunc = function(nm) {
    return global.leisureFuncNames = cons(nm, global.leisureFuncNames);
  };

  root.evalFunc = evalFunc = eval;

  root.functionCount = 0;

  functionInfo = {};

  nameFunc = function(func, name) {
    var f;

    f = null;
    return function() {
      if (f === null) {
        f = rz(func);
        if (typeof f === 'function') {
          f.leisureName = name;
        }
        return f;
      } else {
        return f;
      }
    };
  };

  define = function(name, func, arity, src, method) {
    var nm;

    functionInfo[name] = {
      src: src,
      arity: arity,
      leisureName: name,
      alts: {},
      altList: []
    };
    nm = 'L_' + nameSub(name);
    if (!method && global.noredefs && (global[nm] != null)) {
      throwError("[DEF] Attempt to redefine definition: " + name);
    }
    functionInfo[name].mainDef = global[nm] = global.leisureFuncs[nm] = nameFunc(func, name);
    leisureAddFunc(name);
    root.functionCount++;
    return func;
  };

  L_lit = setDataType((function(_x) {
    return setType((function(_f) {
      return rz(_f)(_x);
    }), 'lit');
  }), 'lit');

  L_ref = setDataType((function(_x) {
    return setType((function(_f) {
      return rz(_f)(_x);
    }), 'ref');
  }), 'ref');

  L_lambda = setDataType((function(_v) {
    return function(_f) {
      return setType((function(_g) {
        return rz(_g)(_v)(_f);
      }), 'lambda');
    };
  }), 'lambda');

  L_apply = setDataType((function(_func) {
    return function(_arg) {
      return setType((function(_f) {
        return rz(_f)(_func)(_arg);
      }), 'apply');
    };
  }), 'apply');

  L_let = setDataType((function(_n) {
    return function(_v) {
      return function(_b) {
        return setType((function(_f) {
          return rz(_f)(_n)(_v)(_b);
        }), 'let');
      };
    };
  }), 'let');

  L_anno = setDataType((function(_name) {
    return function(_data) {
      return function(_body) {
        return setType((function(_f) {
          return rz(_f)(_name)(_data)(_body);
        }), 'anno');
      };
    };
  }), 'anno');

  getType = function(f) {
    var t, _ref4;

    t = typeof f;
    return (t === 'function' && (f != null ? f.type : void 0)) || ("*" + ((t === 'object' && ((_ref4 = f.constructor) != null ? _ref4.name : void 0)) || t));
  };

  define('getType', lz(function(value) {
    return getType(rz(value));
  }), 1);

  getDataType = function(f) {
    return (typeof f === 'function' && f.dataType) || '';
  };

  define('getDataType', lz(function(value) {
    return getDataType(rz(value));
  }), 1);

  save = {};

  save.lit = lit = function(l) {
    return L_lit(lz(l));
  };

  save.ref = ref = function(r) {
    return L_ref(lz(r));
  };

  save.lambda = lambda = function(v, body) {
    return L_lambda(lz(v))(lz(body));
  };

  save.apply = apply = function(f, a) {
    return L_apply(lz(f))(lz(a));
  };

  save.llet = llet = function(n, v, b) {
    return L_let(lz(n))(lz(v))(lz(b));
  };

  save.anno = anno = function(name, data, body) {
    return L_anno(lz(name))(lz(data))(lz(body));
  };

  save.cons = cons;

  getLitVal = function(lt) {
    return lt(lz(function(v) {
      return rz(v);
    }));
  };

  getRefName = function(rf) {
    return rf(lz(function(v) {
      return rz(v);
    }));
  };

  getLambdaVar = function(lam) {
    return lam(lz(function(v) {
      return function(b) {
        return rz(v);
      };
    }));
  };

  getLambdaBody = function(lam) {
    return lam(lz(function(v) {
      return function(b) {
        return rz(b);
      };
    }));
  };

  getApplyFunc = function(apl) {
    return apl(lz(function(a) {
      return function(b) {
        return rz(a);
      };
    }));
  };

  getApplyArg = function(apl) {
    return apl(lz(function(a) {
      return function(b) {
        return rz(b);
      };
    }));
  };

  getLetName = function(lt) {
    return lt(lz(function(n) {
      return function(v) {
        return function(b) {
          return rz(n);
        };
      };
    }));
  };

  getLetValue = function(lt) {
    return lt(lz(function(n) {
      return function(v) {
        return function(b) {
          return rz(v);
        };
      };
    }));
  };

  getLetBody = function(lt) {
    return lt(lz(function(n) {
      return function(v) {
        return function(b) {
          return rz(b);
        };
      };
    }));
  };

  getAnnoName = function(anno) {
    return anno(lz(function(name) {
      return function(data) {
        return function(body) {
          return rz(name);
        };
      };
    }));
  };

  getAnnoData = function(anno) {
    return anno(lz(function(name) {
      return function(data) {
        return function(body) {
          return rz(data);
        };
      };
    }));
  };

  getAnnoBody = function(anno) {
    return anno(lz(function(name) {
      return function(data) {
        return function(body) {
          return rz(body);
        };
      };
    }));
  };

  json2AstEncodings = {
    lit: function(json) {
      return L_lit(lz(json.value));
    },
    ref: function(json) {
      return L_ref(lz(json.varName));
    },
    lambda: function(json) {
      return L_lambda(lz(json.varName))(lz(json2Ast(json.body)));
    },
    apply: function(json) {
      return L_apply(lz(json2Ast(json.func)))(lz(json2Ast(json.arg)));
    },
    "let": function(json) {
      return L_let(lz(json.varName))(lz(json2Ast(json.value)))(lz(json2Ast(json.body)));
    },
    anno: function(json) {
      return L_anno(lz(json.name))(lz(json2Ast(json.data)))(lz(json2Ast(json.body)));
    },
    cons: function(json) {
      return save.cons(json2Ast(json.head), json2Ast(json.tail));
    },
    nil: function(json) {
      return Nil;
    }
  };

  lit = save.lit;

  ref = save.ref;

  lambda = save.lambda;

  apply = save.apply;

  llet = save.llet;

  anno = save.anno;

  cons = save.cons;

  json2Ast = function(json) {
    if (typeof json === 'object') {
      return json2AstEncodings[json._type](json);
    } else {
      return json;
    }
  };

  ast2JsonEncodings = {
    Leisure_lit: function(ast) {
      return {
        _type: 'lit',
        value: getLitVal(ast)
      };
    },
    Leisure_ref: function(ast) {
      return {
        _type: 'ref',
        varName: getRefName(ast)
      };
    },
    Leisure_lambda: function(ast) {
      return {
        _type: 'lambda',
        varName: getLambdaVar(ast),
        body: ast2Json(getLambdaBody(ast))
      };
    },
    Leisure_apply: function(ast) {
      return {
        _type: 'apply',
        func: ast2Json(getApplyFunc(ast)),
        arg: ast2Json(getApplyArg(ast))
      };
    },
    Leisure_let: function(ast) {
      return {
        _type: 'let',
        varName: getLetName(ast),
        value: ast2Json(getLetValue(ast)),
        body: ast2Json(getLetBody(ast))
      };
    },
    Leisure_anno: function(ast) {
      return {
        _type: 'anno',
        name: getAnnoName(ast),
        data: ast2Json(getAnnoData(ast)),
        body: ast2Json(getAnnoBody(ast))
      };
    },
    Leisure_cons: function(ast) {
      return {
        _type: 'cons',
        head: ast2Json(ast.head()),
        tail: ast2Json(ast.tail())
      };
    },
    Leisure_nil: function(ast) {
      return {
        _type: 'nil'
      };
    }
  };

  ast2Json = function(ast) {
    var _ref4;

    if (ast2JsonEncodings[(_ref4 = ast.constructor) != null ? _ref4.name : void 0]) {
      return ast2JsonEncodings[ast.constructor.name](ast);
    } else {
      return ast;
    }
  };

  define('json2Ast', lz(function(json) {
    return json2Ast(JSON.parse(rz(json)));
  }));

  define('ast2Json', lz(function(ast) {
    return JSON.stringify(ast2Json(rz(ast)));
  }));

  consFrom = function(array, i) {
    i = i || 0;
    if (i < array.length) {
      return cons(array[i], consFrom(array, i + 1));
    } else {
      return Nil;
    }
  };

  head = function(l) {
    return l.head();
  };

  tail = function(l) {
    return l.tail();
  };

  root.head = head;

  root.tail = tail;

  root.consFrom = consFrom;

  root.nameSub = nameSub;

  root.setDataType = setDataType;

  root.setType = setType;

  root.mkProto = mkProto;

  root.Nil = Nil;

  root.cons = cons;

  root.primCons = primCons;

  root.define = define;

  root.getType = getType;

  root.getDataType = getDataType;

  root.lit = lit;

  root.ref = ref;

  root.lambda = lambda;

  root.apply = apply;

  root.anno = anno;

  root.llet = llet;

  root.getRefName = getRefName;

  root.getLitVal = getLitVal;

  root.getLambdaBody = getLambdaBody;

  root.getLambdaVar = getLambdaVar;

  root.getApplyFunc = getApplyFunc;

  root.getApplyArg = getApplyArg;

  root.getLetName = getLetName;

  root.getLetValue = getLetValue;

  root.getLetBody = getLetBody;

  root.getAnnoName = getAnnoName;

  root.getAnnoData = getAnnoData;

  root.getAnnoBody = getAnnoBody;

  root.throwError = throwError;

  root.foldLeft = foldLeft;

  root.LeisureObject = LeisureObject;

  root.evalFunc = evalFunc;

  root.json2Ast = json2Ast;

  root.ast2Json = ast2Json;

  root.Leisure_lit = Leisure_lit;

  root.Leisure_ref = Leisure_ref;

  root.Leisure_lambda = Leisure_lambda;

  root.Leisure_apply = Leisure_apply;

  root.Leisure_let = Leisure_let;

  root.Leisure_anno = Leisure_anno;

  root.ensureLeisureClass = ensureLeisureClass;

  root.makeSuper = makeSuper;

  root.supertypes = supertypes;

  root.functionInfo = functionInfo;

}).call(this);

/*
*/

})(self)
},{"./base":2,"./lodash.min":6}],2:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var SimpyCons, defaultEnv, readDir, readFile, root, simpyCons, statFile, writeFile;

  root = module.exports;

  defaultEnv = {
    presentValue: function(x) {
      return x;
    },
    values: {},
    errorHandlers: []
  };

  global.resolve = function(value) {
    if (typeof value === 'function') {
      return value.memo || (value.memo = value());
    } else {
      return value;
    }
  };

  global.lazy = function(l) {
    if (typeof l === 'function') {
      return function() {
        return l;
      };
    } else {
      return l;
    }
  };

  readFile = function(fileName, cont) {
    return defaultEnv.readFile(fileName, cont);
  };

  writeFile = function(fileName, data, cont) {
    return defaultEnv.writeFile(fileName, data, cont);
  };

  readDir = function(fileName, cont) {
    return defaultEnv.readDir(fileName, cont);
  };

  statFile = function(fileName, cont) {
    return defaultEnv.statFile(fileName, cont);
  };

  SimpyCons = (function() {
    function SimpyCons(head, tail) {
      this.head = head;
      this.tail = tail;
    }

    SimpyCons.prototype.toArray = function() {
      var array, h;

      h = this;
      array = [];
      while (h !== null) {
        array.push(h.head);
        h = h.tail;
      }
      return array;
    };

    return SimpyCons;

  })();

  simpyCons = function(a, b) {
    return new SimpyCons(a, b);
  };

  root.defaultEnv = defaultEnv;

  root.readFile = readFile;

  root.readDir = readDir;

  root.writeFile = writeFile;

  root.statFile = statFile;

  root.SimpyCons = SimpyCons;

  root.simpyCons = simpyCons;

  root.resolve = global.resolve;

  root.lazy = global.lazy;

}).call(this);

/*
*/

})(self)
},{}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
(function() {
  var Leisure, exports, k, nb, v, _ref;

  window.marked = require('./marked');

  Leisure = exports = module.exports = require('./base');

  require('./ast');

  require('./gen');

  require('./runtime');

  require('./generatedPrelude');

  require('./std');

  require('./md');

  window.Notebook = nb = require('./notebook');

  _ref = window.Leisure;
  for (k in _ref) {
    v = _ref[k];
    Leisure[k] = v;
  }

  window.Leisure = Leisure;

}).call(this);

/*
*/

},{"./ast":1,"./base":2,"./gen":4,"./generatedPrelude":5,"./marked":7,"./md":8,"./notebook":9,"./runtime":10,"./std":11}],4:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var Leisure_anno, Leisure_apply, Leisure_lambda, Leisure_let, Leisure_lit, Leisure_ref, Nil, addLambdaProperties, addUniq, arrayify, assocListProps, cons, consFrom, curry, define, dumpAnno, gen, genApplyArg, genLambda, genLets, genUniq, getAnnoBody, getAnnoData, getAnnoName, getApplyArg, getApplyFunc, getAssocListProps, getLambdaBody, getLambdaProperties, getLambdaVar, getLastLetBody, getLetBody, getLetName, getLetValue, getLitVal, getRefName, lacons, lazy, lcons, lconsFrom, left, letList, lz, makeSyncMonad, memoize, nameSub, resolve, right, root, runMonad, rz, setDataType, setType, simpyCons, specialAnnotations, uniqName, varNameSub, _, _false, _ref, _ref1, _ref2;

  _ref = require('./base'), simpyCons = _ref.simpyCons, resolve = _ref.resolve, lazy = _ref.lazy;

  rz = resolve;

  lz = lazy;

  _ref1 = root = module.exports = require('./ast'), nameSub = _ref1.nameSub, getLitVal = _ref1.getLitVal, getRefName = _ref1.getRefName, getLambdaVar = _ref1.getLambdaVar, getLambdaBody = _ref1.getLambdaBody, getApplyFunc = _ref1.getApplyFunc, getApplyArg = _ref1.getApplyArg, getAnnoName = _ref1.getAnnoName, getAnnoData = _ref1.getAnnoData, getAnnoBody = _ref1.getAnnoBody, getLetName = _ref1.getLetName, getLetValue = _ref1.getLetValue, getLetBody = _ref1.getLetBody, Leisure_lit = _ref1.Leisure_lit, Leisure_ref = _ref1.Leisure_ref, Leisure_lambda = _ref1.Leisure_lambda, Leisure_apply = _ref1.Leisure_apply, Leisure_let = _ref1.Leisure_let, Leisure_anno = _ref1.Leisure_anno, setType = _ref1.setType, setDataType = _ref1.setDataType, cons = _ref1.cons, Nil = _ref1.Nil, consFrom = _ref1.consFrom, define = _ref1.define;

  _ref2 = require('./runtime'), makeSyncMonad = _ref2.makeSyncMonad, runMonad = _ref2.runMonad, _false = _ref2._false, left = _ref2.left, right = _ref2.right;

  _ = require('./lodash.min');

  varNameSub = function(n) {
    return "L_" + (nameSub(n));
  };

  gen = function(ast) {
    return genUniq(ast, Nil, [Nil, 0]);
  };

  genUniq = function(ast, names, uniq) {
    var arity, data, funcName, genned, name, src, _ref3;

    switch (ast.constructor) {
      case Leisure_lit:
        return JSON.stringify(getLitVal(ast));
      case Leisure_ref:
        return "resolve(" + (uniqName(getRefName(ast), uniq)) + ")";
      case Leisure_lambda:
        return genLambda(ast, names, uniq, 0);
      case Leisure_apply:
        return "" + (genUniq(getApplyFunc(ast), names, uniq)) + "(" + (genApplyArg(getApplyArg(ast), names, uniq)) + ")";
      case Leisure_let:
        return "(function(){\n" + (genLets(ast, names, uniq)) + "})()";
      case Leisure_anno:
        name = getAnnoName(ast);
        data = getAnnoData(ast);
        genned = genUniq(getAnnoBody(ast), names, uniq);
        switch (name) {
          case 'type':
            return "setType(" + genned + ", '" + data + "')";
          case 'dataType':
            return "setDataType(" + genned + ", '" + data + "')";
          case 'define':
            _ref3 = data.toArray(), funcName = _ref3[0], arity = _ref3[1], src = _ref3[2];
            return "define('" + funcName + "', (function(){return " + genned + "}), " + arity + ", " + (JSON.stringify(src)) + ")";
          default:
            return genned;
        }
        break;
      default:
        return "DUR? " + ast + ", " + ast.constructor + " " + Leisure_lambda;
    }
  };

  genLambda = function(ast, names, uniq, count) {
    var n, name, u;

    name = getLambdaVar(ast);
    u = addUniq(name, names, uniq);
    n = cons(name, names);
    return addLambdaProperties(ast, "function(" + (uniqName(name, u)) + "){return " + (genUniq(getLambdaBody(ast), n, u)) + "}");
  };

  specialAnnotations = ['type', 'dataType', 'define'];

  arrayify = function(cons) {
    if (cons instanceof Leisure_cons) {
      return cons.map(function(el) {
        return arrayify(el);
      }).toArray();
    } else {
      return cons;
    }
  };

  getLambdaProperties = function(body, props) {
    var value;

    if (body instanceof Leisure_anno) {
      if (!_.contains(specialAnnotations, getAnnoName(body))) {
        if (!props) {
          props = {};
        }
        value = getAnnoData(body);
        props[getAnnoName(body)] = arrayify(value);
      }
      getLambdaProperties(getAnnoBody(body), props);
    }
    return props;
  };

  addLambdaProperties = function(ast, def) {
    var props;

    props = getLambdaProperties(getLambdaBody(ast));
    if (props) {
      return "setLambdaProperties(" + def + ", " + (JSON.stringify(props)) + ")";
    } else {
      return def;
    }
  };

  lcons = function(a, b) {
    return rz(L_cons)(lz(a))(lz(b));
  };

  lconsFrom = function(array) {
    var el, p, _i, _len, _ref3;

    if (array instanceof Array) {
      p = rz(L_nil);
      _ref3 = array.reverse();
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        el = _ref3[_i];
        p = lcons(lconsFrom(el), p);
      }
      return p;
    } else {
      return array;
    }
  };

  assocListProps = null;

  getAssocListProps = function() {
    if (!assocListProps) {
      assocListProps = lcons(lcons('assoc', 'true'), rz(L_nil));
      assocListProps.properties = assocListProps;
    }
    return assocListProps;
  };

  lacons = function(key, value, list) {
    var alist;

    alist = lcons(lcons(key, value), list);
    alist.properties = getAssocListProps();
    return alist;
  };

  global.setLambdaProperties = function(def, props) {
    var k, p, v;

    p = rz(L_nil);
    for (k in props) {
      v = props[k];
      p = lacons(k, lconsFrom(v), p);
    }
    def.properties = p;
    return def;
  };

  memoize = function(func) {
    return "(function(){return " + func + "})";
  };

  dumpAnno = function(ast) {
    if (ast instanceof Leisure_anno) {
      return dumpAnno(getAnnoBody(ast));
    } else {
      return ast;
    }
  };

  genApplyArg = function(arg, names, uniq) {
    if (dumpAnno(arg) instanceof Leisure_apply) {
      return memoize(genUniq(arg, names, uniq));
    } else if (arg instanceof Leisure_ref) {
      return uniqName(getRefName(arg), uniq);
    } else if (arg instanceof Leisure_lit) {
      return "lazy(" + (JSON.stringify(getLitVal(arg))) + ")";
    } else if (arg instanceof Leisure_let) {
      return "function(){" + (genLets(arg, names, uniq)) + "}";
    } else if (dumpAnno(arg) instanceof Leisure_lambda) {
      return memoize(genUniq(arg, names, uniq));
    } else {
      return "function(){return " + (genUniq(arg, names, uniq)) + "}";
    }
  };

  genLets = function(ast, names, uniq) {
    var assigns, decs, _ref3;

    _ref3 = _.foldl(letList(ast, []), (function(result, l) {
      var code, letName, letNames, n, newU, u;

      n = result[0], u = result[1], letNames = result[2], code = result[3];
      newU = addUniq(getLetName(l), n, u);
      letName = uniqName(getLetName(l), newU);
      return [cons(getLetName(l), n), newU, cons(letName, letNames), cons('\n' + letName + ' = ' + genApplyArg(getLetValue(l), n, u), code)];
    }), [names, uniq, Nil, Nil]), names = _ref3[0], uniq = _ref3[1], decs = _ref3[2], assigns = _ref3[3];
    return "\nvar " + (decs.join(', ')) + ";\n" + (assigns.join(';\n')) + ";\nreturn " + (genUniq(getLastLetBody(ast), names, uniq));
  };

  addUniq = function(name, names, uniq) {
    var num, overrides;

    if ((names.find(function(el) {
      return el === name;
    })) !== Nil) {
      overrides = uniq[0], num = uniq[1];
      return [cons(cons(name, "" + name + "_" + num), overrides), num + 1];
    } else {
      return uniq;
    }
  };

  uniqName = function(name, uniq) {
    var kv;

    uniq = uniq[0];
    kv = uniq.find((function(el) {
      return el.head() === name;
    }), uniq);
    return varNameSub((kv !== Nil ? kv.tail() : name));
  };

  letList = function(ast, buf) {
    if (ast instanceof Leisure_let) {
      buf.push(ast);
      return letList(getLetBody(ast), buf);
    } else {
      return buf;
    }
  };

  getLastLetBody = function(ast) {
    if (ast instanceof Leisure_let) {
      return getLastLetBody(getLetBody(ast));
    } else {
      return ast;
    }
  };

  define('runAst', lz(function(ast) {
    var err;

    try {
      return eval("(" + (gen(rz(ast))) + ")");
    } catch (_error) {
      err = _error;
      return rz(L_parseErr)(lz("\n\nParse error: " + err.toString() + "\nAST: "))(ast);
    }
  }));

  curry = function(func, args, pos) {
    if (pos === func.length) {
      return func.apply(null, args.toArray(func.length - 1, []));
    } else {
      return function(arg) {
        return curry(func, simpyCons(arg, args), pos + 1);
      };
    }
  };

  root.gen = gen;

  root.curry = curry;

}).call(this);

/*
*/

})(self)
},{"./ast":1,"./base":2,"./lodash.min":6,"./runtime":10}],5:[function(require,module,exports){
L_runMonads([
  function(){return resolve(L_define)(lazy("true"))(lazy(0))(lazy("true = \\a b . a"))((function(){return setDataType(setType(function(L_a){return function(L_b){return resolve(L_a)}}, 'true'), 'true')}))},
  function(){return resolve(L_define)(lazy("false"))(lazy(0))(lazy("false = \\a b . b"))((function(){return setDataType(setType(function(L_a){return function(L_b){return resolve(L_b)}}, 'false'), 'false')}))},
  function(){return resolve(L_define)(lazy("not"))(lazy(1))(lazy("not b = b false true"))((function(){return function(L_b){return resolve(L_b)(L_false)(L_true)}}))},
  function(){return resolve(L_define)(lazy("and"))(lazy(2))(lazy("and a b = a b false"))((function(){return function(L_a){return function(L_b){return resolve(L_a)(L_b)(L_false)}}}))},
  function(){return resolve(L_define)(lazy("or"))(lazy(2))(lazy("or a b = a true b"))((function(){return function(L_a){return function(L_b){return resolve(L_a)(L_true)(L_b)}}}))},
  function(){return resolve(L_define)(lazy("some"))(lazy(1))(lazy("some x = \\someCase noneCase . someCase x"))((function(){return setDataType(function(L_x){return setType(function(L_someCase){return function(L_noneCase){return resolve(L_someCase)(L_x)}}, 'some')}, 'some')}))},
  function(){return resolve(L_define)(lazy("some2"))(lazy(2))(lazy("some2 a b = \\someCase noneCase . someCase a b"))((function(){return setDataType(function(L_a){return function(L_b){return setType(function(L_someCase){return function(L_noneCase){return resolve(L_someCase)(L_a)(L_b)}}, 'some2')}}, 'some2')}))},
  function(){return resolve(L_define)(lazy("none"))(lazy(0))(lazy("none = \\someCase noneCase . noneCase"))((function(){return setDataType(setType(function(L_someCase){return function(L_noneCase){return resolve(L_noneCase)}}, 'none'), 'none')}))},
  function(){return resolve(L_define)(lazy("isNone"))(lazy(1))(lazy("isNone obj = hasType obj none"))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_none)}}))},
  function(){return resolve(L_define)(lazy("isSome"))(lazy(1))(lazy("isSome obj = hasType obj some"))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_some)}}))},
  function(){return resolve(L_define)(lazy("isSome2"))(lazy(1))(lazy("isSome2 obj = hasType obj some2"))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_some2)}}))},
  function(){return resolve(L_define)(lazy("neq"))(lazy(2))(lazy("neq a b = not (eq a b)"))((function(){return function(L_a){return function(L_b){return resolve(L_not)((function(){return resolve(L_eq)(L_a)(L_b)}))}}}))},
  function(){return resolve(L_define)(lazy("left"))(lazy(1))(lazy("left x = \\lCase rCase . lCase x"))((function(){return setDataType(function(L_x){return setType(function(L_lCase){return function(L_rCase){return resolve(L_lCase)(L_x)}}, 'left')}, 'left')}))},
  function(){return resolve(L_define)(lazy("right"))(lazy(1))(lazy("right x = \\lCase rCase . rCase x"))((function(){return setDataType(function(L_x){return setType(function(L_lCase){return function(L_rCase){return resolve(L_rCase)(L_x)}}, 'right')}, 'right')}))},
  function(){return resolve(L_define)(lazy("strAsc"))(lazy(1))(lazy("strAsc string = _strAsc (assertType 'strAsc string' '*string' string)"))((function(){return function(L_string){return resolve(L__strAsc)((function(){return resolve(L_assertType)(lazy("strAsc string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strChr"))(lazy(1))(lazy("strChr ascii = _strChr (assertType 'strChr string' '*number' ascii)"))((function(){return function(L_ascii){return resolve(L__strChr)((function(){return resolve(L_assertType)(lazy("strChr string"))(lazy("*number"))(L_ascii)}))}}))},
  function(){return resolve(L_define)(lazy("strAt"))(lazy(2))(lazy("strAt string index = _strAt\n  assertType 'strAt string' '*string' string\n  assertType 'strAt index' '*number' index"))((function(){return function(L_string){return function(L_index){return resolve(L__strAt)((function(){return resolve(L_assertType)(lazy("strAt string"))(lazy("*string"))(L_string)}))((function(){return resolve(L_assertType)(lazy("strAt index"))(lazy("*number"))(L_index)}))}}}))},
  function(){return resolve(L_define)(lazy("strStartsWith"))(lazy(2))(lazy("strStartsWith string prefix = _strStartsWith\n  assertType 'strStartsWith string' '*string' string\n  assertType 'strStartsWith prefix' '*string' prefix"))((function(){return function(L_string){return function(L_prefix){return resolve(L__strStartsWith)((function(){return resolve(L_assertType)(lazy("strStartsWith string"))(lazy("*string"))(L_string)}))((function(){return resolve(L_assertType)(lazy("strStartsWith prefix"))(lazy("*string"))(L_prefix)}))}}}))},
  function(){return resolve(L_define)(lazy("strLen"))(lazy(1))(lazy("strLen string = _strLen (assertType 'strLen string' '*string' string)"))((function(){return function(L_string){return resolve(L__strLen)((function(){return resolve(L_assertType)(lazy("strLen string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strToLowerCase"))(lazy(1))(lazy("strToLowerCase string = _strToLowerCase (assertType 'strToLowerCase string' '*string' string)"))((function(){return function(L_string){return resolve(L__strToLowerCase)((function(){return resolve(L_assertType)(lazy("strToLowerCase string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strToUpperCase"))(lazy(1))(lazy("strToUpperCase string = _strToUpperCase (assertType 'strToUpperCase string' '*string' string)"))((function(){return function(L_string){return resolve(L__strToUpperCase)((function(){return resolve(L_assertType)(lazy("strToUpperCase string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strReplace"))(lazy(3))(lazy("strReplace string pat repl = _strReplace\n  assertType 'strReplace string' '*string' string\n  assert (or (hasType pat '*string') (hasType pat '*RegExp')) (strCat (cons 'strStartsWith pat should be type string or RegExp but it is type ' (cons (getType pat) (cons ': ' (cons (show pat) nil))))) pat\n  assertType 'strReplace repl' '*string' repl"))((function(){return function(L_string){return function(L_pat){return function(L_repl){return resolve(L__strReplace)((function(){return resolve(L_assertType)(lazy("strReplace string"))(lazy("*string"))(L_string)}))((function(){return resolve(L_assert)((function(){return resolve(L_or)((function(){return resolve(L_hasType)(L_pat)(lazy("*string"))}))((function(){return resolve(L_hasType)(L_pat)(lazy("*RegExp"))}))}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strStartsWith pat should be type string or RegExp but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_pat)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_pat)}))(L_nil)}))}))}))}))}))(L_pat)}))((function(){return resolve(L_assertType)(lazy("strReplace repl"))(lazy("*string"))(L_repl)}))}}}}))},
  function(){return resolve(L_define)(lazy("strSubstring"))(lazy(3))(lazy("strSubstring str start end = _strSubstring\n  assertType 'strSubstring str' '*string' str\n  assertType 'strSubstring start' '*number' start\n  assertType 'strSubstring end' '*number' end"))((function(){return function(L_str){return function(L_start){return function(L_end){return resolve(L__strSubstring)((function(){return resolve(L_assertType)(lazy("strSubstring str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assertType)(lazy("strSubstring start"))(lazy("*number"))(L_start)}))((function(){return resolve(L_assertType)(lazy("strSubstring end"))(lazy("*number"))(L_end)}))}}}}))},
  function(){return resolve(L_define)(lazy("strSplit"))(lazy(2))(lazy("strSplit str pat = _strSplit\n  assertType 'strSplit str' '*string' str\n  assert (or (hasType pat '*string') (hasType pat '*RegExp')) (strCat (cons 'strSplit pat should be type string or RegExp but it is type ' (cons (getType pat) (cons ': ' (cons (show pat) nil))))) pat"))((function(){return function(L_str){return function(L_pat){return resolve(L__strSplit)((function(){return resolve(L_assertType)(lazy("strSplit str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assert)((function(){return resolve(L_or)((function(){return resolve(L_hasType)(L_pat)(lazy("*string"))}))((function(){return resolve(L_hasType)(L_pat)(lazy("*RegExp"))}))}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strSplit pat should be type string or RegExp but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_pat)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_pat)}))(L_nil)}))}))}))}))}))(L_pat)}))}}}))},
  function(){return resolve(L_define)(lazy("strCat"))(lazy(1))(lazy("strCat list = _strCat\n  assert (isList list) (strCat (cons 'strCat list should be type cons or nil but it is type ' (cons (getType list) (cons ': ' (cons list))))) list"))((function(){return function(L_list){return resolve(L__strCat)((function(){return resolve(L_assert)((function(){return resolve(L_isList)(L_list)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strCat list should be type cons or nil but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_list)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)(L_list)}))}))}))}))}))(L_list)}))}}))},
  function(){return resolve(L_define)(lazy("strAdd"))(lazy(2))(lazy("strAdd str1 str2 = _strAdd (assertType 'strAdd str1' '*string' str1) (assertType 'strAdd str2' '*string' str2)"))((function(){return function(L_str1){return function(L_str2){return resolve(L__strAdd)((function(){return resolve(L_assertType)(lazy("strAdd str1"))(lazy("*string"))(L_str1)}))((function(){return resolve(L_assertType)(lazy("strAdd str2"))(lazy("*string"))(L_str2)}))}}}))},
  function(){return resolve(L_define)(lazy("strMatch"))(lazy(2))(lazy("strMatch str pat = _strMatch\n  assertType 'strMatch str' '*string' str\n  assert (or (hasType pat '*string') (hasType pat '*RegExp')) (strCat (cons 'strMatch pat should be type string or RegExp but it is type ' (cons (getType pat) (cons ': ' (cons (show pat) nil))))) pat"))((function(){return function(L_str){return function(L_pat){return resolve(L__strMatch)((function(){return resolve(L_assertType)(lazy("strMatch str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assert)((function(){return resolve(L_or)((function(){return resolve(L_hasType)(L_pat)(lazy("*string"))}))((function(){return resolve(L_hasType)(L_pat)(lazy("*RegExp"))}))}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strMatch pat should be type string or RegExp but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_pat)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_pat)}))(L_nil)}))}))}))}))}))(L_pat)}))}}}))},
  function(){return resolve(L_define)(lazy("strToList"))(lazy(1))(lazy("strToList str = _strToList (assertType 'strToList str' '*string' str)"))((function(){return function(L_str){return resolve(L__strToList)((function(){return resolve(L_assertType)(lazy("strToList str"))(lazy("*string"))(L_str)}))}}))},
  function(){return resolve(L_define)(lazy("strFromList"))(lazy(1))(lazy("strFromList list = _strFromList\n  assert (isList list) (strCat (cons 'strFromList list should be type cons or nil but it is type ' (cons (getType list) (cons ': ' (cons list))))) list"))((function(){return function(L_list){return resolve(L__strFromList)((function(){return resolve(L_assert)((function(){return resolve(L_isList)(L_list)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strFromList list should be type cons or nil but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_list)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)(L_list)}))}))}))}))}))(L_list)}))}}))},
  function(){return resolve(L_define)(lazy("regexp"))(lazy(1))(lazy("regexp str = _regexp (assertType 'regexp str' '*string' str)"))((function(){return function(L_str){return resolve(L__regexp)((function(){return resolve(L_assertType)(lazy("regexp str"))(lazy("*string"))(L_str)}))}}))},
  function(){return resolve(L_define)(lazy("regexpFlags"))(lazy(2))(lazy("regexpFlags str flags = _regexpFlags\n  assertType 'regexp str' '*string' str\n  assertType 'regexp flags' '*string' flags"))((function(){return function(L_str){return function(L_flags){return resolve(L__regexpFlags)((function(){return resolve(L_assertType)(lazy("regexp str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assertType)(lazy("regexp flags"))(lazy("*string"))(L_flags)}))}}}))},
  function(){return resolve(L_define)(lazy("jsonParse"))(lazy(3))(lazy("jsonParse str failure success = _jsonParse\n  assertType 'jsonParse str' '*string' str\n  failure\n  success"))((function(){return function(L_str){return function(L_failure){return function(L_success){return resolve(L__jsonParse)((function(){return resolve(L_assertType)(lazy("jsonParse str"))(lazy("*string"))(L_str)}))(L_failure)(L_success)}}}}))},
  function(){return resolve(L_define)(lazy("show"))(lazy(1))(lazy("show x = _show x"))((function(){return function(L_x){return resolve(L__show)(L_x)}}))},
  function(){return resolve(L_define)(lazy("id"))(lazy(1))(lazy("id x = x"))((function(){return function(L_x){return resolve(L_x)}}))},
  function(){return resolve(L_define)(lazy("compose"))(lazy(2))(lazy("compose f g = \\x . f (g x)"))((function(){return setDataType(function(L_f){return function(L_g){return setType(function(L_x){return resolve(L_f)((function(){return resolve(L_g)(L_x)}))}, 'compose')}}, 'compose')}))},
  function(){return resolve(L_define)(lazy("flip"))(lazy(1))(lazy("flip func = \\x y . func y x"))((function(){return setDataType(function(L_func){return setType(function(L_x){return function(L_y){return resolve(L_func)(L_y)(L_x)}}, 'flip')}, 'flip')}))},
  function(){return resolve(L_define)(lazy("cons"))(lazy(2))(lazy("cons a b = \\f . f a b"))((function(){return setDataType(function(L_a){return function(L_b){return setType(function(L_f){return resolve(L_f)(L_a)(L_b)}, 'cons')}}, 'cons')}))},
  function(){return resolve(L_define)(lazy("isCons"))(lazy(1))(lazy("isCons c = hasType c cons"))((function(){return function(L_c){return resolve(L_hasType)(L_c)(L_cons)}}))},
  function(){return resolve(L_define)(lazy("isList"))(lazy(1))(lazy("isList l = or (hasType l cons) (hasType l nil)"))((function(){return function(L_l){return resolve(L_or)((function(){return resolve(L_hasType)(L_l)(L_cons)}))((function(){return resolve(L_hasType)(L_l)(L_nil)}))}}))},
  function(){return resolve(L_define)(lazy("assertType"))(lazy(3))(lazy("assertType msg type value = assert (hasType value type) (strCat (cons msg (cons ' should be type ' (cons (getDataType type) (cons ', but its type is ' (cons (getType value) (cons ': ' (cons (show value) nil)))))))) value"))((function(){return function(L_msg){return function(L_type){return function(L_value){return resolve(L_assert)((function(){return resolve(L_hasType)(L_value)(L_type)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_msg)((function(){return resolve(L_cons)(lazy(" should be type "))((function(){return resolve(L_cons)((function(){return resolve(L_getDataType)(L_type)}))((function(){return resolve(L_cons)(lazy(", but its type is "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_value)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_value)}))(L_nil)}))}))}))}))}))}))}))}))(L_value)}}}}))},
  function(){return resolve(L_define)(lazy("nil"))(lazy(0))(lazy("nil = \\a b . b"))((function(){return setDataType(setType(function(L_a){return function(L_b){return resolve(L_b)}}, 'nil'), 'nil')}))},
  function(){return resolve(L_define)(lazy("isNil"))(lazy(1))(lazy("isNil n = hasType n nil"))((function(){return function(L_n){return resolve(L_hasType)(L_n)(L_nil)}}))},
  function(){return resolve(L_define)(lazy("head"))(lazy(1))(lazy("head l = l \\h t . h"))((function(){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return resolve(L_h)}}}))}}))},
  function(){return resolve(L_define)(lazy("tail"))(lazy(1))(lazy("tail l = l \\h t . t"))((function(){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return resolve(L_t)}}}))}}))},
  function(){return resolve(L_define)(lazy("last"))(lazy(1))(lazy("last l = isNil (tail l)\n  head l\n  last (tail l)"))((function(){return function(L_l){return resolve(L_isNil)((function(){return resolve(L_tail)(L_l)}))((function(){return resolve(L_head)(L_l)}))((function(){return resolve(L_last)((function(){return resolve(L_tail)(L_l)}))}))}}))},
  function(){return resolve(L_define)(lazy("removeLast"))(lazy(1))(lazy("removeLast l = isNil (tail l)\n  nil\n  cons (head l) (removeLast (tail l))"))((function(){return function(L_l){return resolve(L_isNil)((function(){return resolve(L_tail)(L_l)}))(L_nil)((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_l)}))((function(){return resolve(L_removeLast)((function(){return resolve(L_tail)(L_l)}))}))}))}}))},
  function(){return resolve(L_define)(lazy("length"))(lazy(1))(lazy("length list = isCons list\n  + 1 (length (tail list))\n  0"))((function(){return function(L_list){return resolve(L_isCons)(L_list)((function(){return resolve(L_$o)(lazy(1))((function(){return resolve(L_length)((function(){return resolve(L_tail)(L_list)}))}))}))(lazy(0))}}))},
  function(){return resolve(L_define)(lazy("append"))(lazy(2))(lazy("append a b = isNil a\n  b\n  cons (head a) (append (tail a) b)"))((function(){return function(L_a){return function(L_b){return resolve(L_isNil)(L_a)(L_b)((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_a)}))((function(){return resolve(L_append)((function(){return resolve(L_tail)(L_a)}))(L_b)}))}))}}}))},
  function(){return resolve(L_define)(lazy("flatten"))(lazy(1))(lazy("flatten list = isCons list\n  subflatten list nil\n  list"))((function(){return function(L_list){return resolve(L_isCons)(L_list)((function(){return resolve(L_subflatten)(L_list)(L_nil)}))(L_list)}}))},
  function(){return resolve(L_define)(lazy("subflatten"))(lazy(2))(lazy("subflatten list result = isNil list\n  result\n  isCons list\n    subflatten (head list) (subflatten (tail list) result)\n    cons list result"))((function(){return function(L_list){return function(L_result){return resolve(L_isNil)(L_list)(L_result)((function(){return resolve(L_isCons)(L_list)((function(){return resolve(L_subflatten)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_subflatten)((function(){return resolve(L_tail)(L_list)}))(L_result)}))}))((function(){return resolve(L_cons)(L_list)(L_result)}))}))}}}))},
  function(){return resolve(L_define)(lazy("reverse"))(lazy(1))(lazy("reverse l = rev l nil"))((function(){return function(L_l){return resolve(L_rev)(L_l)(L_nil)}}))},
  function(){return resolve(L_define)(lazy("rev"))(lazy(2))(lazy("rev l result = isNil l\n  result\n  rev (tail l) (cons (head l) result)"))((function(){return function(L_l){return function(L_result){return resolve(L_isNil)(L_l)(L_result)((function(){return resolve(L_rev)((function(){return resolve(L_tail)(L_l)}))((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_l)}))(L_result)}))}))}}}))},
  function(){return resolve(L_define)(lazy("filter"))(lazy(2))(lazy("filter func list = isNil list\n  nil\n  func (head list) (cons (head list)) id (filter func (tail list))"))((function(){return function(L_func){return function(L_list){return resolve(L_isNil)(L_list)(L_nil)((function(){return resolve(L_func)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_list)}))}))(L_id)((function(){return resolve(L_filter)(L_func)((function(){return resolve(L_tail)(L_list)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("find"))(lazy(2))(lazy("find predicate list = isNil list\n  none\n  predicate (head list) (some (head list)) (find predicate (tail list))"))((function(){return function(L_predicate){return function(L_list){return resolve(L_isNil)(L_list)(L_none)((function(){return resolve(L_predicate)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_some)((function(){return resolve(L_head)(L_list)}))}))((function(){return resolve(L_find)(L_predicate)((function(){return resolve(L_tail)(L_list)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("contains"))(lazy(2))(lazy("contains list item = find (\\el . eq el item) list (\\x . true) false"))((function(){return function(L_list){return function(L_item){return resolve(L_find)((function(){return function(L_el){return resolve(L_eq)(L_el)(L_item)}}))(L_list)((function(){return function(L_x){return resolve(L_true)}}))(L_false)}}}))},
  function(){return resolve(L_define)(lazy("map"))(lazy(2))(lazy("map func l = isNil l\n  nil\n  cons (func (head l)) (map func (tail l))"))((function(){return function(L_func){return function(L_l){return resolve(L_isNil)(L_l)(L_nil)((function(){return resolve(L_cons)((function(){return resolve(L_func)((function(){return resolve(L_head)(L_l)}))}))((function(){return resolve(L_map)(L_func)((function(){return resolve(L_tail)(L_l)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("mapSave"))(lazy(2))(lazy("mapSave func l = isNil l\n  nil\n  \\\\\n    newH = func (head l)\n    newT = mapSave func (tail l)\n    .\n    and (eq newH (head l)) (eq newT (tail l))\n      l\n      cons newH newT"))((function(){return function(L_func){return function(L_l){return resolve(L_isNil)(L_l)(L_nil)(function(){
var L_newT, L_newH;

L_newT = (function(){return resolve(L_mapSave)(L_func)((function(){return resolve(L_tail)(L_l)}))});

L_newH = (function(){return resolve(L_func)((function(){return resolve(L_head)(L_l)}))});
return resolve(L_and)((function(){return resolve(L_eq)(L_newH)((function(){return resolve(L_head)(L_l)}))}))((function(){return resolve(L_eq)(L_newT)((function(){return resolve(L_tail)(L_l)}))}))(L_l)((function(){return resolve(L_cons)(L_newH)(L_newT)}))})}}}))},
  function(){return resolve(L_define)(lazy("foldl"))(lazy(3))(lazy("foldl func initialValue l = l (\\h t D . foldl func (func initialValue h) t) initialValue"))((function(){return function(L_func){return function(L_initialValue){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_foldl)(L_func)((function(){return resolve(L_func)(L_initialValue)(L_h)}))(L_t)}}}}))(L_initialValue)}}}}))},
  function(){return resolve(L_define)(lazy("foldl1"))(lazy(2))(lazy("foldl1 func l = l \\h t . foldl func h t"))((function(){return function(L_func){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return resolve(L_foldl)(L_func)(L_h)(L_t)}}}))}}}))},
  function(){return resolve(L_define)(lazy("foldr"))(lazy(3))(lazy("foldr func initialValue list = list\n  \\h t D . func h (foldr func initialValue t)\n  initialValue"))((function(){return function(L_func){return function(L_initialValue){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_func)(L_h)((function(){return resolve(L_foldr)(L_func)(L_initialValue)(L_t)}))}}}}))(L_initialValue)}}}}))},
  function(){return resolve(L_define)(lazy("foldr1"))(lazy(2))(lazy("foldr1 func list = list \\h t . isNil t\n  h\n  func h (foldr1 func t)"))((function(){return function(L_func){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_isNil)(L_t)(L_h)((function(){return resolve(L_func)(L_h)((function(){return resolve(L_foldr1)(L_func)(L_t)}))}))}}}))}}}))},
  function(){return resolve(L_define)(lazy("intersperse"))(lazy(2))(lazy("intersperse list element = list (\\h t D .\n  isNil t\n    list\n    cons h (cons element (intersperse t element))) nil"))((function(){return function(L_list){return function(L_element){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isNil)(L_t)(L_list)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)(L_element)((function(){return resolve(L_intersperse)(L_t)(L_element)}))}))}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("join"))(lazy(2))(lazy("join list el = strCat (intersperse list el)"))((function(){return function(L_list){return function(L_el){return resolve(L_strCat)((function(){return resolve(L_intersperse)(L_list)(L_el)}))}}}))},
  function(){return resolve(L_define)(lazy("findIndex"))(lazy(2))(lazy("findIndex func list = idx list func 0"))((function(){return function(L_func){return function(L_list){return resolve(L_idx)(L_list)(L_func)(lazy(0))}}}))},
  function(){return resolve(L_define)(lazy("idx"))(lazy(3))(lazy("idx list func pos = list\n  \\h t D . func h\n    pos\n    idx t func (+ 1 pos)\n  -1"))((function(){return function(L_list){return function(L_func){return function(L_pos){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_func)(L_h)(L_pos)((function(){return resolve(L_idx)(L_t)(L_func)((function(){return resolve(L_$o)(lazy(1))(L_pos)}))}))}}}}))(lazy(-1))}}}}))},
  function(){return resolve(L_define)(lazy("index"))(lazy(2))(lazy("index list el = find (\\item . == el item) list"))((function(){return function(L_list){return function(L_el){return resolve(L_find)((function(){return function(L_item){return resolve(L_$p$p)(L_el)(L_item)}}))(L_list)}}}))},
  function(){return resolve(L_define)(lazy("assertAlist"))(lazy(3))(lazy("assertAlist msg value result = assert (isAlist value) (strCat (cons msg (cons ' should be a association list, but it is not; its type is ' (cons (getType value) (cons ': ' (cons (show value) nil)))))) result"))((function(){return function(L_msg){return function(L_value){return function(L_result){return resolve(L_assert)((function(){return resolve(L_isAlist)(L_value)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_msg)((function(){return resolve(L_cons)(lazy(" should be a association list, but it is not; its type is "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_value)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_value)}))(L_nil)}))}))}))}))}))}))(L_result)}}}}))},
  function(){return resolve(L_define)(lazy("acons"))(lazy(3))(lazy("acons k v alist = assertAlist \"acons alist\" alist (\\@ type cons . \\f . \\@ assoc true . f (cons k v) alist)"))((function(){return function(L_k){return function(L_v){return function(L_alist){return resolve(L_assertAlist)(lazy("acons alist"))(L_alist)((function(){return setType(setLambdaProperties(function(L_f){return resolve(L_f)((function(){return resolve(L_cons)(L_k)(L_v)}))(L_alist)}, {"assoc":"true"}), 'cons')}))}}}}))},
  function(){return resolve(L_define)(lazy("assoc"))(lazy(2))(lazy("assoc k alist  = find (\\el . eq k (head el)) alist (\\cell . cell \\head tail . some tail) none"))((function(){return function(L_k){return function(L_alist){return resolve(L_find)((function(){return function(L_el){return resolve(L_eq)(L_k)((function(){return resolve(L_head)(L_el)}))}}))(L_alist)((function(){return function(L_cell){return resolve(L_cell)((function(){return function(L_head){return function(L_tail){return resolve(L_some)(L_tail)}}}))}}))(L_none)}}}))},
  function(){return resolve(L_define)(lazy("rassoc"))(lazy(2))(lazy("rassoc v alist = find (\\el . eq v (tail el)) alist (\\cell . cell \\head tail . some head) none"))((function(){return function(L_v){return function(L_alist){return resolve(L_find)((function(){return function(L_el){return resolve(L_eq)(L_v)((function(){return resolve(L_tail)(L_el)}))}}))(L_alist)((function(){return function(L_cell){return resolve(L_cell)((function(){return function(L_head){return function(L_tail){return resolve(L_some)(L_head)}}}))}}))(L_none)}}}))},
  function(){return resolve(L_define)(lazy("isAlist"))(lazy(1))(lazy("isAlist obj = or (isNil obj) (hasProperty obj 'assoc')"))((function(){return function(L_obj){return resolve(L_or)((function(){return resolve(L_isNil)(L_obj)}))((function(){return resolve(L_hasProperty)(L_obj)(lazy("assoc"))}))}}))},
  function(){return resolve(L_define)(lazy("aconsPair"))(lazy(2))(lazy("aconsPair keyValue list = \\@ type cons . \\f . \\@ assoc true . f keyValue list"))((function(){return function(L_keyValue){return function(L_list){return setType(setLambdaProperties(function(L_f){return resolve(L_f)(L_keyValue)(L_list)}, {"assoc":"true"}), 'cons')}}}))},
  function(){return resolve(L_define)(lazy("appendAlist"))(lazy(2))(lazy("appendAlist a b = isNil a\n  b\n  aconsPair (head a) (appendAlist (tail a) b)"))((function(){return function(L_a){return function(L_b){return resolve(L_isNil)(L_a)(L_b)((function(){return resolve(L_aconsPair)((function(){return resolve(L_head)(L_a)}))((function(){return resolve(L_appendAlist)((function(){return resolve(L_tail)(L_a)}))(L_b)}))}))}}}))},
  function(){return resolve(L_define)(lazy("keys"))(lazy(1))(lazy("keys list = map (\\l . head l) list"))((function(){return function(L_list){return resolve(L_map)((function(){return function(L_l){return resolve(L_head)(L_l)}}))(L_list)}}))},
  function(){return resolve(L_define)(lazy("getProperty"))(lazy(2))(lazy("getProperty func prop = getProperties func\n  \\props . assoc prop props\n  none"))((function(){return function(L_func){return function(L_prop){return resolve(L_getProperties)(L_func)((function(){return function(L_props){return resolve(L_assoc)(L_prop)(L_props)}}))(L_none)}}}))},
  function(){return resolve(L_define)(lazy("hasProperty"))(lazy(2))(lazy("hasProperty func prop = getProperty func prop\n  \\_ . true\n  false"))((function(){return function(L_func){return function(L_prop){return resolve(L_getProperty)(L_func)(L_prop)((function(){return function(L__){return resolve(L_true)}}))(L_false)}}}))},
  function(){return resolve(L_define)(lazy("quicksort"))(lazy(2))(lazy("quicksort less list = (qs less list) nil"))((function(){return function(L_less){return function(L_list){return resolve(L_qs)(L_less)(L_list)(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("qs"))(lazy(2))(lazy("qs sortedFunc list = list\n  \\h t D . \\\\\n    greater = filter (sortedFunc h) t\n    lesser = filter (compose not (sortedFunc h)) t\n    .\n    \\rest . (qs sortedFunc lesser) (cons h ((qs sortedFunc greater) rest))\n  id"))((function(){return function(L_sortedFunc){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return (function(){

var L_lesser, L_greater;

L_lesser = (function(){return resolve(L_filter)((function(){return resolve(L_compose)(L_not)((function(){return resolve(L_sortedFunc)(L_h)}))}))(L_t)});

L_greater = (function(){return resolve(L_filter)((function(){return resolve(L_sortedFunc)(L_h)}))(L_t)});
return function(L_rest){return resolve(L_qs)(L_sortedFunc)(L_lesser)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_qs)(L_sortedFunc)(L_greater)(L_rest)}))}))}})()}}}}))(L_id)}}}))},
  function(){return resolve(L_define)(lazy("insertSorted"))(lazy(3))(lazy("insertSorted sortFunc item list = list\n  \\h t D . sortFunc item h (cons item list) (cons h (insertSorted sortFunc item t))\n  cons item nil"))((function(){return function(L_sortFunc){return function(L_item){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_sortFunc)(L_item)(L_h)((function(){return resolve(L_cons)(L_item)(L_list)}))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_insertSorted)(L_sortFunc)(L_item)(L_t)}))}))}}}}))((function(){return resolve(L_cons)(L_item)(L_nil)}))}}}}))},
  function(){return resolve(L_define)(lazy("token"))(lazy(2))(lazy("token txt pos = \\f . f txt pos"))((function(){return setDataType(function(L_txt){return function(L_pos){return setType(function(L_f){return resolve(L_f)(L_txt)(L_pos)}, 'token')}}, 'token')}))},
  function(){return resolve(L_define)(lazy("tokenString"))(lazy(1))(lazy("tokenString tok = tok \\t p . t"))((function(){return function(L_tok){return resolve(L_tok)((function(){return function(L_t){return function(L_p){return resolve(L_t)}}}))}}))},
  function(){return resolve(L_define)(lazy("tokenPos"))(lazy(1))(lazy("tokenPos tok = tok \\t p . p"))((function(){return function(L_tok){return resolve(L_tok)((function(){return function(L_t){return function(L_p){return resolve(L_p)}}}))}}))},
  function(){return resolve(L_define)(lazy("isToken"))(lazy(1))(lazy("isToken t = hasType t token"))((function(){return function(L_t){return resolve(L_hasType)(L_t)(L_token)}}))},
  function(){return resolve(L_define)(lazy("parens"))(lazy(3))(lazy("parens start end content = \\f . f start end content"))((function(){return setDataType(function(L_start){return function(L_end){return function(L_content){return setType(function(L_f){return resolve(L_f)(L_start)(L_end)(L_content)}, 'parens')}}}, 'parens')}))},
  function(){return resolve(L_define)(lazy("parensStart"))(lazy(1))(lazy("parensStart p = p \\s e c . s"))((function(){return function(L_p){return resolve(L_p)((function(){return function(L_s){return function(L_e){return function(L_c){return resolve(L_s)}}}}))}}))},
  function(){return resolve(L_define)(lazy("parensEnd"))(lazy(1))(lazy("parensEnd p = p \\s e c . e"))((function(){return function(L_p){return resolve(L_p)((function(){return function(L_s){return function(L_e){return function(L_c){return resolve(L_e)}}}}))}}))},
  function(){return resolve(L_define)(lazy("parensContent"))(lazy(1))(lazy("parensContent p = p \\s e c . c"))((function(){return function(L_p){return resolve(L_p)((function(){return function(L_s){return function(L_e){return function(L_c){return resolve(L_c)}}}}))}}))},
  function(){return resolve(L_define)(lazy("isParens"))(lazy(1))(lazy("isParens p = hasType p parens"))((function(){return function(L_p){return resolve(L_hasType)(L_p)(L_parens)}}))},
  function(){return resolve(L_define)(lazy("makeParens"))(lazy(3))(lazy("makeParens start end content =\n  and (isCons content) (isNil (tail content))\n    makeParens start end (head content)\n    or (isToken content) (isParens content)\n      content\n      parens start end content"))((function(){return function(L_start){return function(L_end){return function(L_content){return resolve(L_and)((function(){return resolve(L_isCons)(L_content)}))((function(){return resolve(L_isNil)((function(){return resolve(L_tail)(L_content)}))}))((function(){return resolve(L_makeParens)(L_start)(L_end)((function(){return resolve(L_head)(L_content)}))}))((function(){return resolve(L_or)((function(){return resolve(L_isToken)(L_content)}))((function(){return resolve(L_isParens)(L_content)}))(L_content)((function(){return resolve(L_parens)(L_start)(L_end)(L_content)}))}))}}}}))},
  function(){return resolve(L_define)(lazy("parensFromToks"))(lazy(3))(lazy("parensFromToks left right content = \\\\\n  start = tokenPos left\n  end = + (tokenPos right) (strLen (tokenString right))\n  .\n  parens start end content"))((function(){return function(L_left){return function(L_right){return function(L_content){return (function(){

var L_end, L_start;

L_end = (function(){return resolve(L_$o)((function(){return resolve(L_tokenPos)(L_right)}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_right)}))}))});

L_start = (function(){return resolve(L_tokenPos)(L_left)});
return resolve(L_parens)(L_start)(L_end)(L_content)})()}}}}))},
  function(){return resolve(L_define)(lazy("stripParens"))(lazy(1))(lazy("stripParens p = isParens p (parensContent p) p"))((function(){return function(L_p){return resolve(L_isParens)(L_p)((function(){return resolve(L_parensContent)(L_p)}))(L_p)}}))},
  function(){return resolve(L_define)(lazy("parseErr"))(lazy(2))(lazy("parseErr msg1 msg2 = \\f . f (strCat (cons msg1 (cons msg2 nil)))"))((function(){return setDataType(function(L_msg1){return function(L_msg2){return setType(function(L_f){return resolve(L_f)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_msg1)((function(){return resolve(L_cons)(L_msg2)(L_nil)}))}))}))}, 'parseErr')}}, 'parseErr')}))},
  function(){return resolve(L_define)(lazy("parseErrMsg"))(lazy(1))(lazy("parseErrMsg err = err \\m . m"))((function(){return function(L_err){return resolve(L_err)((function(){return function(L_m){return resolve(L_m)}}))}}))},
  function(){return resolve(L_define)(lazy("isParseErr"))(lazy(1))(lazy("isParseErr thing = hasType thing parseErr"))((function(){return function(L_thing){return resolve(L_hasType)(L_thing)(L_parseErr)}}))},
  function(){return resolve(L_define)(lazy("emptyToken"))(lazy(0))(lazy("emptyToken = regexp '^\\\\n[ \\\\i]*(#|$)'"))((function(){return resolve(L_regexp)(lazy("^\\n[ \\i]*(#|$)"))}))},
  function(){return resolve(L_define)(lazy("makeTokens"))(lazy(2))(lazy("makeTokens strings start = strings (\\h t D . makeMoreTokens h t start) nil"))((function(){return function(L_strings){return function(L_start){return resolve(L_strings)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_makeMoreTokens)(L_h)(L_t)(L_start)}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("makeMoreTokens"))(lazy(3))(lazy("makeMoreTokens h t start = \\\\\n  next = makeTokens t (+ start (strLen h))\n  .\n  and (strMatches h emptyToken) (or (isNil t) (strStartsWith (head t) '\\n'))\n    makeTokens t (+ start (strLen h))\n    or (strStartsWith h ' ') (strStartsWith h '#')\n      next\n      and (strStartsWith h '\\n') (strStartsWith (head t) '#')\n        makeTokens (tail t) (+ start (+ (strLen h) (strLen (head t))))\n        cons (token h start) next"))((function(){return function(L_h){return function(L_t){return function(L_start){return (function(){

var L_next;

L_next = (function(){return resolve(L_makeTokens)(L_t)((function(){return resolve(L_$o)(L_start)((function(){return resolve(L_strLen)(L_h)}))}))});
return resolve(L_and)((function(){return resolve(L_strMatches)(L_h)(L_emptyToken)}))((function(){return resolve(L_or)((function(){return resolve(L_isNil)(L_t)}))((function(){return resolve(L_strStartsWith)((function(){return resolve(L_head)(L_t)}))(lazy("\n"))}))}))((function(){return resolve(L_makeTokens)(L_t)((function(){return resolve(L_$o)(L_start)((function(){return resolve(L_strLen)(L_h)}))}))}))((function(){return resolve(L_or)((function(){return resolve(L_strStartsWith)(L_h)(lazy(" "))}))((function(){return resolve(L_strStartsWith)(L_h)(lazy("#"))}))(L_next)((function(){return resolve(L_and)((function(){return resolve(L_strStartsWith)(L_h)(lazy("\n"))}))((function(){return resolve(L_strStartsWith)((function(){return resolve(L_head)(L_t)}))(lazy("#"))}))((function(){return resolve(L_makeTokens)((function(){return resolve(L_tail)(L_t)}))((function(){return resolve(L_$o)(L_start)((function(){return resolve(L_$o)((function(){return resolve(L_strLen)(L_h)}))((function(){return resolve(L_strLen)((function(){return resolve(L_head)(L_t)}))}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_token)(L_h)(L_start)}))(L_next)}))}))}))})()}}}}))},
  function(){return resolve(L_define)(lazy("splitTokens"))(lazy(2))(lazy("splitTokens str pat = filter (\\s . not (eq s '')) (basicSplitTokens str pat true)"))((function(){return function(L_str){return function(L_pat){return resolve(L_filter)((function(){return function(L_s){return resolve(L_not)((function(){return resolve(L_eq)(L_s)(lazy(""))}))}}))((function(){return resolve(L_basicSplitTokens)(L_str)(L_pat)(L_true)}))}}}))},
  function(){return resolve(L_define)(lazy("numberPat"))(lazy(0))(lazy("numberPat = regexp '-?([0-9]+(\\\\.[0-9]+)?|\\\\.[0-9]+)'"))((function(){return resolve(L_regexp)(lazy("-?([0-9]+(\\.[0-9]+)?|\\.[0-9]+)"))}))},
  function(){return resolve(L_define)(lazy("matchOffset"))(lazy(2))(lazy("matchOffset str match = isNil match\n  strLen str\n  head (tail (tail match))"))((function(){return function(L_str){return function(L_match){return resolve(L_isNil)(L_match)((function(){return resolve(L_strLen)(L_str)}))((function(){return resolve(L_head)((function(){return resolve(L_tail)((function(){return resolve(L_tail)(L_match)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("basicSplitTokens"))(lazy(3))(lazy("basicSplitTokens str pat prevIsDel = == str ''\n  nil\n  \\\\\n    num = strMatch str numberPat\n    del = strMatch str pat\n    numOffset = matchOffset str num\n    delOffset = matchOffset str del\n    select = and (== numOffset 0) prevIsDel\n      \\del num first . num\n      == delOffset 0\n        \\del num first . del\n        \\del num first . first\n    first = select (head del) (head num) (strSubstring str 0 delOffset)\n    .\n    cons\n      first\n      basicSplitTokens\n        strSubstring str (strLen first) 0\n        pat\n        select true false false"))((function(){return function(L_str){return function(L_pat){return function(L_prevIsDel){return resolve(L_$p$p)(L_str)(lazy(""))(L_nil)(function(){
var L_first, L_select, L_delOffset, L_numOffset, L_del, L_num;

L_first = (function(){return resolve(L_select)((function(){return resolve(L_head)(L_del)}))((function(){return resolve(L_head)(L_num)}))((function(){return resolve(L_strSubstring)(L_str)(lazy(0))(L_delOffset)}))});

L_select = (function(){return resolve(L_and)((function(){return resolve(L_$p$p)(L_numOffset)(lazy(0))}))(L_prevIsDel)((function(){return function(L_del_0){return function(L_num_1){return function(L_first){return resolve(L_num_1)}}}}))((function(){return resolve(L_$p$p)(L_delOffset)(lazy(0))((function(){return function(L_del_0){return function(L_num_1){return function(L_first){return resolve(L_del_0)}}}}))((function(){return function(L_del_0){return function(L_num_1){return function(L_first){return resolve(L_first)}}}}))}))});

L_delOffset = (function(){return resolve(L_matchOffset)(L_str)(L_del)});

L_numOffset = (function(){return resolve(L_matchOffset)(L_str)(L_num)});

L_del = (function(){return resolve(L_strMatch)(L_str)(L_pat)});

L_num = (function(){return resolve(L_strMatch)(L_str)(L_numberPat)});
return resolve(L_cons)(L_first)((function(){return resolve(L_basicSplitTokens)((function(){return resolve(L_strSubstring)(L_str)((function(){return resolve(L_strLen)(L_first)}))(lazy(0))}))(L_pat)((function(){return resolve(L_select)(L_true)(L_false)(L_false)}))}))})}}}}))},
  function(){return resolve(L_define)(lazy("tokens"))(lazy(2))(lazy("tokens str pat = makeTokens (splitTokens str pat) 0"))((function(){return function(L_str){return function(L_pat){return resolve(L_makeTokens)((function(){return resolve(L_splitTokens)(L_str)(L_pat)}))(lazy(0))}}}))},
  function(){return resolve(L_define)(lazy("isString"))(lazy(1))(lazy("isString s = == (getType s) '*string'"))((function(){return function(L_s){return resolve(L_$p$p)((function(){return resolve(L_getType)(L_s)}))(lazy("*string"))}}))},
  function(){return resolve(L_define)(lazy("isNumber"))(lazy(1))(lazy("isNumber s = == (getType s) '*number'"))((function(){return function(L_s){return resolve(L_$p$p)((function(){return resolve(L_getType)(L_s)}))(lazy("*number"))}}))},
  function(){return resolve(L_define)(lazy("isTokenString"))(lazy(2))(lazy("isTokenString tok str = or\n  and (isToken tok) (eq (tokenString tok) str)\n  and (isString tok) (eq tok str)"))((function(){return function(L_tok){return function(L_str){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_isToken)(L_tok)}))((function(){return resolve(L_eq)((function(){return resolve(L_tokenString)(L_tok)}))(L_str)}))}))((function(){return resolve(L_and)((function(){return resolve(L_isString)(L_tok)}))((function(){return resolve(L_eq)(L_tok)(L_str)}))}))}}}))},
  function(){return resolve(L_define)(lazy("isTokenStart"))(lazy(2))(lazy("isTokenStart tok str = or\n  and (isToken tok) (strStartsWith (tokenString tok) str)\n  and (isString tok) (strStartsWith tok str)"))((function(){return function(L_tok){return function(L_str){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_isToken)(L_tok)}))((function(){return resolve(L_strStartsWith)((function(){return resolve(L_tokenString)(L_tok)}))(L_str)}))}))((function(){return resolve(L_and)((function(){return resolve(L_isString)(L_tok)}))((function(){return resolve(L_strStartsWith)(L_tok)(L_str)}))}))}}}))},
  function(){return resolve(L_define)(lazy("strTokenString"))(lazy(1))(lazy("strTokenString tok = withToken tok nil \\str pos . str"))((function(){return function(L_tok){return resolve(L_withToken)(L_tok)(L_nil)((function(){return function(L_str){return function(L_pos){return resolve(L_str)}}}))}}))},
  function(){return resolve(L_define)(lazy("withToken"))(lazy(3))(lazy("withToken tok nonTokCase tokCase = isToken tok\n  tok tokCase\n  isString tok\n    tokCase tok -1\n    nonTokCase"))((function(){return function(L_tok){return function(L_nonTokCase){return function(L_tokCase){return resolve(L_isToken)(L_tok)((function(){return resolve(L_tok)(L_tokCase)}))((function(){return resolve(L_isString)(L_tok)((function(){return resolve(L_tokCase)(L_tok)(lazy(-1))}))(L_nonTokCase)}))}}}}))},
  function(){return resolve(L_define)(lazy("withCons"))(lazy(3))(lazy("withCons l nilCase cont = isCons l (l (\\h t D . cont h t) nilCase) nilCase"))((function(){return function(L_l){return function(L_nilCase){return function(L_cont){return resolve(L_isCons)(L_l)((function(){return resolve(L_l)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_cont)(L_h)(L_t)}}}}))(L_nilCase)}))(L_nilCase)}}}}))},
  function(){return resolve(L_define)(lazy("ifNotErr"))(lazy(2))(lazy("ifNotErr thing cont = hasType thing parseErr thing (cont thing)"))((function(){return function(L_thing){return function(L_cont){return resolve(L_hasType)(L_thing)(L_parseErr)(L_thing)((function(){return resolve(L_cont)(L_thing)}))}}}))},
  function(){return resolve(L_define)(lazy("parseToks"))(lazy(2))(lazy("parseToks toks groups =\n  isNil toks nil\n    ifNotErr (parseTok toks groups) \\list . list \\h t .\n      ifNotErr (parseToks t groups) \\res .\n        cons h\n          and (isCons res) (isBlockStart (head res))\n            cons res nil\n            res"))((function(){return function(L_toks){return function(L_groups){return resolve(L_isNil)(L_toks)(L_nil)((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_ifNotErr)((function(){return resolve(L_parseToks)(L_t)(L_groups)}))((function(){return function(L_res){return resolve(L_cons)(L_h)((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_res)}))((function(){return resolve(L_isBlockStart)((function(){return resolve(L_head)(L_res)}))}))((function(){return resolve(L_cons)(L_res)(L_nil)}))(L_res)}))}}))}}}))}}))}))}}}))},
  function(){return resolve(L_define)(lazy("parseTok"))(lazy(2))(lazy("parseTok toks groups = withCons toks nil \\h t .\n  withToken h toks \\txt pos .\n    assoc txt groups\n      \\close . parseGroup h t nil close groups\n      isTokenStart h '\\n' (parseIndent h t nil groups)\n        toks"))((function(){return function(L_toks){return function(L_groups){return resolve(L_withCons)(L_toks)(L_nil)((function(){return function(L_h){return function(L_t){return resolve(L_withToken)(L_h)(L_toks)((function(){return function(L_txt){return function(L_pos){return resolve(L_assoc)(L_txt)(L_groups)((function(){return function(L_close){return resolve(L_parseGroup)(L_h)(L_t)(L_nil)(L_close)(L_groups)}}))((function(){return resolve(L_isTokenStart)(L_h)(lazy("\n"))((function(){return resolve(L_parseIndent)(L_h)(L_t)(L_nil)(L_groups)}))(L_toks)}))}}}))}}}))}}}))},
  function(){return resolve(L_define)(lazy("parseGroup"))(lazy(5))(lazy("parseGroup left toks gr close groups = withCons toks (parseErr 'Unterminated group starting ' (loc left))\n  \\h t . isTokenString h close\n    eq close ')'\n      cons (parensFromToks left h (reverse gr)) t\n      cons (cons left (cons (reverse gr) (cons h nil))) t\n    withToken h\n      ifNotErr (parseTok toks groups) \\list . list \\restH restT .\n        parseGroup left restT (cons restH gr) close groups\n      \\txt pos .\n        rassoc txt groups\n          \\open . parseErr (strCat (cons 'Mismatched group: ' (cons (tokenString left) (cons txt (cons ' ' nil))))) (loc left)\n          ifNotErr (parseTok toks groups) \\list . list \\restH restT . parseGroup left restT (cons restH gr) close groups"))((function(){return function(L_left){return function(L_toks){return function(L_gr){return function(L_close){return function(L_groups){return resolve(L_withCons)(L_toks)((function(){return resolve(L_parseErr)(lazy("Unterminated group starting "))((function(){return resolve(L_loc)(L_left)}))}))((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(L_close)((function(){return resolve(L_eq)(L_close)(lazy(")"))((function(){return resolve(L_cons)((function(){return resolve(L_parensFromToks)(L_left)(L_h)((function(){return resolve(L_reverse)(L_gr)}))}))(L_t)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_left)((function(){return resolve(L_cons)((function(){return resolve(L_reverse)(L_gr)}))((function(){return resolve(L_cons)(L_h)(L_nil)}))}))}))(L_t)}))}))((function(){return resolve(L_withToken)(L_h)((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_restH){return function(L_restT){return resolve(L_parseGroup)(L_left)(L_restT)((function(){return resolve(L_cons)(L_restH)(L_gr)}))(L_close)(L_groups)}}}))}}))}))((function(){return function(L_txt){return function(L_pos){return resolve(L_rassoc)(L_txt)(L_groups)((function(){return function(L_open){return resolve(L_parseErr)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Mismatched group: "))((function(){return resolve(L_cons)((function(){return resolve(L_tokenString)(L_left)}))((function(){return resolve(L_cons)(L_txt)((function(){return resolve(L_cons)(lazy(" "))(L_nil)}))}))}))}))}))((function(){return resolve(L_loc)(L_left)}))}}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_restH){return function(L_restT){return resolve(L_parseGroup)(L_left)(L_restT)((function(){return resolve(L_cons)(L_restH)(L_gr)}))(L_close)(L_groups)}}}))}}))}))}}}))}))}}}))}}}}}}))},
  function(){return resolve(L_define)(lazy("parseIndent"))(lazy(4))(lazy("parseIndent indent toks gr groups =\n  withCons toks (cons (makeParens (tokenPos indent) (lexEnd (head gr)) (reverse gr)) nil)\n    \\h t . or (withToken h false (\\txt pos . rassoc txt groups (\\open . true) false))\n      and (isTokenStart h '\\n') (<= (strLen (tokenString h)) (strLen (tokenString indent)))\n      cons (makeParens (tokenPos indent) (tokenPos h) (reverse gr)) toks\n      ifNotErr (parseTok toks groups) \\list . list \\restH restT . parseIndent indent restT (cons restH gr) groups"))((function(){return function(L_indent){return function(L_toks){return function(L_gr){return function(L_groups){return resolve(L_withCons)(L_toks)((function(){return resolve(L_cons)((function(){return resolve(L_makeParens)((function(){return resolve(L_tokenPos)(L_indent)}))((function(){return resolve(L_lexEnd)((function(){return resolve(L_head)(L_gr)}))}))((function(){return resolve(L_reverse)(L_gr)}))}))(L_nil)}))((function(){return function(L_h){return function(L_t){return resolve(L_or)((function(){return resolve(L_withToken)(L_h)(L_false)((function(){return function(L_txt){return function(L_pos){return resolve(L_rassoc)(L_txt)(L_groups)((function(){return function(L_open){return resolve(L_true)}}))(L_false)}}}))}))((function(){return resolve(L_and)((function(){return resolve(L_isTokenStart)(L_h)(lazy("\n"))}))((function(){return resolve(L_$y$p)((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_h)}))}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_indent)}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_makeParens)((function(){return resolve(L_tokenPos)(L_indent)}))((function(){return resolve(L_tokenPos)(L_h)}))((function(){return resolve(L_reverse)(L_gr)}))}))(L_toks)}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_restH){return function(L_restT){return resolve(L_parseIndent)(L_indent)(L_restT)((function(){return resolve(L_cons)(L_restH)(L_gr)}))(L_groups)}}}))}}))}))}}}))}}}}}))},
  function(){return resolve(L_define)(lazy("lit"))(lazy(1))(lazy("lit value = \\f . f value"))((function(){return setDataType(function(L_value){return setType(function(L_f){return resolve(L_f)(L_value)}, 'lit')}, 'lit')}))},
  function(){return resolve(L_define)(lazy("ref"))(lazy(1))(lazy("ref name = \\f . f name"))((function(){return setDataType(function(L_name){return setType(function(L_f){return resolve(L_f)(L_name)}, 'ref')}, 'ref')}))},
  function(){return resolve(L_define)(lazy("lambda"))(lazy(2))(lazy("lambda name body = \\f . f name body"))((function(){return setDataType(function(L_name){return function(L_body){return setType(function(L_f){return resolve(L_f)(L_name)(L_body)}, 'lambda')}}, 'lambda')}))},
  function(){return resolve(L_define)(lazy("apply"))(lazy(2))(lazy("apply func arg = \\f . f func arg"))((function(){return setDataType(function(L_func){return function(L_arg){return setType(function(L_f){return resolve(L_f)(L_func)(L_arg)}, 'apply')}}, 'apply')}))},
  function(){return resolve(L_define)(lazy("let"))(lazy(3))(lazy("let name value body = \\f . f name value body"))((function(){return setDataType(function(L_name){return function(L_value){return function(L_body){return setType(function(L_f){return resolve(L_f)(L_name)(L_value)(L_body)}, 'let')}}}, 'let')}))},
  function(){return resolve(L_define)(lazy("anno"))(lazy(3))(lazy("anno name data body = \\f . f name data body"))((function(){return setDataType(function(L_name){return function(L_data){return function(L_body){return setType(function(L_f){return resolve(L_f)(L_name)(L_data)(L_body)}, 'anno')}}}, 'anno')}))},
  function(){return resolve(L_define)(lazy("withParens"))(lazy(3))(lazy("withParens p err cont = isParens p (p cont) err"))((function(){return function(L_p){return function(L_err){return function(L_cont){return resolve(L_isParens)(L_p)((function(){return resolve(L_p)(L_cont)}))(L_err)}}}}))},
  function(){return resolve(L_define)(lazy("setParens"))(lazy(2))(lazy("setParens p func = isParens p\n  p \\start end content . parens start end (func content)\n  func p"))((function(){return function(L_p){return function(L_func){return resolve(L_isParens)(L_p)((function(){return resolve(L_p)((function(){return function(L_start){return function(L_end){return function(L_content){return resolve(L_parens)(L_start)(L_end)((function(){return resolve(L_func)(L_content)}))}}}}))}))((function(){return resolve(L_func)(L_p)}))}}}))},
  function(){return resolve(L_define)(lazy("withStripped"))(lazy(2))(lazy("withStripped list cont = withParens list (cont list) \\start end content . withStripped content cont"))((function(){return function(L_list){return function(L_cont){return resolve(L_withParens)(L_list)((function(){return resolve(L_cont)(L_list)}))((function(){return function(L_start){return function(L_end){return function(L_content){return resolve(L_withStripped)(L_content)(L_cont)}}}}))}}}))},
  function(){return resolve(L_define)(lazy("position"))(lazy(1))(lazy("position thing = isToken thing (tokenPos thing)\n  isParens thing (parensStart thing)\n    isCons thing (position (head thing))\n      -1"))((function(){return function(L_thing){return resolve(L_isToken)(L_thing)((function(){return resolve(L_tokenPos)(L_thing)}))((function(){return resolve(L_isParens)(L_thing)((function(){return resolve(L_parensStart)(L_thing)}))((function(){return resolve(L_isCons)(L_thing)((function(){return resolve(L_position)((function(){return resolve(L_head)(L_thing)}))}))(lazy(-1))}))}))}}))},
  function(){return resolve(L_define)(lazy("lexEnd"))(lazy(1))(lazy("lexEnd thing = isToken thing (+ (tokenPos thing) (strLen (tokenString thing)))\n  isParens thing (parensEnd thing)\n    isCons thing (lexEnd (last thing))\n      -1"))((function(){return function(L_thing){return resolve(L_isToken)(L_thing)((function(){return resolve(L_$o)((function(){return resolve(L_tokenPos)(L_thing)}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_thing)}))}))}))((function(){return resolve(L_isParens)(L_thing)((function(){return resolve(L_parensEnd)(L_thing)}))((function(){return resolve(L_isCons)(L_thing)((function(){return resolve(L_lexEnd)((function(){return resolve(L_last)(L_thing)}))}))(lazy(-1))}))}))}}))},
  function(){return resolve(L_define)(lazy("loc"))(lazy(1))(lazy("loc thing = \\\\\n  p = position thing\n  l = eq p -1 'an unknown location' p\n  .\n  strCat (cons 'at ' (cons l nil))"))((function(){return function(L_thing){return (function(){

var L_l, L_p;

L_l = (function(){return resolve(L_eq)(L_p)(lazy(-1))(lazy("an unknown location"))(L_p)});

L_p = (function(){return resolve(L_position)(L_thing)});
return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("at "))((function(){return resolve(L_cons)(L_l)(L_nil)}))}))})()}}))},
  function(){return resolve(L_define)(lazy("scrub"))(lazy(1))(lazy("scrub str = strFromList (scrubList (strToList str))"))((function(){return function(L_str){return resolve(L_strFromList)((function(){return resolve(L_scrubList)((function(){return resolve(L_strToList)(L_str)}))}))}}))},
  function(){return resolve(L_define)(lazy("scrubList"))(lazy(1))(lazy("scrubList list = list\n  \\h t D . \\\\\n    next = scrubList t\n    .\n    eq h '\\\\' (cons h (cons (head t) (scrubList (tail t))))\n      eq h '\\\"' (cons '\\\\' (cons '\\\"' next))\n        cons h next\n  nil"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return (function(){

var L_next;

L_next = (function(){return resolve(L_scrubList)(L_t)});
return resolve(L_eq)(L_h)(lazy("\\"))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_t)}))((function(){return resolve(L_scrubList)((function(){return resolve(L_tail)(L_t)}))}))}))}))((function(){return resolve(L_eq)(L_h)(lazy("\""))((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(lazy("\""))(L_next)}))}))((function(){return resolve(L_cons)(L_h)(L_next)}))}))})()}}}}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("createAst"))(lazy(2))(lazy("createAst inList names = withStripped inList \\list .\n  isToken list (createLitOrRef (tokenString list) names)\n    list\n      \\h t D .\n        isTokenString h '\\\\\\\\' (createLet h t names)\n          isTokenString h '\\\\@' (createAnno h t names)\n            isTokenString h '\\\\' (createLambda h t names)\n              createApply list names\n      nil"))((function(){return function(L_inList){return function(L_names){return resolve(L_withStripped)(L_inList)((function(){return function(L_list){return resolve(L_isToken)(L_list)((function(){return resolve(L_createLitOrRef)((function(){return resolve(L_tokenString)(L_list)}))(L_names)}))((function(){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("\\\\"))((function(){return resolve(L_createLet)(L_h)(L_t)(L_names)}))((function(){return resolve(L_isTokenString)(L_h)(lazy("\\@"))((function(){return resolve(L_createAnno)(L_h)(L_t)(L_names)}))((function(){return resolve(L_isTokenString)(L_h)(lazy("\\"))((function(){return resolve(L_createLambda)(L_h)(L_t)(L_names)}))((function(){return resolve(L_createApply)(L_list)(L_names)}))}))}))}}}}))(L_nil)}))}}))}}}))},
  function(){return resolve(L_define)(lazy("strMatches"))(lazy(2))(lazy("strMatches str pat = isCons (strMatch str pat)"))((function(){return function(L_str){return function(L_pat){return resolve(L_isCons)((function(){return resolve(L_strMatch)(L_str)(L_pat)}))}}}))},
  function(){return resolve(L_define)(lazy("digit"))(lazy(0))(lazy("digit = regexp '^[0-9]+$'"))((function(){return resolve(L_regexp)(lazy("^[0-9]+$"))}))},
  function(){return resolve(L_define)(lazy("backslashCodes"))(lazy(0))(lazy("backslashCodes = 'bfnrt'"))(lazy("bfnrt"))},
  function(){return resolve(L_define)(lazy("backslashValues"))(lazy(0))(lazy("backslashValues = '\\b\\f\\n\\r\\t'"))(lazy("\b\f\n\r\t"))},
  function(){return resolve(L_define)(lazy("convertStringEscape"))(lazy(3))(lazy("convertStringEscape char codes values =\n  eq codes ''\n    char\n    eq char (strAt codes 0)\n      strAt values 0\n      convertStringEscape char (strSubstring codes 1 0) (strSubstring values 1 0)"))((function(){return function(L_char){return function(L_codes){return function(L_values){return resolve(L_eq)(L_codes)(lazy(""))(L_char)((function(){return resolve(L_eq)(L_char)((function(){return resolve(L_strAt)(L_codes)(lazy(0))}))((function(){return resolve(L_strAt)(L_values)(lazy(0))}))((function(){return resolve(L_convertStringEscape)(L_char)((function(){return resolve(L_strSubstring)(L_codes)(lazy(1))(lazy(0))}))((function(){return resolve(L_strSubstring)(L_values)(lazy(1))(lazy(0))}))}))}))}}}}))},
  function(){return resolve(L_define)(lazy("convertStringEscapes"))(lazy(3))(lazy("convertStringEscapes orig str cont =\n  eq str ''\n    cont str\n    eq (strAt str 0) '\\\\'\n      eq (strLen str) 1 (parseErr \"Error, backslash without character in string: \" orig)\n        convertStringEscapes orig (strSubstring str 2 0) \\rest . cont\n          strAdd\n            convertStringEscape (strAt str 1) backslashCodes backslashValues\n            rest\n      convertStringEscapes orig (strSubstring str 1 0) \\rest . cont\n        strAdd\n          strAt str 0\n          rest"))((function(){return function(L_orig){return function(L_str){return function(L_cont){return resolve(L_eq)(L_str)(lazy(""))((function(){return resolve(L_cont)(L_str)}))((function(){return resolve(L_eq)((function(){return resolve(L_strAt)(L_str)(lazy(0))}))(lazy("\\"))((function(){return resolve(L_eq)((function(){return resolve(L_strLen)(L_str)}))(lazy(1))((function(){return resolve(L_parseErr)(lazy("Error, backslash without character in string: "))(L_orig)}))((function(){return resolve(L_convertStringEscapes)(L_orig)((function(){return resolve(L_strSubstring)(L_str)(lazy(2))(lazy(0))}))((function(){return function(L_rest){return resolve(L_cont)((function(){return resolve(L_strAdd)((function(){return resolve(L_convertStringEscape)((function(){return resolve(L_strAt)(L_str)(lazy(1))}))(L_backslashCodes)(L_backslashValues)}))(L_rest)}))}}))}))}))((function(){return resolve(L_convertStringEscapes)(L_orig)((function(){return resolve(L_strSubstring)(L_str)(lazy(1))(lazy(0))}))((function(){return function(L_rest){return resolve(L_cont)((function(){return resolve(L_strAdd)((function(){return resolve(L_strAt)(L_str)(lazy(0))}))(L_rest)}))}}))}))}))}}}}))},
  function(){return resolve(L_define)(lazy("parseString"))(lazy(2))(lazy("parseString str cont =\n  neq (strAt str 0) (strAt str -1) (parseErr \"Badly terminated string: \" str)\n    convertStringEscapes str (strSubstring str 1 -1) cont"))((function(){return function(L_str){return function(L_cont){return resolve(L_neq)((function(){return resolve(L_strAt)(L_str)(lazy(0))}))((function(){return resolve(L_strAt)(L_str)(lazy(-1))}))((function(){return resolve(L_parseErr)(lazy("Badly terminated string: "))(L_str)}))((function(){return resolve(L_convertStringEscapes)(L_str)((function(){return resolve(L_strSubstring)(L_str)(lazy(1))(lazy(-1))}))(L_cont)}))}}}))},
  function(){return resolve(L_define)(lazy("createLitOrRef"))(lazy(2))(lazy("createLitOrRef tok names =\n  contains names tok\n    ref tok\n    or (strStartsWith tok '\\\"') (strStartsWith tok \"'\")\n      parseString tok \\str . lit str\n      strStartsWith tok '.'\n        jsonParse (strCat (cons '0' (cons tok nil))) (\\err . ref tok) (\\item . lit item)\n        or (and (>= (strAt tok 0) '0') (<= (strAt tok 0) '9')) (strStartsWith tok '-')\n          jsonParse tok (\\err . ref tok) (\\item . lit item)\n          ref tok"))((function(){return function(L_tok){return function(L_names){return resolve(L_contains)(L_names)(L_tok)((function(){return resolve(L_ref)(L_tok)}))((function(){return resolve(L_or)((function(){return resolve(L_strStartsWith)(L_tok)(lazy("\""))}))((function(){return resolve(L_strStartsWith)(L_tok)(lazy("'"))}))((function(){return resolve(L_parseString)(L_tok)((function(){return function(L_str){return resolve(L_lit)(L_str)}}))}))((function(){return resolve(L_strStartsWith)(L_tok)(lazy("."))((function(){return resolve(L_jsonParse)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("0"))((function(){return resolve(L_cons)(L_tok)(L_nil)}))}))}))((function(){return function(L_err){return resolve(L_ref)(L_tok)}}))((function(){return function(L_item){return resolve(L_lit)(L_item)}}))}))((function(){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_$z$p)((function(){return resolve(L_strAt)(L_tok)(lazy(0))}))(lazy("0"))}))((function(){return resolve(L_$y$p)((function(){return resolve(L_strAt)(L_tok)(lazy(0))}))(lazy("9"))}))}))((function(){return resolve(L_strStartsWith)(L_tok)(lazy("-"))}))((function(){return resolve(L_jsonParse)(L_tok)((function(){return function(L_err){return resolve(L_ref)(L_tok)}}))((function(){return function(L_item){return resolve(L_lit)(L_item)}}))}))((function(){return resolve(L_ref)(L_tok)}))}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("createLambda"))(lazy(3))(lazy("createLambda start list names = \\\\\n  err = parseErr \"Lambda needs a variable name, a dot, and a body \" (loc start)\n  .\n  withCons list err \\name rest .\n    withToken name err \\n p .\n      withCons rest err \\dot body .\n        # are these partial applications too hard to read?\n        isTokenString dot '.'\n          ifNotErr (createAst body (cons n names)) \\bodyAst . lambda n bodyAst\n          ifNotErr (createLambda start rest (cons n names)) \\bodyAst . lambda n bodyAst"))((function(){return function(L_start){return function(L_list){return function(L_names){return (function(){

var L_err;

L_err = (function(){return resolve(L_parseErr)(lazy("Lambda needs a variable name, a dot, and a body "))((function(){return resolve(L_loc)(L_start)}))});
return resolve(L_withCons)(L_list)(L_err)((function(){return function(L_name){return function(L_rest){return resolve(L_withToken)(L_name)(L_err)((function(){return function(L_n){return function(L_p){return resolve(L_withCons)(L_rest)(L_err)((function(){return function(L_dot){return function(L_body){return resolve(L_isTokenString)(L_dot)(lazy("."))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_body)((function(){return resolve(L_cons)(L_n)(L_names)}))}))((function(){return function(L_bodyAst){return resolve(L_lambda)(L_n)(L_bodyAst)}}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createLambda)(L_start)(L_rest)((function(){return resolve(L_cons)(L_n)(L_names)}))}))((function(){return function(L_bodyAst){return resolve(L_lambda)(L_n)(L_bodyAst)}}))}))}}}))}}}))}}}))})()}}}}))},
  function(){return resolve(L_define)(lazy("createAnno"))(lazy(3))(lazy("createAnno start list names =\n  withCons list (parseErr \"No annotation name or data in annotation \" (loc start)) \\name rest .\n    withCons rest (parseErr \"No data for annotation \" (loc start)) \\data rest . \\\\\n      finish data body = ifNotErr (createAst body names) \\bodyAst .\n        cleanTokens start name \\name .\n          cleanTokens start data \\data .\n            anno name data bodyAst\n      .\n      isTokenString data '.'\n        finish nil rest\n        withStripped data \\data .\n          withCons rest (parseErr \"No body for annotation \" (loc start)) \\dot body .\n            isTokenString dot '.'\n              finish data body\n              parseErr \"Annotation expects dot after name and data \" (loc start)"))((function(){return function(L_start){return function(L_list){return function(L_names){return resolve(L_withCons)(L_list)((function(){return resolve(L_parseErr)(lazy("No annotation name or data in annotation "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_name){return function(L_rest){return resolve(L_withCons)(L_rest)((function(){return resolve(L_parseErr)(lazy("No data for annotation "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_data){return function(L_rest_0){return (function(){

var L_finish;

L_finish = (function(){return function(L_data_1){return function(L_body){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_body)(L_names)}))((function(){return function(L_bodyAst){return resolve(L_cleanTokens)(L_start)(L_name)((function(){return function(L_name_2){return resolve(L_cleanTokens)(L_start)(L_data_1)((function(){return function(L_data_3){return resolve(L_anno)(L_name_2)(L_data_3)(L_bodyAst)}}))}}))}}))}}});
return resolve(L_isTokenString)(L_data)(lazy("."))((function(){return resolve(L_finish)(L_nil)(L_rest_0)}))((function(){return resolve(L_withStripped)(L_data)((function(){return function(L_data_1){return resolve(L_withCons)(L_rest_0)((function(){return resolve(L_parseErr)(lazy("No body for annotation "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_dot){return function(L_body){return resolve(L_isTokenString)(L_dot)(lazy("."))((function(){return resolve(L_finish)(L_data_1)(L_body)}))((function(){return resolve(L_parseErr)(lazy("Annotation expects dot after name and data "))((function(){return resolve(L_loc)(L_start)}))}))}}}))}}))}))})()}}}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("bodyStructPat"))(lazy(0))(lazy("bodyStructPat = regexp '\\\\|\\\\\\\\|\\\\@'"))((function(){return resolve(L_regexp)(lazy("\\|\\\\|\\@"))}))},
  function(){return resolve(L_define)(lazy("createApply"))(lazy(2))(lazy("createApply inList names = withStripped inList \\list .\n  withCons list (parseErr \"Funcion apply expecting a non-empty list \" (loc inList)) \\h t .\n    ifNotErr (createAst h names) \\func . chainApply func t names"))((function(){return function(L_inList){return function(L_names){return resolve(L_withStripped)(L_inList)((function(){return function(L_list){return resolve(L_withCons)(L_list)((function(){return resolve(L_parseErr)(lazy("Funcion apply expecting a non-empty list "))((function(){return resolve(L_loc)(L_inList)}))}))((function(){return function(L_h){return function(L_t){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_h)(L_names)}))((function(){return function(L_func){return resolve(L_chainApply)(L_func)(L_t)(L_names)}}))}}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("blockStarts"))(lazy(0))(lazy("blockStarts = cons '\\\\' (cons '\\\\\\\\' (cons '\\\\@' nil))"))((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(lazy("\\\\"))((function(){return resolve(L_cons)(lazy("\\@"))(L_nil)}))}))}))},
  function(){return resolve(L_define)(lazy("chainApply"))(lazy(3))(lazy("chainApply func list names = withCons list func \\argItem rest .\n  and (isToken argItem) (contains blockStarts (tokenString argItem))\n    ifNotErr (createAst list names) \\arg . apply func arg\n    ifNotErr (createAst argItem names) \\arg . chainApply (apply func arg) rest names"))((function(){return function(L_func){return function(L_list){return function(L_names){return resolve(L_withCons)(L_list)(L_func)((function(){return function(L_argItem){return function(L_rest){return resolve(L_and)((function(){return resolve(L_isToken)(L_argItem)}))((function(){return resolve(L_contains)(L_blockStarts)((function(){return resolve(L_tokenString)(L_argItem)}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_list)(L_names)}))((function(){return function(L_arg){return resolve(L_apply)(L_func)(L_arg)}}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_argItem)(L_names)}))((function(){return function(L_arg){return resolve(L_chainApply)((function(){return resolve(L_apply)(L_func)(L_arg)}))(L_rest)(L_names)}}))}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("cleanTokens"))(lazy(3))(lazy("cleanTokens start toks cont = isToken toks\n  cont (tokenString toks)\n  withCons toks (cont toks) \\head tail .\n    cleanTokens start head \\head .\n      cleanTokens start tail \\tail .\n        cont (cons head tail)"))((function(){return function(L_start){return function(L_toks){return function(L_cont){return resolve(L_isToken)(L_toks)((function(){return resolve(L_cont)((function(){return resolve(L_tokenString)(L_toks)}))}))((function(){return resolve(L_withCons)(L_toks)((function(){return resolve(L_cont)(L_toks)}))((function(){return function(L_head){return function(L_tail){return resolve(L_cleanTokens)(L_start)(L_head)((function(){return function(L_head_0){return resolve(L_cleanTokens)(L_start)(L_tail)((function(){return function(L_tail_1){return resolve(L_cont)((function(){return resolve(L_cons)(L_head_0)(L_tail_1)}))}}))}}))}}}))}))}}}}))},
  function(){return resolve(L_define)(lazy("createLet"))(lazy(3))(lazy("createLet start list names = withCons list\n  parseErr \"No variable or body for let \" (loc start)\n  \\binding body . eq body nil (createAst binding name)\n    getLetNames start list names \\newNames .\n      createSublets start binding body newNames id"))((function(){return function(L_start){return function(L_list){return function(L_names){return resolve(L_withCons)(L_list)((function(){return resolve(L_parseErr)(lazy("No variable or body for let "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_binding){return function(L_body){return resolve(L_eq)(L_body)(L_nil)((function(){return resolve(L_createAst)(L_binding)(L_name)}))((function(){return resolve(L_getLetNames)(L_start)(L_list)(L_names)((function(){return function(L_newNames){return resolve(L_createSublets)(L_start)(L_binding)(L_body)(L_newNames)(L_id)}}))}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("getLetNames"))(lazy(4))(lazy("getLetNames start list names cont = \\\\\n  err = parseErr \"Let expected binding \" (loc start)\n  .\n  withCons list (cont names) \\binding body .\n    isTokenString binding '.' (cont names)\n      withParens binding err \\start end def .\n        withCons def err \\name rest .\n          withToken name err \\str pos .\n            getLetNames start body (cons str names) cont"))((function(){return function(L_start){return function(L_list){return function(L_names){return function(L_cont){return (function(){

var L_err;

L_err = (function(){return resolve(L_parseErr)(lazy("Let expected binding "))((function(){return resolve(L_loc)(L_start)}))});
return resolve(L_withCons)(L_list)((function(){return resolve(L_cont)(L_names)}))((function(){return function(L_binding){return function(L_body){return resolve(L_isTokenString)(L_binding)(lazy("."))((function(){return resolve(L_cont)(L_names)}))((function(){return resolve(L_withParens)(L_binding)(L_err)((function(){return function(L_start_0){return function(L_end){return function(L_def){return resolve(L_withCons)(L_def)(L_err)((function(){return function(L_name){return function(L_rest){return resolve(L_withToken)(L_name)(L_err)((function(){return function(L_str){return function(L_pos){return resolve(L_getLetNames)(L_start_0)(L_body)((function(){return resolve(L_cons)(L_str)(L_names)}))(L_cont)}}}))}}}))}}}}))}))}}}))})()}}}}}))},
  function(){return resolve(L_define)(lazy("createSublets"))(lazy(5))(lazy("createSublets start binding body names cont =\n  isTokenString binding '.' (ifNotErr (createAst body names) cont)\n    withCons body (parseErr \"Let expected a body \" (loc start)) \\bodyH bodyT .\n      getNameAndDef (parensStart binding) (parensContent binding) names \\name def .\n        createSublets start bodyH bodyT names \\bodyAst .\n          cont (let (tokenString name) def bodyAst)"))((function(){return function(L_start){return function(L_binding){return function(L_body){return function(L_names){return function(L_cont){return resolve(L_isTokenString)(L_binding)(lazy("."))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_body)(L_names)}))(L_cont)}))((function(){return resolve(L_withCons)(L_body)((function(){return resolve(L_parseErr)(lazy("Let expected a body "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_bodyH){return function(L_bodyT){return resolve(L_getNameAndDef)((function(){return resolve(L_parensStart)(L_binding)}))((function(){return resolve(L_parensContent)(L_binding)}))(L_names)((function(){return function(L_name){return function(L_def){return resolve(L_createSublets)(L_start)(L_bodyH)(L_bodyT)(L_names)((function(){return function(L_bodyAst){return resolve(L_cont)((function(){return resolve(L_let)((function(){return resolve(L_tokenString)(L_name)}))(L_def)(L_bodyAst)}))}}))}}}))}}}))}))}}}}}}))},
  function(){return resolve(L_define)(lazy("getNameAndDef"))(lazy(4))(lazy("getNameAndDef pos binding names cont =\n  withCons (tail binding) (parseErr \"Let expected binding at \" pos) \\snd sndT .\n    isTokenString snd '=' (ifNotErr (createAst sndT names) \\def . cont (head binding) def)\n      getLetLambda pos (tail binding) nil names \\lamb . cont (head binding) lamb"))((function(){return function(L_pos){return function(L_binding){return function(L_names){return function(L_cont){return resolve(L_withCons)((function(){return resolve(L_tail)(L_binding)}))((function(){return resolve(L_parseErr)(lazy("Let expected binding at "))(L_pos)}))((function(){return function(L_snd){return function(L_sndT){return resolve(L_isTokenString)(L_snd)(lazy("="))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_sndT)(L_names)}))((function(){return function(L_def){return resolve(L_cont)((function(){return resolve(L_head)(L_binding)}))(L_def)}}))}))((function(){return resolve(L_getLetLambda)(L_pos)((function(){return resolve(L_tail)(L_binding)}))(L_nil)(L_names)((function(){return function(L_lamb){return resolve(L_cont)((function(){return resolve(L_head)(L_binding)}))(L_lamb)}}))}))}}}))}}}}}))},
  function(){return resolve(L_define)(lazy("getLetLambda"))(lazy(5))(lazy("getLetLambda pos def args names cont =\n  withCons def (parseErr \"Let expected binding at \" pos) \\arg rest .\n    not (isToken arg) (parseErr \"Let expected binding at \" pos)\n      isTokenString arg '='\n        ifNotErr (createAst (cons (token '\\\\' pos) (append (reverse args) (cons (token '.' (position arg)) rest))) names) cont\n        getLetLambda pos rest (cons arg args) names cont"))((function(){return function(L_pos){return function(L_def){return function(L_args){return function(L_names){return function(L_cont){return resolve(L_withCons)(L_def)((function(){return resolve(L_parseErr)(lazy("Let expected binding at "))(L_pos)}))((function(){return function(L_arg){return function(L_rest){return resolve(L_not)((function(){return resolve(L_isToken)(L_arg)}))((function(){return resolve(L_parseErr)(lazy("Let expected binding at "))(L_pos)}))((function(){return resolve(L_isTokenString)(L_arg)(lazy("="))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("\\"))(L_pos)}))((function(){return resolve(L_append)((function(){return resolve(L_reverse)(L_args)}))((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("."))((function(){return resolve(L_position)(L_arg)}))}))(L_rest)}))}))}))(L_names)}))(L_cont)}))((function(){return resolve(L_getLetLambda)(L_pos)(L_rest)((function(){return resolve(L_cons)(L_arg)(L_args)}))(L_names)(L_cont)}))}))}}}))}}}}}}))},
  function(){return resolve(L_define)(lazy("scanLineG"))(lazy(5))(lazy("scanLineG str pat groups onDef onExpr = \\\\\n  toks = tokens str pat\n  groupToks = foldr (\\el value . el \\h t . cons h (cons t value)) (cons '=' blockStarts) groups\n  .\n  # check if it's a definition\n  find (\\tok . or (contains groupToks (tokenString tok)) (isCons (strMatch (tokenString tok) '^\\n'))) toks (\\item . isTokenString item '=') false\n    toks \\name rest . \\\\\n      parseIt func = \\\\\n        parsed = parseToks (checkSetDataType func rest name) groups\n        .\n        onDef (ifNotErr parsed \\list . createDef list name (arity rest 0) str)\n      .\n      isTokenString (head rest) '='\n        isTokenString (head (tail rest)) '\\\\'\n          parseIt (setTypeAnno (tail rest) (tokenString name))\n          parseIt (tail rest)\n        transformDef name rest \\def .\n          parseIt (cons (token '\\\\' (- (position (head rest)) 1)) def)\n    ifNotErr (parseToks toks groups) \\list . onExpr list"))((function(){return function(L_str){return function(L_pat){return function(L_groups){return function(L_onDef){return function(L_onExpr){return (function(){

var L_groupToks, L_toks;

L_groupToks = (function(){return resolve(L_foldr)((function(){return function(L_el){return function(L_value){return resolve(L_el)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)(L_t)(L_value)}))}}}))}}}))((function(){return resolve(L_cons)(lazy("="))(L_blockStarts)}))(L_groups)});

L_toks = (function(){return resolve(L_tokens)(L_str)(L_pat)});
return resolve(L_find)((function(){return function(L_tok){return resolve(L_or)((function(){return resolve(L_contains)(L_groupToks)((function(){return resolve(L_tokenString)(L_tok)}))}))((function(){return resolve(L_isCons)((function(){return resolve(L_strMatch)((function(){return resolve(L_tokenString)(L_tok)}))(lazy("^\n"))}))}))}}))(L_toks)((function(){return function(L_item){return resolve(L_isTokenString)(L_item)(lazy("="))}}))(L_false)((function(){return resolve(L_toks)((function(){return function(L_name){return function(L_rest){return (function(){

var L_parseIt;

L_parseIt = (function(){return function(L_func){return (function(){

var L_parsed;

L_parsed = (function(){return resolve(L_parseToks)((function(){return resolve(L_checkSetDataType)(L_func)(L_rest)(L_name)}))(L_groups)});
return resolve(L_onDef)((function(){return resolve(L_ifNotErr)(L_parsed)((function(){return function(L_list){return resolve(L_createDef)(L_list)(L_name)((function(){return resolve(L_arity)(L_rest)(lazy(0))}))(L_str)}}))}))})()}});
return resolve(L_isTokenString)((function(){return resolve(L_head)(L_rest)}))(lazy("="))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_rest)}))}))(lazy("\\"))((function(){return resolve(L_parseIt)((function(){return resolve(L_setTypeAnno)((function(){return resolve(L_tail)(L_rest)}))((function(){return resolve(L_tokenString)(L_name)}))}))}))((function(){return resolve(L_parseIt)((function(){return resolve(L_tail)(L_rest)}))}))}))((function(){return resolve(L_transformDef)(L_name)(L_rest)((function(){return function(L_def){return resolve(L_parseIt)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("\\"))((function(){return resolve(L_$_)((function(){return resolve(L_position)((function(){return resolve(L_head)(L_rest)}))}))(lazy(1))}))}))(L_def)}))}}))}))})()}}}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseToks)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_onExpr)(L_list)}}))}))})()}}}}}}))},
  function(){return resolve(L_define)(lazy("parseLineG"))(lazy(6))(lazy("parseLineG str pat names groups onDef onExpr = \\\\\n  astCallback cb = \\list . ifNotErr (createAst list names) \\ast . cb ast\n  .\n  scanLineG str pat groups (astCallback onDef) (astCallback onExpr)"))((function(){return function(L_str){return function(L_pat){return function(L_names){return function(L_groups){return function(L_onDef){return function(L_onExpr){return (function(){

var L_astCallback;

L_astCallback = (function(){return function(L_cb){return function(L_list){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_list)(L_names)}))((function(){return function(L_ast){return resolve(L_cb)(L_ast)}}))}}});
return resolve(L_scanLineG)(L_str)(L_pat)(L_groups)((function(){return resolve(L_astCallback)(L_onDef)}))((function(){return resolve(L_astCallback)(L_onExpr)}))})()}}}}}}}))},
  function(){return resolve(L_define)(lazy("transformDef"))(lazy(3))(lazy("transformDef name toks cont = withCons toks (parseErr \"Bad definition, expecting tokens\" (loc name)) \\h t .\n  isTokenString h '='\n    isTokenString (head t) '\\\\'\n      cont (cons (token '.' (position h)) (setTypeAnno t (tokenString name)))\n      cont (cons (token '.' (position h)) t)\n    transformDef name t \\list . cont (cons h list)"))((function(){return function(L_name){return function(L_toks){return function(L_cont){return resolve(L_withCons)(L_toks)((function(){return resolve(L_parseErr)(lazy("Bad definition, expecting tokens"))((function(){return resolve(L_loc)(L_name)}))}))((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_t)}))(lazy("\\"))((function(){return resolve(L_cont)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("."))((function(){return resolve(L_position)(L_h)}))}))((function(){return resolve(L_setTypeAnno)(L_t)((function(){return resolve(L_tokenString)(L_name)}))}))}))}))((function(){return resolve(L_cont)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("."))((function(){return resolve(L_position)(L_h)}))}))(L_t)}))}))}))((function(){return resolve(L_transformDef)(L_name)(L_t)((function(){return function(L_list){return resolve(L_cont)((function(){return resolve(L_cons)(L_h)(L_list)}))}}))}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("setTypeAnno"))(lazy(2))(lazy("setTypeAnno toks name = \\\\\n  tok = \\str . token str (position toks)\n  .\n  cons (tok '\\\\@') (cons (tok 'type') (cons (tok name) (cons (tok '.') toks)))"))((function(){return function(L_toks){return function(L_name){return (function(){

var L_tok;

L_tok = (function(){return function(L_str){return resolve(L_token)(L_str)((function(){return resolve(L_position)(L_toks)}))}});
return resolve(L_cons)((function(){return resolve(L_tok)(lazy("\\@"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("type"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_name)}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("."))}))(L_toks)}))}))}))})()}}}))},
  function(){return resolve(L_define)(lazy("setDataTypeAnno"))(lazy(2))(lazy("setDataTypeAnno toks name = \\\\\n  tok = \\str . token str (position toks)\n  .\n  cons (tok '\\\\@') (cons (tok 'dataType') (cons (tok (tokenString name)) (cons (tok '.') toks)))"))((function(){return function(L_toks){return function(L_name){return (function(){

var L_tok;

L_tok = (function(){return function(L_str){return resolve(L_token)(L_str)((function(){return resolve(L_position)(L_toks)}))}});
return resolve(L_cons)((function(){return resolve(L_tok)(lazy("\\@"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("dataType"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)((function(){return resolve(L_tokenString)(L_name)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("."))}))(L_toks)}))}))}))})()}}}))},
  function(){return resolve(L_define)(lazy("createDef"))(lazy(4))(lazy("createDef def name arity src = \\\\\n  tok str = token str (position def)\n  .\n  jsonStringify (tokenString name) (\\err . parseErr (strCat (cons \"Bad function name \" (cons (loc name) nil))) err) \\nameStr .\n    jsonStringify src (\\err . parseErr (strCat (cons \"Bad source \" (cons (loc name) nil))) err) \\srcStr .\n      #cons (tok 'define') (cons (tok nameStr) (cons (tok (strString arity)) (cons (tok srcStr) (cons def nil))))\n      cons (tok '\\\\@') (cons (cons (tok 'definition') (cons (tok name) nil)) (cons (tok '.') (cons (tok 'define') (cons (tok nameStr) (cons (tok (strString arity)) (cons (tok srcStr) (cons def nil)))))))"))((function(){return function(L_def){return function(L_name){return function(L_arity){return function(L_src){return (function(){

var L_tok;

L_tok = (function(){return function(L_str){return resolve(L_token)(L_str)((function(){return resolve(L_position)(L_def)}))}});
return resolve(L_jsonStringify)((function(){return resolve(L_tokenString)(L_name)}))((function(){return function(L_err){return resolve(L_parseErr)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Bad function name "))((function(){return resolve(L_cons)((function(){return resolve(L_loc)(L_name)}))(L_nil)}))}))}))(L_err)}}))((function(){return function(L_nameStr){return resolve(L_jsonStringify)(L_src)((function(){return function(L_err){return resolve(L_parseErr)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Bad source "))((function(){return resolve(L_cons)((function(){return resolve(L_loc)(L_name)}))(L_nil)}))}))}))(L_err)}}))((function(){return function(L_srcStr){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("\\@"))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("definition"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_name)}))(L_nil)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("."))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("define"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_nameStr)}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)((function(){return resolve(L_strString)(L_arity)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_srcStr)}))((function(){return resolve(L_cons)(L_def)(L_nil)}))}))}))}))}))}))}))}}))}}))})()}}}}}))},
  function(){return resolve(L_define)(lazy("checkSetDataType"))(lazy(3))(lazy("checkSetDataType toks curToks name = withCons curToks toks \\h t .\n  isTokenString h '='\n    isTokenString (head t) '\\\\'\n      setDataTypeAnno toks name\n      toks\n    checkSetDataType toks t name"))((function(){return function(L_toks){return function(L_curToks){return function(L_name){return resolve(L_withCons)(L_curToks)(L_toks)((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_t)}))(lazy("\\"))((function(){return resolve(L_setDataTypeAnno)(L_toks)(L_name)}))(L_toks)}))((function(){return resolve(L_checkSetDataType)(L_toks)(L_t)(L_name)}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("arity"))(lazy(2))(lazy("arity toks n = isTokenString (head toks) '=' n (arity (tail toks) (+ n 1))"))((function(){return function(L_toks){return function(L_n){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_toks)}))(lazy("="))(L_n)((function(){return resolve(L_arity)((function(){return resolve(L_tail)(L_toks)}))((function(){return resolve(L_$o)(L_n)(lazy(1))}))}))}}}))},
  function(){return resolve(L_define)(lazy("tokListStr"))(lazy(1))(lazy("tokListStr toks = jsonStringify (join (map (\\t . tokenString t) toks) ' ')"))((function(){return function(L_toks){return resolve(L_jsonStringify)((function(){return resolve(L_join)((function(){return resolve(L_map)((function(){return function(L_t){return resolve(L_tokenString)(L_t)}}))(L_toks)}))(lazy(" "))}))}}))},
  function(){return resolve(L_define)(lazy("linePat"))(lazy(0))(lazy("linePat = regexp '\\\\r?\\\\n(?=[^ ]|$)'"))((function(){return resolve(L_regexp)(lazy("\\r?\\n(?=[^ ]|$)"))}))},
  function(){return resolve(L_define)(lazy("emptyLinePat"))(lazy(0))(lazy("emptyLinePat = regexp '(^[ \\\\i]*\\\\#.*|^[ \\\\i]*$|^\\\\r?\\\\n[ \\\\i]*$)'"))((function(){return resolve(L_regexp)(lazy("(^[ \\i]*\\#.*|^[ \\i]*$|^\\r?\\n[ \\i]*$)"))}))},
  function(){return resolve(L_define)(lazy("lineScrub"))(lazy(0))(lazy("lineScrub = regexpFlags '\\\\r\\\\n' 'g'"))((function(){return resolve(L_regexpFlags)(lazy("\\r\\n"))(lazy("g"))}))},
  function(){return resolve(L_define)(lazy("linesForFile"))(lazy(1))(lazy("linesForFile text = filter\n  \\line . isNil (strMatch line emptyLinePat)\n  strSplit (strReplace text lineScrub '\\n') linePat"))((function(){return function(L_text){return resolve(L_filter)((function(){return function(L_line){return resolve(L_isNil)((function(){return resolve(L_strMatch)(L_line)(L_emptyLinePat)}))}}))((function(){return resolve(L_strSplit)((function(){return resolve(L_strReplace)(L_text)(L_lineScrub)(lazy("\n"))}))(L_linePat)}))}}))},
  function(){return resolve(L_define)(lazy("defPat"))(lazy(0))(lazy("defPat = regexp '^[^ =]+.* =( |$)'"))((function(){return resolve(L_regexp)(lazy("^[^ =]+.* =( |$)"))}))},
  function(){return resolve(L_define)(lazy("unanchoredDefPat"))(lazy(0))(lazy("unanchoredDefPat = regexp '^((?:\\\\s*\\\\n|#[^\\\\n]*\\\\n)*)([^=\\\\n]*)(=\\\\([^=]+=|=)?'"))((function(){return resolve(L_regexp)(lazy("^((?:\\s*\\n|#[^\\n]*\\n)*)([^=\\n]*)(=\\([^=]+=|=)?"))}))},
  function(){return resolve(L_define)(lazy("namesForLines"))(lazy(1))(lazy("namesForLines lines = foldl\n  \\result line . \\\\\n    m = strMatch line defPat\n    .\n    isNil m result (cons (head (tail m)) result)\n  nil\n  lines"))((function(){return function(L_lines){return resolve(L_foldl)((function(){return function(L_result){return function(L_line){return (function(){

var L_m;

L_m = (function(){return resolve(L_strMatch)(L_line)(L_defPat)});
return resolve(L_isNil)(L_m)(L_result)((function(){return resolve(L_cons)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_m)}))}))(L_result)}))})()}}}))(L_nil)(L_lines)}}))},
  function(){return resolve(L_define)(lazy("runParseFilters"))(lazy(2))(lazy("runParseFilters filters line = filters\n  \\h t D . bind (h line) \\filtered . runParseFilters t filtered\n  line"))((function(){return function(L_filters){return function(L_line){return resolve(L_filters)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_bind)((function(){return resolve(L_h)(L_line)}))((function(){return function(L_filtered){return resolve(L_runParseFilters)(L_t)(L_filtered)}}))}}}}))(L_line)}}}))},
  function(){return resolve(L_define)(lazy("isBlockStart"))(lazy(1))(lazy("isBlockStart tok = and\n  or (isToken tok) (isString tok)\n  contains blockStarts (strTokenString tok)"))((function(){return function(L_tok){return resolve(L_and)((function(){return resolve(L_or)((function(){return resolve(L_isToken)(L_tok)}))((function(){return resolve(L_isString)(L_tok)}))}))((function(){return resolve(L_contains)(L_blockStarts)((function(){return resolve(L_strTokenString)(L_tok)}))}))}}))},
  function(){return resolve(L_define)(lazy("macroSub"))(lazy(2))(lazy("macroSub macs expr = postProcessMacro -1 -1 (baseMacroSub macs expr)"))((function(){return function(L_macs){return function(L_expr){return resolve(L_postProcessMacro)(lazy(-1))(lazy(-1))((function(){return resolve(L_baseMacroSub)(L_macs)(L_expr)}))}}}))},
  function(){return resolve(L_define)(lazy("consifyMacroValue"))(lazy(1))(lazy("consifyMacroValue value = isCons value value (cons value nil)"))((function(){return function(L_value){return resolve(L_isCons)(L_value)(L_value)((function(){return resolve(L_cons)(L_value)(L_nil)}))}}))},
  function(){return resolve(L_define)(lazy("baseMacroSub"))(lazy(2))(lazy("baseMacroSub macs expr = isToken expr\n  expr\n  isParens expr\n    expr \\start end content . \\\\\n      result = baseMacroSub macs content\n      .\n      isToken result result (parens start end result)\n    withCons expr expr \\h t .\n      isBlockStart h\n        cons h\n          isTokenString h '\\\\\\\\'\n            macroSubLet macs t\n            macroSubBody '.' macs t\n        withToken h\n          \\\\\n            subH = baseMacroSub macs h\n            .\n            withToken subH\n              cons subH (map (baseMacroSub macs) t)\n              \\tok pos . baseMacroSub macs (cons subH t)\n          \\tok pos . assoc tok macs\n            \\def . baseMacroSub macs (def t)\n            cons h (map (baseMacroSub macs) t)"))((function(){return function(L_macs){return function(L_expr){return resolve(L_isToken)(L_expr)(L_expr)((function(){return resolve(L_isParens)(L_expr)((function(){return resolve(L_expr)((function(){return function(L_start){return function(L_end){return function(L_content){return (function(){

var L_result;

L_result = (function(){return resolve(L_baseMacroSub)(L_macs)(L_content)});
return resolve(L_isToken)(L_result)(L_result)((function(){return resolve(L_parens)(L_start)(L_end)(L_result)}))})()}}}}))}))((function(){return resolve(L_withCons)(L_expr)(L_expr)((function(){return function(L_h){return function(L_t){return resolve(L_isBlockStart)(L_h)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(lazy("\\\\"))((function(){return resolve(L_macroSubLet)(L_macs)(L_t)}))((function(){return resolve(L_macroSubBody)(lazy("."))(L_macs)(L_t)}))}))}))((function(){return resolve(L_withToken)(L_h)(function(){
var L_subH;

L_subH = (function(){return resolve(L_baseMacroSub)(L_macs)(L_h)});
return resolve(L_withToken)(L_subH)((function(){return resolve(L_cons)(L_subH)((function(){return resolve(L_map)((function(){return resolve(L_baseMacroSub)(L_macs)}))(L_t)}))}))((function(){return function(L_tok){return function(L_pos){return resolve(L_baseMacroSub)(L_macs)((function(){return resolve(L_cons)(L_subH)(L_t)}))}}}))})((function(){return function(L_tok){return function(L_pos){return resolve(L_assoc)(L_tok)(L_macs)((function(){return function(L_def){return resolve(L_baseMacroSub)(L_macs)((function(){return resolve(L_def)(L_t)}))}}))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_map)((function(){return resolve(L_baseMacroSub)(L_macs)}))(L_t)}))}))}}}))}))}}}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("macroSubLet"))(lazy(2))(lazy("macroSubLet macs list = list\n  \\h t D . isTokenString h '.'\n    cons h (baseMacroSub macs t)\n    cons (setParens h \\content . macroSubBody '=' macs content) (macroSubLet macs t)\n  # Don't bother with parse errors at this point -- ast generator will detect them\n  nil"))((function(){return function(L_macs){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("."))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_baseMacroSub)(L_macs)(L_t)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_setParens)(L_h)((function(){return function(L_content){return resolve(L_macroSubBody)(lazy("="))(L_macs)(L_content)}}))}))((function(){return resolve(L_macroSubLet)(L_macs)(L_t)}))}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("macroSubBody"))(lazy(3))(lazy("macroSubBody char macs list = list\n  \\h t D . cons h\n    isTokenString h char baseMacroSub (macroSubBody char)\n      macs\n      t\n  nil"))((function(){return function(L_char){return function(L_macs){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(L_char)(L_baseMacroSub)((function(){return resolve(L_macroSubBody)(L_char)}))(L_macs)(L_t)}))}}}}))(L_nil)}}}}))},
  function(){return resolve(L_define)(lazy("postProcessMacro"))(lazy(3))(lazy("postProcessMacro before after expr = isString expr\n  token expr (eq after -1 before after)\n  isParens expr\n    expr \\start end contents . parens start end (postProcessMacro start end contents)\n    isCons expr\n      expr \\h t .\n        isToken h\n          cons h (postProcessMacro (+ 1 (+ (tokenPos h) (strLen (tokenString h)))) -1 t)\n          \\\\\n            posStart = position h\n            posEnd = position t\n            t2 = postProcessMacro -1 after t\n            h2 = postProcessMacro before -1 h\n            .\n            eq posStart -1\n              cons (postProcessMacro before (position t2) h) t2\n              cons h2 (postProcessMacro (+ 1 (lexEnd h2)) after t)\n      isNumber expr\n        token (strString expr) (eq after -1 before after)\n        expr"))((function(){return function(L_before){return function(L_after){return function(L_expr){return resolve(L_isString)(L_expr)((function(){return resolve(L_token)(L_expr)((function(){return resolve(L_eq)(L_after)(lazy(-1))(L_before)(L_after)}))}))((function(){return resolve(L_isParens)(L_expr)((function(){return resolve(L_expr)((function(){return function(L_start){return function(L_end){return function(L_contents){return resolve(L_parens)(L_start)(L_end)((function(){return resolve(L_postProcessMacro)(L_start)(L_end)(L_contents)}))}}}}))}))((function(){return resolve(L_isCons)(L_expr)((function(){return resolve(L_expr)((function(){return function(L_h){return function(L_t){return resolve(L_isToken)(L_h)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_postProcessMacro)((function(){return resolve(L_$o)(lazy(1))((function(){return resolve(L_$o)((function(){return resolve(L_tokenPos)(L_h)}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_h)}))}))}))}))(lazy(-1))(L_t)}))}))(function(){
var L_h2, L_t2, L_posEnd, L_posStart;

L_h2 = (function(){return resolve(L_postProcessMacro)(L_before)(lazy(-1))(L_h)});

L_t2 = (function(){return resolve(L_postProcessMacro)(lazy(-1))(L_after)(L_t)});

L_posEnd = (function(){return resolve(L_position)(L_t)});

L_posStart = (function(){return resolve(L_position)(L_h)});
return resolve(L_eq)(L_posStart)(lazy(-1))((function(){return resolve(L_cons)((function(){return resolve(L_postProcessMacro)(L_before)((function(){return resolve(L_position)(L_t2)}))(L_h)}))(L_t2)}))((function(){return resolve(L_cons)(L_h2)((function(){return resolve(L_postProcessMacro)((function(){return resolve(L_$o)(lazy(1))((function(){return resolve(L_lexEnd)(L_h2)}))}))(L_after)(L_t)}))}))})}}}))}))((function(){return resolve(L_isNumber)(L_expr)((function(){return resolve(L_token)((function(){return resolve(L_strString)(L_expr)}))((function(){return resolve(L_eq)(L_after)(lazy(-1))(L_before)(L_after)}))}))(L_expr)}))}))}))}}}}))},
  function(){return resolve(L_define)(lazy("defMacro"))(lazy(2))(lazy("defMacro name def = bind (getValue 'macroDefs') \\macs . setValue 'macroDefs' (acons name def macs)"))((function(){return function(L_name){return function(L_def){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("macroDefs"))}))((function(){return function(L_macs){return resolve(L_setValue)(lazy("macroDefs"))((function(){return resolve(L_acons)(L_name)(L_def)(L_macs)}))}}))}}}))},
  function(){return resolve(L_define)(lazy("delimiterListPrefix"))(lazy(0))(lazy("delimiterListPrefix = \"\\\"(?:\\\\\\\\.|[^\\\"])*\\\"|'(?:\\\\\\\\.|[^'])*'|\\\\n *|#.*| +\""))(lazy("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|\\n *|#.*| +"))},
  function(){return resolve(L_define)(lazy("regexpEscapePat"))(lazy(0))(lazy("regexpEscapePat = regexpFlags '[\\\\-\\\\[\\\\]/\\\\{\\\\}\\\\(\\\\)\\\\*\\\\+\\\\?\\\\.\\\\\\\\\\\\^\\\\$\\\\|]' 'g'"))((function(){return resolve(L_regexpFlags)(lazy("[\\-\\[\\]/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]"))(lazy("g"))}))},
  function(){return resolve(L_define)(lazy("addToken"))(lazy(1))(lazy("addToken del = bind (getValue 'tokenList')\n  \\dels . contains dels del\n    false\n    \\\\\n      newDels = insertSorted (\\a b . > (strLen a) (strLen b)) del dels\n      .\n      bind (setValue 'tokenList' newDels)\n        \\_ . computeTokenPat newDels"))((function(){return function(L_del){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenList"))}))((function(){return function(L_dels){return resolve(L_contains)(L_dels)(L_del)(L_false)(function(){
var L_newDels;

L_newDels = (function(){return resolve(L_insertSorted)((function(){return function(L_a){return function(L_b){return resolve(L_$z)((function(){return resolve(L_strLen)(L_a)}))((function(){return resolve(L_strLen)(L_b)}))}}}))(L_del)(L_dels)});
return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenList"))(L_newDels)}))((function(){return function(L__){return resolve(L_computeTokenPat)(L_newDels)}}))})}}))}}))},
  function(){return resolve(L_define)(lazy("computeTokenPat"))(lazy(1))(lazy("computeTokenPat dels = \\\\\n  delPats = map (\\item . strReplace item regexpEscapePat \"\\\\$&\") dels\n  newPat = strCat (cons '(' (cons (join (cons delimiterListPrefix delPats) '|') (cons ')' nil)))\n  .\n  setValue 'tokenPat' newPat"))((function(){return function(L_dels){return (function(){

var L_newPat, L_delPats;

L_newPat = (function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("("))((function(){return resolve(L_cons)((function(){return resolve(L_join)((function(){return resolve(L_cons)(L_delimiterListPrefix)(L_delPats)}))(lazy("|"))}))((function(){return resolve(L_cons)(lazy(")"))(L_nil)}))}))}))});

L_delPats = (function(){return resolve(L_map)((function(){return function(L_item){return resolve(L_strReplace)(L_item)(L_regexpEscapePat)(lazy("\\$&"))}}))(L_dels)});
return resolve(L_setValue)(lazy("tokenPat"))(L_newPat)})()}}))},
  function(){return resolve(L_define)(lazy("addTokenGroup"))(lazy(2))(lazy("addTokenGroup open close = bind (addToken open)\n  \\_ . bind (addToken close)\n    \\_ . bind (getValue 'tokenGroups')\n      \\gr . setValue 'tokenGroups' (acons open close gr)"))((function(){return function(L_open){return function(L_close){return resolve(L_bind)((function(){return resolve(L_addToken)(L_open)}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_addToken)(L_close)}))((function(){return function(L___0){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_gr){return resolve(L_setValue)(lazy("tokenGroups"))((function(){return resolve(L_acons)(L_open)(L_close)(L_gr)}))}}))}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("parenGroups"))(lazy(0))(lazy("parenGroups = acons '(' ')' nil"))((function(){return resolve(L_acons)(lazy("("))(lazy(")"))(L_nil)}))},
  function(){return resolve(L_define)(lazy("parse"))(lazy(2))(lazy("parse str pat = ifNotErr (parseIndent (token '\\n' 0) (tokens str pat) nil parenGroups) \\list . list \\h t . stripParens h"))((function(){return function(L_str){return function(L_pat){return resolve(L_ifNotErr)((function(){return resolve(L_parseIndent)((function(){return resolve(L_token)(lazy("\n"))(lazy(0))}))((function(){return resolve(L_tokens)(L_str)(L_pat)}))(L_nil)(L_parenGroups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_stripParens)(L_h)}}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("parseG"))(lazy(3))(lazy("parseG str pat groups = ifNotErr (parseIndent (token '\\n' 0) (tokens str pat) nil groups) \\list . list \\h t . stripParens h"))((function(){return function(L_str){return function(L_pat){return function(L_groups){return resolve(L_ifNotErr)((function(){return resolve(L_parseIndent)((function(){return resolve(L_token)(lazy("\n"))(lazy(0))}))((function(){return resolve(L_tokens)(L_str)(L_pat)}))(L_nil)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_stripParens)(L_h)}}}))}}))}}}}))},
  function(){return resolve(L_define)(lazy("parseToAst"))(lazy(2))(lazy("parseToAst str pat = createAst (parse str pat) nil"))((function(){return function(L_str){return function(L_pat){return resolve(L_createAst)((function(){return resolve(L_parse)(L_str)(L_pat)}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("parseM"))(lazy(1))(lazy("parseM str =\n  bind (getValue 'tokenPat')\n    \\tokPat . bind (getValue 'tokenGroups')\n      \\groups . parseG str tokPat groups"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_parseG)(L_str)(L_tokPat)(L_groups)}}))}}))}}))},
  function(){return resolve(L_define)(lazy("scanLine"))(lazy(4))(lazy("scanLine str pat onDef onExpr = scanLineG str pat parenGroups onDef onExpr"))((function(){return function(L_str){return function(L_pat){return function(L_onDef){return function(L_onExpr){return resolve(L_scanLineG)(L_str)(L_pat)(L_parenGroups)(L_onDef)(L_onExpr)}}}}}))},
  function(){return resolve(L_define)(lazy("parseLine"))(lazy(5))(lazy("parseLine str pat names onDef onExpr = parseLineG str pat names parenGroups onDef onExpr"))((function(){return function(L_str){return function(L_pat){return function(L_names){return function(L_onDef){return function(L_onExpr){return resolve(L_parseLineG)(L_str)(L_pat)(L_names)(L_parenGroups)(L_onDef)(L_onExpr)}}}}}}))},
  function(){return resolve(L_define)(lazy("parseLineM"))(lazy(1))(lazy("parseLineM str = bind (getValue 'tokenPat')\n  \\tokPat . bind (getValue 'tokenGroups')\n    \\groups . parseLineG str tokPat nil groups id id"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_parseLineG)(L_str)(L_tokPat)(L_nil)(L_groups)(L_id)(L_id)}}))}}))}}))},
  function(){return resolve(L_define)(lazy("macroSubM"))(lazy(1))(lazy("macroSubM expr =\n  bind (getValue 'macroDefs')\n    \\macs . macroSub macs expr"))((function(){return function(L_expr){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("macroDefs"))}))((function(){return function(L_macs){return resolve(L_macroSub)(L_macs)(L_expr)}}))}}))},
  function(){return resolve(L_define)(lazy("macroParse"))(lazy(1))(lazy("macroParse str =\n  bind (parseM str)\n    \\ex . macroSubM ex"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_parseM)(L_str)}))((function(){return function(L_ex){return resolve(L_macroSubM)(L_ex)}}))}}))},
  function(){return resolve(L_define)(lazy("tokensM"))(lazy(1))(lazy("tokensM str =\n  bind (getValue 'tokenPat')\n    \\delimiterPat . tokens str delimiterPat"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_delimiterPat){return resolve(L_tokens)(L_str)(L_delimiterPat)}}))}}))},
  function(){return resolve(L_define)(lazy("parseLines"))(lazy(2))(lazy("parseLines lines result = lines\n  \\h t D . bind (parseLineM h)\n    \\ast . parseLines t (cons ast result)\n  reverse result"))((function(){return function(L_lines){return function(L_result){return resolve(L_lines)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_bind)((function(){return resolve(L_parseLineM)(L_h)}))((function(){return function(L_ast){return resolve(L_parseLines)(L_t)((function(){return resolve(L_cons)(L_ast)(L_result)}))}}))}}}}))((function(){return resolve(L_reverse)(L_result)}))}}}))},
  function(){return resolve(L_define)(lazy("parseFile"))(lazy(1))(lazy("parseFile text = parseLines (linesForFile text) nil"))((function(){return function(L_text){return resolve(L_parseLines)((function(){return resolve(L_linesForFile)(L_text)}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("simpleScanLine"))(lazy(1))(lazy("simpleScanLine line = bind (getValue 'tokenPat')\n  \\tokenPat . bind (getValue 'tokenGroups')\n    \\groups . scanLineG line tokenPat groups id id"))((function(){return function(L_line){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokenPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_scanLineG)(L_line)(L_tokenPat)(L_groups)(L_id)(L_id)}}))}}))}}))},
  function(){return resolve(L_define)(lazy("scanLineM"))(lazy(1))(lazy("scanLineM line = bind (getValue 'tokenPat')\n  \\tokenPat . bind (getValue 'tokenGroups')\n    \\groups . bind (getValue 'parseFilters')\n      \\filters . bind (getValue 'macroDefs')\n        \\macros . bind (runParseFilters filters (scanLineG line tokenPat groups id id))\n          \\scanned . macroSub macros scanned"))((function(){return function(L_line){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokenPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("parseFilters"))}))((function(){return function(L_filters){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("macroDefs"))}))((function(){return function(L_macros){return resolve(L_bind)((function(){return resolve(L_runParseFilters)(L_filters)((function(){return resolve(L_scanLineG)(L_line)(L_tokenPat)(L_groups)(L_id)(L_id)}))}))((function(){return function(L_scanned){return resolve(L_macroSub)(L_macros)(L_scanned)}}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("newParseLine"))(lazy(2))(lazy("newParseLine names line = bind (scanLineM line)\n  \\scanned . ifNotErr (createAst scanned names) \\ast . ast"))((function(){return function(L_names){return function(L_line){return resolve(L_bind)((function(){return resolve(L_scanLineM)(L_line)}))((function(){return function(L_scanned){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_scanned)(L_names)}))((function(){return function(L_ast){return resolve(L_ast)}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("runLine"))(lazy(2))(lazy("runLine names line = bind (newParseLine names line)\n  \\ast . bind (runAst ast)\n    \\result . cons\n      ast\n      isParseErr result\n        left (parseErrMsg result)\n        right result"))((function(){return function(L_names){return function(L_line){return resolve(L_bind)((function(){return resolve(L_newParseLine)(L_names)(L_line)}))((function(){return function(L_ast){return resolve(L_bind)((function(){return resolve(L_runAst)(L_ast)}))((function(){return function(L_result){return resolve(L_cons)(L_ast)((function(){return resolve(L_isParseErr)(L_result)((function(){return resolve(L_left)((function(){return resolve(L_parseErrMsg)(L_result)}))}))((function(){return resolve(L_right)(L_result)}))}))}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("runLines"))(lazy(2))(lazy("runLines names lines = lines\n  \\h t D . bind (runLine names h)\n    \\line . bind (runLines names t)\n      \\rest . cons line rest\n  nil"))((function(){return function(L_names){return function(L_lines){return resolve(L_lines)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_bind)((function(){return resolve(L_runLine)(L_names)(L_h)}))((function(){return function(L_line){return resolve(L_bind)((function(){return resolve(L_runLines)(L_names)(L_t)}))((function(){return function(L_rest){return resolve(L_cons)(L_line)(L_rest)}}))}}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("runFile"))(lazy(1))(lazy("runFile text = \\\\\n  lines = linesForFile text\n  names = namesForLines lines\n  .\n  runLines names lines"))((function(){return function(L_text){return (function(){

var L_names, L_lines;

L_names = (function(){return resolve(L_namesForLines)(L_lines)});

L_lines = (function(){return resolve(L_linesForFile)(L_text)});
return resolve(L_runLines)(L_names)(L_lines)})()}}))},
  function(){return resolve(L_define)(lazy("baseLoad"))(lazy(1))(lazy("baseLoad file = bind (readFile file)\n  \\result . result\n    \\err . err\n    \\contents . bind (getValue 'activeTokenPacks')\n      \\activePacks . bind resetStdTokenPacks\n        \\_ . bind (runFile contents)\n          \\result . isNil activePacks\n            bind resetStdTokenPacks\n              \\_ . result\n            bind (resetTokenPacks activePacks)\n                \\_ . result"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_readFile)(L_file)}))((function(){return function(L_result){return resolve(L_result)((function(){return function(L_err){return resolve(L_err)}}))((function(){return function(L_contents){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("activeTokenPacks"))}))((function(){return function(L_activePacks){return resolve(L_bind)(L_resetStdTokenPacks)((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_runFile)(L_contents)}))((function(){return function(L_result_0){return resolve(L_isNil)(L_activePacks)((function(){return resolve(L_bind)(L_resetStdTokenPacks)((function(){return function(L___1){return resolve(L_result_0)}}))}))((function(){return resolve(L_bind)((function(){return resolve(L_resetTokenPacks)(L_activePacks)}))((function(){return function(L___1){return resolve(L_result_0)}}))}))}}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("load"))(lazy(1))(lazy("load file = bind (baseLoad file)\n  \\result . \\\\\n    errs = foldr (\\line results . tail line (\\er . cons er results) (\\x . results)) nil result\n    .\n    isNil errs\n      right true\n      left errs"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_baseLoad)(L_file)}))((function(){return function(L_result){return (function(){

var L_errs;

L_errs = (function(){return resolve(L_foldr)((function(){return function(L_line){return function(L_results){return resolve(L_tail)(L_line)((function(){return function(L_er){return resolve(L_cons)(L_er)(L_results)}}))((function(){return function(L_x){return resolve(L_results)}}))}}}))(L_nil)(L_result)});
return resolve(L_isNil)(L_errs)((function(){return resolve(L_right)(L_true)}))((function(){return resolve(L_left)(L_errs)}))})()}}))}}))},
  function(){return resolve(L_define)(lazy("require"))(lazy(1))(lazy("require file = bind (getValue 'requiredFiles')\n  \\files . contains files file\n    false\n    bind (load file)\n      \\result . result\n        \\x . left x\n        \\_ . bind (setValue 'requiredFiles' (cons file files))\n          \\_ . right true"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("requiredFiles"))}))((function(){return function(L_files){return resolve(L_contains)(L_files)(L_file)(L_false)((function(){return resolve(L_bind)((function(){return resolve(L_load)(L_file)}))((function(){return function(L_result){return resolve(L_result)((function(){return function(L_x){return resolve(L_left)(L_x)}}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("requiredFiles"))((function(){return resolve(L_cons)(L_file)(L_files)}))}))((function(){return function(L___0){return resolve(L_right)(L_true)}}))}}))}}))}))}}))}}))},
  function(){return resolve(L_define)(lazy("defTokenPack"))(lazy(2))(lazy("defTokenPack name pack = bind (getValue 'tokenPacks')\n  \\packs . setValue 'tokenPacks' (acons name pack packs)"))((function(){return function(L_name){return function(L_pack){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPacks"))}))((function(){return function(L_packs){return resolve(L_setValue)(lazy("tokenPacks"))((function(){return resolve(L_acons)(L_name)(L_pack)(L_packs)}))}}))}}}))},
  function(){return resolve(L_define)(lazy("useTokenPack"))(lazy(1))(lazy("useTokenPack name = bind (getValue 'tokenPacks')\n  \\packs . bind (getValue 'tokenGroups')\n    \\groups . bind (getValue 'tokenList')\n      \\tokens . bind (getValue 'activeTokenPacks')\n        \\activePacks . bind (getValue 'parseFilters')\n          \\filters . assoc name packs\n            \\pack . \\\\\n              groupToks = foldl (\\value el . el \\h t . cons h (cons t value)) nil (head (tail pack))\n              newToks = quicksort (\\a b . > (strLen a) (strLen b)) (append (head pack) (append groupToks tokens))\n              .\n              bind (setValue 'tokenList' newToks)\n                \\_ . bind (setValue 'tokenGroups' (appendAlist (head (tail pack)) groups))\n                  \\_ . bind (setValue 'parseFilters' (append filters (head (tail (tail pack)))))\n                    \\_ . bind (computeTokenPat newToks)\n                      \\_ . setValue 'activeTokenPacks' (cons name activePacks)\n            nil"))((function(){return function(L_name){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPacks"))}))((function(){return function(L_packs){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenList"))}))((function(){return function(L_tokens){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("activeTokenPacks"))}))((function(){return function(L_activePacks){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("parseFilters"))}))((function(){return function(L_filters){return resolve(L_assoc)(L_name)(L_packs)((function(){return function(L_pack){return (function(){

var L_newToks, L_groupToks;

L_newToks = (function(){return resolve(L_quicksort)((function(){return function(L_a){return function(L_b){return resolve(L_$z)((function(){return resolve(L_strLen)(L_a)}))((function(){return resolve(L_strLen)(L_b)}))}}}))((function(){return resolve(L_append)((function(){return resolve(L_head)(L_pack)}))((function(){return resolve(L_append)(L_groupToks)(L_tokens)}))}))});

L_groupToks = (function(){return resolve(L_foldl)((function(){return function(L_value){return function(L_el){return resolve(L_el)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)(L_t)(L_value)}))}}}))}}}))(L_nil)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_pack)}))}))});
return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenList"))(L_newToks)}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenGroups"))((function(){return resolve(L_appendAlist)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_pack)}))}))(L_groups)}))}))((function(){return function(L___0){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("parseFilters"))((function(){return resolve(L_append)(L_filters)((function(){return resolve(L_head)((function(){return resolve(L_tail)((function(){return resolve(L_tail)(L_pack)}))}))}))}))}))((function(){return function(L___1){return resolve(L_bind)((function(){return resolve(L_computeTokenPat)(L_newToks)}))((function(){return function(L___2){return resolve(L_setValue)(lazy("activeTokenPacks"))((function(){return resolve(L_cons)(L_name)(L_activePacks)}))}}))}}))}}))}}))})()}}))(L_nil)}}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("resetTokenPacks"))(lazy(1))(lazy("resetTokenPacks packs = bind (setValue 'tokenGroups' nil)\n  \\_ . bind (setValue 'tokenList' nil)\n    \\_ . bind (setValue 'activeTokenPacks' nil)\n      \\_ . bind (setValue 'parseFilters' nil)\n        \\_ . foldr1\n          \\packCmd result . bind packCmd \\_ . result\n          map useTokenPack packs"))((function(){return function(L_packs){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenGroups"))(L_nil)}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenList"))(L_nil)}))((function(){return function(L___0){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("activeTokenPacks"))(L_nil)}))((function(){return function(L___1){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("parseFilters"))(L_nil)}))((function(){return function(L___2){return resolve(L_foldr1)((function(){return function(L_packCmd){return function(L_result){return resolve(L_bind)(L_packCmd)((function(){return function(L___3){return resolve(L_result)}}))}}}))((function(){return resolve(L_map)(L_useTokenPack)(L_packs)}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("resetStdTokenPacks"))(lazy(0))(lazy("resetStdTokenPacks = bind (getValue 'stdTokenPacks')\n  \\stds . bind (resetTokenPacks stds)\n    \\_ . setValue 'activeTokenPacks' nil"))((function(){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("stdTokenPacks"))}))((function(){return function(L_stds){return resolve(L_bind)((function(){return resolve(L_resetTokenPacks)(L_stds)}))((function(){return function(L__){return resolve(L_setValue)(lazy("activeTokenPacks"))(L_nil)}}))}}))}))},
  function(){return resolve(L_define)(lazy("addStdTokenPacks"))(lazy(1))(lazy("addStdTokenPacks morePacks = bind (getValue 'stdTokenPacks')\n  \\stds . setValue 'stdTokenPacks' (append stds morePacks)"))((function(){return function(L_morePacks){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("stdTokenPacks"))}))((function(){return function(L_stds){return resolve(L_setValue)(lazy("stdTokenPacks"))((function(){return resolve(L_append)(L_stds)(L_morePacks)}))}}))}}))},
  function(){return resolve(L_define)(lazy("addParseFilter"))(lazy(1))(lazy("addParseFilter filt = bind (getValue 'parseFilters')\n  \\filters . setValue 'parseFilters' (append filters (cons filt nil))"))((function(){return function(L_filt){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("parseFilters"))}))((function(){return function(L_filters){return resolve(L_setValue)(lazy("parseFilters"))((function(){return resolve(L_append)(L_filters)((function(){return resolve(L_cons)(L_filt)(L_nil)}))}))}}))}}))},
  function(){return resolve(L_define)(lazy("d"))(lazy(3))(lazy("d label value expr = log (strCat (cons label (cons value nil))) expr"))((function(){return function(L_label){return function(L_value){return function(L_expr){return resolve(L_log)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_label)((function(){return resolve(L_cons)(L_value)(L_nil)}))}))}))(L_expr)}}}}))},
  function(){return resolve(L_define)(lazy("dd"))(lazy(2))(lazy("dd label arg = d label arg arg"))((function(){return function(L_label){return function(L_arg){return resolve(L_d)(L_label)(L_arg)(L_arg)}}}))},
  function(){return resolve(L_setValue)(lazy("macroDefs"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("requiredFiles"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("tokenPacks"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("activeTokenPacks"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("stdTokenPacks"))((function(){return resolve(L_cons)(lazy("std"))(L_nil)}))},
  function(){return resolve(L_defTokenPack)(lazy("std"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("."))((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(lazy("\\\\"))((function(){return resolve(L_cons)(lazy("\\@"))(L_nil)}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_acons)(lazy("("))(lazy(")"))(L_nil)}))((function(){return resolve(L_cons)(L_nil)(L_nil)}))}))}))},
  function(){return resolve(L_resetStdTokenPacks)},
  function(){return resolve(L_addTokenGroup)(lazy("["))(lazy("]"))},
  function(){return resolve(L_addToken)(lazy("|"))},
  function(){return resolve(L_define)(lazy("listifyOp"))(lazy(2))(lazy("listifyOp op list = list\n  \\h t D . isTokenString h '|'\n    cons t nil\n    cons (cons op (cons h (listifyOp op t))) nil\n  cons 'nil' nil"))((function(){return function(L_op){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){return resolve(L_cons)(L_t)(L_nil)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_op)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_listifyOp)(L_op)(L_t)}))}))}))(L_nil)}))}}}}))((function(){return resolve(L_cons)(lazy("nil"))(L_nil)}))}}}))},
  function(){return resolve(L_define)(lazy("listify"))(lazy(1))(lazy("listify list = listifyOp 'cons' list"))((function(){return function(L_list){return resolve(L_listifyOp)(lazy("cons"))(L_list)}}))},
  function(){return resolve(L_defMacro)(lazy("["))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_listify)(L_h)}}}))}}))},
  function(){return resolve(L_define)(lazy("listFilter"))(lazy(1))(lazy("listFilter code = bind (getValue 'listMacros')\n  \\listMacros . filterApplies code \\list . list \\h t .\n    and (isToken h) (contains listMacros (tokenString h))\n      listFilterTail list\n      list"))((function(){return function(L_code){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("listMacros"))}))((function(){return function(L_listMacros){return resolve(L_filterApplies)(L_code)((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_and)((function(){return resolve(L_isToken)(L_h)}))((function(){return resolve(L_contains)(L_listMacros)((function(){return resolve(L_tokenString)(L_h)}))}))((function(){return resolve(L_listFilterTail)(L_list)}))(L_list)}}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("listFilterTail"))(lazy(1))(lazy("listFilterTail list = list\n  \\h t D . isTokenString h '|'\n    > (length t) 2\n      cons h (cons (removeLast t) (cons (last t) nil))\n      list\n    cons h (listFilterTail t)\n  nil"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){return resolve(L_$z)((function(){return resolve(L_length)(L_t)}))(lazy(2))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)((function(){return resolve(L_removeLast)(L_t)}))((function(){return resolve(L_cons)((function(){return resolve(L_last)(L_t)}))(L_nil)}))}))}))(L_list)}))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_listFilterTail)(L_t)}))}))}}}}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("filterApplies"))(lazy(2))(lazy("filterApplies code func = isParens code\n  code \\start end contents . parens start end (filterApplies contents func)\n  isCons code\n    \\\\\n      filtered = filterApplyElements code func\n      .\n      and (isCons filtered) (isBlockStart (head filtered))\n        filtered\n        func filtered\n    code"))((function(){return function(L_code){return function(L_func){return resolve(L_isParens)(L_code)((function(){return resolve(L_code)((function(){return function(L_start){return function(L_end){return function(L_contents){return resolve(L_parens)(L_start)(L_end)((function(){return resolve(L_filterApplies)(L_contents)(L_func)}))}}}}))}))((function(){return resolve(L_isCons)(L_code)(function(){
var L_filtered;

L_filtered = (function(){return resolve(L_filterApplyElements)(L_code)(L_func)});
return resolve(L_and)((function(){return resolve(L_isCons)(L_filtered)}))((function(){return resolve(L_isBlockStart)((function(){return resolve(L_head)(L_filtered)}))}))(L_filtered)((function(){return resolve(L_func)(L_filtered)}))})(L_code)}))}}}))},
  function(){return resolve(L_define)(lazy("filterApplyElements"))(lazy(2))(lazy("filterApplyElements code func = code\n  \\h t D . isBlockStart h\n    cons h (filterBlock h t func)\n    cons (filterApplies h func)\n      and (isCons t) (isBlockStart (head t))\n        cons (filterApplyElements t func) nil\n        filterApplyElements t func\n  nil"))((function(){return function(L_code){return function(L_func){return resolve(L_code)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isBlockStart)(L_h)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_filterBlock)(L_h)(L_t)(L_func)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_filterApplies)(L_h)(L_func)}))((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_t)}))((function(){return resolve(L_isBlockStart)((function(){return resolve(L_head)(L_t)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_filterApplyElements)(L_t)(L_func)}))(L_nil)}))((function(){return resolve(L_filterApplyElements)(L_t)(L_func)}))}))}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("filterBlock"))(lazy(3))(lazy("filterBlock type code func = isTokenString type '\\\\'\n  filterLambda code func\n  filterLet code func"))((function(){return function(L_type){return function(L_code){return function(L_func){return resolve(L_isTokenString)(L_type)(lazy("\\"))((function(){return resolve(L_filterLambda)(L_code)(L_func)}))((function(){return resolve(L_filterLet)(L_code)(L_func)}))}}}}))},
  function(){return resolve(L_define)(lazy("filterLet"))(lazy(2))(lazy("filterLet code func = code \\h t . isTokenString h '.'\n  cons h (filterApplies t func)\n  cons (filterLetBinding h func)\n    filterLet t func"))((function(){return function(L_code){return function(L_func){return resolve(L_code)((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("."))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_filterApplies)(L_t)(L_func)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_filterLetBinding)(L_h)(L_func)}))((function(){return resolve(L_filterLet)(L_t)(L_func)}))}))}}}))}}}))},
  function(){return resolve(L_define)(lazy("filterLetBinding"))(lazy(2))(lazy("filterLetBinding code func = isParens code\n  setParens code \\contents . filterLetBinding contents func\n  isCons code\n    code \\h t . cons h\n      isTokenString h '='\n        filterApplies t func\n        filterLetBinding t func\n    code"))((function(){return function(L_code){return function(L_func){return resolve(L_isParens)(L_code)((function(){return resolve(L_setParens)(L_code)((function(){return function(L_contents){return resolve(L_filterLetBinding)(L_contents)(L_func)}}))}))((function(){return resolve(L_isCons)(L_code)((function(){return resolve(L_code)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_filterApplies)(L_t)(L_func)}))((function(){return resolve(L_filterLetBinding)(L_t)(L_func)}))}))}}}))}))(L_code)}))}}}))},
  function(){return resolve(L_define)(lazy("filterLambda"))(lazy(2))(lazy("filterLambda code func = code \\h t . cons h\n  isTokenString h '.'\n    filterApplies t func\n    filterLambda t func"))((function(){return function(L_code){return function(L_func){return resolve(L_code)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(lazy("."))((function(){return resolve(L_filterApplies)(L_t)(L_func)}))((function(){return resolve(L_filterLambda)(L_t)(L_func)}))}))}}}))}}}))},
  function(){return resolve(L_setValue)(lazy("listMacros"))((function(){return resolve(L_cons)(lazy("["))((function(){return resolve(L_cons)(lazy("{"))((function(){return resolve(L_cons)(lazy("hamt{"))(L_nil)}))}))}))},
  function(){return resolve(L_addParseFilter)(L_listFilter)},
  function(){return resolve(L_addTokenGroup)(lazy("{"))(lazy("}"))},
  function(){return resolve(L_defMacro)(lazy("{"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_listifyOp)(lazy("aconsPair"))(L_h)}}}))}}))},
  function(){return resolve(L_addTokenGroup)(lazy("hamt{"))(lazy("}"))},
  function(){return resolve(L_defMacro)(lazy("hamt{"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_hamtify)(L_h)}}}))}}))},
  function(){return resolve(L_define)(lazy("hamtWithPair"))(lazy(2))(lazy("hamtWithPair pair t = hamtWith (head pair) (tail pair) t"))((function(){return function(L_pair){return function(L_t){return resolve(L_hamtWith)((function(){return resolve(L_head)(L_pair)}))((function(){return resolve(L_tail)(L_pair)}))(L_t)}}}))},
  function(){return resolve(L_define)(lazy("hamtify"))(lazy(1))(lazy("hamtify list = list\n  \\h t D . isTokenString h '|'\n    cons t nil\n    and (isCons h) (or (isTokenString (head h) 'cons') (isTokenString (head h) ':'))\n      [['hamtWith' (head (tail h)) (head (tail (tail h))) | hamtify t]]\n      [['hamtWithPair' h | hamtify t]]\n  ['hamt']"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){return resolve(L_cons)(L_t)(L_nil)}))((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_h)}))((function(){return resolve(L_or)((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_h)}))(lazy("cons"))}))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_h)}))(lazy(":"))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("hamtWith"))((function(){return resolve(L_cons)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_h)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_head)((function(){return resolve(L_tail)((function(){return resolve(L_tail)(L_h)}))}))}))((function(){return resolve(L_hamtify)(L_t)}))}))}))}))(L_nil)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("hamtWithPair"))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_hamtify)(L_t)}))}))}))(L_nil)}))}))}}}}))((function(){return resolve(L_cons)(lazy("hamt"))(L_nil)}))}}))},
  function(){return resolve(L_defTokenPack)(lazy("list"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("|"))((function(){return resolve(L_cons)(lazy("="))(L_nil)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("{"))(lazy("}"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("hamt{"))(lazy("}"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("or["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("and["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("concat["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("concatFlat["))(lazy("]"))}))(L_nil)}))}))}))}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_listFilter)(L_nil)}))(L_nil)}))}))}))},
  function(){return resolve(L_addTokenGroup)(lazy("or["))(lazy("]"))},
  function(){return resolve(L_addTokenGroup)(lazy("and["))(lazy("]"))},
  function(){return resolve(L_addTokenGroup)(lazy("concat["))(lazy("]"))},
  function(){return resolve(L_addTokenGroup)(lazy("concatFlat["))(lazy("]"))},
  function(){return resolve(L_define)(lazy("listMacroFoldOp"))(lazy(3))(lazy("listMacroFoldOp op emptyCase list = list \\h t . foldr\n    \\case result . [op case result]\n    emptyCase\n    h"))((function(){return function(L_op){return function(L_emptyCase){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_foldr)((function(){return function(L_case){return function(L_result){return resolve(L_cons)(L_op)((function(){return resolve(L_cons)(L_case)((function(){return resolve(L_cons)(L_result)(L_nil)}))}))}}}))(L_emptyCase)(L_h)}}}))}}}}))},
  function(){return resolve(L_defMacro)(lazy("or["))((function(){return function(L_list){return resolve(L_listMacroFoldOp)(lazy("or"))(lazy("false"))(L_list)}}))},
  function(){return resolve(L_defMacro)(lazy("and["))((function(){return function(L_list){return resolve(L_listMacroFoldOp)(lazy("and"))(lazy("true"))(L_list)}}))},
  function(){return resolve(L_defMacro)(lazy("concat["))((function(){return function(L_list){return resolve(L_cons)(lazy("strCat"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_listify)((function(){return resolve(L_head)(L_list)}))}))(L_nil)}))(L_nil)}))}}))},
  function(){return resolve(L_defMacro)(lazy("concatFlat["))((function(){return function(L_list){return resolve(L_cons)(lazy("strCat"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("flatten"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_listify)((function(){return resolve(L_head)(L_list)}))}))(L_nil)}))(L_nil)}))}))(L_nil)}))}}))},
  function(){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("listMacros"))}))((function(){return function(L_lm){return resolve(L_cons)(lazy("concat["))(L_lm)}}))},
  function(){return resolve(L_define)(lazy("infix"))(lazy(1))(lazy("infix code = bind (getValue 'infixPrecedence')\n  \\prec . bind (getValue 'infixRightAssociative')\n    \\right . bind (getValue 'tokenGroups')\n      \\groups . filterApplies\n        code\n        \\expr . infixRearrange prec right (map (\\cell . tail cell) groups) expr"))((function(){return function(L_code){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("infixPrecedence"))}))((function(){return function(L_prec){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("infixRightAssociative"))}))((function(){return function(L_right){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_filterApplies)(L_code)((function(){return function(L_expr){return resolve(L_infixRearrange)(L_prec)(L_right)((function(){return resolve(L_map)((function(){return function(L_cell){return resolve(L_tail)(L_cell)}}))(L_groups)}))(L_expr)}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("infixRearrange"))(lazy(4))(lazy("infixRearrange prec right closes list = \\\\\n  len = length list\n  head1 = head list\n  tail1 = tail list\n  head2 = head tail1\n  tail2 = tail tail1\n  head3 = head tail2\n  opPrec = getPrec prec head2\n  .\n  < len 2\n    list\n    isInfix opPrec head1 head2 len\n      or (== len 2) (not (isInfixArg closes head3))\n        [[head2 head1] | tail2]\n        infixRearrange prec right closes (absorbArgument opPrec prec right closes head1 head2 tail2 head3 (- len 2))\n      [head1 | infixRearrange prec right closes tail1]"))((function(){return function(L_prec){return function(L_right){return function(L_closes){return function(L_list){return (function(){

var L_opPrec, L_head3, L_tail2, L_head2, L_tail1, L_head1, L_len;

L_opPrec = (function(){return resolve(L_getPrec)(L_prec)(L_head2)});

L_head3 = (function(){return resolve(L_head)(L_tail2)});

L_tail2 = (function(){return resolve(L_tail)(L_tail1)});

L_head2 = (function(){return resolve(L_head)(L_tail1)});

L_tail1 = (function(){return resolve(L_tail)(L_list)});

L_head1 = (function(){return resolve(L_head)(L_list)});

L_len = (function(){return resolve(L_length)(L_list)});
return resolve(L_$y)(L_len)(lazy(2))(L_list)((function(){return resolve(L_isInfix)(L_opPrec)(L_head1)(L_head2)(L_len)((function(){return resolve(L_or)((function(){return resolve(L_$p$p)(L_len)(lazy(2))}))((function(){return resolve(L_not)((function(){return resolve(L_isInfixArg)(L_closes)(L_head3)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_head2)((function(){return resolve(L_cons)(L_head1)(L_nil)}))}))(L_tail2)}))((function(){return resolve(L_infixRearrange)(L_prec)(L_right)(L_closes)((function(){return resolve(L_absorbArgument)(L_opPrec)(L_prec)(L_right)(L_closes)(L_head1)(L_head2)(L_tail2)(L_head3)((function(){return resolve(L_$_)(L_len)(lazy(2))}))}))}))}))((function(){return resolve(L_cons)(L_head1)((function(){return resolve(L_infixRearrange)(L_prec)(L_right)(L_closes)(L_tail1)}))}))}))})()}}}}}))},
  function(){return resolve(L_define)(lazy("absorbArgument"))(lazy(9))(lazy("absorbArgument opPrec prec right closes head1 head2 tail2 head3 len = \\\\\n  tail3 = tail tail2\n  head4 = head tail3\n  tail4 = tail tail3\n  head5 = head tail4\n  .\n  infixShouldEatNext opPrec prec (contains right (strTokenString head2)) head3 head4 head5 closes len\n    [head1 head2 | absorbArgument (getPrec prec head4) prec right closes head3 head4 tail4 head5 (- len 2)]\n    [[head2 head1 head3] | tail3]"))((function(){return function(L_opPrec){return function(L_prec){return function(L_right){return function(L_closes){return function(L_head1){return function(L_head2){return function(L_tail2){return function(L_head3){return function(L_len){return (function(){

var L_head5, L_tail4, L_head4, L_tail3;

L_head5 = (function(){return resolve(L_head)(L_tail4)});

L_tail4 = (function(){return resolve(L_tail)(L_tail3)});

L_head4 = (function(){return resolve(L_head)(L_tail3)});

L_tail3 = (function(){return resolve(L_tail)(L_tail2)});
return resolve(L_infixShouldEatNext)(L_opPrec)(L_prec)((function(){return resolve(L_contains)(L_right)((function(){return resolve(L_strTokenString)(L_head2)}))}))(L_head3)(L_head4)(L_head5)(L_closes)(L_len)((function(){return resolve(L_cons)(L_head1)((function(){return resolve(L_cons)(L_head2)((function(){return resolve(L_absorbArgument)((function(){return resolve(L_getPrec)(L_prec)(L_head4)}))(L_prec)(L_right)(L_closes)(L_head3)(L_head4)(L_tail4)(L_head5)((function(){return resolve(L_$_)(L_len)(lazy(2))}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_head2)((function(){return resolve(L_cons)(L_head1)((function(){return resolve(L_cons)(L_head3)(L_nil)}))}))}))(L_tail3)}))})()}}}}}}}}}}))},
  function(){return resolve(L_define)(lazy("isInfixArg"))(lazy(2))(lazy("isInfixArg closes item = or[\n  isParens item\n  isCons item\n  and[\n    isToken item\n    not (contains closes (tokenString item))\n    not (isBlockStart item)]]"))((function(){return function(L_closes){return function(L_item){return resolve(L_or)((function(){return resolve(L_isParens)(L_item)}))((function(){return resolve(L_or)((function(){return resolve(L_isCons)(L_item)}))((function(){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_isToken)(L_item)}))((function(){return resolve(L_and)((function(){return resolve(L_not)((function(){return resolve(L_contains)(L_closes)((function(){return resolve(L_tokenString)(L_item)}))}))}))((function(){return resolve(L_and)((function(){return resolve(L_not)((function(){return resolve(L_isBlockStart)(L_item)}))}))(L_true)}))}))}))(L_false)}))}))}}}))},
  function(){return resolve(L_define)(lazy("isInfix"))(lazy(4))(lazy("isInfix opPrec head1 head2 len = and[\n  > len 1\n  > opPrec -1\n  isInfixArg nil head1]"))((function(){return function(L_opPrec){return function(L_head1){return function(L_head2){return function(L_len){return resolve(L_and)((function(){return resolve(L_$z)(L_len)(lazy(1))}))((function(){return resolve(L_and)((function(){return resolve(L_$z)(L_opPrec)(lazy(-1))}))((function(){return resolve(L_and)((function(){return resolve(L_isInfixArg)(L_nil)(L_head1)}))(L_true)}))}))}}}}}))},
  function(){return resolve(L_define)(lazy("getPrec"))(lazy(2))(lazy("getPrec prec token = \\\\\n  str = tokenString token\n  .\n  isToken token\n    findIndex (\\level . contains level str) prec\n    -1"))((function(){return function(L_prec){return function(L_token){return (function(){

var L_str;

L_str = (function(){return resolve(L_tokenString)(L_token)});
return resolve(L_isToken)(L_token)((function(){return resolve(L_findIndex)((function(){return function(L_level){return resolve(L_contains)(L_level)(L_str)}}))(L_prec)}))(lazy(-1))})()}}}))},
  function(){return resolve(L_define)(lazy("infixShouldEatNext"))(lazy(8))(lazy("infixShouldEatNext opPrec prec isRight curArg nextOp nextArg closes len = \\\\\n  nextPrec = getPrec prec nextOp\n  .\n  and[\n    > len 2\n    isInfix nextPrec curArg nextOp len\n    or (> opPrec nextPrec) (and (== opPrec nextPrec) isRight)\n    isInfixArg closes nextArg]"))((function(){return function(L_opPrec){return function(L_prec){return function(L_isRight){return function(L_curArg){return function(L_nextOp){return function(L_nextArg){return function(L_closes){return function(L_len){return (function(){

var L_nextPrec;

L_nextPrec = (function(){return resolve(L_getPrec)(L_prec)(L_nextOp)});
return resolve(L_and)((function(){return resolve(L_$z)(L_len)(lazy(2))}))((function(){return resolve(L_and)((function(){return resolve(L_isInfix)(L_nextPrec)(L_curArg)(L_nextOp)(L_len)}))((function(){return resolve(L_and)((function(){return resolve(L_or)((function(){return resolve(L_$z)(L_opPrec)(L_nextPrec)}))((function(){return resolve(L_and)((function(){return resolve(L_$p$p)(L_opPrec)(L_nextPrec)}))(L_isRight)}))}))((function(){return resolve(L_and)((function(){return resolve(L_isInfixArg)(L_closes)(L_nextArg)}))(L_true)}))}))}))})()}}}}}}}}}))},
  function(){return resolve(L_defMacro)(lazy(":"))((function(){return function(L_list){return resolve(L_cons)(lazy("cons"))(L_list)}}))},
  function(){return resolve(L_define)(lazy("iprec"))(lazy(0))(lazy("iprec = [['*' '/' '%'] ['+' '-'] [':'] ['<' '>' '<=' '>='] ['==' '!=']]"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("*"))((function(){return resolve(L_cons)(lazy("/"))((function(){return resolve(L_cons)(lazy("%"))(L_nil)}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("+"))((function(){return resolve(L_cons)(lazy("-"))(L_nil)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy(":"))(L_nil)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("<"))((function(){return resolve(L_cons)(lazy(">"))((function(){return resolve(L_cons)(lazy("<="))((function(){return resolve(L_cons)(lazy(">="))(L_nil)}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("=="))((function(){return resolve(L_cons)(lazy("!="))(L_nil)}))}))(L_nil)}))}))}))}))}))},
  function(){return resolve(L_define)(lazy("rightAssoc"))(lazy(0))(lazy("rightAssoc = [':']"))((function(){return resolve(L_cons)(lazy(":"))(L_nil)}))},
  function(){return resolve(L_setValue)(lazy("infixPrecedence"))(L_iprec)},
  function(){return resolve(L_setValue)(lazy("infixRightAssociative"))(L_rightAssoc)},
  function(){return resolve(L_defTokenPack)(lazy("infix"))((function(){return resolve(L_cons)((function(){return resolve(L_flatten)(L_iprec)}))((function(){return resolve(L_cons)(L_nil)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_infix)(L_nil)}))(L_nil)}))}))}))},
  function(){return resolve(L_useTokenPack)(lazy("infix"))},
  function(){return resolve(L_defMacro)(lazy("do"))((function(){return function(L_list){return resolve(L_handleDo)(L_list)(L_false)(L_id)}}))},
  function(){return resolve(L_define)(lazy("handleDo"))(lazy(3))(lazy("handleDo list inLet cont = list\n  \\h t D . isNil t\n    cont (inLet ['.' h] [h])\n    doClause (stripParens h) h nil inLet \\newInLet chain .\n      handleDo t newInLet \\rest . cont (chain rest)\n  cont nil"))((function(){return function(L_list){return function(L_inLet){return function(L_cont){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isNil)(L_t)((function(){return resolve(L_cont)((function(){return resolve(L_inLet)((function(){return resolve(L_cons)(lazy("."))((function(){return resolve(L_cons)(L_h)(L_nil)}))}))((function(){return resolve(L_cons)(L_h)(L_nil)}))}))}))((function(){return resolve(L_doClause)((function(){return resolve(L_stripParens)(L_h)}))(L_h)(L_nil)(L_inLet)((function(){return function(L_newInLet){return function(L_chain){return resolve(L_handleDo)(L_t)(L_newInLet)((function(){return function(L_rest){return resolve(L_cont)((function(){return resolve(L_chain)(L_rest)}))}}))}}}))}))}}}}))((function(){return resolve(L_cont)(L_nil)}))}}}}))},
  function(){return resolve(L_define)(lazy("doClause"))(lazy(5))(lazy("doClause steppingClause clause prefix inLet cont = \\\\\n  makeBind var monad = cont false \\rest . inLet (cons '.') id\n    ['bind' monad ['\\\\' var '.' | rest]]\n  .\n  isCons steppingClause\n    steppingClause \\h t . isTokenString h '='\n      inLet\n        cont true \\rest . [clause | rest]\n        cont true \\rest . ['\\\\\\\\' clause | rest]\n      isTokenString h '<-'\n        isNil t\n          parseErr \"No monad in do-clause: \" clause\n          prefix\n            \\ph pt D . isNil pt\n              makeBind (isNil prefix '_' (head prefix)) t\n              parseErr \"More than one variable in do-clause: \" clause\n            makeBind '_' t\n        doClause t clause [h | prefix] inLet cont\n    makeBind '_' clause"))((function(){return function(L_steppingClause){return function(L_clause){return function(L_prefix){return function(L_inLet){return function(L_cont){return (function(){

var L_makeBind;

L_makeBind = (function(){return function(L_var){return function(L_monad){return resolve(L_cont)(L_false)((function(){return function(L_rest){return resolve(L_inLet)((function(){return resolve(L_cons)(lazy("."))}))(L_id)((function(){return resolve(L_cons)(lazy("bind"))((function(){return resolve(L_cons)(L_monad)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(L_var)((function(){return resolve(L_cons)(lazy("."))(L_rest)}))}))}))(L_nil)}))}))}))}}))}}});
return resolve(L_isCons)(L_steppingClause)((function(){return resolve(L_steppingClause)((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_inLet)((function(){return resolve(L_cont)(L_true)((function(){return function(L_rest){return resolve(L_cons)(L_clause)(L_rest)}}))}))((function(){return resolve(L_cont)(L_true)((function(){return function(L_rest){return resolve(L_cons)(lazy("\\\\"))((function(){return resolve(L_cons)(L_clause)(L_rest)}))}}))}))}))((function(){return resolve(L_isTokenString)(L_h)(lazy("<-"))((function(){return resolve(L_isNil)(L_t)((function(){return resolve(L_parseErr)(lazy("No monad in do-clause: "))(L_clause)}))((function(){return resolve(L_prefix)((function(){return function(L_ph){return function(L_pt){return function(L_D){return resolve(L_isNil)(L_pt)((function(){return resolve(L_makeBind)((function(){return resolve(L_isNil)(L_prefix)(lazy("_"))((function(){return resolve(L_head)(L_prefix)}))}))(L_t)}))((function(){return resolve(L_parseErr)(lazy("More than one variable in do-clause: "))(L_clause)}))}}}}))((function(){return resolve(L_makeBind)(lazy("_"))(L_t)}))}))}))((function(){return resolve(L_doClause)(L_t)(L_clause)((function(){return resolve(L_cons)(L_h)(L_prefix)}))(L_inLet)(L_cont)}))}))}}}))}))((function(){return resolve(L_makeBind)(lazy("_"))(L_clause)}))})()}}}}}}))},
  function(){return resolve(L_defTokenPack)(lazy("do"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("<-"))(L_nil)}))((function(){return resolve(L_cons)(L_nil)((function(){return resolve(L_cons)(L_nil)(L_nil)}))}))}))},
  function(){return resolve(L_addStdTokenPacks)((function(){return resolve(L_cons)(lazy("list"))((function(){return resolve(L_cons)(lazy("infix"))((function(){return resolve(L_cons)(lazy("do"))(L_nil)}))}))}))},
  function(){return resolve(L_resetStdTokenPacks)}]);

},{}],6:[function(require,module,exports){
(function(global){/*!
 Lo-Dash 0.7.0 lodash.com/license
 Underscore.js 1.3.3 github.com/documentcloud/underscore/blob/master/LICENSE
*/
;(function(e,t){function s(e){return new o(e)}function o(e){if(e&&e.__wrapped__)return e;this.__wrapped__=e}function u(e,t){return function(n,r,i){return e.call(t,n,r,i)}}function a(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||W),s=i?{}:e;if(i)for(var o=t-1;++o<r;)n=e[o]+"",(at.call(s,n)?s[n]:s[n]=[]).push(e[o]);return function(e){if(i){var n=e+"";return at.call(s,n)&&-1<L(s[n],e)}return-1<L(s,e,t)}}function f(e,n){var r=e.b,i=n.b,e=e.a,n=n.a;if(e!==n){if(e>n||e===t)return 1;if(e<n||n===t)return-1}return r<
i?-1:1}function l(e,t,n){function r(){var u=arguments,a=s?this:t;return i||(e=t[o]),n.length&&(u=u.length?n.concat(ct.call(u)):n),this instanceof r?(v.prototype=e.prototype,a=new v,(u=e.apply(a,u))&&$t[typeof u]?u:a):e.apply(a,u)}var i=E(e),s=!n,o=e;return s&&(n=t),r}function c(){for(var e,t,n,s=-1,o=arguments.length,a={e:"",f:"",j:"",q:"",c:{d:""},m:{d:""}};++s<o;)for(t in e=arguments[s],e)n=(n=e[t])==r?"":n,/d|i/.test(t)?("string"==typeof n&&(n={b:n,l:n}),a.c[t]=n.b||"",a.m[t]=n.l||""):a[t]=n;e=
a.a,t=/^[^,]+/.exec(e)[0],n=a.s,a.g=t,a.h=Mt,a.k=Rt,a.n=Pt,a.p=rt,a.r=a.r!==i,a.s=n==r?Ut:n,a.o==r&&(a.o=jt),a.f||(a.f="if(!"+t+")return u");if("e"!=t||!a.c.i)a.c=r;t="",a.s&&(t+="'use strict';"),t+="var j,A,k="+a.g+",u",a.j&&(t+="="+a.j),t+=";"+a.f+";"+a.q+";",a.c&&(t+="var l=k.length;j=-1;",a.m&&(t+="if(l===+l){"),a.o&&(t+="if(z.call(k)==x){k=k.split('')}"),t+=a.c.d+";while(++j<l){A=k[j];"+a.c.i+"}",a.m&&(t+="}"));if(a.m){a.c?t+="else{":a.n&&(t+="var l=k.length;j=-1;if(l&&O(k)){while(++j<l){A=k[j+=''];"+
a.m.i+"}}else{"),a.h||(t+="var v=typeof k=='function'&&r.call(k,'prototype');");if(a.k&&a.r)t+="var o=-1,p=X[typeof k]?m(k):[],l=p.length;"+a.m.d+";while(++o<l){j=p[o];",a.h||(t+="if(!(v&&j=='prototype')){"),t+="A=k[j];"+a.m.i+"",a.h||(t+="}");else{t+=a.m.d+";for(j in k){";if(!a.h||a.r)t+="if(",a.h||(t+="!(v&&j=='prototype')"),!a.h&&a.r&&(t+="&&"),a.r&&(t+="h.call(k,j)"),t+="){";t+="A=k[j];"+a.m.i+";";if(!a.h||a.r)t+="}"}t+="}";if(a.h){t+="var g=k.constructor;";for(n=0;7>n;n++)t+="j='"+a.p[n]+"';if("
,"constructor"==a.p[n]&&(t+="!(g&&g.prototype===k)&&"),t+="h.call(k,j)){A=k[j];"+a.m.i+"}"}if(a.c||a.n)t+="}"}return t+=a.e+";return u",Function("D,E,F,c,I,f,J,h,i,M,O,Q,S,T,W,X,m,r,w,x,z","var G=function("+e+"){"+t+"};return G")(zt,R,D,u,f,ut,ln,at,P,L,w,sn,E,on,Ct,$t,gt,lt,ct,Lt,ht)}function h(e,t){return ot[t]}function p(e){return"\\"+Jt[e]}function d(e){return Xt[e]}function v(){}function m(e,t){if(e&&V.test(t))return"<e%-"+t+"%>";var n=ot.length;return ot[n]="'+__e("+t+")+'",it+n+st}function g
(e,t,n,i){return i?(e=ot.length,ot[e]="';"+i+";__p+='",it+e+st):t?m(r,t):y(r,n)}function y(e,t){if(e&&V.test(t))return"<e%="+t+"%>";var n=ot.length;return ot[n]="'+((__t=("+t+"))==null?'':__t)+'",it+n+st}function b(e){return Vt[e]}function w(e){return ht.call(e)==Et}function E(e){return"function"==typeof e}function S(e,t){var n=i;if(!e||"object"!=typeof e||!t&&w(e))return n;var r=e.constructor;return(!Ft||"function"==typeof e.toString||"string"!=typeof (e+""))&&(!E(r)||r instanceof r)?Dt?(ln(e,function(
e,t,r){return n=!at.call(r,t),i}),n===i):(ln(e,function(e,t){n=t}),n===i||at.call(e,n)):n}function x(e,t,s,o,u){if(e==r)return e;s&&(t=i);if(s=$t[typeof e]){var a=ht.call(e);if(!Wt[a]||Ht&&w(e))return e;var f=a==St,s=f||(a==Ct?on(e,n):s)}if(!s||!t)return s?f?ct.call(e):fn({},e):e;s=e.constructor;switch(a){case xt:return new s(e==n);case Tt:return new s(+e);case Nt:case Lt:return new s(e);case kt:return s(e.source,G.exec(e))}o||(o=[]),u||(u=[]);for(a=o.length;a--;)if(o[a]==e)return u[a];var l=f?s(
a=e.length):{};o.push(e),u.push(l);if(f)for(f=-1;++f<a;)l[f]=x(e[f],t,r,o,u);else cn(e,function(e,n){l[n]=x(e,t,r,o,u)});return l}function T(e,t,s,o){if(e==r||t==r)return e===t;if(e===t)return 0!==e||1/e==1/t;if($t[typeof e]||$t[typeof t])e=e.__wrapped__||e,t=t.__wrapped__||t;var u=ht.call(e);if(u!=ht.call(t))return i;switch(u){case xt:case Tt:return+e==+t;case Nt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case kt:case Lt:return e==t+""}var a=zt[u];if(Ht&&!a&&(a=w(e))&&!w(t)||!a&&(u!=Ct||Ft&&("function"!=typeof 
e.toString&&"string"==typeof (e+"")||"function"!=typeof t.toString&&"string"==typeof (t+""))))return i;s||(s=[]),o||(o=[]);for(u=s.length;u--;)if(s[u]==e)return o[u]==t;var u=-1,f=n,l=0;s.push(e),o.push(t);if(a){l=e.length;if(f=l==t.length)for(;l--&&(f=T(e[l],t[l],s,o)););return f}a=e.constructor,f=t.constructor;if(a!=f&&(!E(a)||!(a instanceof a&&E(f)&&f instanceof f)))return i;for(var c in e)if(at.call(e,c)&&(l++,!at.call(t,c)||!T(e[c],t[c],s,o)))return i;for(c in t)if(at.call(t,c)&&!(l--))return i
;if(Mt)for(;7>++u;)if(c=rt[u],at.call(e,c)&&(!at.call(t,c)||!T(e[c],t[c],s,o)))return i;return n}function N(e,t,n,r){if(!e)return n;var i=e.length,s=3>arguments.length;r&&(t=u(t,r));if(i===+i){var o=jt&&ht.call(e)==Lt?e.split(""):e;for(i&&s&&(n=o[--i]);i--;)n=t(n,o[i],i,e);return n}o=vn(e);for((i=o.length)&&s&&(n=e[o[--i]]);i--;)s=o[i],n=t(n,e[s],s,e);return n}function C(e,t,n){if(e)return t==r||n?e[0]:ct.call(e,0,t)}function k(e,t){var n=[];if(!e)return n;for(var r,i=-1,s=e.length;++i<s;)r=e[i],
sn(r)?ft.apply(n,t?r:k(r)):n.push(r);return n}function L(e,t,n){if(!e)return-1;var r=-1,i=e.length;if(n){if("number"!=typeof n)return r=M(e,t),e[r]===t?r:-1;r=(0>n?yt(0,i+n):n)-1}for(;++r<i;)if(e[r]===t)return r;return-1}function A(e,t,n){var r=-Infinity,i=r;if(!e)return i;var s=-1,o=e.length;if(!t){for(;++s<o;)e[s]>i&&(i=e[s]);return i}for(n&&(t=u(t,n));++s<o;)n=t(e[s],s,e),n>r&&(r=n,i=e[s]);return i}function O(e,t,n){return e?ct.call(e,t==r||n?1:t):[]}function M(e,t,n,r){if(!e)return 0;var i=0,
s=e.length;if(n){r&&(n=D(n,r));for(t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=r+1:s=r}else for(;i<s;)r=i+s>>>1,e[r]<t?i=r+1:s=r;return i}function _(e,t,n,r){var s=[];if(!e)return s;var o=-1,a=e.length,f=[];"function"==typeof t&&(r=n,n=t,t=i);for(n?r&&(n=u(n,r)):n=P;++o<a;)if(r=n(e[o],o,e),t?!o||f[f.length-1]!==r:0>L(f,r))f.push(r),s.push(e[o]);return s}function D(e,t){return qt||pt&&2<arguments.length?pt.call.apply(pt,arguments):l(e,t,ct.call(arguments,2))}function P(e){return e}function H(e){Cn(hn(e),function(
t){var r=s[t]=e[t];o.prototype[t]=function(){var e=[this.__wrapped__];return arguments.length&&ft.apply(e,arguments),e=r.apply(s,e),this.__chain__&&(e=new o(e),e.__chain__=n),e}})}var n=!0,r=null,i=!1,B,j,F,I,q="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(e=global),exports),R=Array.prototype,U=Object.prototype,z=0,W=30,X=e._,V=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,$=/&(?:amp|lt|gt|quot|#x27);/g,J=/\b__p\+='';/g,K=/\b(__p\+=)''\+/g
,Q=/(__e\(.*?\)|\b__t\))\+'';/g,G=/\w*$/,Y=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g,Z=RegExp("^"+(U.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),et=/__token(\d+)__/g,tt=/[&<>"']/g,nt=/['\n\r\t\u2028\u2029\\]/g,rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),it="__token",st="__",ot=[],ut=R.concat,at=U.hasOwnProperty,ft=R.push,lt=U.propertyIsEnumerable,ct=R.slice,ht=U.toString,pt=Z.test(
pt=ct.bind)&&pt,dt=Math.floor,vt=Z.test(vt=Array.isArray)&&vt,mt=e.isFinite,gt=Z.test(gt=Object.keys)&&gt,yt=Math.max,bt=Math.min,wt=Math.random,Et="[object Arguments]",St="[object Array]",xt="[object Boolean]",Tt="[object Date]",Nt="[object Number]",Ct="[object Object]",kt="[object RegExp]",Lt="[object String]",At=e.clearTimeout,Ot=e.setTimeout,Mt,_t,Dt,Pt=n;(function(){function e(){this.x=1}var t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments)Pt=!r;Mt=4>
(n+"").length,Dt="x"!=n[0],_t=(n.splice.call(t,0,1),t[0])})(1);var Ht=!w(arguments),Bt="x"!=ct.call("x")[0],jt="xx"!="x"[0]+Object("x")[0];try{var Ft=("[object Object]",ht.call(e.document||0)==Ct)}catch(It){}var qt=pt&&/\n|Opera/.test(pt+ht.call(e.opera)),Rt=gt&&/^.+$|true/.test(gt+!!e.attachEvent),Ut=!qt,zt={};zt[xt]=zt[Tt]=zt["[object Function]"]=zt[Nt]=zt[Ct]=zt[kt]=i,zt[Et]=zt[St]=zt[Lt]=n;var Wt={};Wt[Et]=Wt["[object Function]"]=i,Wt[St]=Wt[xt]=Wt[Tt]=Wt[Nt]=Wt[Ct]=Wt[kt]=Wt[Lt]=n;var Xt={"&"
:"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Vt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},$t={"boolean":i,"function":n,object:n,number:i,string:i,"undefined":i,unknown:n},Jt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};s.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Kt={a:"e,d,y",j:"e",q:"if(!d)d=i;else if(y)d=c(d,y)",i:"if(d(A,j,e)===false)return u"},Qt={j:"{}"
,q:"var q;if(typeof d!='function'){var hh=d;d=function(A){return A[hh]}}else if(y)d=c(d,y)",i:"q=d(A,j,e);(h.call(u,q)?u[q]++:u[q]=1)"},Gt={j:"true",i:"if(!d(A,j,e))return!u"},Yt={r:i,s:i,a:"n",j:"n",q:"for(var a=1,b=arguments.length;a<b;a++){if(k=arguments[a]){",i:"u[j]=A",e:"}}"},Zt={j:"[]",i:"d(A,j,e)&&u.push(A)"},en={q:"if(y)d=c(d,y)"},tn={i:{l:Kt.i}},nn={j:"",f:"if(!e)return[]",d:{b:"u=Array(l)",l:"u="+(Rt?"Array(l)":"[]")},i:{b:"u[j]=d(A,j,e)",l:"u"+(Rt?"[o]=":".push")+"(d(A,j,e))"}},rn={r:
i,a:"n,d,y",j:"{}",q:"var R=typeof d=='function';if(!R){var t=f.apply(E,arguments)}else if(y)d=c(d,y)",i:"if(R?!d(A,j,n):M(t,j)<0)u[j]=A"};Ht&&(w=function(e){return!!e&&!!at.call(e,"callee")});var sn=vt||function(e){return ht.call(e)==St};E(/x/)&&(E=function(e){return"[object Function]"==ht.call(e)});var on=$t.__proto__!=U?S:function(e,t){if(!e)return i;var n=e.valueOf,r="function"==typeof n&&(r=n.__proto__)&&r.__proto__;return r?e==r||e.__proto__==r&&(t||!w(e)):S(e)},un=c({a:"n",j:"[]",i:"u.push(j)"
}),an=c(Yt,{i:"if(u[j]==null)"+Yt.i}),fn=c(Yt),ln=c(Kt,en,tn,{r:i}),cn=c(Kt,en,tn),hn=c({r:i,a:"n",j:"[]",i:"if(S(A))u.push(j)",e:"u.sort()"}),pn=c({a:"n",j:"{}",i:"u[A]=j"}),dn=c({a:"A",j:"true",q:"var H=z.call(A),l=A.length;if(D[H]"+(Ht?"||O(A)":"")+"||(H==W&&l===+l&&S(A.splice)))return!l",i:{l:"return false"}}),vn=gt?function(e){var t=typeof e;return"function"==t&&lt.call(e,"prototype")?un(e):e&&$t[t]?gt(e):[]}:un,mn=c(Yt,{a:"n,cc,N",q:"var b,P,dd,ee,C=arguments,a=0;if(N==T){b=2;dd=C[3];ee=C[4]}else{b=C.length;dd=[];ee=[]}while(++a<b){if(k=C[a]){"
,i:"if((cc=A)&&((P=Q(cc))||T(cc))){var K=false,ff=dd.length;while(ff--)if(K=dd[ff]==cc)break;if(K){u[j]=ee[ff]}else{dd.push(cc);ee.push(A=(A=u[j])&&P?(Q(A)?A:[]):(T(A)?A:{}));u[j]=G(A,cc,T,dd,ee)}}else if(cc!=null)u[j]=cc"}),gn=c(rn),yn=c({a:"n",j:"[]",i:"u"+(Rt?"[o]=":".push")+"([j,A])"}),bn=c(rn,{q:"if(typeof d!='function'){var q,t=f.apply(E,arguments),l=t.length;for(j=1;j<l;j++){q=t[j];if(q in n)u[q]=n[q]}}else{if(y)d=c(d,y)",i:"if(d(A,j,n))u[j]=A",e:"}"}),wn=c({a:"n",j:"[]",i:"u.push(A)"}),En=
c({a:"e,gg",j:"false",o:i,d:{b:"if(z.call(e)==x)return e.indexOf(gg)>-1"},i:"if(A===gg)return true"}),Sn=c(Kt,Qt),xn=c(Kt,Gt),Tn=c(Kt,Zt),Nn=c(Kt,en,{j:"",i:"if(d(A,j,e))return A"}),Cn=c(Kt,en),kn=c(Kt,Qt,{i:"q=d(A,j,e);(h.call(u,q)?u[q]:u[q]=[]).push(A)"}),Ln=c(nn,{a:"e,U",q:"var C=w.call(arguments,2),R=typeof U=='function'",i:{b:"u[j]=(R?U:A[U]).apply(A,C)",l:"u"+(Rt?"[o]=":".push")+"((R?U:A[U]).apply(A,C))"}}),An=c(Kt,nn),On=c(nn,{a:"e,aa",i:{b:"u[j]=A[aa]",l:"u"+(Rt?"[o]=":".push")+"(A[aa])"}
}),Mn=c({a:"e,d,B,y",j:"B",q:"var V=arguments.length<3;if(y)d=c(d,y)",d:{b:"if(V)u=k[++j]"},i:{b:"u=d(u,A,j,e)",l:"u=V?(V=false,A):d(u,A,j,e)"}}),_n=c(Kt,Zt,{i:"!"+Zt.i}),Dn=c(Kt,Gt,{j:"false",i:Gt.i.replace("!","")}),Pn=c(Kt,Qt,nn,{i:{b:"u[j]={a:d(A,j,e),b:j,c:A}",l:"u"+(Rt?"[o]=":".push")+"({a:d(A,j,e),b:j,c:A})"},e:"u.sort(I);l=u.length;while(l--)u[l]=u[l].c"}),Hn=c(Zt,{a:"e,Z",q:"var t=[];J(Z,function(A,q){t.push(q)});var bb=t.length",i:"for(var q,Y=true,s=0;s<bb;s++){q=t[s];if(!(Y=A[q]===Z[q]))break}Y&&u.push(A)"
}),Bn=c({r:i,s:i,a:"n",j:"n",q:"var L=arguments,l=L.length;if(l>1){for(var j=1;j<l;j++)u[L[j]]=F(u[L[j]],u);return u}",i:"if(S(u[j]))u[j]=F(u[j],u)"});s.VERSION="0.7.0",s.after=function(e,t){return 1>e?t():function(){if(1>--e)return t.apply(this,arguments)}},s.bind=D,s.bindAll=Bn,s.chain=function(e){return e=new o(e),e.__chain__=n,e},s.clone=x,s.compact=function(e){var t=[];if(!e)return t;for(var n=-1,r=e.length;++n<r;)e[n]&&t.push(e[n]);return t},s.compose=function(){var e=arguments;return function(
){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},s.contains=En,s.countBy=Sn,s.debounce=function(e,t,n){function i(){a=r,n||(o=e.apply(u,s))}var s,o,u,a;return function(){var r=n&&!a;return s=arguments,u=this,At(a),a=Ot(i,t),r&&(o=e.apply(u,s)),o}},s.defaults=an,s.defer=function(e){var n=ct.call(arguments,1);return Ot(function(){return e.apply(t,n)},1)},s.delay=function(e,n){var r=ct.call(arguments,2);return Ot(function(){return e.apply(t,r)},n)},s.difference=function(e){
var t=[];if(!e)return t;for(var n=-1,r=e.length,i=ut.apply(t,arguments),i=a(i,r);++n<r;)i(e[n])||t.push(e[n]);return t},s.escape=function(e){return e==r?"":(e+"").replace(tt,d)},s.every=xn,s.extend=fn,s.filter=Tn,s.find=Nn,s.first=C,s.flatten=k,s.forEach=Cn,s.forIn=ln,s.forOwn=cn,s.functions=hn,s.groupBy=kn,s.has=function(e,t){return e?at.call(e,t):i},s.identity=P,s.indexOf=L,s.initial=function(e,t,n){return e?ct.call(e,0,-(t==r||n?1:t)):[]},s.intersection=function(e){var t=[];if(!e)return t;var n
,r=arguments.length,i=[],s=-1,o=e.length;e:for(;++s<o;)if(n=e[s],0>L(t,n)){for(var u=1;u<r;u++)if(!(i[u]||(i[u]=a(arguments[u])))(n))continue e;t.push(n)}return t},s.invert=pn,s.invoke=Ln,s.isArguments=w,s.isArray=sn,s.isBoolean=function(e){return e===n||e===i||ht.call(e)==xt},s.isElement=function(e){return e?1===e.nodeType:i},s.isEmpty=dn,s.isEqual=T,s.isFinite=function(e){return mt(e)&&ht.call(e)==Nt},s.isFunction=E,s.isNaN=function(e){return ht.call(e)==Nt&&e!=+e},s.isNull=function(e){return e===
r},s.isObject=function(e){return e?$t[typeof e]:i},s.isUndefined=function(e){return e===t},s.keys=vn,s.last=function(e,t,n){if(e){var i=e.length;return t==r||n?e[i-1]:ct.call(e,-t||i)}},s.lastIndexOf=function(e,t,n){if(!e)return-1;var r=e.length;for(n&&"number"==typeof n&&(r=(0>n?yt(0,r+n):bt(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},s.lateBind=function(e,t){return l(t,e,ct.call(arguments,2))},s.map=An,s.max=A,s.memoize=function(e,t){var n={};return function(){var r=t?t.apply(this,arguments)
:arguments[0];return at.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},s.merge=mn,s.min=function(e,t,n){var r=Infinity,i=r;if(!e)return i;var s=-1,o=e.length;if(!t){for(;++s<o;)e[s]<i&&(i=e[s]);return i}for(n&&(t=u(t,n));++s<o;)n=t(e[s],s,e),n<r&&(r=n,i=e[s]);return i},s.mixin=H,s.noConflict=function(){return e._=X,this},s.object=function(e,t){if(!e)return{};for(var n=-1,r=e.length,i={};++n<r;)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},s.omit=gn,s.once=function(e){var t,s=i;return function(){return s?
t:(s=n,t=e.apply(this,arguments),e=r,t)}},s.pairs=yn,s.partial=function(e){return l(e,ct.call(arguments,1))},s.pick=bn,s.pluck=On,s.random=function(e,t){return e==r&&t==r?wt():(e=+e||0,t==r&&(t=e,e=0),e+dt(wt()*((+t||0)-e+1)))},s.range=function(e,t,n){e=+e||0,n=+n||1,t==r&&(t=e,e=0);for(var i=-1,t=yt(0,Math.ceil((t-e)/n)),s=Array(t);++i<t;)s[i]=e,e+=n;return s},s.reduce=Mn,s.reduceRight=N,s.reject=_n,s.rest=O,s.result=function(e,t){if(!e)return r;var n=e[t];return E(n)?e[t]():n},s.shuffle=function(
e){if(!e)return[];for(var t,n=-1,r=e.length,i=Array(r);++n<r;)t=dt(wt()*(n+1)),i[n]=i[t],i[t]=e[n];return i},s.size=function(e){if(!e)return 0;var t=e.length;return t===+t?t:vn(e).length},s.some=Dn,s.sortBy=Pn,s.sortedIndex=M,s.tap=function(e,t){return t(e),e},s.template=function(e,t,n){n||(n={});var e=e+"",o,u;o=n.escape;var a=n.evaluate,f=n.interpolate,l=s.templateSettings,c=n=n.variable||l.variable;o==r&&(o=l.escape),a==r&&(a=l.evaluate||i),f==r&&(f=l.interpolate),o&&(e=e.replace(o,m)),f&&(e=e
.replace(f,y)),a!=B&&(B=a,I=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(a?"|"+a.source:""),"g")),o=ot.length,e=e.replace(I,g),o=o!=ot.length,e="__p += '"+e.replace(nt,p).replace(et,h)+"';",ot.length=0,c||(n=j||"obj",o?e="with("+n+"){"+e+"}":(n!=j&&(j=n,F=RegExp("(\\(\\s*)"+n+"\\."+n+"\\b","g")),e=e.replace(Y,"$&"+n+".").replace(F,"$1__d"))),e=(o?e.replace(J,""):e).replace(K,"$1").replace(Q,"$1;"),e="function("+n+"){"+(c?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}"
:(c?"":",__d="+n+"."+n+"||"+n)+";")+e+"return __p}";try{u=Function("_","return "+e)(s)}catch(d){throw d.source=e,d}return t?u(t):(u.source=e,u)},s.throttle=function(e,t){function n(){a=new Date,u=r,s=e.apply(o,i)}var i,s,o,u,a=0;return function(){var r=new Date,f=t-(r-a);return i=arguments,o=this,0>=f?(a=r,s=e.apply(o,i)):u||(u=Ot(n,f)),s}},s.times=function(e,t,n){var r=-1;if(n)for(;++r<e;)t.call(n,r);else for(;++r<e;)t(r)},s.toArray=function(e){if(!e)return[];var t=e.length;return t===+t?(Bt?ht.
call(e)==Lt:"string"==typeof e)?e.split(""):ct.call(e):wn(e)},s.unescape=function(e){return e==r?"":(e+"").replace($,b)},s.union=function(){for(var e=-1,t=[],n=ut.apply(t,arguments),r=n.length;++e<r;)0>L(t,n[e])&&t.push(n[e]);return t},s.uniq=_,s.uniqueId=function(e){var t=z++;return e?e+t:t},s.values=wn,s.where=Hn,s.without=function(e){var t=[];if(!e)return t;for(var n=-1,r=e.length,i=a(arguments,1,20);++n<r;)i(e[n])||t.push(e[n]);return t},s.wrap=function(e,t){return function(){var n=[e];return arguments
.length&&ft.apply(n,arguments),t.apply(this,n)}},s.zip=function(e){if(!e)return[];for(var t=-1,n=A(On(arguments,"length")),r=Array(n);++t<n;)r[t]=On(arguments,t);return r},s.all=xn,s.any=Dn,s.collect=An,s.detect=Nn,s.drop=O,s.each=Cn,s.foldl=Mn,s.foldr=N,s.head=C,s.include=En,s.inject=Mn,s.methods=hn,s.select=Tn,s.tail=O,s.take=C,s.unique=_,Cn({Date:Tt,Number:Nt,RegExp:kt,String:Lt},function(e,t){s["is"+t]=function(t){return ht.call(t)==e}}),o.prototype=s.prototype,H(s),o.prototype.chain=function(
){return this.__chain__=n,this},o.prototype.value=function(){return this.__wrapped__},Cn("pop push reverse shift sort splice unshift".split(" "),function(e){var t=R[e];o.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),_t&&e.length===0&&delete e[0],this.__chain__&&(e=new o(e),e.__chain__=n),e}}),Cn(["concat","join","slice"],function(e){var t=R[e];o.prototype[e]=function(){var e=t.apply(this.__wrapped__,arguments);return this.__chain__&&(e=new o(e),e.__chain__=n),e}}),typeof 
define=="function"&&typeof define.amd=="object"&&define.amd?(e._=s,define(function(){return s})):q?"object"==typeof module&&module&&module.exports==q?(module.exports=s)._=s:q._=s:e._=s})(this);
})(self)
},{}],7:[function(require,module,exports){
(function(global){/**
 * marked - A markdown parser (https://github.com/chjj/marked)
 * Copyright (c) 2011-2012, Christopher Jeffrey. (MIT Licensed)
 */

;(function() {

/**
 * Block-Level Grammar
 */

var block = {
  newline: /^\n+/,
  code: /^( {4}[^\n]+\n*)+/,
  fences: noop,
  hr: /^( *[-*_]){3,} *(?:\n+|$)/,
  heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,
  lheading: /^([^\n]+)\n *(=|-){3,} *\n*/,
  blockquote: /^( *>[^\n]+(\n[^\n]+)*\n*)+/,
  list: /^( *)(bull) [^\0]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
  html: /^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,
  def: /^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,
  paragraph: /^([^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+\n*/,
  text: /^[^\n]+/
};

block.bullet = /(?:[*+-]|\d+\.)/;
block.item = /^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;
block.item = replace(block.item, 'gm')
  (/bull/g, block.bullet)
  ();

block.list = replace(block.list)
  (/bull/g, block.bullet)
  ('hr', /\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)
  ();

block.html = replace(block.html)
  ('comment', /<!--[^\0]*?-->/)
  ('closed', /<(tag)[^\0]+?<\/\1>/)
  ('closing', /<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)
  (/tag/g, tag())
  ();

block.paragraph = replace(block.paragraph)
  ('hr', block.hr)
  ('heading', block.heading)
  ('lheading', block.lheading)
  ('blockquote', block.blockquote)
  ('tag', '<' + tag())
  ('def', block.def)
  ();

block.normal = {
  fences: block.fences,
  paragraph: block.paragraph
};

block.gfm = {
  fences: /^ *(```|~~~) *(\w+)? *\n([^\0]+?)\s*\1 *(?:\n+|$)/,
  paragraph: /^/
};

block.gfm.paragraph = replace(block.paragraph)
  ('(?!', '(?!' + block.gfm.fences.source.replace('\\1', '\\2') + '|')
  ();

/**
 * Block Lexer
 */

block.lexer = function(src) {
  var tokens = [];

  tokens.links = {};

  src = src
    .replace(/\r\n|\r/g, '\n')
    .replace(/\t/g, '    ');

  return block.token(src, tokens, true);
};

block.token = function(src, tokens, top) {
  var src = src.replace(/^ +$/gm, '')
    , next
    , loose
    , cap
    , item
    , space
    , i
    , l
    , start;

  while (src) {
    start = src.length;
    // newline
    if (cap = block.newline.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[0].length > 1) {
        tokens.push({
          type: 'space'
        });
      }
    }

    // code
    if (cap = block.code.exec(src)) {
      src = src.substring(cap[0].length);
      cap = cap[0].replace(/^ {4}/gm, '');
      tokens.push({
        type: 'code',
        text: !options.pedantic
          ? cap.replace(/\n+$/, '')
          : cap,
        textLen: start - src.length,
        remain: src.length
      });
      continue;
    }

    // fences (gfm)
    if (cap = block.fences.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'code',
        lang: cap[2],
        text: cap[3],
        textLen: start - src.length,
        remain: src.length
      });
      continue;
    }

    // heading
    if (cap = block.heading.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'heading',
        depth: cap[1].length,
        text: cap[2]
      });
      continue;
    }

    // lheading
    if (cap = block.lheading.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'heading',
        depth: cap[2] === '=' ? 1 : 2,
        text: cap[1]
      });
      continue;
    }

    // hr
    if (cap = block.hr.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'hr'
      });
      continue;
    }

    // blockquote
    if (cap = block.blockquote.exec(src)) {
      src = src.substring(cap[0].length);

      tokens.push({
        type: 'blockquote_start'
      });

      cap = cap[0].replace(/^ *> ?/gm, '');

      // Pass `top` to keep the current
      // "toplevel" state. This is exactly
      // how markdown.pl works.
      block.token(cap, tokens, top);

      tokens.push({
        type: 'blockquote_end'
      });

      continue;
    }

    // list
    if (cap = block.list.exec(src)) {
      src = src.substring(cap[0].length);

      tokens.push({
        type: 'list_start',
        ordered: isFinite(cap[2])
      });

      // Get each top-level item.
      cap = cap[0].match(block.item);

      next = false;
      l = cap.length;
      i = 0;

      for (; i < l; i++) {
        item = cap[i];

        // Remove the list item's bullet
        // so it is seen as the next token.
        space = item.length;
        item = item.replace(/^ *([*+-]|\d+\.) +/, '');

        // Outdent whatever the
        // list item contains. Hacky.
        if (~item.indexOf('\n ')) {
          space -= item.length;
          item = !options.pedantic
            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')
            : item.replace(/^ {1,4}/gm, '');
        }

        // Determine whether item is loose or not.
        // Use: /(^|\n)(?! )[^\n]+\n\n(?!\s*$)/
        // for discount behavior.
        loose = next || /\n\n(?!\s*$)/.test(item);
        if (i !== l - 1) {
          next = item[item.length-1] === '\n';
          if (!loose) loose = next;
        }

        tokens.push({
          type: loose
            ? 'loose_item_start'
            : 'list_item_start'
        });

        // Recurse.
        block.token(item, tokens);

        tokens.push({
          type: 'list_item_end'
        });
      }

      tokens.push({
        type: 'list_end'
      });

      continue;
    }

    // html
    if (cap = block.html.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: options.sanitize
          ? 'paragraph'
          : 'html',
        pre: cap[1] === 'pre',
        text: cap[0]
      });
      continue;
    }

    // def
    if (top && (cap = block.def.exec(src))) {
      src = src.substring(cap[0].length);
      tokens.links[cap[1].toLowerCase()] = {
        href: cap[2],
        title: cap[3]
      };
      continue;
    }

    // top-level paragraph
    if (top && (cap = block.paragraph.exec(src))) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'paragraph',
        text: cap[0]
      });
      continue;
    }

    // text
    if (cap = block.text.exec(src)) {
      // Top-level should never reach here.
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'text',
        text: cap[0]
      });
      continue;
    }
  }

  return tokens;
};

/**
 * Inline Processing
 */

var inline = {
  escape: /^\\([\\`*{}\[\]()#+\-.!_>])/,
  autolink: /^<([^ >]+(@|:\/)[^ >]+)>/,
  url: noop,
  tag: /^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,
  link: /^!?\[(inside)\]\(href\)/,
  reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/,
  nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,
  strong: /^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,
  em: /^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,
  code: /^(`+)([^\0]*?[^`])\1(?!`)/,
  br: /^ {2,}\n(?!\s*$)/,
  text: /^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/
};

inline._linkInside = /(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/;
inline._linkHref = /\s*<?([^\s]*?)>?(?:\s+['"]([^\0]*?)['"])?\s*/;

inline.link = replace(inline.link)
  ('inside', inline._linkInside)
  ('href', inline._linkHref)
  ();

inline.reflink = replace(inline.reflink)
  ('inside', inline._linkInside)
  ();

inline.normal = {
  url: inline.url,
  strong: inline.strong,
  em: inline.em,
  text: inline.text
};

inline.pedantic = {
  strong: /^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,
  em: /^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/
};

inline.gfm = {
  url: /^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,
  text: /^[^\0]+?(?=[\\<!\[_*`]|https?:\/\/| {2,}\n|$)/
};

/**
 * Inline Lexer
 */

inline.lexer = function(src) {
  var out = ''
    , links = tokens.links
    , link
    , text
    , href
    , cap;

  while (src) {
    // escape
    if (cap = inline.escape.exec(src)) {
      src = src.substring(cap[0].length);
      out += cap[1];
      continue;
    }

    // autolink
    if (cap = inline.autolink.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[2] === '@') {
        text = cap[1][6] === ':'
          ? mangle(cap[1].substring(7))
          : mangle(cap[1]);
        href = mangle('mailto:') + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      out += '<a href="'
        + href
        + '">'
        + text
        + '</a>';
      continue;
    }

    // url (gfm)
    if (cap = inline.url.exec(src)) {
      src = src.substring(cap[0].length);
      text = escape(cap[1]);
      href = text;
      out += '<a href="'
        + href
        + '">'
        + text
        + '</a>';
      continue;
    }

    // tag
    if (cap = inline.tag.exec(src)) {
      src = src.substring(cap[0].length);
      out += options.sanitize
        ? escape(cap[0])
        : cap[0];
      continue;
    }

    // link
    if (cap = inline.link.exec(src)) {
      src = src.substring(cap[0].length);
      out += outputLink(cap, {
        href: cap[2],
        title: cap[3]
      });
      continue;
    }

    // reflink, nolink
    if ((cap = inline.reflink.exec(src))
        || (cap = inline.nolink.exec(src))) {
      src = src.substring(cap[0].length);
      link = (cap[2] || cap[1]).replace(/\s+/g, ' ');
      link = links[link.toLowerCase()];
      if (!link || !link.href) {
        out += cap[0][0];
        src = cap[0].substring(1) + src;
        continue;
      }
      out += outputLink(cap, link);
      continue;
    }

    // strong
    if (cap = inline.strong.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<strong>'
        + inline.lexer(cap[2] || cap[1])
        + '</strong>';
      continue;
    }

    // em
    if (cap = inline.em.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<em>'
        + inline.lexer(cap[2] || cap[1])
        + '</em>';
      continue;
    }

    // code
    if (cap = inline.code.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<code>'
        + escape(cap[2], true)
        + '</code>';
      continue;
    }

    // br
    if (cap = inline.br.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<br>';
      continue;
    }

    // text
    if (cap = inline.text.exec(src)) {
      src = src.substring(cap[0].length);
      out += escape(cap[0]);
      continue;
    }
  }

  return out;
};

function outputLink(cap, link) {
  if (cap[0][0] !== '!') {
    return '<a href="'
      + escape(link.href)
      + '"'
      + (link.title
      ? ' title="'
      + escape(link.title)
      + '"'
      : '')
      + '>'
      + inline.lexer(cap[1])
      + '</a>';
  } else {
    return '<img src="'
      + escape(link.href)
      + '" alt="'
      + escape(cap[1])
      + '"'
      + (link.title
      ? ' title="'
      + escape(link.title)
      + '"'
      : '')
      + '>';
  }
}

/**
 * Parsing
 */

var tokens
  , token;

function next() {
  return token = tokens.pop();
}

function tok() {
  switch (token.type) {
    case 'space': {
      return '';
    }
    case 'hr': {
      return '<hr>\n';
    }
    case 'heading': {
      return '<h'
        + token.depth
        + '>'
        + inline.lexer(token.text)
        + '</h'
        + token.depth
        + '>\n';
    }
    case 'code': {
      if (options.highlight) {
        token.code = options.highlight(token.text, token.lang);
        if (token.code != null && token.code !== token.text) {
          token.escaped = true;
          token.text = token.code;
        }
      }

      if (!token.escaped) {
        token.text = escape(token.text, true);
      }

      return '<pre><code'
        + (token.lang
        ? ' class="lang-'
        + token.lang
        + '"'
        : '')
        + '>'
        + token.text
        + '</code></pre>\n';
    }
    case 'blockquote_start': {
      var body = '';

      while (next().type !== 'blockquote_end') {
        body += tok();
      }

      return '<blockquote>\n'
        + body
        + '</blockquote>\n';
    }
    case 'list_start': {
      var type = token.ordered ? 'ol' : 'ul'
        , body = '';

      while (next().type !== 'list_end') {
        body += tok();
      }

      return '<'
        + type
        + '>\n'
        + body
        + '</'
        + type
        + '>\n';
    }
    case 'list_item_start': {
      var body = '';

      while (next().type !== 'list_item_end') {
        body += token.type === 'text'
          ? parseText()
          : tok();
      }

      return '<li>'
        + body
        + '</li>\n';
    }
    case 'loose_item_start': {
      var body = '';

      while (next().type !== 'list_item_end') {
        body += tok();
      }

      return '<li>'
        + body
        + '</li>\n';
    }
    case 'html': {
      return !token.pre && !options.pedantic
        ? inline.lexer(token.text)
        : token.text;
    }
    case 'paragraph': {
      return '<p>'
        + inline.lexer(token.text)
        + '</p>\n';
    }
    case 'text': {
      return '<p>'
        + parseText()
        + '</p>\n';
    }
  }
}

function parseText() {
  var body = token.text
    , top;

  while ((top = tokens[tokens.length-1])
         && top.type === 'text') {
    body += '\n' + next().text;
  }

  return inline.lexer(body);
}

function parse(src) {
  tokens = src.reverse();

  var out = '';
  while (next()) {
    out += tok();
  }

  tokens = null;
  token = null;

  return out;
}

/**
 * Helpers
 */

function escape(html, encode) {
  return html
    .replace(!encode ? /&(?!#?\w+;)/g : /&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function mangle(text) {
  var out = ''
    , l = text.length
    , i = 0
    , ch;

  for (; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = 'x' + ch.toString(16);
    }
    out += '&#' + ch + ';';
  }

  return out;
}

function tag() {
  var tag = '(?!(?:'
    + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'
    + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'
    + '|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b';

  return tag;
}

function replace(regex, opt) {
  regex = regex.source;
  opt = opt || '';
  return function self(name, val) {
    if (!name) return new RegExp(regex, opt);
    val = val.source || val;
    val = val.replace(/(^|[^\[])\^/g, '$1');
    regex = regex.replace(name, val);
    return self;
  };
}

function noop() {}
noop.exec = noop;

/**
 * Marked
 */

function marked(src, opt) {
  setOptions(opt);
  if (opt && opt.saveLex) {
    return [parse(block.lexer(src)), block.lexer(src)];
  } else {
    return parse(block.lexer(src));
  }
}

/**
 * Options
 */

var options
  , defaults;

function setOptions(opt) {
  if (!opt) opt = defaults;
  if (options === opt) return;
  options = opt;

  if (options.gfm) {
    block.fences = block.gfm.fences;
    block.paragraph = block.gfm.paragraph;
    inline.text = inline.gfm.text;
    inline.url = inline.gfm.url;
  } else {
    block.fences = block.normal.fences;
    block.paragraph = block.normal.paragraph;
    inline.text = inline.normal.text;
    inline.url = inline.normal.url;
  }

  if (options.pedantic) {
    inline.em = inline.pedantic.em;
    inline.strong = inline.pedantic.strong;
  } else {
    inline.em = inline.normal.em;
    inline.strong = inline.normal.strong;
  }
}

marked.options =
marked.setOptions = function(opt) {
  defaults = opt;
  setOptions(opt);
  return marked;
};

marked.setOptions({
  gfm: true,
  pedantic: false,
  sanitize: false,
  highlight: null
});

/**
 * Expose
 */

marked.parser = function(src, opt) {
  setOptions(opt);
  return parse(src);
};

marked.lexer = function(src, opt) {
  setOptions(opt);
  return block.lexer(src);
};

marked.parse = marked;

if (typeof module !== 'undefined') {
  module.exports = marked;
} else {
  this.marked = marked;
}

}).call(function() {
  return this || (typeof window !== 'undefined' ? window : global);
}());

})(self)
},{}],8:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
(function() {
  var $, DOWN_ARROW, END, ENTER, ESC, HOME, LEFT_ARROW, Notebook, PAGE_DOWN, PAGE_UP, Q, RIGHT_ARROW, UP_ARROW, arrows, bindMarkupDiv, bindSlider, chooseSlide, cleanEmptyNodes, closeWindow, countSlide, createNode, delay, editingEnabled, enableEditing, enableSlideControls, firstSlide, getElementCode, handleInternalSections, hideSlide, insertControls, isLeisureCode, jQuery, lastSlide, makeMarkupDiv, makeSection, makeSlideDiv, markupButtons, markupElement, markupSlideContent, markupSlides, mergeLeisureCode, mergeUp, nextSibling, nextSlide, nthSlide, oldSlide, padSlide, presentLeisureCode, presentSlide, prevSlide, previousSibling, remove, showSlide, slideControls, slideControlsEnabled, slideKeyListener, slideName, slidePat, slides, sliding, textNode, unwrap, unwrapContent, _, _ref,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  jQuery = window.jQuery, $ = window.$, _ = window._;

  _ref = Notebook = require('./notebook'), ENTER = _ref.ENTER, delay = _ref.delay, textNode = _ref.textNode, createNode = _ref.createNode, remove = _ref.remove, unwrap = _ref.unwrap, insertControls = _ref.insertControls, cleanEmptyNodes = _ref.cleanEmptyNodes, isLeisureCode = _ref.isLeisureCode, getElementCode = _ref.getElementCode, previousSibling = _ref.previousSibling, nextSibling = _ref.nextSibling, presentLeisureCode = _ref.presentLeisureCode, mergeLeisureCode = _ref.mergeLeisureCode, closeWindow = _ref.closeWindow, markupButtons = _ref.markupButtons, ESC = _ref.ESC, HOME = _ref.HOME, END = _ref.END, PAGE_UP = _ref.PAGE_UP, PAGE_DOWN = _ref.PAGE_DOWN, LEFT_ARROW = _ref.LEFT_ARROW, RIGHT_ARROW = _ref.RIGHT_ARROW, UP_ARROW = _ref.UP_ARROW, DOWN_ARROW = _ref.DOWN_ARROW, arrows = _ref.arrows;

  Q = 81;

  window.markup = function(md) {
    var maindoc, nodes, _ref1;

    nodes = document.querySelectorAll('[maindoc]');
    if (nodes.length === 0) {
      maindoc = createNode("<div maindoc></div>");
      document.body.insertBefore(maindoc, document.body.firstChild);
      nodes = [maindoc];
    } else {
      maindoc = nodes[0];
    }
    md = ((_ref1 = md != null ? md.replace(/\r\n/mg, '\n') : void 0) != null ? _ref1 : maindoc.innerHTML.replace(/^\s*<!--*/, '').replace(/-->\s*\n*/m, '')).trim();
    document.body.classList.add('hideControls');
    markupSlides(maindoc, md);
    return insertControls(maindoc);
  };

  lastSlide = null;

  if (typeof console !== "undefined" && console !== null) {
    if (typeof console.error === "function") {
      console.error(new Error("REMINDER: Incompatibility: using -webkit-calc").stack);
    }
  }

  slidePat = /^(\*\*\*[^\n]*\n(?:--?\n)?)/m;

  slideName = /^\*\*\*([^\n]*)\n(?:--?\n)?/m;

  sliding = false;

  markupSlides = function(el, md) {
    var div, hasCode, slides;

    hasCode = markupSlideContent(el, md);
    slides = el.querySelectorAll('[leisureSection]');
    if (slides.length <= (el.querySelector('[leisureSection="Leisure Controls"]') ? 2 : 1)) {
      document.body.classList.add("oneSlide");
    }
    div = createNode("<div class='slide-controls'>\n  <div id='slide-killbutton' onclick='toggleSlideShow()' style='float: right'><button>Slides</button></div>\n  <div id='slide-num' style='float: right; margin-right: 10px'></div>\n</div>");
    markupButtons(div);
    el.appendChild(div);
    if (location.search && _.find(location.search.slice(1).split('&'), (function(p) {
      return p.match(/^slides=/);
    }))) {
      sliding = true;
      showSlide($(chooseSlide()));
    } else {
      document.body.classList.add('scroll');
    }
    return hasCode;
  };

  markupSlideContent = function(el, md, noMain) {
    var content, hasCode, i, m, p, pageType, pages, _i, _ref1, _ref2;

    pages = md.split(slidePat);
    hasCode = false;
    if (pages.length > 1) {
      document.body.classList.add('slide-container');
      el.innerHTML = '';
      bindSlider();
      el.removeAttribute('doc');
      if (pages.length === 3 && !pages[0] && !pages[2]) {
        pages[2] = '\n';
      }
      for (i = _i = 0, _ref1 = pages.length; _i < _ref1; i = _i += 2) {
        p = pages[i];
        if (p) {
          pageType = i > 0 ? (m = (_ref2 = pages[i - 1].match(slidePat)) != null ? _ref2[1] : void 0, m.match(/\n-\n/) ? ['continuation', 'hiddenPage'] : m.match(/\n--\n/) ? ['hiddenPage', 'secretPage'] : []) : [];
          content = makeSlideDiv(el, pageType, (i > 0 ? pages[i - 1].match(slideName)[1].trim() : 'Main'));
          if (i > 0) {
            hasCode = (markupElement(content, pages[i - 1] + p)) || hasCode;
          } else {
            hasCode = (markupElement(content, '***\n' + p)) || hasCode;
          }
          padSlide(content, (i > 0 ? pages[i - 1] : '***\n'));
        }
      }
    } else {
      content = makeSlideDiv(el, ['page'], 'Main');
      while (el.firstChild !== content.parentNode) {
        content.appendChild(el.firstChild);
      }
      hasCode = markupElement(content, md);
      padSlide(content, '***\n');
      if (noMain) {
        unwrapContent(content);
      }
    }
    return hasCode;
  };

  padSlide = function(content, header) {
    var div, range;

    if (!content.firstChild || isLeisureCode(content.firstChild)) {
      range = document.createRange();
      range.setStart(content, 0);
      range.setEnd(content, 0);
      div = makeMarkupDiv(range, header);
      div.appendChild(createNode('<br>'));
    }
    if (isLeisureCode(content.lastChild)) {
      range = document.createRange();
      range.setStartAfter(content.lastChild);
      range.setEndAfter(content.lastChild);
      div = makeMarkupDiv(range, '\n');
      return div.appendChild(createNode('<br>'));
    }
  };

  unwrapContent = function(content) {
    var el, section;

    section = content.parentNode;
    el = section.parentNode;
    el.insertBefore(content, section);
    remove(section);
    return unwrap(content);
  };

  makeSlideDiv = function(el, pageTypes, title) {
    var content, div, pageType, sectionTitle, _i, _len;

    lastSlide = div = createNode("<div class='leisure_page'></div>");
    div.setAttribute('leisureSection', title);
    div.setAttribute('doc', '');
    div.setAttribute('slide', '');
    div.classList.add('slide');
    div.classList.add('ui-corner-all');
    div.classList.add('ui-widget');
    div.classList.add('ui-widget-content');
    for (_i = 0, _len = pageTypes.length; _i < _len; _i++) {
      pageType = pageTypes[_i];
      div.classList.add(pageType);
    }
    el.appendChild(div);
    sectionTitle = createNode("<div class='pageTitle'>" + title + "</div>");
    sectionTitle.setAttribute('leisureoutput', '');
    div.appendChild(sectionTitle);
    content = createNode("<div class='pageContent'></div>");
    div.appendChild(content);
    return content;
  };

  chooseSlide = function() {
    var param;

    param = _.find(location.search.slice(1).split('&'), (function(p) {
      return p.match(/^slide=.*/);
    }));
    console.log(param);
    if (param) {
      return document.querySelector("[slide='" + (param.split('=')[1]) + "']");
    } else {
      return document.querySelector('[maindoc]').firstElementChild;
    }
  };

  oldSlide = 0;

  window.toggleSlideShow = function() {
    sliding = $(document.body).is('.scroll');
    enableSlideControls(true);
    enableEditing(true);
    if (sliding) {
      $(document.body).removeClass('scroll');
      return showSlide(nthSlide(oldSlide));
    } else {
      oldSlide = $('.slide.showing').attr('slide');
      hideSlide($('.slide.showing'));
      $(document.body).addClass('scroll');
      return $('#slide-num').html('');
    }
  };

  bindSlider = function() {
    return document.body.addEventListener('keydown', slideKeyListener);
  };

  slideControls = [Q, ESC, LEFT_ARROW, RIGHT_ARROW, HOME, END, PAGE_UP, PAGE_DOWN];

  slideControlsEnabled = true;

  enableSlideControls = function(state) {
    return slideControlsEnabled = state;
  };

  presentSlide = function(s) {
    hideSlide($('.slide.showing'));
    return showSlide(s);
  };

  firstSlide = function() {
    return slides();
  };

  lastSlide = function() {
    return slides().last();
  };

  prevSlide = function() {
    var n;

    n = $('.slide.showing').prevAll('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
    if (n.length) {
      return n;
    } else {
      return slides();
    }
  };

  nextSlide = function() {
    var n;

    n = $('.slide.showing').nextAll('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
    if (n.length) {
      return n;
    } else {
      return $('.slide.showing');
    }
  };

  slideKeyListener = function(e) {
    var c;

    if (sliding) {
      window.evt = e;
      c = e.charCode || e.keyCode || e.which;
      if ((__indexOf.call(slideControls, c) >= 0) && !$(e.target).is('[leisurenode=code],[leisurenode=code] *') && slideControlsEnabled) {
        e.preventDefault();
        if (c === ESC) {
          return toggleSlideShow();
        } else if (c === Q) {
          return closeWindow();
        } else {
          return presentSlide(((function() {
            switch (c) {
              case HOME:
                return firstSlide();
              case END:
                return lastSlide();
              case LEFT_ARROW:
              case PAGE_UP:
                return prevSlide();
              case RIGHT_ARROW:
              case PAGE_DOWN:
                return nextSlide();
            }
          })()));
        }
      }
    }
  };

  slides = function() {
    return $('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
  };

  nthSlide = function(n) {
    return slides().slice(n);
  };

  countSlide = function(el) {
    var count, n, slide, _i, _len, _ref1;

    n = -1;
    count = 0;
    _ref1 = slides();
    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
      slide = _ref1[_i];
      count++;
      if (slide === el) {
        n = count;
      }
    }
    return [n, count];
  };

  showSlide = function(el) {
    var count, n, _ref1;

    _ref1 = countSlide(el[0]), n = _ref1[0], count = _ref1[1];
    oldSlide = n;
    $('#slide-num').html("" + n + " / " + count);
    return $(el).first().removeClass('hidden').addClass('showing');
  };

  hideSlide = function(el) {
    return $(el).first().addClass('hidden').removeClass('showing');
  };

  markupElement = function(el, md) {
    var code, codePos, len, lex, markup, node, prev, prevCodePos, range, slide, _i, _len, _ref1, _ref2, _ref3;

    len = md.length;
    slide = (_ref1 = md.match(slidePat)) != null ? _ref1 : '';
    _ref2 = window.marked((slide ? md.slice(slide[0].length) : md), {
      saveLex: true,
      gfm: true
    }), markup = _ref2[0], lex = _ref2[1];
    el.innerHTML = markup.trim() || '<br>';
    prev = null;
    range = document.createRange();
    prevCodePos = -1;
    codePos = 0;
    _ref3 = el.querySelectorAll('code');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      while (lex[codePos].type !== 'code') {
        codePos++;
      }
      if (node.parentNode.tagName !== 'PRE') {
        code = node;
      } else {
        code = node.parentNode;
        code.innerHTML = node.innerHTML;
      }
      code.setAttribute('noLeisureBar', '');
      code.setAttribute('leisureNode', 'code');
      code.md = lex[codePos].text;
      if (code.parentNode.firstChild !== code) {
        if (prev === null || prev.parentNode !== code.parentNode) {
          range.setStart(code.parentNode, 0);
        } else {
          range.setStartAfter(prev);
        }
        range.setEndBefore(code);
        makeMarkupDiv(range, md.substring((prevCodePos === -1 ? 0 : len - lex[prevCodePos].remain), len - lex[codePos].remain - lex[codePos].textLen));
      }
      prevCodePos = codePos;
      codePos++;
      prev = code;
    }
    if (prevCodePos > -1) {
      if (lex[prevCodePos].remain > 0) {
        range.selectNodeContents(prev.parentNode);
        range.setStartAfter(prev);
        makeMarkupDiv(range, md.substring(len - lex[prevCodePos].remain));
      }
    } else {
      range.selectNodeContents(el);
      makeMarkupDiv(range, md);
    }
    return prevCodePos > -1;
  };

  handleInternalSections = function(content) {
    var before, innerSections, marker, node, nodeContent, nodeTitle, prev, section, sectionHolder, title, _i, _j, _len, _len1, _ref1;

    section = content.parentNode;
    sectionHolder = section.parentNode;
    innerSections = section.querySelectorAll('[leisureSection]');
    if (innerSections.length === 0) {
      if (!((_ref1 = content.firstChild.md) != null ? _ref1.match(/^\*\*\*/) : void 0)) {
        if (!section.previousSibling) {
          return section.setAttribute('leisureSection', 'Main');
        } else {
          prev = section.previousSibling.querySelector('.pageContent');
          while (content.firstChild) {
            mergeUp(content.firstChild, prev);
          }
          return remove(section);
        }
      }
    } else {
      title = section.getAttribute('leisureSection');
      before = false;
      for (_i = 0, _len = innerSections.length; _i < _len; _i++) {
        node = innerSections[_i];
        if (node.getAttribute('leisureSection') === title) {
          before = true;
          break;
        }
      }
      before = before || (!innerSections[0].previousSibling);
      marker = section;
      for (_j = 0, _len1 = innerSections.length; _j < _len1; _j++) {
        node = innerSections[_j];
        nodeTitle = node.getAttribute('leisureSection');
        nodeContent = node.querySelector('.pageContent');
        if (nodeTitle === title || (node.previousSibling && nodeTitle === 'Main')) {
          if (nodeTitle === title) {
            before = false;
          }
          while (nodeContent.firstChild) {
            content.insertBefore(nodeContent.firstChild, node);
            mergeLeisureCode(node.previousSibling, node);
          }
          remove(node);
        } else {
          while (node.nextSibling && !node.nextSibling.getAttribute('leisureSection')) {
            mergeUp(node.nextSibling, nodeContent);
          }
          padSlide(nodeContent, "***" + nodeTitle + "\n");
          if (before) {
            section.parentNode.insertBefore(node, section);
          } else {
            section.parentNode.insertBefore(node, marker.nextSibling);
            marker = node;
          }
        }
      }
      if (!content.firstChild) {
        return remove(section);
      } else {
        return padSlide(content, "***" + title + "\n");
      }
    }
  };

  mergeUp = function(el, newParent) {
    newParent.appendChild(el);
    return mergeLeisureCode(newParent.lastChild.previousSibling, newParent.lastChild);
  };

  makeSection = function(title, node, next) {
    var div;

    div = createNode("<div leisureSection='" + title + "'></div>");
    node.parentNode.insertBefore(div, node);
    while (div.nextSibling && div.nextSibling !== next) {
      div.appendChild(div.nextSibling);
    }
    return div;
  };

  makeMarkupDiv = function(range, md) {
    var div;

    div = document.createElement('div');
    range.surroundContents(div);
    div.md = md;
    bindMarkupDiv(div);
    return div;
  };

  editingEnabled = true;

  enableEditing = function(state) {
    return editingEnabled = state;
  };

  bindMarkupDiv = function(div) {
    var editing;

    div.bound = true;
    div.setAttribute('leisureNode', 'markdown');
    div.setAttribute('contenteditable', 'false');
    editing = false;
    div.addEventListener('dblclick', function(e) {
      if (!editing && editingEnabled) {
        div.innerHTML = '';
        div.appendChild(textNode(div.md));
        div.style.whiteSpace = 'pre-wrap';
        div.setAttribute('contenteditable', 'true');
        editing = true;
        div.parentNode.setAttribute('editing', 'true');
        return div.focus();
      }
    });
    div.addEventListener('keypress', function(e) {
      var br, r, s;

      if (editing) {
        s = window.getSelection();
        r = s.getRangeAt(0);
        if ((e.charCode || e.keyCode || e.which) === ENTER) {
          br = textNode('\n');
          r.insertNode(br);
          r = document.createRange();
          r.setStart(br, 1);
          s.removeAllRanges();
          s.addRange(r);
          return e.preventDefault();
        }
      }
    });
    return div.addEventListener('blur', function(e) {
      var first, frag, last, node, parent, prevSection, r, scroll, _i, _len, _ref1, _ref2;

      if (editing) {
        scroll = document.body.scrollTop;
        div.style.whiteSpace = '';
        editing = false;
        div.parentNode.removeAttribute('editing');
        div.setAttribute('contenteditable', 'false');
        prevSection = (_ref1 = div.parentNode.parentNode.previousSibling) != null ? _ref1.getAttribute('leisureSection') : void 0;
        parent = div.parentNode;
        if (markupSlideContent(div, div.textContent, prevSection && prevSection !== 'Leisure Controls')) {
          _ref2 = div.querySelectorAll("[leisurenode='code']");
          for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
            node = _ref2[_i];
            presentLeisureCode(node, true);
          }
        } else if (div.textContent.trim() === '') {
          cleanEmptyNodes(div);
        }
        r = document.createRange();
        r.selectNodeContents(div);
        frag = r.extractContents();
        first = frag.childNodes[0];
        last = frag.childNodes[frag.childNodes.length - 1];
        parent.replaceChild(frag, div);
        mergeLeisureCode(previousSibling(first), first);
        mergeLeisureCode(last, nextSibling(last));
        handleInternalSections(parent);
        return delay(function() {
          return document.body.scrollTop = scroll;
        });
      }
    });
  };

  Notebook.markupElement = markupElement;

  Notebook.enableSlideControls = enableSlideControls;

  Notebook.enableEditing = enableEditing;

  Notebook.presentSlide = presentSlide;

  Notebook.firstSlide = firstSlide;

  Notebook.lastSlide = lastSlide;

  Notebook.prevSlide = prevSlide;

  Notebook.nextSlide = nextSlide;

}).call(this);

/*
*/

},{"./notebook":9}],9:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
# use an element as a Leisure notebook
# Only runs in the context of a browser
*/


(function() {
  var $, BS, DEL, DOWN_ARROW, END, ENTER, ESC, HOME, LEFT_ARROW, Leisure_anno, Nil, PAGE_DOWN, PAGE_UP, RIGHT_ARROW, TAB, UP_ARROW, URI, Xus, acceptCode, addBoxClasses, addDefControls, addsLine, allowEvents, arrows, autoRun, baseElements, baseStrokeWidth, basicCall, bindAll, bindNotebook, bootNotebook, box, boxClasses, buttonClasses, c, chainEvalNodes, changeTheme, changeView, checkDeleteExpr, checkHideSource, checkMutateFromModification, cleanEmptyNodes, cleanOutput, clearAst, clearOutputBox, clearUpdates, clickTest, closeWindow, codeBox, codeFocus, codeSpan, configureSaveLink, continueRangePosition, createFragment, createNode, createPeer, createSlider, debug, defaultEnv, define, delay, docFocus, envFor, errString, escapeHtml, evalBox, evalDoc, evalDocCode, evalNodes, evalOutput, evaluating, evaluationQueue, event, filename, findCurrentCodeHolder, findDefs, findUpdateSelector, focusBox, foldLeft, gen, getAnnoBody, getAnnoData, getAnnoName, getAst, getBox, getDefName, getElementCode, getElements, getExprSource, getHtml, getMDDocument, getMaxStrokeWidth, getParseErr, getRangePosition, getRangeText, getRanges, getRefName, getSvgElement, getType, grp, handleKey, hasFunc, hasMonadOutput, head, hiddenPat, hideControlSection, hideOutputSource, hideSlider, highlightNotebookFunction, highlightPosition, id, identity, ignoreDeleteOutputBox, init, initNotebook, insertControls, isDef, isLeisureCode, isMonad, isOutput, isSlider, lazy, leisureContextString, linePat, linkSource, loadProgram, loaded, lz, makeId, makeLabel, makeMonad, makeOption, makeOutputBox, makeOutputControls, makeRange, makeSyncMonad, makeTestBox, makeTestCase, markPartialApplies, markupButton, markupButtons, markupDefs, mergeLeisureCode, nameSub, nextId, nextSibling, nodeEnd, nodeFor, nonprintable, numberEnd, numberStart, oldBrackets, owner, patchFuncAst, peer, peerGetDocument, peerGetFunctions, peerNotifySelection, postLoadQueue, prepExpr, presentLeisureCode, presentValue, previousBoxRangeInternal, previousBoxRangeStart, previousSibling, primSvgMeasure, primconcatNodes, printable, printableControlCharacters, processLine, psgn, queueAfterLoad, remove, removeBoxClasses, removeOldDefs, replaceContents, replaceRange, replicate, req, resolve, root, runAuto, runMonad, runTest, runTests, rz, saveProgram, setAst, setFilename, setMinMax, setSnapper, setUpdate, showAst, showError, showFilename, showFilenames, showOutputSource, showResult, showSliderButton, showSource, skipLeftOverOutputBox, slider, snapshot, svgBetterMeasure, svgMeasure, svgMeasureText, tail, testPat, textNode, toDefBox, toExprBox, toggleEdit, transformStrokeWidth, transformedPoint, unwrap, update, updatePat, wrapRange, xusEnv, _, _ref, _ref1, _ref2,
    __slice = [].slice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  console.log("LOADING NOTEBOOK");

  _ref = root = module.exports = require('./base'), resolve = _ref.resolve, lazy = _ref.lazy;

  rz = resolve;

  lz = lazy;

  _ref1 = root = module.exports = require('./ast'), nameSub = _ref1.nameSub, getRefName = _ref1.getRefName, define = _ref1.define, foldLeft = _ref1.foldLeft, Nil = _ref1.Nil, getType = _ref1.getType, getAnnoName = _ref1.getAnnoName, getAnnoData = _ref1.getAnnoData, getAnnoBody = _ref1.getAnnoBody, Leisure_anno = _ref1.Leisure_anno;

  _ref2 = require('./runtime'), isMonad = _ref2.isMonad, runMonad = _ref2.runMonad, makeMonad = _ref2.makeMonad, makeSyncMonad = _ref2.makeSyncMonad, identity = _ref2.identity, defaultEnv = _ref2.defaultEnv, basicCall = _ref2.basicCall;

  gen = require('./gen').gen;

  URI = window.URI;

  Xus = window.Xus;

  $ = window.$;

  _ = require('./lodash.min');

  window.global = window;

  debug = false;

  BS = 8;

  TAB = 9;

  ENTER = 13;

  ESC = 27;

  PAGE_UP = 33;

  PAGE_DOWN = 34;

  END = 35;

  HOME = 36;

  LEFT_ARROW = 37;

  UP_ARROW = 38;

  RIGHT_ARROW = 39;

  DOWN_ARROW = 40;

  DEL = 46;

  arrows = [37, 38, 39, 40];

  updatePat = /(^|\n)(#@update )([^\n]+)(?:^|\n)/;

  peer = null;

  nextId = 0;

  filename = null;

  event = function() {
    var args, widget;

    widget = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return basicCall(args, envFor(widget), identity);
  };

  defaultEnv.readFile = function(fileName, cont) {
    var uri;

    uri = new URI(document.location.href, fileName);
    console.log("\n\n@@@@READ FILE: " + uri + "\n\n");
    return $.get(String(uri)).done(function(data) {
      return cont(null, data);
    }).fail(function(err) {
      return cont(err, null);
    });
  };

  defaultEnv.writeFile = function(fileName, data, cont) {};

  snapshot = function(el, pgm) {};

  setSnapper = function(snapFunc) {
    return snapshot = snapFunc;
  };

  delay = function(func) {
    return window.setTimeout(func, 1);
  };

  getParseErr = getHtml = function(x) {
    return x(lz(function(value) {
      return rz(value);
    }));
  };

  escapeHtml = function(str) {
    if (typeof str === 'string') {
      return str.replace(/[<>]/g, function(c) {
        switch (c) {
          case '<':
            return '&lt;';
          case '>':
            return '&gt;';
        }
      });
    } else {
      return str;
    }
  };

  presentValue = function(v) {
    var content;

    if ((getType(v)) === 'svgNode') {
      content = v(function() {
        return id;
      });
      return _svgPresent()(function() {
        return content;
      })(function() {
        return id;
      });
    } else if ((getType(v)) === 'html') {
      return getHtml(v);
    } else if ((getType(v)) === 'parseErr') {
      return "PARSE ERROR: " + (getParseErr(v));
    } else {
      return escapeHtml(String(v));
    }
  };

  bootNotebook = function(el) {
    if ((document.getElementById('channelList')) == null) {
      document.body.appendChild(createNode("<datalist id='channelList'>\n   <option value=''></option>\n   <option value='app'>app</option>\n   <option value='compile'>compile</option>\n   <option value='editorFocus'>editorFocus</option>\n</datalist>"));
    }
    return createPeer();
  };

  closeWindow = function() {
    console.log("CLOSING WINDOW");
    window.open('', '_self', '');
    return window.close();
  };

  createPeer = function() {
    var k, param, params, server, v, _i, _len, _ref3, _ref4;

    root.xusServer = server = new Xus.Server();
    server.exit = function() {
      return closeWindow();
    };
    peer = root.peer = Xus.createDirectPeer(server);
    peer.server = server;
    peer.listen('leisure/selection/contents', true, function(key, value) {
      var node, r, s;

      if (key === 'leisure/selection/contents') {
        s = window.getSelection();
        if (s.rangeCount && s.toString() !== value) {
          r = s.getRangeAt(0);
          r.deleteContents();
          node = textNode(value.toString());
          r.insertNode(node);
          s.removeAllRanges();
          r.selectNode(node);
          return s.addRange(r);
        }
      }
    });
    peer.set('leisure/evalExpr', null, 'transient');
    peer.listen('leisure/evalExpr', false, function(key, value) {
      var env, expr, result;

      if (key === 'leisure/evalExpr' && (value != null)) {
        expr = value[0], result = value[1];
        console.log("EVAL: " + expr + ", RESULT: " + result);
        env = xusEnv(result, expr);
        return processLine(expr, env, function() {
          return typeof env.cleanup === "function" ? env.cleanup() : void 0;
        });
      }
    });
    peer.set('leisure/document', peerGetDocument);
    peer.set('leisure/functions', peerGetFunctions);
    peer.set('leisure/storage', []);
    if (Boot.documentFragment) {
      params = {};
      _ref3 = Boot.documentFragment.substring(1).split('&');
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        param = _ref3[_i];
        _ref4 = param.split('='), k = _ref4[0], v = _ref4[1];
        params[k.toLowerCase()] = decodeURIComponent(v);
      }
      if (params.xusproxy != null) {
        return Xus.xusToProxy(server, params.xusproxy);
      }
    }
  };

  replaceContents = function(uri, contents) {
    if (!contents) {
      contents = uri;
      uri = null;
    }
    if (uri) {
      setFilename(uri.toString());
    }
    document.body.setAttribute('doc', '');
    window.leisureAutoRunAll = true;
    window.markup(contents);
    return bindAll();
  };

  bindAll = function() {
    var node, _i, _len, _ref3;

    _ref3 = document.querySelectorAll("[leisurenode='code']");
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      node.setAttribute('contentEditable', 'true');
      bindNotebook(node);
      changeTheme(node, 'thin');
      evalDoc(node);
    }
    return showFilenames();
  };

  xusEnv = function(resultVar, expr) {
    var env, result;

    result = '';
    env = {
      debug: debug,
      finishedEvent: function() {},
      owner: null,
      require: req,
      write: function(msg) {
        return result += "" + msg + "\n";
      },
      prompt: function(msg, cont) {
        return result += "Attempt to prompt with " + msg;
      },
      processResult: function(res, ast) {
        result += res;
        return peer.set(resultVar, JSON.stringify(result));
      },
      presentValue: function(x) {
        return x;
      },
      fileSettings: {
        uri: new URI(document.location.href)
      },
      err: function(err) {
        result += err.leisureContext ? "ERROR: " + err + ":\n" + (leisureContextString(err)) + "\n" + err.stack : "Couldn't parse: " + expr;
        return peer.set(resultVar, result);
      }
    };
    env.__proto__ = root.defaultEnv;
    return env;
  };

  peerGetDocument = function() {
    var nodes;

    nodes = document.querySelectorAll("[leisurenode='code']");
    if (nodes.length > 1 || Notebook.md) {
      return getMDDocument();
    } else {
      return getSimpleDocument();
    }
  };

  peerGetFunctions = function() {
    return (_.uniq(window.leisureFuncNames.toArray().sort(), true)).sort();
  };

  getMDDocument = function() {
    var md, node, _i, _len, _ref3, _ref4;

    md = '';
    _ref3 = document.querySelectorAll('[doc] [leisureNode]');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      md += isLeisureCode(node) ? "```\n" + (getElementCode(node)) + "\n```\n" : (_ref4 = node.md) != null ? _ref4 : '';
    }
    return md;
  };

  makeId = function(el) {
    if (!el.id) {
      return el.id = "Leisure-" + (nextId++);
    }
  };

  allowEvents = true;

  init = false;

  bindNotebook = function(el) {
    if (!init) {
      init = true;
      defaultEnv.presentValue = presentValue;
      defaultEnv.write = function(msg) {
        return console.log(msg);
      };
      defaultEnv.owner = document.body;
      defaultEnv.finishedEvent = function(evt, channel) {
        return update(channel != null ? channel : 'app', defaultEnv);
      };
      defaultEnv.debug = debug;
    }
    if (el.bound == null) {
      makeId(el);
      el.bound = true;
      el.addEventListener('DOMCharacterDataModified', (function(evt) {
        if (allowEvents && !el.replacing) {
          return delay(function() {
            return checkMutateFromModification(evt);
          });
        }
      }), true);
      el.addEventListener('DOMSubtreeModified', (function(evt) {
        if (allowEvents && !el.replacing) {
          return delay(function() {
            return checkMutateFromModification(evt);
          });
        }
      }), true);
      el.addEventListener('mousedown', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('mousemove', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('mouseup', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('keydown', function(e) {
        var c, r, s;

        c = e.charCode || e.keyCode || e.which;
        if (c === DEL || c === BS) {
          s = window.getSelection();
          r = s.getRangeAt(0);
          if (c === BS) {
            checkDeleteExpr(getBox(r.startContainer));
            if (skipLeftOverOutputBox(el, r)) {
              return e.preventDefault();
            }
          } else if (c === DEL) {
            checkDeleteExpr(getBox(r.startContainer));
            if (ignoreDeleteOutputBox(el, r)) {
              return e.preventDefault();
            }
          }
        }
        if (printable(c)) {
          clearAst(getBox(window.getSelection().focusNode));
        }
        if ((__indexOf.call(arrows, c) >= 0) || printable(c)) {
          delay(function() {
            return highlightPosition(e);
          });
        }
        if (e.ctrlKey && c === ENTER) {
          return handleKey("C-ENTER");
        } else if (e.altKey && c === ENTER) {
          return handleKey("M-ENTER");
        } else if (c === TAB) {
          handleKey("TAB");
          return e.preventDefault();
        }
      });
      el.addEventListener('keypress', function(e) {
        var br, bx, r, s, sp;

        s = window.getSelection();
        r = s.getRangeAt(0);
        if ((e.charCode || e.keyCode || e.which) === ENTER) {
          br = textNode('\n');
          r.insertNode(br);
          r = document.createRange();
          r.setStart(br, 1);
          s.removeAllRanges();
          s.addRange(r);
          return e.preventDefault();
        } else if (r.startContainer.parentNode === el) {
          sp = codeSpan('\n', 'codeExpr');
          sp.setAttribute('generatedNL', '');
          bx = box(s.getRangeAt(0), 'codeMainExpr', true);
          bx.appendChild(sp);
          makeOutputBox(bx);
          r = document.createRange();
          r.setStart(sp, 0);
          s.removeAllRanges();
          return s.addRange(r);
        }
      });
      el.addEventListener('focus', (function() {
        if (allowEvents) {
          return findCurrentCodeHolder();
        }
      }), true);
      el.addEventListener('blur', (function() {
        if (allowEvents) {
          return findCurrentCodeHolder();
        }
      }), true);
      if (window.leisureAutoRunAll) {
        autoRun(el, true);
        return window.setTimeout((function() {
          return runTests(el);
        }), 1);
      } else {
        return el.autorunState = false;
      }
    }
  };

  checkDeleteExpr = function(node) {
    var out;

    if (isOutput(node && node.output)) {
      out = node.output;
      return window.setTimeout((function() {
        if (!node.textContent.trim()) {
          node.parentNode.removeChild(node);
        }
        if ((node.parentNode == null) && ((out != null ? out.parentNode : void 0) != null)) {
          return out.parentNode.removeChild(out);
        }
      }), 1);
    }
  };

  skipLeftOverOutputBox = function(el, r) {
    var box, s;

    el.normalize();
    box = previousBoxRangeInternal(r) || previousBoxRangeStart(r);
    if (isOutput(box)) {
      s = window.getSelection();
      r.selectNode(box);
      r.collapse(true);
      s.removeAllRanges();
      s.addRange(r);
      return true;
    } else {
      return false;
    }
  };

  previousBoxRangeInternal = function(r) {
    return r.startContainer.nodeType === 1 && r.startOffset > 0 && r.startContainer.childNodes[r.startOffset - 1];
  };

  previousBoxRangeStart = function(r) {
    return r.startContainer.nodeType === 3 && r.startOffset === 0 && previousSibling(r.startContainer);
  };

  ignoreDeleteOutputBox = function(el, r) {
    var n;

    el.normalize();
    if (r.startContainer.nodeType === 3 && r.startOffset === r.startContainer.length) {
      n = r.startContainer;
      while (n && n.nextSibling === null) {
        n = n.parentNode;
      }
      return isOutput(n != null ? n.nextSibling : void 0);
    } else {
      return false;
    }
  };

  isOutput = function(el) {
    return (el != null ? el.nodeType : void 0) === 1 && el.hasAttribute('LeisureOutput');
  };

  isLeisureCode = function(el) {
    return (el != null ? el.nodeType : void 0) === 1 && el.getAttribute('leisureNode') === 'code';
  };

  peerNotifySelection = function(el, str) {};

  printableControlCharacters = (function() {
    var _i, _len, _ref3, _results;

    _ref3 = "\r\i\n\b";
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      c = _ref3[_i];
      _results.push(c.charCodeAt(0));
    }
    return _results;
  })();

  printable = function(code) {
    return (code > 0xf && code < 37) || code > 40 || __indexOf.call(printableControlCharacters, code) >= 0;
  };

  nonprintable = null;

  (function() {
    var i, s, _i;

    s = '';
    for (i = _i = 0; 0 <= 0xf ? _i <= 0xf : _i >= 0xf; i = 0 <= 0xf ? ++_i : --_i) {
      s += String.fromCharCode(i);
    }
    s.replace(/[\i\r\f]/g, '');
    return nonprintable = new RegExp("[" + s + "]");
  })();

  handleKey = function(key) {
    var box;

    switch (key) {
      case "C-ENTER":
      case "TAB":
        box = getBox(window.getSelection().focusNode);
        if ((box.getAttribute('codeMainExpr')) != null) {
          return evalOutput(box.output);
        } else if ((box.getAttribute('codeMain')) != null) {
          return acceptCode(box);
        }
        break;
      case "M-ENTER":
        box = getBox(window.getSelection().focusNode);
        if ((box.getAttribute('codeMainExpr')) != null) {
          return clearOutputBox(box.output);
        }
    }
  };

  clearAst = function(box) {
    var cbox;

    cbox = getBox(box);
    return cbox != null ? cbox.ast = null : void 0;
  };

  oldBrackets = [null, Nil];

  cleanEmptyNodes = function(el) {
    var next, prev, _ref3;

    if (el.nodeType === 3 && (el.parentNode != null)) {
      return cleanEmptyNodes(el.parentNode);
    } else {
      prev = el.previousSibling;
      next = el.nextSibling;
      if (el.nodeType === 1 && el.textContent.trim() === '' && ((_ref3 = el.parentNode) != null ? _ref3.hasAttribute('doc') : void 0)) {
        el.parentNode.removeChild(el);
      }
      if (next === nextSibling(prev)) {
        return mergeLeisureCode(prev, next);
      }
    }
  };

  presentLeisureCode = function(node, doEval) {
    node.setAttribute('contentEditable', 'true');
    Notebook.bindNotebook(node);
    Notebook.changeTheme(node, 'thin');
    if (doEval) {
      return evalDoc(node);
    } else {
      return initNotebook(node);
    }
  };

  mergeLeisureCode = function(el1, el2) {
    var newCode, r;

    if (el1 && el2) {
      if (el1.nodeType === 1 && el2.nodeType === 3) {
        el1.appendChild(el2);
        return el1.normalize();
      } else if (el1.nodeType === 3 && el2.nodeType === 1) {
        el2.insertBefore(el1, el2.firstChild);
        return el2.normalize();
      } else if (el1.hasAttribute('leisureNode') && el1.getAttribute('leisureNode') === el2.getAttribute('leisureNode')) {
        newCode = textNode(el1.md = el1.getAttribute('leisureNode') === 'code' ? "" + (getElementCode(el1)) + "\n" + (getElementCode(el2)) : "" + el1.md + "\n" + el2.md);
        r = document.createRange();
        r.selectNodeContents(el2);
        el1.appendChild(textNode('\n'));
        el1.appendChild(r.extractContents());
        return el2.parentNode.removeChild(el2);
      }
    }
  };

  highlightPosition = function(e) {
    var ast, b, brackets, changed, i, node, parent, pos, r, ranges, s, span, _i, _j, _k, _len, _len1, _len2, _ref3, _ref4, _ref5;

    parent = null;
    s = window.getSelection();
    if (s.rangeCount) {
      if (cleanEmptyNodes(s.getRangeAt(0).startContainer)) {
        return;
      }
      focusBox(s.focusNode);
      parent = getBox(s.focusNode);
      if ((_ref3 = s.getRangeAt(0)) != null ? _ref3.collapsed : void 0) {
        if (!parent || isOutput(parent)) {
          return;
        }
        if (parent.parentNode && (ast = getAst(parent))) {
          r = s.getRangeAt(0);
          r.setStart(parent, 0);
          pos = getRangeText(r).length;
          changed = false;
          if (false) {
            brackets = Leisure.bracket(ast.leisureBase, pos);
            if (oldBrackets[0] !== parent || !oldBrackets[1].equals(brackets)) {
              oldBrackets = [parent, brackets];
              _ref4 = document.querySelectorAll("[LeisureBrackets]");
              for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                node = _ref4[_i];
                unwrap(node);
              }
              _ref5 = parent.querySelectorAll(".partialApply");
              for (_j = 0, _len1 = _ref5.length; _j < _len1; _j++) {
                node = _ref5[_j];
                unwrap(node);
              }
              parent.normalize();
              markPartialApplies(parent);
              b = brackets;
              ranges = [];
              while (b !== Nil) {
                ranges.push(makeRange(parent, b.head().head(), b.head().tail().head()));
                b = b.tail();
              }
              for (i = _k = 0, _len2 = ranges.length; _k < _len2; i = ++_k) {
                r = ranges[i];
                span = document.createElement('span');
                span.setAttribute('LeisureBrackets', '');
                span.setAttribute('class', i === 0 ? 'LeisureFunc' : 'LeisureArg');
                wrapRange(r, span);
              }
              changed = true;
            }
          }
          if (e instanceof KeyboardEvent) {
            if (hideSlider()) {
              pos += 1;
            }
          } else if (e instanceof MouseEvent && e.type === 'mousedown' && (e.target === parent || parent.contains(e.target)) && showSliderButton(parent, pos, e)) {
            changed = true;
            pos += 1;
          }
          if (changed) {
            window.EVT = e;
            s.removeAllRanges();
            s.addRange(makeRange(parent, pos));
          }
        }
      }
      return peerNotifySelection(parent, s.toString());
    }
  };

  numberEnd = /(?:^|.*[^0-9.])([0-9]+\.?[0-9]*|\.[0-9]*)$/;

  numberStart = /^([0-9]+\.[0-9]+|[0-9]+|\.[0-9]+)/;

  slider = [];

  showSliderButton = function(parent, pos, e) {
    var changed, len, m, oldPos, r, sParent, sPos, sValue, span, text;

    if (slider.length) {
      hideSlider();
      return false;
    } else {
      text = parent.textContent;
      oldPos = pos;
      changed = 0;
      if (m = text.substring(0, pos).match(numberEnd)) {
        pos -= m[1].length;
      }
      if (m = text.substring(pos).match(numberStart)) {
        len = m[1].length;
        if (oldPos <= pos + len) {
          sParent = slider[0], sPos = slider[1], sValue = slider[2];
          if (parent !== sParent || pos !== sPos || m[1] !== sValue) {
            hideSlider();
            r = makeRange(parent, pos, pos + m[1].length);
            span = createNode("<span class='leisureRangeNumber ui-widget-content'></span>");
            wrapRange(r, span);
            changed = 1;
            span.normalize();
            slider = [parent, pos, m[1], span];
            createSlider();
          }
        }
        return changed;
      } else {
        return hideSlider();
      }
    }
  };

  isSlider = function(el) {
    while (el !== document) {
      if (el.hasAttribute('slider')) {
        return true;
      }
      el = el.parentNode;
    }
    return false;
  };

  createSlider = function() {
    var d, div, inside, max, min, parent, pos, sl, sliding, span, value;

    parent = slider[0], pos = slider[1], value = slider[2], span = slider[3], div = slider[4];
    if (div) {
      return;
    }
    inside = false;
    sliding = false;
    d = createNode("<div style='z-index: 1; position: absolute; width: 200px; background: white; border: solid green 1px' slider contentEditable='false'></div>");
    slider.push(d);
    d.style.top = "" + (span.offsetTop + span.offsetHeight + 5) + "px";
    d.style.minTop = '0px';
    d.style.left = "" + (Math.max(0, (span.offsetLeft + span.offsetWidth) / 2 - 100)) + "px";
    d.addEventListener('mouseover', function(e) {
      if (!inside) {
        return inside = true;
      }
    });
    d.addEventListener('mouseout', function(e) {
      if (e.toElement !== d && !d.contains(e.toElement)) {
        inside = false;
        if (!sliding) {
          return hideSlider();
        }
      }
    });
    value = Number(value);
    min = value < 0 ? value * 2 : value / 2;
    max = value === 0 ? 10 : value * 2;
    sl = $(d).slider({
      animate: 'fast',
      start: function() {
        sliding = true;
        return delay(function() {
          return allowEvents = false;
        });
      },
      stop: function(event, ui) {
        setMinMax(sl);
        allowEvents = true;
        sliding = false;
        if (!inside) {
          return hideSlider();
        }
      },
      slide: function(event, ui) {
        var ast, _ref3;

        if (span.firstChild) {
          span.firstChild.nodeValue = String(ui.value);
        }
        if (isDef(parent)) {
          parent.ast = null;
          acceptCode(parent);
          ast = getAst(parent);
          if ((_ref3 = parent.ast) != null ? _ref3.leisureName : void 0) {
            return update("sel-" + parent.ast.leisureName);
          }
        } else {
          makeId(parent);
          if (!parent.getAttribute(parent.output, 'leisureUpdate')) {
            setUpdate(parent.output, "id-" + parent.id + " compile", true);
          }
          update("id-" + parent.id);
          return update("compile");
        }
      },
      value: value
    });
    setMinMax(sl, value);
    parent.insertBefore(d, parent.firstChild);
    return d.focus();
  };

  psgn = function(x) {
    if (x < 0) {
      return -1;
    } else {
      return 1;
    }
  };

  setMinMax = function(sl, value) {
    var max, min, step, _ref3;

    value = value || sl.slider("value");
    min = 0;
    max = (1 <= (_ref3 = Math.abs(value)) && _ref3 < 50) || value === 0 ? 100 * psgn(value) : value * 2;
    if (Math.round(value) === value) {
      step = Math.round((max - min) / 100);
      step = step - step % (max - min);
    } else {
      step = (max - min) / 100;
    }
    sl.slider("option", "min", min);
    sl.slider("option", "max", max);
    return sl.slider("option", "step", step);
  };

  hideSlider = function() {
    var div, parent, sPos, sValue, span;

    if (slider.length) {
      parent = slider[0], sPos = slider[1], sValue = slider[2], span = slider[3], div = slider[4];
      unwrap(span);
      if (div) {
        remove(div);
      }
      parent.normalize();
      slider = [];
      return 2;
    } else {
      return 0;
    }
  };

  wrapRange = function(range, node) {
    var contents, err;

    try {
      return range.surroundContents(node);
    } catch (_error) {
      err = _error;
      contents = range.cloneContents();
      replaceRange(range, node);
      return node.appendChild(contents);
    }
  };

  replaceRange = function(range, node) {
    range.deleteContents();
    return range.insertNode(node);
  };

  getRangeText = function(r) {
    return r.cloneContents().textContent;
  };

  getBox = function(node) {
    while ((node != null) && ((typeof node.getAttribute === "function" ? node.getAttribute('LeisureBox') : void 0) == null)) {
      node = node.parentElement;
    }
    return node;
  };

  checkMutateFromModification = function(evt) {
    var b, b2;

    b = getBox(evt.target);
    b2 = getBox(window.getSelection().focusNode);
    if (b && b === b2) {
      if ((isDef(b)) && b.classList.contains('codeMainExpr')) {
        toDefBox(b);
      } else if (!(isDef(b)) && b.classList.contains('codeMain')) {
        toExprBox(b);
      }
      return replicate(b);
    }
  };

  replicate = function(b) {
    if (b.replicator) {
      return delay(function() {
        return b.replicator.replicate(b);
      });
    }
  };

  buttonClasses = 'ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only'.split(' ');

  boxClasses = {
    codeMainExpr: ['codeMainExpr', 'ui-widget', 'ui-widget-content', 'ui-corner-all'],
    codeMain: ['codeMain', 'ui-widget', 'ui-widget-content', 'ui-corner-all'],
    codeMainTest: ['codeMainTest'],
    output: ['output', 'ui-corner-all']
  };

  addBoxClasses = function(box, type) {
    var cl, _i, _len, _ref3, _results;

    box.setAttribute(type, '');
    _ref3 = boxClasses[type];
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      cl = _ref3[_i];
      _results.push(box.classList.add(cl));
    }
    return _results;
  };

  removeBoxClasses = function(box, type) {
    var cl, _i, _len, _ref3, _results;

    box.removeAttribute(type);
    _ref3 = boxClasses[type];
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      cl = _ref3[_i];
      _results.push(box.classList.remove(cl));
    }
    return _results;
  };

  toExprBox = function(b) {
    var node, _i, _j, _len, _len1, _ref3, _ref4;

    removeBoxClasses(b, 'codeMain');
    addBoxClasses(b, 'codeMainExpr');
    _ref3 = b.querySelectorAll('[codename]');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      unwrap(node);
    }
    _ref4 = b.querySelectorAll('.astbutton');
    for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
      node = _ref4[_j];
      remove(node);
    }
    return makeOutputBox(b);
  };

  toDefBox = function(b) {
    if (b.output) {
      remove(b.output);
    }
    removeBoxClasses(b, 'codeMainExpr');
    addBoxClasses(b, 'codeMain');
    return addDefControls(b);
  };

  addDefControls = function(box) {
    var btn;

    btn = createNode("<button onclick='Notebook.showAst(this.parentNode)' class='astbutton' title='Show AST'></button>");
    markupButton(btn);
    return box.appendChild(btn);
  };

  remove = function(node) {
    var _ref3;

    return (_ref3 = node.parentNode) != null ? _ref3.removeChild(node) : void 0;
  };

  showAst = function(box) {
    var name, node, output;

    name = (getAst(box)).leisureName;
    if (box.astOut != null) {
      remove(box.astOut.output);
      remove(box.astOut);
      return box.astOut = null;
    } else if (name != null) {
      node = codeBox('codeMainExpr');
      box.astOut = node;
      node.setAttribute('leisureOutput', '');
      box.parentNode.insertBefore(node, box.nextSibling);
      node.textContent = "#@update sel-" + name + "\ntreeForNotebook " + name;
      output = makeOutputBox(node);
      toggleEdit(output);
      return evalOutput(output, true);
    }
  };

  highlightNotebookFunction = function(funcName, start, stop) {
    var box, offset, sel;

    box = document.body.querySelector("[leisurefunc=" + funcName + "]");
    offset = 0;
    sel = window.getSelection();
    sel.removeAllRanges();
    return sel.addRange(makeRange(box, start + offset, stop + offset));
  };

  isDef = function(box) {
    var defType, leading, m, matched, name, txt;

    txt = box.textContent;
    if ((m = txt.match(L_defPat()))) {
      matched = m[0], leading = m[1], name = m[2], defType = m[3];
      return (defType != null ? defType.length : void 0) > 0;
    }
    return false;
  };

  initNotebook = function(el) {
    var pgm;

    el.replacing = true;
    removeOldDefs(el);
    pgm = markupDefs(el, findDefs(el));
    el.normalize();
    el.replacing = false;
    if (!el.hasAttribute('noLeisureBar')) {
      insertControls(el);
      el.testResults.innerHTML = pgm[2];
    }
    snapshot(el, pgm);
    return pgm;
  };

  makeLabel = function(text, c) {
    var node;

    node = document.createElement('SPAN');
    node.innerHTML = text;
    node.setAttribute('class', c);
    return node;
  };

  makeOption = function(name) {
    var opt;

    opt = document.createElement('OPTION');
    opt.text = name;
    return opt;
  };

  createNode = function(txt) {
    var scratch;

    scratch = document.createElement('DIV');
    scratch.innerHTML = txt;
    return scratch.firstChild;
  };

  createFragment = function(txt) {
    var frag, scratch;

    scratch = document.createElement('DIV');
    scratch.innerHTML = txt;
    frag = document.createDocumentFragment();
    while (scratch.firstChild) {
      frag.appendChild(scratch.firstChild);
    }
    return frag;
  };

  insertControls = function(el) {
    var controlDiv, saveButton, spacer, testButton, themeSelect, viewSelect, _ref3, _ref4;

    controlDiv = createNode("<div LeisureOutput contentEditable='false' class='leisure_bar'><div class=\"leisure_bar_contents\">\n  <button leisureId='saveButton' class=\"leisure_start\">Save</button>\n  <button leisureId='testButton'>Run Tests</button> <span leisureId='testResults' class=\"notrun\"></span>\n  <input type='checkbox' leisureId='autorunTests'><b>Auto</b></input>\n  <span class=\"leisure_theme\">Theme: </span>\n  <select leisureId='themeSelect'>\n    <option value=thin>Thin</option>\n    <option value=gaudy>Gaudy</option>\n    <option value=cthulhu>Cthulhu</option>\n  </select>\n  <span>View: </span>\n  <select leisureId='viewSelect'>\n    <option value=coding>Coding</option>\n    <option value=debugging>Debugging</option>\n    <option value=testing>Testing</option>\n    <option value=running>Running</option>\n  </select>\n</div>");
    spacer = createNode("<div LeisureOutput  contentEditable='false' class='leisure_space'></div>");
    el.insertBefore(spacer, el.firstChild);
    el.insertBefore(controlDiv, el.firstChild);
    _ref3 = getElements(el, ['downloadLink', 'viewLink', 'saveButton', 'testButton', 'testResults', 'autorunTests', 'themeSelect', 'viewSelect']), el.leisureDownloadLink = _ref3[0], el.leisureViewLink = _ref3[1], saveButton = _ref3[2], testButton = _ref3[3], el.testResults = _ref3[4], el.autorun = _ref3[5], themeSelect = _ref3[6], viewSelect = _ref3[7];
    controlDiv.addEventListener('click', function(evt) {
      if (document.body.classList.contains('hideControls')) {
        return document.body.classList.remove('hideControls');
      } else {
        return document.body.classList.add('hideControls');
      }
    });
    saveButton.addEventListener('click', function(evt) {
      return saveProgram(el);
    });
    testButton.addEventListener('click', function() {
      return runTests(el);
    });
    themeSelect.value = (_ref4 = el.leisureTheme) != null ? _ref4 : 'thin';
    themeSelect.addEventListener('change', function(evt) {
      return changeTheme(el, evt.target.value);
    });
    viewSelect.addEventListener('change', function(evt) {
      return changeView(el, evt.target.value);
    });
    el.autorun.checked = el.autorunState;
    el.autorun.addEventListener('change', function(evt) {
      el.autorunState = el.autorun.checked;
      if (el.autorunState) {
        return runTests(el);
      }
    });
    return markupButtons(controlDiv);
  };

  saveProgram = function() {
    return write(filename, getMDDocument(), (function() {
      return alert("Saving " + filename);
    }), function(err) {
      console.log(err);
      alert(err.stack);
      throw err;
    });
  };

  showFilename = function(el) {
    if (el && filename) {
      el.innerHTML = "Save: " + (filename.pathName());
      return el.title = filename.toString();
    }
  };

  showFilenames = function() {
    var node, _i, _len, _ref3, _results;

    _ref3 = document.body.querySelectorAll('[leisureId=saveButton]');
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      _results.push(showFilename(node));
    }
    return _results;
  };

  setFilename = function(newName) {
    console.log("SET FILENAME: " + newName);
    filename = newName instanceof URI ? newName : new URI(document.location.href, newName);
    return showFilenames();
  };

  markupButtons = function(el) {
    var btn, _i, _len, _ref3, _results;

    _ref3 = el.querySelectorAll('button');
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      btn = _ref3[_i];
      _results.push(markupButton(btn));
    }
    return _results;
  };

  markupButton = function(btn) {
    var cl, _i, _len, _results;

    _results = [];
    for (_i = 0, _len = buttonClasses.length; _i < _len; _i++) {
      cl = buttonClasses[_i];
      _results.push(btn.classList.add(cl));
    }
    return _results;
  };

  getElements = function(el, ids) {
    var els, id, node, _i, _j, _len, _len1, _ref3, _results;

    els = {};
    _ref3 = el.querySelectorAll('[leisureId]');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      els[node.getAttribute('leisureId')] = node;
    }
    _results = [];
    for (_j = 0, _len1 = ids.length; _j < _len1; _j++) {
      id = ids[_j];
      _results.push(els[id]);
    }
    return _results;
  };

  escapeHtml = function(str) {
    if (typeof str === 'string') {
      return str.replace(/[<>]/g, function(c) {
        switch (c) {
          case '<':
            return '&lt;';
          case '>':
            return '&gt;';
        }
      });
    } else {
      return str;
    }
  };

  loadProgram = function(el, files) {
    var fr;

    el = getBox;
    fr = new FileReader();
    fr.onloadend = function(evt) {
      el.innerHTML = escapeHtml(fr.result);
      return initNotebook(el);
    };
    return fr.readAsBinaryString(files.item(0));
  };

  configureSaveLink = function(el) {
    var blob, builder;

    window.URL = window.URL || window.webkitURL;
    builder = new WebKitBlobBuilder();
    builder.append(getElementCode(el));
    blob = builder.getBlob('text/plain');
    el.leisureDownloadLink.href = window.URL.createObjectURL(blob);
    return el.leisureViewLink.href = window.URL.createObjectURL(blob);
  };

  getElementCode = function(el) {
    var r;

    r = document.createRange();
    r.selectNode(el);
    c = r.cloneContents().firstChild;
    removeOldDefs(c);
    return c.textContent;
  };

  runTests = function(el) {
    var failed, passed, resultsClass, test, _i, _len, _ref3;

    passed = 0;
    failed = 0;
    _ref3 = el.querySelectorAll('.codeMainTest');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      test = _ref3[_i];
      if (runTest(test)) {
        passed++;
      } else {
        failed++;
      }
    }
    if (el.testResults) {
      resultsClass = el.testResults.classList;
      resultsClass.remove('notrun');
      if (!failed) {
        resultsClass.remove('failed');
        resultsClass.add('passed');
        return el.testResults.innerHTML = passed;
      } else {
        resultsClass.remove('passed');
        resultsClass.add('failed');
        return el.testResults.innerHTML = "" + passed + "/" + failed;
      }
    }
  };

  changeTheme = function(el, value) {
    var theme;

    theme = value;
    el.leisureTheme = theme;
    return el.className = theme;
  };

  changeView = function(el, value) {
    debug = value === 'debugging';
    return alert('new view: ' + value + ", debug: " + debug);
  };

  unwrap = function(node) {
    var parent;

    parent = node.parentNode;
    if (parent) {
      while (node.firstChild != null) {
        parent.insertBefore(node.firstChild, node);
      }
      return parent.removeChild(node);
    }
  };

  removeOldDefs = function(el) {
    var extracted, m, node, txt, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref3, _ref4, _ref5;

    el.leisureDownloadLink = null;
    el.leisureViewLink = null;
    extracted = [];
    _ref3 = el.querySelectorAll("[LeisureOutput]");
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      remove(node);
    }
    _ref4 = el.querySelectorAll("[generatednl]");
    for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
      node = _ref4[_j];
      txt = node.lastChild;
      if (txt.nodeType === 3 && txt.data[txt.data.length - 1] === '\n') {
        txt.data = txt.data.substring(0, txt.data.length - 1);
      }
    }
    _ref5 = el.querySelectorAll("[Leisure]");
    for (_k = 0, _len2 = _ref5.length; _k < _len2; _k++) {
      node = _ref5[_k];
      if (addsLine(node) && (node.firstChild != null)) {
        extracted.push(node.firstChild);
      }
      unwrap(node);
    }
    for (_l = 0, _len3 = extracted.length; _l < _len3; _l++) {
      node = extracted[_l];
      if ((node.parentNode != null) && !addsLine(node) && (node.previousSibling != null) && !addsLine(node.previousSibling)) {
        node.parentNode.insertBefore(text('\n'), node);
      }
    }
    el.textContent = el.textContent.replace(/\uFEFF/g, '');
    txt = el.lastChild;
    if ((txt != null ? txt.nodeType : void 0) === 3 && (m = txt.data.match(/(^|[^\n])(\n+)$/))) {
      return txt.data = txt.data.substring(0, txt.data.length - m[2].length);
    }
  };

  markupDefs = function(el, defs) {
    var auto, bod, body, bx, def, i, main, name, notebookAutoNodes, pgm, s, test, tests, totalTests, _i, _j, _len, _len1, _ref3, _ref4;

    pgm = '';
    auto = '';
    totalTests = 0;
    notebookAutoNodes = [];
    for (_i = 0, _len = defs.length; _i < _len; _i++) {
      i = defs[_i];
      main = i.main, name = i.name, def = i.def, body = i.body, tests = i.tests;
      if (name) {
        bx = box(main, 'codeMain', true);
        bx.appendChild(codeSpan(name, 'codeName'));
        bx.appendChild(textNode(def));
        bod = codeSpan(textNode(body), 'codeBody');
        bod.appendChild(textNode('\n'));
        bod.setAttribute('generatedNL', '');
        bx.appendChild(bod);
        bx.addEventListener('blur', (function() {
          return evalDoc(el);
        }), true);
        markPartialApplies(bx);
        addDefControls(bx);
        pgm += "" + name + " " + def + " " + body + "\n";
      } else if (main != null) {
        bx = box(main, 'codeMainExpr', true);
        s = codeSpan(textNode(body), 'codeExpr');
        s.setAttribute('generatedNL', '');
        s.appendChild(textNode('\n'));
        bx.appendChild(s);
        markPartialApplies(bx);
        if (((_ref3 = main.leisureAuto) != null ? _ref3.mode : void 0) === 'silent') {
          auto += "" + body + "\n";
        } else {
          if (((_ref4 = main.leisureAuto) != null ? _ref4.mode : void 0) === 'notebook') {
            notebookAutoNodes.push(bx);
          }
          makeOutputBox(bx);
        }
      }
      for (_j = 0, _len1 = tests.length; _j < _len1; _j++) {
        test = tests[_j];
        replaceRange(test, makeTestBox(test.leisureTest));
        totalTests++;
      }
    }
    return [pgm, auto, totalTests, notebookAutoNodes];
  };

  getDefName = function(ast) {
    if (ast instanceof Leisure_anno && getAnnoName(ast) === 'definition') {
      return getAnnoData(ast);
    } else {
      return null;
    }
  };

  getAst = function(bx, def) {
    var defName, _ref3;

    if (bx.ast != null) {
      patchFuncAst(bx.ast);
      bx.setAttribute('leisureFunc', (_ref3 = bx.ast.leisureName) != null ? _ref3 : '');
      return bx.ast;
    } else {
      def = def || bx.textContent;
      defName = getDefName(runMonad(rz(L_newParseLine)(lz(Nil))(lz(def))));
      setAst(bx, (defName ? {
        leisureName: defName,
        leisureSource: def
      } : {}));
      return bx.ast;
    }
  };

  setAst = function(bx, ast) {
    bx.ast = ast;
    return patchFuncAst(ast);
  };

  patchFuncAst = function(ast) {
    var parent;

    if ((ast != null ? ast.leisureName : void 0) != null) {
      parent = window[nameSub(ast.leisureName)];
      if (parent != null) {
        parent.ast = ast;
        parent.src = ast.leisureSource;
        return update("ast-" + ast.leisureName);
      }
    }
  };

  markPartialApplies = function(bx, def) {};

  textNode = function(text) {
    return document.createTextNode(text);
  };

  nodeFor = function(text) {
    if (typeof text === 'string') {
      return textNode(text);
    } else {
      return text;
    }
  };

  evalOutput = function(exBox, nofocus, cont) {
    var selector, stopUpdates, updateSelector, _ref3;

    exBox = getBox(exBox);
    if (!nofocus) {
      focusBox(exBox);
    }
    cleanOutput(exBox, true);
    selector = findUpdateSelector(exBox.source);
    if (selector) {
      exBox.setAttribute('leisureUpdate', selector);
    }
    makeOutputControls(exBox);
    _ref3 = getElements(exBox.firstChild, ['chooseUpdate', 'stopUpdates']), updateSelector = _ref3[0], stopUpdates = _ref3[1];
    updateSelector.addEventListener('change', function(evt) {
      return setUpdate(exBox, evt.target.value, true);
    });
    updateSelector.addEventListener('keydown', function(e) {
      c = e.charCode || e.keyCode || e.which;
      if (c === ENTER) {
        e.preventDefault();
        return updateSelector.blur();
      }
    });
    updateSelector.value = (exBox.getAttribute('leisureUpdate')) || '';
    exBox.updateSelector = updateSelector;
    return evalBox(exBox.source, exBox, cont);
  };

  findUpdateSelector = function(box) {
    var def, defType, leading, matched, name, u;

    if (def = box.textContent.match(rz(L_defPat))) {
      matched = def[0], leading = def[1], name = def[2], defType = def[3];
      if (u = leading.match(updatePat)) {
        return u[3];
      }
    }
  };

  getExprSource = function(box) {
    var b, s;

    s = window.getSelection();
    b = getBox(s.focusNode);
    if (b !== box || !s.rangeCount || s.getRangeAt(0).collapsed) {
      return box.textContent;
    } else {
      return getRangeText(s.getRangeAt(0));
    }
  };

  setUpdate = function(el, channel, preserveSource) {
    var ast, def, defType, index, leading, matched, name, r, txt, u;

    el.setAttribute('leisureUpdate', channel);
    if (channel) {
      el.classList.add('ui-state-highlight');
    } else {
      el.classList.remove('ui-state-highlight');
    }
    ast = getAst(el.source);
    txt = el.source.textContent;
    if (!preserveSource && (def = txt.match(rz(L_defPat)))) {
      matched = def[0], leading = def[1], name = def[2], defType = def[3];
      index = def.index;
      if (u = leading.match(updatePat)) {
        index += u.index + u[1].length + u[2].length;
        r = makeRange(el.source, index, index + u[3].length);
        r.deleteContents();
      } else {
        r = makeRange(el.source, index + leading.length, index + leading.length);
      }
      r.insertNode(textNode(channel));
      return el.source.normalize();
    }
  };

  hasMonadOutput = function(box) {
    var _ref3, _ref4;

    return ((_ref3 = box.firstElementChild) != null ? (_ref4 = _ref3.nextElementSibling) != null ? _ref4.nextElementSibling : void 0 : void 0) != null;
  };

  checkHideSource = function(box) {
    var hs;

    if (!box.hideOutputSource && hasMonadOutput(box)) {
      box.hideOutputSource = true;
      hs = createNode("<button class='editToggle' style='float:right'></button>");
      markupButton(hs);
      hs.addEventListener('click', function() {
        return toggleEdit(hs);
      });
      return box.firstElementChild.appendChild(hs);
    }
  };

  makeOutputControls = function(exBox) {
    if (exBox.firstChild.firstChild === exBox.firstChild.lastChild) {
      exBox.firstChild.insertBefore(createFragment("<button onclick='Notebook.clearOutputBox(this)'>X</button>"), exBox.firstChild.firstChild);
      exBox.firstChild.appendChild(createFragment("<button onclick='Notebook.makeTestCase(this)' leisureId='makeTestCase'>Make test\ncase</button><b>Update: </b><input type='text'\nplaceholder='Click for updating' list='channelList' leisureId='chooseUpdate'></input><button\nonclick='Notebook.clearUpdates(this)' leisureId='stopUpdates'>Stop Updates</button>"));
      markupButtons(exBox);
      return exBox.classList.add('fatControls');
    }
  };

  showOutputSource = function(output) {
    output.classList.remove('hidingSource');
    return output.source.style.display = '';
  };

  hideOutputSource = function(output) {
    console.log("HIDE: " + output);
    output.classList.add('hidingSource');
    return output.source.style.display = 'none';
  };

  toggleEdit = function(toggleButton) {
    var output;

    output = getBox(toggleButton);
    if (output.classList.contains('hidingSource')) {
      return showOutputSource(output);
    } else {
      return hideOutputSource(output);
    }
  };

  clearUpdates = function(widget, preserveSource) {
    var exBox;

    exBox = getBox(widget);
    exBox.updateSelector.value = '';
    return setUpdate(exBox, '', preserveSource);
  };

  update = function(type, env) {
    var node, _i, _len, _ref3, _results;

    env = env != null ? env : defaultEnv;
    _ref3 = env.owner.querySelectorAll("[leisureUpdate~='" + type + "']");
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      _results.push(evalOutput(node, true));
    }
    return _results;
  };

  clearOutputBox = function(exBox) {
    clearUpdates(exBox, true);
    return cleanOutput(exBox);
  };

  cleanOutput = function(exBox, preserveControls) {
    var fc, _results;

    exBox = getBox(exBox);
    exBox.classList.remove('fatControls');
    if (!preserveControls) {
      exBox.hideOutputSource = null;
      fc = exBox.firstChild;
      fc.removeChild(fc.firstChild);
      while (fc.firstChild !== fc.lastChild) {
        fc.removeChild(fc.lastChild);
      }
    }
    _results = [];
    while (exBox.firstChild !== exBox.lastChild) {
      _results.push(exBox.removeChild(exBox.lastChild));
    }
    return _results;
  };

  makeTestCase = function(exBox) {
    var box, output, source, test;

    output = getBox(exBox);
    source = output.source;
    test = {
      expr: source.textContent.trim(),
      expected: escapeHtml(Parse.print(output.result))
    };
    box = makeTestBox(test, owner(exBox));
    source.parentNode.insertBefore(box, source);
    remove(source);
    remove(output);
    box.parentNode.insertBefore(textNode('\uFEFF'), box);
    box.parentNode.insertBefore(textNode('\uFEFF'), box.nextSibling);
    if (owner(box).autorunState) {
      return clickTest(box);
    }
  };

  makeTestBox = function(test, owner, src) {
    var bx, s;

    src = src != null ? src : "#@test " + (JSON.stringify(test.expr)) + "\n#@expected " + (JSON.stringify(test.expected));
    s = codeSpan(src, 'codeTest');
    s.appendChild(textNode('\n'));
    s.setAttribute('generatedNL', '');
    bx = codeBox('codeMainTest');
    bx.testSrc = s;
    bx.setAttribute('class', 'codeMainTest notrun');
    bx.setAttribute('contenteditable', 'false');
    bx.appendChild(s);
    bx.addEventListener('click', (function() {
      return clickTest(bx);
    }), true);
    bx.test = test;
    return bx;
  };

  clickTest = function(bx) {
    var exprBox, r, sp;

    if (bx.classList.contains('notrun')) {
      return runTest(bx);
    } else {
      r = document.createRange();
      r.setStartBefore(bx);
      r.setEndAfter(bx);
      r.deleteContents();
      sp = codeSpan(bx.test.expr, 'codeExpr');
      sp.setAttribute('generatedNL', '');
      exprBox = box(r, 'codeMainExpr', true);
      exprBox.appendChild(sp);
      return makeOutputBox(exprBox);
    }
  };

  runTest = function(bx) {
    var passed, test;

    test = bx.test;
    passed = true;
    processLine(prepExpr(test.expr), {
      values: {},
      require: req,
      write: function(str) {
        return console.log(str);
      },
      debug: debug,
      prompt: function(msg, cont) {
        return cont(null);
      },
      processResult: function(result, ast) {
        return passed = showResult(bx, escapeHtml(String(result)), escapeHtml(test.expected));
      },
      err: function() {
        return passed = false;
      },
      presentValue: function(x) {
        return x;
      }
    }, identity);
    return passed;
  };

  showResult = function(bx, actual, expected) {
    var cl;

    cl = bx.classList;
    cl.remove('notrun');
    if (actual === expected) {
      cl.remove('failed');
      cl.add('passed');
      bx.testSrc.innerHTML = "#@test " + (JSON.stringify(bx.test.expr)) + "\n#@expected " + (JSON.stringify(bx.test.expected));
    } else {
      cl.remove('passed');
      cl.add('failed');
      bx.testSrc.innerHTML = "#@test " + (JSON.stringify(bx.test.expr)) + "\n#@expected " + (JSON.stringify(bx.test.expected)) + "\n#@result " + (JSON.stringify(actual));
      console.log("expected <" + expected + "> but got <" + actual + ">");
    }
    return actual === expected;
  };

  prepExpr = function(txt) {
    return txt;
  };

  envFor = function(box) {
    var env, exBox, widget;

    exBox = getBox(box);
    widget = null;
    env = {
      fileSettings: {},
      debug: debug,
      finishedEvent: function(evt, channel) {
        return update(channel != null ? channel : 'app', this);
      },
      owner: owner(box),
      box: box,
      require: req,
      write: function(msg) {
        var div;

        div = document.createElement('div');
        div.classList.add('outputDiv');
        div.innerHTML = "" + msg + "\n";
        exBox.appendChild(div);
        checkHideSource(exBox);
        return markupButtons(exBox);
      },
      getWidget: function() {
        if (!widget) {
          widget = document.createElement("DIV");
          exBox.appendChild(widget);
        }
        return widget;
      },
      destroyWidget: function() {
        if (widget) {
          return remove(widget);
        }
      },
      prompt: function(msg, cont) {
        return cont(window.prompt(msg));
      },
      processResult: function(result, ast) {
        box.result = result;
        return setAst(box, ast);
      },
      presentValue: presentValue,
      err: function(err) {
        var btn, _ref3;

        btn = box.querySelector('[leisureId="makeTestCase"]');
        if (btn) {
          remove(btn);
        }
        return this.write("<div class='errorDiv'>" + escapeHtml("ERROR: " + (err.leisureContext ? "" + err + ":\n" + (leisureContextString(err)) + "\n" : '') + ((_ref3 = err.stack) != null ? _ref3 : err)) + "</div>");
      },
      cleanup: function() {
        this.destroyWidget();
        if (root.lastEnv === env) {
          return root.lastEnv = null;
        }
      }
    };
    env.__proto__ = defaultEnv;
    env.fileSettings.uri = new URI(document.location.href);
    root.lastEnv = env;
    return env;
  };

  leisureContextString = function(err) {
    var func, offset;

    return ((function() {
      var _i, _len, _ref3, _ref4, _results;

      _ref3 = err.leisureContext.toArray();
      _results = [];
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        _ref4 = _ref3[_i], func = _ref4[0], offset = _ref4[1];
        _results.push(linkSource(func, offset));
      }
      return _results;
    })()).join('\n');
  };

  linkSource = function(funcName, offset) {};

  showSource = function(funcName, offset) {};

  makeOutputBox = function(source) {
    var cl, node, _i, _len, _ref3;

    node = document.createElement('div');
    node.setAttribute('LeisureOutput', '');
    node.setAttribute('Leisure', '');
    node.setAttribute('LeisureBox', '');
    _ref3 = boxClasses.output;
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      cl = _ref3[_i];
      node.classList.add(cl);
    }
    node.setAttribute('contentEditable', 'false');
    node.source = source;
    source.output = node;
    node.innerHTML = "<div class='controls'><button onclick='Notebook.evalOutput(this)'>-&gt;</button></div>";
    markupButtons(node);
    source.parentNode.insertBefore(node, source.nextSibling);
    return node;
  };

  codeSpan = function(text, boxType) {
    var node;

    node = document.createElement('span');
    node.setAttribute(boxType, '');
    node.setAttribute('Leisure', '');
    node.setAttribute('class', boxType);
    if (text) {
      node.appendChild(nodeFor(text));
    }
    return node;
  };

  codeBox = function(boxType) {
    var node;

    node = document.createElement('div');
    addBoxClasses(node, boxType);
    node.setAttribute('LeisureBox', '');
    node.setAttribute('Leisure', '');
    node.addEventListener('compositionstart', function(e) {
      return checkMutateFromModification(e);
    });
    return node;
  };

  box = function(range, boxType, empty) {
    var node;

    node = codeBox(boxType);
    if (empty) {
      range.deleteContents();
    } else {
      node.appendChild(range.extractContents());
    }
    range.insertNode(node);
    return node;
  };

  linePat = new RegExp("(" + (rz(L_linePat).source) + ")");

  findDefs = function(el) {
    var def, ranges, rest, rng, txt;

    txt = el.textContent;
    rest = txt;
    ranges = [];
    while ((def = rest.match(rz(L_unanchoredDefPat))) && def[1].length !== rest.length) {
      rng = getRanges(el, txt, rest, def, txt.length - rest.length);
      if (rng) {
        rest = rng.next;
        if (rng) {
          ranges.push(rng);
        } else {
          break;
        }
      } else {
        break;
      }
    }
    return ranges;
  };

  testPat = /(#@test([^\n]*)\n#@expected([^\n]*))\n/m;

  getRanges = function(el, txt, rest, def, restOff) {
    var body, bodyStart, defType, endPat, ex, exEnd, leadOff, leading, leadingSpaces, lm, m, m2, mainEnd, mainStart, matchStart, matched, name, nameEnd, nameRaw, next, outerRange, r, rest1, t, tOff, tests, textStart, _ref3, _ref4, _ref5, _ref6;

    _ref3 = m = def, matched = _ref3[0], leading = _ref3[1], nameRaw = _ref3[2], defType = _ref3[3];
    if (!rest.trim()) {
      return null;
    } else if (m == null) {
      return [makeRange(el, restOff, txt.length), null, null, [], ''];
    } else {
      tests = [];
      matchStart = restOff + m.index;
      if (defType == null) {
        name = null;
      } else if (nameRaw[0] === ' ') {
        name = null;
        defType = null;
      } else {
        name = nameRaw.trim() || null;
      }
      rest1 = rest.substring((defType ? matched : leading).length);
      endPat = rest1.match(/\n+[^\s]|\n?$/);
      next = endPat ? rest1.substring(endPat.index) : rest1;
      mainEnd = txt.length - next.length;
      t = leading;
      leadOff = tOff = restOff;
      while (m2 = t.match(testPat)) {
        r = makeRange(el, tOff + m2.index, tOff + m2.index + m2[1].length);
        r.leisureTest = {
          expr: JSON.parse(m2[2]),
          expected: JSON.parse(m2[3])
        };
        tests.push(r);
        tOff += m2.index + m2[1].length;
        t = leading.substring(tOff - leadOff);
      }
      if (name) {
        mainStart = matchStart + ((_ref4 = leading != null ? leading.length : void 0) != null ? _ref4 : 0);
        nameEnd = mainStart + name.length;
        leadingSpaces = (rest1.match(/^\s*/))[0].length;
        bodyStart = txt.length - (rest1.length - leadingSpaces);
        outerRange = makeRange(el, mainStart, mainEnd);
        return {
          main: outerRange,
          name: txt.substring(mainStart, nameEnd),
          def: defType,
          body: txt.substring(bodyStart, mainEnd),
          tests: tests,
          next: next
        };
      } else {
        mainStart = defType === '=' ? restOff + m.index + m[0].length : matchStart + ((_ref5 = leading != null ? leading.length : void 0) != null ? _ref5 : 0);
        ex = txt.substring(mainStart, mainEnd).match(/^(.*[^ \n])[ \n]*$/);
        exEnd = ex ? mainStart + ex[1].length : mainEnd;
        body = txt.substring(mainStart, exEnd);
        if (body.trim()) {
          textStart = restOff + m.index + (t ? leading.length - t.length : 0);
          if ((t != null) && (lm = t.match(/^[ \n]+/))) {
            textStart += lm[0].length;
          }
          if (m = t.match(/(?:^|\n)#@auto( +[^\n]*)?(\n|$)/)) {
            outerRange = makeRange(el, textStart, exEnd);
            outerRange.leisureAuto = JSON.parse("{" + ((_ref6 = m[1]) != null ? _ref6 : '') + "}");
            if (outerRange.leisureAuto.mode === 'notebook') {
              outerRange.leisureNode = el;
              outerRange.leisureStart = textStart;
            }
            return {
              main: outerRange,
              name: null,
              def: null,
              body: txt.substring(textStart, exEnd),
              tests: tests,
              fullText: txt.substring(textStart, exEnd),
              next: next
            };
          } else {
            outerRange = makeRange(el, textStart, exEnd);
            return {
              main: outerRange,
              name: null,
              def: null,
              body: txt.substring(textStart, exEnd),
              tests: tests,
              next: next
            };
          }
        } else {
          return {
            main: null,
            name: null,
            def: null,
            body: null,
            tests: tests,
            next: next
          };
        }
      }
    }
  };

  makeRange = function(el, off1, off2) {
    var node, offset, range, _ref3, _ref4;

    range = document.createRange();
    _ref3 = grp(el, off1, false), node = _ref3[0], offset = _ref3[1];
    if ((offset != null) && offset > 0) {
      range.setStart(node, offset);
    } else {
      range.setStartBefore(node);
    }
    if (off2 != null) {
      _ref4 = grp(el, off2, true), node = _ref4[0], offset = _ref4[1];
      if (offset != null) {
        range.setEnd(node, offset);
      } else {
        range.setEndAfter(node);
      }
    }
    return range;
  };

  grp = function(node, charOffset, end) {
    var child, offset, ret, _ref3;

    _ref3 = ret = getRangePosition(node.firstChild, charOffset, end), child = _ref3[0], offset = _ref3[1];
    if (child) {
      return ret;
    } else if (node.lastChild) {
      return nodeEnd(node.lastChild);
    } else {
      return [node, end ? 1 : 0];
    }
  };

  getRangePosition = function(node, charOffset, end) {
    var newNode, newOff, ret, _ref3;

    if (!node) {
      return [null, charOffset];
    } else if (node.nodeType === 3) {
      if (node.length > (end ? charOffset - 1 : charOffset)) {
        return [node, charOffset];
      } else {
        ret = continueRangePosition(node, charOffset - node.length, end);
        return ret;
      }
    } else if (node.nodeName === 'BR') {
      if (charOffset === (end ? 1 : 0)) {
        return [node];
      } else {
        return continueRangePosition(node, charOffset, end);
      }
    } else if (node.firstChild != null) {
      _ref3 = getRangePosition(node.firstChild, charOffset, end), newNode = _ref3[0], newOff = _ref3[1];
      if (newNode != null) {
        return [newNode, newOff];
      } else {
        return continueRangePosition(node, newOff, end);
      }
    } else {
      return continueRangePosition(node, charOffset, end);
    }
  };

  continueRangePosition = function(node, charOffset, end) {
    var newOff;

    newOff = charOffset - ((addsLine(node)) || ((node.nextSibling != null) && (addsLine(node.nextSibling))) ? 1 : 0);
    if (end && (newOff === 1 || charOffset === 1)) {
      return nodeEnd(node);
    } else if (node.nextSibling != null) {
      return getRangePosition(node.nextSibling, newOff, end);
    } else {
      return continueRangePosition(node.parentNode, newOff, end);
    }
  };

  nodeEnd = function(node) {
    return [node, node.nodeType === 3 ? node.length : node.childNodes.length - 1];
  };

  addsLine = function(node) {
    return (node != null ? node.nodeType : void 0) === 1 && (node.nodeName === 'BR' || (getComputedStyle(node, null).display === 'block' && node.childNodes.length > 0));
  };

  req = function(file, cont) {
    var name, s;

    if (!(file.match(/\.js$/))) {
      file = "" + file + ".js";
    }
    name = file.substring(0, file.length - 3);
    s = document.createElement('script');
    s.setAttribute('src', file);
    s.addEventListener('load', function() {
      Leisure.processDefs(global[name], global);
      if (cont) {
        return cont(rz(L_false));
      }
    });
    return document.head.appendChild(s);
  };

  postLoadQueue = [];

  loaded = false;

  queueAfterLoad = function(func) {
    if (loaded) {
      return func();
    } else {
      return postLoadQueue.push(func);
    }
  };

  /*
  # handle focus manually, because grabbing focus and blur events doesn't seem to work for the parent
  */


  docFocus = null;

  codeFocus = null;

  findCurrentCodeHolder = function() {
    var _ref3;

    return focusBox((_ref3 = window.getSelection()) != null ? _ref3.focusNode : void 0);
  };

  focusBox = function(box) {
    var newCode, old, _ref3;

    newCode = null;
    while (box && (box.nodeType !== 1 || !isLeisureCode(box))) {
      if (box.nodeType === 1 && ((box.getAttribute('LeisureBox')) != null)) {
        newCode = box;
      }
      box = box.parentNode;
    }
    if (box !== docFocus) {
      if (docFocus != null) {
        docFocus.classList.remove('focused');
      }
      docFocus = box;
      if (box != null) {
        if ((_ref3 = box.classList) != null) {
          _ref3.add('focused');
        }
      }
    }
    if (newCode !== codeFocus) {
      old = codeFocus;
      codeFocus = newCode;
      if (old) {
        return acceptCode(old);
      }
    }
  };

  owner = function(box) {
    while (box && (box.nodeType !== 1 || !isLeisureCode(box))) {
      box = box.parentNode;
    }
    return box;
  };

  hiddenPat = /(^|\n)#@hidden *(\n|$)/;

  evalBox = function(box, envBox, cont) {
    var env;

    env = envBox != null ? envFor(envBox) : null;
    processLine(box.textContent, env, function(result) {
      if (env != null) {
        if (typeof env.cleanup === "function") {
          env.cleanup();
        }
      }
      return (cont != null ? cont : function(x) {
        return x;
      })(result);
    });
    getAst(box);
    if (box.output && hasMonadOutput(box.output) && box.textContent.match(hiddenPat)) {
      return hideOutputSource(box.output);
    } else if (box.textContent.match(hiddenPat)) {
      return console.log("NO MONAD, BUT MATCHES HIDDEN");
    }
  };

  acceptCode = function(box) {
    if ((box.getAttribute('codemain')) != null) {
      evalBox(box);
      update('compile');
      if (owner(box).autorunState) {
        return runTests(owner(box));
      }
    }
  };

  errString = function(err) {
    return err.stack;
  };

  evaluating = false;

  evaluationQueue = [];

  evalNodes = function(nodes) {
    if (evaluating) {
      return evaluationQueue.push(nodes);
    } else {
      return chainEvalNodes(nodes);
    }
  };

  chainEvalNodes = function(nodes) {
    evaluating = true;
    return runAuto(nodes, 0, function() {
      if (evaluationQueue.length) {
        return chainEvalNodes(evaluationQueue.shift());
      } else {
        return evaluating = false;
      }
    });
  };

  evalDoc = function(el) {
    var auto, autoNodes, e, err, pgm, x, _ref3;

    _ref3 = initNotebook(el), pgm = _ref3[0], auto = _ref3[1], x = _ref3[2], autoNodes = _ref3[3];
    try {
      if (auto || autoNodes) {
        auto = "do\n  " + ((auto != null ? auto : '#').trim().replace(/\n/g, '\n  ')) + "\n  delay\n  finishLoading";
        global.noredefs = false;
        Notebook.queueAfterLoad(function() {
          evalDocCode(el, pgm);
          if (el.autorunState) {
            runTests(el);
          }
          return evalNodes(autoNodes);
        });
        e = envFor(el);
        e.write = function() {};
        e.err = function(err) {
          return alert('bubba ' + errString(err));
        };
        return processLine(auto, e, identity);
      } else {
        return evalDocCode(el, pgm);
      }
    } catch (_error) {
      err = _error;
      return showError(err, "Error compiling " + pgm);
    }
  };

  runAuto = function(nodes, index, cont) {
    var node;

    if (index < nodes.length) {
      console.log("RUNNING AUTO: " + index);
      node = nodes[index];
      console.log("evalOutput", node, node.output);
      return evalOutput(node.output, false, function() {
        return runAuto(nodes, index + 1, cont);
      });
    } else {
      return (cont != null ? cont : function() {})();
    }
  };

  processLine = function(text, env, cont) {
    var err;

    if (text) {
      try {
        return runMonad(rz(L_newParseLine)(lz(Nil))(lz(text)), env, function(ast) {
          var err, result;

          try {
            if (getType(ast) === 'parseErr') {
              env.write(env.presentValue(ast));
              if (typeof env.processResult === "function") {
                env.processResult(ast);
              }
              return cont(ast);
            } else {
              result = eval("(" + (gen(ast)) + ")");
              env.write(env.presentValue(result));
              if (isMonad(result)) {
                return runMonad(result, env, function(result) {
                  env.processResult(result);
                  return cont(result);
                });
              } else {
                if (typeof env.processResult === "function") {
                  env.processResult(result);
                }
                return cont(result);
              }
            }
          } catch (_error) {
            err = _error;
            console.log("ERROR: " + err.stack);
            env.write(env.presentValue(err.stack));
            if (typeof env.processResult === "function") {
              env.processResult(err.stack);
            }
            return cont(err.stack);
          }
        });
      } catch (_error) {
        err = _error;
        console.log("ERROR: " + err.stack);
        env.write(env.presentValue(err.stack));
        if (typeof env.processResult === "function") {
          env.processResult(err.stack);
        }
        return cont(err.stack);
      }
    } else {
      return cont('');
    }
  };

  showError = function(e, msg) {
    console.log(msg);
    console.log(e);
    console.log(e.stack);
    return alert(e.stack);
  };

  evalDocCode = function(el, pgm) {
    return runMonad(rz(L_runFile)(lz(pgm)), defaultEnv, function(result) {
      var node, _i, _len, _ref3, _results;

      _ref3 = el.querySelectorAll('[codeMain]');
      _results = [];
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        node = _ref3[_i];
        _results.push(getAst(node));
      }
      return _results;
    });
  };

  define('getDocument', lz(makeSyncMonad(function(env, cont) {
    return cont(peerGetDocument());
  })));

  define('getLink', function() {
    return 0;
  });

  define('replaceDocument', lz(function(str) {
    return makeSyncMonad(function(env, cont) {
      replaceContents(rz(str));
      return cont(rz(L_true));
    });
  }));

  define('gdriveOpen', lz(makeMonad(function(env, cont) {
    return GdriveStorage.runOpen(function(json) {
      var _ref3;

      if ((json != null ? json.action : void 0) === 'picked' && ((_ref3 = json.docs) != null ? _ref3.length : void 0) > 0) {
        return GdriveStorage.loadFile(json.docs[0].id, function() {
          return cont(rz(_some)(lz(json.docs[0].title)));
        });
      } else {
        return cont(rz(_none));
      }
    });
  })));

  define('getFilename', lz(makeSyncMonad(function(env, cont) {
    var _ref3;

    return cont((_ref3 = filename != null ? filename.pathName() : void 0) != null ? _ref3 : '');
  })));

  define('setURI', lz(function(uri) {
    return makeSyncMonad(function(env, cont) {
      setFilename(rz(uri));
      return cont(rz(L_true));
    });
  }));

  define('getURI', lz(makeSyncMonad(function(env, cont) {
    var _ref3;

    return cont((_ref3 = filename != null ? filename.toString() : void 0) != null ? _ref3 : '');
  })));

  define('finishLoading', lz(makeMonad(function(env, cont) {
    var i, _i, _len;

    loaded = true;
    for (_i = 0, _len = postLoadQueue.length; _i < _len; _i++) {
      i = postLoadQueue[_i];
      rz(i);
    }
    postLoadQueue = [];
    return cont(rz(L_false));
  })));

  define('markupButtons', lz(makeSyncMonad(function(env, cont) {
    if (env.box) {
      markupButtons(env.box);
    }
    return cont(rz(L_false));
  })));

  define('alert', lz(function(str) {
    return makeSyncMonad(function(env, cont) {
      window.alert(rz(str));
      return cont(rz(L_false));
    });
  }));

  define('bindEvent', lz(function(selector) {
    return function(eventName) {
      return function(func) {
        return makeSyncMonad(function(env, cont) {
          var node;

          node = env.box.querySelector(rz(selector));
          if (!node) {
            node = document.body.querySelector(rz(selector));
          }
          console.log("ADDING EVENT: " + (rz(selector)) + " " + (rz(eventName)) + " NODE: " + node);
          if (node) {
            node.addEventListener(eventName(), function(e) {
              console.log("EVENT: " + (rz(selector)) + " " + (rz(eventName)) + " " + (rz(func)));
              return runMonad(rz(func)(lz(e)), envFor(e.target), function() {});
            });
          }
          return cont(rz(L_false));
        });
      };
    };
  }));

  define('quit', lz(window.close()));

  define('config', lz(function(expr) {
    return makeSyncMonad(function(env, cont) {
      switch (rz(expr)) {
        case 'autoTest':
          autoRun(env.owner, true);
      }
      return cont(rz(L_false));
    });
  }));

  define('notebookSelection', lz(function(func) {
    return makeSyncMonad(function(env, cont) {
      var bx, offset, p1, p2, r, r2, sel;

      sel = window.getSelection();
      bx = getBox(sel.focusNode);
      if ((bx != null) && hasFunc(bx, func)) {
        offset = 0;
        r = sel.getRangeAt(0);
        window.r = r;
        r2 = document.createRange();
        r2.setStart(bx, 0);
        r2.setEnd(r.startContainer, r.startOffset);
        p1 = r2.cloneContents().textContent.length - offset;
        if (!r.collapsed) {
          r2.setEnd(r.endContainer, r.endOffset);
        }
        p2 = r2.cloneContents().textContent.length - offset;
        return cont(rz(_some2)(lz(p1))(lz(p2)));
      } else {
        return cont(rz(_none));
      }
    });
  }));

  hasFunc = function(bx, func) {
    var ast;

    ast = getAst(bx);
    return ast === func().ast || ast === func.ast;
  };

  define('notebookAst', lz(function(func) {
    return makeSyncMonad(function(env, cont) {
      var ast, node;

      if (func.leisureName != null) {
        node = document.querySelector("[LeisureFunc=" + func.leisureName + "]");
        if (node != null) {
          ast = getAst(node);
          return cont(rz(_some)(lz(ast)));
        }
      }
      return cont(rz(_none));
    });
  }));

  autoRun = function(el, state) {
    var _ref3;

    el.autorunState = state;
    return (_ref3 = el.autorun) != null ? _ref3.checked = state : void 0;
  };

  head = function(l) {
    return l(lz(function(hh) {
      return function(tt) {
        return rz(hh);
      };
    }));
  };

  tail = function(l) {
    return l(lz(function(hh) {
      return function(tt) {
        return rz(tt);
      };
    }));
  };

  id = function(v) {
    return rz(v);
  };

  getSvgElement = function(id) {
    var el, svg;

    if ((el = document.getElementById(id))) {
      return el;
    } else {
      svg = createNode("<svg id='HIDDEN_SVG' xmlns='http://www.w3.org/2000/svg' version='1.1' style='top: -100000; position: absolute'><text id='HIDDEN_TEXT'>bubba</text></svg>");
      document.body.appendChild(svg);
      return document.getElementById(id);
    }
  };

  svgMeasureText = function(text) {
    return function(style) {
      return function(f) {
        var bx, txt;

        txt = getSvgElement('HIDDEN_TEXT');
        if (rz(style)) {
          txt.setAttribute('style', rz(style));
        }
        txt.lastChild.textContent = rz(text);
        bx = txt.getBBox();
        return rz(f)(lz(bx.width))(lz(bx.height));
      };
    };
  };

  primconcatNodes = function(nodes) {
    if (nodes === rz(_nil)) {
      return "";
    } else {
      return (head(nodes))(id) + concatNodes(tail(nodes));
    }
  };

  transformedPoint = function(pt, x, y, ctm, ictm) {
    pt.x = x;
    pt.y = y;
    return pt.matrixTransform(ctm).matrixTransform(ictm);
  };

  svgMeasure = function(content) {
    return primSvgMeasure(content, baseStrokeWidth);
  };

  svgBetterMeasure = function(content) {
    return primSvgMeasure(content, transformStrokeWidth);
  };

  primSvgMeasure = function(content, transformFunc) {
    return function(f) {
      var bbox, g, pad, svg;

      svg = createNode("<svg xmlns='http://www.w3.org/2000/svg' version='1.1' style='top: -100000'><g>" + (content()) + "</g></svg>");
      document.body.appendChild(svg);
      g = svg.firstChild;
      bbox = g.getBBox();
      pad = getMaxStrokeWidth(g, g, svg, transformFunc);
      document.body.removeChild(svg);
      return rz(f)(lz(bbox.x - Math.ceil(pad / 2)))(lz(bbox.y - Math.ceil(pad / 2)))(lz(bbox.width + pad))(lz(bbox.height + pad));
    };
  };

  baseElements = ['path', 'rect', 'circle', 'ellipse', 'line', 'polyline', 'polygon'];

  getMaxStrokeWidth = function(el, base, svg, transformFunc) {
    var _ref3, _ref4;

    if (_ref3 = base.nodeName, __indexOf.call(baseElements, _ref3) >= 0) {
      svg.setAttribute('width', (_ref4 = getComputedStyle(base).strokeWidth) != null ? _ref4 : '0', svg);
      return transformFunc(el, svg.width.baseVal.value);
    } else if (base.nodeName === 'use') {
      return getMaxStrokeWidth(base, base.instanceRoot.correspondingElement, svg, transformFunc);
    } else if (base.nodeName === 'g') {
      return foldLeft((function(v, n) {
        return Math.max(v, getMaxStrokeWidth(n, n, svg, transformFunc));
      }), 0, el.childNodes);
    } else {
      return 0;
    }
  };

  baseStrokeWidth = function(el, w) {
    return w;
  };

  transformStrokeWidth = function(el, w) {
    var ctm, tp1, tp2, x, y;

    if (w === 0) {
      return 0;
    } else {
      ctm = el.getScreenCTM();
      tp1 = transformedPoint(pt, bx.x - Math.ceil(w), bx.y - Math.ceil(w), ctm, isctm);
      tp2 = transformedPoint(pt, bx.x + bx.width + Math.ceil(w), bx.y + bx.height + Math.ceil(w), ctm, isctm);
      x = tp2.x - tp1.x;
      y = tp2.y - tp1.y;
      return Math.sqrt(x * x + y * y);
    }
  };

  previousSibling = function(node) {
    while ((node != null ? node.parentNode : void 0) && !node.previousSibling) {
      node = node.parentNode;
    }
    return node != null ? node.previousSibling : void 0;
  };

  nextSibling = function(node) {
    while ((node != null ? node.parentNode : void 0) && !node.nextSibling) {
      node = node.parentNode;
    }
    return node != null ? node.nextSibling : void 0;
  };

  hideControlSection = function() {
    var controlSection;

    controlSection = document.body.querySelector('[leisureSection="Leisure Controls"]');
    if (!controlSection) {
      controlSection = document.createElement('DIV');
      document.body.insertBefore(controlSection, document.body.firstChild);
      root.markupElement(controlSection, "# Leisure Controls\n\n## File Save and Load\n```\nsaveFile\n\nsaveAs 'filename'\n\nsaveAs pickFile\n\nloadFile\n\nemptyFile\n```");
      unwrap(controlSection);
    }
    controlSection.classList.add(leisure_controls);
    return controlSection.classList.add(hidden);
  };

  define('printValue', lz(function(value) {
    return makeMonad(function(env, cont) {
      if (rz(value) !== rz(L_nil)) {
        env.write("" + (env.presentValue(rz(value))) + "\n");
      }
      return cont(L_false());
    });
  }));

  defaultEnv.require = req;

  root.svgMeasureText = svgMeasureText;

  root.svgMeasure = svgMeasure;

  root.initNotebook = initNotebook;

  root.bindNotebook = bindNotebook;

  root.bindAll = bindAll;

  root.evalOutput = evalOutput;

  root.makeTestCase = makeTestCase;

  root.cleanOutput = cleanOutput;

  root.clearOutputBox = clearOutputBox;

  root.envFor = envFor;

  root.queueAfterLoad = queueAfterLoad;

  root.evalDoc = evalDoc;

  root.getBox = getBox;

  root.makeRange = makeRange;

  root.grp = grp;

  root.changeTheme = changeTheme;

  root.setSnapper = setSnapper;

  root.update = update;

  root.clearUpdates = clearUpdates;

  root.showAst = showAst;

  root.toggleEdit = toggleEdit;

  root.showSource = showSource;

  root.bootNotebook = bootNotebook;

  root.createNode = createNode;

  root.ENTER = ENTER;

  root.textNode = textNode;

  root.cleanEmptyNodes = cleanEmptyNodes;

  root.isLeisureCode = isLeisureCode;

  root.getElementCode = getElementCode;

  root.runTests = runTests;

  root.previousSibling = previousSibling;

  root.nextSibling = nextSibling;

  root.presentLeisureCode = presentLeisureCode;

  root.mergeLeisureCode = mergeLeisureCode;

  root.highlightNotebookFunction = highlightNotebookFunction;

  root.ESC = ESC;

  root.HOME = HOME;

  root.END = END;

  root.PAGE_UP = PAGE_UP;

  root.PAGE_DOWN = PAGE_DOWN;

  root.LEFT_ARROW = LEFT_ARROW;

  root.UP_ARROW = UP_ARROW;

  root.RIGHT_ARROW = RIGHT_ARROW;

  root.DOWN_ARROW = DOWN_ARROW;

  root.arrows = arrows;

  root.closeWindow = closeWindow;

  root.markupButton = markupButton;

  root.markupButtons = markupButtons;

  root.getAst = getAst;

  root.insertControls = insertControls;

  root.delay = delay;

  root.setFilename = setFilename;

  root.unwrap = unwrap;

  root.remove = remove;

  root.wrapRange = wrapRange;

  root.replaceContents = replaceContents;

  root.event = event;

}).call(this);

/*
*/

})(self)
},{"./ast":1,"./base":2,"./gen":4,"./lodash.min":6,"./runtime":10}],10:[function(require,module,exports){
(function(process,global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var Monad, Nil, SimpyCons, actors, amt, ast2Json, asyncMonad, basicCall, booleanFor, call, callMonad, cons, consFrom, continueMonads, curry, defaultEnv, define, ensureLeisureClass, functionInfo, getDataType, getMonadSyncMode, getType, getValue, hamt, head, identity, isMonad, lazy, left, lz, makeHamt, makeMonad, makeSyncMonad, memo, monadModeSync, nameSub, newRunMonad, nextMonad, nextNode, none, parensContent, parensEnd, parensStart, readDir, readFile, replaceErr, resolve, right, root, runMonad, rz, setDataType, setType, setValue, setWarnAsync, simpyCons, some, statFile, strCoord, strFromList, strToList, subcurry, tail, tokenPos, tokenString, trampCurry, values, warnAsync, withSyncModeDo, writeFile, _, _false, _identity, _ref, _ref1, _true,
    __slice = [].slice;

  _ref = root = module.exports = require('./base'), readFile = _ref.readFile, statFile = _ref.statFile, readDir = _ref.readDir, writeFile = _ref.writeFile, defaultEnv = _ref.defaultEnv, SimpyCons = _ref.SimpyCons, simpyCons = _ref.simpyCons, resolve = _ref.resolve, lazy = _ref.lazy;

  _ref1 = require('./ast'), define = _ref1.define, cons = _ref1.cons, Nil = _ref1.Nil, head = _ref1.head, tail = _ref1.tail, getType = _ref1.getType, getDataType = _ref1.getDataType, ast2Json = _ref1.ast2Json, ensureLeisureClass = _ref1.ensureLeisureClass, setType = _ref1.setType, setDataType = _ref1.setDataType, functionInfo = _ref1.functionInfo, nameSub = _ref1.nameSub;

  _ = require('./lodash.min');

  amt = require('persistent-hash-trie');

  rz = resolve;

  lz = lazy;

  call = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return basicCall(args, defaultEnv, identity);
  };

  callMonad = function() {
    var args, cont, env, _i;

    args = 3 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 2) : (_i = 0, []), env = arguments[_i++], cont = arguments[_i++];
    return basicCall(args, env, cont);
  };

  basicCall = function(args, env, cont) {
    var arg, res, _i, _len, _ref2;

    res = global["L_" + args[0]]();
    _ref2 = args.slice(1);
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      arg = _ref2[_i];
      res = (function(arg) {
        return res(lz(arg));
      })(arg);
    }
    return runMonad(res, env, cont);
  };

  consFrom = function(array, i) {
    i = i || 0;
    if (i < array.length) {
      return cons(array[i], consFrom(array, i + 1));
    } else {
      return L_nil();
    }
  };

  identity = function(x) {
    return x;
  };

  _identity = function(x) {
    return rz(x);
  };

  _true = setType((function(a) {
    return function(b) {
      return rz(a);
    };
  }), 'true');

  _false = setType((function(a) {
    return function(b) {
      return rz(b);
    };
  }), 'false');

  left = function(x) {
    return setType((function(lCase) {
      return function(rCase) {
        return rz(lCase)(lz(x));
      };
    }), 'left');
  };

  right = function(x) {
    return setType((function(lCase) {
      return function(rCase) {
        return rz(rCase)(lz(x));
      };
    }), 'right');
  };

  some = function(x) {
    return setType((function(someCase) {
      return function(noneCase) {
        return rz(someCase)(lz(x));
      };
    }), 'some');
  };

  none = setType((function(someCase) {
    return function(noneCase) {
      return rz(noneCase);
    };
  }), 'none');

  booleanFor = function(bool) {
    if (bool) {
      return rz(L_true);
    } else {
      return rz(L_false);
    }
  };

  define('eq', lz(function(a) {
    return function(b) {
      return booleanFor(rz(a) === rz(b));
    };
  }));

  define('==', lz(function(a) {
    return function(b) {
      return booleanFor(rz(a) === rz(b));
    };
  }));

  define('hasType', lz(function(data) {
    return function(func) {
      if (typeof rz(func) === 'string') {
        return booleanFor(getType(rz(data)) === rz(func));
      } else {
        return booleanFor(getType(rz(data)) === getDataType(rz(func)));
      }
    };
  }));

  define('getDataType', lz(function(func) {
    if (typeof rz(func) === 'string') {
      return rz(func);
    } else {
      return getDataType(rz(func));
    }
  }));

  define('assert', lz(function(bool) {
    return function(msg) {
      return function(expr) {
        return rz(bool)(expr)(function() {
          throw new Error(rz(msg));
        });
      };
    };
  }));

  define('assertLog', lz(function(bool) {
    return function(msg) {
      return function(expr) {
        return rz(bool)(expr)(function() {
          console.log(new Error(rz(msg)).stack);
          console.log("LOGGED ERROR -- RESUMING EXECUTION...");
          return rz(expr);
        });
      };
    };
  }));

  define('+', lz(function(x) {
    return function(y) {
      return rz(x) + rz(y);
    };
  }));

  define('-', lz(function(x) {
    return function(y) {
      return rz(x) - rz(y);
    };
  }));

  define('*', lz(function(x) {
    return function(y) {
      return rz(x) * rz(y);
    };
  }));

  define('/', lz(function(x) {
    return function(y) {
      return rz(x) / rz(y);
    };
  }));

  define('%', lz(function(x) {
    return function(y) {
      return rz(x) % rz(y);
    };
  }));

  define('<', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) < rz(y));
    };
  }));

  define('<=', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) <= rz(y));
    };
  }));

  define('>', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) > rz(y));
    };
  }));

  define('>=', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) >= rz(y));
    };
  }));

  define('floor', lz(function(x) {
    return Math.floor(rz(x));
  }));

  define('ceil', lz(function(x) {
    return Math.ceil(rz(x));
  }));

  define('min', lz(function(x) {
    return function(y) {
      return Math.min(rz(x), rz(y));
    };
  }));

  define('max', lz(function(x) {
    return function(y) {
      return Math.max(rz(x), rz(y));
    };
  }));

  define('round', lz(function(x) {
    return Math.round(rz(x));
  }));

  define('abs', lz(function(x) {
    return Math.abs(rz(x));
  }));

  define('sqrt', lz(function(x) {
    return Math.sqrt(rz(x));
  }));

  define('acos', lz(function(x) {
    return Math.acos(rz(x));
  }));

  define('asin', lz(function(x) {
    return Math.asin(rz(x));
  }));

  define('atan', lz(function(x) {
    return Math.atan(rz(x));
  }));

  define('atan2', lz(function(x) {
    return function(y) {
      return Math.atan2(rz(x), rz(y));
    };
  }));

  define('cos', lz(function(x) {
    return Math.cos(rz(x));
  }));

  define('log', lz(function(x) {
    return Math.log(rz(x));
  }));

  define('sin', lz(function(x) {
    return Math.sin(rz(x));
  }));

  define('tan', lz(function(x) {
    return Math.tan(rz(x));
  }));

  define('rand', function() {
    return makeSyncMonad(function(env, cont) {
      return cont(Math.random());
    });
  });

  define('randInt', lz(function(low) {
    return function(high) {
      return makeSyncMonad(function(env, cont) {
        return cont(Math.floor(rz(low) + Math.random() * rz(high)));
      });
    };
  }));

  define('^', lz(function(x) {
    return function(y) {
      return Math.pow(rz(x), rz(y));
    };
  }));

  define('_show', lz(function(data) {
    var _ref2;

    if ((_ref2 = typeof rz(data)) === 'string' || _ref2 === 'number' || _ref2 === 'boolean') {
      return JSON.stringify(rz(data));
    } else {
      return String(rz(data));
    }
  }));

  define('strString', lz(function(data) {
    return String(rz(data));
  }));

  define('_strAsc', lz(function(str) {
    return rz(str).charCodeAt(0);
  }));

  define('_strChr', lz(function(i) {
    return String.fromCharCode(rz(i));
  }));

  define('_strAt', lz(function(str) {
    return function(index) {
      return rz(str)[strCoord(rz(str), rz(index))];
    };
  }));

  define('_strStartsWith', lz(function(str) {
    return function(prefix) {
      return booleanFor(rz(str).substring(0, rz(prefix).length) === rz(prefix));
    };
  }));

  define('_strLen', lz(function(str) {
    return rz(str).length;
  }));

  define('_strToLowerCase', lz(function(str) {
    return rz(str).toLowerCase();
  }));

  define('_strToUpperCase', lz(function(str) {
    return rz(str).toUpperCase();
  }));

  define('_strReplace', lz(function(str) {
    return function(pat) {
      return function(repl) {
        return rz(str).replace(rz(pat), rz(repl));
      };
    };
  }));

  strCoord = function(str, coord) {
    if (coord < 0) {
      return str.length + coord;
    } else {
      return coord;
    }
  };

  define('_strSubstring', lz(function(str) {
    return function(start) {
      return function(end) {
        var a, b;

        a = strCoord(rz(str), rz(start));
        b = strCoord(rz(str), rz(end));
        if (b < a && rz(end) === 0) {
          b = rz(str).length;
        }
        return rz(str).substring(a, b);
      };
    };
  }));

  define('_strSplit', lz(function(str) {
    return function(pat) {
      return consFrom(rz(str).split(rz(pat) instanceof RegExp ? rz(pat) : new RegExp(rz(pat))));
    };
  }));

  define('_strCat', lz(function(list) {
    return _.map(rz(list).toArray(), function(el) {
      if (typeof el === 'string') {
        return el;
      } else {
        return rz(L_show)(lz(el));
      }
    }).join('');
  }));

  define('_strAdd', lz(function(s1) {
    return function(s2) {
      return rz(s1) + rz(s2);
    };
  }));

  define('_strMatch', lz(function(str) {
    return function(pat) {
      var groups, m, pos;

      m = rz(str).match((rz(pat) instanceof RegExp ? rz(pat) : new RegExp(rz(pat))));
      if (m) {
        groups = [];
        pos = 1;
        while (m[pos]) {
          groups.push(m[pos++]);
        }
        if (typeof m.index !== 'undefined') {
          return consFrom([m[0], consFrom(groups), m.index, m.input]);
        } else {
          return consFrom([m[0], consFrom(groups)]);
        }
      } else {
        return Nil;
      }
    };
  }));

  define('_strToList', lz(function(str) {
    return strToList(rz(str));
  }));

  strToList = function(str) {
    if (str === '') {
      return Nil;
    } else {
      return cons(str[0], strToList(str.substring(1)));
    }
  };

  define('_strFromList', lz(function(list) {
    return strFromList(rz(list));
  }));

  strFromList = function(list) {
    if (list instanceof Leisure_nil) {
      return '';
    } else {
      return head(list) + strFromList(tail(list));
    }
  };

  define('_regexp', lz(function(str) {
    return new RegExp(rz(str));
  }));

  define('_regexpFlags', lz(function(str) {
    return function(flags) {
      return new RegExp(rz(str), rz(flags));
    };
  }));

  define('_jsonParse', lz(function(str) {
    return function(failCont) {
      return function(successCont) {
        var err, p;

        try {
          p = JSON.parse(rz(str));
          return rz(successCont)(lz(p));
        } catch (_error) {
          err = _error;
          return rz(failCont)(lz(err));
        }
      };
    };
  }));

  define('jsonStringify', lz(function(obj) {
    return function(failCont) {
      return function(successCont) {
        var err, s;

        try {
          s = JSON.stringify(rz(obj));
          return rz(successCont)(lz(s));
        } catch (_error) {
          err = _error;
          return rz(failCont)(lz(err));
        }
      };
    };
  }));

  define('getProperties', lz(function(func) {
    var _ref2;

    if ((_ref2 = rz(func)) != null ? _ref2.properties : void 0) {
      return rz(L_some)(lz(rz(func).properties));
    } else {
      return rz(L_none);
    }
  }));

  define('log', lz(function(str) {
    return function(res) {
      console.log(String(rz(str)));
      return rz(res);
    };
  }));

  makeMonad = function(guts) {
    var m;

    m = function() {};
    m.__proto__ = Monad.prototype;
    m.cmd = guts;
    m.type = 'monad';
    return m;
  };

  makeSyncMonad = function(guts) {
    var m;

    m = makeMonad(guts);
    m.sync = true;
    return m;
  };

  nextMonad = function(cont) {
    return cont;
  };

  replaceErr = function(err, msg) {
    err.message = msg;
    return err;
  };

  defaultEnv.write = function(str) {
    return process.stdout.write(str);
  };

  defaultEnv.err = function(err) {
    var _ref2;

    return this.write("ENV Error: " + ((_ref2 = err.stack) != null ? _ref2 : err));
  };

  defaultEnv.prompt = function() {
    throw new Error("Environment does not support prompting!");
  };

  monadModeSync = false;

  getMonadSyncMode = function() {
    return monadModeSync;
  };

  withSyncModeDo = function(newMode, block) {
    var err, oldMode;

    oldMode = monadModeSync;
    monadModeSync = newMode;
    try {
      return block();
    } catch (_error) {
      err = _error;
      return console.log("ERR: " + err.stack);
    } finally {

    }
  };

  runMonad = function(monad, env, cont) {
    env = env != null ? env : root.defaultEnv;
    return withSyncModeDo(true, function() {
      return newRunMonad(monad, env, cont, []);
    });
  };

  isMonad = function(m) {
    return typeof m === 'function' && (m.cmd != null);
  };

  continueMonads = function(contStack, env) {
    return function(result) {
      return withSyncModeDo(false, function() {
        return newRunMonad(result, env, null, contStack);
      });
    };
  };

  asyncMonad = {
    toString: function() {
      return "<asyncMonadResult>";
    }
  };

  warnAsync = false;

  setWarnAsync = function(state) {
    return warnAsync = state;
  };

  newRunMonad = function(monad, env, cont, contStack) {
    var err, result;

    if (cont) {
      contStack.push(cont);
    }
    try {
      while (true) {
        if (isMonad(monad)) {
          if (monad.binding) {
            contStack.push((function(bnd) {
              return function(x) {
                return bnd(lz(x));
              };
            })(rz(monad.binding)));
            monad = rz(monad.monad);
            continue;
          } else if (!monad.sync) {
            monadModeSync = false;
            if (warnAsync) {
              console.log("async monad");
            }
            monad.cmd(env, continueMonads(contStack, env));
            return asyncMonad;
          }
          result = monad.cmd(env, identity);
        } else {
          monadModeSync = true;
          result = monad;
        }
        if (!contStack.length) {
          return result;
        }
        monad = contStack.pop()(result);
      }
    } catch (_error) {
      err = _error;
      err = replaceErr(err, "\nERROR RUNNING MONAD, MONAD: " + monad + ", ENV: " + env + "...\n" + err.message);
      console.log(err.stack);
      if (env.errorHandlers.length) {
        return env.errorHandlers.pop()(err);
      }
    }
  };

  Monad = (function() {
    function Monad() {}

    Monad.prototype.toString = function() {
      return "Monad: " + (this.cmd.toString());
    };

    return Monad;

  })();

  global.L_runMonads = function(monadArray) {
    monadArray.reverse();
    return newRunMonad(0, defaultEnv, null, monadArray);
  };

  define('define', lz(function(name) {
    return function(arity) {
      return function(src) {
        return function(def) {
          return makeSyncMonad(function(env, cont) {
            define(rz(name), def, rz(arity), rz(src));
            return cont((typeof L_true !== "undefined" && L_true !== null ? rz(L_true) : _true));
          });
        };
      };
    };
  }));

  define('bind', lz(function(m) {
    return function(binding) {
      var bindMonad;

      bindMonad = makeMonad(function(env, cont) {});
      bindMonad.monad = m;
      bindMonad.binding = binding;
      return bindMonad;
    };
  }));

  values = {};

  define('protect', lz(function(value) {
    return makeMonad(function(env, cont) {
      var hnd;

      hnd = function(err) {
        console.log("PROTECTED ERROR: " + err.stack);
        return cont(left(err.stack));
      };
      env.errorHandlers.push(hnd);
      return runMonad(rz(value), env, (function(result) {
        if (env.errorHandlers.length) {
          if (env.errorHandlers[env.errorHandlers.length - 1] === hnd) {
            env.errorHandlers.pop();
          } else if (_.contains(env.errorHandlers, hnd)) {
            while (env.errorHandlers[env.errorHandlers.length - 1] !== hnd) {
              env.errorHandlers.pop();
            }
          }
        }
        return cont(right(result));
      }), []);
    });
  }));

  actors = {};

  define('actor', lz(function(name) {
    return function(func) {
      actors[name] = func;
      func.env = {
        values: {}
      };
      return func.env.__proto__ = defaultEnv;
    };
  }));

  define('send', lz(function(name) {
    return function(msg) {
      return setTimeout((function() {
        return runMonad(rz(actors[name])(msg), rz(actors[name]).env);
      }), 1);
    };
  }));

  define('hasValue', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      return cont(booleanFor(values[rz(name)] != null));
    });
  }));

  define('getValueOr', lz(function(name) {
    return function(defaultValue) {
      return makeSyncMonad(function(env, cont) {
        var _ref2;

        return cont((_ref2 = values[rz(name)]) != null ? _ref2 : rz(defaultValue));
      });
    };
  }));

  define('getValue', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      if (!(rz(name) in values)) {
        throw new Error("No value named '" + (rz(name)) + "'");
      }
      return cont(values[rz(name)]);
    });
  }));

  define('setValue', lz(function(name) {
    return function(value) {
      return makeSyncMonad(function(env, cont) {
        values[rz(name)] = rz(value);
        return cont(_true);
      });
    };
  }));

  define('deleteValue', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      delete values[rz(name)];
      return cont(_true);
    });
  }));

  setValue = function(key, value) {
    return values[key] = value;
  };

  getValue = function(key) {
    return values[key];
  };

  define('envHas', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      return cont(booleanFor(env.values[rz(name)] != null));
    });
  }));

  define('envGetOr', lz(function(name) {
    return function(defaultValue) {
      return makeSyncMonad(function(env, cont) {
        var _ref2;

        return cont((_ref2 = env.values[rz(name)]) != null ? _ref2 : rz(defaultValue));
      });
    };
  }));

  define('envGet', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      if (!(rz(name) in env.values)) {
        throw new Error("No value named '" + (rz(name)) + "'");
      }
      return cont(env.values[rz(name)]);
    });
  }));

  define('envSet', lz(function(name) {
    return function(value) {
      return makeSyncMonad(function(env, cont) {
        env.values[rz(name)] = rz(value);
        return cont(_true);
      });
    };
  }));

  define('envDelete', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      delete env.values[rz(name)];
      return cont(_true);
    });
  }));

  setValue('macros', Nil);

  define('defMacro', lz(function(name) {
    return function(def) {
      return makeSyncMonad(function(env, cont) {
        values.macros = cons(cons(rz(name), rz(def)), values.macros);
        return cont(_true);
      });
    };
  }));

  define('funcs', lz(makeSyncMonad(function(env, cont) {
    console.log("Leisure functions:\n" + (_(global.leisureFuncNames.toArray()).sort().join('\n')));
    return cont(_true);
  })));

  define('funcSrc', lz(function(func) {
    if (typeof rz(func) === 'function' && rz(func).src) {
      return some(rz(func).src);
    } else {
      return none;
    }
  }));

  define('ast2Json', lz(function(ast) {
    return JSON.stringify(ast2Json(rz(ast)));
  }));

  define('override', lz(function(name) {
    return function(newFunc) {
      return makeSyncMonad(function(env, cont) {
        var n, oldDef;

        n = "L_" + (nameSub(rz(name)));
        oldDef = global[n];
        if (!oldDef) {
          throw new Error("No definition for " + (rz(name)));
        }
        global[n] = function() {
          return rz(newFunc)(oldDef);
        };
        return cont(_true);
      });
    };
  }));

  define('print', lz(function(msg) {
    return makeSyncMonad(function(env, cont) {
      var m;

      m = rz(msg);
      env.write("" + (env.presentValue(m)) + "\n");
      return cont(_true);
    });
  }));

  define('write', lz(function(msg) {
    return makeSyncMonad(function(env, cont) {
      env.write(env.presentValue(rz(msg)));
      return cont(_true);
    });
  }));

  define('readFile', lz(function(name) {
    return makeMonad(function(env, cont) {
      return readFile(rz(name), function(err, contents) {
        return cont((err ? left(err.stack) : right(contents)));
      });
    });
  }));

  define('readDir', lz(function(dir) {
    return makeMonad(function(env, cont) {
      return readDir(rz(dir), function(err, files) {
        return cont((err ? left(err.stack) : right(files)));
      });
    });
  }));

  define('writeFile', lz(function(name) {
    return function(data) {
      return makeMonad(function(env, cont) {
        return writeFile(rz(name), rz(data), function(err, contents) {
          return cont((err ? left(err.stack) : right(contents)));
        });
      });
    };
  }));

  define('statFile', lz(function(file) {
    return makeMonad(function(env, cont) {
      return statFile(rz(file), function(err, stats) {
        return cont((err ? left(err.stack) : right(stats)));
      });
    });
  }));

  define('prompt', lz(function(msg) {
    return makeMonad(function(env, cont) {
      return env.prompt(String(rz(msg)), function(input) {
        return cont(input);
      });
    });
  }));

  define('rand', lz(makeSyncMonad(function(env, cont) {
    return cont(Math.random());
  })));

  define('js', lz(function(str) {
    return makeSyncMonad(function(env, cont) {
      var err, result;

      try {
        result = eval(rz(str));
        return cont(right(result));
      } catch (_error) {
        err = _error;
        return cont(left(err));
      }
    });
  }));

  define('delay', lz(function(timeout) {
    return makeMonad(function(env, cont) {
      return setTimeout((function() {
        return cont(_true);
      }), rz(timeout));
    });
  }));

  define('altDef', lz(function(name) {
    return function(alt) {
      return function(arity) {
        return function(def) {
          return makeMonad(function(env, cont) {
            var alts, i, info, newDef, nm;

            info = functionInfo[rz(name)];
            if (!info) {
              info = functionInfo[rz(name)] = {
                src: '',
                arity: -1,
                alts: {},
                altList: []
              };
            }
            if (!info.alts[rz(alt)]) {
              info.altList.push(rz(alt));
            }
            info.alts[rz(alt)] = rz(def);
            alts = (function() {
              var _i, _len, _ref2, _results;

              _ref2 = info.altList;
              _results = [];
              for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
                i = _ref2[_i];
                _results.push(info.alts[i]);
              }
              return _results;
            })();
            newDef = curry(rz(arity), function(args) {
              var arg, opt, res, _i, _j, _k, _len, _len1, _len2;

              for (_i = 0, _len = alts.length; _i < _len; _i++) {
                alt = alts[_i];
                opt = alt;
                for (_j = 0, _len1 = args.length; _j < _len1; _j++) {
                  arg = args[_j];
                  opt = opt(arg);
                }
                if (getType(opt) === 'some') {
                  return opt(lz(function(x) {
                    return rz(x);
                  }))(lz(_false));
                }
              }
              if (info.mainDef) {
                res = rz(info.mainDef);
                for (_k = 0, _len2 = args.length; _k < _len2; _k++) {
                  arg = args[_k];
                  res = res(arg);
                }
                return res;
              }
              throw new Error("No default definition for " + (rz(name)));
            });
            nm = "L_" + (nameSub(rz(name)));
            global[nm] = global.leisureFuncNames[nm] = newDef;
            return cont(def);
          });
        };
      };
    };
  }));

  curry = function(arity, func) {
    return function() {
      return function(arg) {
        return (subcurry(arity, func, []))(arg);
      };
    };
  };

  subcurry = function(arity, func, args) {
    return function(arg) {
      args = args != null ? args : [];
      args.push(arg);
      if (arity === 1) {
        return func(args);
      } else {
        return subcurry(arity - 1, func, args);
      }
    };
  };

  makeHamt = function(hamt) {
    var t;

    t = setDataType((function() {}), 'hamt');
    t.hamt = hamt;
    t.type = 'hamt';
    return t;
  };

  hamt = makeHamt(amt.Trie());

  define('hamt', lz(hamt));

  define('hamtWith', lz(function(key) {
    return function(value) {
      return function(hamt) {
        return makeHamt(amt.assoc(rz(hamt).hamt, rz(key), rz(value)));
      };
    };
  }));

  define('hamtFetch', lz(function(key) {
    return function(hamt) {
      return amt.get(rz(hamt).hamt, rz(key));
    };
  }));

  define('hamtGet', lz(function(key) {
    return function(hamt) {
      var v;

      v = amt.get(rz(hamt).hamt, rz(key));
      if (v !== void 0) {
        return some(v);
      } else {
        return none;
      }
    };
  }));

  define('hamtWithout', lz(function(key) {
    return function(hamt) {
      return makeHamt(amt.dissoc(rz(hamt).hamt, rz(key)));
    };
  }));

  memo = function(func) {
    return function() {
      return func.memo || (func.memo = func());
    };
  };

  define('hamtPairs', lz(function(hamt) {
    return nextNode(simpyCons(rz(hamt).hamt, null));
  }));

  nextNode = function(stack) {
    var child, k, key, node, value, _ref2, _ref3;

    if (stack === null) {
      return rz(L_nil);
    }
    node = stack.head;
    stack = stack.tail;
    switch (node.type) {
      case 'trie':
        _ref2 = node.children;
        for (k in _ref2) {
          child = _ref2[k];
          stack = simpyCons(child, stack);
        }
        return nextNode(stack);
      case 'value':
        return rz(L_acons)(lz(node.key))(lz(node.value))(memo(function() {
          return nextNode(stack);
        }));
      case 'hashmap':
        _ref3 = node.values;
        for (key in _ref3) {
          value = _ref3[key];
          stack = simpyCons(value, stack);
        }
        return nextNode(stack);
      default:
        return console.log("UNKNOWN HAMT NODE TYPE: " + node.type);
    }
  };

  define('trampolineCall', lz(function(func) {
    var ret;

    ret = rz(func);
    while (true) {
      if (typeof ret === 'function' && ret.trampoline) {
        ret = ret();
      } else {
        return ret;
      }
    }
  }));

  define('trampoline', lz(function(func) {
    var arity, f;

    f = rz(func);
    arity = functionInfo[f.leisureName].arity;
    return trampCurry(f, arity);
  }));

  trampCurry = function(func, arity) {
    return function(arg) {
      var a, result;

      a = rz(arg);
      if (arity > 1) {
        return trampCurry(func(function() {
          return a;
        }), arity - 1);
      } else {
        result = function() {
          return func(function() {
            return a;
          });
        };
        result.trampoline = true;
        return result;
      }
    };
  };

  ensureLeisureClass('token');

  Leisure_token.prototype.toString = function() {
    return "Token(" + (JSON.stringify(tokenString(this))) + ", " + (tokenPos(this)) + ")";
  };

  tokenString = function(t) {
    return t(lz(function(txt) {
      return function(pos) {
        return rz(txt);
      };
    }));
  };

  tokenPos = function(t) {
    return t(lz(function(txt) {
      return function(pos) {
        return rz(pos);
      };
    }));
  };

  ensureLeisureClass('parens');

  Leisure_parens.prototype.toString = function() {
    return "Parens(" + (parensStart(this)) + ", " + (parensEnd(this)) + ", " + (parensContent(this)) + ")";
  };

  parensStart = function(p) {
    return p(lz(function(s) {
      return function(e) {
        return function(l) {
          return rz(s);
        };
      };
    }));
  };

  parensEnd = function(p) {
    return p(lz(function(s) {
      return function(e) {
        return function(l) {
          return rz(e);
        };
      };
    }));
  };

  parensContent = function(p) {
    return p(lz(function(s) {
      return function(e) {
        return function(l) {
          return rz(l);
        };
      };
    }));
  };

  ensureLeisureClass('true');

  Leisure_true.prototype.toString = function() {
    return "true";
  };

  ensureLeisureClass('false');

  Leisure_false.prototype.toString = function() {
    return "false";
  };

  ensureLeisureClass('left');

  Leisure_left.prototype.toString = function() {
    return "Left(" + (this(lz(_identity))(lz(_identity))) + ")";
  };

  ensureLeisureClass('right');

  Leisure_right.prototype.toString = function() {
    return "Right(" + (this(lz(_identity))(lz(_identity))) + ")";
  };

  root._true = _true;

  root._false = _false;

  root.stateValues = values;

  root.runMonad = runMonad;

  root.newRunMonad = newRunMonad;

  root.isMonad = isMonad;

  root.identity = identity;

  root.setValue = setValue;

  root.getValue = getValue;

  root.makeMonad = makeMonad;

  root.makeSyncMonad = makeSyncMonad;

  root.replaceErr = replaceErr;

  root.left = left;

  root.right = right;

  root.getMonadSyncMode = getMonadSyncMode;

  root.asyncMonad = asyncMonad;

  root.setWarnAsync = setWarnAsync;

  root.call = call;

  root.callMonad = callMonad;

  root.basicCall = basicCall;

  root.booleanFor = booleanFor;

  root.newConsFrom = consFrom;

  if (typeof window !== "undefined" && window !== null) {
    window.runMonad = runMonad;
    window.setType = setType;
    window.setDataType = setDataType;
    window.defaultEnv = defaultEnv;
    window.identity = identity;
  }

}).call(this);

/*
*/

})(require("__browserify_process"),self)
},{"./ast":1,"./base":2,"./lodash.min":6,"__browserify_process":12,"persistent-hash-trie":15}],11:[function(require,module,exports){
L_runMonads([
  function(){return resolve(L_define)(lazy("if"))(lazy(0))(lazy("if = id"))(L_id)},
  function(){return resolve(L_define)(lazy("afetch"))(lazy(2))(lazy("afetch k alist  = alist (\\h t D . h \\key value . eq key k value (afetch k t)) nil"))((function(){return function(L_k){return function(L_alist){return resolve(L_alist)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_h)((function(){return function(L_key){return function(L_value){return resolve(L_eq)(L_key)(L_k)(L_value)((function(){return resolve(L_afetch)(L_k)(L_t)}))}}}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("aconsf"))(lazy(3))(lazy("aconsf key value list = acons key value (aremove key list)"))((function(){return function(L_key){return function(L_value){return function(L_list){return resolve(L_acons)(L_key)(L_value)((function(){return resolve(L_aremove)(L_key)(L_list)}))}}}}))},
  function(){return resolve(L_define)(lazy("aremove"))(lazy(2))(lazy("aremove key list = isNil list\n  nil\n  eq (head (head list)) key\n    aremove key (tail list)\n    aconsPair (head list) (aremove key (tail list))"))((function(){return function(L_key){return function(L_list){return resolve(L_isNil)(L_list)(L_nil)((function(){return resolve(L_eq)((function(){return resolve(L_head)((function(){return resolve(L_head)(L_list)}))}))(L_key)((function(){return resolve(L_aremove)(L_key)((function(){return resolve(L_tail)(L_list)}))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_aremove)(L_key)((function(){return resolve(L_tail)(L_list)}))}))}))}))}}}))},
  function(){return resolve(L_defMacro)(lazy("when"))((function(){return function(L_line){return resolve(L_line)((function(){return function(L_cond){return function(L_rest){return resolve(L_cons)(L_cond)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("do"))(L_rest)}))((function(){return resolve(L_cons)(lazy("nil"))(L_nil)}))}))}}}))}}))},
  function(){return resolve(L_addTokenGroup)(lazy("js["))(lazy("]"))},
  function(){return resolve(L_defMacro)(lazy("js["))((function(){return function(L_list){return resolve(L_cons)(lazy("js"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("strCat"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("flatten"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_listify)((function(){return resolve(L_head)(L_list)}))}))(L_nil)}))(L_nil)}))}))(L_nil)}))}))(L_nil)}))}}))},
  function(){return resolve(L_define)(lazy("html"))(lazy(1))(lazy("html x = \\f . f x"))((function(){return setDataType(function(L_x){return setType(function(L_f){return resolve(L_f)(L_x)}, 'html')}, 'html')}))},
  function(){return resolve(L_define)(lazy("iszero"))(lazy(0))(lazy("iszero = eq 0"))((function(){return resolve(L_eq)(lazy(0))}))},
  function(){return resolve(L_define)(lazy("positive"))(lazy(0))(lazy("positive = 0 <"))((function(){return resolve(L_$y)(lazy(0))}))},
  function(){return resolve(L_addToken)(lazy("--"))},
  function(){return resolve(L_addToken)(lazy("++"))},
  function(){return resolve(L_define)(lazy("--"))(lazy(0))(lazy("-- = (flip (-)) 1"))((function(){return resolve(L_flip)(L_$_)(lazy(1))}))},
  function(){return resolve(L_define)(lazy("++"))(lazy(0))(lazy("++ = (1 +)"))((function(){return resolve(L_$o)(lazy(1))}))},
  function(){return resolve(L_define)(lazy("intercalate"))(lazy(2))(lazy("intercalate x l = concat (intersperse x l)"))((function(){return function(L_x){return function(L_l){return resolve(L_concat)((function(){return resolve(L_intersperse)(L_x)(L_l)}))}}}))},
  function(){return resolve(L_define)(lazy("visit"))(lazy(2))(lazy("visit func l = \\\\\n  result = func func l\n  .\n  isCons result\n    result \\h t . cons (visit func h) (visit func t)\n    result"))((function(){return function(L_func){return function(L_l){return (function(){

var L_result;

L_result = (function(){return resolve(L_func)(L_func)(L_l)});
return resolve(L_isCons)(L_result)((function(){return resolve(L_result)((function(){return function(L_h){return function(L_t){return resolve(L_cons)((function(){return resolve(L_visit)(L_func)(L_h)}))((function(){return resolve(L_visit)(L_func)(L_t)}))}}}))}))(L_result)})()}}}))},
  function(){return resolve(L_define)(lazy("simplify"))(lazy(1))(lazy("simplify exprString = do\n  list <- scanLineM exprString\n  visit (\\func x . isToken x (tokenString x) ((isParens x) (visit func (parensContent x)) x)) list"))((function(){return function(L_exprString){return resolve(L_bind)((function(){return resolve(L_scanLineM)(L_exprString)}))((function(){return function(L_list){return resolve(L_visit)((function(){return function(L_func){return function(L_x){return resolve(L_isToken)(L_x)((function(){return resolve(L_tokenString)(L_x)}))((function(){return resolve(L_isParens)(L_x)((function(){return resolve(L_visit)(L_func)((function(){return resolve(L_parensContent)(L_x)}))}))(L_x)}))}}}))(L_list)}}))}}))},
  function(){return resolve(L_define)(lazy("doall"))(lazy(0))(lazy("doall = foldr1 (\\el res . bind el \\_ . res)"))((function(){return resolve(L_foldr1)((function(){return function(L_el){return function(L_res){return resolve(L_bind)(L_el)((function(){return function(L__){return resolve(L_res)}}))}}}))}))},
  function(){return resolve(L_define)(lazy("requireJS"))(lazy(1))(lazy("requireJS file = bind (getValue 'requiredFiles')\n  \\files . contains files file\n    false\n    bind (loadJS file)\n      \\result . result\n        \\x . left x\n        \\_ . bind (setValue 'requiredFiles' (cons file files))\n          \\_ . right true"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("requiredFiles"))}))((function(){return function(L_files){return resolve(L_contains)(L_files)(L_file)(L_false)((function(){return resolve(L_bind)((function(){return resolve(L_loadJS)(L_file)}))((function(){return function(L_result){return resolve(L_result)((function(){return function(L_x){return resolve(L_left)(L_x)}}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("requiredFiles"))((function(){return resolve(L_cons)(L_file)(L_files)}))}))((function(){return function(L___0){return resolve(L_right)(L_true)}}))}}))}}))}))}}))}}))},
  function(){return resolve(L_define)(lazy("loadJS"))(lazy(1))(lazy("loadJS file = bind (readFile file)\n  \\result . result\n    \\err . err\n    \\contents . js contents"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_readFile)(L_file)}))((function(){return function(L_result){return resolve(L_result)((function(){return function(L_err){return resolve(L_err)}}))((function(){return function(L_contents){return resolve(L_js)(L_contents)}}))}}))}}))},
  function(){return resolve(L_define)(lazy("findOption"))(lazy(2))(lazy("findOption func list = do\n  result = func (head list)\n  isNil list\n    none\n    isNone result\n      findOption func (tail list)\n      result"))((function(){return function(L_func){return function(L_list){return (function(){

var L_result;

L_result = (function(){return resolve(L_func)((function(){return resolve(L_head)(L_list)}))});
return resolve(L_isNil)(L_list)(L_none)((function(){return resolve(L_isNone)(L_result)((function(){return resolve(L_findOption)(L_func)((function(){return resolve(L_tail)(L_list)}))}))(L_result)}))})()}}}))},
  function(){return resolve(L_define)(lazy("dlempty"))(lazy(0))(lazy("dlempty = id"))(L_id)},
  function(){return resolve(L_define)(lazy("dl"))(lazy(1))(lazy("dl item = \\rest . item:rest"))((function(){return setDataType(function(L_item){return setType(function(L_rest){return resolve(L_cons)(L_item)(L_rest)}, 'dl')}, 'dl')}))},
  function(){return resolve(L_define)(lazy("dlPush"))(lazy(2))(lazy("dlPush list item = dlAppend list (dl item)"))((function(){return function(L_list){return function(L_item){return resolve(L_dlAppend)(L_list)((function(){return resolve(L_dl)(L_item)}))}}}))},
  function(){return resolve(L_define)(lazy("dlAppend"))(lazy(2))(lazy("dlAppend a b = \\rest . a (b rest)"))((function(){return setDataType(function(L_a){return function(L_b){return setType(function(L_rest){return resolve(L_a)((function(){return resolve(L_b)(L_rest)}))}, 'dlAppend')}}, 'dlAppend')}))},
  function(){return resolve(L_define)(lazy("remove"))(lazy(2))(lazy("remove x l = removeIf (eq x) l"))((function(){return function(L_x){return function(L_l){return resolve(L_removeIf)((function(){return resolve(L_eq)(L_x)}))(L_l)}}}))},
  function(){return resolve(L_define)(lazy("removeIf"))(lazy(2))(lazy("removeIf f l = filter (compose not f) l"))((function(){return function(L_f){return function(L_l){return resolve(L_filter)((function(){return resolve(L_compose)(L_not)(L_f)}))(L_l)}}}))},
  function(){return resolve(L_define)(lazy("any"))(lazy(2))(lazy("any f l = find f l (\\el . true) false"))((function(){return function(L_f){return function(L_l){return resolve(L_find)(L_f)(L_l)((function(){return function(L_el){return resolve(L_true)}}))(L_false)}}}))},
  function(){return resolve(L_define)(lazy("all"))(lazy(2))(lazy("all f l = not any (compose not f) l"))((function(){return function(L_f){return function(L_l){return resolve(L_not)(L_any)((function(){return resolve(L_compose)(L_not)(L_f)}))(L_l)}}}))},
  function(){return resolve(L_define)(lazy("take"))(lazy(2))(lazy("take n list = positive n\n  list\n    \\h t D . cons h (take (-- n) t)\n    nil\n  nil"))((function(){return function(L_n){return function(L_list){return resolve(L_positive)(L_n)((function(){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_cons)(L_h)((function(){return resolve(L_take)((function(){return resolve(L_$_$_)(L_n)}))(L_t)}))}}}}))(L_nil)}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("takeWhile"))(lazy(2))(lazy("takeWhile predicate list = list\n  \\h t D . predicate (head list)\n    cons h (takeWhile predicate t)\n    nil\n  nil"))((function(){return function(L_predicate){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_predicate)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_takeWhile)(L_predicate)(L_t)}))}))(L_nil)}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("drop"))(lazy(2))(lazy("drop x list = positive x\n  list\n    \\h t D . drop (-- x) t\n    nil\n  list"))((function(){return function(L_x){return function(L_list){return resolve(L_positive)(L_x)((function(){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_drop)((function(){return resolve(L_$_$_)(L_x)}))(L_t)}}}}))(L_nil)}))(L_list)}}}))},
  function(){return resolve(L_define)(lazy("dropWhile"))(lazy(2))(lazy("dropWhile predicate list = list\n  \\h t D . predicate h\n    dropWhile predicate t\n    list\n  nil"))((function(){return function(L_predicate){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_predicate)(L_h)((function(){return resolve(L_dropWhile)(L_predicate)(L_t)}))(L_list)}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("dropLast"))(lazy(2))(lazy("dropLast n list = reverse (drop n (reverse list))"))((function(){return function(L_n){return function(L_list){return resolve(L_reverse)((function(){return resolve(L_drop)(L_n)((function(){return resolve(L_reverse)(L_list)}))}))}}}))},
  function(){return resolve(L_define)(lazy("box"))(lazy(2))(lazy("box n list = list == nil\n  nil\n  [(take n list) | box n (drop n list)]"))((function(){return function(L_n){return function(L_list){return resolve(L_$p$p)(L_list)(L_nil)(L_nil)((function(){return resolve(L_cons)((function(){return resolve(L_take)(L_n)(L_list)}))((function(){return resolve(L_box)(L_n)((function(){return resolve(L_drop)(L_n)(L_list)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("at"))(lazy(2))(lazy("at l x = (x == 0) (head l) (at (tail l) (-- (x) ) )"))((function(){return function(L_l){return function(L_x){return resolve(L_$p$p)(L_x)(lazy(0))((function(){return resolve(L_head)(L_l)}))((function(){return resolve(L_at)((function(){return resolve(L_tail)(L_l)}))((function(){return resolve(L_$_$_)(L_x)}))}))}}}))},
  function(){return resolve(L_define)(lazy("series"))(lazy(2))(lazy("series func n = n:(series func (func n))"))((function(){return function(L_func){return function(L_n){return resolve(L_cons)(L_n)((function(){return resolve(L_series)(L_func)((function(){return resolve(L_func)(L_n)}))}))}}}))},
  function(){return resolve(L_define)(lazy("from"))(lazy(1))(lazy("from n = series ++ n"))((function(){return function(L_n){return resolve(L_series)(L_$o$o)(L_n)}}))},
  function(){return resolve(L_define)(lazy("fromBy"))(lazy(2))(lazy("fromBy n inc = series ((+) inc) n"))((function(){return function(L_n){return function(L_inc){return resolve(L_series)((function(){return resolve(L_$o)(L_inc)}))(L_n)}}}))},
  function(){return resolve(L_define)(lazy("fromTo"))(lazy(2))(lazy("fromTo n m = takeWhile ((>) m) (from n)"))((function(){return function(L_n){return function(L_m){return resolve(L_takeWhile)((function(){return resolve(L_$z)(L_m)}))((function(){return resolve(L_from)(L_n)}))}}}))},
  function(){return resolve(L_define)(lazy("fromToBy"))(lazy(3))(lazy("fromToBy n m inc = takeWhile ((>) m) (fromBy n inc)"))((function(){return function(L_n){return function(L_m){return function(L_inc){return resolve(L_takeWhile)((function(){return resolve(L_$z)(L_m)}))((function(){return resolve(L_fromBy)(L_n)(L_inc)}))}}}}))},
  function(){return resolve(L_define)(lazy("count"))(lazy(2))(lazy("count x l = countIf (eq x) l"))((function(){return function(L_x){return function(L_l){return resolve(L_countIf)((function(){return resolve(L_eq)(L_x)}))(L_l)}}}))},
  function(){return resolve(L_define)(lazy("countIf"))(lazy(2))(lazy("countIf f l = (eq l nil) 0\n  + (f (head l) 1 0) (countIf f (tail l))"))((function(){return function(L_f){return function(L_l){return resolve(L_eq)(L_l)(L_nil)(lazy(0))((function(){return resolve(L_$o)((function(){return resolve(L_f)((function(){return resolve(L_head)(L_l)}))(lazy(1))(lazy(0))}))((function(){return resolve(L_countIf)(L_f)((function(){return resolve(L_tail)(L_l)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("countIfNot"))(lazy(2))(lazy("countIfNot f l = countIf (\\x. not (f x)) l"))((function(){return function(L_f){return function(L_l){return resolve(L_countIf)((function(){return function(L_x){return resolve(L_not)((function(){return resolve(L_f)(L_x)}))}}))(L_l)}}}))},
  function(){return resolve(L_define)(lazy("odds"))(lazy(1))(lazy("odds l = l\n  \\h t D . [h | evens t]\n  nil"))((function(){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_cons)(L_h)((function(){return resolve(L_evens)(L_t)}))}}}}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("evens"))(lazy(1))(lazy("evens l = l\n  \\h t D . odds t\n  nil"))((function(){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_odds)(L_t)}}}}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("cleave"))(lazy(1))(lazy("cleave l = [(evens l) | (odds l)]"))((function(){return function(L_l){return resolve(L_cons)((function(){return resolve(L_evens)(L_l)}))((function(){return resolve(L_odds)(L_l)}))}}))},
  function(){return resolve(L_define)(lazy("merge"))(lazy(3))(lazy("merge cmp a b = a\n  \\ah at D . b\n    \\bh bt D . cmp ah bh\n      [ah | (merge cmp at b)]\n      [bh | (merge cmp a bt)]\n    a\n  b"))((function(){return function(L_cmp){return function(L_a){return function(L_b){return resolve(L_a)((function(){return function(L_ah){return function(L_at){return function(L_D){return resolve(L_b)((function(){return function(L_bh){return function(L_bt){return function(L_D_0){return resolve(L_cmp)(L_ah)(L_bh)((function(){return resolve(L_cons)(L_ah)((function(){return resolve(L_merge)(L_cmp)(L_at)(L_b)}))}))((function(){return resolve(L_cons)(L_bh)((function(){return resolve(L_merge)(L_cmp)(L_a)(L_bt)}))}))}}}}))(L_a)}}}}))(L_b)}}}}))},
  function(){return resolve(L_define)(lazy("mergeSort"))(lazy(2))(lazy("mergeSort cmp l = l\n  \\h t D . eq (tail l) nil\n    l\n    do\n      cl = cleave l\n      e = head cl\n      o = tail cl\n      merge cmp (mergeSort cmp e) (mergeSort cmp o)\n  nil"))((function(){return function(L_cmp){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_eq)((function(){return resolve(L_tail)(L_l)}))(L_nil)(L_l)(function(){
var L_o, L_e, L_cl;

L_o = (function(){return resolve(L_tail)(L_cl)});

L_e = (function(){return resolve(L_head)(L_cl)});

L_cl = (function(){return resolve(L_cleave)(L_l)});
return resolve(L_merge)(L_cmp)((function(){return resolve(L_mergeSort)(L_cmp)(L_e)}))((function(){return resolve(L_mergeSort)(L_cmp)(L_o)}))})}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("sort"))(lazy(1))(lazy("sort l = sortBy (<=) l"))((function(){return function(L_l){return resolve(L_sortBy)(L_$y$p)(L_l)}}))},
  function(){return resolve(L_define)(lazy("sortBy"))(lazy(2))(lazy("sortBy cmp l = mergeSort cmp l"))((function(){return function(L_cmp){return function(L_l){return resolve(L_mergeSort)(L_cmp)(L_l)}}}))},
  function(){return resolve(L_addToken)(lazy("->"))},
  function(){return resolve(L_define)(lazy("mkStr"))(lazy(1))(lazy("mkStr tok = concat['\"' (tokenString tok) '\"']"))((function(){return function(L_tok){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("\""))((function(){return resolve(L_cons)((function(){return resolve(L_tokenString)(L_tok)}))((function(){return resolve(L_cons)(lazy("\""))(L_nil)}))}))}))}}))},
  function(){return resolve(L_defMacro)(lazy("defCase"))((function(){return function(L_list){return (function(){

var L_t3, L_h3, L_t2, L_h2, L_t1, L_h1;

L_t3 = (function(){return resolve(L_tail)(L_t2)});

L_h3 = (function(){return resolve(L_head)(L_t2)});

L_t2 = (function(){return resolve(L_tail)(L_t1)});

L_h2 = (function(){return resolve(L_head)(L_t1)});

L_t1 = (function(){return resolve(L_tail)(L_list)});

L_h1 = (function(){return resolve(L_head)(L_list)});
return resolve(L_and)((function(){return resolve(L_isCons)(L_list)}))((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_t1)}))((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_t2)}))((function(){return resolve(L_and)((function(){return resolve(L_isTokenString)(L_h2)(lazy("."))}))(L_true)}))}))}))((function(){return resolve(L_makeCaseArgs)(L_list)((function(){return resolve(L_mkStr)(L_h1)}))((function(){return resolve(L_mkStr)(L_h3)}))(L_t3)(L_id)}))((function(){return resolve(L_parseErr)(lazy("Error in case definition -- expected func.name args | condition -> action, but got "))(L_list)}))})()}}))},
  function(){return resolve(L_define)(lazy("makeCaseArgs"))(lazy(5))(lazy("makeCaseArgs orig funcName altName rest args = rest\n  \\h t D . isTokenString h '|'\n    makeCaseCondition orig funcName altName (args nil) t id\n    makeCaseArgs orig funcName altName t (dlPush args h)\n  parseErr \"Error in case definition -- expected func.name args | condition -> action, but got \" orig"))((function(){return function(L_orig){return function(L_funcName){return function(L_altName){return function(L_rest){return function(L_args){return resolve(L_rest)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){return resolve(L_makeCaseCondition)(L_orig)(L_funcName)(L_altName)((function(){return resolve(L_args)(L_nil)}))(L_t)(L_id)}))((function(){return resolve(L_makeCaseArgs)(L_orig)(L_funcName)(L_altName)(L_t)((function(){return resolve(L_dlPush)(L_args)(L_h)}))}))}}}}))((function(){return resolve(L_parseErr)(lazy("Error in case definition -- expected func.name args | condition -> action, but got "))(L_orig)}))}}}}}}))},
  function(){return resolve(L_define)(lazy("makeCaseCondition"))(lazy(6))(lazy("makeCaseCondition orig funcName altName args rest cond = rest\n  \\h t D . isTokenString h '->'\n    foldr1 append [['altDef' funcName altName (length args) '\\\\'] args ['.' (cond nil) ['some' t] 'none']]\n    makeCaseCondition orig funcName altName args t (dlPush cond h)\n parseErr \"Error in case definition -- expected func.name args | condition -> action, but got \" orig"))((function(){return function(L_orig){return function(L_funcName){return function(L_altName){return function(L_args){return function(L_rest){return function(L_cond){return resolve(L_rest)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("->"))((function(){return resolve(L_foldr1)(L_append)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("altDef"))((function(){return resolve(L_cons)(L_funcName)((function(){return resolve(L_cons)(L_altName)((function(){return resolve(L_cons)((function(){return resolve(L_length)(L_args)}))((function(){return resolve(L_cons)(lazy("\\"))(L_nil)}))}))}))}))}))((function(){return resolve(L_cons)(L_args)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("."))((function(){return resolve(L_cons)((function(){return resolve(L_cond)(L_nil)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("some"))((function(){return resolve(L_cons)(L_t)(L_nil)}))}))((function(){return resolve(L_cons)(lazy("none"))(L_nil)}))}))}))}))(L_nil)}))}))}))}))((function(){return resolve(L_makeCaseCondition)(L_orig)(L_funcName)(L_altName)(L_args)(L_t)((function(){return resolve(L_dlPush)(L_cond)(L_h)}))}))}}}}))((function(){return resolve(L_parseErr)(lazy("Error in case definition -- expected func.name args | condition -> action, but got "))(L_orig)}))}}}}}}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("some"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_some)((function(){return resolve(L_some)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Some("))((function(){return resolve(L_cons)((function(){return resolve(L_obj)(L_id)(L_false)}))((function(){return resolve(L_cons)(lazy(")"))(L_nil)}))}))}))}))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("some2"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_some2)((function(){return resolve(L_some)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Some2("))((function(){return resolve(L_cons)((function(){return resolve(L_obj)((function(){return function(L_a){return function(L_b){return resolve(L_cons)(L_a)((function(){return resolve(L_cons)(lazy(", "))((function(){return resolve(L_cons)(L_b)(L_nil)}))}))}}}))(L_false)}))((function(){return resolve(L_cons)(lazy(")"))(L_nil)}))}))}))}))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("none"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_none)((function(){return resolve(L_some)(lazy("None"))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("left"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_left)((function(){return resolve(L_some)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Left("))((function(){return resolve(L_cons)((function(){return resolve(L_obj)(L_id)(L_id)}))((function(){return resolve(L_cons)(lazy(")"))(L_nil)}))}))}))}))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("right"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_right)((function(){return resolve(L_some)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Right("))((function(){return resolve(L_cons)((function(){return resolve(L_obj)(L_id)(L_id)}))((function(){return resolve(L_cons)(lazy(")"))(L_nil)}))}))}))}))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("nil"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_nil)((function(){return resolve(L_some)(lazy("nil"))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("assoc"))(lazy(1))((function(){return function(L_obj){return resolve(L_isAlist)(L_obj)((function(){return resolve(L_some)((function(){return resolve(L_strCat)((function(){return resolve(L_flatten)((function(){return resolve(L_cons)(lazy("{"))((function(){return resolve(L_cons)((function(){return resolve(L_intersperse)((function(){return resolve(L_map)((function(){return function(L_item){return resolve(L_cons)((function(){return resolve(L_show)((function(){return resolve(L_head)(L_item)}))}))((function(){return resolve(L_cons)(lazy(":"))((function(){return resolve(L_cons)((function(){return resolve(L_show)((function(){return resolve(L_tail)(L_item)}))}))(L_nil)}))}))}}))(L_obj)}))(lazy(" "))}))((function(){return resolve(L_cons)(lazy("}"))(L_nil)}))}))}))}))}))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("hamt"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_hamt)((function(){return resolve(L_some)((function(){return resolve(L_strCat)((function(){return resolve(L_flatten)((function(){return resolve(L_cons)(lazy("hamt{"))((function(){return resolve(L_cons)((function(){return resolve(L_intersperse)((function(){return resolve(L_map)((function(){return function(L_item){return resolve(L_cons)((function(){return resolve(L_show)((function(){return resolve(L_head)(L_item)}))}))((function(){return resolve(L_cons)(lazy(":"))((function(){return resolve(L_cons)((function(){return resolve(L_show)((function(){return resolve(L_tail)(L_item)}))}))(L_nil)}))}))}}))((function(){return resolve(L_hamtPairs)(L_obj)}))}))(lazy(" "))}))((function(){return resolve(L_cons)(lazy("}"))(L_nil)}))}))}))}))}))}))(L_none)}}))},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("cons"))(lazy(1))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_cons)((function(){return resolve(L_some)((function(){return resolve(L_strCat)((function(){return resolve(L_flatten)((function(){return resolve(L_cons)(lazy("["))((function(){return resolve(L_cons)((function(){return resolve(L_show)((function(){return resolve(L_head)(L_obj)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_showConsElements)((function(){return resolve(L_tail)(L_obj)}))}))((function(){return resolve(L_cons)(lazy("]"))(L_nil)}))}))}))}))}))}))}))(L_none)}}))},
  function(){return resolve(L_define)(lazy("showConsElements"))(lazy(1))(lazy("showConsElements list = isCons list\n  [' ' (show (head list)) (showConsElements (tail list))]\n  isNil list\n    ''\n    [' | ' (show list)]"))((function(){return function(L_list){return resolve(L_isCons)(L_list)((function(){return resolve(L_cons)(lazy(" "))((function(){return resolve(L_cons)((function(){return resolve(L_show)((function(){return resolve(L_head)(L_list)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_showConsElements)((function(){return resolve(L_tail)(L_list)}))}))(L_nil)}))}))}))((function(){return resolve(L_isNil)(L_list)(lazy(""))((function(){return resolve(L_cons)(lazy(" | "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_list)}))(L_nil)}))}))}))}}))},
  function(){return resolve(L_altDef)(lazy("bind"))(lazy("option"))(lazy(2))((function(){return function(L_opt){return function(L_cont){return resolve(L_or)((function(){return resolve(L_hasType)(L_opt)(L_some)}))((function(){return resolve(L_hasType)(L_opt)(L_none)}))((function(){return resolve(L_some)((function(){return resolve(L_opt)((function(){return function(L_value){return resolve(L_cont)(L_value)}}))(L_none)}))}))(L_none)}}}))},
  function(){return resolve(L_altDef)(lazy("bind"))(lazy("either"))(lazy(2))((function(){return function(L_either){return function(L_cont){return resolve(L_or)((function(){return resolve(L_hasType)(L_either)(L_left)}))((function(){return resolve(L_hasType)(L_either)(L_right)}))((function(){return resolve(L_some)((function(){return resolve(L_either)((function(){return function(L__){return resolve(L_either)}}))((function(){return function(L_value){return resolve(L_cont)(L_value)}}))}))}))(L_none)}}}))},
  function(){return resolve(L_defMacro)(lazy("defWrapper"))((function(){return function(L_list){return resolve(L_grabLeftOfArrow)(L_list)(L_nil)((function(){return function(L_left){return function(L_right){return resolve(L_cons)(lazy("override"))((function(){return resolve(L_cons)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("'"))((function(){return resolve(L_cons)((function(){return resolve(L_strTokenString)((function(){return resolve(L_head)(L_left)}))}))((function(){return resolve(L_cons)(lazy("'"))(L_nil)}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_append)((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_tail)(L_left)}))}))((function(){return resolve(L_cons)(lazy("."))(L_right)}))}))(L_nil)}))}))}}}))}}))},
  function(){return resolve(L_define)(lazy("grabLeftOfArrow"))(lazy(3))(lazy("grabLeftOfArrow list left cont = isTokenString (head list) '->'\n  cont (reverse left) (tail list)\n  grabLeftOfArrow (tail list) (head list) : left cont"))((function(){return function(L_list){return function(L_left){return function(L_cont){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_list)}))(lazy("->"))((function(){return resolve(L_cont)((function(){return resolve(L_reverse)(L_left)}))((function(){return resolve(L_tail)(L_list)}))}))((function(){return resolve(L_grabLeftOfArrow)((function(){return resolve(L_tail)(L_list)}))((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_list)}))(L_left)}))(L_cont)}))}}}}))},
  function(){return resolve(L_override)(lazy("head"))((function(){return function(L_oldHead){return function(L_list){return resolve(L_assertType)(lazy("head argument"))(L_cons)(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_h)}}}))}}}))},
  function(){return resolve(L_override)(lazy("tail"))((function(){return function(L_oldTail){return function(L_list){return resolve(L_assertType)(lazy("tail argument"))(L_cons)(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_t)}}}))}}}))},
  function(){return resolve(L_override)(lazy("hamtWith"))((function(){return function(L_oldHamtWith){return function(L_key){return function(L_value){return function(L_hamt){return resolve(L_oldHamtWith)((function(){return resolve(L_assertType)(lazy("hamtWith key"))(lazy("*string"))(L_key)}))(L_value)(L_hamt)}}}}}))},
  function(){return resolve(L_define)(lazy("html"))(lazy(1))(lazy("html x = \\f . f x"))((function(){return setDataType(function(L_x){return setType(function(L_f){return resolve(L_f)(L_x)}, 'html')}, 'html')}))},
  function(){return resolve(L_defTokenPack)(lazy("util"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("->"))((function(){return resolve(L_cons)(lazy("--"))((function(){return resolve(L_cons)(lazy("++"))(L_nil)}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("js["))(lazy("]"))}))(L_nil)}))((function(){return resolve(L_cons)(L_nil)(L_nil)}))}))}))},
  function(){return resolve(L_addStdTokenPacks)((function(){return resolve(L_cons)(lazy("util"))(L_nil)}))}]);

},{}],12:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    if (canPost) {
        var queue = [];
        window.addEventListener('message', function (ev) {
            if (ev.source === window && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

process.binding = function (name) {
    throw new Error('process.binding is not supported');
}

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],13:[function(require,module,exports){
module.exports = function(str) {
  var hash = 5381,
      i    = str.length

  while(i)
    hash = (hash * 33) ^ str.charCodeAt(--i)

  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed
   * integers. Since we want the results to be always positive, if the high bit
   * is set, unset it and add it back in through (64-bit IEEE) addition. */
  return hash >= 0 ? hash : (hash & 0x7FFFFFFF) + 0x80000000
}

},{}],14:[function(require,module,exports){
//# Hashing functions

// Int, Int -> Int
// gets a <= 5 bit section of a hash, shifted from the left position
// in practice, a 32 bit splits into 7 chunks - 6 of 5 bits, one of 2
var mask = function(hash, from){ return (hash >>> from) & 0x01f }

// String, Int, Function -> Int
// gets a chunk of a hash, given a string and a hashing function
// the hashing function should return a 32 bit hash.
var hashMask = function(str, from, hash){
    return mask(hash(str), from)
}

module.exports = {
	hash: require('string-hash'),
	mask: hashMask
}

},{"string-hash":13}],15:[function(require,module,exports){
'use strict';

var util = require('./util')
var hash = require('./hash')
var lib = module.exports

//# persistent Hash Trie

// A Trie is a specialised version of a Tree, in which nodes can be found by navigating a 'path'.
// For instance, a dictionary Trie may start with a root node, have A-Z as the child nodes.
// Those child nodes may also be Tries (commonly referred to as sub-Tries).  Therefore, if
// you want to look up 'ANT', you can see if it's in the Trie by navigating to node A, then to
// node A's child node N, then to that node's child node T.  i.e. the path for ANT is A->N->T

// A Hash Trie forms its path by taking a hash of the string that is being looked up, and
// splitting that into parts:
// ANT = 01101101101110111010111011000011 = 01101->10110->11101->11010->11101->10000->11
// In this scheme, a 32-bit hash is taken, and split into path parts that are maximally
// 5 bits long.  Each Trie therefore has children from 00000-11111 (or 0-31 in decimal).

// Hash Tries allow us to store nodes at a shallow depth.  For instance, if there is only
// one member of the Trie whose key's first path part is 01101, then we can store the value
// directly as the root Trie's 01101 child node.  Why go deeper?  It just costs more to retrieve.

// It also allows us to keep the Trie fairly balanced; since a hash function should be
// have an even distribution of hashes, even if the inputs share common prefixes.
// If we used the first 2 letters of a word, for instance, we'd end up with lots of
// nodes in the 'un' and 'th' paths, and not many in the 'tx' path.

// An persistent Hash Trie is a Hash Trie in which any commonly updating actions - removing,
// setting or adding values - produce an entirely new Hash Trie, and *don't* affect the
// original in any way.  This means that the Hash Tries can be shared safely; without fear
// that updating them will result in a value changing in multiple places in a program.

// To make this distinction clearer, the verbs 'set' and 'remove/delete' have been replaced
// with assoc (associate a new value with an persistent Hash Trie), and dissoc (dissociate
// an existing value with an persistent Hash Trie).



// to allow hooks for other implementations/tests to override the default
// hash and equality functions (which are the necessary ones for creating
// hash-table-like behaviour, as the hash-trie has), they can be passed in
// as opts to assoc/dissoc/get/has.

// These defaults cover the ~80% use case of unordered string:val pairs.
var defaultOpts = {
    eq   : function(a, b){ return a === b },
    hash : hash.hash
}

//# Node Types

// Object -> Trie
// a Trie is a store of children values; the most basic type of non-leaf node.
var Trie = lib.Trie = function(children){
    return { type: 'trie', children: children || {} }
}

// String, JSValue -> Value
// Node that represents a specific value
var Value = lib.Value = function(key, value){
    return { type: 'value', key: key, value: value }
}

// { JSValue } -> Hashmap
// a Trie will have a max depth of 7 (6, if 0 indexed).  After that, additional
// values will just slung into a hashmap node
var Hashmap = lib.Hashmap = function(values){
    return { type: 'hashmap', values: values }
}


//# Basic manipulation functions - has/get/assoc/dissoc

// Object, String, JSValue -> Object

// creates a shallow clone of an object, adding or replacing a key:val pair
// with the one provided

// necessary for updating nodes in `assoc`
var copyAdd = function(obj, key, val){
    obj = util.clone(obj)
    obj[key] = val
    return obj
}


//  Node, String, JSValue, (Int) -> Trie

// assoc 'associates' a new value with a Trie.  It does so by finding the
// appropriate place for the new node, then creating a copy of the parent
// nodes, adding in a reference to the newly created child node each time.

// This is called path-copying, since the path from the root node to the new
// node is copied form one datastructure to the other.  Since the vast majority
// of data will lie in nodes beneathe these in sizable datastructures, this sharing
// of data allows for persistent values to be updated relatively effeciently at large
// size.

// The algorithm is also aware of 'specificity'; i.e. that a value need only be stored
// at a depth where it can be distinguished uniquely from other values by virtue of its
// path.  If both 'foo' and 'bar's first 5 bits are 011011, and both are present in the
// Trie, then they most be stored in a sub-Trie, and use the following 5 bits to differenciate
// themselves.  If the Trie gets deeper than there are bits in the hash (i.e. a total hash collision)
// then it simply stores the objects in a Hashmap node.
lib.assoc = function(node, key, val, opts){
    return assoc(node, key, val, opts || defaultOpts, 0)
}

var assoc = function(node, key, val, opts, depth){
    return assocFns[node.type](node, key, val, opts, depth)
}

var assocFns = {
    trie: function(node, key, val, opts, depth){
        var path = hash.mask(key, depth, opts.hash)
        var child = node.children[path]

        if ( child === undefined  ) return Trie(copyAdd(node.children, path, Value(key, val)))
        else                        return Trie(copyAdd(node.children, path, assoc(child, key, val, opts, depth + 1)))
    },
    value: function(node, key, val, opts, depth){
        var nodePath = hash.mask(node.key, depth, opts.hash)
        var keyPath  = hash.mask(key, depth, opts.hash)

        var makeHashmap = function(){
            var children = {}
            children[key] = Value(key, val)
            children[node.key] = node
            return Hashmap(children)
        }

        var resolveShallowConflict = function(){
            var children = {}
            children[nodePath] = node
            children[keyPath]  = Value(key, val)

            return Trie(children)
        }

        var resolveDeepConflict = function(){
            var children = {}
            children[keyPath] = assoc(node, key, val, opts, depth + 1)
            return Trie(children)
        }

        var makeTrie = function(){
            if ( nodePath !== keyPath ) return resolveShallowConflict()
            else                        return resolveDeepConflict()
        }

        if ( opts.eq(node.key, key) ) return Value(key, val)
        else if ( depth > 6 )         return makeHashmap()
        else                          return makeTrie()
    },
    hashmap: function(node, key, val, opts, depth){
        var v = copyAdd(node.values, key, Value(key, val))
        return Hashmap(v)
    }
}

// Object, String -> Object

// creates a new object, but without a key.
// Used in `dissoc`
var copyDissoc = function(obj, key){
    obj = util.clone(obj)
    delete obj[key]
    return obj
}


// Node, String, (Int) -> Trie

// dissoc (disassociate) returns a new Trie, but without a specified key

// As with assoc, it recurses down the Trie.  If it fails to find a key, then
// it returns the original Trie, since that is conceptually the same as removing
// a non-existant key from an object.

// If it finds a Value associated with a key, however, it will create
// a parent node to that Value that copies all *other* values, but omits
// the value with the key in question.  As with assoc, it will also produce a
// copy of *its* parent.  This occurs recursively, and is exactly the same concept
// as the 'path copying' technique used in assoc.

// If removing a value removes a hash collision, then the Trie node that contained
// those values can be replaced with just a Value node, which results in a shallower
// Trie.
lib.dissoc = function(node, key, opts){
    return dissoc(node, key, opts || defaultOpts, 0)
}

var dissoc = function(node, key, opts, depth){
    return dissocFns[node.type](node, key, opts, depth)
}

var dissocFns = {
    trie: function(node, key, opts, depth){
        var path = hash.mask(key, depth, opts.hash)
        var child = node.children[path]

        // handle the 'present key' cases.  If it's a Value, remove it.  If it's a sub-Trie or Hashmap
        // recurse to prevent other values from being lost
        var dissocKey = function(){
            if ( child.type === 'value' && opts.eq(child.key, key) )
                return Trie(copyDissoc(node.children, path))
            else
                return Trie(copyDissoc(node.children, path, dissoc(child, key, opts, depth + 1)))
        }

        // if there's only a single value in a Trie node left, then it can be replaced by its value,
        // allowing us to make the Trie more shallow, and therefore more effecient.
        var collapseTrie = function(trie){
            var names = util.keys(trie.children)
            var child = trie.children[names[0]]

            // don't collapse an empty root trie
            if ( depth === 0 )                                       return trie
            else if ( child === undefined )                          return trie
            else if ( names.length === 1 && child.type === 'value' ) return Value(child.key, child.value)
            else                                                     return trie
        }

        var handleTrie = function(){
            return collapseTrie(dissocKey(node))
        }

        // if there's no child, return the node
        if ( child === undefined )  return node;
        else                        return handleTrie();
    },
    value: function(){},
    hashmap: function(node, key, opts, depth){
        var ret = copyDissoc(node.values, key)
        var names = util.keys(ret)
        var child = ret[names[0]]

        if ( names.length === 1 ) return Value(child.key, child.value)
        else                      return Hashmap(ret)
    }
}


// Node, String, (Int), (Object)-> Bool

// Trie-equivalent of the 'in' operator.

// Has recurses down a node, using hash.mask to navigate a 'path' down branches.
// If a value node is found, if its key is equal to the key provided, then the
// Trie contains the key, and true is returned.

// Hashmaps store values in the outermost leaves when necessary.  If they contain
// a key, it also means that the key is in the trie,.
lib.has = function(trie, key, opts){
    return has(trie, key, opts || defaultOpts, 0)
}

var has = function(trie, key, opts, depth){
    return hasFns[trie.type](trie, key, opts, depth)
}

var hasFns = {
    trie: function(node, key, opts, depth){
        var child = node.children[hash.mask(key, depth, opts.hash)]
        if ( child === undefined )    return false
        else                          return has(child, key, opts, depth + 1)
    },
    value: function(node, key, opts){
        return opts.eq(node.key, key)
    },
    hashmap: function(node, key, opts){
        return key in node.values
    }
}

// Node, String, (Int), (Object) -> Value

// Trie-equivalent of dot or bracket syntax - retrieves a value assocaited with a key
// or undefined.

// get recurses down the Trie, similarly to has.  If it finds a matching key, instead
// of returning true or false, however, it unpacks the value associated with the key
// and returns that instead.
lib.get = function(trie, key, opts){
    return get(trie, key, opts || defaultOpts, 0)
}

var get = function(trie, key, opts, depth){
    return getFns[trie.type](trie, key, opts, depth)
}

var getFns = {
    trie: function(node, key, opts, depth){
        var child = node.children[hash.mask(key, depth, opts.hash)]
        if ( child === undefined )    return undefined
        else                          return get(child, key, opts, depth + 1)
    },
    value: function(node, key, opts, depth){
        if ( opts.eq(node.key, key) ) return node.value
    },
    hashmap: function(node, key, opts, depth){
        var value = node.values[key]
        return  value ? value.value : undefined

    }
}



// Node, (Any, Any, String), Any -> Any

// given a node, function and seed, reduce to produce results.
lib.reduce = function(node, callback, initial){
    var state = reduce(node, callback, initial)
    return state instanceof Break ? state.value : state
}

var reduce = function(node, callback, initial) {
    return reduceFns[node.type](node, callback, initial)
}

var reduceFns = {
    trie: function(node, callback, state) {
        for ( var path in node.children ) {
            if ( node.children.hasOwnProperty(path) ) {
                state = reduce(node.children[path], callback, state)
            }
            if (state instanceof Break) break
        }
        return state
    },
    value: function(node, callback, state){
        return callback(state, node.value, node.key)
    },
    hashmap: function(node, callback, state){
        for ( var key in node.values ) {
            if ( node.values.hasOwnProperty(key) ) {
                state = reduce(node.values[key], callback, state)
            }
            if (state instanceof Break) break
        }
        return state
    }
}


var Break = lib.reduce.Break = function(v) {
    if (!(this instanceof Break)) return new Break(v)
    this.value = v
}



// Node -> Object

// mutable returns a mutable version of a Trie.

// It achieves this by recursing down the Trie, finding all the Value nodes
// (whether stored in a Trie directly, or in a Hashmap node), and adding
// the values to a return value.

//  (yay abusing mutability in small pieces, but keeping the function
// pure from an API perspective)
lib.mutable = function(node){
    return lib.reduce(node, addKeyVal, {})
}

var addKeyVal = function(o, val, key){
    o[key] = val
    return o
}

// Node -> [String]

// keys returns the keys stored in the array, like Object.keys
lib.keys = function(node){
    return lib.reduce(node, addKey, [])
}

var addKey = function(arr, val, key){
    arr.push(key)
    return arr
}

},{"./hash":14,"./util":16}],16:[function(require,module,exports){
'use strict'

// Internal
var extend   = function(t, f) { for ( var p in f ) t[p] = f[p]; return t }
var clone    = function(o){ return extend({}, o) }
var slice    = function(a, f, n){ return [].slice.call(a, f, n) }

var mapObj = function(o, fn){
    var r = {}
    for ( var p in o ) r[p] = fn(o[p], p, o)
    return r
}

var map = function(arr, fn){
    var a = []
    for ( var i = 0, l = arr.length; i < l; i += 1 ) a.push(fn(arr[i], i, arr))
    return a
}

var reduce = function(arr, fn){
    var seed = arr[0]
    arr = arr.slice(1)
    for ( var i = 0, l = arr.length; i < l; i += 1) seed = fn(seed, arr[i])
    return seed
}

var pick = function(o){
    var names = slice(arguments, 1),
        r     = {}

    for ( var i = 0, l = names.length; i < l; i += 1 )
        r[names[i]] = o[names[i]]
    return r
}

// Object -> [String]

// get the keys of an object
var keys = Object.keys || function(o){
    var a = []
    for ( var key in o ) a.push(key)
    return a
}


module.exports = {
    extend    : extend,
    clone     : clone,
    slice     : slice,
    mapObj    : mapObj,
    pick      : pick,
    map       : map,
    reduce    : reduce,
    keys      : keys
}

},{}]},{},[3])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9hc3QuanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9iYXNlLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvYnJvd3Nlck1haW4uanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9nZW4uanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9nZW5lcmF0ZWRQcmVsdWRlLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvbG9kYXNoLm1pbi5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbGliL21hcmtlZC5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbGliL21kLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvbm90ZWJvb2suanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9ydW50aW1lLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvc3RkLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaW5zZXJ0LW1vZHVsZS1nbG9iYWxzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL25vZGVfbW9kdWxlcy9wZXJzaXN0ZW50LWhhc2gtdHJpZS9ub2RlX21vZHVsZXMvc3RyaW5nLWhhc2gvaW5kZXguanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL25vZGVfbW9kdWxlcy9wZXJzaXN0ZW50LWhhc2gtdHJpZS9zcmMvaGFzaC5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbm9kZV9tb2R1bGVzL3BlcnNpc3RlbnQtaGFzaC10cmllL3NyYy9wZXJzaXN0ZW50LWhhc2gtdHJpZS5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbm9kZV9tb2R1bGVzL3BlcnNpc3RlbnQtaGFzaC10cmllL3NyYy91dGlsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25nQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3h4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3R1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3R6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihnbG9iYWwpey8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbi8qXG5Db3B5cmlnaHQgKEMpIDIwMTIsIEJpbGwgQnVyZGljaywgVGlueSBDb25jZXB0czogaHR0cHM6Ly9naXRodWIuY29tL3pvdC9MZWlzdXJlXG5cbihsaWNlbnNlZCB3aXRoIFpMSUIgbGljZW5zZSlcblxuVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbndhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cblxuUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG5pbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG5mcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG5cbjEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG5jbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG5hcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuXG4yLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxubWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuXG4zLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBMX2Fubm8sIExfYXBwbHksIExfbGFtYmRhLCBMX2xldCwgTF9saXQsIExfcmVmLCBMZWlzdXJlT2JqZWN0LCBMZWlzdXJlX0Jhc2VDb25zLCBMZWlzdXJlX2NvbnMsIExlaXN1cmVfbmlsLCBOaWwsIGFubm8sIGFwcGx5LCBhc3QySnNvbiwgYXN0Mkpzb25FbmNvZGluZ3MsIGFzdFN0cmluZywgY2hhckNvZGVzLCBjaGVja1R5cGUsIGNvbnMsIGNvbnNFcSwgY29uc0Zyb20sIGRlZmluZSwgZW5zdXJlTGVpc3VyZUNsYXNzLCBldmFsRnVuYywgZm9sZExlZnQsIGZ1bmN0aW9uSW5mbywgZ2V0QW5ub0JvZHksIGdldEFubm9EYXRhLCBnZXRBbm5vTmFtZSwgZ2V0QXBwbHlBcmcsIGdldEFwcGx5RnVuYywgZ2V0RGF0YVR5cGUsIGdldExhbWJkYUJvZHksIGdldExhbWJkYVZhciwgZ2V0TGV0Qm9keSwgZ2V0TGV0TmFtZSwgZ2V0TGV0VmFsdWUsIGdldExpdFZhbCwgZ2V0UmVmTmFtZSwgZ2V0VHlwZSwgaGVhZCwganNUeXBlLCBqc29uMkFzdCwganNvbjJBc3RFbmNvZGluZ3MsIGxhbWJkYSwgbGF6eSwgbGVpc3VyZUFkZEZ1bmMsIGxldFN0ciwgbGl0LCBsbGV0LCBseiwgbWFrZVN1cGVyLCBta1Byb3RvLCBuYW1lRnVuYywgbmFtZVN1YiwgcHJpbUNvbnMsIHByaW1Gb2xkTGVmdCwgcmVmLCByZXNvbHZlLCByb290LCByeiwgc2F2ZSwgc2V0RGF0YVR5cGUsIHNldFR5cGUsIHN1cGVydHlwZXMsIHRhaWwsIHRocm93RXJyb3IsIF8sIF9yZWYsIF9yZWYxLCBfcmVmMiwgX3JlZjMsXG4gICAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbiAgX3JlZiA9IHJvb3QgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vYmFzZScpLCByZXNvbHZlID0gX3JlZi5yZXNvbHZlLCBsYXp5ID0gX3JlZi5sYXp5O1xuXG4gIF8gPSByZXF1aXJlKCcuL2xvZGFzaC5taW4nKTtcblxuICByeiA9IHJlc29sdmU7XG5cbiAgbHogPSBsYXp5O1xuXG4gIGNoYXJDb2RlcyA9IHtcbiAgICBcIidcIjogJyRhJyxcbiAgICAnLCc6ICckYicsXG4gICAgJyQnOiAnJCQnLFxuICAgICdAJzogJyRkJyxcbiAgICAnPyc6ICckZScsXG4gICAgJy8nOiAnJGYnLFxuICAgICcqJzogJyRnJyxcbiAgICAnJic6ICckaCcsXG4gICAgJ14nOiAnJGknLFxuICAgICchJzogJyRrJyxcbiAgICAnYCc6ICckbCcsXG4gICAgJ34nOiAnJG0nLFxuICAgICctJzogJyRfJyxcbiAgICAnKyc6ICckbycsXG4gICAgJz0nOiAnJHAnLFxuICAgICd8JzogJyRxJyxcbiAgICAnWyc6ICckcicsXG4gICAgJ10nOiAnJHMnLFxuICAgICd7JzogJyR0JyxcbiAgICAnfSc6ICckdScsXG4gICAgJ1wiJzogJyR2JyxcbiAgICAnOic6ICckdycsXG4gICAgJzsnOiAnJHgnLFxuICAgICc8JzogJyR5JyxcbiAgICAnPic6ICckeicsXG4gICAgJyUnOiAnJEEnLFxuICAgICcuJzogJyRCJ1xuICB9O1xuXG4gIG5hbWVTdWIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGNvZGUsIGksIHMsIF9pLCBfcmVmMTtcblxuICAgIHMgPSAnJztcbiAgICBmb3IgKGkgPSBfaSA9IDAsIF9yZWYxID0gbmFtZS5sZW5ndGg7IDAgPD0gX3JlZjEgPyBfaSA8IF9yZWYxIDogX2kgPiBfcmVmMTsgaSA9IDAgPD0gX3JlZjEgPyArK19pIDogLS1faSkge1xuICAgICAgY29kZSA9IGNoYXJDb2Rlc1tuYW1lW2ldXTtcbiAgICAgIHMgKz0gY29kZSAhPSBudWxsID8gY29kZSA6IG5hbWVbaV07XG4gICAgfVxuICAgIHJldHVybiBzO1xuICB9O1xuXG4gIHNldERhdGFUeXBlID0gZnVuY3Rpb24oZnVuYywgZGF0YVR5cGUpIHtcbiAgICBpZiAoZGF0YVR5cGUpIHtcbiAgICAgIGZ1bmMuZGF0YVR5cGUgPSBkYXRhVHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH07XG5cbiAgc2V0VHlwZSA9IGZ1bmN0aW9uKGZ1bmMsIHR5cGUpIHtcbiAgICBpZiAodHlwZSkge1xuICAgICAgZnVuYy50eXBlID0gdHlwZTtcbiAgICB9XG4gICAgZnVuYy5fX3Byb3RvX18gPSAoZW5zdXJlTGVpc3VyZUNsYXNzKHR5cGUpKS5wcm90b3R5cGU7XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH07XG5cbiAgTGVpc3VyZU9iamVjdCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBMZWlzdXJlT2JqZWN0KCkge31cblxuICAgIHJldHVybiBMZWlzdXJlT2JqZWN0O1xuXG4gIH0pKCk7XG5cbiAgTGVpc3VyZU9iamVjdC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ0xlaXN1cmVPYmplY3QnO1xuXG4gIGdsb2JhbC5MZWlzdXJlX09iamVjdCA9IExlaXN1cmVPYmplY3Q7XG5cbiAgc3VwZXJ0eXBlcyA9IHt9O1xuXG4gIHJvb3QubGVpc3VyZUNsYXNzQ2hhbmdlID0gMDtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MgPSBmdW5jdGlvbihsZWlzdXJlQ2xhc3MpIHtcbiAgICB2YXIgY2w7XG5cbiAgICBjbCA9IFwiTGVpc3VyZV9cIiArIChuYW1lU3ViKGxlaXN1cmVDbGFzcykpO1xuICAgIGlmIChnbG9iYWxbY2xdID09IG51bGwpIHtcbiAgICAgIGdsb2JhbFtjbF0gPSBldmFsKFwiKGZ1bmN0aW9uIFwiICsgY2wgKyBcIigpe30pXCIpO1xuICAgICAgc3VwZXJ0eXBlc1tjbF0gPSAnTGVpc3VyZV9PYmplY3QnO1xuICAgICAgcm9vdC5sZWlzdXJlQ2xhc3NDaGFuZ2UrKztcbiAgICB9XG4gICAgcmV0dXJuIGdsb2JhbFtjbF07XG4gIH07XG5cbiAgbWFrZVN1cGVyID0gZnVuY3Rpb24odHlwZSwgc3VwZXJ0eXBlKSB7XG4gICAgc3VwZXJ0eXBlc1tcIkxlaXN1cmVfXCIgKyAobmFtZVN1Yih0eXBlKSldID0gXCJMZWlzdXJlX1wiICsgKG5hbWVTdWIoc3VwZXJ0eXBlKSk7XG4gICAgcmV0dXJuIHJvb3QubGVpc3VyZUNsYXNzQ2hhbmdlKys7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdjb25zJyk7XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCduaWwnKTtcblxuICBzdXBlcnR5cGVzLkxlaXN1cmVfY29ucyA9ICdMZWlzdXJlX09iamVjdCc7XG5cbiAgc3VwZXJ0eXBlcy5MZWlzdXJlX25pbCA9ICdMZWlzdXJlX09iamVjdCc7XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdhc3QnKTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2xpdCcpO1xuXG4gIExlaXN1cmVfbGl0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcImxpdChcIiArIChnZXRMaXRWYWwodGhpcykpICsgXCIpXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdyZWYnKTtcblxuICBMZWlzdXJlX3JlZi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJyZWYoXCIgKyAoZ2V0UmVmTmFtZSh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2xhbWJkYScpO1xuXG4gIExlaXN1cmVfbGFtYmRhLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcImxhbWJkYShcIiArIChhc3RTdHJpbmcodGhpcykpICsgXCIpXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdhcHBseScpO1xuXG4gIExlaXN1cmVfYXBwbHkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiYXBwbHkoXCIgKyAoYXN0U3RyaW5nKHRoaXMpKSArIFwiKVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnbGV0Jyk7XG5cbiAgTGVpc3VyZV9sZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwibGV0KFwiICsgKGFzdFN0cmluZyh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2Fubm8nKTtcblxuICBMZWlzdXJlX2Fubm8ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiYW5ubyhcIiArIChhc3RTdHJpbmcodGhpcykpICsgXCIpXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdkb2MnKTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3NyY0xvY2F0aW9uJyk7XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdwYXR0ZXJuJyk7XG5cbiAgbWFrZVN1cGVyKCdsaXQnLCAnYXN0Jyk7XG5cbiAgbWFrZVN1cGVyKCdyZWYnLCAnYXN0Jyk7XG5cbiAgbWFrZVN1cGVyKCdsYW1iZGEnLCAnYXN0Jyk7XG5cbiAgbWFrZVN1cGVyKCdhcHBseScsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ2xldCcsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ2Fubm8nLCAnYXN0Jyk7XG5cbiAgYXN0U3RyaW5nID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIGFyZ1N0ciwgZnVuY1N0ciwgX3JlZjE7XG5cbiAgICBzd2l0Y2ggKGdldFR5cGUoYXN0KSkge1xuICAgICAgY2FzZSAnbGl0JzpcbiAgICAgICAgcmV0dXJuIGdldExpdFZhbChhc3QpO1xuICAgICAgY2FzZSAncmVmJzpcbiAgICAgICAgcmV0dXJuIGdldFJlZk5hbWUoYXN0KTtcbiAgICAgIGNhc2UgJ2FwcGx5JzpcbiAgICAgICAgZnVuY1N0ciA9IGFzdFN0cmluZyhnZXRBcHBseUZ1bmMoYXN0KSk7XG4gICAgICAgIGlmICgoX3JlZjEgPSBnZXRUeXBlKGdldEFwcGx5RnVuYyhhc3QpKSkgPT09ICdsYW1iZGEnIHx8IF9yZWYxID09PSAnbGV0Jykge1xuICAgICAgICAgIGZ1bmNTdHIgPSBcIihcIiArIGZ1bmNTdHIgKyBcIilcIjtcbiAgICAgICAgfVxuICAgICAgICBhcmdTdHIgPSBhc3RTdHJpbmcoZ2V0QXBwbHlBcmcoYXN0KSk7XG4gICAgICAgIGlmIChnZXRUeXBlKGdldEFwcGx5QXJnKGFzdCkpID09PSAnYXBwbHknKSB7XG4gICAgICAgICAgYXJnU3RyID0gXCIoXCIgKyBhcmdTdHIgKyBcIilcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIiArIGZ1bmNTdHIgKyBcIiBcIiArIGFyZ1N0cjtcbiAgICAgIGNhc2UgJ2xhbWJkYSc6XG4gICAgICAgIHJldHVybiBcIlxcXFxcIiArIChnZXRMYW1iZGFWYXIoYXN0KSkgKyBcIiAuIFwiICsgKGFzdFN0cmluZyhnZXRMYW1iZGFCb2R5KGFzdCkpKTtcbiAgICAgIGNhc2UgJ2xldCc6XG4gICAgICAgIHJldHVybiBcIlxcXFxcXFxcXCIgKyAobGV0U3RyKGFzdCkpO1xuICAgICAgY2FzZSAnYW5ubyc6XG4gICAgICAgIHJldHVybiBcIlxcXFxAXCIgKyAoZ2V0QW5ub05hbWUoYXN0KSkgKyBcIiBcIiArIChnZXRBbm5vRGF0YShhc3QpKSArIFwiIC4gXCIgKyAoYXN0U3RyaW5nKGdldEFubm9Cb2R5KGFzdCkpKTtcbiAgICB9XG4gIH07XG5cbiAgbGV0U3RyID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIGJpbmRpbmcsIGJvZHk7XG5cbiAgICBib2R5ID0gZ2V0TGV0Qm9keShhc3QpO1xuICAgIGJpbmRpbmcgPSBcIihcIiArIChnZXRMZXROYW1lKGFzdCkpICsgXCIgPSBcIiArIChhc3RTdHJpbmcoZ2V0TGV0VmFsdWUoYXN0KSkpICsgXCIpXCI7XG4gICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBMZWlzdXJlX2xldCkge1xuICAgICAgcmV0dXJuIFwiXCIgKyBiaW5kaW5nICsgXCIgXCIgKyAobGV0U3RyKGJvZHkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiXCIgKyBiaW5kaW5nICsgXCIgLiBcIiArIChhc3RTdHJpbmcoYm9keSkpO1xuICAgIH1cbiAgfTtcblxuICBMZWlzdXJlX0Jhc2VDb25zID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMZWlzdXJlX0Jhc2VDb25zLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gTGVpc3VyZV9CYXNlQ29ucygpIHtcbiAgICAgIF9yZWYxID0gTGVpc3VyZV9CYXNlQ29ucy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBfcmVmMTtcbiAgICB9XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5oZWFkID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgSW1wbGVtZW50ZWRcIik7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnRhaWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBJbXBsZW1lbnRlZFwiKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuaXNOaWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIGlmIChmdW5jKHRoaXMuaGVhZCgpKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy50YWlsKCkuZmluZChmdW5jKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgdmFyIHQ7XG5cbiAgICAgIHQgPSB0aGlzLnRhaWwoKS5yZW1vdmVBbGwoZnVuYyk7XG4gICAgICBpZiAoZnVuYyh0aGlzLmhlYWQoKSkpIHtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICB9IGVsc2UgaWYgKHQgPT09IHRoaXMudGFpbCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnModGhpcy5oZWFkKCksIHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gY29ucyhmdW5jKHRoaXMuaGVhZCgpKSwgdGhpcy50YWlsKCkubWFwKGZ1bmMpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZGwgPSBmdW5jdGlvbihmdW5jLCBhcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhaWwoKS5mb2xkbChmdW5jLCBmdW5jKGFyZywgdGhpcy5oZWFkKCkpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZGwxID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIHRoaXMudGFpbCgpLmZvbGRsKGZ1bmMsIHRoaXMuaGVhZCgpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZHIgPSBmdW5jdGlvbihmdW5jLCBhcmcpIHtcbiAgICAgIHJldHVybiBmdW5jKHRoaXMuaGVhZCgpLCB0aGlzLnRhaWwoKS5mb2xkcihmdW5jLCBhcmcpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZHIxID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgaWYgKHRoaXMudGFpbCgpID09PSBOaWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmModGhpcy5oZWFkKCksIHRoaXMudGFpbCgpLmZvbGRyMShmdW5jKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmZvbGRsKChmdW5jdGlvbihpLCBlbCkge1xuICAgICAgICBpLnB1c2goZWwpO1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH0pLCBbXSk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKHN0cik7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJldihOaWwpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5yZXYgPSBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhaWwoKS5yZXYoY29ucyh0aGlzLmhlYWQoKSwgcmVzdWx0KSk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmVsZW1lbnRTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcblxuICAgICAgcmV0dXJuIFwiXCIgKyAoKChfcmVmMiA9IHRoaXMuaGVhZCgpKSAhPSBudWxsID8gX3JlZjIuY29uc3RydWN0b3IgOiB2b2lkIDApID09PSB0aGlzLmNvbnN0cnVjdG9yIHx8IHRoaXMuaGVhZCgpIGluc3RhbmNlb2YgTGVpc3VyZV9uaWwgPyAnWycgKyB0aGlzLmhlYWQoKS5lbGVtZW50U3RyaW5nKCkgKyAnXScgOiB0aGlzLmhlYWQoKSkgKyAodGhpcy50YWlsKCkgaW5zdGFuY2VvZiBMZWlzdXJlX25pbCA/ICcnIDogdGhpcy50YWlsKCkgaW5zdGFuY2VvZiBMZWlzdXJlX0Jhc2VDb25zID8gXCIgXCIgKyAodGhpcy50YWlsKCkuZWxlbWVudFN0cmluZygpKSA6IFwiIHwgXCIgKyAodGhpcy50YWlsKCkpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIHJldHVybiB0aGlzID09PSBvdGhlciB8fCAob3RoZXIgaW5zdGFuY2VvZiBMZWlzdXJlX0Jhc2VDb25zICYmIGNvbnNFcSh0aGlzLmhlYWQoKSwgb3RoZXIuaGVhZCgpKSAmJiBjb25zRXEodGhpcy50YWlsKCksIG90aGVyLnRhaWwoKSkpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgICAgIGJsb2NrKHRoaXMuaGVhZCgpKTtcbiAgICAgIHJldHVybiB0aGlzLnRhaWwoKS5lYWNoKGJsb2NrKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb2xkbCgoZnVuY3Rpb24oaSwgZWwpIHtcbiAgICAgICAgcmV0dXJuIGkgKyAxO1xuICAgICAgfSksIDApO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdDtcblxuICAgICAgdCA9IHRoaXMudGFpbCgpO1xuICAgICAgaWYgKHQgPT09IE5pbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdC5sYXN0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKGwpIHtcbiAgICAgIHJldHVybiBjb25zKHRoaXMuaGVhZCgpLCB0aGlzLnRhaWwoKS5hcHBlbmQobCkpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiXCIgKyAodGhpcy5zdHJpbmdOYW1lKCkpICsgXCJbXCIgKyAodGhpcy5lbGVtZW50U3RyaW5nKCkpICsgXCJdXCI7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnN0cmluZ05hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIkJhc2VDb25zXCI7XG4gICAgfTtcblxuICAgIHJldHVybiBMZWlzdXJlX0Jhc2VDb25zO1xuXG4gIH0pKExlaXN1cmVPYmplY3QpO1xuXG4gIGNvbnNFcSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYSA9PT0gYiB8fCAoYSBpbnN0YW5jZW9mIExlaXN1cmVfQmFzZUNvbnMgJiYgYS5lcXVhbHMoYikpO1xuICB9O1xuXG4gIExlaXN1cmVfY29ucyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGVpc3VyZV9jb25zLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gTGVpc3VyZV9jb25zKCkge1xuICAgICAgX3JlZjIgPSBMZWlzdXJlX2NvbnMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gX3JlZjI7XG4gICAgfVxuXG4gICAgTGVpc3VyZV9jb25zLnByb3RvdHlwZS5oZWFkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcyhmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgcmV0dXJuIHJ6KGEpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9jb25zLnByb3RvdHlwZS50YWlsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcyhmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgcmV0dXJuIHJ6KGIpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9jb25zLnByb3RvdHlwZS5zdHJpbmdOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJDb25zXCI7XG4gICAgfTtcblxuICAgIHJldHVybiBMZWlzdXJlX2NvbnM7XG5cbiAgfSkoTGVpc3VyZV9CYXNlQ29ucyk7XG5cbiAgZ2xvYmFsLkxlaXN1cmVfY29ucyA9IExlaXN1cmVfY29ucztcblxuICBMZWlzdXJlX25pbCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGVpc3VyZV9uaWwsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBMZWlzdXJlX25pbCgpIHtcbiAgICAgIF9yZWYzID0gTGVpc3VyZV9uaWwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gX3JlZjM7XG4gICAgfVxuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmlzTmlsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIHJldHVybiBOaWw7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5mb2xkbCA9IGZ1bmN0aW9uKGZ1bmMsIGFyZykge1xuICAgICAgcmV0dXJuIGFyZztcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmZvbGRyID0gZnVuY3Rpb24oZnVuYywgYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5yZXYgPSBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvdGhlcikge1xuICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgTGVpc3VyZV9uaWw7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihsKSB7XG4gICAgICByZXR1cm4gbDtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJDb25zW11cIjtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmVsZW1lbnRTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIExlaXN1cmVfbmlsO1xuXG4gIH0pKExlaXN1cmVPYmplY3QpO1xuXG4gIGdsb2JhbC5MZWlzdXJlX25pbCA9IExlaXN1cmVfbmlsO1xuXG4gIGpzVHlwZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgdDtcblxuICAgIHQgPSB0eXBlb2YgdjtcbiAgICBpZiAodCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB2LmNvbnN0cnVjdG9yIHx8IHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgfTtcblxuICBta1Byb3RvID0gZnVuY3Rpb24ocHJvdG9GdW5jLCB2YWx1ZSkge1xuICAgIHZhbHVlLl9fcHJvdG9fXyA9IHByb3RvRnVuYy5wcm90b3R5cGU7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIHRocm93RXJyb3IgPSBmdW5jdGlvbihtc2cpIHtcbiAgICB0aHJvdyAobXNnIGluc3RhbmNlb2YgRXJyb3IgPyBtc2cgOiBuZXcgRXJyb3IoU3RyaW5nKG1zZykpKTtcbiAgfTtcblxuICBjaGVja1R5cGUgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSkge1xuICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgdHlwZSkpIHtcbiAgICAgIHJldHVybiB0aHJvd0Vycm9yKFwiVHlwZSBlcnJvcjogZXhwZWN0ZWQgdHlwZTogXCIgKyB0eXBlICsgXCIsIGJ1dCBnb3Q6IFwiICsgKGpzVHlwZSh2YWx1ZSkpKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpbUNvbnMgPSBzZXREYXRhVHlwZSgoZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICByZXR1cm4gbWtQcm90byhMZWlzdXJlX2NvbnMsIHNldFR5cGUoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgcmV0dXJuIHJ6KGYpKGEpKGIpO1xuICAgICAgfSksICdjb25zJykpO1xuICAgIH07XG4gIH0pLCAnY29ucycpO1xuXG4gIE5pbCA9IG1rUHJvdG8oTGVpc3VyZV9uaWwsIHNldERhdGFUeXBlKHNldFR5cGUoKGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgcmV0dXJuIHJ6KGIpO1xuICAgIH07XG4gIH0pLCAnbmlsJyksICduaWwnKSk7XG5cbiAgY29ucyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gcHJpbUNvbnMobHooYSkpKGx6KGIpKTtcbiAgfTtcblxuICBmb2xkTGVmdCA9IGZ1bmN0aW9uKGZ1bmMsIHZhbCwgdGhpbmcpIHtcbiAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBMZWlzdXJlX2NvbnMpIHtcbiAgICAgIHJldHVybiB0aGluZy5mb2xkbChmdW5jLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJpbUZvbGRMZWZ0KGZ1bmMsIHZhbCwgdGhpbmcsIDApO1xuICAgIH1cbiAgfTtcblxuICBwcmltRm9sZExlZnQgPSBmdW5jdGlvbihmdW5jLCB2YWwsIGFycmF5LCBpbmRleCkge1xuICAgIGlmIChpbmRleCA8IGFycmF5Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHByaW1Gb2xkTGVmdChmdW5jLCBmdW5jKHZhbCwgYXJyYXlbaW5kZXhdKSwgYXJyYXksIGluZGV4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICB9O1xuXG4gIGdsb2JhbC5sZWlzdXJlRnVuY3MgPSB7fTtcblxuICBnbG9iYWwubGVpc3VyZUZ1bmNOYW1lcyA9IE5pbDtcblxuICBsZWlzdXJlQWRkRnVuYyA9IGdsb2JhbC5sZWlzdXJlQWRkRnVuYyA9IGZ1bmN0aW9uKG5tKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5sZWlzdXJlRnVuY05hbWVzID0gY29ucyhubSwgZ2xvYmFsLmxlaXN1cmVGdW5jTmFtZXMpO1xuICB9O1xuXG4gIHJvb3QuZXZhbEZ1bmMgPSBldmFsRnVuYyA9IGV2YWw7XG5cbiAgcm9vdC5mdW5jdGlvbkNvdW50ID0gMDtcblxuICBmdW5jdGlvbkluZm8gPSB7fTtcblxuICBuYW1lRnVuYyA9IGZ1bmN0aW9uKGZ1bmMsIG5hbWUpIHtcbiAgICB2YXIgZjtcblxuICAgIGYgPSBudWxsO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChmID09PSBudWxsKSB7XG4gICAgICAgIGYgPSByeihmdW5jKTtcbiAgICAgICAgaWYgKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZi5sZWlzdXJlTmFtZSA9IG5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZjtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIGRlZmluZSA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMsIGFyaXR5LCBzcmMsIG1ldGhvZCkge1xuICAgIHZhciBubTtcblxuICAgIGZ1bmN0aW9uSW5mb1tuYW1lXSA9IHtcbiAgICAgIHNyYzogc3JjLFxuICAgICAgYXJpdHk6IGFyaXR5LFxuICAgICAgbGVpc3VyZU5hbWU6IG5hbWUsXG4gICAgICBhbHRzOiB7fSxcbiAgICAgIGFsdExpc3Q6IFtdXG4gICAgfTtcbiAgICBubSA9ICdMXycgKyBuYW1lU3ViKG5hbWUpO1xuICAgIGlmICghbWV0aG9kICYmIGdsb2JhbC5ub3JlZGVmcyAmJiAoZ2xvYmFsW25tXSAhPSBudWxsKSkge1xuICAgICAgdGhyb3dFcnJvcihcIltERUZdIEF0dGVtcHQgdG8gcmVkZWZpbmUgZGVmaW5pdGlvbjogXCIgKyBuYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb25JbmZvW25hbWVdLm1haW5EZWYgPSBnbG9iYWxbbm1dID0gZ2xvYmFsLmxlaXN1cmVGdW5jc1tubV0gPSBuYW1lRnVuYyhmdW5jLCBuYW1lKTtcbiAgICBsZWlzdXJlQWRkRnVuYyhuYW1lKTtcbiAgICByb290LmZ1bmN0aW9uQ291bnQrKztcbiAgICByZXR1cm4gZnVuYztcbiAgfTtcblxuICBMX2xpdCA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfeCkge1xuICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihfZikge1xuICAgICAgcmV0dXJuIHJ6KF9mKShfeCk7XG4gICAgfSksICdsaXQnKTtcbiAgfSksICdsaXQnKTtcblxuICBMX3JlZiA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfeCkge1xuICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihfZikge1xuICAgICAgcmV0dXJuIHJ6KF9mKShfeCk7XG4gICAgfSksICdyZWYnKTtcbiAgfSksICdyZWYnKTtcblxuICBMX2xhbWJkYSA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfdikge1xuICAgIHJldHVybiBmdW5jdGlvbihfZikge1xuICAgICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKF9nKSB7XG4gICAgICAgIHJldHVybiByeihfZykoX3YpKF9mKTtcbiAgICAgIH0pLCAnbGFtYmRhJyk7XG4gICAgfTtcbiAgfSksICdsYW1iZGEnKTtcblxuICBMX2FwcGx5ID0gc2V0RGF0YVR5cGUoKGZ1bmN0aW9uKF9mdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKF9hcmcpIHtcbiAgICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihfZikge1xuICAgICAgICByZXR1cm4gcnooX2YpKF9mdW5jKShfYXJnKTtcbiAgICAgIH0pLCAnYXBwbHknKTtcbiAgICB9O1xuICB9KSwgJ2FwcGx5Jyk7XG5cbiAgTF9sZXQgPSBzZXREYXRhVHlwZSgoZnVuY3Rpb24oX24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oX3YpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihfYikge1xuICAgICAgICByZXR1cm4gc2V0VHlwZSgoZnVuY3Rpb24oX2YpIHtcbiAgICAgICAgICByZXR1cm4gcnooX2YpKF9uKShfdikoX2IpO1xuICAgICAgICB9KSwgJ2xldCcpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSwgJ2xldCcpO1xuXG4gIExfYW5ubyA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfbmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihfZGF0YSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKF9ib2R5KSB7XG4gICAgICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihfZikge1xuICAgICAgICAgIHJldHVybiByeihfZikoX25hbWUpKF9kYXRhKShfYm9keSk7XG4gICAgICAgIH0pLCAnYW5ubycpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSwgJ2Fubm8nKTtcblxuICBnZXRUeXBlID0gZnVuY3Rpb24oZikge1xuICAgIHZhciB0LCBfcmVmNDtcblxuICAgIHQgPSB0eXBlb2YgZjtcbiAgICByZXR1cm4gKHQgPT09ICdmdW5jdGlvbicgJiYgKGYgIT0gbnVsbCA/IGYudHlwZSA6IHZvaWQgMCkpIHx8IChcIipcIiArICgodCA9PT0gJ29iamVjdCcgJiYgKChfcmVmNCA9IGYuY29uc3RydWN0b3IpICE9IG51bGwgPyBfcmVmNC5uYW1lIDogdm9pZCAwKSkgfHwgdCkpO1xuICB9O1xuXG4gIGRlZmluZSgnZ2V0VHlwZScsIGx6KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGdldFR5cGUocnoodmFsdWUpKTtcbiAgfSksIDEpO1xuXG4gIGdldERhdGFUeXBlID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiAodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgZi5kYXRhVHlwZSkgfHwgJyc7XG4gIH07XG5cbiAgZGVmaW5lKCdnZXREYXRhVHlwZScsIGx6KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGdldERhdGFUeXBlKHJ6KHZhbHVlKSk7XG4gIH0pLCAxKTtcblxuICBzYXZlID0ge307XG5cbiAgc2F2ZS5saXQgPSBsaXQgPSBmdW5jdGlvbihsKSB7XG4gICAgcmV0dXJuIExfbGl0KGx6KGwpKTtcbiAgfTtcblxuICBzYXZlLnJlZiA9IHJlZiA9IGZ1bmN0aW9uKHIpIHtcbiAgICByZXR1cm4gTF9yZWYobHoocikpO1xuICB9O1xuXG4gIHNhdmUubGFtYmRhID0gbGFtYmRhID0gZnVuY3Rpb24odiwgYm9keSkge1xuICAgIHJldHVybiBMX2xhbWJkYShseih2KSkobHooYm9keSkpO1xuICB9O1xuXG4gIHNhdmUuYXBwbHkgPSBhcHBseSA9IGZ1bmN0aW9uKGYsIGEpIHtcbiAgICByZXR1cm4gTF9hcHBseShseihmKSkobHooYSkpO1xuICB9O1xuXG4gIHNhdmUubGxldCA9IGxsZXQgPSBmdW5jdGlvbihuLCB2LCBiKSB7XG4gICAgcmV0dXJuIExfbGV0KGx6KG4pKShseih2KSkobHooYikpO1xuICB9O1xuXG4gIHNhdmUuYW5ubyA9IGFubm8gPSBmdW5jdGlvbihuYW1lLCBkYXRhLCBib2R5KSB7XG4gICAgcmV0dXJuIExfYW5ubyhseihuYW1lKSkobHooZGF0YSkpKGx6KGJvZHkpKTtcbiAgfTtcblxuICBzYXZlLmNvbnMgPSBjb25zO1xuXG4gIGdldExpdFZhbCA9IGZ1bmN0aW9uKGx0KSB7XG4gICAgcmV0dXJuIGx0KGx6KGZ1bmN0aW9uKHYpIHtcbiAgICAgIHJldHVybiByeih2KTtcbiAgICB9KSk7XG4gIH07XG5cbiAgZ2V0UmVmTmFtZSA9IGZ1bmN0aW9uKHJmKSB7XG4gICAgcmV0dXJuIHJmKGx6KGZ1bmN0aW9uKHYpIHtcbiAgICAgIHJldHVybiByeih2KTtcbiAgICB9KSk7XG4gIH07XG5cbiAgZ2V0TGFtYmRhVmFyID0gZnVuY3Rpb24obGFtKSB7XG4gICAgcmV0dXJuIGxhbShseihmdW5jdGlvbih2KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gcnoodik7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRMYW1iZGFCb2R5ID0gZnVuY3Rpb24obGFtKSB7XG4gICAgcmV0dXJuIGxhbShseihmdW5jdGlvbih2KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gcnooYik7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRBcHBseUZ1bmMgPSBmdW5jdGlvbihhcGwpIHtcbiAgICByZXR1cm4gYXBsKGx6KGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiByeihhKTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGdldEFwcGx5QXJnID0gZnVuY3Rpb24oYXBsKSB7XG4gICAgcmV0dXJuIGFwbChseihmdW5jdGlvbihhKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gcnooYik7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRMZXROYW1lID0gZnVuY3Rpb24obHQpIHtcbiAgICByZXR1cm4gbHQobHooZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICByZXR1cm4gcnoobik7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRMZXRWYWx1ZSA9IGZ1bmN0aW9uKGx0KSB7XG4gICAgcmV0dXJuIGx0KGx6KGZ1bmN0aW9uKG4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgcmV0dXJuIHJ6KHYpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgZ2V0TGV0Qm9keSA9IGZ1bmN0aW9uKGx0KSB7XG4gICAgcmV0dXJuIGx0KGx6KGZ1bmN0aW9uKG4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgcmV0dXJuIHJ6KGIpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgZ2V0QW5ub05hbWUgPSBmdW5jdGlvbihhbm5vKSB7XG4gICAgcmV0dXJuIGFubm8obHooZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgICAgICByZXR1cm4gcnoobmFtZSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRBbm5vRGF0YSA9IGZ1bmN0aW9uKGFubm8pIHtcbiAgICByZXR1cm4gYW5ubyhseihmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYm9keSkge1xuICAgICAgICAgIHJldHVybiByeihkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGdldEFubm9Cb2R5ID0gZnVuY3Rpb24oYW5ubykge1xuICAgIHJldHVybiBhbm5vKGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihib2R5KSB7XG4gICAgICAgICAgcmV0dXJuIHJ6KGJvZHkpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAganNvbjJBc3RFbmNvZGluZ3MgPSB7XG4gICAgbGl0OiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9saXQobHooanNvbi52YWx1ZSkpO1xuICAgIH0sXG4gICAgcmVmOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9yZWYobHooanNvbi52YXJOYW1lKSk7XG4gICAgfSxcbiAgICBsYW1iZGE6IGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIHJldHVybiBMX2xhbWJkYShseihqc29uLnZhck5hbWUpKShseihqc29uMkFzdChqc29uLmJvZHkpKSk7XG4gICAgfSxcbiAgICBhcHBseTogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIExfYXBwbHkobHooanNvbjJBc3QoanNvbi5mdW5jKSkpKGx6KGpzb24yQXN0KGpzb24uYXJnKSkpO1xuICAgIH0sXG4gICAgXCJsZXRcIjogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIExfbGV0KGx6KGpzb24udmFyTmFtZSkpKGx6KGpzb24yQXN0KGpzb24udmFsdWUpKSkobHooanNvbjJBc3QoanNvbi5ib2R5KSkpO1xuICAgIH0sXG4gICAgYW5ubzogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIExfYW5ubyhseihqc29uLm5hbWUpKShseihqc29uMkFzdChqc29uLmRhdGEpKSkobHooanNvbjJBc3QoanNvbi5ib2R5KSkpO1xuICAgIH0sXG4gICAgY29uczogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIHNhdmUuY29ucyhqc29uMkFzdChqc29uLmhlYWQpLCBqc29uMkFzdChqc29uLnRhaWwpKTtcbiAgICB9LFxuICAgIG5pbDogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIE5pbDtcbiAgICB9XG4gIH07XG5cbiAgbGl0ID0gc2F2ZS5saXQ7XG5cbiAgcmVmID0gc2F2ZS5yZWY7XG5cbiAgbGFtYmRhID0gc2F2ZS5sYW1iZGE7XG5cbiAgYXBwbHkgPSBzYXZlLmFwcGx5O1xuXG4gIGxsZXQgPSBzYXZlLmxsZXQ7XG5cbiAgYW5ubyA9IHNhdmUuYW5ubztcblxuICBjb25zID0gc2F2ZS5jb25zO1xuXG4gIGpzb24yQXN0ID0gZnVuY3Rpb24oanNvbikge1xuICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBqc29uMkFzdEVuY29kaW5nc1tqc29uLl90eXBlXShqc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICB9O1xuXG4gIGFzdDJKc29uRW5jb2RpbmdzID0ge1xuICAgIExlaXN1cmVfbGl0OiBmdW5jdGlvbihhc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF90eXBlOiAnbGl0JyxcbiAgICAgICAgdmFsdWU6IGdldExpdFZhbChhc3QpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9yZWY6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICdyZWYnLFxuICAgICAgICB2YXJOYW1lOiBnZXRSZWZOYW1lKGFzdClcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX2xhbWJkYTogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2xhbWJkYScsXG4gICAgICAgIHZhck5hbWU6IGdldExhbWJkYVZhcihhc3QpLFxuICAgICAgICBib2R5OiBhc3QySnNvbihnZXRMYW1iZGFCb2R5KGFzdCkpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9hcHBseTogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2FwcGx5JyxcbiAgICAgICAgZnVuYzogYXN0Mkpzb24oZ2V0QXBwbHlGdW5jKGFzdCkpLFxuICAgICAgICBhcmc6IGFzdDJKc29uKGdldEFwcGx5QXJnKGFzdCkpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9sZXQ6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICdsZXQnLFxuICAgICAgICB2YXJOYW1lOiBnZXRMZXROYW1lKGFzdCksXG4gICAgICAgIHZhbHVlOiBhc3QySnNvbihnZXRMZXRWYWx1ZShhc3QpKSxcbiAgICAgICAgYm9keTogYXN0Mkpzb24oZ2V0TGV0Qm9keShhc3QpKVxuICAgICAgfTtcbiAgICB9LFxuICAgIExlaXN1cmVfYW5ubzogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2Fubm8nLFxuICAgICAgICBuYW1lOiBnZXRBbm5vTmFtZShhc3QpLFxuICAgICAgICBkYXRhOiBhc3QySnNvbihnZXRBbm5vRGF0YShhc3QpKSxcbiAgICAgICAgYm9keTogYXN0Mkpzb24oZ2V0QW5ub0JvZHkoYXN0KSlcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX2NvbnM6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICdjb25zJyxcbiAgICAgICAgaGVhZDogYXN0Mkpzb24oYXN0LmhlYWQoKSksXG4gICAgICAgIHRhaWw6IGFzdDJKc29uKGFzdC50YWlsKCkpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9uaWw6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICduaWwnXG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICBhc3QySnNvbiA9IGZ1bmN0aW9uKGFzdCkge1xuICAgIHZhciBfcmVmNDtcblxuICAgIGlmIChhc3QySnNvbkVuY29kaW5nc1soX3JlZjQgPSBhc3QuY29uc3RydWN0b3IpICE9IG51bGwgPyBfcmVmNC5uYW1lIDogdm9pZCAwXSkge1xuICAgICAgcmV0dXJuIGFzdDJKc29uRW5jb2RpbmdzW2FzdC5jb25zdHJ1Y3Rvci5uYW1lXShhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXN0O1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ2pzb24yQXN0JywgbHooZnVuY3Rpb24oanNvbikge1xuICAgIHJldHVybiBqc29uMkFzdChKU09OLnBhcnNlKHJ6KGpzb24pKSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2FzdDJKc29uJywgbHooZnVuY3Rpb24oYXN0KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFzdDJKc29uKHJ6KGFzdCkpKTtcbiAgfSkpO1xuXG4gIGNvbnNGcm9tID0gZnVuY3Rpb24oYXJyYXksIGkpIHtcbiAgICBpID0gaSB8fCAwO1xuICAgIGlmIChpIDwgYXJyYXkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gY29ucyhhcnJheVtpXSwgY29uc0Zyb20oYXJyYXksIGkgKyAxKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBOaWw7XG4gICAgfVxuICB9O1xuXG4gIGhlYWQgPSBmdW5jdGlvbihsKSB7XG4gICAgcmV0dXJuIGwuaGVhZCgpO1xuICB9O1xuXG4gIHRhaWwgPSBmdW5jdGlvbihsKSB7XG4gICAgcmV0dXJuIGwudGFpbCgpO1xuICB9O1xuXG4gIHJvb3QuaGVhZCA9IGhlYWQ7XG5cbiAgcm9vdC50YWlsID0gdGFpbDtcblxuICByb290LmNvbnNGcm9tID0gY29uc0Zyb207XG5cbiAgcm9vdC5uYW1lU3ViID0gbmFtZVN1YjtcblxuICByb290LnNldERhdGFUeXBlID0gc2V0RGF0YVR5cGU7XG5cbiAgcm9vdC5zZXRUeXBlID0gc2V0VHlwZTtcblxuICByb290Lm1rUHJvdG8gPSBta1Byb3RvO1xuXG4gIHJvb3QuTmlsID0gTmlsO1xuXG4gIHJvb3QuY29ucyA9IGNvbnM7XG5cbiAgcm9vdC5wcmltQ29ucyA9IHByaW1Db25zO1xuXG4gIHJvb3QuZGVmaW5lID0gZGVmaW5lO1xuXG4gIHJvb3QuZ2V0VHlwZSA9IGdldFR5cGU7XG5cbiAgcm9vdC5nZXREYXRhVHlwZSA9IGdldERhdGFUeXBlO1xuXG4gIHJvb3QubGl0ID0gbGl0O1xuXG4gIHJvb3QucmVmID0gcmVmO1xuXG4gIHJvb3QubGFtYmRhID0gbGFtYmRhO1xuXG4gIHJvb3QuYXBwbHkgPSBhcHBseTtcblxuICByb290LmFubm8gPSBhbm5vO1xuXG4gIHJvb3QubGxldCA9IGxsZXQ7XG5cbiAgcm9vdC5nZXRSZWZOYW1lID0gZ2V0UmVmTmFtZTtcblxuICByb290LmdldExpdFZhbCA9IGdldExpdFZhbDtcblxuICByb290LmdldExhbWJkYUJvZHkgPSBnZXRMYW1iZGFCb2R5O1xuXG4gIHJvb3QuZ2V0TGFtYmRhVmFyID0gZ2V0TGFtYmRhVmFyO1xuXG4gIHJvb3QuZ2V0QXBwbHlGdW5jID0gZ2V0QXBwbHlGdW5jO1xuXG4gIHJvb3QuZ2V0QXBwbHlBcmcgPSBnZXRBcHBseUFyZztcblxuICByb290LmdldExldE5hbWUgPSBnZXRMZXROYW1lO1xuXG4gIHJvb3QuZ2V0TGV0VmFsdWUgPSBnZXRMZXRWYWx1ZTtcblxuICByb290LmdldExldEJvZHkgPSBnZXRMZXRCb2R5O1xuXG4gIHJvb3QuZ2V0QW5ub05hbWUgPSBnZXRBbm5vTmFtZTtcblxuICByb290LmdldEFubm9EYXRhID0gZ2V0QW5ub0RhdGE7XG5cbiAgcm9vdC5nZXRBbm5vQm9keSA9IGdldEFubm9Cb2R5O1xuXG4gIHJvb3QudGhyb3dFcnJvciA9IHRocm93RXJyb3I7XG5cbiAgcm9vdC5mb2xkTGVmdCA9IGZvbGRMZWZ0O1xuXG4gIHJvb3QuTGVpc3VyZU9iamVjdCA9IExlaXN1cmVPYmplY3Q7XG5cbiAgcm9vdC5ldmFsRnVuYyA9IGV2YWxGdW5jO1xuXG4gIHJvb3QuanNvbjJBc3QgPSBqc29uMkFzdDtcblxuICByb290LmFzdDJKc29uID0gYXN0Mkpzb247XG5cbiAgcm9vdC5MZWlzdXJlX2xpdCA9IExlaXN1cmVfbGl0O1xuXG4gIHJvb3QuTGVpc3VyZV9yZWYgPSBMZWlzdXJlX3JlZjtcblxuICByb290LkxlaXN1cmVfbGFtYmRhID0gTGVpc3VyZV9sYW1iZGE7XG5cbiAgcm9vdC5MZWlzdXJlX2FwcGx5ID0gTGVpc3VyZV9hcHBseTtcblxuICByb290LkxlaXN1cmVfbGV0ID0gTGVpc3VyZV9sZXQ7XG5cbiAgcm9vdC5MZWlzdXJlX2Fubm8gPSBMZWlzdXJlX2Fubm87XG5cbiAgcm9vdC5lbnN1cmVMZWlzdXJlQ2xhc3MgPSBlbnN1cmVMZWlzdXJlQ2xhc3M7XG5cbiAgcm9vdC5tYWtlU3VwZXIgPSBtYWtlU3VwZXI7XG5cbiAgcm9vdC5zdXBlcnR5cGVzID0gc3VwZXJ0eXBlcztcblxuICByb290LmZ1bmN0aW9uSW5mbyA9IGZ1bmN0aW9uSW5mbztcblxufSkuY2FsbCh0aGlzKTtcblxuLypcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPWFzdC5tYXBcbiovXG5cbn0pKHNlbGYpIiwiKGZ1bmN0aW9uKGdsb2JhbCl7Ly8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuLypcbkNvcHlyaWdodCAoQykgMjAxMywgQmlsbCBCdXJkaWNrLCBUaW55IENvbmNlcHRzOiBodHRwczovL2dpdGh1Yi5jb20vem90L0xlaXN1cmVcblxuKGxpY2Vuc2VkIHdpdGggWkxJQiBsaWNlbnNlKVxuXG5UaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxud2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG5hcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuXG5QZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbmluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbmZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcblxuMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbmNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG5pbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbmFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG5cbjIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG5taXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG5cbjMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIFNpbXB5Q29ucywgZGVmYXVsdEVudiwgcmVhZERpciwgcmVhZEZpbGUsIHJvb3QsIHNpbXB5Q29ucywgc3RhdEZpbGUsIHdyaXRlRmlsZTtcblxuICByb290ID0gbW9kdWxlLmV4cG9ydHM7XG5cbiAgZGVmYXVsdEVudiA9IHtcbiAgICBwcmVzZW50VmFsdWU6IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH0sXG4gICAgdmFsdWVzOiB7fSxcbiAgICBlcnJvckhhbmRsZXJzOiBbXVxuICB9O1xuXG4gIGdsb2JhbC5yZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdmFsdWUubWVtbyB8fCAodmFsdWUubWVtbyA9IHZhbHVlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9O1xuXG4gIGdsb2JhbC5sYXp5ID0gZnVuY3Rpb24obCkge1xuICAgIGlmICh0eXBlb2YgbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbDtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsO1xuICAgIH1cbiAgfTtcblxuICByZWFkRmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBjb250KSB7XG4gICAgcmV0dXJuIGRlZmF1bHRFbnYucmVhZEZpbGUoZmlsZU5hbWUsIGNvbnQpO1xuICB9O1xuXG4gIHdyaXRlRmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBkYXRhLCBjb250KSB7XG4gICAgcmV0dXJuIGRlZmF1bHRFbnYud3JpdGVGaWxlKGZpbGVOYW1lLCBkYXRhLCBjb250KTtcbiAgfTtcblxuICByZWFkRGlyID0gZnVuY3Rpb24oZmlsZU5hbWUsIGNvbnQpIHtcbiAgICByZXR1cm4gZGVmYXVsdEVudi5yZWFkRGlyKGZpbGVOYW1lLCBjb250KTtcbiAgfTtcblxuICBzdGF0RmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBjb250KSB7XG4gICAgcmV0dXJuIGRlZmF1bHRFbnYuc3RhdEZpbGUoZmlsZU5hbWUsIGNvbnQpO1xuICB9O1xuXG4gIFNpbXB5Q29ucyA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBTaW1weUNvbnMoaGVhZCwgdGFpbCkge1xuICAgICAgdGhpcy5oZWFkID0gaGVhZDtcbiAgICAgIHRoaXMudGFpbCA9IHRhaWw7XG4gICAgfVxuXG4gICAgU2ltcHlDb25zLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJyYXksIGg7XG5cbiAgICAgIGggPSB0aGlzO1xuICAgICAgYXJyYXkgPSBbXTtcbiAgICAgIHdoaWxlIChoICE9PSBudWxsKSB7XG4gICAgICAgIGFycmF5LnB1c2goaC5oZWFkKTtcbiAgICAgICAgaCA9IGgudGFpbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNpbXB5Q29ucztcblxuICB9KSgpO1xuXG4gIHNpbXB5Q29ucyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gbmV3IFNpbXB5Q29ucyhhLCBiKTtcbiAgfTtcblxuICByb290LmRlZmF1bHRFbnYgPSBkZWZhdWx0RW52O1xuXG4gIHJvb3QucmVhZEZpbGUgPSByZWFkRmlsZTtcblxuICByb290LnJlYWREaXIgPSByZWFkRGlyO1xuXG4gIHJvb3Qud3JpdGVGaWxlID0gd3JpdGVGaWxlO1xuXG4gIHJvb3Quc3RhdEZpbGUgPSBzdGF0RmlsZTtcblxuICByb290LlNpbXB5Q29ucyA9IFNpbXB5Q29ucztcblxuICByb290LnNpbXB5Q29ucyA9IHNpbXB5Q29ucztcblxuICByb290LnJlc29sdmUgPSBnbG9iYWwucmVzb2x2ZTtcblxuICByb290LmxhenkgPSBnbG9iYWwubGF6eTtcblxufSkuY2FsbCh0aGlzKTtcblxuLypcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPWJhc2UubWFwXG4qL1xuXG59KShzZWxmKSIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbihmdW5jdGlvbigpIHtcbiAgdmFyIExlaXN1cmUsIGV4cG9ydHMsIGssIG5iLCB2LCBfcmVmO1xuXG4gIHdpbmRvdy5tYXJrZWQgPSByZXF1aXJlKCcuL21hcmtlZCcpO1xuXG4gIExlaXN1cmUgPSBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Jhc2UnKTtcblxuICByZXF1aXJlKCcuL2FzdCcpO1xuXG4gIHJlcXVpcmUoJy4vZ2VuJyk7XG5cbiAgcmVxdWlyZSgnLi9ydW50aW1lJyk7XG5cbiAgcmVxdWlyZSgnLi9nZW5lcmF0ZWRQcmVsdWRlJyk7XG5cbiAgcmVxdWlyZSgnLi9zdGQnKTtcblxuICByZXF1aXJlKCcuL21kJyk7XG5cbiAgd2luZG93Lk5vdGVib29rID0gbmIgPSByZXF1aXJlKCcuL25vdGVib29rJyk7XG5cbiAgX3JlZiA9IHdpbmRvdy5MZWlzdXJlO1xuICBmb3IgKGsgaW4gX3JlZikge1xuICAgIHYgPSBfcmVmW2tdO1xuICAgIExlaXN1cmVba10gPSB2O1xuICB9XG5cbiAgd2luZG93LkxlaXN1cmUgPSBMZWlzdXJlO1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3Nlck1haW4ubWFwXG4qL1xuIiwiKGZ1bmN0aW9uKGdsb2JhbCl7Ly8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuLypcbkNvcHlyaWdodCAoQykgMjAxMywgQmlsbCBCdXJkaWNrLCBUaW55IENvbmNlcHRzOiBodHRwczovL2dpdGh1Yi5jb20vem90L0xlaXN1cmVcblxuKGxpY2Vuc2VkIHdpdGggWkxJQiBsaWNlbnNlKVxuXG5UaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxud2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG5hcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuXG5QZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbmluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbmZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcblxuMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbmNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG5pbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbmFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG5cbjIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG5taXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG5cbjMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIExlaXN1cmVfYW5ubywgTGVpc3VyZV9hcHBseSwgTGVpc3VyZV9sYW1iZGEsIExlaXN1cmVfbGV0LCBMZWlzdXJlX2xpdCwgTGVpc3VyZV9yZWYsIE5pbCwgYWRkTGFtYmRhUHJvcGVydGllcywgYWRkVW5pcSwgYXJyYXlpZnksIGFzc29jTGlzdFByb3BzLCBjb25zLCBjb25zRnJvbSwgY3VycnksIGRlZmluZSwgZHVtcEFubm8sIGdlbiwgZ2VuQXBwbHlBcmcsIGdlbkxhbWJkYSwgZ2VuTGV0cywgZ2VuVW5pcSwgZ2V0QW5ub0JvZHksIGdldEFubm9EYXRhLCBnZXRBbm5vTmFtZSwgZ2V0QXBwbHlBcmcsIGdldEFwcGx5RnVuYywgZ2V0QXNzb2NMaXN0UHJvcHMsIGdldExhbWJkYUJvZHksIGdldExhbWJkYVByb3BlcnRpZXMsIGdldExhbWJkYVZhciwgZ2V0TGFzdExldEJvZHksIGdldExldEJvZHksIGdldExldE5hbWUsIGdldExldFZhbHVlLCBnZXRMaXRWYWwsIGdldFJlZk5hbWUsIGxhY29ucywgbGF6eSwgbGNvbnMsIGxjb25zRnJvbSwgbGVmdCwgbGV0TGlzdCwgbHosIG1ha2VTeW5jTW9uYWQsIG1lbW9pemUsIG5hbWVTdWIsIHJlc29sdmUsIHJpZ2h0LCByb290LCBydW5Nb25hZCwgcnosIHNldERhdGFUeXBlLCBzZXRUeXBlLCBzaW1weUNvbnMsIHNwZWNpYWxBbm5vdGF0aW9ucywgdW5pcU5hbWUsIHZhck5hbWVTdWIsIF8sIF9mYWxzZSwgX3JlZiwgX3JlZjEsIF9yZWYyO1xuXG4gIF9yZWYgPSByZXF1aXJlKCcuL2Jhc2UnKSwgc2ltcHlDb25zID0gX3JlZi5zaW1weUNvbnMsIHJlc29sdmUgPSBfcmVmLnJlc29sdmUsIGxhenkgPSBfcmVmLmxhenk7XG5cbiAgcnogPSByZXNvbHZlO1xuXG4gIGx6ID0gbGF6eTtcblxuICBfcmVmMSA9IHJvb3QgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vYXN0JyksIG5hbWVTdWIgPSBfcmVmMS5uYW1lU3ViLCBnZXRMaXRWYWwgPSBfcmVmMS5nZXRMaXRWYWwsIGdldFJlZk5hbWUgPSBfcmVmMS5nZXRSZWZOYW1lLCBnZXRMYW1iZGFWYXIgPSBfcmVmMS5nZXRMYW1iZGFWYXIsIGdldExhbWJkYUJvZHkgPSBfcmVmMS5nZXRMYW1iZGFCb2R5LCBnZXRBcHBseUZ1bmMgPSBfcmVmMS5nZXRBcHBseUZ1bmMsIGdldEFwcGx5QXJnID0gX3JlZjEuZ2V0QXBwbHlBcmcsIGdldEFubm9OYW1lID0gX3JlZjEuZ2V0QW5ub05hbWUsIGdldEFubm9EYXRhID0gX3JlZjEuZ2V0QW5ub0RhdGEsIGdldEFubm9Cb2R5ID0gX3JlZjEuZ2V0QW5ub0JvZHksIGdldExldE5hbWUgPSBfcmVmMS5nZXRMZXROYW1lLCBnZXRMZXRWYWx1ZSA9IF9yZWYxLmdldExldFZhbHVlLCBnZXRMZXRCb2R5ID0gX3JlZjEuZ2V0TGV0Qm9keSwgTGVpc3VyZV9saXQgPSBfcmVmMS5MZWlzdXJlX2xpdCwgTGVpc3VyZV9yZWYgPSBfcmVmMS5MZWlzdXJlX3JlZiwgTGVpc3VyZV9sYW1iZGEgPSBfcmVmMS5MZWlzdXJlX2xhbWJkYSwgTGVpc3VyZV9hcHBseSA9IF9yZWYxLkxlaXN1cmVfYXBwbHksIExlaXN1cmVfbGV0ID0gX3JlZjEuTGVpc3VyZV9sZXQsIExlaXN1cmVfYW5ubyA9IF9yZWYxLkxlaXN1cmVfYW5ubywgc2V0VHlwZSA9IF9yZWYxLnNldFR5cGUsIHNldERhdGFUeXBlID0gX3JlZjEuc2V0RGF0YVR5cGUsIGNvbnMgPSBfcmVmMS5jb25zLCBOaWwgPSBfcmVmMS5OaWwsIGNvbnNGcm9tID0gX3JlZjEuY29uc0Zyb20sIGRlZmluZSA9IF9yZWYxLmRlZmluZTtcblxuICBfcmVmMiA9IHJlcXVpcmUoJy4vcnVudGltZScpLCBtYWtlU3luY01vbmFkID0gX3JlZjIubWFrZVN5bmNNb25hZCwgcnVuTW9uYWQgPSBfcmVmMi5ydW5Nb25hZCwgX2ZhbHNlID0gX3JlZjIuX2ZhbHNlLCBsZWZ0ID0gX3JlZjIubGVmdCwgcmlnaHQgPSBfcmVmMi5yaWdodDtcblxuICBfID0gcmVxdWlyZSgnLi9sb2Rhc2gubWluJyk7XG5cbiAgdmFyTmFtZVN1YiA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gXCJMX1wiICsgKG5hbWVTdWIobikpO1xuICB9O1xuXG4gIGdlbiA9IGZ1bmN0aW9uKGFzdCkge1xuICAgIHJldHVybiBnZW5VbmlxKGFzdCwgTmlsLCBbTmlsLCAwXSk7XG4gIH07XG5cbiAgZ2VuVW5pcSA9IGZ1bmN0aW9uKGFzdCwgbmFtZXMsIHVuaXEpIHtcbiAgICB2YXIgYXJpdHksIGRhdGEsIGZ1bmNOYW1lLCBnZW5uZWQsIG5hbWUsIHNyYywgX3JlZjM7XG5cbiAgICBzd2l0Y2ggKGFzdC5jb25zdHJ1Y3Rvcikge1xuICAgICAgY2FzZSBMZWlzdXJlX2xpdDpcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGdldExpdFZhbChhc3QpKTtcbiAgICAgIGNhc2UgTGVpc3VyZV9yZWY6XG4gICAgICAgIHJldHVybiBcInJlc29sdmUoXCIgKyAodW5pcU5hbWUoZ2V0UmVmTmFtZShhc3QpLCB1bmlxKSkgKyBcIilcIjtcbiAgICAgIGNhc2UgTGVpc3VyZV9sYW1iZGE6XG4gICAgICAgIHJldHVybiBnZW5MYW1iZGEoYXN0LCBuYW1lcywgdW5pcSwgMCk7XG4gICAgICBjYXNlIExlaXN1cmVfYXBwbHk6XG4gICAgICAgIHJldHVybiBcIlwiICsgKGdlblVuaXEoZ2V0QXBwbHlGdW5jKGFzdCksIG5hbWVzLCB1bmlxKSkgKyBcIihcIiArIChnZW5BcHBseUFyZyhnZXRBcHBseUFyZyhhc3QpLCBuYW1lcywgdW5pcSkpICsgXCIpXCI7XG4gICAgICBjYXNlIExlaXN1cmVfbGV0OlxuICAgICAgICByZXR1cm4gXCIoZnVuY3Rpb24oKXtcXG5cIiArIChnZW5MZXRzKGFzdCwgbmFtZXMsIHVuaXEpKSArIFwifSkoKVwiO1xuICAgICAgY2FzZSBMZWlzdXJlX2Fubm86XG4gICAgICAgIG5hbWUgPSBnZXRBbm5vTmFtZShhc3QpO1xuICAgICAgICBkYXRhID0gZ2V0QW5ub0RhdGEoYXN0KTtcbiAgICAgICAgZ2VubmVkID0gZ2VuVW5pcShnZXRBbm5vQm9keShhc3QpLCBuYW1lcywgdW5pcSk7XG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgICAgcmV0dXJuIFwic2V0VHlwZShcIiArIGdlbm5lZCArIFwiLCAnXCIgKyBkYXRhICsgXCInKVwiO1xuICAgICAgICAgIGNhc2UgJ2RhdGFUeXBlJzpcbiAgICAgICAgICAgIHJldHVybiBcInNldERhdGFUeXBlKFwiICsgZ2VubmVkICsgXCIsICdcIiArIGRhdGEgKyBcIicpXCI7XG4gICAgICAgICAgY2FzZSAnZGVmaW5lJzpcbiAgICAgICAgICAgIF9yZWYzID0gZGF0YS50b0FycmF5KCksIGZ1bmNOYW1lID0gX3JlZjNbMF0sIGFyaXR5ID0gX3JlZjNbMV0sIHNyYyA9IF9yZWYzWzJdO1xuICAgICAgICAgICAgcmV0dXJuIFwiZGVmaW5lKCdcIiArIGZ1bmNOYW1lICsgXCInLCAoZnVuY3Rpb24oKXtyZXR1cm4gXCIgKyBnZW5uZWQgKyBcIn0pLCBcIiArIGFyaXR5ICsgXCIsIFwiICsgKEpTT04uc3RyaW5naWZ5KHNyYykpICsgXCIpXCI7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBnZW5uZWQ7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJEVVI/IFwiICsgYXN0ICsgXCIsIFwiICsgYXN0LmNvbnN0cnVjdG9yICsgXCIgXCIgKyBMZWlzdXJlX2xhbWJkYTtcbiAgICB9XG4gIH07XG5cbiAgZ2VuTGFtYmRhID0gZnVuY3Rpb24oYXN0LCBuYW1lcywgdW5pcSwgY291bnQpIHtcbiAgICB2YXIgbiwgbmFtZSwgdTtcblxuICAgIG5hbWUgPSBnZXRMYW1iZGFWYXIoYXN0KTtcbiAgICB1ID0gYWRkVW5pcShuYW1lLCBuYW1lcywgdW5pcSk7XG4gICAgbiA9IGNvbnMobmFtZSwgbmFtZXMpO1xuICAgIHJldHVybiBhZGRMYW1iZGFQcm9wZXJ0aWVzKGFzdCwgXCJmdW5jdGlvbihcIiArICh1bmlxTmFtZShuYW1lLCB1KSkgKyBcIil7cmV0dXJuIFwiICsgKGdlblVuaXEoZ2V0TGFtYmRhQm9keShhc3QpLCBuLCB1KSkgKyBcIn1cIik7XG4gIH07XG5cbiAgc3BlY2lhbEFubm90YXRpb25zID0gWyd0eXBlJywgJ2RhdGFUeXBlJywgJ2RlZmluZSddO1xuXG4gIGFycmF5aWZ5ID0gZnVuY3Rpb24oY29ucykge1xuICAgIGlmIChjb25zIGluc3RhbmNlb2YgTGVpc3VyZV9jb25zKSB7XG4gICAgICByZXR1cm4gY29ucy5tYXAoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5aWZ5KGVsKTtcbiAgICAgIH0pLnRvQXJyYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnM7XG4gICAgfVxuICB9O1xuXG4gIGdldExhbWJkYVByb3BlcnRpZXMgPSBmdW5jdGlvbihib2R5LCBwcm9wcykge1xuICAgIHZhciB2YWx1ZTtcblxuICAgIGlmIChib2R5IGluc3RhbmNlb2YgTGVpc3VyZV9hbm5vKSB7XG4gICAgICBpZiAoIV8uY29udGFpbnMoc3BlY2lhbEFubm90YXRpb25zLCBnZXRBbm5vTmFtZShib2R5KSkpIHtcbiAgICAgICAgaWYgKCFwcm9wcykge1xuICAgICAgICAgIHByb3BzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBnZXRBbm5vRGF0YShib2R5KTtcbiAgICAgICAgcHJvcHNbZ2V0QW5ub05hbWUoYm9keSldID0gYXJyYXlpZnkodmFsdWUpO1xuICAgICAgfVxuICAgICAgZ2V0TGFtYmRhUHJvcGVydGllcyhnZXRBbm5vQm9keShib2R5KSwgcHJvcHMpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHM7XG4gIH07XG5cbiAgYWRkTGFtYmRhUHJvcGVydGllcyA9IGZ1bmN0aW9uKGFzdCwgZGVmKSB7XG4gICAgdmFyIHByb3BzO1xuXG4gICAgcHJvcHMgPSBnZXRMYW1iZGFQcm9wZXJ0aWVzKGdldExhbWJkYUJvZHkoYXN0KSk7XG4gICAgaWYgKHByb3BzKSB7XG4gICAgICByZXR1cm4gXCJzZXRMYW1iZGFQcm9wZXJ0aWVzKFwiICsgZGVmICsgXCIsIFwiICsgKEpTT04uc3RyaW5naWZ5KHByb3BzKSkgKyBcIilcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRlZjtcbiAgICB9XG4gIH07XG5cbiAgbGNvbnMgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIHJ6KExfY29ucykobHooYSkpKGx6KGIpKTtcbiAgfTtcblxuICBsY29uc0Zyb20gPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciBlbCwgcCwgX2ksIF9sZW4sIF9yZWYzO1xuXG4gICAgaWYgKGFycmF5IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIHAgPSByeihMX25pbCk7XG4gICAgICBfcmVmMyA9IGFycmF5LnJldmVyc2UoKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgZWwgPSBfcmVmM1tfaV07XG4gICAgICAgIHAgPSBsY29ucyhsY29uc0Zyb20oZWwpLCBwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuICB9O1xuXG4gIGFzc29jTGlzdFByb3BzID0gbnVsbDtcblxuICBnZXRBc3NvY0xpc3RQcm9wcyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghYXNzb2NMaXN0UHJvcHMpIHtcbiAgICAgIGFzc29jTGlzdFByb3BzID0gbGNvbnMobGNvbnMoJ2Fzc29jJywgJ3RydWUnKSwgcnooTF9uaWwpKTtcbiAgICAgIGFzc29jTGlzdFByb3BzLnByb3BlcnRpZXMgPSBhc3NvY0xpc3RQcm9wcztcbiAgICB9XG4gICAgcmV0dXJuIGFzc29jTGlzdFByb3BzO1xuICB9O1xuXG4gIGxhY29ucyA9IGZ1bmN0aW9uKGtleSwgdmFsdWUsIGxpc3QpIHtcbiAgICB2YXIgYWxpc3Q7XG5cbiAgICBhbGlzdCA9IGxjb25zKGxjb25zKGtleSwgdmFsdWUpLCBsaXN0KTtcbiAgICBhbGlzdC5wcm9wZXJ0aWVzID0gZ2V0QXNzb2NMaXN0UHJvcHMoKTtcbiAgICByZXR1cm4gYWxpc3Q7XG4gIH07XG5cbiAgZ2xvYmFsLnNldExhbWJkYVByb3BlcnRpZXMgPSBmdW5jdGlvbihkZWYsIHByb3BzKSB7XG4gICAgdmFyIGssIHAsIHY7XG5cbiAgICBwID0gcnooTF9uaWwpO1xuICAgIGZvciAoayBpbiBwcm9wcykge1xuICAgICAgdiA9IHByb3BzW2tdO1xuICAgICAgcCA9IGxhY29ucyhrLCBsY29uc0Zyb20odiksIHApO1xuICAgIH1cbiAgICBkZWYucHJvcGVydGllcyA9IHA7XG4gICAgcmV0dXJuIGRlZjtcbiAgfTtcblxuICBtZW1vaXplID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHJldHVybiBcIihmdW5jdGlvbigpe3JldHVybiBcIiArIGZ1bmMgKyBcIn0pXCI7XG4gIH07XG5cbiAgZHVtcEFubm8gPSBmdW5jdGlvbihhc3QpIHtcbiAgICBpZiAoYXN0IGluc3RhbmNlb2YgTGVpc3VyZV9hbm5vKSB7XG4gICAgICByZXR1cm4gZHVtcEFubm8oZ2V0QW5ub0JvZHkoYXN0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhc3Q7XG4gICAgfVxuICB9O1xuXG4gIGdlbkFwcGx5QXJnID0gZnVuY3Rpb24oYXJnLCBuYW1lcywgdW5pcSkge1xuICAgIGlmIChkdW1wQW5ubyhhcmcpIGluc3RhbmNlb2YgTGVpc3VyZV9hcHBseSkge1xuICAgICAgcmV0dXJuIG1lbW9pemUoZ2VuVW5pcShhcmcsIG5hbWVzLCB1bmlxKSk7XG4gICAgfSBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBMZWlzdXJlX3JlZikge1xuICAgICAgcmV0dXJuIHVuaXFOYW1lKGdldFJlZk5hbWUoYXJnKSwgdW5pcSk7XG4gICAgfSBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBMZWlzdXJlX2xpdCkge1xuICAgICAgcmV0dXJuIFwibGF6eShcIiArIChKU09OLnN0cmluZ2lmeShnZXRMaXRWYWwoYXJnKSkpICsgXCIpXCI7XG4gICAgfSBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBMZWlzdXJlX2xldCkge1xuICAgICAgcmV0dXJuIFwiZnVuY3Rpb24oKXtcIiArIChnZW5MZXRzKGFyZywgbmFtZXMsIHVuaXEpKSArIFwifVwiO1xuICAgIH0gZWxzZSBpZiAoZHVtcEFubm8oYXJnKSBpbnN0YW5jZW9mIExlaXN1cmVfbGFtYmRhKSB7XG4gICAgICByZXR1cm4gbWVtb2l6ZShnZW5VbmlxKGFyZywgbmFtZXMsIHVuaXEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiZnVuY3Rpb24oKXtyZXR1cm4gXCIgKyAoZ2VuVW5pcShhcmcsIG5hbWVzLCB1bmlxKSkgKyBcIn1cIjtcbiAgICB9XG4gIH07XG5cbiAgZ2VuTGV0cyA9IGZ1bmN0aW9uKGFzdCwgbmFtZXMsIHVuaXEpIHtcbiAgICB2YXIgYXNzaWducywgZGVjcywgX3JlZjM7XG5cbiAgICBfcmVmMyA9IF8uZm9sZGwobGV0TGlzdChhc3QsIFtdKSwgKGZ1bmN0aW9uKHJlc3VsdCwgbCkge1xuICAgICAgdmFyIGNvZGUsIGxldE5hbWUsIGxldE5hbWVzLCBuLCBuZXdVLCB1O1xuXG4gICAgICBuID0gcmVzdWx0WzBdLCB1ID0gcmVzdWx0WzFdLCBsZXROYW1lcyA9IHJlc3VsdFsyXSwgY29kZSA9IHJlc3VsdFszXTtcbiAgICAgIG5ld1UgPSBhZGRVbmlxKGdldExldE5hbWUobCksIG4sIHUpO1xuICAgICAgbGV0TmFtZSA9IHVuaXFOYW1lKGdldExldE5hbWUobCksIG5ld1UpO1xuICAgICAgcmV0dXJuIFtjb25zKGdldExldE5hbWUobCksIG4pLCBuZXdVLCBjb25zKGxldE5hbWUsIGxldE5hbWVzKSwgY29ucygnXFxuJyArIGxldE5hbWUgKyAnID0gJyArIGdlbkFwcGx5QXJnKGdldExldFZhbHVlKGwpLCBuLCB1KSwgY29kZSldO1xuICAgIH0pLCBbbmFtZXMsIHVuaXEsIE5pbCwgTmlsXSksIG5hbWVzID0gX3JlZjNbMF0sIHVuaXEgPSBfcmVmM1sxXSwgZGVjcyA9IF9yZWYzWzJdLCBhc3NpZ25zID0gX3JlZjNbM107XG4gICAgcmV0dXJuIFwiXFxudmFyIFwiICsgKGRlY3Muam9pbignLCAnKSkgKyBcIjtcXG5cIiArIChhc3NpZ25zLmpvaW4oJztcXG4nKSkgKyBcIjtcXG5yZXR1cm4gXCIgKyAoZ2VuVW5pcShnZXRMYXN0TGV0Qm9keShhc3QpLCBuYW1lcywgdW5pcSkpO1xuICB9O1xuXG4gIGFkZFVuaXEgPSBmdW5jdGlvbihuYW1lLCBuYW1lcywgdW5pcSkge1xuICAgIHZhciBudW0sIG92ZXJyaWRlcztcblxuICAgIGlmICgobmFtZXMuZmluZChmdW5jdGlvbihlbCkge1xuICAgICAgcmV0dXJuIGVsID09PSBuYW1lO1xuICAgIH0pKSAhPT0gTmlsKSB7XG4gICAgICBvdmVycmlkZXMgPSB1bmlxWzBdLCBudW0gPSB1bmlxWzFdO1xuICAgICAgcmV0dXJuIFtjb25zKGNvbnMobmFtZSwgXCJcIiArIG5hbWUgKyBcIl9cIiArIG51bSksIG92ZXJyaWRlcyksIG51bSArIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5pcTtcbiAgICB9XG4gIH07XG5cbiAgdW5pcU5hbWUgPSBmdW5jdGlvbihuYW1lLCB1bmlxKSB7XG4gICAgdmFyIGt2O1xuXG4gICAgdW5pcSA9IHVuaXFbMF07XG4gICAga3YgPSB1bmlxLmZpbmQoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICByZXR1cm4gZWwuaGVhZCgpID09PSBuYW1lO1xuICAgIH0pLCB1bmlxKTtcbiAgICByZXR1cm4gdmFyTmFtZVN1Yigoa3YgIT09IE5pbCA/IGt2LnRhaWwoKSA6IG5hbWUpKTtcbiAgfTtcblxuICBsZXRMaXN0ID0gZnVuY3Rpb24oYXN0LCBidWYpIHtcbiAgICBpZiAoYXN0IGluc3RhbmNlb2YgTGVpc3VyZV9sZXQpIHtcbiAgICAgIGJ1Zi5wdXNoKGFzdCk7XG4gICAgICByZXR1cm4gbGV0TGlzdChnZXRMZXRCb2R5KGFzdCksIGJ1Zik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWY7XG4gICAgfVxuICB9O1xuXG4gIGdldExhc3RMZXRCb2R5ID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgaWYgKGFzdCBpbnN0YW5jZW9mIExlaXN1cmVfbGV0KSB7XG4gICAgICByZXR1cm4gZ2V0TGFzdExldEJvZHkoZ2V0TGV0Qm9keShhc3QpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFzdDtcbiAgICB9XG4gIH07XG5cbiAgZGVmaW5lKCdydW5Bc3QnLCBseihmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgZXJyO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBldmFsKFwiKFwiICsgKGdlbihyeihhc3QpKSkgKyBcIilcIik7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICByZXR1cm4gcnooTF9wYXJzZUVycikobHooXCJcXG5cXG5QYXJzZSBlcnJvcjogXCIgKyBlcnIudG9TdHJpbmcoKSArIFwiXFxuQVNUOiBcIikpKGFzdCk7XG4gICAgfVxuICB9KSk7XG5cbiAgY3VycnkgPSBmdW5jdGlvbihmdW5jLCBhcmdzLCBwb3MpIHtcbiAgICBpZiAocG9zID09PSBmdW5jLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncy50b0FycmF5KGZ1bmMubGVuZ3RoIC0gMSwgW10pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gY3VycnkoZnVuYywgc2ltcHlDb25zKGFyZywgYXJncyksIHBvcyArIDEpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgcm9vdC5nZW4gPSBnZW47XG5cbiAgcm9vdC5jdXJyeSA9IGN1cnJ5O1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9Z2VuLm1hcFxuKi9cblxufSkoc2VsZikiLCJMX3J1bk1vbmFkcyhbXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ0cnVlXCIpKShsYXp5KDApKShsYXp5KFwidHJ1ZSA9IFxcXFxhIGIgLiBhXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoc2V0VHlwZShmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiByZXNvbHZlKExfYSl9fSwgJ3RydWUnKSwgJ3RydWUnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmYWxzZVwiKSkobGF6eSgwKSkobGF6eShcImZhbHNlID0gXFxcXGEgYiAuIGJcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShzZXRUeXBlKGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9iKX19LCAnZmFsc2UnKSwgJ2ZhbHNlJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibm90XCIpKShsYXp5KDEpKShsYXp5KFwibm90IGIgPSBiIGZhbHNlIHRydWVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiByZXNvbHZlKExfYikoTF9mYWxzZSkoTF90cnVlKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYW5kXCIpKShsYXp5KDIpKShsYXp5KFwiYW5kIGEgYiA9IGEgYiBmYWxzZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9hKShMX2IpKExfZmFsc2UpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwib3JcIikpKGxhenkoMikpKGxhenkoXCJvciBhIGIgPSBhIHRydWUgYlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9hKShMX3RydWUpKExfYil9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzb21lXCIpKShsYXp5KDEpKShsYXp5KFwic29tZSB4ID0gXFxcXHNvbWVDYXNlIG5vbmVDYXNlIC4gc29tZUNhc2UgeFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9zb21lQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfbm9uZUNhc2Upe3JldHVybiByZXNvbHZlKExfc29tZUNhc2UpKExfeCl9fSwgJ3NvbWUnKX0sICdzb21lJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic29tZTJcIikpKGxhenkoMikpKGxhenkoXCJzb21lMiBhIGIgPSBcXFxcc29tZUNhc2Ugbm9uZUNhc2UgLiBzb21lQ2FzZSBhIGJcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfc29tZUNhc2Upe3JldHVybiBmdW5jdGlvbihMX25vbmVDYXNlKXtyZXR1cm4gcmVzb2x2ZShMX3NvbWVDYXNlKShMX2EpKExfYil9fSwgJ3NvbWUyJyl9fSwgJ3NvbWUyJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibm9uZVwiKSkobGF6eSgwKSkobGF6eShcIm5vbmUgPSBcXFxcc29tZUNhc2Ugbm9uZUNhc2UgLiBub25lQ2FzZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKHNldFR5cGUoZnVuY3Rpb24oTF9zb21lQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfbm9uZUNhc2Upe3JldHVybiByZXNvbHZlKExfbm9uZUNhc2UpfX0sICdub25lJyksICdub25lJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNOb25lXCIpKShsYXp5KDEpKShsYXp5KFwiaXNOb25lIG9iaiA9IGhhc1R5cGUgb2JqIG5vbmVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9ub25lKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNTb21lXCIpKShsYXp5KDEpKShsYXp5KFwiaXNTb21lIG9iaiA9IGhhc1R5cGUgb2JqIHNvbWVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9zb21lKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNTb21lMlwiKSkobGF6eSgxKSkobGF6eShcImlzU29tZTIgb2JqID0gaGFzVHlwZSBvYmogc29tZTJcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9zb21lMil9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm5lcVwiKSkobGF6eSgyKSkobGF6eShcIm5lcSBhIGIgPSBub3QgKGVxIGEgYilcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiByZXNvbHZlKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX2EpKExfYil9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsZWZ0XCIpKShsYXp5KDEpKShsYXp5KFwibGVmdCB4ID0gXFxcXGxDYXNlIHJDYXNlIC4gbENhc2UgeFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9sQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfckNhc2Upe3JldHVybiByZXNvbHZlKExfbENhc2UpKExfeCl9fSwgJ2xlZnQnKX0sICdsZWZ0Jyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmlnaHRcIikpKGxhenkoMSkpKGxhenkoXCJyaWdodCB4ID0gXFxcXGxDYXNlIHJDYXNlIC4gckNhc2UgeFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9sQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfckNhc2Upe3JldHVybiByZXNvbHZlKExfckNhc2UpKExfeCl9fSwgJ3JpZ2h0Jyl9LCAncmlnaHQnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJBc2NcIikpKGxhenkoMSkpKGxhenkoXCJzdHJBc2Mgc3RyaW5nID0gX3N0ckFzYyAoYXNzZXJ0VHlwZSAnc3RyQXNjIHN0cmluZycgJypzdHJpbmcnIHN0cmluZylcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cmluZyl7cmV0dXJuIHJlc29sdmUoTF9fc3RyQXNjKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJBc2Mgc3RyaW5nXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHJpbmcpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJDaHJcIikpKGxhenkoMSkpKGxhenkoXCJzdHJDaHIgYXNjaWkgPSBfc3RyQ2hyIChhc3NlcnRUeXBlICdzdHJDaHIgc3RyaW5nJyAnKm51bWJlcicgYXNjaWkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hc2NpaSl7cmV0dXJuIHJlc29sdmUoTF9fc3RyQ2hyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJDaHIgc3RyaW5nXCIpKShsYXp5KFwiKm51bWJlclwiKSkoTF9hc2NpaSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0ckF0XCIpKShsYXp5KDIpKShsYXp5KFwic3RyQXQgc3RyaW5nIGluZGV4ID0gX3N0ckF0XFxuICBhc3NlcnRUeXBlICdzdHJBdCBzdHJpbmcnICcqc3RyaW5nJyBzdHJpbmdcXG4gIGFzc2VydFR5cGUgJ3N0ckF0IGluZGV4JyAnKm51bWJlcicgaW5kZXhcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cmluZyl7cmV0dXJuIGZ1bmN0aW9uKExfaW5kZXgpe3JldHVybiByZXNvbHZlKExfX3N0ckF0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJBdCBzdHJpbmdcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cmluZyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyQXQgaW5kZXhcIikpKGxhenkoXCIqbnVtYmVyXCIpKShMX2luZGV4KX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0clN0YXJ0c1dpdGhcIikpKGxhenkoMikpKGxhenkoXCJzdHJTdGFydHNXaXRoIHN0cmluZyBwcmVmaXggPSBfc3RyU3RhcnRzV2l0aFxcbiAgYXNzZXJ0VHlwZSAnc3RyU3RhcnRzV2l0aCBzdHJpbmcnICcqc3RyaW5nJyBzdHJpbmdcXG4gIGFzc2VydFR5cGUgJ3N0clN0YXJ0c1dpdGggcHJlZml4JyAnKnN0cmluZycgcHJlZml4XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHJpbmcpe3JldHVybiBmdW5jdGlvbihMX3ByZWZpeCl7cmV0dXJuIHJlc29sdmUoTF9fc3RyU3RhcnRzV2l0aCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyU3RhcnRzV2l0aCBzdHJpbmdcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cmluZyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyU3RhcnRzV2l0aCBwcmVmaXhcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3ByZWZpeCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJMZW5cIikpKGxhenkoMSkpKGxhenkoXCJzdHJMZW4gc3RyaW5nID0gX3N0ckxlbiAoYXNzZXJ0VHlwZSAnc3RyTGVuIHN0cmluZycgJypzdHJpbmcnIHN0cmluZylcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cmluZyl7cmV0dXJuIHJlc29sdmUoTF9fc3RyTGVuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJMZW4gc3RyaW5nXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHJpbmcpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJUb0xvd2VyQ2FzZVwiKSkobGF6eSgxKSkobGF6eShcInN0clRvTG93ZXJDYXNlIHN0cmluZyA9IF9zdHJUb0xvd2VyQ2FzZSAoYXNzZXJ0VHlwZSAnc3RyVG9Mb3dlckNhc2Ugc3RyaW5nJyAnKnN0cmluZycgc3RyaW5nKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyaW5nKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJUb0xvd2VyQ2FzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyVG9Mb3dlckNhc2Ugc3RyaW5nXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHJpbmcpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJUb1VwcGVyQ2FzZVwiKSkobGF6eSgxKSkobGF6eShcInN0clRvVXBwZXJDYXNlIHN0cmluZyA9IF9zdHJUb1VwcGVyQ2FzZSAoYXNzZXJ0VHlwZSAnc3RyVG9VcHBlckNhc2Ugc3RyaW5nJyAnKnN0cmluZycgc3RyaW5nKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyaW5nKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJUb1VwcGVyQ2FzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyVG9VcHBlckNhc2Ugc3RyaW5nXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHJpbmcpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJSZXBsYWNlXCIpKShsYXp5KDMpKShsYXp5KFwic3RyUmVwbGFjZSBzdHJpbmcgcGF0IHJlcGwgPSBfc3RyUmVwbGFjZVxcbiAgYXNzZXJ0VHlwZSAnc3RyUmVwbGFjZSBzdHJpbmcnICcqc3RyaW5nJyBzdHJpbmdcXG4gIGFzc2VydCAob3IgKGhhc1R5cGUgcGF0ICcqc3RyaW5nJykgKGhhc1R5cGUgcGF0ICcqUmVnRXhwJykpIChzdHJDYXQgKGNvbnMgJ3N0clN0YXJ0c1dpdGggcGF0IHNob3VsZCBiZSB0eXBlIHN0cmluZyBvciBSZWdFeHAgYnV0IGl0IGlzIHR5cGUgJyAoY29ucyAoZ2V0VHlwZSBwYXQpIChjb25zICc6ICcgKGNvbnMgKHNob3cgcGF0KSBuaWwpKSkpKSBwYXRcXG4gIGFzc2VydFR5cGUgJ3N0clJlcGxhY2UgcmVwbCcgJypzdHJpbmcnIHJlcGxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cmluZyl7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gZnVuY3Rpb24oTF9yZXBsKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJSZXBsYWNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJSZXBsYWNlIHN0cmluZ1wiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3BhdCkobGF6eShcIipzdHJpbmdcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9wYXQpKGxhenkoXCIqUmVnRXhwXCIpKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RyU3RhcnRzV2l0aCBwYXQgc2hvdWxkIGJlIHR5cGUgc3RyaW5nIG9yIFJlZ0V4cCBidXQgaXQgaXMgdHlwZSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRUeXBlKShMX3BhdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zaG93KShMX3BhdCl9KSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpKExfcGF0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJSZXBsYWNlIHJlcGxcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3JlcGwpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0clN1YnN0cmluZ1wiKSkobGF6eSgzKSkobGF6eShcInN0clN1YnN0cmluZyBzdHIgc3RhcnQgZW5kID0gX3N0clN1YnN0cmluZ1xcbiAgYXNzZXJ0VHlwZSAnc3RyU3Vic3RyaW5nIHN0cicgJypzdHJpbmcnIHN0clxcbiAgYXNzZXJ0VHlwZSAnc3RyU3Vic3RyaW5nIHN0YXJ0JyAnKm51bWJlcicgc3RhcnRcXG4gIGFzc2VydFR5cGUgJ3N0clN1YnN0cmluZyBlbmQnICcqbnVtYmVyJyBlbmRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIHJlc29sdmUoTF9fc3RyU3Vic3RyaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJTdWJzdHJpbmcgc3RyXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0clN1YnN0cmluZyBzdGFydFwiKSkobGF6eShcIipudW1iZXJcIikpKExfc3RhcnQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0clN1YnN0cmluZyBlbmRcIikpKGxhenkoXCIqbnVtYmVyXCIpKShMX2VuZCl9KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3RyU3BsaXRcIikpKGxhenkoMikpKGxhenkoXCJzdHJTcGxpdCBzdHIgcGF0ID0gX3N0clNwbGl0XFxuICBhc3NlcnRUeXBlICdzdHJTcGxpdCBzdHInICcqc3RyaW5nJyBzdHJcXG4gIGFzc2VydCAob3IgKGhhc1R5cGUgcGF0ICcqc3RyaW5nJykgKGhhc1R5cGUgcGF0ICcqUmVnRXhwJykpIChzdHJDYXQgKGNvbnMgJ3N0clNwbGl0IHBhdCBzaG91bGQgYmUgdHlwZSBzdHJpbmcgb3IgUmVnRXhwIGJ1dCBpdCBpcyB0eXBlICcgKGNvbnMgKGdldFR5cGUgcGF0KSAoY29ucyAnOiAnIChjb25zIChzaG93IHBhdCkgbmlsKSkpKSkgcGF0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIHJlc29sdmUoTF9fc3RyU3BsaXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0clNwbGl0IHN0clwiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3BhdCkobGF6eShcIipzdHJpbmdcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9wYXQpKGxhenkoXCIqUmVnRXhwXCIpKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RyU3BsaXQgcGF0IHNob3VsZCBiZSB0eXBlIHN0cmluZyBvciBSZWdFeHAgYnV0IGl0IGlzIHR5cGUgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VHlwZSkoTF9wYXQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjogXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvdykoTF9wYXQpfSkpKExfbmlsKX0pKX0pKX0pKX0pKX0pKShMX3BhdCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJDYXRcIikpKGxhenkoMSkpKGxhenkoXCJzdHJDYXQgbGlzdCA9IF9zdHJDYXRcXG4gIGFzc2VydCAoaXNMaXN0IGxpc3QpIChzdHJDYXQgKGNvbnMgJ3N0ckNhdCBsaXN0IHNob3VsZCBiZSB0eXBlIGNvbnMgb3IgbmlsIGJ1dCBpdCBpcyB0eXBlICcgKGNvbnMgKGdldFR5cGUgbGlzdCkgKGNvbnMgJzogJyAoY29ucyBsaXN0KSkpKSkgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9fc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0xpc3QpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcInN0ckNhdCBsaXN0IHNob3VsZCBiZSB0eXBlIGNvbnMgb3IgbmlsIGJ1dCBpdCBpcyB0eXBlIFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFR5cGUpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9saXN0KX0pKX0pKX0pKX0pKX0pKShMX2xpc3QpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJBZGRcIikpKGxhenkoMikpKGxhenkoXCJzdHJBZGQgc3RyMSBzdHIyID0gX3N0ckFkZCAoYXNzZXJ0VHlwZSAnc3RyQWRkIHN0cjEnICcqc3RyaW5nJyBzdHIxKSAoYXNzZXJ0VHlwZSAnc3RyQWRkIHN0cjInICcqc3RyaW5nJyBzdHIyKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyMSl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyMil7cmV0dXJuIHJlc29sdmUoTF9fc3RyQWRkKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJBZGQgc3RyMVwiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyMSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyQWRkIHN0cjJcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cjIpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3RyTWF0Y2hcIikpKGxhenkoMikpKGxhenkoXCJzdHJNYXRjaCBzdHIgcGF0ID0gX3N0ck1hdGNoXFxuICBhc3NlcnRUeXBlICdzdHJNYXRjaCBzdHInICcqc3RyaW5nJyBzdHJcXG4gIGFzc2VydCAob3IgKGhhc1R5cGUgcGF0ICcqc3RyaW5nJykgKGhhc1R5cGUgcGF0ICcqUmVnRXhwJykpIChzdHJDYXQgKGNvbnMgJ3N0ck1hdGNoIHBhdCBzaG91bGQgYmUgdHlwZSBzdHJpbmcgb3IgUmVnRXhwIGJ1dCBpdCBpcyB0eXBlICcgKGNvbnMgKGdldFR5cGUgcGF0KSAoY29ucyAnOiAnIChjb25zIChzaG93IHBhdCkgbmlsKSkpKSkgcGF0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIHJlc29sdmUoTF9fc3RyTWF0Y2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0ck1hdGNoIHN0clwiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3BhdCkobGF6eShcIipzdHJpbmdcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9wYXQpKGxhenkoXCIqUmVnRXhwXCIpKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RyTWF0Y2ggcGF0IHNob3VsZCBiZSB0eXBlIHN0cmluZyBvciBSZWdFeHAgYnV0IGl0IGlzIHR5cGUgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VHlwZSkoTF9wYXQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjogXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvdykoTF9wYXQpfSkpKExfbmlsKX0pKX0pKX0pKX0pKX0pKShMX3BhdCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJUb0xpc3RcIikpKGxhenkoMSkpKGxhenkoXCJzdHJUb0xpc3Qgc3RyID0gX3N0clRvTGlzdCAoYXNzZXJ0VHlwZSAnc3RyVG9MaXN0IHN0cicgJypzdHJpbmcnIHN0cilcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9fc3RyVG9MaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJUb0xpc3Qgc3RyXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJGcm9tTGlzdFwiKSkobGF6eSgxKSkobGF6eShcInN0ckZyb21MaXN0IGxpc3QgPSBfc3RyRnJvbUxpc3RcXG4gIGFzc2VydCAoaXNMaXN0IGxpc3QpIChzdHJDYXQgKGNvbnMgJ3N0ckZyb21MaXN0IGxpc3Qgc2hvdWxkIGJlIHR5cGUgY29ucyBvciBuaWwgYnV0IGl0IGlzIHR5cGUgJyAoY29ucyAoZ2V0VHlwZSBsaXN0KSAoY29ucyAnOiAnIChjb25zIGxpc3QpKSkpKSBsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX19zdHJGcm9tTGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNMaXN0KShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzdHJGcm9tTGlzdCBsaXN0IHNob3VsZCBiZSB0eXBlIGNvbnMgb3IgbmlsIGJ1dCBpdCBpcyB0eXBlIFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFR5cGUpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9saXN0KX0pKX0pKX0pKX0pKX0pKShMX2xpc3QpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZWdleHBcIikpKGxhenkoMSkpKGxhenkoXCJyZWdleHAgc3RyID0gX3JlZ2V4cCAoYXNzZXJ0VHlwZSAncmVnZXhwIHN0cicgJypzdHJpbmcnIHN0cilcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9fcmVnZXhwKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJyZWdleHAgc3RyXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZWdleHBGbGFnc1wiKSkobGF6eSgyKSkobGF6eShcInJlZ2V4cEZsYWdzIHN0ciBmbGFncyA9IF9yZWdleHBGbGFnc1xcbiAgYXNzZXJ0VHlwZSAncmVnZXhwIHN0cicgJypzdHJpbmcnIHN0clxcbiAgYXNzZXJ0VHlwZSAncmVnZXhwIGZsYWdzJyAnKnN0cmluZycgZmxhZ3NcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfZmxhZ3Mpe3JldHVybiByZXNvbHZlKExfX3JlZ2V4cEZsYWdzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJyZWdleHAgc3RyXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInJlZ2V4cCBmbGFnc1wiKSkobGF6eShcIipzdHJpbmdcIikpKExfZmxhZ3MpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwianNvblBhcnNlXCIpKShsYXp5KDMpKShsYXp5KFwianNvblBhcnNlIHN0ciBmYWlsdXJlIHN1Y2Nlc3MgPSBfanNvblBhcnNlXFxuICBhc3NlcnRUeXBlICdqc29uUGFyc2Ugc3RyJyAnKnN0cmluZycgc3RyXFxuICBmYWlsdXJlXFxuICBzdWNjZXNzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX2ZhaWx1cmUpe3JldHVybiBmdW5jdGlvbihMX3N1Y2Nlc3Mpe3JldHVybiByZXNvbHZlKExfX2pzb25QYXJzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwianNvblBhcnNlIHN0clwiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyKX0pKShMX2ZhaWx1cmUpKExfc3VjY2Vzcyl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2hvd1wiKSkobGF6eSgxKSkobGF6eShcInNob3cgeCA9IF9zaG93IHhcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfX3Nob3cpKExfeCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlkXCIpKShsYXp5KDEpKShsYXp5KFwiaWQgeCA9IHhcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfeCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvbXBvc2VcIikpKGxhenkoMikpKGxhenkoXCJjb21wb3NlIGYgZyA9IFxcXFx4IC4gZiAoZyB4KVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIGZ1bmN0aW9uKExfZyl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF94KXtyZXR1cm4gcmVzb2x2ZShMX2YpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZykoTF94KX0pKX0sICdjb21wb3NlJyl9fSwgJ2NvbXBvc2UnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmbGlwXCIpKShsYXp5KDEpKShsYXp5KFwiZmxpcCBmdW5jID0gXFxcXHggeSAuIGZ1bmMgeSB4XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX3kpe3JldHVybiByZXNvbHZlKExfZnVuYykoTF95KShMX3gpfX0sICdmbGlwJyl9LCAnZmxpcCcpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvbnNcIikpKGxhenkoMikpKGxhenkoXCJjb25zIGEgYiA9IFxcXFxmIC4gZiBhIGJcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKShMX2EpKExfYil9LCAnY29ucycpfX0sICdjb25zJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNDb25zXCIpKShsYXp5KDEpKShsYXp5KFwiaXNDb25zIGMgPSBoYXNUeXBlIGMgY29uc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYyl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX2MpKExfY29ucyl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzTGlzdFwiKSkobGF6eSgxKSkobGF6eShcImlzTGlzdCBsID0gb3IgKGhhc1R5cGUgbCBjb25zKSAoaGFzVHlwZSBsIG5pbClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9sKShMX2NvbnMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9sKShMX25pbCl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFzc2VydFR5cGVcIikpKGxhenkoMykpKGxhenkoXCJhc3NlcnRUeXBlIG1zZyB0eXBlIHZhbHVlID0gYXNzZXJ0IChoYXNUeXBlIHZhbHVlIHR5cGUpIChzdHJDYXQgKGNvbnMgbXNnIChjb25zICcgc2hvdWxkIGJlIHR5cGUgJyAoY29ucyAoZ2V0RGF0YVR5cGUgdHlwZSkgKGNvbnMgJywgYnV0IGl0cyB0eXBlIGlzICcgKGNvbnMgKGdldFR5cGUgdmFsdWUpIChjb25zICc6ICcgKGNvbnMgKHNob3cgdmFsdWUpIG5pbCkpKSkpKSkpIHZhbHVlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9tc2cpe3JldHVybiBmdW5jdGlvbihMX3R5cGUpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3ZhbHVlKShMX3R5cGUpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbXNnKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIgc2hvdWxkIGJlIHR5cGUgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0RGF0YVR5cGUpKExfdHlwZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLCBidXQgaXRzIHR5cGUgaXMgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VHlwZSkoTF92YWx1ZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zaG93KShMX3ZhbHVlKX0pKShMX25pbCl9KSl9KSl9KSl9KSl9KSl9KSl9KSl9KSkoTF92YWx1ZSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibmlsXCIpKShsYXp5KDApKShsYXp5KFwibmlsID0gXFxcXGEgYiAuIGJcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShzZXRUeXBlKGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9iKX19LCAnbmlsJyksICduaWwnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc05pbFwiKSkobGF6eSgxKSkobGF6eShcImlzTmlsIG4gPSBoYXNUeXBlIG4gbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfbikoTF9uaWwpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJoZWFkXCIpKShsYXp5KDEpKShsYXp5KFwiaGVhZCBsID0gbCBcXFxcaCB0IC4gaFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9sKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2gpfX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRhaWxcIikpKGxhenkoMSkpKGxhenkoXCJ0YWlsIGwgPSBsIFxcXFxoIHQgLiB0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfdCl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGFzdFwiKSkobGF6eSgxKSkobGF6eShcImxhc3QgbCA9IGlzTmlsICh0YWlsIGwpXFxuICBoZWFkIGxcXG4gIGxhc3QgKHRhaWwgbClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9sKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sYXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbCl9KSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlbW92ZUxhc3RcIikpKGxhenkoMSkpKGxhenkoXCJyZW1vdmVMYXN0IGwgPSBpc05pbCAodGFpbCBsKVxcbiAgbmlsXFxuICBjb25zIChoZWFkIGwpIChyZW1vdmVMYXN0ICh0YWlsIGwpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2wpfSkpKExfbmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9sKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlbW92ZUxhc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9sKX0pKX0pKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGVuZ3RoXCIpKShsYXp5KDEpKShsYXp5KFwibGVuZ3RoIGxpc3QgPSBpc0NvbnMgbGlzdFxcbiAgKyAxIChsZW5ndGggKHRhaWwgbGlzdCkpXFxuICAwXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRvKShsYXp5KDEpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xlbmd0aCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSkpfSkpfSkpKGxhenkoMCkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhcHBlbmRcIikpKGxhenkoMikpKGxhenkoXCJhcHBlbmQgYSBiID0gaXNOaWwgYVxcbiAgYlxcbiAgY29ucyAoaGVhZCBhKSAoYXBwZW5kICh0YWlsIGEpIGIpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX2EpKExfYikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfYSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9hKX0pKShMX2IpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmxhdHRlblwiKSkobGF6eSgxKSkobGF6eShcImZsYXR0ZW4gbGlzdCA9IGlzQ29ucyBsaXN0XFxuICBzdWJmbGF0dGVuIGxpc3QgbmlsXFxuICBsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N1YmZsYXR0ZW4pKExfbGlzdCkoTF9uaWwpfSkpKExfbGlzdCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN1YmZsYXR0ZW5cIikpKGxhenkoMikpKGxhenkoXCJzdWJmbGF0dGVuIGxpc3QgcmVzdWx0ID0gaXNOaWwgbGlzdFxcbiAgcmVzdWx0XFxuICBpc0NvbnMgbGlzdFxcbiAgICBzdWJmbGF0dGVuIChoZWFkIGxpc3QpIChzdWJmbGF0dGVuICh0YWlsIGxpc3QpIHJlc3VsdClcXG4gICAgY29ucyBsaXN0IHJlc3VsdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX2xpc3QpKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N1YmZsYXR0ZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9saXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N1YmZsYXR0ZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9saXN0KX0pKShMX3Jlc3VsdCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2xpc3QpKExfcmVzdWx0KX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJldmVyc2VcIikpKGxhenkoMSkpKGxhenkoXCJyZXZlcnNlIGwgPSByZXYgbCBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfcmV2KShMX2wpKExfbmlsKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmV2XCIpKShsYXp5KDIpKShsYXp5KFwicmV2IGwgcmVzdWx0ID0gaXNOaWwgbFxcbiAgcmVzdWx0XFxuICByZXYgKHRhaWwgbCkgKGNvbnMgKGhlYWQgbCkgcmVzdWx0KVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX2wpKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JldikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2wpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2wpfSkpKExfcmVzdWx0KX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZpbHRlclwiKSkobGF6eSgyKSkobGF6eShcImZpbHRlciBmdW5jIGxpc3QgPSBpc05pbCBsaXN0XFxuICBuaWxcXG4gIGZ1bmMgKGhlYWQgbGlzdCkgKGNvbnMgKGhlYWQgbGlzdCkpIGlkIChmaWx0ZXIgZnVuYyAodGFpbCBsaXN0KSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbGlzdCkoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZnVuYykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpfSkpKExfaWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyKShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9saXN0KX0pKX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZpbmRcIikpKGxhenkoMikpKGxhenkoXCJmaW5kIHByZWRpY2F0ZSBsaXN0ID0gaXNOaWwgbGlzdFxcbiAgbm9uZVxcbiAgcHJlZGljYXRlIChoZWFkIGxpc3QpIChzb21lIChoZWFkIGxpc3QpKSAoZmluZCBwcmVkaWNhdGUgKHRhaWwgbGlzdCkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wcmVkaWNhdGUpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbGlzdCkoTF9ub25lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3ByZWRpY2F0ZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmluZCkoTF9wcmVkaWNhdGUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9saXN0KX0pKX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvbnRhaW5zXCIpKShsYXp5KDIpKShsYXp5KFwiY29udGFpbnMgbGlzdCBpdGVtID0gZmluZCAoXFxcXGVsIC4gZXEgZWwgaXRlbSkgbGlzdCAoXFxcXHggLiB0cnVlKSBmYWxzZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIHJlc29sdmUoTF9maW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9lbCkoTF9pdGVtKX19KSkoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF94KXtyZXR1cm4gcmVzb2x2ZShMX3RydWUpfX0pKShMX2ZhbHNlKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm1hcFwiKSkobGF6eSgyKSkobGF6eShcIm1hcCBmdW5jIGwgPSBpc05pbCBsXFxuICBuaWxcXG4gIGNvbnMgKGZ1bmMgKGhlYWQgbCkpIChtYXAgZnVuYyAodGFpbCBsKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbCkoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXApKExfZnVuYykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2wpfSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFwU2F2ZVwiKSkobGF6eSgyKSkobGF6eShcIm1hcFNhdmUgZnVuYyBsID0gaXNOaWwgbFxcbiAgbmlsXFxuICBcXFxcXFxcXFxcbiAgICBuZXdIID0gZnVuYyAoaGVhZCBsKVxcbiAgICBuZXdUID0gbWFwU2F2ZSBmdW5jICh0YWlsIGwpXFxuICAgIC5cXG4gICAgYW5kIChlcSBuZXdIIChoZWFkIGwpKSAoZXEgbmV3VCAodGFpbCBsKSlcXG4gICAgICBsXFxuICAgICAgY29ucyBuZXdIIG5ld1RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbCkoTF9uaWwpKGZ1bmN0aW9uKCl7XG52YXIgTF9uZXdULCBMX25ld0g7XG5cbkxfbmV3VCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFwU2F2ZSkoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbCl9KSl9KTtcblxuTF9uZXdIID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbCl9KSl9KTtcbnJldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX25ld0gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9sKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX25ld1QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9sKX0pKX0pKShMX2wpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9uZXdIKShMX25ld1QpfSkpfSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmb2xkbFwiKSkobGF6eSgzKSkobGF6eShcImZvbGRsIGZ1bmMgaW5pdGlhbFZhbHVlIGwgPSBsIChcXFxcaCB0IEQgLiBmb2xkbCBmdW5jIChmdW5jIGluaXRpYWxWYWx1ZSBoKSB0KSBpbml0aWFsVmFsdWVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2luaXRpYWxWYWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9sKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2ZvbGRsKShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZnVuYykoTF9pbml0aWFsVmFsdWUpKExfaCl9KSkoTF90KX19fX0pKShMX2luaXRpYWxWYWx1ZSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZm9sZGwxXCIpKShsYXp5KDIpKShsYXp5KFwiZm9sZGwxIGZ1bmMgbCA9IGwgXFxcXGggdCAuIGZvbGRsIGZ1bmMgaCB0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfZm9sZGwpKExfZnVuYykoTF9oKShMX3QpfX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmb2xkclwiKSkobGF6eSgzKSkobGF6eShcImZvbGRyIGZ1bmMgaW5pdGlhbFZhbHVlIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBmdW5jIGggKGZvbGRyIGZ1bmMgaW5pdGlhbFZhbHVlIHQpXFxuICBpbml0aWFsVmFsdWVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2luaXRpYWxWYWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2Z1bmMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mb2xkcikoTF9mdW5jKShMX2luaXRpYWxWYWx1ZSkoTF90KX0pKX19fX0pKShMX2luaXRpYWxWYWx1ZSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZm9sZHIxXCIpKShsYXp5KDIpKShsYXp5KFwiZm9sZHIxIGZ1bmMgbGlzdCA9IGxpc3QgXFxcXGggdCAuIGlzTmlsIHRcXG4gIGhcXG4gIGZ1bmMgaCAoZm9sZHIxIGZ1bmMgdClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF90KShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZnVuYykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZvbGRyMSkoTF9mdW5jKShMX3QpfSkpfSkpfX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpbnRlcnNwZXJzZVwiKSkobGF6eSgyKSkobGF6eShcImludGVyc3BlcnNlIGxpc3QgZWxlbWVudCA9IGxpc3QgKFxcXFxoIHQgRCAuXFxuICBpc05pbCB0XFxuICAgIGxpc3RcXG4gICAgY29ucyBoIChjb25zIGVsZW1lbnQgKGludGVyc3BlcnNlIHQgZWxlbWVudCkpKSBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2VsZW1lbnQpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF90KShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfZWxlbWVudCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pbnRlcnNwZXJzZSkoTF90KShMX2VsZW1lbnQpfSkpfSkpfSkpfX19fSkpKExfbmlsKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImpvaW5cIikpKGxhenkoMikpKGxhenkoXCJqb2luIGxpc3QgZWwgPSBzdHJDYXQgKGludGVyc3BlcnNlIGxpc3QgZWwpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaW50ZXJzcGVyc2UpKExfbGlzdCkoTF9lbCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmaW5kSW5kZXhcIikpKGxhenkoMikpKGxhenkoXCJmaW5kSW5kZXggZnVuYyBsaXN0ID0gaWR4IGxpc3QgZnVuYyAwXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2lkeCkoTF9saXN0KShMX2Z1bmMpKGxhenkoMCkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaWR4XCIpKShsYXp5KDMpKShsYXp5KFwiaWR4IGxpc3QgZnVuYyBwb3MgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBmdW5jIGhcXG4gICAgcG9zXFxuICAgIGlkeCB0IGZ1bmMgKCsgMSBwb3MpXFxuICAtMVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfZnVuYykoTF9oKShMX3BvcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZHgpKExfdCkoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRvKShsYXp5KDEpKShMX3Bvcyl9KSl9KSl9fX19KSkobGF6eSgtMSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImluZGV4XCIpKShsYXp5KDIpKShsYXp5KFwiaW5kZXggbGlzdCBlbCA9IGZpbmQgKFxcXFxpdGVtIC4gPT0gZWwgaXRlbSkgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfZWwpe3JldHVybiByZXNvbHZlKExfZmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIHJlc29sdmUoTF8kcCRwKShMX2VsKShMX2l0ZW0pfX0pKShMX2xpc3QpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYXNzZXJ0QWxpc3RcIikpKGxhenkoMykpKGxhenkoXCJhc3NlcnRBbGlzdCBtc2cgdmFsdWUgcmVzdWx0ID0gYXNzZXJ0IChpc0FsaXN0IHZhbHVlKSAoc3RyQ2F0IChjb25zIG1zZyAoY29ucyAnIHNob3VsZCBiZSBhIGFzc29jaWF0aW9uIGxpc3QsIGJ1dCBpdCBpcyBub3Q7IGl0cyB0eXBlIGlzICcgKGNvbnMgKGdldFR5cGUgdmFsdWUpIChjb25zICc6ICcgKGNvbnMgKHNob3cgdmFsdWUpIG5pbCkpKSkpKSByZXN1bHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX21zZyl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNBbGlzdCkoTF92YWx1ZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9tc2cpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIiBzaG91bGQgYmUgYSBhc3NvY2lhdGlvbiBsaXN0LCBidXQgaXQgaXMgbm90OyBpdHMgdHlwZSBpcyBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRUeXBlKShMX3ZhbHVlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI6IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Nob3cpKExfdmFsdWUpfSkpKExfbmlsKX0pKX0pKX0pKX0pKX0pKX0pKShMX3Jlc3VsdCl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWNvbnNcIikpKGxhenkoMykpKGxhenkoXCJhY29ucyBrIHYgYWxpc3QgPSBhc3NlcnRBbGlzdCBcXFwiYWNvbnMgYWxpc3RcXFwiIGFsaXN0IChcXFxcQCB0eXBlIGNvbnMgLiBcXFxcZiAuIFxcXFxAIGFzc29jIHRydWUgLiBmIChjb25zIGsgdikgYWxpc3QpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9rKXtyZXR1cm4gZnVuY3Rpb24oTF92KXtyZXR1cm4gZnVuY3Rpb24oTF9hbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRBbGlzdCkobGF6eShcImFjb25zIGFsaXN0XCIpKShMX2FsaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0VHlwZShzZXRMYW1iZGFQcm9wZXJ0aWVzKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaykoTF92KX0pKShMX2FsaXN0KX0sIHtcImFzc29jXCI6XCJ0cnVlXCJ9KSwgJ2NvbnMnKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhc3NvY1wiKSkobGF6eSgyKSkobGF6eShcImFzc29jIGsgYWxpc3QgID0gZmluZCAoXFxcXGVsIC4gZXEgayAoaGVhZCBlbCkpIGFsaXN0IChcXFxcY2VsbCAuIGNlbGwgXFxcXGhlYWQgdGFpbCAuIHNvbWUgdGFpbCkgbm9uZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfayl7cmV0dXJuIGZ1bmN0aW9uKExfYWxpc3Qpe3JldHVybiByZXNvbHZlKExfZmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZWwpe3JldHVybiByZXNvbHZlKExfZXEpKExfaykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2VsKX0pKX19KSkoTF9hbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY2VsbCl7cmV0dXJuIHJlc29sdmUoTF9jZWxsKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oZWFkKXtyZXR1cm4gZnVuY3Rpb24oTF90YWlsKXtyZXR1cm4gcmVzb2x2ZShMX3NvbWUpKExfdGFpbCl9fX0pKX19KSkoTF9ub25lKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJhc3NvY1wiKSkobGF6eSgyKSkobGF6eShcInJhc3NvYyB2IGFsaXN0ID0gZmluZCAoXFxcXGVsIC4gZXEgdiAodGFpbCBlbCkpIGFsaXN0IChcXFxcY2VsbCAuIGNlbGwgXFxcXGhlYWQgdGFpbCAuIHNvbWUgaGVhZCkgbm9uZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdil7cmV0dXJuIGZ1bmN0aW9uKExfYWxpc3Qpe3JldHVybiByZXNvbHZlKExfZmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZWwpe3JldHVybiByZXNvbHZlKExfZXEpKExfdikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2VsKX0pKX19KSkoTF9hbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY2VsbCl7cmV0dXJuIHJlc29sdmUoTF9jZWxsKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oZWFkKXtyZXR1cm4gZnVuY3Rpb24oTF90YWlsKXtyZXR1cm4gcmVzb2x2ZShMX3NvbWUpKExfaGVhZCl9fX0pKX19KSkoTF9ub25lKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzQWxpc3RcIikpKGxhenkoMSkpKGxhenkoXCJpc0FsaXN0IG9iaiA9IG9yIChpc05pbCBvYmopIChoYXNQcm9wZXJ0eSBvYmogJ2Fzc29jJylcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9vYmopfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFzUHJvcGVydHkpKExfb2JqKShsYXp5KFwiYXNzb2NcIikpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhY29uc1BhaXJcIikpKGxhenkoMikpKGxhenkoXCJhY29uc1BhaXIga2V5VmFsdWUgbGlzdCA9IFxcXFxAIHR5cGUgY29ucyAuIFxcXFxmIC4gXFxcXEAgYXNzb2MgdHJ1ZSAuIGYga2V5VmFsdWUgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfa2V5VmFsdWUpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBzZXRUeXBlKHNldExhbWJkYVByb3BlcnRpZXMoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfa2V5VmFsdWUpKExfbGlzdCl9LCB7XCJhc3NvY1wiOlwidHJ1ZVwifSksICdjb25zJyl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhcHBlbmRBbGlzdFwiKSkobGF6eSgyKSkobGF6eShcImFwcGVuZEFsaXN0IGEgYiA9IGlzTmlsIGFcXG4gIGJcXG4gIGFjb25zUGFpciAoaGVhZCBhKSAoYXBwZW5kQWxpc3QgKHRhaWwgYSkgYilcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfYSkoTF9iKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zUGFpcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2EpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXBwZW5kQWxpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9hKX0pKShMX2IpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwia2V5c1wiKSkobGF6eSgxKSkobGF6eShcImtleXMgbGlzdCA9IG1hcCAoXFxcXGwgLiBoZWFkIGwpIGxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbWFwKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbCl9fSkpKExfbGlzdCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImdldFByb3BlcnR5XCIpKShsYXp5KDIpKShsYXp5KFwiZ2V0UHJvcGVydHkgZnVuYyBwcm9wID0gZ2V0UHJvcGVydGllcyBmdW5jXFxuICBcXFxccHJvcHMgLiBhc3NvYyBwcm9wIHByb3BzXFxuICBub25lXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9wcm9wKXtyZXR1cm4gcmVzb2x2ZShMX2dldFByb3BlcnRpZXMpKExfZnVuYykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcHJvcHMpe3JldHVybiByZXNvbHZlKExfYXNzb2MpKExfcHJvcCkoTF9wcm9wcyl9fSkpKExfbm9uZSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJoYXNQcm9wZXJ0eVwiKSkobGF6eSgyKSkobGF6eShcImhhc1Byb3BlcnR5IGZ1bmMgcHJvcCA9IGdldFByb3BlcnR5IGZ1bmMgcHJvcFxcbiAgXFxcXF8gLiB0cnVlXFxuICBmYWxzZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfcHJvcCl7cmV0dXJuIHJlc29sdmUoTF9nZXRQcm9wZXJ0eSkoTF9mdW5jKShMX3Byb3ApKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfdHJ1ZSl9fSkpKExfZmFsc2UpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicXVpY2tzb3J0XCIpKShsYXp5KDIpKShsYXp5KFwicXVpY2tzb3J0IGxlc3MgbGlzdCA9IChxcyBsZXNzIGxpc3QpIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGVzcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9xcykoTF9sZXNzKShMX2xpc3QpKExfbmlsKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInFzXCIpKShsYXp5KDIpKShsYXp5KFwicXMgc29ydGVkRnVuYyBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gXFxcXFxcXFxcXG4gICAgZ3JlYXRlciA9IGZpbHRlciAoc29ydGVkRnVuYyBoKSB0XFxuICAgIGxlc3NlciA9IGZpbHRlciAoY29tcG9zZSBub3QgKHNvcnRlZEZ1bmMgaCkpIHRcXG4gICAgLlxcbiAgICBcXFxccmVzdCAuIChxcyBzb3J0ZWRGdW5jIGxlc3NlcikgKGNvbnMgaCAoKHFzIHNvcnRlZEZ1bmMgZ3JlYXRlcikgcmVzdCkpXFxuICBpZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc29ydGVkRnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX2xlc3NlciwgTF9ncmVhdGVyO1xuXG5MX2xlc3NlciA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbXBvc2UpKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NvcnRlZEZ1bmMpKExfaCl9KSl9KSkoTF90KX0pO1xuXG5MX2dyZWF0ZXIgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zb3J0ZWRGdW5jKShMX2gpfSkpKExfdCl9KTtcbnJldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfcXMpKExfc29ydGVkRnVuYykoTF9sZXNzZXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3FzKShMX3NvcnRlZEZ1bmMpKExfZ3JlYXRlcikoTF9yZXN0KX0pKX0pKX19KSgpfX19fSkpKExfaWQpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaW5zZXJ0U29ydGVkXCIpKShsYXp5KDMpKShsYXp5KFwiaW5zZXJ0U29ydGVkIHNvcnRGdW5jIGl0ZW0gbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIHNvcnRGdW5jIGl0ZW0gaCAoY29ucyBpdGVtIGxpc3QpIChjb25zIGggKGluc2VydFNvcnRlZCBzb3J0RnVuYyBpdGVtIHQpKVxcbiAgY29ucyBpdGVtIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc29ydEZ1bmMpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9zb3J0RnVuYykoTF9pdGVtKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9pdGVtKShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2luc2VydFNvcnRlZCkoTF9zb3J0RnVuYykoTF9pdGVtKShMX3QpfSkpfSkpfX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9pdGVtKShMX25pbCl9KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidG9rZW5cIikpKGxhenkoMikpKGxhenkoXCJ0b2tlbiB0eHQgcG9zID0gXFxcXGYgLiBmIHR4dCBwb3NcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX3R4dCl7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF90eHQpKExfcG9zKX0sICd0b2tlbicpfX0sICd0b2tlbicpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRva2VuU3RyaW5nXCIpKShsYXp5KDEpKShsYXp5KFwidG9rZW5TdHJpbmcgdG9rID0gdG9rIFxcXFx0IHAgLiB0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiByZXNvbHZlKExfdG9rKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gcmVzb2x2ZShMX3QpfX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRva2VuUG9zXCIpKShsYXp5KDEpKShsYXp5KFwidG9rZW5Qb3MgdG9rID0gdG9rIFxcXFx0IHAgLiBwXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiByZXNvbHZlKExfdG9rKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gcmVzb2x2ZShMX3ApfX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzVG9rZW5cIikpKGxhenkoMSkpKGxhenkoXCJpc1Rva2VuIHQgPSBoYXNUeXBlIHQgdG9rZW5cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF90KShMX3Rva2VuKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyZW5zXCIpKShsYXp5KDMpKShsYXp5KFwicGFyZW5zIHN0YXJ0IGVuZCBjb250ZW50ID0gXFxcXGYgLiBmIHN0YXJ0IGVuZCBjb250ZW50XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfZW5kKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250ZW50KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF9zdGFydCkoTF9lbmQpKExfY29udGVudCl9LCAncGFyZW5zJyl9fX0sICdwYXJlbnMnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJlbnNTdGFydFwiKSkobGF6eSgxKSkobGF6eShcInBhcmVuc1N0YXJ0IHAgPSBwIFxcXFxzIGUgYyAuIHNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiByZXNvbHZlKExfcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcyl7cmV0dXJuIGZ1bmN0aW9uKExfZSl7cmV0dXJuIGZ1bmN0aW9uKExfYyl7cmV0dXJuIHJlc29sdmUoTF9zKX19fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyZW5zRW5kXCIpKShsYXp5KDEpKShsYXp5KFwicGFyZW5zRW5kIHAgPSBwIFxcXFxzIGUgYyAuIGVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiByZXNvbHZlKExfcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcyl7cmV0dXJuIGZ1bmN0aW9uKExfZSl7cmV0dXJuIGZ1bmN0aW9uKExfYyl7cmV0dXJuIHJlc29sdmUoTF9lKX19fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyZW5zQ29udGVudFwiKSkobGF6eSgxKSkobGF6eShcInBhcmVuc0NvbnRlbnQgcCA9IHAgXFxcXHMgZSBjIC4gY1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcCl7cmV0dXJuIHJlc29sdmUoTF9wKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zKXtyZXR1cm4gZnVuY3Rpb24oTF9lKXtyZXR1cm4gZnVuY3Rpb24oTF9jKXtyZXR1cm4gcmVzb2x2ZShMX2MpfX19fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc1BhcmVuc1wiKSkobGF6eSgxKSkobGF6eShcImlzUGFyZW5zIHAgPSBoYXNUeXBlIHAgcGFyZW5zXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfcCkoTF9wYXJlbnMpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWtlUGFyZW5zXCIpKShsYXp5KDMpKShsYXp5KFwibWFrZVBhcmVucyBzdGFydCBlbmQgY29udGVudCA9XFxuICBhbmQgKGlzQ29ucyBjb250ZW50KSAoaXNOaWwgKHRhaWwgY29udGVudCkpXFxuICAgIG1ha2VQYXJlbnMgc3RhcnQgZW5kIChoZWFkIGNvbnRlbnQpXFxuICAgIG9yIChpc1Rva2VuIGNvbnRlbnQpIChpc1BhcmVucyBjb250ZW50KVxcbiAgICAgIGNvbnRlbnRcXG4gICAgICBwYXJlbnMgc3RhcnQgZW5kIGNvbnRlbnRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9jb250ZW50KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfY29udGVudCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlUGFyZW5zKShMX3N0YXJ0KShMX2VuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2NvbnRlbnQpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF9jb250ZW50KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX2NvbnRlbnQpfSkpKExfY29udGVudCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnMpKExfc3RhcnQpKExfZW5kKShMX2NvbnRlbnQpfSkpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcmVuc0Zyb21Ub2tzXCIpKShsYXp5KDMpKShsYXp5KFwicGFyZW5zRnJvbVRva3MgbGVmdCByaWdodCBjb250ZW50ID0gXFxcXFxcXFxcXG4gIHN0YXJ0ID0gdG9rZW5Qb3MgbGVmdFxcbiAgZW5kID0gKyAodG9rZW5Qb3MgcmlnaHQpIChzdHJMZW4gKHRva2VuU3RyaW5nIHJpZ2h0KSlcXG4gIC5cXG4gIHBhcmVucyBzdGFydCBlbmQgY29udGVudFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGVmdCl7cmV0dXJuIGZ1bmN0aW9uKExfcmlnaHQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZW5kLCBMX3N0YXJ0O1xuXG5MX2VuZCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5Qb3MpKExfcmlnaHQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX3JpZ2h0KX0pKX0pKX0pO1xuXG5MX3N0YXJ0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblBvcykoTF9sZWZ0KX0pO1xucmV0dXJuIHJlc29sdmUoTF9wYXJlbnMpKExfc3RhcnQpKExfZW5kKShMX2NvbnRlbnQpfSkoKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJpcFBhcmVuc1wiKSkobGF6eSgxKSkobGF6eShcInN0cmlwUGFyZW5zIHAgPSBpc1BhcmVucyBwIChwYXJlbnNDb250ZW50IHApIHBcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiByZXNvbHZlKExfaXNQYXJlbnMpKExfcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnNDb250ZW50KShMX3ApfSkpKExfcCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlRXJyXCIpKShsYXp5KDIpKShsYXp5KFwicGFyc2VFcnIgbXNnMSBtc2cyID0gXFxcXGYgLiBmIChzdHJDYXQgKGNvbnMgbXNnMSAoY29ucyBtc2cyIG5pbCkpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfbXNnMSl7cmV0dXJuIGZ1bmN0aW9uKExfbXNnMil7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbXNnMSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX21zZzIpKExfbmlsKX0pKX0pKX0pKX0sICdwYXJzZUVycicpfX0sICdwYXJzZUVycicpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlRXJyTXNnXCIpKShsYXp5KDEpKShsYXp5KFwicGFyc2VFcnJNc2cgZXJyID0gZXJyIFxcXFxtIC4gbVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gcmVzb2x2ZShMX2VycikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbSl7cmV0dXJuIHJlc29sdmUoTF9tKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzUGFyc2VFcnJcIikpKGxhenkoMSkpKGxhenkoXCJpc1BhcnNlRXJyIHRoaW5nID0gaGFzVHlwZSB0aGluZyBwYXJzZUVyclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdGhpbmcpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF90aGluZykoTF9wYXJzZUVycil9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImVtcHR5VG9rZW5cIikpKGxhenkoMCkpKGxhenkoXCJlbXB0eVRva2VuID0gcmVnZXhwICdeXFxcXFxcXFxuWyBcXFxcXFxcXGldKigjfCQpJ1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZWdleHApKGxhenkoXCJeXFxcXG5bIFxcXFxpXSooI3wkKVwiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFrZVRva2Vuc1wiKSkobGF6eSgyKSkobGF6eShcIm1ha2VUb2tlbnMgc3RyaW5ncyBzdGFydCA9IHN0cmluZ3MgKFxcXFxoIHQgRCAuIG1ha2VNb3JlVG9rZW5zIGggdCBzdGFydCkgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHJpbmdzKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIHJlc29sdmUoTF9zdHJpbmdzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VNb3JlVG9rZW5zKShMX2gpKExfdCkoTF9zdGFydCl9fX19KSkoTF9uaWwpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFrZU1vcmVUb2tlbnNcIikpKGxhenkoMykpKGxhenkoXCJtYWtlTW9yZVRva2VucyBoIHQgc3RhcnQgPSBcXFxcXFxcXFxcbiAgbmV4dCA9IG1ha2VUb2tlbnMgdCAoKyBzdGFydCAoc3RyTGVuIGgpKVxcbiAgLlxcbiAgYW5kIChzdHJNYXRjaGVzIGggZW1wdHlUb2tlbikgKG9yIChpc05pbCB0KSAoc3RyU3RhcnRzV2l0aCAoaGVhZCB0KSAnXFxcXG4nKSlcXG4gICAgbWFrZVRva2VucyB0ICgrIHN0YXJ0IChzdHJMZW4gaCkpXFxuICAgIG9yIChzdHJTdGFydHNXaXRoIGggJyAnKSAoc3RyU3RhcnRzV2l0aCBoICcjJylcXG4gICAgICBuZXh0XFxuICAgICAgYW5kIChzdHJTdGFydHNXaXRoIGggJ1xcXFxuJykgKHN0clN0YXJ0c1dpdGggKGhlYWQgdCkgJyMnKVxcbiAgICAgICAgbWFrZVRva2VucyAodGFpbCB0KSAoKyBzdGFydCAoKyAoc3RyTGVuIGgpIChzdHJMZW4gKGhlYWQgdCkpKSlcXG4gICAgICAgIGNvbnMgKHRva2VuIGggc3RhcnQpIG5leHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX25leHQ7XG5cbkxfbmV4dCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZVRva2VucykoTF90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRvKShMX3N0YXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoTF9oKX0pKX0pKX0pO1xucmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTWF0Y2hlcykoTF9oKShMX2VtcHR5VG9rZW4pfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdGFydHNXaXRoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdCl9KSkobGF6eShcIlxcblwiKSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlVG9rZW5zKShMX3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKExfc3RhcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX2gpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3RhcnRzV2l0aCkoTF9oKShsYXp5KFwiIFwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdGFydHNXaXRoKShMX2gpKGxhenkoXCIjXCIpKX0pKShMX25leHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKExfaCkobGF6eShcIlxcblwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdGFydHNXaXRoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdCl9KSkobGF6eShcIiNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZVRva2VucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKExfc3RhcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX2gpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdCl9KSl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuKShMX2gpKExfc3RhcnQpfSkpKExfbmV4dCl9KSl9KSl9KSl9KSgpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNwbGl0VG9rZW5zXCIpKShsYXp5KDIpKShsYXp5KFwic3BsaXRUb2tlbnMgc3RyIHBhdCA9IGZpbHRlciAoXFxcXHMgLiBub3QgKGVxIHMgJycpKSAoYmFzaWNTcGxpdFRva2VucyBzdHIgcGF0IHRydWUpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Mpe3JldHVybiByZXNvbHZlKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX3MpKGxhenkoXCJcIikpfSkpfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Jhc2ljU3BsaXRUb2tlbnMpKExfc3RyKShMX3BhdCkoTF90cnVlKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm51bWJlclBhdFwiKSkobGF6eSgwKSkobGF6eShcIm51bWJlclBhdCA9IHJlZ2V4cCAnLT8oWzAtOV0rKFxcXFxcXFxcLlswLTldKyk/fFxcXFxcXFxcLlswLTldKyknXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIi0/KFswLTldKyhcXFxcLlswLTldKyk/fFxcXFwuWzAtOV0rKVwiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWF0Y2hPZmZzZXRcIikpKGxhenkoMikpKGxhenkoXCJtYXRjaE9mZnNldCBzdHIgbWF0Y2ggPSBpc05pbCBtYXRjaFxcbiAgc3RyTGVuIHN0clxcbiAgaGVhZCAodGFpbCAodGFpbCBtYXRjaCkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX21hdGNoKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX21hdGNoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbWF0Y2gpfSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYmFzaWNTcGxpdFRva2Vuc1wiKSkobGF6eSgzKSkobGF6eShcImJhc2ljU3BsaXRUb2tlbnMgc3RyIHBhdCBwcmV2SXNEZWwgPSA9PSBzdHIgJydcXG4gIG5pbFxcbiAgXFxcXFxcXFxcXG4gICAgbnVtID0gc3RyTWF0Y2ggc3RyIG51bWJlclBhdFxcbiAgICBkZWwgPSBzdHJNYXRjaCBzdHIgcGF0XFxuICAgIG51bU9mZnNldCA9IG1hdGNoT2Zmc2V0IHN0ciBudW1cXG4gICAgZGVsT2Zmc2V0ID0gbWF0Y2hPZmZzZXQgc3RyIGRlbFxcbiAgICBzZWxlY3QgPSBhbmQgKD09IG51bU9mZnNldCAwKSBwcmV2SXNEZWxcXG4gICAgICBcXFxcZGVsIG51bSBmaXJzdCAuIG51bVxcbiAgICAgID09IGRlbE9mZnNldCAwXFxuICAgICAgICBcXFxcZGVsIG51bSBmaXJzdCAuIGRlbFxcbiAgICAgICAgXFxcXGRlbCBudW0gZmlyc3QgLiBmaXJzdFxcbiAgICBmaXJzdCA9IHNlbGVjdCAoaGVhZCBkZWwpIChoZWFkIG51bSkgKHN0clN1YnN0cmluZyBzdHIgMCBkZWxPZmZzZXQpXFxuICAgIC5cXG4gICAgY29uc1xcbiAgICAgIGZpcnN0XFxuICAgICAgYmFzaWNTcGxpdFRva2Vuc1xcbiAgICAgICAgc3RyU3Vic3RyaW5nIHN0ciAoc3RyTGVuIGZpcnN0KSAwXFxuICAgICAgICBwYXRcXG4gICAgICAgIHNlbGVjdCB0cnVlIGZhbHNlIGZhbHNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIGZ1bmN0aW9uKExfcHJldklzRGVsKXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKExfc3RyKShsYXp5KFwiXCIpKShMX25pbCkoZnVuY3Rpb24oKXtcbnZhciBMX2ZpcnN0LCBMX3NlbGVjdCwgTF9kZWxPZmZzZXQsIExfbnVtT2Zmc2V0LCBMX2RlbCwgTF9udW07XG5cbkxfZmlyc3QgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NlbGVjdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2RlbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX251bSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdWJzdHJpbmcpKExfc3RyKShsYXp5KDApKShMX2RlbE9mZnNldCl9KSl9KTtcblxuTF9zZWxlY3QgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kcCRwKShMX251bU9mZnNldCkobGF6eSgwKSl9KSkoTF9wcmV2SXNEZWwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RlbF8wKXtyZXR1cm4gZnVuY3Rpb24oTF9udW1fMSl7cmV0dXJuIGZ1bmN0aW9uKExfZmlyc3Qpe3JldHVybiByZXNvbHZlKExfbnVtXzEpfX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHAkcCkoTF9kZWxPZmZzZXQpKGxhenkoMCkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RlbF8wKXtyZXR1cm4gZnVuY3Rpb24oTF9udW1fMSl7cmV0dXJuIGZ1bmN0aW9uKExfZmlyc3Qpe3JldHVybiByZXNvbHZlKExfZGVsXzApfX19fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RlbF8wKXtyZXR1cm4gZnVuY3Rpb24oTF9udW1fMSl7cmV0dXJuIGZ1bmN0aW9uKExfZmlyc3Qpe3JldHVybiByZXNvbHZlKExfZmlyc3QpfX19fSkpfSkpfSk7XG5cbkxfZGVsT2Zmc2V0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXRjaE9mZnNldCkoTF9zdHIpKExfZGVsKX0pO1xuXG5MX251bU9mZnNldCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWF0Y2hPZmZzZXQpKExfc3RyKShMX251bSl9KTtcblxuTF9kZWwgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ck1hdGNoKShMX3N0cikoTF9wYXQpfSk7XG5cbkxfbnVtID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJNYXRjaCkoTF9zdHIpKExfbnVtYmVyUGF0KX0pO1xucmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2ZpcnN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Jhc2ljU3BsaXRUb2tlbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3Vic3RyaW5nKShMX3N0cikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKExfZmlyc3QpfSkpKGxhenkoMCkpfSkpKExfcGF0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NlbGVjdCkoTF90cnVlKShMX2ZhbHNlKShMX2ZhbHNlKX0pKX0pKX0pfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRva2Vuc1wiKSkobGF6eSgyKSkobGF6eShcInRva2VucyBzdHIgcGF0ID0gbWFrZVRva2VucyAoc3BsaXRUb2tlbnMgc3RyIHBhdCkgMFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiByZXNvbHZlKExfbWFrZVRva2VucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zcGxpdFRva2VucykoTF9zdHIpKExfcGF0KX0pKShsYXp5KDApKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzU3RyaW5nXCIpKShsYXp5KDEpKShsYXp5KFwiaXNTdHJpbmcgcyA9ID09IChnZXRUeXBlIHMpICcqc3RyaW5nJ1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcyl7cmV0dXJuIHJlc29sdmUoTF8kcCRwKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFR5cGUpKExfcyl9KSkobGF6eShcIipzdHJpbmdcIikpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc051bWJlclwiKSkobGF6eSgxKSkobGF6eShcImlzTnVtYmVyIHMgPSA9PSAoZ2V0VHlwZSBzKSAnKm51bWJlcidcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Mpe3JldHVybiByZXNvbHZlKExfJHAkcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRUeXBlKShMX3MpfSkpKGxhenkoXCIqbnVtYmVyXCIpKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNUb2tlblN0cmluZ1wiKSkobGF6eSgyKSkobGF6eShcImlzVG9rZW5TdHJpbmcgdG9rIHN0ciA9IG9yXFxuICBhbmQgKGlzVG9rZW4gdG9rKSAoZXEgKHRva2VuU3RyaW5nIHRvaykgc3RyKVxcbiAgYW5kIChpc1N0cmluZyB0b2spIChlcSB0b2sgc3RyKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfdG9rKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX3Rvayl9KSkoTF9zdHIpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzU3RyaW5nKShMX3Rvayl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF90b2spKExfc3RyKX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzVG9rZW5TdGFydFwiKSkobGF6eSgyKSkobGF6eShcImlzVG9rZW5TdGFydCB0b2sgc3RyID0gb3JcXG4gIGFuZCAoaXNUb2tlbiB0b2spIChzdHJTdGFydHNXaXRoICh0b2tlblN0cmluZyB0b2spIHN0cilcXG4gIGFuZCAoaXNTdHJpbmcgdG9rKSAoc3RyU3RhcnRzV2l0aCB0b2sgc3RyKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfdG9rKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfdG9rKX0pKShMX3N0cil9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNTdHJpbmcpKExfdG9rKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKExfdG9rKShMX3N0cil9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJUb2tlblN0cmluZ1wiKSkobGF6eSgxKSkobGF6eShcInN0clRva2VuU3RyaW5nIHRvayA9IHdpdGhUb2tlbiB0b2sgbmlsIFxcXFxzdHIgcG9zIC4gc3RyXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiByZXNvbHZlKExfd2l0aFRva2VuKShMX3RvaykoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gcmVzb2x2ZShMX3N0cil9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwid2l0aFRva2VuXCIpKShsYXp5KDMpKShsYXp5KFwid2l0aFRva2VuIHRvayBub25Ub2tDYXNlIHRva0Nhc2UgPSBpc1Rva2VuIHRva1xcbiAgdG9rIHRva0Nhc2VcXG4gIGlzU3RyaW5nIHRva1xcbiAgICB0b2tDYXNlIHRvayAtMVxcbiAgICBub25Ub2tDYXNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX25vblRva0Nhc2Upe3JldHVybiBmdW5jdGlvbihMX3Rva0Nhc2Upe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF90b2spKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShMX3Rva0Nhc2UpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNTdHJpbmcpKExfdG9rKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva0Nhc2UpKExfdG9rKShsYXp5KC0xKSl9KSkoTF9ub25Ub2tDYXNlKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ3aXRoQ29uc1wiKSkobGF6eSgzKSkobGF6eShcIndpdGhDb25zIGwgbmlsQ2FzZSBjb250ID0gaXNDb25zIGwgKGwgKFxcXFxoIHQgRCAuIGNvbnQgaCB0KSBuaWxDYXNlKSBuaWxDYXNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gZnVuY3Rpb24oTF9uaWxDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9sKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfY29udCkoTF9oKShMX3QpfX19fSkpKExfbmlsQ2FzZSl9KSkoTF9uaWxDYXNlKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpZk5vdEVyclwiKSkobGF6eSgyKSkobGF6eShcImlmTm90RXJyIHRoaW5nIGNvbnQgPSBoYXNUeXBlIHRoaW5nIHBhcnNlRXJyIHRoaW5nIChjb250IHRoaW5nKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdGhpbmcpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF90aGluZykoTF9wYXJzZUVycikoTF90aGluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX3RoaW5nKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlVG9rc1wiKSkobGF6eSgyKSkobGF6eShcInBhcnNlVG9rcyB0b2tzIGdyb3VwcyA9XFxuICBpc05pbCB0b2tzIG5pbFxcbiAgICBpZk5vdEVyciAocGFyc2VUb2sgdG9rcyBncm91cHMpIFxcXFxsaXN0IC4gbGlzdCBcXFxcaCB0IC5cXG4gICAgICBpZk5vdEVyciAocGFyc2VUb2tzIHQgZ3JvdXBzKSBcXFxccmVzIC5cXG4gICAgICAgIGNvbnMgaFxcbiAgICAgICAgICBhbmQgKGlzQ29ucyByZXMpIChpc0Jsb2NrU3RhcnQgKGhlYWQgcmVzKSlcXG4gICAgICAgICAgICBjb25zIHJlcyBuaWxcXG4gICAgICAgICAgICByZXNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF90b2tzKShMX25pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZVRvaykoTF90b2tzKShMX2dyb3Vwcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlVG9rcykoTF90KShMX2dyb3Vwcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX3Jlcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0Jsb2NrU3RhcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9yZXMpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9yZXMpKExfbmlsKX0pKShMX3Jlcyl9KSl9fSkpfX19KSl9fSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VUb2tcIikpKGxhenkoMikpKGxhenkoXCJwYXJzZVRvayB0b2tzIGdyb3VwcyA9IHdpdGhDb25zIHRva3MgbmlsIFxcXFxoIHQgLlxcbiAgd2l0aFRva2VuIGggdG9rcyBcXFxcdHh0IHBvcyAuXFxuICAgIGFzc29jIHR4dCBncm91cHNcXG4gICAgICBcXFxcY2xvc2UgLiBwYXJzZUdyb3VwIGggdCBuaWwgY2xvc2UgZ3JvdXBzXFxuICAgICAgaXNUb2tlblN0YXJ0IGggJ1xcXFxuJyAocGFyc2VJbmRlbnQgaCB0IG5pbCBncm91cHMpXFxuICAgICAgICB0b2tzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfdG9rcykoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfd2l0aFRva2VuKShMX2gpKExfdG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdHh0KXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiByZXNvbHZlKExfYXNzb2MpKExfdHh0KShMX2dyb3VwcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY2xvc2Upe3JldHVybiByZXNvbHZlKExfcGFyc2VHcm91cCkoTF9oKShMX3QpKExfbmlsKShMX2Nsb3NlKShMX2dyb3Vwcyl9fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0YXJ0KShMX2gpKGxhenkoXCJcXG5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VJbmRlbnQpKExfaCkoTF90KShMX25pbCkoTF9ncm91cHMpfSkpKExfdG9rcyl9KSl9fX0pKX19fSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VHcm91cFwiKSkobGF6eSg1KSkobGF6eShcInBhcnNlR3JvdXAgbGVmdCB0b2tzIGdyIGNsb3NlIGdyb3VwcyA9IHdpdGhDb25zIHRva3MgKHBhcnNlRXJyICdVbnRlcm1pbmF0ZWQgZ3JvdXAgc3RhcnRpbmcgJyAobG9jIGxlZnQpKVxcbiAgXFxcXGggdCAuIGlzVG9rZW5TdHJpbmcgaCBjbG9zZVxcbiAgICBlcSBjbG9zZSAnKSdcXG4gICAgICBjb25zIChwYXJlbnNGcm9tVG9rcyBsZWZ0IGggKHJldmVyc2UgZ3IpKSB0XFxuICAgICAgY29ucyAoY29ucyBsZWZ0IChjb25zIChyZXZlcnNlIGdyKSAoY29ucyBoIG5pbCkpKSB0XFxuICAgIHdpdGhUb2tlbiBoXFxuICAgICAgaWZOb3RFcnIgKHBhcnNlVG9rIHRva3MgZ3JvdXBzKSBcXFxcbGlzdCAuIGxpc3QgXFxcXHJlc3RIIHJlc3RUIC5cXG4gICAgICAgIHBhcnNlR3JvdXAgbGVmdCByZXN0VCAoY29ucyByZXN0SCBncikgY2xvc2UgZ3JvdXBzXFxuICAgICAgXFxcXHR4dCBwb3MgLlxcbiAgICAgICAgcmFzc29jIHR4dCBncm91cHNcXG4gICAgICAgICAgXFxcXG9wZW4gLiBwYXJzZUVyciAoc3RyQ2F0IChjb25zICdNaXNtYXRjaGVkIGdyb3VwOiAnIChjb25zICh0b2tlblN0cmluZyBsZWZ0KSAoY29ucyB0eHQgKGNvbnMgJyAnIG5pbCkpKSkpIChsb2MgbGVmdClcXG4gICAgICAgICAgaWZOb3RFcnIgKHBhcnNlVG9rIHRva3MgZ3JvdXBzKSBcXFxcbGlzdCAuIGxpc3QgXFxcXHJlc3RIIHJlc3RUIC4gcGFyc2VHcm91cCBsZWZ0IHJlc3RUIChjb25zIHJlc3RIIGdyKSBjbG9zZSBncm91cHNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xlZnQpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX2dyKXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZSl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX3Rva3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJVbnRlcm1pbmF0ZWQgZ3JvdXAgc3RhcnRpbmcgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9sZWZ0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkoTF9jbG9zZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9jbG9zZSkobGF6eShcIilcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnNGcm9tVG9rcykoTF9sZWZ0KShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmV2ZXJzZSkoTF9ncil9KSl9KSkoTF90KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9sZWZ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmV2ZXJzZSkoTF9ncil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKExfbmlsKX0pKX0pKX0pKShMX3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfd2l0aFRva2VuKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VUb2spKExfdG9rcykoTF9ncm91cHMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdEgpe3JldHVybiBmdW5jdGlvbihMX3Jlc3RUKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlR3JvdXApKExfbGVmdCkoTF9yZXN0VCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3Jlc3RIKShMX2dyKX0pKShMX2Nsb3NlKShMX2dyb3Vwcyl9fX0pKX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdHh0KXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiByZXNvbHZlKExfcmFzc29jKShMX3R4dCkoTF9ncm91cHMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29wZW4pe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJNaXNtYXRjaGVkIGdyb3VwOiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9sZWZ0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdHh0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIgXCIpKShMX25pbCl9KSl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfbGVmdCl9KSl9fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VUb2spKExfdG9rcykoTF9ncm91cHMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdEgpe3JldHVybiBmdW5jdGlvbihMX3Jlc3RUKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlR3JvdXApKExfbGVmdCkoTF9yZXN0VCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3Jlc3RIKShMX2dyKX0pKShMX2Nsb3NlKShMX2dyb3Vwcyl9fX0pKX19KSl9KSl9fX0pKX0pKX19fSkpfX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VJbmRlbnRcIikpKGxhenkoNCkpKGxhenkoXCJwYXJzZUluZGVudCBpbmRlbnQgdG9rcyBnciBncm91cHMgPVxcbiAgd2l0aENvbnMgdG9rcyAoY29ucyAobWFrZVBhcmVucyAodG9rZW5Qb3MgaW5kZW50KSAobGV4RW5kIChoZWFkIGdyKSkgKHJldmVyc2UgZ3IpKSBuaWwpXFxuICAgIFxcXFxoIHQgLiBvciAod2l0aFRva2VuIGggZmFsc2UgKFxcXFx0eHQgcG9zIC4gcmFzc29jIHR4dCBncm91cHMgKFxcXFxvcGVuIC4gdHJ1ZSkgZmFsc2UpKVxcbiAgICAgIGFuZCAoaXNUb2tlblN0YXJ0IGggJ1xcXFxuJykgKDw9IChzdHJMZW4gKHRva2VuU3RyaW5nIGgpKSAoc3RyTGVuICh0b2tlblN0cmluZyBpbmRlbnQpKSlcXG4gICAgICBjb25zIChtYWtlUGFyZW5zICh0b2tlblBvcyBpbmRlbnQpICh0b2tlblBvcyBoKSAocmV2ZXJzZSBncikpIHRva3NcXG4gICAgICBpZk5vdEVyciAocGFyc2VUb2sgdG9rcyBncm91cHMpIFxcXFxsaXN0IC4gbGlzdCBcXFxccmVzdEggcmVzdFQgLiBwYXJzZUluZGVudCBpbmRlbnQgcmVzdFQgKGNvbnMgcmVzdEggZ3IpIGdyb3Vwc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaW5kZW50KXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9ncil7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX3Rva3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlUGFyZW5zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuUG9zKShMX2luZGVudCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sZXhFbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9ncil9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZXZlcnNlKShMX2dyKX0pKX0pKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF93aXRoVG9rZW4pKExfaCkoTF9mYWxzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdHh0KXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiByZXNvbHZlKExfcmFzc29jKShMX3R4dCkoTF9ncm91cHMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29wZW4pe3JldHVybiByZXNvbHZlKExfdHJ1ZSl9fSkpKExfZmFsc2UpfX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0YXJ0KShMX2gpKGxhenkoXCJcXG5cIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHkkcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfaCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfaW5kZW50KX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZVBhcmVucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblBvcykoTF9pbmRlbnQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5Qb3MpKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZXZlcnNlKShMX2dyKX0pKX0pKShMX3Rva3MpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VUb2spKExfdG9rcykoTF9ncm91cHMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdEgpe3JldHVybiBmdW5jdGlvbihMX3Jlc3RUKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlSW5kZW50KShMX2luZGVudCkoTF9yZXN0VCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3Jlc3RIKShMX2dyKX0pKShMX2dyb3Vwcyl9fX0pKX19KSl9KSl9fX0pKX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGl0XCIpKShsYXp5KDEpKShsYXp5KFwibGl0IHZhbHVlID0gXFxcXGYgLiBmIHZhbHVlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfdmFsdWUpfSwgJ2xpdCcpfSwgJ2xpdCcpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlZlwiKSkobGF6eSgxKSkobGF6eShcInJlZiBuYW1lID0gXFxcXGYgLiBmIG5hbWVcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX25hbWUpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKShMX25hbWUpfSwgJ3JlZicpfSwgJ3JlZicpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxhbWJkYVwiKSkobGF6eSgyKSkobGF6eShcImxhbWJkYSBuYW1lIGJvZHkgPSBcXFxcZiAuIGYgbmFtZSBib2R5XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF9uYW1lKShMX2JvZHkpfSwgJ2xhbWJkYScpfX0sICdsYW1iZGEnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhcHBseVwiKSkobGF6eSgyKSkobGF6eShcImFwcGx5IGZ1bmMgYXJnID0gXFxcXGYgLiBmIGZ1bmMgYXJnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmcpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKShMX2Z1bmMpKExfYXJnKX0sICdhcHBseScpfX0sICdhcHBseScpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxldFwiKSkobGF6eSgzKSkobGF6eShcImxldCBuYW1lIHZhbHVlIGJvZHkgPSBcXFxcZiAuIGYgbmFtZSB2YWx1ZSBib2R5XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfbmFtZSkoTF92YWx1ZSkoTF9ib2R5KX0sICdsZXQnKX19fSwgJ2xldCcpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFubm9cIikpKGxhenkoMykpKGxhenkoXCJhbm5vIG5hbWUgZGF0YSBib2R5ID0gXFxcXGYgLiBmIG5hbWUgZGF0YSBib2R5XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9kYXRhKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF9uYW1lKShMX2RhdGEpKExfYm9keSl9LCAnYW5ubycpfX19LCAnYW5ubycpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIndpdGhQYXJlbnNcIikpKGxhenkoMykpKGxhenkoXCJ3aXRoUGFyZW5zIHAgZXJyIGNvbnQgPSBpc1BhcmVucyBwIChwIGNvbnQpIGVyclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcCl7cmV0dXJuIGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX3ApKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcCkoTF9jb250KX0pKShMX2Vycil9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2V0UGFyZW5zXCIpKShsYXp5KDIpKShsYXp5KFwic2V0UGFyZW5zIHAgZnVuYyA9IGlzUGFyZW5zIHBcXG4gIHAgXFxcXHN0YXJ0IGVuZCBjb250ZW50IC4gcGFyZW5zIHN0YXJ0IGVuZCAoZnVuYyBjb250ZW50KVxcbiAgZnVuYyBwXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX3ApKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnMpKExfc3RhcnQpKExfZW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Z1bmMpKExfY29udGVudCl9KSl9fX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKShMX3ApfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwid2l0aFN0cmlwcGVkXCIpKShsYXp5KDIpKShsYXp5KFwid2l0aFN0cmlwcGVkIGxpc3QgY29udCA9IHdpdGhQYXJlbnMgbGlzdCAoY29udCBsaXN0KSBcXFxcc3RhcnQgZW5kIGNvbnRlbnQgLiB3aXRoU3RyaXBwZWQgY29udGVudCBjb250XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhQYXJlbnMpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiByZXNvbHZlKExfd2l0aFN0cmlwcGVkKShMX2NvbnRlbnQpKExfY29udCl9fX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwb3NpdGlvblwiKSkobGF6eSgxKSkobGF6eShcInBvc2l0aW9uIHRoaW5nID0gaXNUb2tlbiB0aGluZyAodG9rZW5Qb3MgdGhpbmcpXFxuICBpc1BhcmVucyB0aGluZyAocGFyZW5zU3RhcnQgdGhpbmcpXFxuICAgIGlzQ29ucyB0aGluZyAocG9zaXRpb24gKGhlYWQgdGhpbmcpKVxcbiAgICAgIC0xXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90aGluZyl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3RoaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuUG9zKShMX3RoaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX3RoaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVuc1N0YXJ0KShMX3RoaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF90aGluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3NpdGlvbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3RoaW5nKX0pKX0pKShsYXp5KC0xKSl9KSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxleEVuZFwiKSkobGF6eSgxKSkobGF6eShcImxleEVuZCB0aGluZyA9IGlzVG9rZW4gdGhpbmcgKCsgKHRva2VuUG9zIHRoaW5nKSAoc3RyTGVuICh0b2tlblN0cmluZyB0aGluZykpKVxcbiAgaXNQYXJlbnMgdGhpbmcgKHBhcmVuc0VuZCB0aGluZylcXG4gICAgaXNDb25zIHRoaW5nIChsZXhFbmQgKGxhc3QgdGhpbmcpKVxcbiAgICAgIC0xXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90aGluZyl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3RoaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRvKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuUG9zKShMX3RoaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF90aGluZyl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1BhcmVucykoTF90aGluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnNFbmQpKExfdGhpbmcpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX3RoaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xleEVuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sYXN0KShMX3RoaW5nKX0pKX0pKShsYXp5KC0xKSl9KSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxvY1wiKSkobGF6eSgxKSkobGF6eShcImxvYyB0aGluZyA9IFxcXFxcXFxcXFxuICBwID0gcG9zaXRpb24gdGhpbmdcXG4gIGwgPSBlcSBwIC0xICdhbiB1bmtub3duIGxvY2F0aW9uJyBwXFxuICAuXFxuICBzdHJDYXQgKGNvbnMgJ2F0ICcgKGNvbnMgbCBuaWwpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdGhpbmcpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbCwgTF9wO1xuXG5MX2wgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX3ApKGxhenkoLTEpKShsYXp5KFwiYW4gdW5rbm93biBsb2NhdGlvblwiKSkoTF9wKX0pO1xuXG5MX3AgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX3RoaW5nKX0pO1xucmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImF0IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2wpKExfbmlsKX0pKX0pKX0pKCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNjcnViXCIpKShsYXp5KDEpKShsYXp5KFwic2NydWIgc3RyID0gc3RyRnJvbUxpc3QgKHNjcnViTGlzdCAoc3RyVG9MaXN0IHN0cikpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfc3RyRnJvbUxpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2NydWJMaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clRvTGlzdCkoTF9zdHIpfSkpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzY3J1Ykxpc3RcIikpKGxhenkoMSkpKGxhenkoXCJzY3J1Ykxpc3QgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIFxcXFxcXFxcXFxuICAgIG5leHQgPSBzY3J1Ykxpc3QgdFxcbiAgICAuXFxuICAgIGVxIGggJ1xcXFxcXFxcJyAoY29ucyBoIChjb25zIChoZWFkIHQpIChzY3J1Ykxpc3QgKHRhaWwgdCkpKSlcXG4gICAgICBlcSBoICdcXFxcXFxcIicgKGNvbnMgJ1xcXFxcXFxcJyAoY29ucyAnXFxcXFxcXCInIG5leHQpKVxcbiAgICAgICAgY29ucyBoIG5leHRcXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX25leHQ7XG5cbkxfbmV4dCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2NydWJMaXN0KShMX3QpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2VxKShMX2gpKGxhenkoXCJcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zY3J1Ykxpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF90KX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX2gpKGxhenkoXCJcXFwiXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFwiXCIpKShMX25leHQpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKShMX25leHQpfSkpfSkpfSkoKX19fX0pKShMX25pbCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNyZWF0ZUFzdFwiKSkobGF6eSgyKSkobGF6eShcImNyZWF0ZUFzdCBpbkxpc3QgbmFtZXMgPSB3aXRoU3RyaXBwZWQgaW5MaXN0IFxcXFxsaXN0IC5cXG4gIGlzVG9rZW4gbGlzdCAoY3JlYXRlTGl0T3JSZWYgKHRva2VuU3RyaW5nIGxpc3QpIG5hbWVzKVxcbiAgICBsaXN0XFxuICAgICAgXFxcXGggdCBEIC5cXG4gICAgICAgIGlzVG9rZW5TdHJpbmcgaCAnXFxcXFxcXFxcXFxcXFxcXCcgKGNyZWF0ZUxldCBoIHQgbmFtZXMpXFxuICAgICAgICAgIGlzVG9rZW5TdHJpbmcgaCAnXFxcXFxcXFxAJyAoY3JlYXRlQW5ubyBoIHQgbmFtZXMpXFxuICAgICAgICAgICAgaXNUb2tlblN0cmluZyBoICdcXFxcXFxcXCcgKGNyZWF0ZUxhbWJkYSBoIHQgbmFtZXMpXFxuICAgICAgICAgICAgICBjcmVhdGVBcHBseSBsaXN0IG5hbWVzXFxuICAgICAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9pbkxpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhTdHJpcHBlZCkoTF9pbkxpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUxpdE9yUmVmKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX2xpc3QpfSkpKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCJcXFxcXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVMZXQpKExfaCkoTF90KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIlxcXFxAXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFubm8pKExfaCkoTF90KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlTGFtYmRhKShMX2gpKExfdCkoTF9uYW1lcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBcHBseSkoTF9saXN0KShMX25hbWVzKX0pKX0pKX0pKX19fX0pKShMX25pbCl9KSl9fSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3RyTWF0Y2hlc1wiKSkobGF6eSgyKSkobGF6eShcInN0ck1hdGNoZXMgc3RyIHBhdCA9IGlzQ29ucyAoc3RyTWF0Y2ggc3RyIHBhdClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJNYXRjaCkoTF9zdHIpKExfcGF0KX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRpZ2l0XCIpKShsYXp5KDApKShsYXp5KFwiZGlnaXQgPSByZWdleHAgJ15bMC05XSskJ1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZWdleHApKGxhenkoXCJeWzAtOV0rJFwiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYmFja3NsYXNoQ29kZXNcIikpKGxhenkoMCkpKGxhenkoXCJiYWNrc2xhc2hDb2RlcyA9ICdiZm5ydCdcIikpKGxhenkoXCJiZm5ydFwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYmFja3NsYXNoVmFsdWVzXCIpKShsYXp5KDApKShsYXp5KFwiYmFja3NsYXNoVmFsdWVzID0gJ1xcXFxiXFxcXGZcXFxcblxcXFxyXFxcXHQnXCIpKShsYXp5KFwiXFxiXFxmXFxuXFxyXFx0XCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjb252ZXJ0U3RyaW5nRXNjYXBlXCIpKShsYXp5KDMpKShsYXp5KFwiY29udmVydFN0cmluZ0VzY2FwZSBjaGFyIGNvZGVzIHZhbHVlcyA9XFxuICBlcSBjb2RlcyAnJ1xcbiAgICBjaGFyXFxuICAgIGVxIGNoYXIgKHN0ckF0IGNvZGVzIDApXFxuICAgICAgc3RyQXQgdmFsdWVzIDBcXG4gICAgICBjb252ZXJ0U3RyaW5nRXNjYXBlIGNoYXIgKHN0clN1YnN0cmluZyBjb2RlcyAxIDApIChzdHJTdWJzdHJpbmcgdmFsdWVzIDEgMClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NoYXIpe3JldHVybiBmdW5jdGlvbihMX2NvZGVzKXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZXMpe3JldHVybiByZXNvbHZlKExfZXEpKExfY29kZXMpKGxhenkoXCJcIikpKExfY2hhcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9jaGFyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX2NvZGVzKShsYXp5KDApKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX3ZhbHVlcykobGF6eSgwKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb252ZXJ0U3RyaW5nRXNjYXBlKShMX2NoYXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3Vic3RyaW5nKShMX2NvZGVzKShsYXp5KDEpKShsYXp5KDApKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN1YnN0cmluZykoTF92YWx1ZXMpKGxhenkoMSkpKGxhenkoMCkpfSkpfSkpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvbnZlcnRTdHJpbmdFc2NhcGVzXCIpKShsYXp5KDMpKShsYXp5KFwiY29udmVydFN0cmluZ0VzY2FwZXMgb3JpZyBzdHIgY29udCA9XFxuICBlcSBzdHIgJydcXG4gICAgY29udCBzdHJcXG4gICAgZXEgKHN0ckF0IHN0ciAwKSAnXFxcXFxcXFwnXFxuICAgICAgZXEgKHN0ckxlbiBzdHIpIDEgKHBhcnNlRXJyIFxcXCJFcnJvciwgYmFja3NsYXNoIHdpdGhvdXQgY2hhcmFjdGVyIGluIHN0cmluZzogXFxcIiBvcmlnKVxcbiAgICAgICAgY29udmVydFN0cmluZ0VzY2FwZXMgb3JpZyAoc3RyU3Vic3RyaW5nIHN0ciAyIDApIFxcXFxyZXN0IC4gY29udFxcbiAgICAgICAgICBzdHJBZGRcXG4gICAgICAgICAgICBjb252ZXJ0U3RyaW5nRXNjYXBlIChzdHJBdCBzdHIgMSkgYmFja3NsYXNoQ29kZXMgYmFja3NsYXNoVmFsdWVzXFxuICAgICAgICAgICAgcmVzdFxcbiAgICAgIGNvbnZlcnRTdHJpbmdFc2NhcGVzIG9yaWcgKHN0clN1YnN0cmluZyBzdHIgMSAwKSBcXFxccmVzdCAuIGNvbnRcXG4gICAgICAgIHN0ckFkZFxcbiAgICAgICAgICBzdHJBdCBzdHIgMFxcbiAgICAgICAgICByZXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vcmlnKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfZXEpKExfc3RyKShsYXp5KFwiXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfc3RyKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX3N0cikobGF6eSgwKSl9KSkobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX3N0cil9KSkobGF6eSgxKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkVycm9yLCBiYWNrc2xhc2ggd2l0aG91dCBjaGFyYWN0ZXIgaW4gc3RyaW5nOiBcIikpKExfb3JpZyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb252ZXJ0U3RyaW5nRXNjYXBlcykoTF9vcmlnKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN1YnN0cmluZykoTF9zdHIpKGxhenkoMikpKGxhenkoMCkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJBZGQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udmVydFN0cmluZ0VzY2FwZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJBdCkoTF9zdHIpKGxhenkoMSkpfSkpKExfYmFja3NsYXNoQ29kZXMpKExfYmFja3NsYXNoVmFsdWVzKX0pKShMX3Jlc3QpfSkpfX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnZlcnRTdHJpbmdFc2NhcGVzKShMX29yaWcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3Vic3RyaW5nKShMX3N0cikobGF6eSgxKSkobGF6eSgwKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckFkZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJBdCkoTF9zdHIpKGxhenkoMCkpfSkpKExfcmVzdCl9KSl9fSkpfSkpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlU3RyaW5nXCIpKShsYXp5KDIpKShsYXp5KFwicGFyc2VTdHJpbmcgc3RyIGNvbnQgPVxcbiAgbmVxIChzdHJBdCBzdHIgMCkgKHN0ckF0IHN0ciAtMSkgKHBhcnNlRXJyIFxcXCJCYWRseSB0ZXJtaW5hdGVkIHN0cmluZzogXFxcIiBzdHIpXFxuICAgIGNvbnZlcnRTdHJpbmdFc2NhcGVzIHN0ciAoc3RyU3Vic3RyaW5nIHN0ciAxIC0xKSBjb250XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfbmVxKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX3N0cikobGF6eSgwKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJBdCkoTF9zdHIpKGxhenkoLTEpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiQmFkbHkgdGVybWluYXRlZCBzdHJpbmc6IFwiKSkoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udmVydFN0cmluZ0VzY2FwZXMpKExfc3RyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN1YnN0cmluZykoTF9zdHIpKGxhenkoMSkpKGxhenkoLTEpKX0pKShMX2NvbnQpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY3JlYXRlTGl0T3JSZWZcIikpKGxhenkoMikpKGxhenkoXCJjcmVhdGVMaXRPclJlZiB0b2sgbmFtZXMgPVxcbiAgY29udGFpbnMgbmFtZXMgdG9rXFxuICAgIHJlZiB0b2tcXG4gICAgb3IgKHN0clN0YXJ0c1dpdGggdG9rICdcXFxcXFxcIicpIChzdHJTdGFydHNXaXRoIHRvayBcXFwiJ1xcXCIpXFxuICAgICAgcGFyc2VTdHJpbmcgdG9rIFxcXFxzdHIgLiBsaXQgc3RyXFxuICAgICAgc3RyU3RhcnRzV2l0aCB0b2sgJy4nXFxuICAgICAgICBqc29uUGFyc2UgKHN0ckNhdCAoY29ucyAnMCcgKGNvbnMgdG9rIG5pbCkpKSAoXFxcXGVyciAuIHJlZiB0b2spIChcXFxcaXRlbSAuIGxpdCBpdGVtKVxcbiAgICAgICAgb3IgKGFuZCAoPj0gKHN0ckF0IHRvayAwKSAnMCcpICg8PSAoc3RyQXQgdG9rIDApICc5JykpIChzdHJTdGFydHNXaXRoIHRvayAnLScpXFxuICAgICAgICAgIGpzb25QYXJzZSB0b2sgKFxcXFxlcnIgLiByZWYgdG9rKSAoXFxcXGl0ZW0gLiBsaXQgaXRlbSlcXG4gICAgICAgICAgcmVmIHRva1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9uYW1lcykoTF90b2spKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVmKShMX3Rvayl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdGFydHNXaXRoKShMX3RvaykobGF6eShcIlxcXCJcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3RhcnRzV2l0aCkoTF90b2spKGxhenkoXCInXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlU3RyaW5nKShMX3RvaykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gcmVzb2x2ZShMX2xpdCkoTF9zdHIpfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKExfdG9rKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9qc29uUGFyc2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIwXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdG9rKShMX25pbCl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gcmVzb2x2ZShMX3JlZikoTF90b2spfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gcmVzb2x2ZShMX2xpdCkoTF9pdGVtKX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHokcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJBdCkoTF90b2spKGxhenkoMCkpfSkpKGxhenkoXCIwXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyR5JHApKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQXQpKExfdG9rKShsYXp5KDApKX0pKShsYXp5KFwiOVwiKSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdGFydHNXaXRoKShMX3RvaykobGF6eShcIi1cIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfanNvblBhcnNlKShMX3RvaykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gcmVzb2x2ZShMX3JlZikoTF90b2spfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gcmVzb2x2ZShMX2xpdCkoTF9pdGVtKX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZWYpKExfdG9rKX0pKX0pKX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNyZWF0ZUxhbWJkYVwiKSkobGF6eSgzKSkobGF6eShcImNyZWF0ZUxhbWJkYSBzdGFydCBsaXN0IG5hbWVzID0gXFxcXFxcXFxcXG4gIGVyciA9IHBhcnNlRXJyIFxcXCJMYW1iZGEgbmVlZHMgYSB2YXJpYWJsZSBuYW1lLCBhIGRvdCwgYW5kIGEgYm9keSBcXFwiIChsb2Mgc3RhcnQpXFxuICAuXFxuICB3aXRoQ29ucyBsaXN0IGVyciBcXFxcbmFtZSByZXN0IC5cXG4gICAgd2l0aFRva2VuIG5hbWUgZXJyIFxcXFxuIHAgLlxcbiAgICAgIHdpdGhDb25zIHJlc3QgZXJyIFxcXFxkb3QgYm9keSAuXFxuICAgICAgICAjIGFyZSB0aGVzZSBwYXJ0aWFsIGFwcGxpY2F0aW9ucyB0b28gaGFyZCB0byByZWFkP1xcbiAgICAgICAgaXNUb2tlblN0cmluZyBkb3QgJy4nXFxuICAgICAgICAgIGlmTm90RXJyIChjcmVhdGVBc3QgYm9keSAoY29ucyBuIG5hbWVzKSkgXFxcXGJvZHlBc3QgLiBsYW1iZGEgbiBib2R5QXN0XFxuICAgICAgICAgIGlmTm90RXJyIChjcmVhdGVMYW1iZGEgc3RhcnQgcmVzdCAoY29ucyBuIG5hbWVzKSkgXFxcXGJvZHlBc3QgLiBsYW1iZGEgbiBib2R5QXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZXJyO1xuXG5MX2VyciA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJMYW1iZGEgbmVlZHMgYSB2YXJpYWJsZSBuYW1lLCBhIGRvdCwgYW5kIGEgYm9keSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX3N0YXJ0KX0pKX0pO1xucmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9saXN0KShMX2VycikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF93aXRoVG9rZW4pKExfbmFtZSkoTF9lcnIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfcmVzdCkoTF9lcnIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RvdCl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2RvdCkobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KShMX2JvZHkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9uKShMX25hbWVzKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5QXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xhbWJkYSkoTF9uKShMX2JvZHlBc3QpfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUxhbWJkYSkoTF9zdGFydCkoTF9yZXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbikoTF9uYW1lcyl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keUFzdCl7cmV0dXJuIHJlc29sdmUoTF9sYW1iZGEpKExfbikoTF9ib2R5QXN0KX19KSl9KSl9fX0pKX19fSkpfX19KSl9KSgpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNyZWF0ZUFubm9cIikpKGxhenkoMykpKGxhenkoXCJjcmVhdGVBbm5vIHN0YXJ0IGxpc3QgbmFtZXMgPVxcbiAgd2l0aENvbnMgbGlzdCAocGFyc2VFcnIgXFxcIk5vIGFubm90YXRpb24gbmFtZSBvciBkYXRhIGluIGFubm90YXRpb24gXFxcIiAobG9jIHN0YXJ0KSkgXFxcXG5hbWUgcmVzdCAuXFxuICAgIHdpdGhDb25zIHJlc3QgKHBhcnNlRXJyIFxcXCJObyBkYXRhIGZvciBhbm5vdGF0aW9uIFxcXCIgKGxvYyBzdGFydCkpIFxcXFxkYXRhIHJlc3QgLiBcXFxcXFxcXFxcbiAgICAgIGZpbmlzaCBkYXRhIGJvZHkgPSBpZk5vdEVyciAoY3JlYXRlQXN0IGJvZHkgbmFtZXMpIFxcXFxib2R5QXN0IC5cXG4gICAgICAgIGNsZWFuVG9rZW5zIHN0YXJ0IG5hbWUgXFxcXG5hbWUgLlxcbiAgICAgICAgICBjbGVhblRva2VucyBzdGFydCBkYXRhIFxcXFxkYXRhIC5cXG4gICAgICAgICAgICBhbm5vIG5hbWUgZGF0YSBib2R5QXN0XFxuICAgICAgLlxcbiAgICAgIGlzVG9rZW5TdHJpbmcgZGF0YSAnLidcXG4gICAgICAgIGZpbmlzaCBuaWwgcmVzdFxcbiAgICAgICAgd2l0aFN0cmlwcGVkIGRhdGEgXFxcXGRhdGEgLlxcbiAgICAgICAgICB3aXRoQ29ucyByZXN0IChwYXJzZUVyciBcXFwiTm8gYm9keSBmb3IgYW5ub3RhdGlvbiBcXFwiIChsb2Mgc3RhcnQpKSBcXFxcZG90IGJvZHkgLlxcbiAgICAgICAgICAgIGlzVG9rZW5TdHJpbmcgZG90ICcuJ1xcbiAgICAgICAgICAgICAgZmluaXNoIGRhdGEgYm9keVxcbiAgICAgICAgICAgICAgcGFyc2VFcnIgXFxcIkFubm90YXRpb24gZXhwZWN0cyBkb3QgYWZ0ZXIgbmFtZSBhbmQgZGF0YSBcXFwiIChsb2Mgc3RhcnQpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIk5vIGFubm90YXRpb24gbmFtZSBvciBkYXRhIGluIGFubm90YXRpb24gXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9zdGFydCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9yZXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTm8gZGF0YSBmb3IgYW5ub3RhdGlvbiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX3N0YXJ0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kYXRhKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0XzApe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZmluaXNoO1xuXG5MX2ZpbmlzaCA9IChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RhdGFfMSl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBc3QpKExfYm9keSkoTF9uYW1lcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keUFzdCl7cmV0dXJuIHJlc29sdmUoTF9jbGVhblRva2VucykoTF9zdGFydCkoTF9uYW1lKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lXzIpe3JldHVybiByZXNvbHZlKExfY2xlYW5Ub2tlbnMpKExfc3RhcnQpKExfZGF0YV8xKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kYXRhXzMpe3JldHVybiByZXNvbHZlKExfYW5ubykoTF9uYW1lXzIpKExfZGF0YV8zKShMX2JvZHlBc3QpfX0pKX19KSl9fSkpfX19KTtcbnJldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9kYXRhKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maW5pc2gpKExfbmlsKShMX3Jlc3RfMCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF93aXRoU3RyaXBwZWQpKExfZGF0YSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGF0YV8xKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX3Jlc3RfMCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIk5vIGJvZHkgZm9yIGFubm90YXRpb24gXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9zdGFydCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZG90KXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfZG90KShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maW5pc2gpKExfZGF0YV8xKShMX2JvZHkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJBbm5vdGF0aW9uIGV4cGVjdHMgZG90IGFmdGVyIG5hbWUgYW5kIGRhdGEgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9zdGFydCl9KSl9KSl9fX0pKX19KSl9KSl9KSgpfX19KSl9fX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJib2R5U3RydWN0UGF0XCIpKShsYXp5KDApKShsYXp5KFwiYm9keVN0cnVjdFBhdCA9IHJlZ2V4cCAnXFxcXFxcXFx8XFxcXFxcXFxcXFxcXFxcXHxcXFxcXFxcXEAnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIlxcXFx8XFxcXFxcXFx8XFxcXEBcIikpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNyZWF0ZUFwcGx5XCIpKShsYXp5KDIpKShsYXp5KFwiY3JlYXRlQXBwbHkgaW5MaXN0IG5hbWVzID0gd2l0aFN0cmlwcGVkIGluTGlzdCBcXFxcbGlzdCAuXFxuICB3aXRoQ29ucyBsaXN0IChwYXJzZUVyciBcXFwiRnVuY2lvbiBhcHBseSBleHBlY3RpbmcgYSBub24tZW1wdHkgbGlzdCBcXFwiIChsb2MgaW5MaXN0KSkgXFxcXGggdCAuXFxuICAgIGlmTm90RXJyIChjcmVhdGVBc3QgaCBuYW1lcykgXFxcXGZ1bmMgLiBjaGFpbkFwcGx5IGZ1bmMgdCBuYW1lc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaW5MaXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIHJlc29sdmUoTF93aXRoU3RyaXBwZWQpKExfaW5MaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJGdW5jaW9uIGFwcGx5IGV4cGVjdGluZyBhIG5vbi1lbXB0eSBsaXN0IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfaW5MaXN0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9oKShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gcmVzb2x2ZShMX2NoYWluQXBwbHkpKExfZnVuYykoTF90KShMX25hbWVzKX19KSl9fX0pKX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJibG9ja1N0YXJ0c1wiKSkobGF6eSgwKSkobGF6eShcImJsb2NrU3RhcnRzID0gY29ucyAnXFxcXFxcXFwnIChjb25zICdcXFxcXFxcXFxcXFxcXFxcJyAoY29ucyAnXFxcXFxcXFxAJyBuaWwpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiXFxcXFxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxAXCIpKShMX25pbCl9KSl9KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY2hhaW5BcHBseVwiKSkobGF6eSgzKSkobGF6eShcImNoYWluQXBwbHkgZnVuYyBsaXN0IG5hbWVzID0gd2l0aENvbnMgbGlzdCBmdW5jIFxcXFxhcmdJdGVtIHJlc3QgLlxcbiAgYW5kIChpc1Rva2VuIGFyZ0l0ZW0pIChjb250YWlucyBibG9ja1N0YXJ0cyAodG9rZW5TdHJpbmcgYXJnSXRlbSkpXFxuICAgIGlmTm90RXJyIChjcmVhdGVBc3QgbGlzdCBuYW1lcykgXFxcXGFyZyAuIGFwcGx5IGZ1bmMgYXJnXFxuICAgIGlmTm90RXJyIChjcmVhdGVBc3QgYXJnSXRlbSBuYW1lcykgXFxcXGFyZyAuIGNoYWluQXBwbHkgKGFwcGx5IGZ1bmMgYXJnKSByZXN0IG5hbWVzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9saXN0KShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FyZ0l0ZW0pe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfYXJnSXRlbSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9ibG9ja1N0YXJ0cykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9hcmdJdGVtKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9saXN0KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmcpe3JldHVybiByZXNvbHZlKExfYXBwbHkpKExfZnVuYykoTF9hcmcpfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9hcmdJdGVtKShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmcpe3JldHVybiByZXNvbHZlKExfY2hhaW5BcHBseSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBseSkoTF9mdW5jKShMX2FyZyl9KSkoTF9yZXN0KShMX25hbWVzKX19KSl9KSl9fX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjbGVhblRva2Vuc1wiKSkobGF6eSgzKSkobGF6eShcImNsZWFuVG9rZW5zIHN0YXJ0IHRva3MgY29udCA9IGlzVG9rZW4gdG9rc1xcbiAgY29udCAodG9rZW5TdHJpbmcgdG9rcylcXG4gIHdpdGhDb25zIHRva3MgKGNvbnQgdG9rcykgXFxcXGhlYWQgdGFpbCAuXFxuICAgIGNsZWFuVG9rZW5zIHN0YXJ0IGhlYWQgXFxcXGhlYWQgLlxcbiAgICAgIGNsZWFuVG9rZW5zIHN0YXJ0IHRhaWwgXFxcXHRhaWwgLlxcbiAgICAgICAgY29udCAoY29ucyBoZWFkIHRhaWwpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3Rva3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF90b2tzKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX3Rva3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoTF90b2tzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oZWFkKXtyZXR1cm4gZnVuY3Rpb24oTF90YWlsKXtyZXR1cm4gcmVzb2x2ZShMX2NsZWFuVG9rZW5zKShMX3N0YXJ0KShMX2hlYWQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2hlYWRfMCl7cmV0dXJuIHJlc29sdmUoTF9jbGVhblRva2VucykoTF9zdGFydCkoTF90YWlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90YWlsXzEpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2hlYWRfMCkoTF90YWlsXzEpfSkpfX0pKX19KSl9fX0pKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjcmVhdGVMZXRcIikpKGxhenkoMykpKGxhenkoXCJjcmVhdGVMZXQgc3RhcnQgbGlzdCBuYW1lcyA9IHdpdGhDb25zIGxpc3RcXG4gIHBhcnNlRXJyIFxcXCJObyB2YXJpYWJsZSBvciBib2R5IGZvciBsZXQgXFxcIiAobG9jIHN0YXJ0KVxcbiAgXFxcXGJpbmRpbmcgYm9keSAuIGVxIGJvZHkgbmlsIChjcmVhdGVBc3QgYmluZGluZyBuYW1lKVxcbiAgICBnZXRMZXROYW1lcyBzdGFydCBsaXN0IG5hbWVzIFxcXFxuZXdOYW1lcyAuXFxuICAgICAgY3JlYXRlU3VibGV0cyBzdGFydCBiaW5kaW5nIGJvZHkgbmV3TmFtZXMgaWRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTm8gdmFyaWFibGUgb3IgYm9keSBmb3IgbGV0IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfc3RhcnQpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2JpbmRpbmcpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiByZXNvbHZlKExfZXEpKExfYm9keSkoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KShMX2JpbmRpbmcpKExfbmFtZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRMZXROYW1lcykoTF9zdGFydCkoTF9saXN0KShMX25hbWVzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uZXdOYW1lcyl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVTdWJsZXRzKShMX3N0YXJ0KShMX2JpbmRpbmcpKExfYm9keSkoTF9uZXdOYW1lcykoTF9pZCl9fSkpfSkpfX19KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZ2V0TGV0TmFtZXNcIikpKGxhenkoNCkpKGxhenkoXCJnZXRMZXROYW1lcyBzdGFydCBsaXN0IG5hbWVzIGNvbnQgPSBcXFxcXFxcXFxcbiAgZXJyID0gcGFyc2VFcnIgXFxcIkxldCBleHBlY3RlZCBiaW5kaW5nIFxcXCIgKGxvYyBzdGFydClcXG4gIC5cXG4gIHdpdGhDb25zIGxpc3QgKGNvbnQgbmFtZXMpIFxcXFxiaW5kaW5nIGJvZHkgLlxcbiAgICBpc1Rva2VuU3RyaW5nIGJpbmRpbmcgJy4nIChjb250IG5hbWVzKVxcbiAgICAgIHdpdGhQYXJlbnMgYmluZGluZyBlcnIgXFxcXHN0YXJ0IGVuZCBkZWYgLlxcbiAgICAgICAgd2l0aENvbnMgZGVmIGVyciBcXFxcbmFtZSByZXN0IC5cXG4gICAgICAgICAgd2l0aFRva2VuIG5hbWUgZXJyIFxcXFxzdHIgcG9zIC5cXG4gICAgICAgICAgICBnZXRMZXROYW1lcyBzdGFydCBib2R5IChjb25zIHN0ciBuYW1lcykgY29udFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX2VycjtcblxuTF9lcnIgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTGV0IGV4cGVjdGVkIGJpbmRpbmcgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9zdGFydCl9KSl9KTtcbnJldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9iaW5kaW5nKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfYmluZGluZykobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoTF9uYW1lcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF93aXRoUGFyZW5zKShMX2JpbmRpbmcpKExfZXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydF8wKXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9kZWYpKExfZXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhUb2tlbikoTF9uYW1lKShMX2VycikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiByZXNvbHZlKExfZ2V0TGV0TmFtZXMpKExfc3RhcnRfMCkoTF9ib2R5KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfc3RyKShMX25hbWVzKX0pKShMX2NvbnQpfX19KSl9fX0pKX19fX0pKX0pKX19fSkpfSkoKX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY3JlYXRlU3VibGV0c1wiKSkobGF6eSg1KSkobGF6eShcImNyZWF0ZVN1YmxldHMgc3RhcnQgYmluZGluZyBib2R5IG5hbWVzIGNvbnQgPVxcbiAgaXNUb2tlblN0cmluZyBiaW5kaW5nICcuJyAoaWZOb3RFcnIgKGNyZWF0ZUFzdCBib2R5IG5hbWVzKSBjb250KVxcbiAgICB3aXRoQ29ucyBib2R5IChwYXJzZUVyciBcXFwiTGV0IGV4cGVjdGVkIGEgYm9keSBcXFwiIChsb2Mgc3RhcnQpKSBcXFxcYm9keUggYm9keVQgLlxcbiAgICAgIGdldE5hbWVBbmREZWYgKHBhcmVuc1N0YXJ0IGJpbmRpbmcpIChwYXJlbnNDb250ZW50IGJpbmRpbmcpIG5hbWVzIFxcXFxuYW1lIGRlZiAuXFxuICAgICAgICBjcmVhdGVTdWJsZXRzIHN0YXJ0IGJvZHlIIGJvZHlUIG5hbWVzIFxcXFxib2R5QXN0IC5cXG4gICAgICAgICAgY29udCAobGV0ICh0b2tlblN0cmluZyBuYW1lKSBkZWYgYm9keUFzdClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9iaW5kaW5nKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2JpbmRpbmcpKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9ib2R5KShMX25hbWVzKX0pKShMX2NvbnQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfYm9keSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkxldCBleHBlY3RlZCBhIGJvZHkgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9zdGFydCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keUgpe3JldHVybiBmdW5jdGlvbihMX2JvZHlUKXtyZXR1cm4gcmVzb2x2ZShMX2dldE5hbWVBbmREZWYpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyZW5zU3RhcnQpKExfYmluZGluZyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnNDb250ZW50KShMX2JpbmRpbmcpfSkpKExfbmFtZXMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVTdWJsZXRzKShMX3N0YXJ0KShMX2JvZHlIKShMX2JvZHlUKShMX25hbWVzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5QXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGV0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX25hbWUpfSkpKExfZGVmKShMX2JvZHlBc3QpfSkpfX0pKX19fSkpfX19KSl9KSl9fX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJnZXROYW1lQW5kRGVmXCIpKShsYXp5KDQpKShsYXp5KFwiZ2V0TmFtZUFuZERlZiBwb3MgYmluZGluZyBuYW1lcyBjb250ID1cXG4gIHdpdGhDb25zICh0YWlsIGJpbmRpbmcpIChwYXJzZUVyciBcXFwiTGV0IGV4cGVjdGVkIGJpbmRpbmcgYXQgXFxcIiBwb3MpIFxcXFxzbmQgc25kVCAuXFxuICAgIGlzVG9rZW5TdHJpbmcgc25kICc9JyAoaWZOb3RFcnIgKGNyZWF0ZUFzdCBzbmRUIG5hbWVzKSBcXFxcZGVmIC4gY29udCAoaGVhZCBiaW5kaW5nKSBkZWYpXFxuICAgICAgZ2V0TGV0TGFtYmRhIHBvcyAodGFpbCBiaW5kaW5nKSBuaWwgbmFtZXMgXFxcXGxhbWIgLiBjb250IChoZWFkIGJpbmRpbmcpIGxhbWJcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIGZ1bmN0aW9uKExfYmluZGluZyl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9iaW5kaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTGV0IGV4cGVjdGVkIGJpbmRpbmcgYXQgXCIpKShMX3Bvcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc25kKXtyZXR1cm4gZnVuY3Rpb24oTF9zbmRUKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfc25kKShsYXp5KFwiPVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBc3QpKExfc25kVCkoTF9uYW1lcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9iaW5kaW5nKX0pKShMX2RlZil9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0TGV0TGFtYmRhKShMX3BvcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2JpbmRpbmcpfSkpKExfbmlsKShMX25hbWVzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sYW1iKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9iaW5kaW5nKX0pKShMX2xhbWIpfX0pKX0pKX19fSkpfX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJnZXRMZXRMYW1iZGFcIikpKGxhenkoNSkpKGxhenkoXCJnZXRMZXRMYW1iZGEgcG9zIGRlZiBhcmdzIG5hbWVzIGNvbnQgPVxcbiAgd2l0aENvbnMgZGVmIChwYXJzZUVyciBcXFwiTGV0IGV4cGVjdGVkIGJpbmRpbmcgYXQgXFxcIiBwb3MpIFxcXFxhcmcgcmVzdCAuXFxuICAgIG5vdCAoaXNUb2tlbiBhcmcpIChwYXJzZUVyciBcXFwiTGV0IGV4cGVjdGVkIGJpbmRpbmcgYXQgXFxcIiBwb3MpXFxuICAgICAgaXNUb2tlblN0cmluZyBhcmcgJz0nXFxuICAgICAgICBpZk5vdEVyciAoY3JlYXRlQXN0IChjb25zICh0b2tlbiAnXFxcXFxcXFwnIHBvcykgKGFwcGVuZCAocmV2ZXJzZSBhcmdzKSAoY29ucyAodG9rZW4gJy4nIChwb3NpdGlvbiBhcmcpKSByZXN0KSkpIG5hbWVzKSBjb250XFxuICAgICAgICBnZXRMZXRMYW1iZGEgcG9zIHJlc3QgKGNvbnMgYXJnIGFyZ3MpIG5hbWVzIGNvbnRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmdzKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9kZWYpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBhdCBcIikpKExfcG9zKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmcpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfYXJnKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTGV0IGV4cGVjdGVkIGJpbmRpbmcgYXQgXCIpKShMX3Bvcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2FyZykobGF6eShcIj1cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKGxhenkoXCJcXFxcXCIpKShMX3Bvcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmV2ZXJzZSkoTF9hcmdzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX2FyZyl9KSl9KSkoTF9yZXN0KX0pKX0pKX0pKShMX25hbWVzKX0pKShMX2NvbnQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0TGV0TGFtYmRhKShMX3BvcykoTF9yZXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfYXJnKShMX2FyZ3MpfSkpKExfbmFtZXMpKExfY29udCl9KSl9KSl9fX0pKX19fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNjYW5MaW5lR1wiKSkobGF6eSg1KSkobGF6eShcInNjYW5MaW5lRyBzdHIgcGF0IGdyb3VwcyBvbkRlZiBvbkV4cHIgPSBcXFxcXFxcXFxcbiAgdG9rcyA9IHRva2VucyBzdHIgcGF0XFxuICBncm91cFRva3MgPSBmb2xkciAoXFxcXGVsIHZhbHVlIC4gZWwgXFxcXGggdCAuIGNvbnMgaCAoY29ucyB0IHZhbHVlKSkgKGNvbnMgJz0nIGJsb2NrU3RhcnRzKSBncm91cHNcXG4gIC5cXG4gICMgY2hlY2sgaWYgaXQncyBhIGRlZmluaXRpb25cXG4gIGZpbmQgKFxcXFx0b2sgLiBvciAoY29udGFpbnMgZ3JvdXBUb2tzICh0b2tlblN0cmluZyB0b2spKSAoaXNDb25zIChzdHJNYXRjaCAodG9rZW5TdHJpbmcgdG9rKSAnXlxcXFxuJykpKSB0b2tzIChcXFxcaXRlbSAuIGlzVG9rZW5TdHJpbmcgaXRlbSAnPScpIGZhbHNlXFxuICAgIHRva3MgXFxcXG5hbWUgcmVzdCAuIFxcXFxcXFxcXFxuICAgICAgcGFyc2VJdCBmdW5jID0gXFxcXFxcXFxcXG4gICAgICAgIHBhcnNlZCA9IHBhcnNlVG9rcyAoY2hlY2tTZXREYXRhVHlwZSBmdW5jIHJlc3QgbmFtZSkgZ3JvdXBzXFxuICAgICAgICAuXFxuICAgICAgICBvbkRlZiAoaWZOb3RFcnIgcGFyc2VkIFxcXFxsaXN0IC4gY3JlYXRlRGVmIGxpc3QgbmFtZSAoYXJpdHkgcmVzdCAwKSBzdHIpXFxuICAgICAgLlxcbiAgICAgIGlzVG9rZW5TdHJpbmcgKGhlYWQgcmVzdCkgJz0nXFxuICAgICAgICBpc1Rva2VuU3RyaW5nIChoZWFkICh0YWlsIHJlc3QpKSAnXFxcXFxcXFwnXFxuICAgICAgICAgIHBhcnNlSXQgKHNldFR5cGVBbm5vICh0YWlsIHJlc3QpICh0b2tlblN0cmluZyBuYW1lKSlcXG4gICAgICAgICAgcGFyc2VJdCAodGFpbCByZXN0KVxcbiAgICAgICAgdHJhbnNmb3JtRGVmIG5hbWUgcmVzdCBcXFxcZGVmIC5cXG4gICAgICAgICAgcGFyc2VJdCAoY29ucyAodG9rZW4gJ1xcXFxcXFxcJyAoLSAocG9zaXRpb24gKGhlYWQgcmVzdCkpIDEpKSBkZWYpXFxuICAgIGlmTm90RXJyIChwYXJzZVRva3MgdG9rcyBncm91cHMpIFxcXFxsaXN0IC4gb25FeHByIGxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBmdW5jdGlvbihMX29uRGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9vbkV4cHIpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZ3JvdXBUb2tzLCBMX3Rva3M7XG5cbkxfZ3JvdXBUb2tzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mb2xkcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZWwpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gcmVzb2x2ZShMX2VsKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3QpKExfdmFsdWUpfSkpfX19KSl9fX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI9XCIpKShMX2Jsb2NrU3RhcnRzKX0pKShMX2dyb3Vwcyl9KTtcblxuTF90b2tzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbnMpKExfc3RyKShMX3BhdCl9KTtcbnJldHVybiByZXNvbHZlKExfZmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX2dyb3VwVG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF90b2spfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ck1hdGNoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX3Rvayl9KSkobGF6eShcIl5cXG5cIikpfSkpfSkpfX0pKShMX3Rva3MpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9pdGVtKShsYXp5KFwiPVwiKSl9fSkpKExfZmFsc2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9wYXJzZUl0O1xuXG5MX3BhcnNlSXQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3BhcnNlZDtcblxuTF9wYXJzZWQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlVG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jaGVja1NldERhdGFUeXBlKShMX2Z1bmMpKExfcmVzdCkoTF9uYW1lKX0pKShMX2dyb3Vwcyl9KTtcbnJldHVybiByZXNvbHZlKExfb25EZWYpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKExfcGFyc2VkKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZURlZikoTF9saXN0KShMX25hbWUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXJpdHkpKExfcmVzdCkobGF6eSgwKSl9KSkoTF9zdHIpfX0pKX0pKX0pKCl9fSk7XG5yZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9yZXN0KX0pKShsYXp5KFwiPVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9yZXN0KX0pKX0pKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUl0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFR5cGVBbm5vKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfcmVzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9uYW1lKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlSXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9yZXN0KX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RyYW5zZm9ybURlZikoTF9uYW1lKShMX3Jlc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUl0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKGxhenkoXCJcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRfKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfcmVzdCl9KSl9KSkobGF6eSgxKSl9KSl9KSkoTF9kZWYpfSkpfX0pKX0pKX0pKCl9fX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlVG9rcykoTF90b2tzKShMX2dyb3Vwcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9vbkV4cHIpKExfbGlzdCl9fSkpfSkpfSkoKX19fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlTGluZUdcIikpKGxhenkoNikpKGxhenkoXCJwYXJzZUxpbmVHIHN0ciBwYXQgbmFtZXMgZ3JvdXBzIG9uRGVmIG9uRXhwciA9IFxcXFxcXFxcXFxuICBhc3RDYWxsYmFjayBjYiA9IFxcXFxsaXN0IC4gaWZOb3RFcnIgKGNyZWF0ZUFzdCBsaXN0IG5hbWVzKSBcXFxcYXN0IC4gY2IgYXN0XFxuICAuXFxuICBzY2FuTGluZUcgc3RyIHBhdCBncm91cHMgKGFzdENhbGxiYWNrIG9uRGVmKSAoYXN0Q2FsbGJhY2sgb25FeHByKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBmdW5jdGlvbihMX29uRGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9vbkV4cHIpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfYXN0Q2FsbGJhY2s7XG5cbkxfYXN0Q2FsbGJhY2sgPSAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jYil7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBc3QpKExfbGlzdCkoTF9uYW1lcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NiKShMX2FzdCl9fSkpfX19KTtcbnJldHVybiByZXNvbHZlKExfc2NhbkxpbmVHKShMX3N0cikoTF9wYXQpKExfZ3JvdXBzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FzdENhbGxiYWNrKShMX29uRGVmKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FzdENhbGxiYWNrKShMX29uRXhwcil9KSl9KSgpfX19fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRyYW5zZm9ybURlZlwiKSkobGF6eSgzKSkobGF6eShcInRyYW5zZm9ybURlZiBuYW1lIHRva3MgY29udCA9IHdpdGhDb25zIHRva3MgKHBhcnNlRXJyIFxcXCJCYWQgZGVmaW5pdGlvbiwgZXhwZWN0aW5nIHRva2Vuc1xcXCIgKGxvYyBuYW1lKSkgXFxcXGggdCAuXFxuICBpc1Rva2VuU3RyaW5nIGggJz0nXFxuICAgIGlzVG9rZW5TdHJpbmcgKGhlYWQgdCkgJ1xcXFxcXFxcJ1xcbiAgICAgIGNvbnQgKGNvbnMgKHRva2VuICcuJyAocG9zaXRpb24gaCkpIChzZXRUeXBlQW5ubyB0ICh0b2tlblN0cmluZyBuYW1lKSkpXFxuICAgICAgY29udCAoY29ucyAodG9rZW4gJy4nIChwb3NpdGlvbiBoKSkgdClcXG4gICAgdHJhbnNmb3JtRGVmIG5hbWUgdCBcXFxcbGlzdCAuIGNvbnQgKGNvbnMgaCBsaXN0KVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF90b2tzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiQmFkIGRlZmluaXRpb24sIGV4cGVjdGluZyB0b2tlbnNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX25hbWUpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiPVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdCl9KSkobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3NpdGlvbikoTF9oKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFR5cGVBbm5vKShMX3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfbmFtZSl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX2gpfSkpfSkpKExfdCl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90cmFuc2Zvcm1EZWYpKExfbmFtZSkoTF90KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKShMX2xpc3QpfSkpfX0pKX0pKX19fSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNldFR5cGVBbm5vXCIpKShsYXp5KDIpKShsYXp5KFwic2V0VHlwZUFubm8gdG9rcyBuYW1lID0gXFxcXFxcXFxcXG4gIHRvayA9IFxcXFxzdHIgLiB0b2tlbiBzdHIgKHBvc2l0aW9uIHRva3MpXFxuICAuXFxuICBjb25zICh0b2sgJ1xcXFxcXFxcQCcpIChjb25zICh0b2sgJ3R5cGUnKSAoY29ucyAodG9rIG5hbWUpIChjb25zICh0b2sgJy4nKSB0b2tzKSkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3RvaztcblxuTF90b2sgPSAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKExfc3RyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX3Rva3MpfSkpfX0pO1xucmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykobGF6eShcIlxcXFxAXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwidHlwZVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykoTF9uYW1lKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiLlwiKSl9KSkoTF90b2tzKX0pKX0pKX0pKX0pKCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzZXREYXRhVHlwZUFubm9cIikpKGxhenkoMikpKGxhenkoXCJzZXREYXRhVHlwZUFubm8gdG9rcyBuYW1lID0gXFxcXFxcXFxcXG4gIHRvayA9IFxcXFxzdHIgLiB0b2tlbiBzdHIgKHBvc2l0aW9uIHRva3MpXFxuICAuXFxuICBjb25zICh0b2sgJ1xcXFxcXFxcQCcpIChjb25zICh0b2sgJ2RhdGFUeXBlJykgKGNvbnMgKHRvayAodG9rZW5TdHJpbmcgbmFtZSkpIChjb25zICh0b2sgJy4nKSB0b2tzKSkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3RvaztcblxuTF90b2sgPSAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKExfc3RyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX3Rva3MpfSkpfX0pO1xucmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykobGF6eShcIlxcXFxAXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiZGF0YVR5cGVcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfbmFtZSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykobGF6eShcIi5cIikpfSkpKExfdG9rcyl9KSl9KSl9KSl9KSgpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY3JlYXRlRGVmXCIpKShsYXp5KDQpKShsYXp5KFwiY3JlYXRlRGVmIGRlZiBuYW1lIGFyaXR5IHNyYyA9IFxcXFxcXFxcXFxuICB0b2sgc3RyID0gdG9rZW4gc3RyIChwb3NpdGlvbiBkZWYpXFxuICAuXFxuICBqc29uU3RyaW5naWZ5ICh0b2tlblN0cmluZyBuYW1lKSAoXFxcXGVyciAuIHBhcnNlRXJyIChzdHJDYXQgKGNvbnMgXFxcIkJhZCBmdW5jdGlvbiBuYW1lIFxcXCIgKGNvbnMgKGxvYyBuYW1lKSBuaWwpKSkgZXJyKSBcXFxcbmFtZVN0ciAuXFxuICAgIGpzb25TdHJpbmdpZnkgc3JjIChcXFxcZXJyIC4gcGFyc2VFcnIgKHN0ckNhdCAoY29ucyBcXFwiQmFkIHNvdXJjZSBcXFwiIChjb25zIChsb2MgbmFtZSkgbmlsKSkpIGVycikgXFxcXHNyY1N0ciAuXFxuICAgICAgI2NvbnMgKHRvayAnZGVmaW5lJykgKGNvbnMgKHRvayBuYW1lU3RyKSAoY29ucyAodG9rIChzdHJTdHJpbmcgYXJpdHkpKSAoY29ucyAodG9rIHNyY1N0cikgKGNvbnMgZGVmIG5pbCkpKSlcXG4gICAgICBjb25zICh0b2sgJ1xcXFxcXFxcQCcpIChjb25zIChjb25zICh0b2sgJ2RlZmluaXRpb24nKSAoY29ucyAodG9rIG5hbWUpIG5pbCkpIChjb25zICh0b2sgJy4nKSAoY29ucyAodG9rICdkZWZpbmUnKSAoY29ucyAodG9rIG5hbWVTdHIpIChjb25zICh0b2sgKHN0clN0cmluZyBhcml0eSkpIChjb25zICh0b2sgc3JjU3RyKSAoY29ucyBkZWYgbmlsKSkpKSkpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9hcml0eSl7cmV0dXJuIGZ1bmN0aW9uKExfc3JjKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3RvaztcblxuTF90b2sgPSAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKExfc3RyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX2RlZil9KSl9fSk7XG5yZXR1cm4gcmVzb2x2ZShMX2pzb25TdHJpbmdpZnkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfbmFtZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiQmFkIGZ1bmN0aW9uIG5hbWUgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX25hbWUpfSkpKExfbmlsKX0pKX0pKX0pKShMX2Vycil9fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWVTdHIpe3JldHVybiByZXNvbHZlKExfanNvblN0cmluZ2lmeSkoTF9zcmMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Vycil7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIkJhZCBzb3VyY2UgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX25hbWUpfSkpKExfbmlsKX0pKX0pKX0pKShMX2Vycil9fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3NyY1N0cil7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykobGF6eShcIlxcXFxAXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKGxhenkoXCJkZWZpbml0aW9uXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShMX25hbWUpfSkpKExfbmlsKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiLlwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykobGF6eShcImRlZmluZVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykoTF9uYW1lU3RyKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0cmluZykoTF9hcml0eSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykoTF9zcmNTdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9kZWYpKExfbmlsKX0pKX0pKX0pKX0pKX0pKX0pKX0pKX19KSl9fSkpfSkoKX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY2hlY2tTZXREYXRhVHlwZVwiKSkobGF6eSgzKSkobGF6eShcImNoZWNrU2V0RGF0YVR5cGUgdG9rcyBjdXJUb2tzIG5hbWUgPSB3aXRoQ29ucyBjdXJUb2tzIHRva3MgXFxcXGggdCAuXFxuICBpc1Rva2VuU3RyaW5nIGggJz0nXFxuICAgIGlzVG9rZW5TdHJpbmcgKGhlYWQgdCkgJ1xcXFxcXFxcJ1xcbiAgICAgIHNldERhdGFUeXBlQW5ubyB0b2tzIG5hbWVcXG4gICAgICB0b2tzXFxuICAgIGNoZWNrU2V0RGF0YVR5cGUgdG9rcyB0IG5hbWVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX2N1clRva3Mpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfY3VyVG9rcykoTF90b2tzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIj1cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3QpfSkpKGxhenkoXCJcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldERhdGFUeXBlQW5ubykoTF90b2tzKShMX25hbWUpfSkpKExfdG9rcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jaGVja1NldERhdGFUeXBlKShMX3Rva3MpKExfdCkoTF9uYW1lKX0pKX19fSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFyaXR5XCIpKShsYXp5KDIpKShsYXp5KFwiYXJpdHkgdG9rcyBuID0gaXNUb2tlblN0cmluZyAoaGVhZCB0b2tzKSAnPScgbiAoYXJpdHkgKHRhaWwgdG9rcykgKCsgbiAxKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3Rva3MpfSkpKGxhenkoXCI9XCIpKShMX24pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXJpdHkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF90b2tzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRvKShMX24pKGxhenkoMSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidG9rTGlzdFN0clwiKSkobGF6eSgxKSkobGF6eShcInRva0xpc3RTdHIgdG9rcyA9IGpzb25TdHJpbmdpZnkgKGpvaW4gKG1hcCAoXFxcXHQgLiB0b2tlblN0cmluZyB0KSB0b2tzKSAnICcpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gcmVzb2x2ZShMX2pzb25TdHJpbmdpZnkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfam9pbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXApKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfdCl9fSkpKExfdG9rcyl9KSkobGF6eShcIiBcIikpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsaW5lUGF0XCIpKShsYXp5KDApKShsYXp5KFwibGluZVBhdCA9IHJlZ2V4cCAnXFxcXFxcXFxyP1xcXFxcXFxcbig/PVteIF18JCknXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIlxcXFxyP1xcXFxuKD89W14gXXwkKVwiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZW1wdHlMaW5lUGF0XCIpKShsYXp5KDApKShsYXp5KFwiZW1wdHlMaW5lUGF0ID0gcmVnZXhwICcoXlsgXFxcXFxcXFxpXSpcXFxcXFxcXCMuKnxeWyBcXFxcXFxcXGldKiR8XlxcXFxcXFxccj9cXFxcXFxcXG5bIFxcXFxcXFxcaV0qJCknXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIiheWyBcXFxcaV0qXFxcXCMuKnxeWyBcXFxcaV0qJHxeXFxcXHI/XFxcXG5bIFxcXFxpXSokKVwiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGluZVNjcnViXCIpKShsYXp5KDApKShsYXp5KFwibGluZVNjcnViID0gcmVnZXhwRmxhZ3MgJ1xcXFxcXFxcclxcXFxcXFxcbicgJ2cnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cEZsYWdzKShsYXp5KFwiXFxcXHJcXFxcblwiKSkobGF6eShcImdcIikpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxpbmVzRm9yRmlsZVwiKSkobGF6eSgxKSkobGF6eShcImxpbmVzRm9yRmlsZSB0ZXh0ID0gZmlsdGVyXFxuICBcXFxcbGluZSAuIGlzTmlsIChzdHJNYXRjaCBsaW5lIGVtcHR5TGluZVBhdClcXG4gIHN0clNwbGl0IChzdHJSZXBsYWNlIHRleHQgbGluZVNjcnViICdcXFxcbicpIGxpbmVQYXRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3RleHQpe3JldHVybiByZXNvbHZlKExfZmlsdGVyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ck1hdGNoKShMX2xpbmUpKExfZW1wdHlMaW5lUGF0KX0pKX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTcGxpdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJSZXBsYWNlKShMX3RleHQpKExfbGluZVNjcnViKShsYXp5KFwiXFxuXCIpKX0pKShMX2xpbmVQYXQpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkZWZQYXRcIikpKGxhenkoMCkpKGxhenkoXCJkZWZQYXQgPSByZWdleHAgJ15bXiA9XSsuKiA9KCB8JCknXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIl5bXiA9XSsuKiA9KCB8JClcIikpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInVuYW5jaG9yZWREZWZQYXRcIikpKGxhenkoMCkpKGxhenkoXCJ1bmFuY2hvcmVkRGVmUGF0ID0gcmVnZXhwICdeKCg/OlxcXFxcXFxccypcXFxcXFxcXG58I1teXFxcXFxcXFxuXSpcXFxcXFxcXG4pKikoW149XFxcXFxcXFxuXSopKD1cXFxcXFxcXChbXj1dKz18PSk/J1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZWdleHApKGxhenkoXCJeKCg/OlxcXFxzKlxcXFxufCNbXlxcXFxuXSpcXFxcbikqKShbXj1cXFxcbl0qKSg9XFxcXChbXj1dKz18PSk/XCIpKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJuYW1lc0ZvckxpbmVzXCIpKShsYXp5KDEpKShsYXp5KFwibmFtZXNGb3JMaW5lcyBsaW5lcyA9IGZvbGRsXFxuICBcXFxccmVzdWx0IGxpbmUgLiBcXFxcXFxcXFxcbiAgICBtID0gc3RyTWF0Y2ggbGluZSBkZWZQYXRcXG4gICAgLlxcbiAgICBpc05pbCBtIHJlc3VsdCAoY29ucyAoaGVhZCAodGFpbCBtKSkgcmVzdWx0KVxcbiAgbmlsXFxuICBsaW5lc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZXMpe3JldHVybiByZXNvbHZlKExfZm9sZGwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9tO1xuXG5MX20gPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ck1hdGNoKShMX2xpbmUpKExfZGVmUGF0KX0pO1xucmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9tKShMX3Jlc3VsdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9tKX0pKX0pKShMX3Jlc3VsdCl9KSl9KSgpfX19KSkoTF9uaWwpKExfbGluZXMpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJydW5QYXJzZUZpbHRlcnNcIikpKGxhenkoMikpKGxhenkoXCJydW5QYXJzZUZpbHRlcnMgZmlsdGVycyBsaW5lID0gZmlsdGVyc1xcbiAgXFxcXGggdCBEIC4gYmluZCAoaCBsaW5lKSBcXFxcZmlsdGVyZWQgLiBydW5QYXJzZUZpbHRlcnMgdCBmaWx0ZXJlZFxcbiAgbGluZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZmlsdGVycyl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaCkoTF9saW5lKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWx0ZXJlZCl7cmV0dXJuIHJlc29sdmUoTF9ydW5QYXJzZUZpbHRlcnMpKExfdCkoTF9maWx0ZXJlZCl9fSkpfX19fSkpKExfbGluZSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc0Jsb2NrU3RhcnRcIikpKGxhenkoMSkpKGxhenkoXCJpc0Jsb2NrU3RhcnQgdG9rID0gYW5kXFxuICBvciAoaXNUb2tlbiB0b2spIChpc1N0cmluZyB0b2spXFxuICBjb250YWlucyBibG9ja1N0YXJ0cyAoc3RyVG9rZW5TdHJpbmcgdG9rKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3Rvayl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1N0cmluZykoTF90b2spfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udGFpbnMpKExfYmxvY2tTdGFydHMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyVG9rZW5TdHJpbmcpKExfdG9rKX0pKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFjcm9TdWJcIikpKGxhenkoMikpKGxhenkoXCJtYWNyb1N1YiBtYWNzIGV4cHIgPSBwb3N0UHJvY2Vzc01hY3JvIC0xIC0xIChiYXNlTWFjcm9TdWIgbWFjcyBleHByKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIGZ1bmN0aW9uKExfZXhwcil7cmV0dXJuIHJlc29sdmUoTF9wb3N0UHJvY2Vzc01hY3JvKShsYXp5KC0xKSkobGF6eSgtMSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmFzZU1hY3JvU3ViKShMX21hY3MpKExfZXhwcil9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjb25zaWZ5TWFjcm9WYWx1ZVwiKSkobGF6eSgxKSkobGF6eShcImNvbnNpZnlNYWNyb1ZhbHVlIHZhbHVlID0gaXNDb25zIHZhbHVlIHZhbHVlIChjb25zIHZhbHVlIG5pbClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF92YWx1ZSkoTF92YWx1ZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3ZhbHVlKShMX25pbCl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImJhc2VNYWNyb1N1YlwiKSkobGF6eSgyKSkobGF6eShcImJhc2VNYWNyb1N1YiBtYWNzIGV4cHIgPSBpc1Rva2VuIGV4cHJcXG4gIGV4cHJcXG4gIGlzUGFyZW5zIGV4cHJcXG4gICAgZXhwciBcXFxcc3RhcnQgZW5kIGNvbnRlbnQgLiBcXFxcXFxcXFxcbiAgICAgIHJlc3VsdCA9IGJhc2VNYWNyb1N1YiBtYWNzIGNvbnRlbnRcXG4gICAgICAuXFxuICAgICAgaXNUb2tlbiByZXN1bHQgcmVzdWx0IChwYXJlbnMgc3RhcnQgZW5kIHJlc3VsdClcXG4gICAgd2l0aENvbnMgZXhwciBleHByIFxcXFxoIHQgLlxcbiAgICAgIGlzQmxvY2tTdGFydCBoXFxuICAgICAgICBjb25zIGhcXG4gICAgICAgICAgaXNUb2tlblN0cmluZyBoICdcXFxcXFxcXFxcXFxcXFxcJ1xcbiAgICAgICAgICAgIG1hY3JvU3ViTGV0IG1hY3MgdFxcbiAgICAgICAgICAgIG1hY3JvU3ViQm9keSAnLicgbWFjcyB0XFxuICAgICAgICB3aXRoVG9rZW4gaFxcbiAgICAgICAgICBcXFxcXFxcXFxcbiAgICAgICAgICAgIHN1YkggPSBiYXNlTWFjcm9TdWIgbWFjcyBoXFxuICAgICAgICAgICAgLlxcbiAgICAgICAgICAgIHdpdGhUb2tlbiBzdWJIXFxuICAgICAgICAgICAgICBjb25zIHN1YkggKG1hcCAoYmFzZU1hY3JvU3ViIG1hY3MpIHQpXFxuICAgICAgICAgICAgICBcXFxcdG9rIHBvcyAuIGJhc2VNYWNyb1N1YiBtYWNzIChjb25zIHN1YkggdClcXG4gICAgICAgICAgXFxcXHRvayBwb3MgLiBhc3NvYyB0b2sgbWFjc1xcbiAgICAgICAgICAgIFxcXFxkZWYgLiBiYXNlTWFjcm9TdWIgbWFjcyAoZGVmIHQpXFxuICAgICAgICAgICAgY29ucyBoIChtYXAgKGJhc2VNYWNyb1N1YiBtYWNzKSB0KVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIGZ1bmN0aW9uKExfZXhwcil7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX2V4cHIpKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1BhcmVucykoTF9leHByKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfcmVzdWx0O1xuXG5MX3Jlc3VsdCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmFzZU1hY3JvU3ViKShMX21hY3MpKExfY29udGVudCl9KTtcbnJldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF9yZXN1bHQpKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVucykoTF9zdGFydCkoTF9lbmQpKExfcmVzdWx0KX0pKX0pKCl9fX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9leHByKShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaXNCbG9ja1N0YXJ0KShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIlxcXFxcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hY3JvU3ViTGV0KShMX21hY3MpKExfdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWNyb1N1YkJvZHkpKGxhenkoXCIuXCIpKShMX21hY3MpKExfdCl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF93aXRoVG9rZW4pKExfaCkoZnVuY3Rpb24oKXtcbnZhciBMX3N1Ykg7XG5cbkxfc3ViSCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmFzZU1hY3JvU3ViKShMX21hY3MpKExfaCl9KTtcbnJldHVybiByZXNvbHZlKExfd2l0aFRva2VuKShMX3N1YkgpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9zdWJIKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcyl9KSkoTF90KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3N1YkgpKExfdCl9KSl9fX0pKX0pKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc29jKShMX3RvaykoTF9tYWNzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWYpe3JldHVybiByZXNvbHZlKExfYmFzZU1hY3JvU3ViKShMX21hY3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmKShMX3QpfSkpfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXApKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmFzZU1hY3JvU3ViKShMX21hY3MpfSkpKExfdCl9KSl9KSl9fX0pKX0pKX19fSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFjcm9TdWJMZXRcIikpKGxhenkoMikpKGxhenkoXCJtYWNyb1N1YkxldCBtYWNzIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBpc1Rva2VuU3RyaW5nIGggJy4nXFxuICAgIGNvbnMgaCAoYmFzZU1hY3JvU3ViIG1hY3MgdClcXG4gICAgY29ucyAoc2V0UGFyZW5zIGggXFxcXGNvbnRlbnQgLiBtYWNyb1N1YkJvZHkgJz0nIG1hY3MgY29udGVudCkgKG1hY3JvU3ViTGV0IG1hY3MgdClcXG4gICMgRG9uJ3QgYm90aGVyIHdpdGggcGFyc2UgZXJyb3JzIGF0IHRoaXMgcG9pbnQgLS0gYXN0IGdlbmVyYXRvciB3aWxsIGRldGVjdCB0aGVtXFxuICBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX21hY3Mpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcykoTF90KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0UGFyZW5zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiByZXNvbHZlKExfbWFjcm9TdWJCb2R5KShsYXp5KFwiPVwiKSkoTF9tYWNzKShMX2NvbnRlbnQpfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hY3JvU3ViTGV0KShMX21hY3MpKExfdCl9KSl9KSl9fX19KSkoTF9uaWwpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFjcm9TdWJCb2R5XCIpKShsYXp5KDMpKShsYXp5KFwibWFjcm9TdWJCb2R5IGNoYXIgbWFjcyBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gY29ucyBoXFxuICAgIGlzVG9rZW5TdHJpbmcgaCBjaGFyIGJhc2VNYWNyb1N1YiAobWFjcm9TdWJCb2R5IGNoYXIpXFxuICAgICAgbWFjc1xcbiAgICAgIHRcXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY2hhcil7cmV0dXJuIGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKExfY2hhcikoTF9iYXNlTWFjcm9TdWIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFjcm9TdWJCb2R5KShMX2NoYXIpfSkpKExfbWFjcykoTF90KX0pKX19fX0pKShMX25pbCl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicG9zdFByb2Nlc3NNYWNyb1wiKSkobGF6eSgzKSkobGF6eShcInBvc3RQcm9jZXNzTWFjcm8gYmVmb3JlIGFmdGVyIGV4cHIgPSBpc1N0cmluZyBleHByXFxuICB0b2tlbiBleHByIChlcSBhZnRlciAtMSBiZWZvcmUgYWZ0ZXIpXFxuICBpc1BhcmVucyBleHByXFxuICAgIGV4cHIgXFxcXHN0YXJ0IGVuZCBjb250ZW50cyAuIHBhcmVucyBzdGFydCBlbmQgKHBvc3RQcm9jZXNzTWFjcm8gc3RhcnQgZW5kIGNvbnRlbnRzKVxcbiAgICBpc0NvbnMgZXhwclxcbiAgICAgIGV4cHIgXFxcXGggdCAuXFxuICAgICAgICBpc1Rva2VuIGhcXG4gICAgICAgICAgY29ucyBoIChwb3N0UHJvY2Vzc01hY3JvICgrIDEgKCsgKHRva2VuUG9zIGgpIChzdHJMZW4gKHRva2VuU3RyaW5nIGgpKSkpIC0xIHQpXFxuICAgICAgICAgIFxcXFxcXFxcXFxuICAgICAgICAgICAgcG9zU3RhcnQgPSBwb3NpdGlvbiBoXFxuICAgICAgICAgICAgcG9zRW5kID0gcG9zaXRpb24gdFxcbiAgICAgICAgICAgIHQyID0gcG9zdFByb2Nlc3NNYWNybyAtMSBhZnRlciB0XFxuICAgICAgICAgICAgaDIgPSBwb3N0UHJvY2Vzc01hY3JvIGJlZm9yZSAtMSBoXFxuICAgICAgICAgICAgLlxcbiAgICAgICAgICAgIGVxIHBvc1N0YXJ0IC0xXFxuICAgICAgICAgICAgICBjb25zIChwb3N0UHJvY2Vzc01hY3JvIGJlZm9yZSAocG9zaXRpb24gdDIpIGgpIHQyXFxuICAgICAgICAgICAgICBjb25zIGgyIChwb3N0UHJvY2Vzc01hY3JvICgrIDEgKGxleEVuZCBoMikpIGFmdGVyIHQpXFxuICAgICAgaXNOdW1iZXIgZXhwclxcbiAgICAgICAgdG9rZW4gKHN0clN0cmluZyBleHByKSAoZXEgYWZ0ZXIgLTEgYmVmb3JlIGFmdGVyKVxcbiAgICAgICAgZXhwclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYmVmb3JlKXtyZXR1cm4gZnVuY3Rpb24oTF9hZnRlcil7cmV0dXJuIGZ1bmN0aW9uKExfZXhwcil7cmV0dXJuIHJlc29sdmUoTF9pc1N0cmluZykoTF9leHByKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuKShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKExfYWZ0ZXIpKGxhenkoLTEpKShMX2JlZm9yZSkoTF9hZnRlcil9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1BhcmVucykoTF9leHByKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnRzKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVucykoTF9zdGFydCkoTF9lbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zdFByb2Nlc3NNYWNybykoTF9zdGFydCkoTF9lbmQpKExfY29udGVudHMpfSkpfX19fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc3RQcm9jZXNzTWFjcm8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKGxhenkoMSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5Qb3MpKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfaCl9KSl9KSl9KSl9KSkobGF6eSgtMSkpKExfdCl9KSl9KSkoZnVuY3Rpb24oKXtcbnZhciBMX2gyLCBMX3QyLCBMX3Bvc0VuZCwgTF9wb3NTdGFydDtcblxuTF9oMiA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zdFByb2Nlc3NNYWNybykoTF9iZWZvcmUpKGxhenkoLTEpKShMX2gpfSk7XG5cbkxfdDIgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc3RQcm9jZXNzTWFjcm8pKGxhenkoLTEpKShMX2FmdGVyKShMX3QpfSk7XG5cbkxfcG9zRW5kID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3NpdGlvbikoTF90KX0pO1xuXG5MX3Bvc1N0YXJ0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3NpdGlvbikoTF9oKX0pO1xucmV0dXJuIHJlc29sdmUoTF9lcSkoTF9wb3NTdGFydCkobGF6eSgtMSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3N0UHJvY2Vzc01hY3JvKShMX2JlZm9yZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3NpdGlvbikoTF90Mil9KSkoTF9oKX0pKShMX3QyKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaDIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zdFByb2Nlc3NNYWNybykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykobGF6eSgxKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sZXhFbmQpKExfaDIpfSkpfSkpKExfYWZ0ZXIpKExfdCl9KSl9KSl9KX19fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNOdW1iZXIpKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdHJpbmcpKExfZXhwcil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9hZnRlcikobGF6eSgtMSkpKExfYmVmb3JlKShMX2FmdGVyKX0pKX0pKShMX2V4cHIpfSkpfSkpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRlZk1hY3JvXCIpKShsYXp5KDIpKShsYXp5KFwiZGVmTWFjcm8gbmFtZSBkZWYgPSBiaW5kIChnZXRWYWx1ZSAnbWFjcm9EZWZzJykgXFxcXG1hY3MgLiBzZXRWYWx1ZSAnbWFjcm9EZWZzJyAoYWNvbnMgbmFtZSBkZWYgbWFjcylcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwibWFjcm9EZWZzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9tYWNzKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwibWFjcm9EZWZzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zKShMX25hbWUpKExfZGVmKShMX21hY3MpfSkpfX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRlbGltaXRlckxpc3RQcmVmaXhcIikpKGxhenkoMCkpKGxhenkoXCJkZWxpbWl0ZXJMaXN0UHJlZml4ID0gXFxcIlxcXFxcXFwiKD86XFxcXFxcXFxcXFxcXFxcXC58W15cXFxcXFxcIl0pKlxcXFxcXFwifCcoPzpcXFxcXFxcXFxcXFxcXFxcLnxbXiddKSonfFxcXFxcXFxcbiAqfCMuKnwgK1xcXCJcIikpKGxhenkoXCJcXFwiKD86XFxcXFxcXFwufFteXFxcIl0pKlxcXCJ8Jyg/OlxcXFxcXFxcLnxbXiddKSonfFxcXFxuICp8Iy4qfCArXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZWdleHBFc2NhcGVQYXRcIikpKGxhenkoMCkpKGxhenkoXCJyZWdleHBFc2NhcGVQYXQgPSByZWdleHBGbGFncyAnW1xcXFxcXFxcLVxcXFxcXFxcW1xcXFxcXFxcXS9cXFxcXFxcXHtcXFxcXFxcXH1cXFxcXFxcXChcXFxcXFxcXClcXFxcXFxcXCpcXFxcXFxcXCtcXFxcXFxcXD9cXFxcXFxcXC5cXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxeXFxcXFxcXFwkXFxcXFxcXFx8XScgJ2cnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cEZsYWdzKShsYXp5KFwiW1xcXFwtXFxcXFtcXFxcXS9cXFxce1xcXFx9XFxcXChcXFxcKVxcXFwqXFxcXCtcXFxcP1xcXFwuXFxcXFxcXFxcXFxcXlxcXFwkXFxcXHxdXCIpKShsYXp5KFwiZ1wiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWRkVG9rZW5cIikpKGxhenkoMSkpKGxhenkoXCJhZGRUb2tlbiBkZWwgPSBiaW5kIChnZXRWYWx1ZSAndG9rZW5MaXN0JylcXG4gIFxcXFxkZWxzIC4gY29udGFpbnMgZGVscyBkZWxcXG4gICAgZmFsc2VcXG4gICAgXFxcXFxcXFxcXG4gICAgICBuZXdEZWxzID0gaW5zZXJ0U29ydGVkIChcXFxcYSBiIC4gPiAoc3RyTGVuIGEpIChzdHJMZW4gYikpIGRlbCBkZWxzXFxuICAgICAgLlxcbiAgICAgIGJpbmQgKHNldFZhbHVlICd0b2tlbkxpc3QnIG5ld0RlbHMpXFxuICAgICAgICBcXFxcXyAuIGNvbXB1dGVUb2tlblBhdCBuZXdEZWxzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWwpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuTGlzdFwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVscyl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9kZWxzKShMX2RlbCkoTF9mYWxzZSkoZnVuY3Rpb24oKXtcbnZhciBMX25ld0RlbHM7XG5cbkxfbmV3RGVscyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaW5zZXJ0U29ydGVkKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMXyR6KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoTF9hKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoTF9iKX0pKX19fSkpKExfZGVsKShMX2RlbHMpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJ0b2tlbkxpc3RcIikpKExfbmV3RGVscyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9jb21wdXRlVG9rZW5QYXQpKExfbmV3RGVscyl9fSkpfSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjb21wdXRlVG9rZW5QYXRcIikpKGxhenkoMSkpKGxhenkoXCJjb21wdXRlVG9rZW5QYXQgZGVscyA9IFxcXFxcXFxcXFxuICBkZWxQYXRzID0gbWFwIChcXFxcaXRlbSAuIHN0clJlcGxhY2UgaXRlbSByZWdleHBFc2NhcGVQYXQgXFxcIlxcXFxcXFxcJCZcXFwiKSBkZWxzXFxuICBuZXdQYXQgPSBzdHJDYXQgKGNvbnMgJygnIChjb25zIChqb2luIChjb25zIGRlbGltaXRlckxpc3RQcmVmaXggZGVsUGF0cykgJ3wnKSAoY29ucyAnKScgbmlsKSkpXFxuICAuXFxuICBzZXRWYWx1ZSAndG9rZW5QYXQnIG5ld1BhdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVscyl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9uZXdQYXQsIExfZGVsUGF0cztcblxuTF9uZXdQYXQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiKFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2pvaW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9kZWxpbWl0ZXJMaXN0UHJlZml4KShMX2RlbFBhdHMpfSkpKGxhenkoXCJ8XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIpXCIpKShMX25pbCl9KSl9KSl9KSl9KTtcblxuTF9kZWxQYXRzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXApKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiByZXNvbHZlKExfc3RyUmVwbGFjZSkoTF9pdGVtKShMX3JlZ2V4cEVzY2FwZVBhdCkobGF6eShcIlxcXFwkJlwiKSl9fSkpKExfZGVscyl9KTtcbnJldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJ0b2tlblBhdFwiKSkoTF9uZXdQYXQpfSkoKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWRkVG9rZW5Hcm91cFwiKSkobGF6eSgyKSkobGF6eShcImFkZFRva2VuR3JvdXAgb3BlbiBjbG9zZSA9IGJpbmQgKGFkZFRva2VuIG9wZW4pXFxuICBcXFxcXyAuIGJpbmQgKGFkZFRva2VuIGNsb3NlKVxcbiAgICBcXFxcXyAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkdyb3VwcycpXFxuICAgICAgXFxcXGdyIC4gc2V0VmFsdWUgJ3Rva2VuR3JvdXBzJyAoYWNvbnMgb3BlbiBjbG9zZSBncilcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29wZW4pe3JldHVybiBmdW5jdGlvbihMX2Nsb3NlKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW4pKExfb3Blbil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFRva2VuKShMX2Nsb3NlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fXzApe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ncil7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zKShMX29wZW4pKExfY2xvc2UpKExfZ3IpfSkpfX0pKX19KSl9fSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyZW5Hcm91cHNcIikpKGxhenkoMCkpKGxhenkoXCJwYXJlbkdyb3VwcyA9IGFjb25zICcoJyAnKScgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zKShsYXp5KFwiKFwiKSkobGF6eShcIilcIikpKExfbmlsKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZVwiKSkobGF6eSgyKSkobGF6eShcInBhcnNlIHN0ciBwYXQgPSBpZk5vdEVyciAocGFyc2VJbmRlbnQgKHRva2VuICdcXFxcbicgMCkgKHRva2VucyBzdHIgcGF0KSBuaWwgcGFyZW5Hcm91cHMpIFxcXFxsaXN0IC4gbGlzdCBcXFxcaCB0IC4gc3RyaXBQYXJlbnMgaFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VJbmRlbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKGxhenkoXCJcXG5cIikpKGxhenkoMCkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5zKShMX3N0cikoTF9wYXQpfSkpKExfbmlsKShMX3BhcmVuR3JvdXBzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfc3RyaXBQYXJlbnMpKExfaCl9fX0pKX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZUdcIikpKGxhenkoMykpKGxhenkoXCJwYXJzZUcgc3RyIHBhdCBncm91cHMgPSBpZk5vdEVyciAocGFyc2VJbmRlbnQgKHRva2VuICdcXFxcbicgMCkgKHRva2VucyBzdHIgcGF0KSBuaWwgZ3JvdXBzKSBcXFxcbGlzdCAuIGxpc3QgXFxcXGggdCAuIHN0cmlwUGFyZW5zIGhcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VJbmRlbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKGxhenkoXCJcXG5cIikpKGxhenkoMCkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5zKShMX3N0cikoTF9wYXQpfSkpKExfbmlsKShMX2dyb3Vwcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX3N0cmlwUGFyZW5zKShMX2gpfX19KSl9fSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlVG9Bc3RcIikpKGxhenkoMikpKGxhenkoXCJwYXJzZVRvQXN0IHN0ciBwYXQgPSBjcmVhdGVBc3QgKHBhcnNlIHN0ciBwYXQpIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlKShMX3N0cikoTF9wYXQpfSkpKExfbmlsKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlTVwiKSkobGF6eSgxKSkobGF6eShcInBhcnNlTSBzdHIgPVxcbiAgYmluZCAoZ2V0VmFsdWUgJ3Rva2VuUGF0JylcXG4gICAgXFxcXHRva1BhdCAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkdyb3VwcycpXFxuICAgICAgXFxcXGdyb3VwcyAuIHBhcnNlRyBzdHIgdG9rUGF0IGdyb3Vwc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlblBhdFwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rUGF0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlbkdyb3Vwc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRykoTF9zdHIpKExfdG9rUGF0KShMX2dyb3Vwcyl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2NhbkxpbmVcIikpKGxhenkoNCkpKGxhenkoXCJzY2FuTGluZSBzdHIgcGF0IG9uRGVmIG9uRXhwciA9IHNjYW5MaW5lRyBzdHIgcGF0IHBhcmVuR3JvdXBzIG9uRGVmIG9uRXhwclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX29uRGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9vbkV4cHIpe3JldHVybiByZXNvbHZlKExfc2NhbkxpbmVHKShMX3N0cikoTF9wYXQpKExfcGFyZW5Hcm91cHMpKExfb25EZWYpKExfb25FeHByKX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VMaW5lXCIpKShsYXp5KDUpKShsYXp5KFwicGFyc2VMaW5lIHN0ciBwYXQgbmFtZXMgb25EZWYgb25FeHByID0gcGFyc2VMaW5lRyBzdHIgcGF0IG5hbWVzIHBhcmVuR3JvdXBzIG9uRGVmIG9uRXhwclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9vbkRlZil7cmV0dXJuIGZ1bmN0aW9uKExfb25FeHByKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlTGluZUcpKExfc3RyKShMX3BhdCkoTF9uYW1lcykoTF9wYXJlbkdyb3VwcykoTF9vbkRlZikoTF9vbkV4cHIpfX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VMaW5lTVwiKSkobGF6eSgxKSkobGF6eShcInBhcnNlTGluZU0gc3RyID0gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuUGF0JylcXG4gIFxcXFx0b2tQYXQgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICBcXFxcZ3JvdXBzIC4gcGFyc2VMaW5lRyBzdHIgdG9rUGF0IG5pbCBncm91cHMgaWQgaWRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5QYXRcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva1BhdCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5Hcm91cHNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUxpbmVHKShMX3N0cikoTF90b2tQYXQpKExfbmlsKShMX2dyb3VwcykoTF9pZCkoTF9pZCl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFjcm9TdWJNXCIpKShsYXp5KDEpKShsYXp5KFwibWFjcm9TdWJNIGV4cHIgPVxcbiAgYmluZCAoZ2V0VmFsdWUgJ21hY3JvRGVmcycpXFxuICAgIFxcXFxtYWNzIC4gbWFjcm9TdWIgbWFjcyBleHByXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9leHByKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJtYWNyb0RlZnNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX21hY3Mpe3JldHVybiByZXNvbHZlKExfbWFjcm9TdWIpKExfbWFjcykoTF9leHByKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm1hY3JvUGFyc2VcIikpKGxhenkoMSkpKGxhenkoXCJtYWNyb1BhcnNlIHN0ciA9XFxuICBiaW5kIChwYXJzZU0gc3RyKVxcbiAgICBcXFxcZXggLiBtYWNyb1N1Yk0gZXhcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlTSkoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2V4KXtyZXR1cm4gcmVzb2x2ZShMX21hY3JvU3ViTSkoTF9leCl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ0b2tlbnNNXCIpKShsYXp5KDEpKShsYXp5KFwidG9rZW5zTSBzdHIgPVxcbiAgYmluZCAoZ2V0VmFsdWUgJ3Rva2VuUGF0JylcXG4gICAgXFxcXGRlbGltaXRlclBhdCAuIHRva2VucyBzdHIgZGVsaW1pdGVyUGF0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuUGF0XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWxpbWl0ZXJQYXQpe3JldHVybiByZXNvbHZlKExfdG9rZW5zKShMX3N0cikoTF9kZWxpbWl0ZXJQYXQpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VMaW5lc1wiKSkobGF6eSgyKSkobGF6eShcInBhcnNlTGluZXMgbGluZXMgcmVzdWx0ID0gbGluZXNcXG4gIFxcXFxoIHQgRCAuIGJpbmQgKHBhcnNlTGluZU0gaClcXG4gICAgXFxcXGFzdCAuIHBhcnNlTGluZXMgdCAoY29ucyBhc3QgcmVzdWx0KVxcbiAgcmV2ZXJzZSByZXN1bHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpbmVzKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfbGluZXMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUxpbmVNKShMX2gpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FzdCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUxpbmVzKShMX3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9hc3QpKExfcmVzdWx0KX0pKX19KSl9fX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZXZlcnNlKShMX3Jlc3VsdCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZUZpbGVcIikpKGxhenkoMSkpKGxhenkoXCJwYXJzZUZpbGUgdGV4dCA9IHBhcnNlTGluZXMgKGxpbmVzRm9yRmlsZSB0ZXh0KSBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3RleHQpe3JldHVybiByZXNvbHZlKExfcGFyc2VMaW5lcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9saW5lc0ZvckZpbGUpKExfdGV4dCl9KSkoTF9uaWwpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzaW1wbGVTY2FuTGluZVwiKSkobGF6eSgxKSkobGF6eShcInNpbXBsZVNjYW5MaW5lIGxpbmUgPSBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYXQnKVxcbiAgXFxcXHRva2VuUGF0IC4gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuR3JvdXBzJylcXG4gICAgXFxcXGdyb3VwcyAuIHNjYW5MaW5lRyBsaW5lIHRva2VuUGF0IGdyb3VwcyBpZCBpZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5QYXRcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva2VuUGF0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlbkdyb3Vwc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX3NjYW5MaW5lRykoTF9saW5lKShMX3Rva2VuUGF0KShMX2dyb3VwcykoTF9pZCkoTF9pZCl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2NhbkxpbmVNXCIpKShsYXp5KDEpKShsYXp5KFwic2NhbkxpbmVNIGxpbmUgPSBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYXQnKVxcbiAgXFxcXHRva2VuUGF0IC4gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuR3JvdXBzJylcXG4gICAgXFxcXGdyb3VwcyAuIGJpbmQgKGdldFZhbHVlICdwYXJzZUZpbHRlcnMnKVxcbiAgICAgIFxcXFxmaWx0ZXJzIC4gYmluZCAoZ2V0VmFsdWUgJ21hY3JvRGVmcycpXFxuICAgICAgICBcXFxcbWFjcm9zIC4gYmluZCAocnVuUGFyc2VGaWx0ZXJzIGZpbHRlcnMgKHNjYW5MaW5lRyBsaW5lIHRva2VuUGF0IGdyb3VwcyBpZCBpZCkpXFxuICAgICAgICAgIFxcXFxzY2FubmVkIC4gbWFjcm9TdWIgbWFjcm9zIHNjYW5uZWRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpbmUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuUGF0XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tlblBhdCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5Hcm91cHNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwicGFyc2VGaWx0ZXJzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWx0ZXJzKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJtYWNyb0RlZnNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX21hY3Jvcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3J1blBhcnNlRmlsdGVycykoTF9maWx0ZXJzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NjYW5MaW5lRykoTF9saW5lKShMX3Rva2VuUGF0KShMX2dyb3VwcykoTF9pZCkoTF9pZCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc2Nhbm5lZCl7cmV0dXJuIHJlc29sdmUoTF9tYWNyb1N1YikoTF9tYWNyb3MpKExfc2Nhbm5lZCl9fSkpfX0pKX19KSl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibmV3UGFyc2VMaW5lXCIpKShsYXp5KDIpKShsYXp5KFwibmV3UGFyc2VMaW5lIG5hbWVzIGxpbmUgPSBiaW5kIChzY2FuTGluZU0gbGluZSlcXG4gIFxcXFxzY2FubmVkIC4gaWZOb3RFcnIgKGNyZWF0ZUFzdCBzY2FubmVkIG5hbWVzKSBcXFxcYXN0IC4gYXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NjYW5MaW5lTSkoTF9saW5lKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zY2FubmVkKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9zY2FubmVkKShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hc3Qpe3JldHVybiByZXNvbHZlKExfYXN0KX19KSl9fSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicnVuTGluZVwiKSkobGF6eSgyKSkobGF6eShcInJ1bkxpbmUgbmFtZXMgbGluZSA9IGJpbmQgKG5ld1BhcnNlTGluZSBuYW1lcyBsaW5lKVxcbiAgXFxcXGFzdCAuIGJpbmQgKHJ1bkFzdCBhc3QpXFxuICAgIFxcXFxyZXN1bHQgLiBjb25zXFxuICAgICAgYXN0XFxuICAgICAgaXNQYXJzZUVyciByZXN1bHRcXG4gICAgICAgIGxlZnQgKHBhcnNlRXJyTXNnIHJlc3VsdClcXG4gICAgICAgIHJpZ2h0IHJlc3VsdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2xpbmUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9uZXdQYXJzZUxpbmUpKExfbmFtZXMpKExfbGluZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYXN0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcnVuQXN0KShMX2FzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfYXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyc2VFcnIpKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xlZnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnJNc2cpKExfcmVzdWx0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JpZ2h0KShMX3Jlc3VsdCl9KSl9KSl9fSkpfX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJ1bkxpbmVzXCIpKShsYXp5KDIpKShsYXp5KFwicnVuTGluZXMgbmFtZXMgbGluZXMgPSBsaW5lc1xcbiAgXFxcXGggdCBEIC4gYmluZCAocnVuTGluZSBuYW1lcyBoKVxcbiAgICBcXFxcbGluZSAuIGJpbmQgKHJ1bkxpbmVzIG5hbWVzIHQpXFxuICAgICAgXFxcXHJlc3QgLiBjb25zIGxpbmUgcmVzdFxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZXMpe3JldHVybiByZXNvbHZlKExfbGluZXMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9ydW5MaW5lKShMX25hbWVzKShMX2gpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpbmUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9ydW5MaW5lcykoTF9uYW1lcykoTF90KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbGluZSkoTF9yZXN0KX19KSl9fSkpfX19fSkpKExfbmlsKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJ1bkZpbGVcIikpKGxhenkoMSkpKGxhenkoXCJydW5GaWxlIHRleHQgPSBcXFxcXFxcXFxcbiAgbGluZXMgPSBsaW5lc0ZvckZpbGUgdGV4dFxcbiAgbmFtZXMgPSBuYW1lc0ZvckxpbmVzIGxpbmVzXFxuICAuXFxuICBydW5MaW5lcyBuYW1lcyBsaW5lc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdGV4dCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9uYW1lcywgTF9saW5lcztcblxuTF9uYW1lcyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbmFtZXNGb3JMaW5lcykoTF9saW5lcyl9KTtcblxuTF9saW5lcyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGluZXNGb3JGaWxlKShMX3RleHQpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX3J1bkxpbmVzKShMX25hbWVzKShMX2xpbmVzKX0pKCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImJhc2VMb2FkXCIpKShsYXp5KDEpKShsYXp5KFwiYmFzZUxvYWQgZmlsZSA9IGJpbmQgKHJlYWRGaWxlIGZpbGUpXFxuICBcXFxccmVzdWx0IC4gcmVzdWx0XFxuICAgIFxcXFxlcnIgLiBlcnJcXG4gICAgXFxcXGNvbnRlbnRzIC4gYmluZCAoZ2V0VmFsdWUgJ2FjdGl2ZVRva2VuUGFja3MnKVxcbiAgICAgIFxcXFxhY3RpdmVQYWNrcyAuIGJpbmQgcmVzZXRTdGRUb2tlblBhY2tzXFxuICAgICAgICBcXFxcXyAuIGJpbmQgKHJ1bkZpbGUgY29udGVudHMpXFxuICAgICAgICAgIFxcXFxyZXN1bHQgLiBpc05pbCBhY3RpdmVQYWNrc1xcbiAgICAgICAgICAgIGJpbmQgcmVzZXRTdGRUb2tlblBhY2tzXFxuICAgICAgICAgICAgICBcXFxcXyAuIHJlc3VsdFxcbiAgICAgICAgICAgIGJpbmQgKHJlc2V0VG9rZW5QYWNrcyBhY3RpdmVQYWNrcylcXG4gICAgICAgICAgICAgICAgXFxcXF8gLiByZXN1bHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbGUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZWFkRmlsZSkoTF9maWxlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiByZXNvbHZlKExfZXJyKX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudHMpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcImFjdGl2ZVRva2VuUGFja3NcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FjdGl2ZVBhY2tzKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKExfcmVzZXRTdGRUb2tlblBhY2tzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcnVuRmlsZSkoTF9jb250ZW50cyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0XzApe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfYWN0aXZlUGFja3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmluZCkoTF9yZXNldFN0ZFRva2VuUGFja3MpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX19fMSl7cmV0dXJuIHJlc29sdmUoTF9yZXN1bHRfMCl9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZXNldFRva2VuUGFja3MpKExfYWN0aXZlUGFja3MpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX19fMSl7cmV0dXJuIHJlc29sdmUoTF9yZXN1bHRfMCl9fSkpfSkpfX0pKX19KSl9fSkpfX0pKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxvYWRcIikpKGxhenkoMSkpKGxhenkoXCJsb2FkIGZpbGUgPSBiaW5kIChiYXNlTG9hZCBmaWxlKVxcbiAgXFxcXHJlc3VsdCAuIFxcXFxcXFxcXFxuICAgIGVycnMgPSBmb2xkciAoXFxcXGxpbmUgcmVzdWx0cyAuIHRhaWwgbGluZSAoXFxcXGVyIC4gY29ucyBlciByZXN1bHRzKSAoXFxcXHggLiByZXN1bHRzKSkgbmlsIHJlc3VsdFxcbiAgICAuXFxuICAgIGlzTmlsIGVycnNcXG4gICAgICByaWdodCB0cnVlXFxuICAgICAgbGVmdCBlcnJzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWxlKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmFzZUxvYWQpKExfZmlsZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX2VycnM7XG5cbkxfZXJycyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZm9sZHIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpbmUpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdHMpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9saW5lKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lcil7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2VyKShMX3Jlc3VsdHMpfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF94KXtyZXR1cm4gcmVzb2x2ZShMX3Jlc3VsdHMpfX0pKX19fSkpKExfbmlsKShMX3Jlc3VsdCl9KTtcbnJldHVybiByZXNvbHZlKExfaXNOaWwpKExfZXJycykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yaWdodCkoTF90cnVlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xlZnQpKExfZXJycyl9KSl9KSgpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmVxdWlyZVwiKSkobGF6eSgxKSkobGF6eShcInJlcXVpcmUgZmlsZSA9IGJpbmQgKGdldFZhbHVlICdyZXF1aXJlZEZpbGVzJylcXG4gIFxcXFxmaWxlcyAuIGNvbnRhaW5zIGZpbGVzIGZpbGVcXG4gICAgZmFsc2VcXG4gICAgYmluZCAobG9hZCBmaWxlKVxcbiAgICAgIFxcXFxyZXN1bHQgLiByZXN1bHRcXG4gICAgICAgIFxcXFx4IC4gbGVmdCB4XFxuICAgICAgICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICdyZXF1aXJlZEZpbGVzJyAoY29ucyBmaWxlIGZpbGVzKSlcXG4gICAgICAgICAgXFxcXF8gLiByaWdodCB0cnVlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWxlKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJyZXF1aXJlZEZpbGVzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWxlcyl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9maWxlcykoTF9maWxlKShMX2ZhbHNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9hZCkoTF9maWxlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF94KXtyZXR1cm4gcmVzb2x2ZShMX2xlZnQpKExfeCl9fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInJlcXVpcmVkRmlsZXNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9maWxlKShMX2ZpbGVzKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fXzApe3JldHVybiByZXNvbHZlKExfcmlnaHQpKExfdHJ1ZSl9fSkpfX0pKX19KSl9KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkZWZUb2tlblBhY2tcIikpKGxhenkoMikpKGxhenkoXCJkZWZUb2tlblBhY2sgbmFtZSBwYWNrID0gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuUGFja3MnKVxcbiAgXFxcXHBhY2tzIC4gc2V0VmFsdWUgJ3Rva2VuUGFja3MnIChhY29ucyBuYW1lIHBhY2sgcGFja3MpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9wYWNrKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlblBhY2tzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wYWNrcyl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInRva2VuUGFja3NcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnMpKExfbmFtZSkoTF9wYWNrKShMX3BhY2tzKX0pKX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ1c2VUb2tlblBhY2tcIikpKGxhenkoMSkpKGxhenkoXCJ1c2VUb2tlblBhY2sgbmFtZSA9IGJpbmQgKGdldFZhbHVlICd0b2tlblBhY2tzJylcXG4gIFxcXFxwYWNrcyAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkdyb3VwcycpXFxuICAgIFxcXFxncm91cHMgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5MaXN0JylcXG4gICAgICBcXFxcdG9rZW5zIC4gYmluZCAoZ2V0VmFsdWUgJ2FjdGl2ZVRva2VuUGFja3MnKVxcbiAgICAgICAgXFxcXGFjdGl2ZVBhY2tzIC4gYmluZCAoZ2V0VmFsdWUgJ3BhcnNlRmlsdGVycycpXFxuICAgICAgICAgIFxcXFxmaWx0ZXJzIC4gYXNzb2MgbmFtZSBwYWNrc1xcbiAgICAgICAgICAgIFxcXFxwYWNrIC4gXFxcXFxcXFxcXG4gICAgICAgICAgICAgIGdyb3VwVG9rcyA9IGZvbGRsIChcXFxcdmFsdWUgZWwgLiBlbCBcXFxcaCB0IC4gY29ucyBoIChjb25zIHQgdmFsdWUpKSBuaWwgKGhlYWQgKHRhaWwgcGFjaykpXFxuICAgICAgICAgICAgICBuZXdUb2tzID0gcXVpY2tzb3J0IChcXFxcYSBiIC4gPiAoc3RyTGVuIGEpIChzdHJMZW4gYikpIChhcHBlbmQgKGhlYWQgcGFjaykgKGFwcGVuZCBncm91cFRva3MgdG9rZW5zKSlcXG4gICAgICAgICAgICAgIC5cXG4gICAgICAgICAgICAgIGJpbmQgKHNldFZhbHVlICd0b2tlbkxpc3QnIG5ld1Rva3MpXFxuICAgICAgICAgICAgICAgIFxcXFxfIC4gYmluZCAoc2V0VmFsdWUgJ3Rva2VuR3JvdXBzJyAoYXBwZW5kQWxpc3QgKGhlYWQgKHRhaWwgcGFjaykpIGdyb3VwcykpXFxuICAgICAgICAgICAgICAgICAgXFxcXF8gLiBiaW5kIChzZXRWYWx1ZSAncGFyc2VGaWx0ZXJzJyAoYXBwZW5kIGZpbHRlcnMgKGhlYWQgKHRhaWwgKHRhaWwgcGFjaykpKSkpXFxuICAgICAgICAgICAgICAgICAgICBcXFxcXyAuIGJpbmQgKGNvbXB1dGVUb2tlblBhdCBuZXdUb2tzKVxcbiAgICAgICAgICAgICAgICAgICAgICBcXFxcXyAuIHNldFZhbHVlICdhY3RpdmVUb2tlblBhY2tzJyAoY29ucyBuYW1lIGFjdGl2ZVBhY2tzKVxcbiAgICAgICAgICAgIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5QYWNrc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcGFja3Mpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuTGlzdFwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rZW5zKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJhY3RpdmVUb2tlblBhY2tzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hY3RpdmVQYWNrcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwicGFyc2VGaWx0ZXJzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWx0ZXJzKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc29jKShMX25hbWUpKExfcGFja3MpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3BhY2spe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbmV3VG9rcywgTF9ncm91cFRva3M7XG5cbkxfbmV3VG9rcyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcXVpY2tzb3J0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMXyR6KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoTF9hKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoTF9iKX0pKX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXBwZW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfcGFjayl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmQpKExfZ3JvdXBUb2tzKShMX3Rva2Vucyl9KSl9KSl9KTtcblxuTF9ncm91cFRva3MgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZvbGRsKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfZWwpe3JldHVybiByZXNvbHZlKExfZWwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdCkoTF92YWx1ZSl9KSl9fX0pKX19fSkpKExfbmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9wYWNrKX0pKX0pKX0pO1xucmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwidG9rZW5MaXN0XCIpKShMX25ld1Rva3MpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FwcGVuZEFsaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9wYWNrKX0pKX0pKShMX2dyb3Vwcyl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18wKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJwYXJzZUZpbHRlcnNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXBwZW5kKShMX2ZpbHRlcnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfcGFjayl9KSl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18xKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29tcHV0ZVRva2VuUGF0KShMX25ld1Rva3MpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX19fMil7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcImFjdGl2ZVRva2VuUGFja3NcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9uYW1lKShMX2FjdGl2ZVBhY2tzKX0pKX19KSl9fSkpfX0pKX19KSl9KSgpfX0pKShMX25pbCl9fSkpfX0pKX19KSl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmVzZXRUb2tlblBhY2tzXCIpKShsYXp5KDEpKShsYXp5KFwicmVzZXRUb2tlblBhY2tzIHBhY2tzID0gYmluZCAoc2V0VmFsdWUgJ3Rva2VuR3JvdXBzJyBuaWwpXFxuICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICd0b2tlbkxpc3QnIG5pbClcXG4gICAgXFxcXF8gLiBiaW5kIChzZXRWYWx1ZSAnYWN0aXZlVG9rZW5QYWNrcycgbmlsKVxcbiAgICAgIFxcXFxfIC4gYmluZCAoc2V0VmFsdWUgJ3BhcnNlRmlsdGVycycgbmlsKVxcbiAgICAgICAgXFxcXF8gLiBmb2xkcjFcXG4gICAgICAgICAgXFxcXHBhY2tDbWQgcmVzdWx0IC4gYmluZCBwYWNrQ21kIFxcXFxfIC4gcmVzdWx0XFxuICAgICAgICAgIG1hcCB1c2VUb2tlblBhY2sgcGFja3NcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3BhY2tzKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJ0b2tlbkdyb3Vwc1wiKSkoTF9uaWwpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInRva2VuTGlzdFwiKSkoTF9uaWwpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX19fMCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwiYWN0aXZlVG9rZW5QYWNrc1wiKSkoTF9uaWwpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX19fMSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwicGFyc2VGaWx0ZXJzXCIpKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18yKXtyZXR1cm4gcmVzb2x2ZShMX2ZvbGRyMSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcGFja0NtZCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKExfcGFja0NtZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18zKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc3VsdCl9fSkpfX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXApKExfdXNlVG9rZW5QYWNrKShMX3BhY2tzKX0pKX19KSl9fSkpfX0pKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlc2V0U3RkVG9rZW5QYWNrc1wiKSkobGF6eSgwKSkobGF6eShcInJlc2V0U3RkVG9rZW5QYWNrcyA9IGJpbmQgKGdldFZhbHVlICdzdGRUb2tlblBhY2tzJylcXG4gIFxcXFxzdGRzIC4gYmluZCAocmVzZXRUb2tlblBhY2tzIHN0ZHMpXFxuICAgIFxcXFxfIC4gc2V0VmFsdWUgJ2FjdGl2ZVRva2VuUGFja3MnIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwic3RkVG9rZW5QYWNrc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3Rkcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc2V0VG9rZW5QYWNrcykoTF9zdGRzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwiYWN0aXZlVG9rZW5QYWNrc1wiKSkoTF9uaWwpfX0pKX19KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWRkU3RkVG9rZW5QYWNrc1wiKSkobGF6eSgxKSkobGF6eShcImFkZFN0ZFRva2VuUGFja3MgbW9yZVBhY2tzID0gYmluZCAoZ2V0VmFsdWUgJ3N0ZFRva2VuUGFja3MnKVxcbiAgXFxcXHN0ZHMgLiBzZXRWYWx1ZSAnc3RkVG9rZW5QYWNrcycgKGFwcGVuZCBzdGRzIG1vcmVQYWNrcylcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX21vcmVQYWNrcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwic3RkVG9rZW5QYWNrc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3Rkcyl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInN0ZFRva2VuUGFja3NcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXBwZW5kKShMX3N0ZHMpKExfbW9yZVBhY2tzKX0pKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFkZFBhcnNlRmlsdGVyXCIpKShsYXp5KDEpKShsYXp5KFwiYWRkUGFyc2VGaWx0ZXIgZmlsdCA9IGJpbmQgKGdldFZhbHVlICdwYXJzZUZpbHRlcnMnKVxcbiAgXFxcXGZpbHRlcnMgLiBzZXRWYWx1ZSAncGFyc2VGaWx0ZXJzJyAoYXBwZW5kIGZpbHRlcnMgKGNvbnMgZmlsdCBuaWwpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZmlsdCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwicGFyc2VGaWx0ZXJzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWx0ZXJzKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwicGFyc2VGaWx0ZXJzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FwcGVuZCkoTF9maWx0ZXJzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfZmlsdCkoTF9uaWwpfSkpfSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZFwiKSkobGF6eSgzKSkobGF6eShcImQgbGFiZWwgdmFsdWUgZXhwciA9IGxvZyAoc3RyQ2F0IChjb25zIGxhYmVsIChjb25zIHZhbHVlIG5pbCkpKSBleHByXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sYWJlbCl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiBmdW5jdGlvbihMX2V4cHIpe3JldHVybiByZXNvbHZlKExfbG9nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2xhYmVsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdmFsdWUpKExfbmlsKX0pKX0pKX0pKShMX2V4cHIpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRkXCIpKShsYXp5KDIpKShsYXp5KFwiZGQgbGFiZWwgYXJnID0gZCBsYWJlbCBhcmcgYXJnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sYWJlbCl7cmV0dXJuIGZ1bmN0aW9uKExfYXJnKXtyZXR1cm4gcmVzb2x2ZShMX2QpKExfbGFiZWwpKExfYXJnKShMX2FyZyl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcIm1hY3JvRGVmc1wiKSkoTF9uaWwpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwicmVxdWlyZWRGaWxlc1wiKSkoTF9uaWwpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwidG9rZW5QYWNrc1wiKSkoTF9uaWwpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwiYWN0aXZlVG9rZW5QYWNrc1wiKSkoTF9uaWwpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwic3RkVG9rZW5QYWNrc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RkXCIpKShMX25pbCl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmVG9rZW5QYWNrKShsYXp5KFwic3RkXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFxcQFwiKSkoTF9uaWwpfSkpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hY29ucykobGF6eShcIihcIikpKGxhenkoXCIpXCIpKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX25pbCkoTF9uaWwpfSkpfSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc2V0U3RkVG9rZW5QYWNrcyl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW5Hcm91cCkobGF6eShcIltcIikpKGxhenkoXCJdXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbikobGF6eShcInxcIikpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxpc3RpZnlPcFwiKSkobGF6eSgyKSkobGF6eShcImxpc3RpZnlPcCBvcCBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gaXNUb2tlblN0cmluZyBoICd8J1xcbiAgICBjb25zIHQgbmlsXFxuICAgIGNvbnMgKGNvbnMgb3AgKGNvbnMgaCAobGlzdGlmeU9wIG9wIHQpKSkgbmlsXFxuICBjb25zICduaWwnIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3Ape3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCJ8XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdCkoTF9uaWwpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX29wKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9saXN0aWZ5T3ApKExfb3ApKExfdCl9KSl9KSl9KSkoTF9uaWwpfSkpfX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIm5pbFwiKSkoTF9uaWwpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGlzdGlmeVwiKSkobGF6eSgxKSkobGF6eShcImxpc3RpZnkgbGlzdCA9IGxpc3RpZnlPcCAnY29ucycgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0aWZ5T3ApKGxhenkoXCJjb25zXCIpKShMX2xpc3QpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcIltcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0aWZ5KShMX2gpfX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxpc3RGaWx0ZXJcIikpKGxhenkoMSkpKGxhenkoXCJsaXN0RmlsdGVyIGNvZGUgPSBiaW5kIChnZXRWYWx1ZSAnbGlzdE1hY3JvcycpXFxuICBcXFxcbGlzdE1hY3JvcyAuIGZpbHRlckFwcGxpZXMgY29kZSBcXFxcbGlzdCAuIGxpc3QgXFxcXGggdCAuXFxuICAgIGFuZCAoaXNUb2tlbiBoKSAoY29udGFpbnMgbGlzdE1hY3JvcyAodG9rZW5TdHJpbmcgaCkpXFxuICAgICAgbGlzdEZpbHRlclRhaWwgbGlzdFxcbiAgICAgIGxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NvZGUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcImxpc3RNYWNyb3NcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3RNYWNyb3Mpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQXBwbGllcykoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9saXN0TWFjcm9zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX2gpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGlzdEZpbHRlclRhaWwpKExfbGlzdCl9KSkoTF9saXN0KX19fSkpfX0pKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxpc3RGaWx0ZXJUYWlsXCIpKShsYXp5KDEpKShsYXp5KFwibGlzdEZpbHRlclRhaWwgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGlzVG9rZW5TdHJpbmcgaCAnfCdcXG4gICAgPiAobGVuZ3RoIHQpIDJcXG4gICAgICBjb25zIGggKGNvbnMgKHJlbW92ZUxhc3QgdCkgKGNvbnMgKGxhc3QgdCkgbmlsKSlcXG4gICAgICBsaXN0XFxuICAgIGNvbnMgaCAobGlzdEZpbHRlclRhaWwgdClcXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcInxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHopKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGVuZ3RoKShMX3QpfSkpKGxhenkoMikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVtb3ZlTGFzdCkoTF90KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGFzdCkoTF90KX0pKShMX25pbCl9KSl9KSl9KSkoTF9saXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9saXN0RmlsdGVyVGFpbCkoTF90KX0pKX0pKX19fX0pKShMX25pbCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZpbHRlckFwcGxpZXNcIikpKGxhenkoMikpKGxhenkoXCJmaWx0ZXJBcHBsaWVzIGNvZGUgZnVuYyA9IGlzUGFyZW5zIGNvZGVcXG4gIGNvZGUgXFxcXHN0YXJ0IGVuZCBjb250ZW50cyAuIHBhcmVucyBzdGFydCBlbmQgKGZpbHRlckFwcGxpZXMgY29udGVudHMgZnVuYylcXG4gIGlzQ29ucyBjb2RlXFxuICAgIFxcXFxcXFxcXFxuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJBcHBseUVsZW1lbnRzIGNvZGUgZnVuY1xcbiAgICAgIC5cXG4gICAgICBhbmQgKGlzQ29ucyBmaWx0ZXJlZCkgKGlzQmxvY2tTdGFydCAoaGVhZCBmaWx0ZXJlZCkpXFxuICAgICAgICBmaWx0ZXJlZFxcbiAgICAgICAgZnVuYyBmaWx0ZXJlZFxcbiAgICBjb2RlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29kZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudHMpe3JldHVybiByZXNvbHZlKExfcGFyZW5zKShMX3N0YXJ0KShMX2VuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJBcHBsaWVzKShMX2NvbnRlbnRzKShMX2Z1bmMpfSkpfX19fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2NvZGUpKGZ1bmN0aW9uKCl7XG52YXIgTF9maWx0ZXJlZDtcblxuTF9maWx0ZXJlZCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQXBwbHlFbGVtZW50cykoTF9jb2RlKShMX2Z1bmMpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfZmlsdGVyZWQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNCbG9ja1N0YXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfZmlsdGVyZWQpfSkpfSkpKExfZmlsdGVyZWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZnVuYykoTF9maWx0ZXJlZCl9KSl9KShMX2NvZGUpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmlsdGVyQXBwbHlFbGVtZW50c1wiKSkobGF6eSgyKSkobGF6eShcImZpbHRlckFwcGx5RWxlbWVudHMgY29kZSBmdW5jID0gY29kZVxcbiAgXFxcXGggdCBEIC4gaXNCbG9ja1N0YXJ0IGhcXG4gICAgY29ucyBoIChmaWx0ZXJCbG9jayBoIHQgZnVuYylcXG4gICAgY29ucyAoZmlsdGVyQXBwbGllcyBoIGZ1bmMpXFxuICAgICAgYW5kIChpc0NvbnMgdCkgKGlzQmxvY2tTdGFydCAoaGVhZCB0KSlcXG4gICAgICAgIGNvbnMgKGZpbHRlckFwcGx5RWxlbWVudHMgdCBmdW5jKSBuaWxcXG4gICAgICAgIGZpbHRlckFwcGx5RWxlbWVudHMgdCBmdW5jXFxuICBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NvZGUpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiByZXNvbHZlKExfY29kZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9pc0Jsb2NrU3RhcnQpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQmxvY2spKExfaCkoTF90KShMX2Z1bmMpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJBcHBsaWVzKShMX2gpKExfZnVuYyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNCbG9ja1N0YXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckFwcGx5RWxlbWVudHMpKExfdCkoTF9mdW5jKX0pKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJBcHBseUVsZW1lbnRzKShMX3QpKExfZnVuYyl9KSl9KSl9KSl9fX19KSkoTF9uaWwpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmlsdGVyQmxvY2tcIikpKGxhenkoMykpKGxhenkoXCJmaWx0ZXJCbG9jayB0eXBlIGNvZGUgZnVuYyA9IGlzVG9rZW5TdHJpbmcgdHlwZSAnXFxcXFxcXFwnXFxuICBmaWx0ZXJMYW1iZGEgY29kZSBmdW5jXFxuICBmaWx0ZXJMZXQgY29kZSBmdW5jXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90eXBlKXtyZXR1cm4gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfdHlwZSkobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyTGFtYmRhKShMX2NvZGUpKExfZnVuYyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJMZXQpKExfY29kZSkoTF9mdW5jKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmaWx0ZXJMZXRcIikpKGxhenkoMikpKGxhenkoXCJmaWx0ZXJMZXQgY29kZSBmdW5jID0gY29kZSBcXFxcaCB0IC4gaXNUb2tlblN0cmluZyBoICcuJ1xcbiAgY29ucyBoIChmaWx0ZXJBcHBsaWVzIHQgZnVuYylcXG4gIGNvbnMgKGZpbHRlckxldEJpbmRpbmcgaCBmdW5jKVxcbiAgICBmaWx0ZXJMZXQgdCBmdW5jXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gcmVzb2x2ZShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQXBwbGllcykoTF90KShMX2Z1bmMpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJMZXRCaW5kaW5nKShMX2gpKExfZnVuYyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJMZXQpKExfdCkoTF9mdW5jKX0pKX0pKX19fSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmlsdGVyTGV0QmluZGluZ1wiKSkobGF6eSgyKSkobGF6eShcImZpbHRlckxldEJpbmRpbmcgY29kZSBmdW5jID0gaXNQYXJlbnMgY29kZVxcbiAgc2V0UGFyZW5zIGNvZGUgXFxcXGNvbnRlbnRzIC4gZmlsdGVyTGV0QmluZGluZyBjb250ZW50cyBmdW5jXFxuICBpc0NvbnMgY29kZVxcbiAgICBjb2RlIFxcXFxoIHQgLiBjb25zIGhcXG4gICAgICBpc1Rva2VuU3RyaW5nIGggJz0nXFxuICAgICAgICBmaWx0ZXJBcHBsaWVzIHQgZnVuY1xcbiAgICAgICAgZmlsdGVyTGV0QmluZGluZyB0IGZ1bmNcXG4gICAgY29kZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29kZSl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIHJlc29sdmUoTF9pc1BhcmVucykoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFBhcmVucykoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250ZW50cyl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJMZXRCaW5kaW5nKShMX2NvbnRlbnRzKShMX2Z1bmMpfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIj1cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQXBwbGllcykoTF90KShMX2Z1bmMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyTGV0QmluZGluZykoTF90KShMX2Z1bmMpfSkpfSkpfX19KSl9KSkoTF9jb2RlKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZpbHRlckxhbWJkYVwiKSkobGF6eSgyKSkobGF6eShcImZpbHRlckxhbWJkYSBjb2RlIGZ1bmMgPSBjb2RlIFxcXFxoIHQgLiBjb25zIGhcXG4gIGlzVG9rZW5TdHJpbmcgaCAnLidcXG4gICAgZmlsdGVyQXBwbGllcyB0IGZ1bmNcXG4gICAgZmlsdGVyTGFtYmRhIHQgZnVuY1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29kZSl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIHJlc29sdmUoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckFwcGxpZXMpKExfdCkoTF9mdW5jKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckxhbWJkYSkoTF90KShMX2Z1bmMpfSkpfSkpfX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcImxpc3RNYWNyb3NcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIltcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIntcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImhhbXR7XCIpKShMX25pbCl9KSl9KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkUGFyc2VGaWx0ZXIpKExfbGlzdEZpbHRlcil9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW5Hcm91cCkobGF6eShcIntcIikpKGxhenkoXCJ9XCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcIntcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0aWZ5T3ApKGxhenkoXCJhY29uc1BhaXJcIikpKExfaCl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW5Hcm91cCkobGF6eShcImhhbXR7XCIpKShsYXp5KFwifVwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJoYW10e1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2hhbXRpZnkpKExfaCl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaGFtdFdpdGhQYWlyXCIpKShsYXp5KDIpKShsYXp5KFwiaGFtdFdpdGhQYWlyIHBhaXIgdCA9IGhhbXRXaXRoIChoZWFkIHBhaXIpICh0YWlsIHBhaXIpIHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3BhaXIpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaGFtdFdpdGgpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9wYWlyKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfcGFpcil9KSkoTF90KX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImhhbXRpZnlcIikpKGxhenkoMSkpKGxhenkoXCJoYW10aWZ5IGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBpc1Rva2VuU3RyaW5nIGggJ3wnXFxuICAgIGNvbnMgdCBuaWxcXG4gICAgYW5kIChpc0NvbnMgaCkgKG9yIChpc1Rva2VuU3RyaW5nIChoZWFkIGgpICdjb25zJykgKGlzVG9rZW5TdHJpbmcgKGhlYWQgaCkgJzonKSlcXG4gICAgICBbWydoYW10V2l0aCcgKGhlYWQgKHRhaWwgaCkpIChoZWFkICh0YWlsICh0YWlsIGgpKSkgfCBoYW10aWZ5IHRdXVxcbiAgICAgIFtbJ2hhbXRXaXRoUGFpcicgaCB8IGhhbXRpZnkgdF1dXFxuICBbJ2hhbXQnXVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcInxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF90KShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2gpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2gpfSkpKGxhenkoXCJjb25zXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9oKX0pKShsYXp5KFwiOlwiKSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJoYW10V2l0aFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9oKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfaCl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYW10aWZ5KShMX3QpfSkpfSkpfSkpfSkpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImhhbXRXaXRoUGFpclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFtdGlmeSkoTF90KX0pKX0pKX0pKShMX25pbCl9KSl9KSl9fX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiaGFtdFwiKSkoTF9uaWwpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZUb2tlblBhY2spKGxhenkoXCJsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcInxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIj1cIikpKExfbmlsKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnNQYWlyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJ7XCIpKShsYXp5KFwifVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hY29uc1BhaXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImhhbXR7XCIpKShsYXp5KFwifVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hY29uc1BhaXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIltcIikpKGxhenkoXCJdXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zUGFpcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwib3JbXCIpKShsYXp5KFwiXVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hY29uc1BhaXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImFuZFtcIikpKGxhenkoXCJdXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zUGFpcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiY29uY2F0W1wiKSkobGF6eShcIl1cIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnNQYWlyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJjb25jYXRGbGF0W1wiKSkobGF6eShcIl1cIikpfSkpKExfbmlsKX0pKX0pKX0pKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9saXN0RmlsdGVyKShMX25pbCl9KSkoTF9uaWwpfSkpfSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFRva2VuR3JvdXApKGxhenkoXCJvcltcIikpKGxhenkoXCJdXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbkdyb3VwKShsYXp5KFwiYW5kW1wiKSkobGF6eShcIl1cIikpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFRva2VuR3JvdXApKGxhenkoXCJjb25jYXRbXCIpKShsYXp5KFwiXVwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW5Hcm91cCkobGF6eShcImNvbmNhdEZsYXRbXCIpKShsYXp5KFwiXVwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGlzdE1hY3JvRm9sZE9wXCIpKShsYXp5KDMpKShsYXp5KFwibGlzdE1hY3JvRm9sZE9wIG9wIGVtcHR5Q2FzZSBsaXN0ID0gbGlzdCBcXFxcaCB0IC4gZm9sZHJcXG4gICAgXFxcXGNhc2UgcmVzdWx0IC4gW29wIGNhc2UgcmVzdWx0XVxcbiAgICBlbXB0eUNhc2VcXG4gICAgaFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3Ape3JldHVybiBmdW5jdGlvbihMX2VtcHR5Q2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2ZvbGRyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9vcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2Nhc2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9yZXN1bHQpKExfbmlsKX0pKX0pKX19fSkpKExfZW1wdHlDYXNlKShMX2gpfX19KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJvcltcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdE1hY3JvRm9sZE9wKShsYXp5KFwib3JcIikpKGxhenkoXCJmYWxzZVwiKSkoTF9saXN0KX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJhbmRbXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RNYWNyb0ZvbGRPcCkobGF6eShcImFuZFwiKSkobGF6eShcInRydWVcIikpKExfbGlzdCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZk1hY3JvKShsYXp5KFwiY29uY2F0W1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RyQ2F0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9saXN0aWZ5KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSl9KSkoTF9uaWwpfSkpKExfbmlsKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJjb25jYXRGbGF0W1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RyQ2F0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImZsYXR0ZW5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RpZnkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9saXN0KX0pKX0pKShMX25pbCl9KSkoTF9uaWwpfSkpfSkpKExfbmlsKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcImxpc3RNYWNyb3NcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xtKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJjb25jYXRbXCIpKShMX2xtKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaW5maXhcIikpKGxhenkoMSkpKGxhenkoXCJpbmZpeCBjb2RlID0gYmluZCAoZ2V0VmFsdWUgJ2luZml4UHJlY2VkZW5jZScpXFxuICBcXFxccHJlYyAuIGJpbmQgKGdldFZhbHVlICdpbmZpeFJpZ2h0QXNzb2NpYXRpdmUnKVxcbiAgICBcXFxccmlnaHQgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICAgIFxcXFxncm91cHMgLiBmaWx0ZXJBcHBsaWVzXFxuICAgICAgICBjb2RlXFxuICAgICAgICBcXFxcZXhwciAuIGluZml4UmVhcnJhbmdlIHByZWMgcmlnaHQgKG1hcCAoXFxcXGNlbGwgLiB0YWlsIGNlbGwpIGdyb3VwcykgZXhwclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29kZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwiaW5maXhQcmVjZWRlbmNlXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wcmVjKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJpbmZpeFJpZ2h0QXNzb2NpYXRpdmVcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3JpZ2h0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlbkdyb3Vwc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckFwcGxpZXMpKExfY29kZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZXhwcil7cmV0dXJuIHJlc29sdmUoTF9pbmZpeFJlYXJyYW5nZSkoTF9wcmVjKShMX3JpZ2h0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY2VsbCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2NlbGwpfX0pKShMX2dyb3Vwcyl9KSkoTF9leHByKX19KSl9fSkpfX0pKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImluZml4UmVhcnJhbmdlXCIpKShsYXp5KDQpKShsYXp5KFwiaW5maXhSZWFycmFuZ2UgcHJlYyByaWdodCBjbG9zZXMgbGlzdCA9IFxcXFxcXFxcXFxuICBsZW4gPSBsZW5ndGggbGlzdFxcbiAgaGVhZDEgPSBoZWFkIGxpc3RcXG4gIHRhaWwxID0gdGFpbCBsaXN0XFxuICBoZWFkMiA9IGhlYWQgdGFpbDFcXG4gIHRhaWwyID0gdGFpbCB0YWlsMVxcbiAgaGVhZDMgPSBoZWFkIHRhaWwyXFxuICBvcFByZWMgPSBnZXRQcmVjIHByZWMgaGVhZDJcXG4gIC5cXG4gIDwgbGVuIDJcXG4gICAgbGlzdFxcbiAgICBpc0luZml4IG9wUHJlYyBoZWFkMSBoZWFkMiBsZW5cXG4gICAgICBvciAoPT0gbGVuIDIpIChub3QgKGlzSW5maXhBcmcgY2xvc2VzIGhlYWQzKSlcXG4gICAgICAgIFtbaGVhZDIgaGVhZDFdIHwgdGFpbDJdXFxuICAgICAgICBpbmZpeFJlYXJyYW5nZSBwcmVjIHJpZ2h0IGNsb3NlcyAoYWJzb3JiQXJndW1lbnQgb3BQcmVjIHByZWMgcmlnaHQgY2xvc2VzIGhlYWQxIGhlYWQyIHRhaWwyIGhlYWQzICgtIGxlbiAyKSlcXG4gICAgICBbaGVhZDEgfCBpbmZpeFJlYXJyYW5nZSBwcmVjIHJpZ2h0IGNsb3NlcyB0YWlsMV1cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ByZWMpe3JldHVybiBmdW5jdGlvbihMX3JpZ2h0KXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZXMpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfb3BQcmVjLCBMX2hlYWQzLCBMX3RhaWwyLCBMX2hlYWQyLCBMX3RhaWwxLCBMX2hlYWQxLCBMX2xlbjtcblxuTF9vcFByZWMgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFByZWMpKExfcHJlYykoTF9oZWFkMil9KTtcblxuTF9oZWFkMyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90YWlsMil9KTtcblxuTF90YWlsMiA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF90YWlsMSl9KTtcblxuTF9oZWFkMiA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90YWlsMSl9KTtcblxuTF90YWlsMSA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9saXN0KX0pO1xuXG5MX2hlYWQxID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSk7XG5cbkxfbGVuID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sZW5ndGgpKExfbGlzdCl9KTtcbnJldHVybiByZXNvbHZlKExfJHkpKExfbGVuKShsYXp5KDIpKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNJbmZpeCkoTF9vcFByZWMpKExfaGVhZDEpKExfaGVhZDIpKExfbGVuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKExfbGVuKShsYXp5KDIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX25vdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0luZml4QXJnKShMX2Nsb3NlcykoTF9oZWFkMyl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaGVhZDIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oZWFkMSkoTF9uaWwpfSkpfSkpKExfdGFpbDIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaW5maXhSZWFycmFuZ2UpKExfcHJlYykoTF9yaWdodCkoTF9jbG9zZXMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWJzb3JiQXJndW1lbnQpKExfb3BQcmVjKShMX3ByZWMpKExfcmlnaHQpKExfY2xvc2VzKShMX2hlYWQxKShMX2hlYWQyKShMX3RhaWwyKShMX2hlYWQzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRfKShMX2xlbikobGF6eSgyKSl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2hlYWQxKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2luZml4UmVhcnJhbmdlKShMX3ByZWMpKExfcmlnaHQpKExfY2xvc2VzKShMX3RhaWwxKX0pKX0pKX0pKX0pKCl9fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFic29yYkFyZ3VtZW50XCIpKShsYXp5KDkpKShsYXp5KFwiYWJzb3JiQXJndW1lbnQgb3BQcmVjIHByZWMgcmlnaHQgY2xvc2VzIGhlYWQxIGhlYWQyIHRhaWwyIGhlYWQzIGxlbiA9IFxcXFxcXFxcXFxuICB0YWlsMyA9IHRhaWwgdGFpbDJcXG4gIGhlYWQ0ID0gaGVhZCB0YWlsM1xcbiAgdGFpbDQgPSB0YWlsIHRhaWwzXFxuICBoZWFkNSA9IGhlYWQgdGFpbDRcXG4gIC5cXG4gIGluZml4U2hvdWxkRWF0TmV4dCBvcFByZWMgcHJlYyAoY29udGFpbnMgcmlnaHQgKHN0clRva2VuU3RyaW5nIGhlYWQyKSkgaGVhZDMgaGVhZDQgaGVhZDUgY2xvc2VzIGxlblxcbiAgICBbaGVhZDEgaGVhZDIgfCBhYnNvcmJBcmd1bWVudCAoZ2V0UHJlYyBwcmVjIGhlYWQ0KSBwcmVjIHJpZ2h0IGNsb3NlcyBoZWFkMyBoZWFkNCB0YWlsNCBoZWFkNSAoLSBsZW4gMildXFxuICAgIFtbaGVhZDIgaGVhZDEgaGVhZDNdIHwgdGFpbDNdXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vcFByZWMpe3JldHVybiBmdW5jdGlvbihMX3ByZWMpe3JldHVybiBmdW5jdGlvbihMX3JpZ2h0KXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZXMpe3JldHVybiBmdW5jdGlvbihMX2hlYWQxKXtyZXR1cm4gZnVuY3Rpb24oTF9oZWFkMil7cmV0dXJuIGZ1bmN0aW9uKExfdGFpbDIpe3JldHVybiBmdW5jdGlvbihMX2hlYWQzKXtyZXR1cm4gZnVuY3Rpb24oTF9sZW4pe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfaGVhZDUsIExfdGFpbDQsIExfaGVhZDQsIExfdGFpbDM7XG5cbkxfaGVhZDUgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdGFpbDQpfSk7XG5cbkxfdGFpbDQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfdGFpbDMpfSk7XG5cbkxfaGVhZDQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdGFpbDMpfSk7XG5cbkxfdGFpbDMgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfdGFpbDIpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2luZml4U2hvdWxkRWF0TmV4dCkoTF9vcFByZWMpKExfcHJlYykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9yaWdodCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJUb2tlblN0cmluZykoTF9oZWFkMil9KSl9KSkoTF9oZWFkMykoTF9oZWFkNCkoTF9oZWFkNSkoTF9jbG9zZXMpKExfbGVuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaGVhZDEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oZWFkMikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hYnNvcmJBcmd1bWVudCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRQcmVjKShMX3ByZWMpKExfaGVhZDQpfSkpKExfcHJlYykoTF9yaWdodCkoTF9jbG9zZXMpKExfaGVhZDMpKExfaGVhZDQpKExfdGFpbDQpKExfaGVhZDUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJF8pKExfbGVuKShsYXp5KDIpKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oZWFkMikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2hlYWQxKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaGVhZDMpKExfbmlsKX0pKX0pKX0pKShMX3RhaWwzKX0pKX0pKCl9fX19fX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNJbmZpeEFyZ1wiKSkobGF6eSgyKSkobGF6eShcImlzSW5maXhBcmcgY2xvc2VzIGl0ZW0gPSBvcltcXG4gIGlzUGFyZW5zIGl0ZW1cXG4gIGlzQ29ucyBpdGVtXFxuICBhbmRbXFxuICAgIGlzVG9rZW4gaXRlbVxcbiAgICBub3QgKGNvbnRhaW5zIGNsb3NlcyAodG9rZW5TdHJpbmcgaXRlbSkpXFxuICAgIG5vdCAoaXNCbG9ja1N0YXJ0IGl0ZW0pXV1cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Nsb3Nlcyl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1BhcmVucykoTF9pdGVtKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9pdGVtKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX2l0ZW0pfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX25vdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9jbG9zZXMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfaXRlbSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQmxvY2tTdGFydCkoTF9pdGVtKX0pKX0pKShMX3RydWUpfSkpfSkpfSkpKExfZmFsc2UpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNJbmZpeFwiKSkobGF6eSg0KSkobGF6eShcImlzSW5maXggb3BQcmVjIGhlYWQxIGhlYWQyIGxlbiA9IGFuZFtcXG4gID4gbGVuIDFcXG4gID4gb3BQcmVjIC0xXFxuICBpc0luZml4QXJnIG5pbCBoZWFkMV1cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29wUHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfaGVhZDEpe3JldHVybiBmdW5jdGlvbihMX2hlYWQyKXtyZXR1cm4gZnVuY3Rpb24oTF9sZW4pe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyR6KShMX2xlbikobGF6eSgxKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHopKExfb3BQcmVjKShsYXp5KC0xKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNJbmZpeEFyZykoTF9uaWwpKExfaGVhZDEpfSkpKExfdHJ1ZSl9KSl9KSl9fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImdldFByZWNcIikpKGxhenkoMikpKGxhenkoXCJnZXRQcmVjIHByZWMgdG9rZW4gPSBcXFxcXFxcXFxcbiAgc3RyID0gdG9rZW5TdHJpbmcgdG9rZW5cXG4gIC5cXG4gIGlzVG9rZW4gdG9rZW5cXG4gICAgZmluZEluZGV4IChcXFxcbGV2ZWwgLiBjb250YWlucyBsZXZlbCBzdHIpIHByZWNcXG4gICAgLTFcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ByZWMpe3JldHVybiBmdW5jdGlvbihMX3Rva2VuKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3N0cjtcblxuTF9zdHIgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX3Rva2VuKX0pO1xucmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3Rva2VuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbmRJbmRleCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGV2ZWwpe3JldHVybiByZXNvbHZlKExfY29udGFpbnMpKExfbGV2ZWwpKExfc3RyKX19KSkoTF9wcmVjKX0pKShsYXp5KC0xKSl9KSgpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaW5maXhTaG91bGRFYXROZXh0XCIpKShsYXp5KDgpKShsYXp5KFwiaW5maXhTaG91bGRFYXROZXh0IG9wUHJlYyBwcmVjIGlzUmlnaHQgY3VyQXJnIG5leHRPcCBuZXh0QXJnIGNsb3NlcyBsZW4gPSBcXFxcXFxcXFxcbiAgbmV4dFByZWMgPSBnZXRQcmVjIHByZWMgbmV4dE9wXFxuICAuXFxuICBhbmRbXFxuICAgID4gbGVuIDJcXG4gICAgaXNJbmZpeCBuZXh0UHJlYyBjdXJBcmcgbmV4dE9wIGxlblxcbiAgICBvciAoPiBvcFByZWMgbmV4dFByZWMpIChhbmQgKD09IG9wUHJlYyBuZXh0UHJlYykgaXNSaWdodClcXG4gICAgaXNJbmZpeEFyZyBjbG9zZXMgbmV4dEFyZ11cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29wUHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfaXNSaWdodCl7cmV0dXJuIGZ1bmN0aW9uKExfY3VyQXJnKXtyZXR1cm4gZnVuY3Rpb24oTF9uZXh0T3Ape3JldHVybiBmdW5jdGlvbihMX25leHRBcmcpe3JldHVybiBmdW5jdGlvbihMX2Nsb3Nlcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGVuKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX25leHRQcmVjO1xuXG5MX25leHRQcmVjID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRQcmVjKShMX3ByZWMpKExfbmV4dE9wKX0pO1xucmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHopKExfbGVuKShsYXp5KDIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0luZml4KShMX25leHRQcmVjKShMX2N1ckFyZykoTF9uZXh0T3ApKExfbGVuKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8keikoTF9vcFByZWMpKExfbmV4dFByZWMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKExfb3BQcmVjKShMX25leHRQcmVjKX0pKShMX2lzUmlnaHQpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzSW5maXhBcmcpKExfY2xvc2VzKShMX25leHRBcmcpfSkpKExfdHJ1ZSl9KSl9KSl9KSl9KSgpfX19fX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCI6XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJjb25zXCIpKShMX2xpc3QpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpcHJlY1wiKSkobGF6eSgwKSkobGF6eShcImlwcmVjID0gW1snKicgJy8nICclJ10gWycrJyAnLSddIFsnOiddIFsnPCcgJz4nICc8PScgJz49J10gWyc9PScgJyE9J11dXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIipcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIi9cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIiVcIikpKExfbmlsKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIitcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIi1cIikpKExfbmlsKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjpcIikpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIj5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjw9XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI+PVwiKSkoTF9uaWwpfSkpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiPT1cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIiE9XCIpKShMX25pbCl9KSl9KSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJpZ2h0QXNzb2NcIikpKGxhenkoMCkpKGxhenkoXCJyaWdodEFzc29jID0gWyc6J11cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjpcIikpKExfbmlsKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcImluZml4UHJlY2VkZW5jZVwiKSkoTF9pcHJlYyl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJpbmZpeFJpZ2h0QXNzb2NpYXRpdmVcIikpKExfcmlnaHRBc3NvYyl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmVG9rZW5QYWNrKShsYXp5KFwiaW5maXhcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mbGF0dGVuKShMX2lwcmVjKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9pbmZpeCkoTF9uaWwpfSkpKExfbmlsKX0pKX0pKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF91c2VUb2tlblBhY2spKGxhenkoXCJpbmZpeFwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJkb1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9oYW5kbGVEbykoTF9saXN0KShMX2ZhbHNlKShMX2lkKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaGFuZGxlRG9cIikpKGxhenkoMykpKGxhenkoXCJoYW5kbGVEbyBsaXN0IGluTGV0IGNvbnQgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBpc05pbCB0XFxuICAgIGNvbnQgKGluTGV0IFsnLicgaF0gW2hdKVxcbiAgICBkb0NsYXVzZSAoc3RyaXBQYXJlbnMgaCkgaCBuaWwgaW5MZXQgXFxcXG5ld0luTGV0IGNoYWluIC5cXG4gICAgICBoYW5kbGVEbyB0IG5ld0luTGV0IFxcXFxyZXN0IC4gY29udCAoY2hhaW4gcmVzdClcXG4gIGNvbnQgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9pbkxldCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pbkxldCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKExfbmlsKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoTF9uaWwpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZG9DbGF1c2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyaXBQYXJlbnMpKExfaCl9KSkoTF9oKShMX25pbCkoTF9pbkxldCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmV3SW5MZXQpe3JldHVybiBmdW5jdGlvbihMX2NoYWluKXtyZXR1cm4gcmVzb2x2ZShMX2hhbmRsZURvKShMX3QpKExfbmV3SW5MZXQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jaGFpbikoTF9yZXN0KX0pKX19KSl9fX0pKX0pKX19fX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfbmlsKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkb0NsYXVzZVwiKSkobGF6eSg1KSkobGF6eShcImRvQ2xhdXNlIHN0ZXBwaW5nQ2xhdXNlIGNsYXVzZSBwcmVmaXggaW5MZXQgY29udCA9IFxcXFxcXFxcXFxuICBtYWtlQmluZCB2YXIgbW9uYWQgPSBjb250IGZhbHNlIFxcXFxyZXN0IC4gaW5MZXQgKGNvbnMgJy4nKSBpZFxcbiAgICBbJ2JpbmQnIG1vbmFkIFsnXFxcXFxcXFwnIHZhciAnLicgfCByZXN0XV1cXG4gIC5cXG4gIGlzQ29ucyBzdGVwcGluZ0NsYXVzZVxcbiAgICBzdGVwcGluZ0NsYXVzZSBcXFxcaCB0IC4gaXNUb2tlblN0cmluZyBoICc9J1xcbiAgICAgIGluTGV0XFxuICAgICAgICBjb250IHRydWUgXFxcXHJlc3QgLiBbY2xhdXNlIHwgcmVzdF1cXG4gICAgICAgIGNvbnQgdHJ1ZSBcXFxccmVzdCAuIFsnXFxcXFxcXFxcXFxcXFxcXCcgY2xhdXNlIHwgcmVzdF1cXG4gICAgICBpc1Rva2VuU3RyaW5nIGggJzwtJ1xcbiAgICAgICAgaXNOaWwgdFxcbiAgICAgICAgICBwYXJzZUVyciBcXFwiTm8gbW9uYWQgaW4gZG8tY2xhdXNlOiBcXFwiIGNsYXVzZVxcbiAgICAgICAgICBwcmVmaXhcXG4gICAgICAgICAgICBcXFxccGggcHQgRCAuIGlzTmlsIHB0XFxuICAgICAgICAgICAgICBtYWtlQmluZCAoaXNOaWwgcHJlZml4ICdfJyAoaGVhZCBwcmVmaXgpKSB0XFxuICAgICAgICAgICAgICBwYXJzZUVyciBcXFwiTW9yZSB0aGFuIG9uZSB2YXJpYWJsZSBpbiBkby1jbGF1c2U6IFxcXCIgY2xhdXNlXFxuICAgICAgICAgICAgbWFrZUJpbmQgJ18nIHRcXG4gICAgICAgIGRvQ2xhdXNlIHQgY2xhdXNlIFtoIHwgcHJlZml4XSBpbkxldCBjb250XFxuICAgIG1ha2VCaW5kICdfJyBjbGF1c2VcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0ZXBwaW5nQ2xhdXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9jbGF1c2Upe3JldHVybiBmdW5jdGlvbihMX3ByZWZpeCl7cmV0dXJuIGZ1bmN0aW9uKExfaW5MZXQpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbWFrZUJpbmQ7XG5cbkxfbWFrZUJpbmQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF92YXIpe3JldHVybiBmdW5jdGlvbihMX21vbmFkKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfZmFsc2UpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfaW5MZXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIi5cIikpfSkpKExfaWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImJpbmRcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9tb25hZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdmFyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIuXCIpKShMX3Jlc3QpfSkpfSkpfSkpKExfbmlsKX0pKX0pKX0pKX19KSl9fX0pO1xucmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfc3RlcHBpbmdDbGF1c2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RlcHBpbmdDbGF1c2UpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiPVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pbkxldCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX3RydWUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9jbGF1c2UpKExfcmVzdCl9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoTF90cnVlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFxcXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2NsYXVzZSkoTF9yZXN0KX0pKX19KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCI8LVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTm8gbW9uYWQgaW4gZG8tY2xhdXNlOiBcIikpKExfY2xhdXNlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3ByZWZpeCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcGgpe3JldHVybiBmdW5jdGlvbihMX3B0KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX3B0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VCaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX3ByZWZpeCkobGF6eShcIl9cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9wcmVmaXgpfSkpfSkpKExfdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIk1vcmUgdGhhbiBvbmUgdmFyaWFibGUgaW4gZG8tY2xhdXNlOiBcIikpKExfY2xhdXNlKX0pKX19fX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VCaW5kKShsYXp5KFwiX1wiKSkoTF90KX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RvQ2xhdXNlKShMX3QpKExfY2xhdXNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoTF9wcmVmaXgpfSkpKExfaW5MZXQpKExfY29udCl9KSl9KSl9fX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VCaW5kKShsYXp5KFwiX1wiKSkoTF9jbGF1c2UpfSkpfSkoKX19fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZlRva2VuUGFjaykobGF6eShcImRvXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjwtXCIpKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX25pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX25pbCkoTF9uaWwpfSkpfSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFN0ZFRva2VuUGFja3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImluZml4XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJkb1wiKSkoTF9uaWwpfSkpfSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc2V0U3RkVG9rZW5QYWNrcyl9XSk7XG4iLCIoZnVuY3Rpb24oZ2xvYmFsKXsvKiFcbiBMby1EYXNoIDAuNy4wIGxvZGFzaC5jb20vbGljZW5zZVxuIFVuZGVyc2NvcmUuanMgMS4zLjMgZ2l0aHViLmNvbS9kb2N1bWVudGNsb3VkL3VuZGVyc2NvcmUvYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cbjsoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBzKGUpe3JldHVybiBuZXcgbyhlKX1mdW5jdGlvbiBvKGUpe2lmKGUmJmUuX193cmFwcGVkX18pcmV0dXJuIGU7dGhpcy5fX3dyYXBwZWRfXz1lfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gZnVuY3Rpb24obixyLGkpe3JldHVybiBlLmNhbGwodCxuLHIsaSl9fWZ1bmN0aW9uIGEoZSx0LG4pe3R8fCh0PTApO3ZhciByPWUubGVuZ3RoLGk9ci10Pj0obnx8Vykscz1pP3t9OmU7aWYoaSlmb3IodmFyIG89dC0xOysrbzxyOyluPWVbb10rXCJcIiwoYXQuY2FsbChzLG4pP3Nbbl06c1tuXT1bXSkucHVzaChlW29dKTtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaSl7dmFyIG49ZStcIlwiO3JldHVybiBhdC5jYWxsKHMsbikmJi0xPEwoc1tuXSxlKX1yZXR1cm4tMTxMKHMsZSx0KX19ZnVuY3Rpb24gZihlLG4pe3ZhciByPWUuYixpPW4uYixlPWUuYSxuPW4uYTtpZihlIT09bil7aWYoZT5ufHxlPT09dClyZXR1cm4gMTtpZihlPG58fG49PT10KXJldHVybi0xfXJldHVybiByPFxuaT8tMToxfWZ1bmN0aW9uIGwoZSx0LG4pe2Z1bmN0aW9uIHIoKXt2YXIgdT1hcmd1bWVudHMsYT1zP3RoaXM6dDtyZXR1cm4gaXx8KGU9dFtvXSksbi5sZW5ndGgmJih1PXUubGVuZ3RoP24uY29uY2F0KGN0LmNhbGwodSkpOm4pLHRoaXMgaW5zdGFuY2VvZiByPyh2LnByb3RvdHlwZT1lLnByb3RvdHlwZSxhPW5ldyB2LCh1PWUuYXBwbHkoYSx1KSkmJiR0W3R5cGVvZiB1XT91OmEpOmUuYXBwbHkoYSx1KX12YXIgaT1FKGUpLHM9IW4sbz1lO3JldHVybiBzJiYobj10KSxyfWZ1bmN0aW9uIGMoKXtmb3IodmFyIGUsdCxuLHM9LTEsbz1hcmd1bWVudHMubGVuZ3RoLGE9e2U6XCJcIixmOlwiXCIsajpcIlwiLHE6XCJcIixjOntkOlwiXCJ9LG06e2Q6XCJcIn19OysrczxvOylmb3IodCBpbiBlPWFyZ3VtZW50c1tzXSxlKW49KG49ZVt0XSk9PXI/XCJcIjpuLC9kfGkvLnRlc3QodCk/KFwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj17YjpuLGw6bn0pLGEuY1t0XT1uLmJ8fFwiXCIsYS5tW3RdPW4ubHx8XCJcIik6YVt0XT1uO2U9XG5hLmEsdD0vXlteLF0rLy5leGVjKGUpWzBdLG49YS5zLGEuZz10LGEuaD1NdCxhLms9UnQsYS5uPVB0LGEucD1ydCxhLnI9YS5yIT09aSxhLnM9bj09cj9VdDpuLGEubz09ciYmKGEubz1qdCksYS5mfHwoYS5mPVwiaWYoIVwiK3QrXCIpcmV0dXJuIHVcIik7aWYoXCJlXCIhPXR8fCFhLmMuaSlhLmM9cjt0PVwiXCIsYS5zJiYodCs9XCIndXNlIHN0cmljdCc7XCIpLHQrPVwidmFyIGosQSxrPVwiK2EuZytcIix1XCIsYS5qJiYodCs9XCI9XCIrYS5qKSx0Kz1cIjtcIithLmYrXCI7XCIrYS5xK1wiO1wiLGEuYyYmKHQrPVwidmFyIGw9ay5sZW5ndGg7aj0tMTtcIixhLm0mJih0Kz1cImlmKGw9PT0rbCl7XCIpLGEubyYmKHQrPVwiaWYoei5jYWxsKGspPT14KXtrPWsuc3BsaXQoJycpfVwiKSx0Kz1hLmMuZCtcIjt3aGlsZSgrK2o8bCl7QT1rW2pdO1wiK2EuYy5pK1wifVwiLGEubSYmKHQrPVwifVwiKSk7aWYoYS5tKXthLmM/dCs9XCJlbHNle1wiOmEubiYmKHQrPVwidmFyIGw9ay5sZW5ndGg7aj0tMTtpZihsJiZPKGspKXt3aGlsZSgrK2o8bCl7QT1rW2orPScnXTtcIitcbmEubS5pK1wifX1lbHNle1wiKSxhLmh8fCh0Kz1cInZhciB2PXR5cGVvZiBrPT0nZnVuY3Rpb24nJiZyLmNhbGwoaywncHJvdG90eXBlJyk7XCIpO2lmKGEuayYmYS5yKXQrPVwidmFyIG89LTEscD1YW3R5cGVvZiBrXT9tKGspOltdLGw9cC5sZW5ndGg7XCIrYS5tLmQrXCI7d2hpbGUoKytvPGwpe2o9cFtvXTtcIixhLmh8fCh0Kz1cImlmKCEodiYmaj09J3Byb3RvdHlwZScpKXtcIiksdCs9XCJBPWtbal07XCIrYS5tLmkrXCJcIixhLmh8fCh0Kz1cIn1cIik7ZWxzZXt0Kz1hLm0uZCtcIjtmb3IoaiBpbiBrKXtcIjtpZighYS5ofHxhLnIpdCs9XCJpZihcIixhLmh8fCh0Kz1cIiEodiYmaj09J3Byb3RvdHlwZScpXCIpLCFhLmgmJmEuciYmKHQrPVwiJiZcIiksYS5yJiYodCs9XCJoLmNhbGwoayxqKVwiKSx0Kz1cIil7XCI7dCs9XCJBPWtbal07XCIrYS5tLmkrXCI7XCI7aWYoIWEuaHx8YS5yKXQrPVwifVwifXQrPVwifVwiO2lmKGEuaCl7dCs9XCJ2YXIgZz1rLmNvbnN0cnVjdG9yO1wiO2ZvcihuPTA7Nz5uO24rKyl0Kz1cImo9J1wiK2EucFtuXStcIic7aWYoXCJcbixcImNvbnN0cnVjdG9yXCI9PWEucFtuXSYmKHQrPVwiIShnJiZnLnByb3RvdHlwZT09PWspJiZcIiksdCs9XCJoLmNhbGwoayxqKSl7QT1rW2pdO1wiK2EubS5pK1wifVwifWlmKGEuY3x8YS5uKXQrPVwifVwifXJldHVybiB0Kz1hLmUrXCI7cmV0dXJuIHVcIixGdW5jdGlvbihcIkQsRSxGLGMsSSxmLEosaCxpLE0sTyxRLFMsVCxXLFgsbSxyLHcseCx6XCIsXCJ2YXIgRz1mdW5jdGlvbihcIitlK1wiKXtcIit0K1wifTtyZXR1cm4gR1wiKSh6dCxSLEQsdSxmLHV0LGxuLGF0LFAsTCx3LHNuLEUsb24sQ3QsJHQsZ3QsbHQsY3QsTHQsaHQpfWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gb3RbdF19ZnVuY3Rpb24gcChlKXtyZXR1cm5cIlxcXFxcIitKdFtlXX1mdW5jdGlvbiBkKGUpe3JldHVybiBYdFtlXX1mdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIG0oZSx0KXtpZihlJiZWLnRlc3QodCkpcmV0dXJuXCI8ZSUtXCIrdCtcIiU+XCI7dmFyIG49b3QubGVuZ3RoO3JldHVybiBvdFtuXT1cIicrX19lKFwiK3QrXCIpKydcIixpdCtuK3N0fWZ1bmN0aW9uIGdcbihlLHQsbixpKXtyZXR1cm4gaT8oZT1vdC5sZW5ndGgsb3RbZV09XCInO1wiK2krXCI7X19wKz0nXCIsaXQrZStzdCk6dD9tKHIsdCk6eShyLG4pfWZ1bmN0aW9uIHkoZSx0KXtpZihlJiZWLnRlc3QodCkpcmV0dXJuXCI8ZSU9XCIrdCtcIiU+XCI7dmFyIG49b3QubGVuZ3RoO3JldHVybiBvdFtuXT1cIicrKChfX3Q9KFwiK3QrXCIpKT09bnVsbD8nJzpfX3QpKydcIixpdCtuK3N0fWZ1bmN0aW9uIGIoZSl7cmV0dXJuIFZ0W2VdfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIGh0LmNhbGwoZSk9PUV0fWZ1bmN0aW9uIEUoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX1mdW5jdGlvbiBTKGUsdCl7dmFyIG49aTtpZighZXx8XCJvYmplY3RcIiE9dHlwZW9mIGV8fCF0JiZ3KGUpKXJldHVybiBuO3ZhciByPWUuY29uc3RydWN0b3I7cmV0dXJuKCFGdHx8XCJmdW5jdGlvblwiPT10eXBlb2YgZS50b1N0cmluZ3x8XCJzdHJpbmdcIiE9dHlwZW9mIChlK1wiXCIpKSYmKCFFKHIpfHxyIGluc3RhbmNlb2Ygcik/RHQ/KGxuKGUsZnVuY3Rpb24oXG5lLHQscil7cmV0dXJuIG49IWF0LmNhbGwocix0KSxpfSksbj09PWkpOihsbihlLGZ1bmN0aW9uKGUsdCl7bj10fSksbj09PWl8fGF0LmNhbGwoZSxuKSk6bn1mdW5jdGlvbiB4KGUsdCxzLG8sdSl7aWYoZT09cilyZXR1cm4gZTtzJiYodD1pKTtpZihzPSR0W3R5cGVvZiBlXSl7dmFyIGE9aHQuY2FsbChlKTtpZighV3RbYV18fEh0JiZ3KGUpKXJldHVybiBlO3ZhciBmPWE9PVN0LHM9Znx8KGE9PUN0P29uKGUsbik6cyl9aWYoIXN8fCF0KXJldHVybiBzP2Y/Y3QuY2FsbChlKTpmbih7fSxlKTplO3M9ZS5jb25zdHJ1Y3Rvcjtzd2l0Y2goYSl7Y2FzZSB4dDpyZXR1cm4gbmV3IHMoZT09bik7Y2FzZSBUdDpyZXR1cm4gbmV3IHMoK2UpO2Nhc2UgTnQ6Y2FzZSBMdDpyZXR1cm4gbmV3IHMoZSk7Y2FzZSBrdDpyZXR1cm4gcyhlLnNvdXJjZSxHLmV4ZWMoZSkpfW98fChvPVtdKSx1fHwodT1bXSk7Zm9yKGE9by5sZW5ndGg7YS0tOylpZihvW2FdPT1lKXJldHVybiB1W2FdO3ZhciBsPWY/cyhcbmE9ZS5sZW5ndGgpOnt9O28ucHVzaChlKSx1LnB1c2gobCk7aWYoZilmb3IoZj0tMTsrK2Y8YTspbFtmXT14KGVbZl0sdCxyLG8sdSk7ZWxzZSBjbihlLGZ1bmN0aW9uKGUsbil7bFtuXT14KGUsdCxyLG8sdSl9KTtyZXR1cm4gbH1mdW5jdGlvbiBUKGUsdCxzLG8pe2lmKGU9PXJ8fHQ9PXIpcmV0dXJuIGU9PT10O2lmKGU9PT10KXJldHVybiAwIT09ZXx8MS9lPT0xL3Q7aWYoJHRbdHlwZW9mIGVdfHwkdFt0eXBlb2YgdF0pZT1lLl9fd3JhcHBlZF9ffHxlLHQ9dC5fX3dyYXBwZWRfX3x8dDt2YXIgdT1odC5jYWxsKGUpO2lmKHUhPWh0LmNhbGwodCkpcmV0dXJuIGk7c3dpdGNoKHUpe2Nhc2UgeHQ6Y2FzZSBUdDpyZXR1cm4rZT09K3Q7Y2FzZSBOdDpyZXR1cm4gZSE9K2U/dCE9K3Q6MD09ZT8xL2U9PTEvdDplPT0rdDtjYXNlIGt0OmNhc2UgTHQ6cmV0dXJuIGU9PXQrXCJcIn12YXIgYT16dFt1XTtpZihIdCYmIWEmJihhPXcoZSkpJiYhdyh0KXx8IWEmJih1IT1DdHx8RnQmJihcImZ1bmN0aW9uXCIhPXR5cGVvZiBcbmUudG9TdHJpbmcmJlwic3RyaW5nXCI9PXR5cGVvZiAoZStcIlwiKXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC50b1N0cmluZyYmXCJzdHJpbmdcIj09dHlwZW9mICh0K1wiXCIpKSkpcmV0dXJuIGk7c3x8KHM9W10pLG98fChvPVtdKTtmb3IodT1zLmxlbmd0aDt1LS07KWlmKHNbdV09PWUpcmV0dXJuIG9bdV09PXQ7dmFyIHU9LTEsZj1uLGw9MDtzLnB1c2goZSksby5wdXNoKHQpO2lmKGEpe2w9ZS5sZW5ndGg7aWYoZj1sPT10Lmxlbmd0aClmb3IoO2wtLSYmKGY9VChlW2xdLHRbbF0scyxvKSk7KTtyZXR1cm4gZn1hPWUuY29uc3RydWN0b3IsZj10LmNvbnN0cnVjdG9yO2lmKGEhPWYmJighRShhKXx8IShhIGluc3RhbmNlb2YgYSYmRShmKSYmZiBpbnN0YW5jZW9mIGYpKSlyZXR1cm4gaTtmb3IodmFyIGMgaW4gZSlpZihhdC5jYWxsKGUsYykmJihsKyssIWF0LmNhbGwodCxjKXx8IVQoZVtjXSx0W2NdLHMsbykpKXJldHVybiBpO2ZvcihjIGluIHQpaWYoYXQuY2FsbCh0LGMpJiYhKGwtLSkpcmV0dXJuIGlcbjtpZihNdClmb3IoOzc+Kyt1OylpZihjPXJ0W3VdLGF0LmNhbGwoZSxjKSYmKCFhdC5jYWxsKHQsYyl8fCFUKGVbY10sdFtjXSxzLG8pKSlyZXR1cm4gaTtyZXR1cm4gbn1mdW5jdGlvbiBOKGUsdCxuLHIpe2lmKCFlKXJldHVybiBuO3ZhciBpPWUubGVuZ3RoLHM9Mz5hcmd1bWVudHMubGVuZ3RoO3ImJih0PXUodCxyKSk7aWYoaT09PStpKXt2YXIgbz1qdCYmaHQuY2FsbChlKT09THQ/ZS5zcGxpdChcIlwiKTplO2ZvcihpJiZzJiYobj1vWy0taV0pO2ktLTspbj10KG4sb1tpXSxpLGUpO3JldHVybiBufW89dm4oZSk7Zm9yKChpPW8ubGVuZ3RoKSYmcyYmKG49ZVtvWy0taV1dKTtpLS07KXM9b1tpXSxuPXQobixlW3NdLHMsZSk7cmV0dXJuIG59ZnVuY3Rpb24gQyhlLHQsbil7aWYoZSlyZXR1cm4gdD09cnx8bj9lWzBdOmN0LmNhbGwoZSwwLHQpfWZ1bmN0aW9uIGsoZSx0KXt2YXIgbj1bXTtpZighZSlyZXR1cm4gbjtmb3IodmFyIHIsaT0tMSxzPWUubGVuZ3RoOysraTxzOylyPWVbaV0sXG5zbihyKT9mdC5hcHBseShuLHQ/cjprKHIpKTpuLnB1c2gocik7cmV0dXJuIG59ZnVuY3Rpb24gTChlLHQsbil7aWYoIWUpcmV0dXJuLTE7dmFyIHI9LTEsaT1lLmxlbmd0aDtpZihuKXtpZihcIm51bWJlclwiIT10eXBlb2YgbilyZXR1cm4gcj1NKGUsdCksZVtyXT09PXQ/cjotMTtyPSgwPm4/eXQoMCxpK24pOm4pLTF9Zm9yKDsrK3I8aTspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9ZnVuY3Rpb24gQShlLHQsbil7dmFyIHI9LUluZmluaXR5LGk9cjtpZighZSlyZXR1cm4gaTt2YXIgcz0tMSxvPWUubGVuZ3RoO2lmKCF0KXtmb3IoOysrczxvOyllW3NdPmkmJihpPWVbc10pO3JldHVybiBpfWZvcihuJiYodD11KHQsbikpOysrczxvOyluPXQoZVtzXSxzLGUpLG4+ciYmKHI9bixpPWVbc10pO3JldHVybiBpfWZ1bmN0aW9uIE8oZSx0LG4pe3JldHVybiBlP2N0LmNhbGwoZSx0PT1yfHxuPzE6dCk6W119ZnVuY3Rpb24gTShlLHQsbixyKXtpZighZSlyZXR1cm4gMDt2YXIgaT0wLFxucz1lLmxlbmd0aDtpZihuKXtyJiYobj1EKG4scikpO2Zvcih0PW4odCk7aTxzOylyPWkrcz4+PjEsbihlW3JdKTx0P2k9cisxOnM9cn1lbHNlIGZvcig7aTxzOylyPWkrcz4+PjEsZVtyXTx0P2k9cisxOnM9cjtyZXR1cm4gaX1mdW5jdGlvbiBfKGUsdCxuLHIpe3ZhciBzPVtdO2lmKCFlKXJldHVybiBzO3ZhciBvPS0xLGE9ZS5sZW5ndGgsZj1bXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiYocj1uLG49dCx0PWkpO2ZvcihuP3ImJihuPXUobixyKSk6bj1QOysrbzxhOylpZihyPW4oZVtvXSxvLGUpLHQ/IW98fGZbZi5sZW5ndGgtMV0hPT1yOjA+TChmLHIpKWYucHVzaChyKSxzLnB1c2goZVtvXSk7cmV0dXJuIHN9ZnVuY3Rpb24gRChlLHQpe3JldHVybiBxdHx8cHQmJjI8YXJndW1lbnRzLmxlbmd0aD9wdC5jYWxsLmFwcGx5KHB0LGFyZ3VtZW50cyk6bChlLHQsY3QuY2FsbChhcmd1bWVudHMsMikpfWZ1bmN0aW9uIFAoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gSChlKXtDbihobihlKSxmdW5jdGlvbihcbnQpe3ZhciByPXNbdF09ZVt0XTtvLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3ZhciBlPVt0aGlzLl9fd3JhcHBlZF9fXTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmZnQuYXBwbHkoZSxhcmd1bWVudHMpLGU9ci5hcHBseShzLGUpLHRoaXMuX19jaGFpbl9fJiYoZT1uZXcgbyhlKSxlLl9fY2hhaW5fXz1uKSxlfX0pfXZhciBuPSEwLHI9bnVsbCxpPSExLEIsaixGLEkscT1cIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmZXhwb3J0cyYmKFwib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmZ2xvYmFsPT1nbG9iYWwuZ2xvYmFsJiYoZT1nbG9iYWwpLGV4cG9ydHMpLFI9QXJyYXkucHJvdG90eXBlLFU9T2JqZWN0LnByb3RvdHlwZSx6PTAsVz0zMCxYPWUuXyxWPS9bLT8rPSF+KiUmXjw+fHsoXFwvXXxcXFtcXER8XFxiKD86ZGVsZXRlfGlufGluc3RhbmNlb2Z8bmV3fHR5cGVvZnx2b2lkKVxcYi8sJD0vJig/OmFtcHxsdHxndHxxdW90fCN4MjcpOy9nLEo9L1xcYl9fcFxcKz0nJzsvZyxLPS9cXGIoX19wXFwrPSknJ1xcKy9nXG4sUT0vKF9fZVxcKC4qP1xcKXxcXGJfX3RcXCkpXFwrJyc7L2csRz0vXFx3KiQvLFk9Lyg/Ol9fZXxfX3Q9KVxcKFxccyooPyFbXFxkXFxzXCInXXx0aGlzXFwuKS9nLFo9UmVnRXhwKFwiXlwiKyhVLnZhbHVlT2YrXCJcIikucmVwbGFjZSgvWy4qKz9ePSE6JHt9KCl8W1xcXVxcL1xcXFxdL2csXCJcXFxcJCZcIikucmVwbGFjZSgvdmFsdWVPZnxmb3IgW15cXF1dKy9nLFwiLis/XCIpK1wiJFwiKSxldD0vX190b2tlbihcXGQrKV9fL2csdHQ9L1smPD5cIiddL2csbnQ9L1snXFxuXFxyXFx0XFx1MjAyOFxcdTIwMjlcXFxcXS9nLHJ0PVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpLGl0PVwiX190b2tlblwiLHN0PVwiX19cIixvdD1bXSx1dD1SLmNvbmNhdCxhdD1VLmhhc093blByb3BlcnR5LGZ0PVIucHVzaCxsdD1VLnByb3BlcnR5SXNFbnVtZXJhYmxlLGN0PVIuc2xpY2UsaHQ9VS50b1N0cmluZyxwdD1aLnRlc3QoXG5wdD1jdC5iaW5kKSYmcHQsZHQ9TWF0aC5mbG9vcix2dD1aLnRlc3QodnQ9QXJyYXkuaXNBcnJheSkmJnZ0LG10PWUuaXNGaW5pdGUsZ3Q9Wi50ZXN0KGd0PU9iamVjdC5rZXlzKSYmZ3QseXQ9TWF0aC5tYXgsYnQ9TWF0aC5taW4sd3Q9TWF0aC5yYW5kb20sRXQ9XCJbb2JqZWN0IEFyZ3VtZW50c11cIixTdD1cIltvYmplY3QgQXJyYXldXCIseHQ9XCJbb2JqZWN0IEJvb2xlYW5dXCIsVHQ9XCJbb2JqZWN0IERhdGVdXCIsTnQ9XCJbb2JqZWN0IE51bWJlcl1cIixDdD1cIltvYmplY3QgT2JqZWN0XVwiLGt0PVwiW29iamVjdCBSZWdFeHBdXCIsTHQ9XCJbb2JqZWN0IFN0cmluZ11cIixBdD1lLmNsZWFyVGltZW91dCxPdD1lLnNldFRpbWVvdXQsTXQsX3QsRHQsUHQ9bjsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy54PTF9dmFyIHQ9ezA6MSxsZW5ndGg6MX0sbj1bXTtlLnByb3RvdHlwZT17dmFsdWVPZjoxLHk6MX07Zm9yKHZhciByIGluIG5ldyBlKW4ucHVzaChyKTtmb3IociBpbiBhcmd1bWVudHMpUHQ9IXI7TXQ9ND5cbihuK1wiXCIpLmxlbmd0aCxEdD1cInhcIiE9blswXSxfdD0obi5zcGxpY2UuY2FsbCh0LDAsMSksdFswXSl9KSgxKTt2YXIgSHQ9IXcoYXJndW1lbnRzKSxCdD1cInhcIiE9Y3QuY2FsbChcInhcIilbMF0sanQ9XCJ4eFwiIT1cInhcIlswXStPYmplY3QoXCJ4XCIpWzBdO3RyeXt2YXIgRnQ9KFwiW29iamVjdCBPYmplY3RdXCIsaHQuY2FsbChlLmRvY3VtZW50fHwwKT09Q3QpfWNhdGNoKEl0KXt9dmFyIHF0PXB0JiYvXFxufE9wZXJhLy50ZXN0KHB0K2h0LmNhbGwoZS5vcGVyYSkpLFJ0PWd0JiYvXi4rJHx0cnVlLy50ZXN0KGd0KyEhZS5hdHRhY2hFdmVudCksVXQ9IXF0LHp0PXt9O3p0W3h0XT16dFtUdF09enRbXCJbb2JqZWN0IEZ1bmN0aW9uXVwiXT16dFtOdF09enRbQ3RdPXp0W2t0XT1pLHp0W0V0XT16dFtTdF09enRbTHRdPW47dmFyIFd0PXt9O1d0W0V0XT1XdFtcIltvYmplY3QgRnVuY3Rpb25dXCJdPWksV3RbU3RdPVd0W3h0XT1XdFtUdF09V3RbTnRdPVd0W0N0XT1XdFtrdF09V3RbTHRdPW47dmFyIFh0PXtcIiZcIlxuOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImI3gyNztcIn0sVnQ9e1wiJmFtcDtcIjpcIiZcIixcIiZsdDtcIjpcIjxcIixcIiZndDtcIjpcIj5cIixcIiZxdW90O1wiOidcIicsXCImI3gyNztcIjpcIidcIn0sJHQ9e1wiYm9vbGVhblwiOmksXCJmdW5jdGlvblwiOm4sb2JqZWN0Om4sbnVtYmVyOmksc3RyaW5nOmksXCJ1bmRlZmluZWRcIjppLHVua25vd246bn0sSnQ9e1wiXFxcXFwiOlwiXFxcXFwiLFwiJ1wiOlwiJ1wiLFwiXFxuXCI6XCJuXCIsXCJcXHJcIjpcInJcIixcIlx0XCI6XCJ0XCIsXCJcXHUyMDI4XCI6XCJ1MjAyOFwiLFwiXFx1MjAyOVwiOlwidTIwMjlcIn07cy50ZW1wbGF0ZVNldHRpbmdzPXtlc2NhcGU6LzwlLShbXFxzXFxTXSs/KSU+L2csZXZhbHVhdGU6LzwlKFtcXHNcXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcXHNcXFNdKz8pJT4vZyx2YXJpYWJsZTpcIlwifTt2YXIgS3Q9e2E6XCJlLGQseVwiLGo6XCJlXCIscTpcImlmKCFkKWQ9aTtlbHNlIGlmKHkpZD1jKGQseSlcIixpOlwiaWYoZChBLGosZSk9PT1mYWxzZSlyZXR1cm4gdVwifSxRdD17ajpcInt9XCJcbixxOlwidmFyIHE7aWYodHlwZW9mIGQhPSdmdW5jdGlvbicpe3ZhciBoaD1kO2Q9ZnVuY3Rpb24oQSl7cmV0dXJuIEFbaGhdfX1lbHNlIGlmKHkpZD1jKGQseSlcIixpOlwicT1kKEEsaixlKTsoaC5jYWxsKHUscSk/dVtxXSsrOnVbcV09MSlcIn0sR3Q9e2o6XCJ0cnVlXCIsaTpcImlmKCFkKEEsaixlKSlyZXR1cm4hdVwifSxZdD17cjppLHM6aSxhOlwiblwiLGo6XCJuXCIscTpcImZvcih2YXIgYT0xLGI9YXJndW1lbnRzLmxlbmd0aDthPGI7YSsrKXtpZihrPWFyZ3VtZW50c1thXSl7XCIsaTpcInVbal09QVwiLGU6XCJ9fVwifSxadD17ajpcIltdXCIsaTpcImQoQSxqLGUpJiZ1LnB1c2goQSlcIn0sZW49e3E6XCJpZih5KWQ9YyhkLHkpXCJ9LHRuPXtpOntsOkt0Lml9fSxubj17ajpcIlwiLGY6XCJpZighZSlyZXR1cm5bXVwiLGQ6e2I6XCJ1PUFycmF5KGwpXCIsbDpcInU9XCIrKFJ0P1wiQXJyYXkobClcIjpcIltdXCIpfSxpOntiOlwidVtqXT1kKEEsaixlKVwiLGw6XCJ1XCIrKFJ0P1wiW29dPVwiOlwiLnB1c2hcIikrXCIoZChBLGosZSkpXCJ9fSxybj17cjpcbmksYTpcIm4sZCx5XCIsajpcInt9XCIscTpcInZhciBSPXR5cGVvZiBkPT0nZnVuY3Rpb24nO2lmKCFSKXt2YXIgdD1mLmFwcGx5KEUsYXJndW1lbnRzKX1lbHNlIGlmKHkpZD1jKGQseSlcIixpOlwiaWYoUj8hZChBLGosbik6TSh0LGopPDApdVtqXT1BXCJ9O0h0JiYodz1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJiEhYXQuY2FsbChlLFwiY2FsbGVlXCIpfSk7dmFyIHNuPXZ0fHxmdW5jdGlvbihlKXtyZXR1cm4gaHQuY2FsbChlKT09U3R9O0UoL3gvKSYmKEU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT1odC5jYWxsKGUpfSk7dmFyIG9uPSR0Ll9fcHJvdG9fXyE9VT9TOmZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIGk7dmFyIG49ZS52YWx1ZU9mLHI9XCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKHI9bi5fX3Byb3RvX18pJiZyLl9fcHJvdG9fXztyZXR1cm4gcj9lPT1yfHxlLl9fcHJvdG9fXz09ciYmKHR8fCF3KGUpKTpTKGUpfSx1bj1jKHthOlwiblwiLGo6XCJbXVwiLGk6XCJ1LnB1c2goailcIlxufSksYW49YyhZdCx7aTpcImlmKHVbal09PW51bGwpXCIrWXQuaX0pLGZuPWMoWXQpLGxuPWMoS3QsZW4sdG4se3I6aX0pLGNuPWMoS3QsZW4sdG4pLGhuPWMoe3I6aSxhOlwiblwiLGo6XCJbXVwiLGk6XCJpZihTKEEpKXUucHVzaChqKVwiLGU6XCJ1LnNvcnQoKVwifSkscG49Yyh7YTpcIm5cIixqOlwie31cIixpOlwidVtBXT1qXCJ9KSxkbj1jKHthOlwiQVwiLGo6XCJ0cnVlXCIscTpcInZhciBIPXouY2FsbChBKSxsPUEubGVuZ3RoO2lmKERbSF1cIisoSHQ/XCJ8fE8oQSlcIjpcIlwiKStcInx8KEg9PVcmJmw9PT0rbCYmUyhBLnNwbGljZSkpKXJldHVybiFsXCIsaTp7bDpcInJldHVybiBmYWxzZVwifX0pLHZuPWd0P2Z1bmN0aW9uKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVyblwiZnVuY3Rpb25cIj09dCYmbHQuY2FsbChlLFwicHJvdG90eXBlXCIpP3VuKGUpOmUmJiR0W3RdP2d0KGUpOltdfTp1bixtbj1jKFl0LHthOlwibixjYyxOXCIscTpcInZhciBiLFAsZGQsZWUsQz1hcmd1bWVudHMsYT0wO2lmKE49PVQpe2I9MjtkZD1DWzNdO2VlPUNbNF19ZWxzZXtiPUMubGVuZ3RoO2RkPVtdO2VlPVtdfXdoaWxlKCsrYTxiKXtpZihrPUNbYV0pe1wiXG4saTpcImlmKChjYz1BKSYmKChQPVEoY2MpKXx8VChjYykpKXt2YXIgSz1mYWxzZSxmZj1kZC5sZW5ndGg7d2hpbGUoZmYtLSlpZihLPWRkW2ZmXT09Y2MpYnJlYWs7aWYoSyl7dVtqXT1lZVtmZl19ZWxzZXtkZC5wdXNoKGNjKTtlZS5wdXNoKEE9KEE9dVtqXSkmJlA/KFEoQSk/QTpbXSk6KFQoQSk/QTp7fSkpO3Vbal09RyhBLGNjLFQsZGQsZWUpfX1lbHNlIGlmKGNjIT1udWxsKXVbal09Y2NcIn0pLGduPWMocm4pLHluPWMoe2E6XCJuXCIsajpcIltdXCIsaTpcInVcIisoUnQ/XCJbb109XCI6XCIucHVzaFwiKStcIihbaixBXSlcIn0pLGJuPWMocm4se3E6XCJpZih0eXBlb2YgZCE9J2Z1bmN0aW9uJyl7dmFyIHEsdD1mLmFwcGx5KEUsYXJndW1lbnRzKSxsPXQubGVuZ3RoO2ZvcihqPTE7ajxsO2orKyl7cT10W2pdO2lmKHEgaW4gbil1W3FdPW5bcV19fWVsc2V7aWYoeSlkPWMoZCx5KVwiLGk6XCJpZihkKEEsaixuKSl1W2pdPUFcIixlOlwifVwifSksd249Yyh7YTpcIm5cIixqOlwiW11cIixpOlwidS5wdXNoKEEpXCJ9KSxFbj1cbmMoe2E6XCJlLGdnXCIsajpcImZhbHNlXCIsbzppLGQ6e2I6XCJpZih6LmNhbGwoZSk9PXgpcmV0dXJuIGUuaW5kZXhPZihnZyk+LTFcIn0saTpcImlmKEE9PT1nZylyZXR1cm4gdHJ1ZVwifSksU249YyhLdCxRdCkseG49YyhLdCxHdCksVG49YyhLdCxadCksTm49YyhLdCxlbix7ajpcIlwiLGk6XCJpZihkKEEsaixlKSlyZXR1cm4gQVwifSksQ249YyhLdCxlbiksa249YyhLdCxRdCx7aTpcInE9ZChBLGosZSk7KGguY2FsbCh1LHEpP3VbcV06dVtxXT1bXSkucHVzaChBKVwifSksTG49Yyhubix7YTpcImUsVVwiLHE6XCJ2YXIgQz13LmNhbGwoYXJndW1lbnRzLDIpLFI9dHlwZW9mIFU9PSdmdW5jdGlvbidcIixpOntiOlwidVtqXT0oUj9VOkFbVV0pLmFwcGx5KEEsQylcIixsOlwidVwiKyhSdD9cIltvXT1cIjpcIi5wdXNoXCIpK1wiKChSP1U6QVtVXSkuYXBwbHkoQSxDKSlcIn19KSxBbj1jKEt0LG5uKSxPbj1jKG5uLHthOlwiZSxhYVwiLGk6e2I6XCJ1W2pdPUFbYWFdXCIsbDpcInVcIisoUnQ/XCJbb109XCI6XCIucHVzaFwiKStcIihBW2FhXSlcIn1cbn0pLE1uPWMoe2E6XCJlLGQsQix5XCIsajpcIkJcIixxOlwidmFyIFY9YXJndW1lbnRzLmxlbmd0aDwzO2lmKHkpZD1jKGQseSlcIixkOntiOlwiaWYoVil1PWtbKytqXVwifSxpOntiOlwidT1kKHUsQSxqLGUpXCIsbDpcInU9Vj8oVj1mYWxzZSxBKTpkKHUsQSxqLGUpXCJ9fSksX249YyhLdCxadCx7aTpcIiFcIitadC5pfSksRG49YyhLdCxHdCx7ajpcImZhbHNlXCIsaTpHdC5pLnJlcGxhY2UoXCIhXCIsXCJcIil9KSxQbj1jKEt0LFF0LG5uLHtpOntiOlwidVtqXT17YTpkKEEsaixlKSxiOmosYzpBfVwiLGw6XCJ1XCIrKFJ0P1wiW29dPVwiOlwiLnB1c2hcIikrXCIoe2E6ZChBLGosZSksYjpqLGM6QX0pXCJ9LGU6XCJ1LnNvcnQoSSk7bD11Lmxlbmd0aDt3aGlsZShsLS0pdVtsXT11W2xdLmNcIn0pLEhuPWMoWnQse2E6XCJlLFpcIixxOlwidmFyIHQ9W107SihaLGZ1bmN0aW9uKEEscSl7dC5wdXNoKHEpfSk7dmFyIGJiPXQubGVuZ3RoXCIsaTpcImZvcih2YXIgcSxZPXRydWUscz0wO3M8YmI7cysrKXtxPXRbc107aWYoIShZPUFbcV09PT1aW3FdKSlicmVha31ZJiZ1LnB1c2goQSlcIlxufSksQm49Yyh7cjppLHM6aSxhOlwiblwiLGo6XCJuXCIscTpcInZhciBMPWFyZ3VtZW50cyxsPUwubGVuZ3RoO2lmKGw+MSl7Zm9yKHZhciBqPTE7ajxsO2orKyl1W0xbal1dPUYodVtMW2pdXSx1KTtyZXR1cm4gdX1cIixpOlwiaWYoUyh1W2pdKSl1W2pdPUYodVtqXSx1KVwifSk7cy5WRVJTSU9OPVwiMC43LjBcIixzLmFmdGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDE+ZT90KCk6ZnVuY3Rpb24oKXtpZigxPi0tZSlyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxzLmJpbmQ9RCxzLmJpbmRBbGw9Qm4scy5jaGFpbj1mdW5jdGlvbihlKXtyZXR1cm4gZT1uZXcgbyhlKSxlLl9fY2hhaW5fXz1uLGV9LHMuY2xvbmU9eCxzLmNvbXBhY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9W107aWYoIWUpcmV0dXJuIHQ7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGg7KytuPHI7KWVbbl0mJnQucHVzaChlW25dKTtyZXR1cm4gdH0scy5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbihcbil7Zm9yKHZhciB0PWFyZ3VtZW50cyxuPWUubGVuZ3RoO24tLTspdD1bZVtuXS5hcHBseSh0aGlzLHQpXTtyZXR1cm4gdFswXX19LHMuY29udGFpbnM9RW4scy5jb3VudEJ5PVNuLHMuZGVib3VuY2U9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoKXthPXIsbnx8KG89ZS5hcHBseSh1LHMpKX12YXIgcyxvLHUsYTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1uJiYhYTtyZXR1cm4gcz1hcmd1bWVudHMsdT10aGlzLEF0KGEpLGE9T3QoaSx0KSxyJiYobz1lLmFwcGx5KHUscykpLG99fSxzLmRlZmF1bHRzPWFuLHMuZGVmZXI9ZnVuY3Rpb24oZSl7dmFyIG49Y3QuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIE90KGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxuKX0sMSl9LHMuZGVsYXk9ZnVuY3Rpb24oZSxuKXt2YXIgcj1jdC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gT3QoZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LHIpfSxuKX0scy5kaWZmZXJlbmNlPWZ1bmN0aW9uKGUpe1xudmFyIHQ9W107aWYoIWUpcmV0dXJuIHQ7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGgsaT11dC5hcHBseSh0LGFyZ3VtZW50cyksaT1hKGkscik7KytuPHI7KWkoZVtuXSl8fHQucHVzaChlW25dKTtyZXR1cm4gdH0scy5lc2NhcGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXI/XCJcIjooZStcIlwiKS5yZXBsYWNlKHR0LGQpfSxzLmV2ZXJ5PXhuLHMuZXh0ZW5kPWZuLHMuZmlsdGVyPVRuLHMuZmluZD1ObixzLmZpcnN0PUMscy5mbGF0dGVuPWsscy5mb3JFYWNoPUNuLHMuZm9ySW49bG4scy5mb3JPd249Y24scy5mdW5jdGlvbnM9aG4scy5ncm91cEJ5PWtuLHMuaGFzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/YXQuY2FsbChlLHQpOml9LHMuaWRlbnRpdHk9UCxzLmluZGV4T2Y9TCxzLmluaXRpYWw9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlP2N0LmNhbGwoZSwwLC0odD09cnx8bj8xOnQpKTpbXX0scy5pbnRlcnNlY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9W107aWYoIWUpcmV0dXJuIHQ7dmFyIG5cbixyPWFyZ3VtZW50cy5sZW5ndGgsaT1bXSxzPS0xLG89ZS5sZW5ndGg7ZTpmb3IoOysrczxvOylpZihuPWVbc10sMD5MKHQsbikpe2Zvcih2YXIgdT0xO3U8cjt1KyspaWYoIShpW3VdfHwoaVt1XT1hKGFyZ3VtZW50c1t1XSkpKShuKSljb250aW51ZSBlO3QucHVzaChuKX1yZXR1cm4gdH0scy5pbnZlcnQ9cG4scy5pbnZva2U9TG4scy5pc0FyZ3VtZW50cz13LHMuaXNBcnJheT1zbixzLmlzQm9vbGVhbj1mdW5jdGlvbihlKXtyZXR1cm4gZT09PW58fGU9PT1pfHxodC5jYWxsKGUpPT14dH0scy5pc0VsZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/MT09PWUubm9kZVR5cGU6aX0scy5pc0VtcHR5PWRuLHMuaXNFcXVhbD1ULHMuaXNGaW5pdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG10KGUpJiZodC5jYWxsKGUpPT1OdH0scy5pc0Z1bmN0aW9uPUUscy5pc05hTj1mdW5jdGlvbihlKXtyZXR1cm4gaHQuY2FsbChlKT09TnQmJmUhPStlfSxzLmlzTnVsbD1mdW5jdGlvbihlKXtyZXR1cm4gZT09PVxucn0scy5pc09iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4gZT8kdFt0eXBlb2YgZV06aX0scy5pc1VuZGVmaW5lZD1mdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LHMua2V5cz12bixzLmxhc3Q9ZnVuY3Rpb24oZSx0LG4pe2lmKGUpe3ZhciBpPWUubGVuZ3RoO3JldHVybiB0PT1yfHxuP2VbaS0xXTpjdC5jYWxsKGUsLXR8fGkpfX0scy5sYXN0SW5kZXhPZj1mdW5jdGlvbihlLHQsbil7aWYoIWUpcmV0dXJuLTE7dmFyIHI9ZS5sZW5ndGg7Zm9yKG4mJlwibnVtYmVyXCI9PXR5cGVvZiBuJiYocj0oMD5uP3l0KDAscituKTpidChuLHItMSkpKzEpO3ItLTspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9LHMubGF0ZUJpbmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbCh0LGUsY3QuY2FsbChhcmd1bWVudHMsMikpfSxzLm1hcD1BbixzLm1heD1BLHMubWVtb2l6ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O3JldHVybiBmdW5jdGlvbigpe3ZhciByPXQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cylcbjphcmd1bWVudHNbMF07cmV0dXJuIGF0LmNhbGwobixyKT9uW3JdOm5bcl09ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxzLm1lcmdlPW1uLHMubWluPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1JbmZpbml0eSxpPXI7aWYoIWUpcmV0dXJuIGk7dmFyIHM9LTEsbz1lLmxlbmd0aDtpZighdCl7Zm9yKDsrK3M8bzspZVtzXTxpJiYoaT1lW3NdKTtyZXR1cm4gaX1mb3IobiYmKHQ9dSh0LG4pKTsrK3M8bzspbj10KGVbc10scyxlKSxuPHImJihyPW4saT1lW3NdKTtyZXR1cm4gaX0scy5taXhpbj1ILHMubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBlLl89WCx0aGlzfSxzLm9iamVjdD1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybnt9O2Zvcih2YXIgbj0tMSxyPWUubGVuZ3RoLGk9e307KytuPHI7KXQ/aVtlW25dXT10W25dOmlbZVtuXVswXV09ZVtuXVsxXTtyZXR1cm4gaX0scy5vbWl0PWduLHMub25jZT1mdW5jdGlvbihlKXt2YXIgdCxzPWk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHM/XG50OihzPW4sdD1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlPXIsdCl9fSxzLnBhaXJzPXluLHMucGFydGlhbD1mdW5jdGlvbihlKXtyZXR1cm4gbChlLGN0LmNhbGwoYXJndW1lbnRzLDEpKX0scy5waWNrPWJuLHMucGx1Y2s9T24scy5yYW5kb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09ciYmdD09cj93dCgpOihlPStlfHwwLHQ9PXImJih0PWUsZT0wKSxlK2R0KHd0KCkqKCgrdHx8MCktZSsxKSkpfSxzLnJhbmdlPWZ1bmN0aW9uKGUsdCxuKXtlPStlfHwwLG49K258fDEsdD09ciYmKHQ9ZSxlPTApO2Zvcih2YXIgaT0tMSx0PXl0KDAsTWF0aC5jZWlsKCh0LWUpL24pKSxzPUFycmF5KHQpOysraTx0OylzW2ldPWUsZSs9bjtyZXR1cm4gc30scy5yZWR1Y2U9TW4scy5yZWR1Y2VSaWdodD1OLHMucmVqZWN0PV9uLHMucmVzdD1PLHMucmVzdWx0PWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIHI7dmFyIG49ZVt0XTtyZXR1cm4gRShuKT9lW3RdKCk6bn0scy5zaHVmZmxlPWZ1bmN0aW9uKFxuZSl7aWYoIWUpcmV0dXJuW107Zm9yKHZhciB0LG49LTEscj1lLmxlbmd0aCxpPUFycmF5KHIpOysrbjxyOyl0PWR0KHd0KCkqKG4rMSkpLGlbbl09aVt0XSxpW3RdPWVbbl07cmV0dXJuIGl9LHMuc2l6ZT1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gMDt2YXIgdD1lLmxlbmd0aDtyZXR1cm4gdD09PSt0P3Q6dm4oZSkubGVuZ3RofSxzLnNvbWU9RG4scy5zb3J0Qnk9UG4scy5zb3J0ZWRJbmRleD1NLHMudGFwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQoZSksZX0scy50ZW1wbGF0ZT1mdW5jdGlvbihlLHQsbil7bnx8KG49e30pO3ZhciBlPWUrXCJcIixvLHU7bz1uLmVzY2FwZTt2YXIgYT1uLmV2YWx1YXRlLGY9bi5pbnRlcnBvbGF0ZSxsPXMudGVtcGxhdGVTZXR0aW5ncyxjPW49bi52YXJpYWJsZXx8bC52YXJpYWJsZTtvPT1yJiYobz1sLmVzY2FwZSksYT09ciYmKGE9bC5ldmFsdWF0ZXx8aSksZj09ciYmKGY9bC5pbnRlcnBvbGF0ZSksbyYmKGU9ZS5yZXBsYWNlKG8sbSkpLGYmJihlPWVcbi5yZXBsYWNlKGYseSkpLGEhPUImJihCPWEsST1SZWdFeHAoXCI8ZSUtKFtcXFxcc1xcXFxTXSs/KSU+fDxlJT0oW1xcXFxzXFxcXFNdKz8pJT5cIisoYT9cInxcIithLnNvdXJjZTpcIlwiKSxcImdcIikpLG89b3QubGVuZ3RoLGU9ZS5yZXBsYWNlKEksZyksbz1vIT1vdC5sZW5ndGgsZT1cIl9fcCArPSAnXCIrZS5yZXBsYWNlKG50LHApLnJlcGxhY2UoZXQsaCkrXCInO1wiLG90Lmxlbmd0aD0wLGN8fChuPWp8fFwib2JqXCIsbz9lPVwid2l0aChcIituK1wiKXtcIitlK1wifVwiOihuIT1qJiYoaj1uLEY9UmVnRXhwKFwiKFxcXFwoXFxcXHMqKVwiK24rXCJcXFxcLlwiK24rXCJcXFxcYlwiLFwiZ1wiKSksZT1lLnJlcGxhY2UoWSxcIiQmXCIrbitcIi5cIikucmVwbGFjZShGLFwiJDFfX2RcIikpKSxlPShvP2UucmVwbGFjZShKLFwiXCIpOmUpLnJlcGxhY2UoSyxcIiQxXCIpLnJlcGxhY2UoUSxcIiQxO1wiKSxlPVwiZnVuY3Rpb24oXCIrbitcIil7XCIrKGM/XCJcIjpuK1wifHwoXCIrbitcIj17fSk7XCIpK1widmFyIF9fdCxfX3A9JycsX19lPV8uZXNjYXBlXCIrKG8/XCIsX19qPUFycmF5LnByb3RvdHlwZS5qb2luO2Z1bmN0aW9uIHByaW50KCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpfVwiXG46KGM/XCJcIjpcIixfX2Q9XCIrbitcIi5cIituK1wifHxcIituKStcIjtcIikrZStcInJldHVybiBfX3B9XCI7dHJ5e3U9RnVuY3Rpb24oXCJfXCIsXCJyZXR1cm4gXCIrZSkocyl9Y2F0Y2goZCl7dGhyb3cgZC5zb3VyY2U9ZSxkfXJldHVybiB0P3UodCk6KHUuc291cmNlPWUsdSl9LHMudGhyb3R0bGU9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7YT1uZXcgRGF0ZSx1PXIscz1lLmFwcGx5KG8saSl9dmFyIGkscyxvLHUsYT0wO3JldHVybiBmdW5jdGlvbigpe3ZhciByPW5ldyBEYXRlLGY9dC0oci1hKTtyZXR1cm4gaT1hcmd1bWVudHMsbz10aGlzLDA+PWY/KGE9cixzPWUuYXBwbHkobyxpKSk6dXx8KHU9T3QobixmKSksc319LHMudGltZXM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPS0xO2lmKG4pZm9yKDsrK3I8ZTspdC5jYWxsKG4scik7ZWxzZSBmb3IoOysrcjxlOyl0KHIpfSxzLnRvQXJyYXk9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuW107dmFyIHQ9ZS5sZW5ndGg7cmV0dXJuIHQ9PT0rdD8oQnQ/aHQuXG5jYWxsKGUpPT1MdDpcInN0cmluZ1wiPT10eXBlb2YgZSk/ZS5zcGxpdChcIlwiKTpjdC5jYWxsKGUpOnduKGUpfSxzLnVuZXNjYXBlPWZ1bmN0aW9uKGUpe3JldHVybiBlPT1yP1wiXCI6KGUrXCJcIikucmVwbGFjZSgkLGIpfSxzLnVuaW9uPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPS0xLHQ9W10sbj11dC5hcHBseSh0LGFyZ3VtZW50cykscj1uLmxlbmd0aDsrK2U8cjspMD5MKHQsbltlXSkmJnQucHVzaChuW2VdKTtyZXR1cm4gdH0scy51bmlxPV8scy51bmlxdWVJZD1mdW5jdGlvbihlKXt2YXIgdD16Kys7cmV0dXJuIGU/ZSt0OnR9LHMudmFsdWVzPXduLHMud2hlcmU9SG4scy53aXRob3V0PWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2lmKCFlKXJldHVybiB0O2Zvcih2YXIgbj0tMSxyPWUubGVuZ3RoLGk9YShhcmd1bWVudHMsMSwyMCk7KytuPHI7KWkoZVtuXSl8fHQucHVzaChlW25dKTtyZXR1cm4gdH0scy53cmFwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49W2VdO3JldHVybiBhcmd1bWVudHNcbi5sZW5ndGgmJmZ0LmFwcGx5KG4sYXJndW1lbnRzKSx0LmFwcGx5KHRoaXMsbil9fSxzLnppcD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm5bXTtmb3IodmFyIHQ9LTEsbj1BKE9uKGFyZ3VtZW50cyxcImxlbmd0aFwiKSkscj1BcnJheShuKTsrK3Q8bjspclt0XT1Pbihhcmd1bWVudHMsdCk7cmV0dXJuIHJ9LHMuYWxsPXhuLHMuYW55PURuLHMuY29sbGVjdD1BbixzLmRldGVjdD1ObixzLmRyb3A9TyxzLmVhY2g9Q24scy5mb2xkbD1NbixzLmZvbGRyPU4scy5oZWFkPUMscy5pbmNsdWRlPUVuLHMuaW5qZWN0PU1uLHMubWV0aG9kcz1obixzLnNlbGVjdD1UbixzLnRhaWw9TyxzLnRha2U9QyxzLnVuaXF1ZT1fLENuKHtEYXRlOlR0LE51bWJlcjpOdCxSZWdFeHA6a3QsU3RyaW5nOkx0fSxmdW5jdGlvbihlLHQpe3NbXCJpc1wiK3RdPWZ1bmN0aW9uKHQpe3JldHVybiBodC5jYWxsKHQpPT1lfX0pLG8ucHJvdG90eXBlPXMucHJvdG90eXBlLEgocyksby5wcm90b3R5cGUuY2hhaW49ZnVuY3Rpb24oXG4pe3JldHVybiB0aGlzLl9fY2hhaW5fXz1uLHRoaXN9LG8ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX193cmFwcGVkX199LENuKFwicG9wIHB1c2ggcmV2ZXJzZSBzaGlmdCBzb3J0IHNwbGljZSB1bnNoaWZ0XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUpe3ZhciB0PVJbZV07by5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fd3JhcHBlZF9fO3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKSxfdCYmZS5sZW5ndGg9PT0wJiZkZWxldGUgZVswXSx0aGlzLl9fY2hhaW5fXyYmKGU9bmV3IG8oZSksZS5fX2NoYWluX189biksZX19KSxDbihbXCJjb25jYXRcIixcImpvaW5cIixcInNsaWNlXCJdLGZ1bmN0aW9uKGUpe3ZhciB0PVJbZV07by5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT10LmFwcGx5KHRoaXMuX193cmFwcGVkX18sYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5fX2NoYWluX18mJihlPW5ldyBvKGUpLGUuX19jaGFpbl9fPW4pLGV9fSksdHlwZW9mIFxuZGVmaW5lPT1cImZ1bmN0aW9uXCImJnR5cGVvZiBkZWZpbmUuYW1kPT1cIm9iamVjdFwiJiZkZWZpbmUuYW1kPyhlLl89cyxkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gc30pKTpxP1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZSYmbW9kdWxlLmV4cG9ydHM9PXE/KG1vZHVsZS5leHBvcnRzPXMpLl89czpxLl89czplLl89c30pKHRoaXMpO1xufSkoc2VsZikiLCIoZnVuY3Rpb24oZ2xvYmFsKXsvKipcbiAqIG1hcmtlZCAtIEEgbWFya2Rvd24gcGFyc2VyIChodHRwczovL2dpdGh1Yi5jb20vY2hqai9tYXJrZWQpXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxMiwgQ2hyaXN0b3BoZXIgSmVmZnJleS4gKE1JVCBMaWNlbnNlZClcbiAqL1xuXG47KGZ1bmN0aW9uKCkge1xuXG4vKipcbiAqIEJsb2NrLUxldmVsIEdyYW1tYXJcbiAqL1xuXG52YXIgYmxvY2sgPSB7XG4gIG5ld2xpbmU6IC9eXFxuKy8sXG4gIGNvZGU6IC9eKCB7NH1bXlxcbl0rXFxuKikrLyxcbiAgZmVuY2VzOiBub29wLFxuICBocjogL14oICpbLSpfXSl7Myx9ICooPzpcXG4rfCQpLyxcbiAgaGVhZGluZzogL14gKigjezEsNn0pICooW15cXG5dKz8pICojKiAqKD86XFxuK3wkKS8sXG4gIGxoZWFkaW5nOiAvXihbXlxcbl0rKVxcbiAqKD18LSl7Myx9ICpcXG4qLyxcbiAgYmxvY2txdW90ZTogL14oICo+W15cXG5dKyhcXG5bXlxcbl0rKSpcXG4qKSsvLFxuICBsaXN0OiAvXiggKikoYnVsbCkgW15cXDBdKz8oPzpocnxcXG57Mix9KD8hICkoPyFcXDFidWxsIClcXG4qfFxccyokKS8sXG4gIGh0bWw6IC9eICooPzpjb21tZW50fGNsb3NlZHxjbG9zaW5nKSAqKD86XFxuezIsfXxcXHMqJCkvLFxuICBkZWY6IC9eICpcXFsoW15cXF1dKylcXF06ICooW15cXHNdKykoPzogK1tcIihdKFteXFxuXSspW1wiKV0pPyAqKD86XFxuK3wkKS8sXG4gIHBhcmFncmFwaDogL14oW15cXG5dK1xcbj8oPyFocnxoZWFkaW5nfGxoZWFkaW5nfGJsb2NrcXVvdGV8dGFnfGRlZikpK1xcbiovLFxuICB0ZXh0OiAvXlteXFxuXSsvXG59O1xuXG5ibG9jay5idWxsZXQgPSAvKD86WyorLV18XFxkK1xcLikvO1xuYmxvY2suaXRlbSA9IC9eKCAqKShidWxsKSBbXlxcbl0qKD86XFxuKD8hXFwxYnVsbCApW15cXG5dKikqLztcbmJsb2NrLml0ZW0gPSByZXBsYWNlKGJsb2NrLml0ZW0sICdnbScpXG4gICgvYnVsbC9nLCBibG9jay5idWxsZXQpXG4gICgpO1xuXG5ibG9jay5saXN0ID0gcmVwbGFjZShibG9jay5saXN0KVxuICAoL2J1bGwvZywgYmxvY2suYnVsbGV0KVxuICAoJ2hyJywgL1xcbisoPz0oPzogKlstKl9dKXszLH0gKig/Olxcbit8JCkpLylcbiAgKCk7XG5cbmJsb2NrLmh0bWwgPSByZXBsYWNlKGJsb2NrLmh0bWwpXG4gICgnY29tbWVudCcsIC88IS0tW15cXDBdKj8tLT4vKVxuICAoJ2Nsb3NlZCcsIC88KHRhZylbXlxcMF0rPzxcXC9cXDE+LylcbiAgKCdjbG9zaW5nJywgLzx0YWcoPzpcIlteXCJdKlwifCdbXiddKid8W14nXCI+XSkqPz4vKVxuICAoL3RhZy9nLCB0YWcoKSlcbiAgKCk7XG5cbmJsb2NrLnBhcmFncmFwaCA9IHJlcGxhY2UoYmxvY2sucGFyYWdyYXBoKVxuICAoJ2hyJywgYmxvY2suaHIpXG4gICgnaGVhZGluZycsIGJsb2NrLmhlYWRpbmcpXG4gICgnbGhlYWRpbmcnLCBibG9jay5saGVhZGluZylcbiAgKCdibG9ja3F1b3RlJywgYmxvY2suYmxvY2txdW90ZSlcbiAgKCd0YWcnLCAnPCcgKyB0YWcoKSlcbiAgKCdkZWYnLCBibG9jay5kZWYpXG4gICgpO1xuXG5ibG9jay5ub3JtYWwgPSB7XG4gIGZlbmNlczogYmxvY2suZmVuY2VzLFxuICBwYXJhZ3JhcGg6IGJsb2NrLnBhcmFncmFwaFxufTtcblxuYmxvY2suZ2ZtID0ge1xuICBmZW5jZXM6IC9eICooYGBgfH5+fikgKihcXHcrKT8gKlxcbihbXlxcMF0rPylcXHMqXFwxICooPzpcXG4rfCQpLyxcbiAgcGFyYWdyYXBoOiAvXi9cbn07XG5cbmJsb2NrLmdmbS5wYXJhZ3JhcGggPSByZXBsYWNlKGJsb2NrLnBhcmFncmFwaClcbiAgKCcoPyEnLCAnKD8hJyArIGJsb2NrLmdmbS5mZW5jZXMuc291cmNlLnJlcGxhY2UoJ1xcXFwxJywgJ1xcXFwyJykgKyAnfCcpXG4gICgpO1xuXG4vKipcbiAqIEJsb2NrIExleGVyXG4gKi9cblxuYmxvY2subGV4ZXIgPSBmdW5jdGlvbihzcmMpIHtcbiAgdmFyIHRva2VucyA9IFtdO1xuXG4gIHRva2Vucy5saW5rcyA9IHt9O1xuXG4gIHNyYyA9IHNyY1xuICAgIC5yZXBsYWNlKC9cXHJcXG58XFxyL2csICdcXG4nKVxuICAgIC5yZXBsYWNlKC9cXHQvZywgJyAgICAnKTtcblxuICByZXR1cm4gYmxvY2sudG9rZW4oc3JjLCB0b2tlbnMsIHRydWUpO1xufTtcblxuYmxvY2sudG9rZW4gPSBmdW5jdGlvbihzcmMsIHRva2VucywgdG9wKSB7XG4gIHZhciBzcmMgPSBzcmMucmVwbGFjZSgvXiArJC9nbSwgJycpXG4gICAgLCBuZXh0XG4gICAgLCBsb29zZVxuICAgICwgY2FwXG4gICAgLCBpdGVtXG4gICAgLCBzcGFjZVxuICAgICwgaVxuICAgICwgbFxuICAgICwgc3RhcnQ7XG5cbiAgd2hpbGUgKHNyYykge1xuICAgIHN0YXJ0ID0gc3JjLmxlbmd0aDtcbiAgICAvLyBuZXdsaW5lXG4gICAgaWYgKGNhcCA9IGJsb2NrLm5ld2xpbmUuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgaWYgKGNhcFswXS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnc3BhY2UnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNvZGVcbiAgICBpZiAoY2FwID0gYmxvY2suY29kZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBjYXAgPSBjYXBbMF0ucmVwbGFjZSgvXiB7NH0vZ20sICcnKTtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICB0ZXh0OiAhb3B0aW9ucy5wZWRhbnRpY1xuICAgICAgICAgID8gY2FwLnJlcGxhY2UoL1xcbiskLywgJycpXG4gICAgICAgICAgOiBjYXAsXG4gICAgICAgIHRleHRMZW46IHN0YXJ0IC0gc3JjLmxlbmd0aCxcbiAgICAgICAgcmVtYWluOiBzcmMubGVuZ3RoXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGZlbmNlcyAoZ2ZtKVxuICAgIGlmIChjYXAgPSBibG9jay5mZW5jZXMuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgIGxhbmc6IGNhcFsyXSxcbiAgICAgICAgdGV4dDogY2FwWzNdLFxuICAgICAgICB0ZXh0TGVuOiBzdGFydCAtIHNyYy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbjogc3JjLmxlbmd0aFxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBoZWFkaW5nXG4gICAgaWYgKGNhcCA9IGJsb2NrLmhlYWRpbmcuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIGRlcHRoOiBjYXBbMV0ubGVuZ3RoLFxuICAgICAgICB0ZXh0OiBjYXBbMl1cbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gbGhlYWRpbmdcbiAgICBpZiAoY2FwID0gYmxvY2subGhlYWRpbmcuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIGRlcHRoOiBjYXBbMl0gPT09ICc9JyA/IDEgOiAyLFxuICAgICAgICB0ZXh0OiBjYXBbMV1cbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gaHJcbiAgICBpZiAoY2FwID0gYmxvY2suaHIuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnaHInXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGJsb2NrcXVvdGVcbiAgICBpZiAoY2FwID0gYmxvY2suYmxvY2txdW90ZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG5cbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2Jsb2NrcXVvdGVfc3RhcnQnXG4gICAgICB9KTtcblxuICAgICAgY2FwID0gY2FwWzBdLnJlcGxhY2UoL14gKj4gPy9nbSwgJycpO1xuXG4gICAgICAvLyBQYXNzIGB0b3BgIHRvIGtlZXAgdGhlIGN1cnJlbnRcbiAgICAgIC8vIFwidG9wbGV2ZWxcIiBzdGF0ZS4gVGhpcyBpcyBleGFjdGx5XG4gICAgICAvLyBob3cgbWFya2Rvd24ucGwgd29ya3MuXG4gICAgICBibG9jay50b2tlbihjYXAsIHRva2VucywgdG9wKTtcblxuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnYmxvY2txdW90ZV9lbmQnXG4gICAgICB9KTtcblxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gbGlzdFxuICAgIGlmIChjYXAgPSBibG9jay5saXN0LmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcblxuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnbGlzdF9zdGFydCcsXG4gICAgICAgIG9yZGVyZWQ6IGlzRmluaXRlKGNhcFsyXSlcbiAgICAgIH0pO1xuXG4gICAgICAvLyBHZXQgZWFjaCB0b3AtbGV2ZWwgaXRlbS5cbiAgICAgIGNhcCA9IGNhcFswXS5tYXRjaChibG9jay5pdGVtKTtcblxuICAgICAgbmV4dCA9IGZhbHNlO1xuICAgICAgbCA9IGNhcC5sZW5ndGg7XG4gICAgICBpID0gMDtcblxuICAgICAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaXRlbSA9IGNhcFtpXTtcblxuICAgICAgICAvLyBSZW1vdmUgdGhlIGxpc3QgaXRlbSdzIGJ1bGxldFxuICAgICAgICAvLyBzbyBpdCBpcyBzZWVuIGFzIHRoZSBuZXh0IHRva2VuLlxuICAgICAgICBzcGFjZSA9IGl0ZW0ubGVuZ3RoO1xuICAgICAgICBpdGVtID0gaXRlbS5yZXBsYWNlKC9eICooWyorLV18XFxkK1xcLikgKy8sICcnKTtcblxuICAgICAgICAvLyBPdXRkZW50IHdoYXRldmVyIHRoZVxuICAgICAgICAvLyBsaXN0IGl0ZW0gY29udGFpbnMuIEhhY2t5LlxuICAgICAgICBpZiAofml0ZW0uaW5kZXhPZignXFxuICcpKSB7XG4gICAgICAgICAgc3BhY2UgLT0gaXRlbS5sZW5ndGg7XG4gICAgICAgICAgaXRlbSA9ICFvcHRpb25zLnBlZGFudGljXG4gICAgICAgICAgICA/IGl0ZW0ucmVwbGFjZShuZXcgUmVnRXhwKCdeIHsxLCcgKyBzcGFjZSArICd9JywgJ2dtJyksICcnKVxuICAgICAgICAgICAgOiBpdGVtLnJlcGxhY2UoL14gezEsNH0vZ20sICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERldGVybWluZSB3aGV0aGVyIGl0ZW0gaXMgbG9vc2Ugb3Igbm90LlxuICAgICAgICAvLyBVc2U6IC8oXnxcXG4pKD8hIClbXlxcbl0rXFxuXFxuKD8hXFxzKiQpL1xuICAgICAgICAvLyBmb3IgZGlzY291bnQgYmVoYXZpb3IuXG4gICAgICAgIGxvb3NlID0gbmV4dCB8fCAvXFxuXFxuKD8hXFxzKiQpLy50ZXN0KGl0ZW0pO1xuICAgICAgICBpZiAoaSAhPT0gbCAtIDEpIHtcbiAgICAgICAgICBuZXh0ID0gaXRlbVtpdGVtLmxlbmd0aC0xXSA9PT0gJ1xcbic7XG4gICAgICAgICAgaWYgKCFsb29zZSkgbG9vc2UgPSBuZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6IGxvb3NlXG4gICAgICAgICAgICA/ICdsb29zZV9pdGVtX3N0YXJ0J1xuICAgICAgICAgICAgOiAnbGlzdF9pdGVtX3N0YXJ0J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZWN1cnNlLlxuICAgICAgICBibG9jay50b2tlbihpdGVtLCB0b2tlbnMpO1xuXG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnbGlzdF9pdGVtX2VuZCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2xpc3RfZW5kJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGh0bWxcbiAgICBpZiAoY2FwID0gYmxvY2suaHRtbC5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6IG9wdGlvbnMuc2FuaXRpemVcbiAgICAgICAgICA/ICdwYXJhZ3JhcGgnXG4gICAgICAgICAgOiAnaHRtbCcsXG4gICAgICAgIHByZTogY2FwWzFdID09PSAncHJlJyxcbiAgICAgICAgdGV4dDogY2FwWzBdXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGRlZlxuICAgIGlmICh0b3AgJiYgKGNhcCA9IGJsb2NrLmRlZi5leGVjKHNyYykpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLmxpbmtzW2NhcFsxXS50b0xvd2VyQ2FzZSgpXSA9IHtcbiAgICAgICAgaHJlZjogY2FwWzJdLFxuICAgICAgICB0aXRsZTogY2FwWzNdXG4gICAgICB9O1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdG9wLWxldmVsIHBhcmFncmFwaFxuICAgIGlmICh0b3AgJiYgKGNhcCA9IGJsb2NrLnBhcmFncmFwaC5leGVjKHNyYykpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgdGV4dDogY2FwWzBdXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHRleHRcbiAgICBpZiAoY2FwID0gYmxvY2sudGV4dC5leGVjKHNyYykpIHtcbiAgICAgIC8vIFRvcC1sZXZlbCBzaG91bGQgbmV2ZXIgcmVhY2ggaGVyZS5cbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgdGV4dDogY2FwWzBdXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59O1xuXG4vKipcbiAqIElubGluZSBQcm9jZXNzaW5nXG4gKi9cblxudmFyIGlubGluZSA9IHtcbiAgZXNjYXBlOiAvXlxcXFwoW1xcXFxgKnt9XFxbXFxdKCkjK1xcLS4hXz5dKS8sXG4gIGF1dG9saW5rOiAvXjwoW14gPl0rKEB8OlxcLylbXiA+XSspPi8sXG4gIHVybDogbm9vcCxcbiAgdGFnOiAvXjwhLS1bXlxcMF0qPy0tPnxePFxcLz9cXHcrKD86XCJbXlwiXSpcInwnW14nXSonfFteJ1wiPl0pKj8+LyxcbiAgbGluazogL14hP1xcWyhpbnNpZGUpXFxdXFwoaHJlZlxcKS8sXG4gIHJlZmxpbms6IC9eIT9cXFsoaW5zaWRlKVxcXVxccypcXFsoW15cXF1dKilcXF0vLFxuICBub2xpbms6IC9eIT9cXFsoKD86XFxbW15cXF1dKlxcXXxbXlxcW1xcXV0pKilcXF0vLFxuICBzdHJvbmc6IC9eX18oW15cXDBdKz8pX18oPyFfKXxeXFwqXFwqKFteXFwwXSs/KVxcKlxcKig/IVxcKikvLFxuICBlbTogL15cXGJfKCg/Ol9ffFteXFwwXSkrPylfXFxifF5cXCooKD86XFwqXFwqfFteXFwwXSkrPylcXCooPyFcXCopLyxcbiAgY29kZTogL14oYCspKFteXFwwXSo/W15gXSlcXDEoPyFgKS8sXG4gIGJyOiAvXiB7Mix9XFxuKD8hXFxzKiQpLyxcbiAgdGV4dDogL15bXlxcMF0rPyg/PVtcXFxcPCFcXFtfKmBdfCB7Mix9XFxufCQpL1xufTtcblxuaW5saW5lLl9saW5rSW5zaWRlID0gLyg/OlxcW1teXFxdXSpcXF18W15cXF1dfFxcXSg/PVteXFxbXSpcXF0pKSovO1xuaW5saW5lLl9saW5rSHJlZiA9IC9cXHMqPD8oW15cXHNdKj8pPj8oPzpcXHMrWydcIl0oW15cXDBdKj8pWydcIl0pP1xccyovO1xuXG5pbmxpbmUubGluayA9IHJlcGxhY2UoaW5saW5lLmxpbmspXG4gICgnaW5zaWRlJywgaW5saW5lLl9saW5rSW5zaWRlKVxuICAoJ2hyZWYnLCBpbmxpbmUuX2xpbmtIcmVmKVxuICAoKTtcblxuaW5saW5lLnJlZmxpbmsgPSByZXBsYWNlKGlubGluZS5yZWZsaW5rKVxuICAoJ2luc2lkZScsIGlubGluZS5fbGlua0luc2lkZSlcbiAgKCk7XG5cbmlubGluZS5ub3JtYWwgPSB7XG4gIHVybDogaW5saW5lLnVybCxcbiAgc3Ryb25nOiBpbmxpbmUuc3Ryb25nLFxuICBlbTogaW5saW5lLmVtLFxuICB0ZXh0OiBpbmxpbmUudGV4dFxufTtcblxuaW5saW5lLnBlZGFudGljID0ge1xuICBzdHJvbmc6IC9eX18oPz1cXFMpKFteXFwwXSo/XFxTKV9fKD8hXyl8XlxcKlxcKig/PVxcUykoW15cXDBdKj9cXFMpXFwqXFwqKD8hXFwqKS8sXG4gIGVtOiAvXl8oPz1cXFMpKFteXFwwXSo/XFxTKV8oPyFfKXxeXFwqKD89XFxTKShbXlxcMF0qP1xcUylcXCooPyFcXCopL1xufTtcblxuaW5saW5lLmdmbSA9IHtcbiAgdXJsOiAvXihodHRwcz86XFwvXFwvW15cXHNdK1teLiw6O1wiJylcXF1cXHNdKS8sXG4gIHRleHQ6IC9eW15cXDBdKz8oPz1bXFxcXDwhXFxbXypgXXxodHRwcz86XFwvXFwvfCB7Mix9XFxufCQpL1xufTtcblxuLyoqXG4gKiBJbmxpbmUgTGV4ZXJcbiAqL1xuXG5pbmxpbmUubGV4ZXIgPSBmdW5jdGlvbihzcmMpIHtcbiAgdmFyIG91dCA9ICcnXG4gICAgLCBsaW5rcyA9IHRva2Vucy5saW5rc1xuICAgICwgbGlua1xuICAgICwgdGV4dFxuICAgICwgaHJlZlxuICAgICwgY2FwO1xuXG4gIHdoaWxlIChzcmMpIHtcbiAgICAvLyBlc2NhcGVcbiAgICBpZiAoY2FwID0gaW5saW5lLmVzY2FwZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gY2FwWzFdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gYXV0b2xpbmtcbiAgICBpZiAoY2FwID0gaW5saW5lLmF1dG9saW5rLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIGlmIChjYXBbMl0gPT09ICdAJykge1xuICAgICAgICB0ZXh0ID0gY2FwWzFdWzZdID09PSAnOidcbiAgICAgICAgICA/IG1hbmdsZShjYXBbMV0uc3Vic3RyaW5nKDcpKVxuICAgICAgICAgIDogbWFuZ2xlKGNhcFsxXSk7XG4gICAgICAgIGhyZWYgPSBtYW5nbGUoJ21haWx0bzonKSArIHRleHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gZXNjYXBlKGNhcFsxXSk7XG4gICAgICAgIGhyZWYgPSB0ZXh0O1xuICAgICAgfVxuICAgICAgb3V0ICs9ICc8YSBocmVmPVwiJ1xuICAgICAgICArIGhyZWZcbiAgICAgICAgKyAnXCI+J1xuICAgICAgICArIHRleHRcbiAgICAgICAgKyAnPC9hPic7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB1cmwgKGdmbSlcbiAgICBpZiAoY2FwID0gaW5saW5lLnVybC5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0ZXh0ID0gZXNjYXBlKGNhcFsxXSk7XG4gICAgICBocmVmID0gdGV4dDtcbiAgICAgIG91dCArPSAnPGEgaHJlZj1cIidcbiAgICAgICAgKyBocmVmXG4gICAgICAgICsgJ1wiPidcbiAgICAgICAgKyB0ZXh0XG4gICAgICAgICsgJzwvYT4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdGFnXG4gICAgaWYgKGNhcCA9IGlubGluZS50YWcuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgb3V0ICs9IG9wdGlvbnMuc2FuaXRpemVcbiAgICAgICAgPyBlc2NhcGUoY2FwWzBdKVxuICAgICAgICA6IGNhcFswXTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGxpbmtcbiAgICBpZiAoY2FwID0gaW5saW5lLmxpbmsuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgb3V0ICs9IG91dHB1dExpbmsoY2FwLCB7XG4gICAgICAgIGhyZWY6IGNhcFsyXSxcbiAgICAgICAgdGl0bGU6IGNhcFszXVxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyByZWZsaW5rLCBub2xpbmtcbiAgICBpZiAoKGNhcCA9IGlubGluZS5yZWZsaW5rLmV4ZWMoc3JjKSlcbiAgICAgICAgfHwgKGNhcCA9IGlubGluZS5ub2xpbmsuZXhlYyhzcmMpKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIGxpbmsgPSAoY2FwWzJdIHx8IGNhcFsxXSkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgbGluayA9IGxpbmtzW2xpbmsudG9Mb3dlckNhc2UoKV07XG4gICAgICBpZiAoIWxpbmsgfHwgIWxpbmsuaHJlZikge1xuICAgICAgICBvdXQgKz0gY2FwWzBdWzBdO1xuICAgICAgICBzcmMgPSBjYXBbMF0uc3Vic3RyaW5nKDEpICsgc3JjO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIG91dCArPSBvdXRwdXRMaW5rKGNhcCwgbGluayk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBzdHJvbmdcbiAgICBpZiAoY2FwID0gaW5saW5lLnN0cm9uZy5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gJzxzdHJvbmc+J1xuICAgICAgICArIGlubGluZS5sZXhlcihjYXBbMl0gfHwgY2FwWzFdKVxuICAgICAgICArICc8L3N0cm9uZz4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gZW1cbiAgICBpZiAoY2FwID0gaW5saW5lLmVtLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIG91dCArPSAnPGVtPidcbiAgICAgICAgKyBpbmxpbmUubGV4ZXIoY2FwWzJdIHx8IGNhcFsxXSlcbiAgICAgICAgKyAnPC9lbT4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gY29kZVxuICAgIGlmIChjYXAgPSBpbmxpbmUuY29kZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gJzxjb2RlPidcbiAgICAgICAgKyBlc2NhcGUoY2FwWzJdLCB0cnVlKVxuICAgICAgICArICc8L2NvZGU+JztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGJyXG4gICAgaWYgKGNhcCA9IGlubGluZS5ici5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gJzxicj4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdGV4dFxuICAgIGlmIChjYXAgPSBpbmxpbmUudGV4dC5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gZXNjYXBlKGNhcFswXSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3V0O1xufTtcblxuZnVuY3Rpb24gb3V0cHV0TGluayhjYXAsIGxpbmspIHtcbiAgaWYgKGNhcFswXVswXSAhPT0gJyEnKSB7XG4gICAgcmV0dXJuICc8YSBocmVmPVwiJ1xuICAgICAgKyBlc2NhcGUobGluay5ocmVmKVxuICAgICAgKyAnXCInXG4gICAgICArIChsaW5rLnRpdGxlXG4gICAgICA/ICcgdGl0bGU9XCInXG4gICAgICArIGVzY2FwZShsaW5rLnRpdGxlKVxuICAgICAgKyAnXCInXG4gICAgICA6ICcnKVxuICAgICAgKyAnPidcbiAgICAgICsgaW5saW5lLmxleGVyKGNhcFsxXSlcbiAgICAgICsgJzwvYT4nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnPGltZyBzcmM9XCInXG4gICAgICArIGVzY2FwZShsaW5rLmhyZWYpXG4gICAgICArICdcIiBhbHQ9XCInXG4gICAgICArIGVzY2FwZShjYXBbMV0pXG4gICAgICArICdcIidcbiAgICAgICsgKGxpbmsudGl0bGVcbiAgICAgID8gJyB0aXRsZT1cIidcbiAgICAgICsgZXNjYXBlKGxpbmsudGl0bGUpXG4gICAgICArICdcIidcbiAgICAgIDogJycpXG4gICAgICArICc+JztcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNpbmdcbiAqL1xuXG52YXIgdG9rZW5zXG4gICwgdG9rZW47XG5cbmZ1bmN0aW9uIG5leHQoKSB7XG4gIHJldHVybiB0b2tlbiA9IHRva2Vucy5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdG9rKCkge1xuICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICBjYXNlICdzcGFjZSc6IHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY2FzZSAnaHInOiB7XG4gICAgICByZXR1cm4gJzxocj5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdoZWFkaW5nJzoge1xuICAgICAgcmV0dXJuICc8aCdcbiAgICAgICAgKyB0b2tlbi5kZXB0aFxuICAgICAgICArICc+J1xuICAgICAgICArIGlubGluZS5sZXhlcih0b2tlbi50ZXh0KVxuICAgICAgICArICc8L2gnXG4gICAgICAgICsgdG9rZW4uZGVwdGhcbiAgICAgICAgKyAnPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ2NvZGUnOiB7XG4gICAgICBpZiAob3B0aW9ucy5oaWdobGlnaHQpIHtcbiAgICAgICAgdG9rZW4uY29kZSA9IG9wdGlvbnMuaGlnaGxpZ2h0KHRva2VuLnRleHQsIHRva2VuLmxhbmcpO1xuICAgICAgICBpZiAodG9rZW4uY29kZSAhPSBudWxsICYmIHRva2VuLmNvZGUgIT09IHRva2VuLnRleHQpIHtcbiAgICAgICAgICB0b2tlbi5lc2NhcGVkID0gdHJ1ZTtcbiAgICAgICAgICB0b2tlbi50ZXh0ID0gdG9rZW4uY29kZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRva2VuLmVzY2FwZWQpIHtcbiAgICAgICAgdG9rZW4udGV4dCA9IGVzY2FwZSh0b2tlbi50ZXh0LCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8cHJlPjxjb2RlJ1xuICAgICAgICArICh0b2tlbi5sYW5nXG4gICAgICAgID8gJyBjbGFzcz1cImxhbmctJ1xuICAgICAgICArIHRva2VuLmxhbmdcbiAgICAgICAgKyAnXCInXG4gICAgICAgIDogJycpXG4gICAgICAgICsgJz4nXG4gICAgICAgICsgdG9rZW4udGV4dFxuICAgICAgICArICc8L2NvZGU+PC9wcmU+XFxuJztcbiAgICB9XG4gICAgY2FzZSAnYmxvY2txdW90ZV9zdGFydCc6IHtcbiAgICAgIHZhciBib2R5ID0gJyc7XG5cbiAgICAgIHdoaWxlIChuZXh0KCkudHlwZSAhPT0gJ2Jsb2NrcXVvdGVfZW5kJykge1xuICAgICAgICBib2R5ICs9IHRvaygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxibG9ja3F1b3RlPlxcbidcbiAgICAgICAgKyBib2R5XG4gICAgICAgICsgJzwvYmxvY2txdW90ZT5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdsaXN0X3N0YXJ0Jzoge1xuICAgICAgdmFyIHR5cGUgPSB0b2tlbi5vcmRlcmVkID8gJ29sJyA6ICd1bCdcbiAgICAgICAgLCBib2R5ID0gJyc7XG5cbiAgICAgIHdoaWxlIChuZXh0KCkudHlwZSAhPT0gJ2xpc3RfZW5kJykge1xuICAgICAgICBib2R5ICs9IHRvaygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzwnXG4gICAgICAgICsgdHlwZVxuICAgICAgICArICc+XFxuJ1xuICAgICAgICArIGJvZHlcbiAgICAgICAgKyAnPC8nXG4gICAgICAgICsgdHlwZVxuICAgICAgICArICc+XFxuJztcbiAgICB9XG4gICAgY2FzZSAnbGlzdF9pdGVtX3N0YXJ0Jzoge1xuICAgICAgdmFyIGJvZHkgPSAnJztcblxuICAgICAgd2hpbGUgKG5leHQoKS50eXBlICE9PSAnbGlzdF9pdGVtX2VuZCcpIHtcbiAgICAgICAgYm9keSArPSB0b2tlbi50eXBlID09PSAndGV4dCdcbiAgICAgICAgICA/IHBhcnNlVGV4dCgpXG4gICAgICAgICAgOiB0b2soKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8bGk+J1xuICAgICAgICArIGJvZHlcbiAgICAgICAgKyAnPC9saT5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdsb29zZV9pdGVtX3N0YXJ0Jzoge1xuICAgICAgdmFyIGJvZHkgPSAnJztcblxuICAgICAgd2hpbGUgKG5leHQoKS50eXBlICE9PSAnbGlzdF9pdGVtX2VuZCcpIHtcbiAgICAgICAgYm9keSArPSB0b2soKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8bGk+J1xuICAgICAgICArIGJvZHlcbiAgICAgICAgKyAnPC9saT5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdodG1sJzoge1xuICAgICAgcmV0dXJuICF0b2tlbi5wcmUgJiYgIW9wdGlvbnMucGVkYW50aWNcbiAgICAgICAgPyBpbmxpbmUubGV4ZXIodG9rZW4udGV4dClcbiAgICAgICAgOiB0b2tlbi50ZXh0O1xuICAgIH1cbiAgICBjYXNlICdwYXJhZ3JhcGgnOiB7XG4gICAgICByZXR1cm4gJzxwPidcbiAgICAgICAgKyBpbmxpbmUubGV4ZXIodG9rZW4udGV4dClcbiAgICAgICAgKyAnPC9wPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ3RleHQnOiB7XG4gICAgICByZXR1cm4gJzxwPidcbiAgICAgICAgKyBwYXJzZVRleHQoKVxuICAgICAgICArICc8L3A+XFxuJztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VUZXh0KCkge1xuICB2YXIgYm9keSA9IHRva2VuLnRleHRcbiAgICAsIHRvcDtcblxuICB3aGlsZSAoKHRvcCA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoLTFdKVxuICAgICAgICAgJiYgdG9wLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgIGJvZHkgKz0gJ1xcbicgKyBuZXh0KCkudGV4dDtcbiAgfVxuXG4gIHJldHVybiBpbmxpbmUubGV4ZXIoYm9keSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlKHNyYykge1xuICB0b2tlbnMgPSBzcmMucmV2ZXJzZSgpO1xuXG4gIHZhciBvdXQgPSAnJztcbiAgd2hpbGUgKG5leHQoKSkge1xuICAgIG91dCArPSB0b2soKTtcbiAgfVxuXG4gIHRva2VucyA9IG51bGw7XG4gIHRva2VuID0gbnVsbDtcblxuICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIEhlbHBlcnNcbiAqL1xuXG5mdW5jdGlvbiBlc2NhcGUoaHRtbCwgZW5jb2RlKSB7XG4gIHJldHVybiBodG1sXG4gICAgLnJlcGxhY2UoIWVuY29kZSA/IC8mKD8hIz9cXHcrOykvZyA6IC8mL2csICcmYW1wOycpXG4gICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgLnJlcGxhY2UoLycvZywgJyYjMzk7Jyk7XG59XG5cbmZ1bmN0aW9uIG1hbmdsZSh0ZXh0KSB7XG4gIHZhciBvdXQgPSAnJ1xuICAgICwgbCA9IHRleHQubGVuZ3RoXG4gICAgLCBpID0gMFxuICAgICwgY2g7XG5cbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBjaCA9IHRleHQuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgY2ggPSAneCcgKyBjaC50b1N0cmluZygxNik7XG4gICAgfVxuICAgIG91dCArPSAnJiMnICsgY2ggKyAnOyc7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiB0YWcoKSB7XG4gIHZhciB0YWcgPSAnKD8hKD86J1xuICAgICsgJ2F8ZW18c3Ryb25nfHNtYWxsfHN8Y2l0ZXxxfGRmbnxhYmJyfGRhdGF8dGltZXxjb2RlJ1xuICAgICsgJ3x2YXJ8c2FtcHxrYmR8c3VifHN1cHxpfGJ8dXxtYXJrfHJ1Ynl8cnR8cnB8YmRpfGJkbydcbiAgICArICd8c3Bhbnxicnx3YnJ8aW5zfGRlbHxpbWcpXFxcXGIpXFxcXHcrKD8hOi98QClcXFxcYic7XG5cbiAgcmV0dXJuIHRhZztcbn1cblxuZnVuY3Rpb24gcmVwbGFjZShyZWdleCwgb3B0KSB7XG4gIHJlZ2V4ID0gcmVnZXguc291cmNlO1xuICBvcHQgPSBvcHQgfHwgJyc7XG4gIHJldHVybiBmdW5jdGlvbiBzZWxmKG5hbWUsIHZhbCkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG9wdCk7XG4gICAgdmFsID0gdmFsLnNvdXJjZSB8fCB2YWw7XG4gICAgdmFsID0gdmFsLnJlcGxhY2UoLyhefFteXFxbXSlcXF4vZywgJyQxJyk7XG4gICAgcmVnZXggPSByZWdleC5yZXBsYWNlKG5hbWUsIHZhbCk7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxubm9vcC5leGVjID0gbm9vcDtcblxuLyoqXG4gKiBNYXJrZWRcbiAqL1xuXG5mdW5jdGlvbiBtYXJrZWQoc3JjLCBvcHQpIHtcbiAgc2V0T3B0aW9ucyhvcHQpO1xuICBpZiAob3B0ICYmIG9wdC5zYXZlTGV4KSB7XG4gICAgcmV0dXJuIFtwYXJzZShibG9jay5sZXhlcihzcmMpKSwgYmxvY2subGV4ZXIoc3JjKV07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlKGJsb2NrLmxleGVyKHNyYykpO1xuICB9XG59XG5cbi8qKlxuICogT3B0aW9uc1xuICovXG5cbnZhciBvcHRpb25zXG4gICwgZGVmYXVsdHM7XG5cbmZ1bmN0aW9uIHNldE9wdGlvbnMob3B0KSB7XG4gIGlmICghb3B0KSBvcHQgPSBkZWZhdWx0cztcbiAgaWYgKG9wdGlvbnMgPT09IG9wdCkgcmV0dXJuO1xuICBvcHRpb25zID0gb3B0O1xuXG4gIGlmIChvcHRpb25zLmdmbSkge1xuICAgIGJsb2NrLmZlbmNlcyA9IGJsb2NrLmdmbS5mZW5jZXM7XG4gICAgYmxvY2sucGFyYWdyYXBoID0gYmxvY2suZ2ZtLnBhcmFncmFwaDtcbiAgICBpbmxpbmUudGV4dCA9IGlubGluZS5nZm0udGV4dDtcbiAgICBpbmxpbmUudXJsID0gaW5saW5lLmdmbS51cmw7XG4gIH0gZWxzZSB7XG4gICAgYmxvY2suZmVuY2VzID0gYmxvY2subm9ybWFsLmZlbmNlcztcbiAgICBibG9jay5wYXJhZ3JhcGggPSBibG9jay5ub3JtYWwucGFyYWdyYXBoO1xuICAgIGlubGluZS50ZXh0ID0gaW5saW5lLm5vcm1hbC50ZXh0O1xuICAgIGlubGluZS51cmwgPSBpbmxpbmUubm9ybWFsLnVybDtcbiAgfVxuXG4gIGlmIChvcHRpb25zLnBlZGFudGljKSB7XG4gICAgaW5saW5lLmVtID0gaW5saW5lLnBlZGFudGljLmVtO1xuICAgIGlubGluZS5zdHJvbmcgPSBpbmxpbmUucGVkYW50aWMuc3Ryb25nO1xuICB9IGVsc2Uge1xuICAgIGlubGluZS5lbSA9IGlubGluZS5ub3JtYWwuZW07XG4gICAgaW5saW5lLnN0cm9uZyA9IGlubGluZS5ub3JtYWwuc3Ryb25nO1xuICB9XG59XG5cbm1hcmtlZC5vcHRpb25zID1cbm1hcmtlZC5zZXRPcHRpb25zID0gZnVuY3Rpb24ob3B0KSB7XG4gIGRlZmF1bHRzID0gb3B0O1xuICBzZXRPcHRpb25zKG9wdCk7XG4gIHJldHVybiBtYXJrZWQ7XG59O1xuXG5tYXJrZWQuc2V0T3B0aW9ucyh7XG4gIGdmbTogdHJ1ZSxcbiAgcGVkYW50aWM6IGZhbHNlLFxuICBzYW5pdGl6ZTogZmFsc2UsXG4gIGhpZ2hsaWdodDogbnVsbFxufSk7XG5cbi8qKlxuICogRXhwb3NlXG4gKi9cblxubWFya2VkLnBhcnNlciA9IGZ1bmN0aW9uKHNyYywgb3B0KSB7XG4gIHNldE9wdGlvbnMob3B0KTtcbiAgcmV0dXJuIHBhcnNlKHNyYyk7XG59O1xuXG5tYXJrZWQubGV4ZXIgPSBmdW5jdGlvbihzcmMsIG9wdCkge1xuICBzZXRPcHRpb25zKG9wdCk7XG4gIHJldHVybiBibG9jay5sZXhlcihzcmMpO1xufTtcblxubWFya2VkLnBhcnNlID0gbWFya2VkO1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBtYXJrZWQ7XG59IGVsc2Uge1xuICB0aGlzLm1hcmtlZCA9IG1hcmtlZDtcbn1cblxufSkuY2FsbChmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKTtcbn0oKSk7XG5cbn0pKHNlbGYpIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuKGZ1bmN0aW9uKCkge1xuICB2YXIgJCwgRE9XTl9BUlJPVywgRU5ELCBFTlRFUiwgRVNDLCBIT01FLCBMRUZUX0FSUk9XLCBOb3RlYm9vaywgUEFHRV9ET1dOLCBQQUdFX1VQLCBRLCBSSUdIVF9BUlJPVywgVVBfQVJST1csIGFycm93cywgYmluZE1hcmt1cERpdiwgYmluZFNsaWRlciwgY2hvb3NlU2xpZGUsIGNsZWFuRW1wdHlOb2RlcywgY2xvc2VXaW5kb3csIGNvdW50U2xpZGUsIGNyZWF0ZU5vZGUsIGRlbGF5LCBlZGl0aW5nRW5hYmxlZCwgZW5hYmxlRWRpdGluZywgZW5hYmxlU2xpZGVDb250cm9scywgZmlyc3RTbGlkZSwgZ2V0RWxlbWVudENvZGUsIGhhbmRsZUludGVybmFsU2VjdGlvbnMsIGhpZGVTbGlkZSwgaW5zZXJ0Q29udHJvbHMsIGlzTGVpc3VyZUNvZGUsIGpRdWVyeSwgbGFzdFNsaWRlLCBtYWtlTWFya3VwRGl2LCBtYWtlU2VjdGlvbiwgbWFrZVNsaWRlRGl2LCBtYXJrdXBCdXR0b25zLCBtYXJrdXBFbGVtZW50LCBtYXJrdXBTbGlkZUNvbnRlbnQsIG1hcmt1cFNsaWRlcywgbWVyZ2VMZWlzdXJlQ29kZSwgbWVyZ2VVcCwgbmV4dFNpYmxpbmcsIG5leHRTbGlkZSwgbnRoU2xpZGUsIG9sZFNsaWRlLCBwYWRTbGlkZSwgcHJlc2VudExlaXN1cmVDb2RlLCBwcmVzZW50U2xpZGUsIHByZXZTbGlkZSwgcHJldmlvdXNTaWJsaW5nLCByZW1vdmUsIHNob3dTbGlkZSwgc2xpZGVDb250cm9scywgc2xpZGVDb250cm9sc0VuYWJsZWQsIHNsaWRlS2V5TGlzdGVuZXIsIHNsaWRlTmFtZSwgc2xpZGVQYXQsIHNsaWRlcywgc2xpZGluZywgdGV4dE5vZGUsIHVud3JhcCwgdW53cmFwQ29udGVudCwgXywgX3JlZixcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxuICBqUXVlcnkgPSB3aW5kb3cualF1ZXJ5LCAkID0gd2luZG93LiQsIF8gPSB3aW5kb3cuXztcblxuICBfcmVmID0gTm90ZWJvb2sgPSByZXF1aXJlKCcuL25vdGVib29rJyksIEVOVEVSID0gX3JlZi5FTlRFUiwgZGVsYXkgPSBfcmVmLmRlbGF5LCB0ZXh0Tm9kZSA9IF9yZWYudGV4dE5vZGUsIGNyZWF0ZU5vZGUgPSBfcmVmLmNyZWF0ZU5vZGUsIHJlbW92ZSA9IF9yZWYucmVtb3ZlLCB1bndyYXAgPSBfcmVmLnVud3JhcCwgaW5zZXJ0Q29udHJvbHMgPSBfcmVmLmluc2VydENvbnRyb2xzLCBjbGVhbkVtcHR5Tm9kZXMgPSBfcmVmLmNsZWFuRW1wdHlOb2RlcywgaXNMZWlzdXJlQ29kZSA9IF9yZWYuaXNMZWlzdXJlQ29kZSwgZ2V0RWxlbWVudENvZGUgPSBfcmVmLmdldEVsZW1lbnRDb2RlLCBwcmV2aW91c1NpYmxpbmcgPSBfcmVmLnByZXZpb3VzU2libGluZywgbmV4dFNpYmxpbmcgPSBfcmVmLm5leHRTaWJsaW5nLCBwcmVzZW50TGVpc3VyZUNvZGUgPSBfcmVmLnByZXNlbnRMZWlzdXJlQ29kZSwgbWVyZ2VMZWlzdXJlQ29kZSA9IF9yZWYubWVyZ2VMZWlzdXJlQ29kZSwgY2xvc2VXaW5kb3cgPSBfcmVmLmNsb3NlV2luZG93LCBtYXJrdXBCdXR0b25zID0gX3JlZi5tYXJrdXBCdXR0b25zLCBFU0MgPSBfcmVmLkVTQywgSE9NRSA9IF9yZWYuSE9NRSwgRU5EID0gX3JlZi5FTkQsIFBBR0VfVVAgPSBfcmVmLlBBR0VfVVAsIFBBR0VfRE9XTiA9IF9yZWYuUEFHRV9ET1dOLCBMRUZUX0FSUk9XID0gX3JlZi5MRUZUX0FSUk9XLCBSSUdIVF9BUlJPVyA9IF9yZWYuUklHSFRfQVJST1csIFVQX0FSUk9XID0gX3JlZi5VUF9BUlJPVywgRE9XTl9BUlJPVyA9IF9yZWYuRE9XTl9BUlJPVywgYXJyb3dzID0gX3JlZi5hcnJvd3M7XG5cbiAgUSA9IDgxO1xuXG4gIHdpbmRvdy5tYXJrdXAgPSBmdW5jdGlvbihtZCkge1xuICAgIHZhciBtYWluZG9jLCBub2RlcywgX3JlZjE7XG5cbiAgICBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1ttYWluZG9jXScpO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG1haW5kb2MgPSBjcmVhdGVOb2RlKFwiPGRpdiBtYWluZG9jPjwvZGl2PlwiKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKG1haW5kb2MsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICBub2RlcyA9IFttYWluZG9jXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWFpbmRvYyA9IG5vZGVzWzBdO1xuICAgIH1cbiAgICBtZCA9ICgoX3JlZjEgPSBtZCAhPSBudWxsID8gbWQucmVwbGFjZSgvXFxyXFxuL21nLCAnXFxuJykgOiB2b2lkIDApICE9IG51bGwgPyBfcmVmMSA6IG1haW5kb2MuaW5uZXJIVE1MLnJlcGxhY2UoL15cXHMqPCEtLSovLCAnJykucmVwbGFjZSgvLS0+XFxzKlxcbiovbSwgJycpKS50cmltKCk7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRlQ29udHJvbHMnKTtcbiAgICBtYXJrdXBTbGlkZXMobWFpbmRvYywgbWQpO1xuICAgIHJldHVybiBpbnNlcnRDb250cm9scyhtYWluZG9jKTtcbiAgfTtcblxuICBsYXN0U2xpZGUgPSBudWxsO1xuXG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlLmVycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKFwiUkVNSU5ERVI6IEluY29tcGF0aWJpbGl0eTogdXNpbmcgLXdlYmtpdC1jYWxjXCIpLnN0YWNrKTtcbiAgICB9XG4gIH1cblxuICBzbGlkZVBhdCA9IC9eKFxcKlxcKlxcKlteXFxuXSpcXG4oPzotLT9cXG4pPykvbTtcblxuICBzbGlkZU5hbWUgPSAvXlxcKlxcKlxcKihbXlxcbl0qKVxcbig/Oi0tP1xcbik/L207XG5cbiAgc2xpZGluZyA9IGZhbHNlO1xuXG4gIG1hcmt1cFNsaWRlcyA9IGZ1bmN0aW9uKGVsLCBtZCkge1xuICAgIHZhciBkaXYsIGhhc0NvZGUsIHNsaWRlcztcblxuICAgIGhhc0NvZGUgPSBtYXJrdXBTbGlkZUNvbnRlbnQoZWwsIG1kKTtcbiAgICBzbGlkZXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdbbGVpc3VyZVNlY3Rpb25dJyk7XG4gICAgaWYgKHNsaWRlcy5sZW5ndGggPD0gKGVsLnF1ZXJ5U2VsZWN0b3IoJ1tsZWlzdXJlU2VjdGlvbj1cIkxlaXN1cmUgQ29udHJvbHNcIl0nKSA/IDIgOiAxKSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwib25lU2xpZGVcIik7XG4gICAgfVxuICAgIGRpdiA9IGNyZWF0ZU5vZGUoXCI8ZGl2IGNsYXNzPSdzbGlkZS1jb250cm9scyc+XFxuICA8ZGl2IGlkPSdzbGlkZS1raWxsYnV0dG9uJyBvbmNsaWNrPSd0b2dnbGVTbGlkZVNob3coKScgc3R5bGU9J2Zsb2F0OiByaWdodCc+PGJ1dHRvbj5TbGlkZXM8L2J1dHRvbj48L2Rpdj5cXG4gIDxkaXYgaWQ9J3NsaWRlLW51bScgc3R5bGU9J2Zsb2F0OiByaWdodDsgbWFyZ2luLXJpZ2h0OiAxMHB4Jz48L2Rpdj5cXG48L2Rpdj5cIik7XG4gICAgbWFya3VwQnV0dG9ucyhkaXYpO1xuICAgIGVsLmFwcGVuZENoaWxkKGRpdik7XG4gICAgaWYgKGxvY2F0aW9uLnNlYXJjaCAmJiBfLmZpbmQobG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCcmJyksIChmdW5jdGlvbihwKSB7XG4gICAgICByZXR1cm4gcC5tYXRjaCgvXnNsaWRlcz0vKTtcbiAgICB9KSkpIHtcbiAgICAgIHNsaWRpbmcgPSB0cnVlO1xuICAgICAgc2hvd1NsaWRlKCQoY2hvb3NlU2xpZGUoKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3Njcm9sbCcpO1xuICAgIH1cbiAgICByZXR1cm4gaGFzQ29kZTtcbiAgfTtcblxuICBtYXJrdXBTbGlkZUNvbnRlbnQgPSBmdW5jdGlvbihlbCwgbWQsIG5vTWFpbikge1xuICAgIHZhciBjb250ZW50LCBoYXNDb2RlLCBpLCBtLCBwLCBwYWdlVHlwZSwgcGFnZXMsIF9pLCBfcmVmMSwgX3JlZjI7XG5cbiAgICBwYWdlcyA9IG1kLnNwbGl0KHNsaWRlUGF0KTtcbiAgICBoYXNDb2RlID0gZmFsc2U7XG4gICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnc2xpZGUtY29udGFpbmVyJyk7XG4gICAgICBlbC5pbm5lckhUTUwgPSAnJztcbiAgICAgIGJpbmRTbGlkZXIoKTtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZG9jJyk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoID09PSAzICYmICFwYWdlc1swXSAmJiAhcGFnZXNbMl0pIHtcbiAgICAgICAgcGFnZXNbMl0gPSAnXFxuJztcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZjEgPSBwYWdlcy5sZW5ndGg7IF9pIDwgX3JlZjE7IGkgPSBfaSArPSAyKSB7XG4gICAgICAgIHAgPSBwYWdlc1tpXTtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICBwYWdlVHlwZSA9IGkgPiAwID8gKG0gPSAoX3JlZjIgPSBwYWdlc1tpIC0gMV0ubWF0Y2goc2xpZGVQYXQpKSAhPSBudWxsID8gX3JlZjJbMV0gOiB2b2lkIDAsIG0ubWF0Y2goL1xcbi1cXG4vKSA/IFsnY29udGludWF0aW9uJywgJ2hpZGRlblBhZ2UnXSA6IG0ubWF0Y2goL1xcbi0tXFxuLykgPyBbJ2hpZGRlblBhZ2UnLCAnc2VjcmV0UGFnZSddIDogW10pIDogW107XG4gICAgICAgICAgY29udGVudCA9IG1ha2VTbGlkZURpdihlbCwgcGFnZVR5cGUsIChpID4gMCA/IHBhZ2VzW2kgLSAxXS5tYXRjaChzbGlkZU5hbWUpWzFdLnRyaW0oKSA6ICdNYWluJykpO1xuICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaGFzQ29kZSA9IChtYXJrdXBFbGVtZW50KGNvbnRlbnQsIHBhZ2VzW2kgLSAxXSArIHApKSB8fCBoYXNDb2RlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoYXNDb2RlID0gKG1hcmt1cEVsZW1lbnQoY29udGVudCwgJyoqKlxcbicgKyBwKSkgfHwgaGFzQ29kZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFkU2xpZGUoY29udGVudCwgKGkgPiAwID8gcGFnZXNbaSAtIDFdIDogJyoqKlxcbicpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50ID0gbWFrZVNsaWRlRGl2KGVsLCBbJ3BhZ2UnXSwgJ01haW4nKTtcbiAgICAgIHdoaWxlIChlbC5maXJzdENoaWxkICE9PSBjb250ZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbC5maXJzdENoaWxkKTtcbiAgICAgIH1cbiAgICAgIGhhc0NvZGUgPSBtYXJrdXBFbGVtZW50KGNvbnRlbnQsIG1kKTtcbiAgICAgIHBhZFNsaWRlKGNvbnRlbnQsICcqKipcXG4nKTtcbiAgICAgIGlmIChub01haW4pIHtcbiAgICAgICAgdW53cmFwQ29udGVudChjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhc0NvZGU7XG4gIH07XG5cbiAgcGFkU2xpZGUgPSBmdW5jdGlvbihjb250ZW50LCBoZWFkZXIpIHtcbiAgICB2YXIgZGl2LCByYW5nZTtcblxuICAgIGlmICghY29udGVudC5maXJzdENoaWxkIHx8IGlzTGVpc3VyZUNvZGUoY29udGVudC5maXJzdENoaWxkKSkge1xuICAgICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcmFuZ2Uuc2V0U3RhcnQoY29udGVudCwgMCk7XG4gICAgICByYW5nZS5zZXRFbmQoY29udGVudCwgMCk7XG4gICAgICBkaXYgPSBtYWtlTWFya3VwRGl2KHJhbmdlLCBoZWFkZXIpO1xuICAgICAgZGl2LmFwcGVuZENoaWxkKGNyZWF0ZU5vZGUoJzxicj4nKSk7XG4gICAgfVxuICAgIGlmIChpc0xlaXN1cmVDb2RlKGNvbnRlbnQubGFzdENoaWxkKSkge1xuICAgICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihjb250ZW50Lmxhc3RDaGlsZCk7XG4gICAgICByYW5nZS5zZXRFbmRBZnRlcihjb250ZW50Lmxhc3RDaGlsZCk7XG4gICAgICBkaXYgPSBtYWtlTWFya3VwRGl2KHJhbmdlLCAnXFxuJyk7XG4gICAgICByZXR1cm4gZGl2LmFwcGVuZENoaWxkKGNyZWF0ZU5vZGUoJzxicj4nKSk7XG4gICAgfVxuICB9O1xuXG4gIHVud3JhcENvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIGVsLCBzZWN0aW9uO1xuXG4gICAgc2VjdGlvbiA9IGNvbnRlbnQucGFyZW50Tm9kZTtcbiAgICBlbCA9IHNlY3Rpb24ucGFyZW50Tm9kZTtcbiAgICBlbC5pbnNlcnRCZWZvcmUoY29udGVudCwgc2VjdGlvbik7XG4gICAgcmVtb3ZlKHNlY3Rpb24pO1xuICAgIHJldHVybiB1bndyYXAoY29udGVudCk7XG4gIH07XG5cbiAgbWFrZVNsaWRlRGl2ID0gZnVuY3Rpb24oZWwsIHBhZ2VUeXBlcywgdGl0bGUpIHtcbiAgICB2YXIgY29udGVudCwgZGl2LCBwYWdlVHlwZSwgc2VjdGlvblRpdGxlLCBfaSwgX2xlbjtcblxuICAgIGxhc3RTbGlkZSA9IGRpdiA9IGNyZWF0ZU5vZGUoXCI8ZGl2IGNsYXNzPSdsZWlzdXJlX3BhZ2UnPjwvZGl2PlwiKTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdsZWlzdXJlU2VjdGlvbicsIHRpdGxlKTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdkb2MnLCAnJyk7XG4gICAgZGl2LnNldEF0dHJpYnV0ZSgnc2xpZGUnLCAnJyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3NsaWRlJyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3VpLWNvcm5lci1hbGwnKTtcbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgndWktd2lkZ2V0Jyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3VpLXdpZGdldC1jb250ZW50Jyk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBwYWdlVHlwZXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIHBhZ2VUeXBlID0gcGFnZVR5cGVzW19pXTtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKHBhZ2VUeXBlKTtcbiAgICB9XG4gICAgZWwuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBzZWN0aW9uVGl0bGUgPSBjcmVhdGVOb2RlKFwiPGRpdiBjbGFzcz0ncGFnZVRpdGxlJz5cIiArIHRpdGxlICsgXCI8L2Rpdj5cIik7XG4gICAgc2VjdGlvblRpdGxlLnNldEF0dHJpYnV0ZSgnbGVpc3VyZW91dHB1dCcsICcnKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoc2VjdGlvblRpdGxlKTtcbiAgICBjb250ZW50ID0gY3JlYXRlTm9kZShcIjxkaXYgY2xhc3M9J3BhZ2VDb250ZW50Jz48L2Rpdj5cIik7XG4gICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgIHJldHVybiBjb250ZW50O1xuICB9O1xuXG4gIGNob29zZVNsaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhcmFtO1xuXG4gICAgcGFyYW0gPSBfLmZpbmQobG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCcmJyksIChmdW5jdGlvbihwKSB7XG4gICAgICByZXR1cm4gcC5tYXRjaCgvXnNsaWRlPS4qLyk7XG4gICAgfSkpO1xuICAgIGNvbnNvbGUubG9nKHBhcmFtKTtcbiAgICBpZiAocGFyYW0pIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW3NsaWRlPSdcIiArIChwYXJhbS5zcGxpdCgnPScpWzFdKSArIFwiJ11cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbWFpbmRvY10nKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG4gIH07XG5cbiAgb2xkU2xpZGUgPSAwO1xuXG4gIHdpbmRvdy50b2dnbGVTbGlkZVNob3cgPSBmdW5jdGlvbigpIHtcbiAgICBzbGlkaW5nID0gJChkb2N1bWVudC5ib2R5KS5pcygnLnNjcm9sbCcpO1xuICAgIGVuYWJsZVNsaWRlQ29udHJvbHModHJ1ZSk7XG4gICAgZW5hYmxlRWRpdGluZyh0cnVlKTtcbiAgICBpZiAoc2xpZGluZykge1xuICAgICAgJChkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcygnc2Nyb2xsJyk7XG4gICAgICByZXR1cm4gc2hvd1NsaWRlKG50aFNsaWRlKG9sZFNsaWRlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9sZFNsaWRlID0gJCgnLnNsaWRlLnNob3dpbmcnKS5hdHRyKCdzbGlkZScpO1xuICAgICAgaGlkZVNsaWRlKCQoJy5zbGlkZS5zaG93aW5nJykpO1xuICAgICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcygnc2Nyb2xsJyk7XG4gICAgICByZXR1cm4gJCgnI3NsaWRlLW51bScpLmh0bWwoJycpO1xuICAgIH1cbiAgfTtcblxuICBiaW5kU2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHNsaWRlS2V5TGlzdGVuZXIpO1xuICB9O1xuXG4gIHNsaWRlQ29udHJvbHMgPSBbUSwgRVNDLCBMRUZUX0FSUk9XLCBSSUdIVF9BUlJPVywgSE9NRSwgRU5ELCBQQUdFX1VQLCBQQUdFX0RPV05dO1xuXG4gIHNsaWRlQ29udHJvbHNFbmFibGVkID0gdHJ1ZTtcblxuICBlbmFibGVTbGlkZUNvbnRyb2xzID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICByZXR1cm4gc2xpZGVDb250cm9sc0VuYWJsZWQgPSBzdGF0ZTtcbiAgfTtcblxuICBwcmVzZW50U2xpZGUgPSBmdW5jdGlvbihzKSB7XG4gICAgaGlkZVNsaWRlKCQoJy5zbGlkZS5zaG93aW5nJykpO1xuICAgIHJldHVybiBzaG93U2xpZGUocyk7XG4gIH07XG5cbiAgZmlyc3RTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzbGlkZXMoKTtcbiAgfTtcblxuICBsYXN0U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2xpZGVzKCkubGFzdCgpO1xuICB9O1xuXG4gIHByZXZTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuO1xuXG4gICAgbiA9ICQoJy5zbGlkZS5zaG93aW5nJykucHJldkFsbCgnW3NsaWRlXScpLm5vdCgnW2xlaXN1cmVTZWN0aW9uPVwiTGVpc3VyZSBDb250cm9sc1wiXScpLm5vdCgnLmhpZGRlblBhZ2UnKS5ub3QoJy5zZWNyZXRQYWdlJyk7XG4gICAgaWYgKG4ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNsaWRlcygpO1xuICAgIH1cbiAgfTtcblxuICBuZXh0U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbjtcblxuICAgIG4gPSAkKCcuc2xpZGUuc2hvd2luZycpLm5leHRBbGwoJ1tzbGlkZV0nKS5ub3QoJ1tsZWlzdXJlU2VjdGlvbj1cIkxlaXN1cmUgQ29udHJvbHNcIl0nKS5ub3QoJy5oaWRkZW5QYWdlJykubm90KCcuc2VjcmV0UGFnZScpO1xuICAgIGlmIChuLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG47XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAkKCcuc2xpZGUuc2hvd2luZycpO1xuICAgIH1cbiAgfTtcblxuICBzbGlkZUtleUxpc3RlbmVyID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBjO1xuXG4gICAgaWYgKHNsaWRpbmcpIHtcbiAgICAgIHdpbmRvdy5ldnQgPSBlO1xuICAgICAgYyA9IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlIHx8IGUud2hpY2g7XG4gICAgICBpZiAoKF9faW5kZXhPZi5jYWxsKHNsaWRlQ29udHJvbHMsIGMpID49IDApICYmICEkKGUudGFyZ2V0KS5pcygnW2xlaXN1cmVub2RlPWNvZGVdLFtsZWlzdXJlbm9kZT1jb2RlXSAqJykgJiYgc2xpZGVDb250cm9sc0VuYWJsZWQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoYyA9PT0gRVNDKSB7XG4gICAgICAgICAgcmV0dXJuIHRvZ2dsZVNsaWRlU2hvdygpO1xuICAgICAgICB9IGVsc2UgaWYgKGMgPT09IFEpIHtcbiAgICAgICAgICByZXR1cm4gY2xvc2VXaW5kb3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcHJlc2VudFNsaWRlKCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICAgICAgY2FzZSBIT01FOlxuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdFNsaWRlKCk7XG4gICAgICAgICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0U2xpZGUoKTtcbiAgICAgICAgICAgICAgY2FzZSBMRUZUX0FSUk9XOlxuICAgICAgICAgICAgICBjYXNlIFBBR0VfVVA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXZTbGlkZSgpO1xuICAgICAgICAgICAgICBjYXNlIFJJR0hUX0FSUk9XOlxuICAgICAgICAgICAgICBjYXNlIFBBR0VfRE9XTjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dFNsaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkoKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHNsaWRlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKCdbc2xpZGVdJykubm90KCdbbGVpc3VyZVNlY3Rpb249XCJMZWlzdXJlIENvbnRyb2xzXCJdJykubm90KCcuaGlkZGVuUGFnZScpLm5vdCgnLnNlY3JldFBhZ2UnKTtcbiAgfTtcblxuICBudGhTbGlkZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gc2xpZGVzKCkuc2xpY2Uobik7XG4gIH07XG5cbiAgY291bnRTbGlkZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGNvdW50LCBuLCBzbGlkZSwgX2ksIF9sZW4sIF9yZWYxO1xuXG4gICAgbiA9IC0xO1xuICAgIGNvdW50ID0gMDtcbiAgICBfcmVmMSA9IHNsaWRlcygpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIHNsaWRlID0gX3JlZjFbX2ldO1xuICAgICAgY291bnQrKztcbiAgICAgIGlmIChzbGlkZSA9PT0gZWwpIHtcbiAgICAgICAgbiA9IGNvdW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW24sIGNvdW50XTtcbiAgfTtcblxuICBzaG93U2xpZGUgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBjb3VudCwgbiwgX3JlZjE7XG5cbiAgICBfcmVmMSA9IGNvdW50U2xpZGUoZWxbMF0pLCBuID0gX3JlZjFbMF0sIGNvdW50ID0gX3JlZjFbMV07XG4gICAgb2xkU2xpZGUgPSBuO1xuICAgICQoJyNzbGlkZS1udW0nKS5odG1sKFwiXCIgKyBuICsgXCIgLyBcIiArIGNvdW50KTtcbiAgICByZXR1cm4gJChlbCkuZmlyc3QoKS5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ3Nob3dpbmcnKTtcbiAgfTtcblxuICBoaWRlU2xpZGUgPSBmdW5jdGlvbihlbCkge1xuICAgIHJldHVybiAkKGVsKS5maXJzdCgpLmFkZENsYXNzKCdoaWRkZW4nKS5yZW1vdmVDbGFzcygnc2hvd2luZycpO1xuICB9O1xuXG4gIG1hcmt1cEVsZW1lbnQgPSBmdW5jdGlvbihlbCwgbWQpIHtcbiAgICB2YXIgY29kZSwgY29kZVBvcywgbGVuLCBsZXgsIG1hcmt1cCwgbm9kZSwgcHJldiwgcHJldkNvZGVQb3MsIHJhbmdlLCBzbGlkZSwgX2ksIF9sZW4sIF9yZWYxLCBfcmVmMiwgX3JlZjM7XG5cbiAgICBsZW4gPSBtZC5sZW5ndGg7XG4gICAgc2xpZGUgPSAoX3JlZjEgPSBtZC5tYXRjaChzbGlkZVBhdCkpICE9IG51bGwgPyBfcmVmMSA6ICcnO1xuICAgIF9yZWYyID0gd2luZG93Lm1hcmtlZCgoc2xpZGUgPyBtZC5zbGljZShzbGlkZVswXS5sZW5ndGgpIDogbWQpLCB7XG4gICAgICBzYXZlTGV4OiB0cnVlLFxuICAgICAgZ2ZtOiB0cnVlXG4gICAgfSksIG1hcmt1cCA9IF9yZWYyWzBdLCBsZXggPSBfcmVmMlsxXTtcbiAgICBlbC5pbm5lckhUTUwgPSBtYXJrdXAudHJpbSgpIHx8ICc8YnI+JztcbiAgICBwcmV2ID0gbnVsbDtcbiAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcHJldkNvZGVQb3MgPSAtMTtcbiAgICBjb2RlUG9zID0gMDtcbiAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvZGUnKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjNbX2ldO1xuICAgICAgd2hpbGUgKGxleFtjb2RlUG9zXS50eXBlICE9PSAnY29kZScpIHtcbiAgICAgICAgY29kZVBvcysrO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZS50YWdOYW1lICE9PSAnUFJFJykge1xuICAgICAgICBjb2RlID0gbm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgIGNvZGUuaW5uZXJIVE1MID0gbm9kZS5pbm5lckhUTUw7XG4gICAgICB9XG4gICAgICBjb2RlLnNldEF0dHJpYnV0ZSgnbm9MZWlzdXJlQmFyJywgJycpO1xuICAgICAgY29kZS5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJywgJ2NvZGUnKTtcbiAgICAgIGNvZGUubWQgPSBsZXhbY29kZVBvc10udGV4dDtcbiAgICAgIGlmIChjb2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCAhPT0gY29kZSkge1xuICAgICAgICBpZiAocHJldiA9PT0gbnVsbCB8fCBwcmV2LnBhcmVudE5vZGUgIT09IGNvZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KGNvZGUucGFyZW50Tm9kZSwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihwcmV2KTtcbiAgICAgICAgfVxuICAgICAgICByYW5nZS5zZXRFbmRCZWZvcmUoY29kZSk7XG4gICAgICAgIG1ha2VNYXJrdXBEaXYocmFuZ2UsIG1kLnN1YnN0cmluZygocHJldkNvZGVQb3MgPT09IC0xID8gMCA6IGxlbiAtIGxleFtwcmV2Q29kZVBvc10ucmVtYWluKSwgbGVuIC0gbGV4W2NvZGVQb3NdLnJlbWFpbiAtIGxleFtjb2RlUG9zXS50ZXh0TGVuKSk7XG4gICAgICB9XG4gICAgICBwcmV2Q29kZVBvcyA9IGNvZGVQb3M7XG4gICAgICBjb2RlUG9zKys7XG4gICAgICBwcmV2ID0gY29kZTtcbiAgICB9XG4gICAgaWYgKHByZXZDb2RlUG9zID4gLTEpIHtcbiAgICAgIGlmIChsZXhbcHJldkNvZGVQb3NdLnJlbWFpbiA+IDApIHtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHByZXYucGFyZW50Tm9kZSk7XG4gICAgICAgIHJhbmdlLnNldFN0YXJ0QWZ0ZXIocHJldik7XG4gICAgICAgIG1ha2VNYXJrdXBEaXYocmFuZ2UsIG1kLnN1YnN0cmluZyhsZW4gLSBsZXhbcHJldkNvZGVQb3NdLnJlbWFpbikpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoZWwpO1xuICAgICAgbWFrZU1hcmt1cERpdihyYW5nZSwgbWQpO1xuICAgIH1cbiAgICByZXR1cm4gcHJldkNvZGVQb3MgPiAtMTtcbiAgfTtcblxuICBoYW5kbGVJbnRlcm5hbFNlY3Rpb25zID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciBiZWZvcmUsIGlubmVyU2VjdGlvbnMsIG1hcmtlciwgbm9kZSwgbm9kZUNvbnRlbnQsIG5vZGVUaXRsZSwgcHJldiwgc2VjdGlvbiwgc2VjdGlvbkhvbGRlciwgdGl0bGUsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYxO1xuXG4gICAgc2VjdGlvbiA9IGNvbnRlbnQucGFyZW50Tm9kZTtcbiAgICBzZWN0aW9uSG9sZGVyID0gc2VjdGlvbi5wYXJlbnROb2RlO1xuICAgIGlubmVyU2VjdGlvbnMgPSBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsZWlzdXJlU2VjdGlvbl0nKTtcbiAgICBpZiAoaW5uZXJTZWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICghKChfcmVmMSA9IGNvbnRlbnQuZmlyc3RDaGlsZC5tZCkgIT0gbnVsbCA/IF9yZWYxLm1hdGNoKC9eXFwqXFwqXFwqLykgOiB2b2lkIDApKSB7XG4gICAgICAgIGlmICghc2VjdGlvbi5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgICByZXR1cm4gc2VjdGlvbi5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVTZWN0aW9uJywgJ01haW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2ID0gc2VjdGlvbi5wcmV2aW91c1NpYmxpbmcucXVlcnlTZWxlY3RvcignLnBhZ2VDb250ZW50Jyk7XG4gICAgICAgICAgd2hpbGUgKGNvbnRlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgbWVyZ2VVcChjb250ZW50LmZpcnN0Q2hpbGQsIHByZXYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVtb3ZlKHNlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpdGxlID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVTZWN0aW9uJyk7XG4gICAgICBiZWZvcmUgPSBmYWxzZTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gaW5uZXJTZWN0aW9ucy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBub2RlID0gaW5uZXJTZWN0aW9uc1tfaV07XG4gICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKSA9PT0gdGl0bGUpIHtcbiAgICAgICAgICBiZWZvcmUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiZWZvcmUgPSBiZWZvcmUgfHwgKCFpbm5lclNlY3Rpb25zWzBdLnByZXZpb3VzU2libGluZyk7XG4gICAgICBtYXJrZXIgPSBzZWN0aW9uO1xuICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gaW5uZXJTZWN0aW9ucy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgbm9kZSA9IGlubmVyU2VjdGlvbnNbX2pdO1xuICAgICAgICBub2RlVGl0bGUgPSBub2RlLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKTtcbiAgICAgICAgbm9kZUNvbnRlbnQgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5wYWdlQ29udGVudCcpO1xuICAgICAgICBpZiAobm9kZVRpdGxlID09PSB0aXRsZSB8fCAobm9kZS5wcmV2aW91c1NpYmxpbmcgJiYgbm9kZVRpdGxlID09PSAnTWFpbicpKSB7XG4gICAgICAgICAgaWYgKG5vZGVUaXRsZSA9PT0gdGl0bGUpIHtcbiAgICAgICAgICAgIGJlZm9yZSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aGlsZSAobm9kZUNvbnRlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgY29udGVudC5pbnNlcnRCZWZvcmUobm9kZUNvbnRlbnQuZmlyc3RDaGlsZCwgbm9kZSk7XG4gICAgICAgICAgICBtZXJnZUxlaXN1cmVDb2RlKG5vZGUucHJldmlvdXNTaWJsaW5nLCBub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVtb3ZlKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdoaWxlIChub2RlLm5leHRTaWJsaW5nICYmICFub2RlLm5leHRTaWJsaW5nLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKSkge1xuICAgICAgICAgICAgbWVyZ2VVcChub2RlLm5leHRTaWJsaW5nLCBub2RlQ29udGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhZFNsaWRlKG5vZGVDb250ZW50LCBcIioqKlwiICsgbm9kZVRpdGxlICsgXCJcXG5cIik7XG4gICAgICAgICAgaWYgKGJlZm9yZSkge1xuICAgICAgICAgICAgc2VjdGlvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBzZWN0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VjdGlvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBtYXJrZXIubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgbWFya2VyID0gbm9kZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghY29udGVudC5maXJzdENoaWxkKSB7XG4gICAgICAgIHJldHVybiByZW1vdmUoc2VjdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFkU2xpZGUoY29udGVudCwgXCIqKipcIiArIHRpdGxlICsgXCJcXG5cIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG1lcmdlVXAgPSBmdW5jdGlvbihlbCwgbmV3UGFyZW50KSB7XG4gICAgbmV3UGFyZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgICByZXR1cm4gbWVyZ2VMZWlzdXJlQ29kZShuZXdQYXJlbnQubGFzdENoaWxkLnByZXZpb3VzU2libGluZywgbmV3UGFyZW50Lmxhc3RDaGlsZCk7XG4gIH07XG5cbiAgbWFrZVNlY3Rpb24gPSBmdW5jdGlvbih0aXRsZSwgbm9kZSwgbmV4dCkge1xuICAgIHZhciBkaXY7XG5cbiAgICBkaXYgPSBjcmVhdGVOb2RlKFwiPGRpdiBsZWlzdXJlU2VjdGlvbj0nXCIgKyB0aXRsZSArIFwiJz48L2Rpdj5cIik7XG4gICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkaXYsIG5vZGUpO1xuICAgIHdoaWxlIChkaXYubmV4dFNpYmxpbmcgJiYgZGl2Lm5leHRTaWJsaW5nICE9PSBuZXh0KSB7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2Lm5leHRTaWJsaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcblxuICBtYWtlTWFya3VwRGl2ID0gZnVuY3Rpb24ocmFuZ2UsIG1kKSB7XG4gICAgdmFyIGRpdjtcblxuICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJhbmdlLnN1cnJvdW5kQ29udGVudHMoZGl2KTtcbiAgICBkaXYubWQgPSBtZDtcbiAgICBiaW5kTWFya3VwRGl2KGRpdik7XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcblxuICBlZGl0aW5nRW5hYmxlZCA9IHRydWU7XG5cbiAgZW5hYmxlRWRpdGluZyA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgcmV0dXJuIGVkaXRpbmdFbmFibGVkID0gc3RhdGU7XG4gIH07XG5cbiAgYmluZE1hcmt1cERpdiA9IGZ1bmN0aW9uKGRpdikge1xuICAgIHZhciBlZGl0aW5nO1xuXG4gICAgZGl2LmJvdW5kID0gdHJ1ZTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdsZWlzdXJlTm9kZScsICdtYXJrZG93bicpO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICdmYWxzZScpO1xuICAgIGVkaXRpbmcgPSBmYWxzZTtcbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIWVkaXRpbmcgJiYgZWRpdGluZ0VuYWJsZWQpIHtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQodGV4dE5vZGUoZGl2Lm1kKSk7XG4gICAgICAgIGRpdi5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZS13cmFwJztcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ3RydWUnKTtcbiAgICAgICAgZWRpdGluZyA9IHRydWU7XG4gICAgICAgIGRpdi5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnZWRpdGluZycsICd0cnVlJyk7XG4gICAgICAgIHJldHVybiBkaXYuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgYnIsIHIsIHM7XG5cbiAgICAgIGlmIChlZGl0aW5nKSB7XG4gICAgICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHIgPSBzLmdldFJhbmdlQXQoMCk7XG4gICAgICAgIGlmICgoZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IEVOVEVSKSB7XG4gICAgICAgICAgYnIgPSB0ZXh0Tm9kZSgnXFxuJyk7XG4gICAgICAgICAgci5pbnNlcnROb2RlKGJyKTtcbiAgICAgICAgICByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICByLnNldFN0YXJ0KGJyLCAxKTtcbiAgICAgICAgICBzLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgIHMuYWRkUmFuZ2Uocik7XG4gICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkaXYuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBmaXJzdCwgZnJhZywgbGFzdCwgbm9kZSwgcGFyZW50LCBwcmV2U2VjdGlvbiwgciwgc2Nyb2xsLCBfaSwgX2xlbiwgX3JlZjEsIF9yZWYyO1xuXG4gICAgICBpZiAoZWRpdGluZykge1xuICAgICAgICBzY3JvbGwgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgZGl2LnN0eWxlLndoaXRlU3BhY2UgPSAnJztcbiAgICAgICAgZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2VkaXRpbmcnKTtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgIHByZXZTZWN0aW9uID0gKF9yZWYxID0gZGl2LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcpICE9IG51bGwgPyBfcmVmMS5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVTZWN0aW9uJykgOiB2b2lkIDA7XG4gICAgICAgIHBhcmVudCA9IGRpdi5wYXJlbnROb2RlO1xuICAgICAgICBpZiAobWFya3VwU2xpZGVDb250ZW50KGRpdiwgZGl2LnRleHRDb250ZW50LCBwcmV2U2VjdGlvbiAmJiBwcmV2U2VjdGlvbiAhPT0gJ0xlaXN1cmUgQ29udHJvbHMnKSkge1xuICAgICAgICAgIF9yZWYyID0gZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbGVpc3VyZW5vZGU9J2NvZGUnXVwiKTtcbiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBub2RlID0gX3JlZjJbX2ldO1xuICAgICAgICAgICAgcHJlc2VudExlaXN1cmVDb2RlKG5vZGUsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXYudGV4dENvbnRlbnQudHJpbSgpID09PSAnJykge1xuICAgICAgICAgIGNsZWFuRW1wdHlOb2RlcyhkaXYpO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhkaXYpO1xuICAgICAgICBmcmFnID0gci5leHRyYWN0Q29udGVudHMoKTtcbiAgICAgICAgZmlyc3QgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG4gICAgICAgIGxhc3QgPSBmcmFnLmNoaWxkTm9kZXNbZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGZyYWcsIGRpdik7XG4gICAgICAgIG1lcmdlTGVpc3VyZUNvZGUocHJldmlvdXNTaWJsaW5nKGZpcnN0KSwgZmlyc3QpO1xuICAgICAgICBtZXJnZUxlaXN1cmVDb2RlKGxhc3QsIG5leHRTaWJsaW5nKGxhc3QpKTtcbiAgICAgICAgaGFuZGxlSW50ZXJuYWxTZWN0aW9ucyhwYXJlbnQpO1xuICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gc2Nyb2xsO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBOb3RlYm9vay5tYXJrdXBFbGVtZW50ID0gbWFya3VwRWxlbWVudDtcblxuICBOb3RlYm9vay5lbmFibGVTbGlkZUNvbnRyb2xzID0gZW5hYmxlU2xpZGVDb250cm9scztcblxuICBOb3RlYm9vay5lbmFibGVFZGl0aW5nID0gZW5hYmxlRWRpdGluZztcblxuICBOb3RlYm9vay5wcmVzZW50U2xpZGUgPSBwcmVzZW50U2xpZGU7XG5cbiAgTm90ZWJvb2suZmlyc3RTbGlkZSA9IGZpcnN0U2xpZGU7XG5cbiAgTm90ZWJvb2subGFzdFNsaWRlID0gbGFzdFNsaWRlO1xuXG4gIE5vdGVib29rLnByZXZTbGlkZSA9IHByZXZTbGlkZTtcblxuICBOb3RlYm9vay5uZXh0U2xpZGUgPSBuZXh0U2xpZGU7XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1tZC5tYXBcbiovXG4iLCIoZnVuY3Rpb24oZ2xvYmFsKXsvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4vKlxuIyB1c2UgYW4gZWxlbWVudCBhcyBhIExlaXN1cmUgbm90ZWJvb2tcbiMgT25seSBydW5zIGluIHRoZSBjb250ZXh0IG9mIGEgYnJvd3NlclxuKi9cblxuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBCUywgREVMLCBET1dOX0FSUk9XLCBFTkQsIEVOVEVSLCBFU0MsIEhPTUUsIExFRlRfQVJST1csIExlaXN1cmVfYW5ubywgTmlsLCBQQUdFX0RPV04sIFBBR0VfVVAsIFJJR0hUX0FSUk9XLCBUQUIsIFVQX0FSUk9XLCBVUkksIFh1cywgYWNjZXB0Q29kZSwgYWRkQm94Q2xhc3NlcywgYWRkRGVmQ29udHJvbHMsIGFkZHNMaW5lLCBhbGxvd0V2ZW50cywgYXJyb3dzLCBhdXRvUnVuLCBiYXNlRWxlbWVudHMsIGJhc2VTdHJva2VXaWR0aCwgYmFzaWNDYWxsLCBiaW5kQWxsLCBiaW5kTm90ZWJvb2ssIGJvb3ROb3RlYm9vaywgYm94LCBib3hDbGFzc2VzLCBidXR0b25DbGFzc2VzLCBjLCBjaGFpbkV2YWxOb2RlcywgY2hhbmdlVGhlbWUsIGNoYW5nZVZpZXcsIGNoZWNrRGVsZXRlRXhwciwgY2hlY2tIaWRlU291cmNlLCBjaGVja011dGF0ZUZyb21Nb2RpZmljYXRpb24sIGNsZWFuRW1wdHlOb2RlcywgY2xlYW5PdXRwdXQsIGNsZWFyQXN0LCBjbGVhck91dHB1dEJveCwgY2xlYXJVcGRhdGVzLCBjbGlja1Rlc3QsIGNsb3NlV2luZG93LCBjb2RlQm94LCBjb2RlRm9jdXMsIGNvZGVTcGFuLCBjb25maWd1cmVTYXZlTGluaywgY29udGludWVSYW5nZVBvc2l0aW9uLCBjcmVhdGVGcmFnbWVudCwgY3JlYXRlTm9kZSwgY3JlYXRlUGVlciwgY3JlYXRlU2xpZGVyLCBkZWJ1ZywgZGVmYXVsdEVudiwgZGVmaW5lLCBkZWxheSwgZG9jRm9jdXMsIGVudkZvciwgZXJyU3RyaW5nLCBlc2NhcGVIdG1sLCBldmFsQm94LCBldmFsRG9jLCBldmFsRG9jQ29kZSwgZXZhbE5vZGVzLCBldmFsT3V0cHV0LCBldmFsdWF0aW5nLCBldmFsdWF0aW9uUXVldWUsIGV2ZW50LCBmaWxlbmFtZSwgZmluZEN1cnJlbnRDb2RlSG9sZGVyLCBmaW5kRGVmcywgZmluZFVwZGF0ZVNlbGVjdG9yLCBmb2N1c0JveCwgZm9sZExlZnQsIGdlbiwgZ2V0QW5ub0JvZHksIGdldEFubm9EYXRhLCBnZXRBbm5vTmFtZSwgZ2V0QXN0LCBnZXRCb3gsIGdldERlZk5hbWUsIGdldEVsZW1lbnRDb2RlLCBnZXRFbGVtZW50cywgZ2V0RXhwclNvdXJjZSwgZ2V0SHRtbCwgZ2V0TUREb2N1bWVudCwgZ2V0TWF4U3Ryb2tlV2lkdGgsIGdldFBhcnNlRXJyLCBnZXRSYW5nZVBvc2l0aW9uLCBnZXRSYW5nZVRleHQsIGdldFJhbmdlcywgZ2V0UmVmTmFtZSwgZ2V0U3ZnRWxlbWVudCwgZ2V0VHlwZSwgZ3JwLCBoYW5kbGVLZXksIGhhc0Z1bmMsIGhhc01vbmFkT3V0cHV0LCBoZWFkLCBoaWRkZW5QYXQsIGhpZGVDb250cm9sU2VjdGlvbiwgaGlkZU91dHB1dFNvdXJjZSwgaGlkZVNsaWRlciwgaGlnaGxpZ2h0Tm90ZWJvb2tGdW5jdGlvbiwgaGlnaGxpZ2h0UG9zaXRpb24sIGlkLCBpZGVudGl0eSwgaWdub3JlRGVsZXRlT3V0cHV0Qm94LCBpbml0LCBpbml0Tm90ZWJvb2ssIGluc2VydENvbnRyb2xzLCBpc0RlZiwgaXNMZWlzdXJlQ29kZSwgaXNNb25hZCwgaXNPdXRwdXQsIGlzU2xpZGVyLCBsYXp5LCBsZWlzdXJlQ29udGV4dFN0cmluZywgbGluZVBhdCwgbGlua1NvdXJjZSwgbG9hZFByb2dyYW0sIGxvYWRlZCwgbHosIG1ha2VJZCwgbWFrZUxhYmVsLCBtYWtlTW9uYWQsIG1ha2VPcHRpb24sIG1ha2VPdXRwdXRCb3gsIG1ha2VPdXRwdXRDb250cm9scywgbWFrZVJhbmdlLCBtYWtlU3luY01vbmFkLCBtYWtlVGVzdEJveCwgbWFrZVRlc3RDYXNlLCBtYXJrUGFydGlhbEFwcGxpZXMsIG1hcmt1cEJ1dHRvbiwgbWFya3VwQnV0dG9ucywgbWFya3VwRGVmcywgbWVyZ2VMZWlzdXJlQ29kZSwgbmFtZVN1YiwgbmV4dElkLCBuZXh0U2libGluZywgbm9kZUVuZCwgbm9kZUZvciwgbm9ucHJpbnRhYmxlLCBudW1iZXJFbmQsIG51bWJlclN0YXJ0LCBvbGRCcmFja2V0cywgb3duZXIsIHBhdGNoRnVuY0FzdCwgcGVlciwgcGVlckdldERvY3VtZW50LCBwZWVyR2V0RnVuY3Rpb25zLCBwZWVyTm90aWZ5U2VsZWN0aW9uLCBwb3N0TG9hZFF1ZXVlLCBwcmVwRXhwciwgcHJlc2VudExlaXN1cmVDb2RlLCBwcmVzZW50VmFsdWUsIHByZXZpb3VzQm94UmFuZ2VJbnRlcm5hbCwgcHJldmlvdXNCb3hSYW5nZVN0YXJ0LCBwcmV2aW91c1NpYmxpbmcsIHByaW1TdmdNZWFzdXJlLCBwcmltY29uY2F0Tm9kZXMsIHByaW50YWJsZSwgcHJpbnRhYmxlQ29udHJvbENoYXJhY3RlcnMsIHByb2Nlc3NMaW5lLCBwc2duLCBxdWV1ZUFmdGVyTG9hZCwgcmVtb3ZlLCByZW1vdmVCb3hDbGFzc2VzLCByZW1vdmVPbGREZWZzLCByZXBsYWNlQ29udGVudHMsIHJlcGxhY2VSYW5nZSwgcmVwbGljYXRlLCByZXEsIHJlc29sdmUsIHJvb3QsIHJ1bkF1dG8sIHJ1bk1vbmFkLCBydW5UZXN0LCBydW5UZXN0cywgcnosIHNhdmVQcm9ncmFtLCBzZXRBc3QsIHNldEZpbGVuYW1lLCBzZXRNaW5NYXgsIHNldFNuYXBwZXIsIHNldFVwZGF0ZSwgc2hvd0FzdCwgc2hvd0Vycm9yLCBzaG93RmlsZW5hbWUsIHNob3dGaWxlbmFtZXMsIHNob3dPdXRwdXRTb3VyY2UsIHNob3dSZXN1bHQsIHNob3dTbGlkZXJCdXR0b24sIHNob3dTb3VyY2UsIHNraXBMZWZ0T3Zlck91dHB1dEJveCwgc2xpZGVyLCBzbmFwc2hvdCwgc3ZnQmV0dGVyTWVhc3VyZSwgc3ZnTWVhc3VyZSwgc3ZnTWVhc3VyZVRleHQsIHRhaWwsIHRlc3RQYXQsIHRleHROb2RlLCB0b0RlZkJveCwgdG9FeHByQm94LCB0b2dnbGVFZGl0LCB0cmFuc2Zvcm1TdHJva2VXaWR0aCwgdHJhbnNmb3JtZWRQb2ludCwgdW53cmFwLCB1cGRhdGUsIHVwZGF0ZVBhdCwgd3JhcFJhbmdlLCB4dXNFbnYsIF8sIF9yZWYsIF9yZWYxLCBfcmVmMixcbiAgICBfX3NsaWNlID0gW10uc2xpY2UsXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgY29uc29sZS5sb2coXCJMT0FESU5HIE5PVEVCT09LXCIpO1xuXG4gIF9yZWYgPSByb290ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Jhc2UnKSwgcmVzb2x2ZSA9IF9yZWYucmVzb2x2ZSwgbGF6eSA9IF9yZWYubGF6eTtcblxuICByeiA9IHJlc29sdmU7XG5cbiAgbHogPSBsYXp5O1xuXG4gIF9yZWYxID0gcm9vdCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9hc3QnKSwgbmFtZVN1YiA9IF9yZWYxLm5hbWVTdWIsIGdldFJlZk5hbWUgPSBfcmVmMS5nZXRSZWZOYW1lLCBkZWZpbmUgPSBfcmVmMS5kZWZpbmUsIGZvbGRMZWZ0ID0gX3JlZjEuZm9sZExlZnQsIE5pbCA9IF9yZWYxLk5pbCwgZ2V0VHlwZSA9IF9yZWYxLmdldFR5cGUsIGdldEFubm9OYW1lID0gX3JlZjEuZ2V0QW5ub05hbWUsIGdldEFubm9EYXRhID0gX3JlZjEuZ2V0QW5ub0RhdGEsIGdldEFubm9Cb2R5ID0gX3JlZjEuZ2V0QW5ub0JvZHksIExlaXN1cmVfYW5ubyA9IF9yZWYxLkxlaXN1cmVfYW5ubztcblxuICBfcmVmMiA9IHJlcXVpcmUoJy4vcnVudGltZScpLCBpc01vbmFkID0gX3JlZjIuaXNNb25hZCwgcnVuTW9uYWQgPSBfcmVmMi5ydW5Nb25hZCwgbWFrZU1vbmFkID0gX3JlZjIubWFrZU1vbmFkLCBtYWtlU3luY01vbmFkID0gX3JlZjIubWFrZVN5bmNNb25hZCwgaWRlbnRpdHkgPSBfcmVmMi5pZGVudGl0eSwgZGVmYXVsdEVudiA9IF9yZWYyLmRlZmF1bHRFbnYsIGJhc2ljQ2FsbCA9IF9yZWYyLmJhc2ljQ2FsbDtcblxuICBnZW4gPSByZXF1aXJlKCcuL2dlbicpLmdlbjtcblxuICBVUkkgPSB3aW5kb3cuVVJJO1xuXG4gIFh1cyA9IHdpbmRvdy5YdXM7XG5cbiAgJCA9IHdpbmRvdy4kO1xuXG4gIF8gPSByZXF1aXJlKCcuL2xvZGFzaC5taW4nKTtcblxuICB3aW5kb3cuZ2xvYmFsID0gd2luZG93O1xuXG4gIGRlYnVnID0gZmFsc2U7XG5cbiAgQlMgPSA4O1xuXG4gIFRBQiA9IDk7XG5cbiAgRU5URVIgPSAxMztcblxuICBFU0MgPSAyNztcblxuICBQQUdFX1VQID0gMzM7XG5cbiAgUEFHRV9ET1dOID0gMzQ7XG5cbiAgRU5EID0gMzU7XG5cbiAgSE9NRSA9IDM2O1xuXG4gIExFRlRfQVJST1cgPSAzNztcblxuICBVUF9BUlJPVyA9IDM4O1xuXG4gIFJJR0hUX0FSUk9XID0gMzk7XG5cbiAgRE9XTl9BUlJPVyA9IDQwO1xuXG4gIERFTCA9IDQ2O1xuXG4gIGFycm93cyA9IFszNywgMzgsIDM5LCA0MF07XG5cbiAgdXBkYXRlUGF0ID0gLyhefFxcbikoI0B1cGRhdGUgKShbXlxcbl0rKSg/Ol58XFxuKS87XG5cbiAgcGVlciA9IG51bGw7XG5cbiAgbmV4dElkID0gMDtcblxuICBmaWxlbmFtZSA9IG51bGw7XG5cbiAgZXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncywgd2lkZ2V0O1xuXG4gICAgd2lkZ2V0ID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICByZXR1cm4gYmFzaWNDYWxsKGFyZ3MsIGVudkZvcih3aWRnZXQpLCBpZGVudGl0eSk7XG4gIH07XG5cbiAgZGVmYXVsdEVudi5yZWFkRmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBjb250KSB7XG4gICAgdmFyIHVyaTtcblxuICAgIHVyaSA9IG5ldyBVUkkoZG9jdW1lbnQubG9jYXRpb24uaHJlZiwgZmlsZU5hbWUpO1xuICAgIGNvbnNvbGUubG9nKFwiXFxuXFxuQEBAQFJFQUQgRklMRTogXCIgKyB1cmkgKyBcIlxcblxcblwiKTtcbiAgICByZXR1cm4gJC5nZXQoU3RyaW5nKHVyaSkpLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIGNvbnQobnVsbCwgZGF0YSk7XG4gICAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICAgIHJldHVybiBjb250KGVyciwgbnVsbCk7XG4gICAgfSk7XG4gIH07XG5cbiAgZGVmYXVsdEVudi53cml0ZUZpbGUgPSBmdW5jdGlvbihmaWxlTmFtZSwgZGF0YSwgY29udCkge307XG5cbiAgc25hcHNob3QgPSBmdW5jdGlvbihlbCwgcGdtKSB7fTtcblxuICBzZXRTbmFwcGVyID0gZnVuY3Rpb24oc25hcEZ1bmMpIHtcbiAgICByZXR1cm4gc25hcHNob3QgPSBzbmFwRnVuYztcbiAgfTtcblxuICBkZWxheSA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZnVuYywgMSk7XG4gIH07XG5cbiAgZ2V0UGFyc2VFcnIgPSBnZXRIdG1sID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4KGx6KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcnoodmFsdWUpO1xuICAgIH0pKTtcbiAgfTtcblxuICBlc2NhcGVIdG1sID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1s8Pl0vZywgZnVuY3Rpb24oYykge1xuICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICBjYXNlICc8JzpcbiAgICAgICAgICAgIHJldHVybiAnJmx0Oyc7XG4gICAgICAgICAgY2FzZSAnPic6XG4gICAgICAgICAgICByZXR1cm4gJyZndDsnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH07XG5cbiAgcHJlc2VudFZhbHVlID0gZnVuY3Rpb24odikge1xuICAgIHZhciBjb250ZW50O1xuXG4gICAgaWYgKChnZXRUeXBlKHYpKSA9PT0gJ3N2Z05vZGUnKSB7XG4gICAgICBjb250ZW50ID0gdihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX3N2Z1ByZXNlbnQoKShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICgoZ2V0VHlwZSh2KSkgPT09ICdodG1sJykge1xuICAgICAgcmV0dXJuIGdldEh0bWwodik7XG4gICAgfSBlbHNlIGlmICgoZ2V0VHlwZSh2KSkgPT09ICdwYXJzZUVycicpIHtcbiAgICAgIHJldHVybiBcIlBBUlNFIEVSUk9SOiBcIiArIChnZXRQYXJzZUVycih2KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlc2NhcGVIdG1sKFN0cmluZyh2KSk7XG4gICAgfVxuICB9O1xuXG4gIGJvb3ROb3RlYm9vayA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgaWYgKChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhbm5lbExpc3QnKSkgPT0gbnVsbCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjcmVhdGVOb2RlKFwiPGRhdGFsaXN0IGlkPSdjaGFubmVsTGlzdCc+XFxuICAgPG9wdGlvbiB2YWx1ZT0nJz48L29wdGlvbj5cXG4gICA8b3B0aW9uIHZhbHVlPSdhcHAnPmFwcDwvb3B0aW9uPlxcbiAgIDxvcHRpb24gdmFsdWU9J2NvbXBpbGUnPmNvbXBpbGU8L29wdGlvbj5cXG4gICA8b3B0aW9uIHZhbHVlPSdlZGl0b3JGb2N1cyc+ZWRpdG9yRm9jdXM8L29wdGlvbj5cXG48L2RhdGFsaXN0PlwiKSk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVQZWVyKCk7XG4gIH07XG5cbiAgY2xvc2VXaW5kb3cgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZyhcIkNMT1NJTkcgV0lORE9XXCIpO1xuICAgIHdpbmRvdy5vcGVuKCcnLCAnX3NlbGYnLCAnJyk7XG4gICAgcmV0dXJuIHdpbmRvdy5jbG9zZSgpO1xuICB9O1xuXG4gIGNyZWF0ZVBlZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaywgcGFyYW0sIHBhcmFtcywgc2VydmVyLCB2LCBfaSwgX2xlbiwgX3JlZjMsIF9yZWY0O1xuXG4gICAgcm9vdC54dXNTZXJ2ZXIgPSBzZXJ2ZXIgPSBuZXcgWHVzLlNlcnZlcigpO1xuICAgIHNlcnZlci5leGl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY2xvc2VXaW5kb3coKTtcbiAgICB9O1xuICAgIHBlZXIgPSByb290LnBlZXIgPSBYdXMuY3JlYXRlRGlyZWN0UGVlcihzZXJ2ZXIpO1xuICAgIHBlZXIuc2VydmVyID0gc2VydmVyO1xuICAgIHBlZXIubGlzdGVuKCdsZWlzdXJlL3NlbGVjdGlvbi9jb250ZW50cycsIHRydWUsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBub2RlLCByLCBzO1xuXG4gICAgICBpZiAoa2V5ID09PSAnbGVpc3VyZS9zZWxlY3Rpb24vY29udGVudHMnKSB7XG4gICAgICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmIChzLnJhbmdlQ291bnQgJiYgcy50b1N0cmluZygpICE9PSB2YWx1ZSkge1xuICAgICAgICAgIHIgPSBzLmdldFJhbmdlQXQoMCk7XG4gICAgICAgICAgci5kZWxldGVDb250ZW50cygpO1xuICAgICAgICAgIG5vZGUgPSB0ZXh0Tm9kZSh2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICByLmluc2VydE5vZGUobm9kZSk7XG4gICAgICAgICAgcy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICByLnNlbGVjdE5vZGUobm9kZSk7XG4gICAgICAgICAgcmV0dXJuIHMuYWRkUmFuZ2Uocik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBwZWVyLnNldCgnbGVpc3VyZS9ldmFsRXhwcicsIG51bGwsICd0cmFuc2llbnQnKTtcbiAgICBwZWVyLmxpc3RlbignbGVpc3VyZS9ldmFsRXhwcicsIGZhbHNlLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgZW52LCBleHByLCByZXN1bHQ7XG5cbiAgICAgIGlmIChrZXkgPT09ICdsZWlzdXJlL2V2YWxFeHByJyAmJiAodmFsdWUgIT0gbnVsbCkpIHtcbiAgICAgICAgZXhwciA9IHZhbHVlWzBdLCByZXN1bHQgPSB2YWx1ZVsxXTtcbiAgICAgICAgY29uc29sZS5sb2coXCJFVkFMOiBcIiArIGV4cHIgKyBcIiwgUkVTVUxUOiBcIiArIHJlc3VsdCk7XG4gICAgICAgIGVudiA9IHh1c0VudihyZXN1bHQsIGV4cHIpO1xuICAgICAgICByZXR1cm4gcHJvY2Vzc0xpbmUoZXhwciwgZW52LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIGVudi5jbGVhbnVwID09PSBcImZ1bmN0aW9uXCIgPyBlbnYuY2xlYW51cCgpIDogdm9pZCAwO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwZWVyLnNldCgnbGVpc3VyZS9kb2N1bWVudCcsIHBlZXJHZXREb2N1bWVudCk7XG4gICAgcGVlci5zZXQoJ2xlaXN1cmUvZnVuY3Rpb25zJywgcGVlckdldEZ1bmN0aW9ucyk7XG4gICAgcGVlci5zZXQoJ2xlaXN1cmUvc3RvcmFnZScsIFtdKTtcbiAgICBpZiAoQm9vdC5kb2N1bWVudEZyYWdtZW50KSB7XG4gICAgICBwYXJhbXMgPSB7fTtcbiAgICAgIF9yZWYzID0gQm9vdC5kb2N1bWVudEZyYWdtZW50LnN1YnN0cmluZygxKS5zcGxpdCgnJicpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwYXJhbSA9IF9yZWYzW19pXTtcbiAgICAgICAgX3JlZjQgPSBwYXJhbS5zcGxpdCgnPScpLCBrID0gX3JlZjRbMF0sIHYgPSBfcmVmNFsxXTtcbiAgICAgICAgcGFyYW1zW2sudG9Mb3dlckNhc2UoKV0gPSBkZWNvZGVVUklDb21wb25lbnQodik7XG4gICAgICB9XG4gICAgICBpZiAocGFyYW1zLnh1c3Byb3h5ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFh1cy54dXNUb1Byb3h5KHNlcnZlciwgcGFyYW1zLnh1c3Byb3h5KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmVwbGFjZUNvbnRlbnRzID0gZnVuY3Rpb24odXJpLCBjb250ZW50cykge1xuICAgIGlmICghY29udGVudHMpIHtcbiAgICAgIGNvbnRlbnRzID0gdXJpO1xuICAgICAgdXJpID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHVyaSkge1xuICAgICAgc2V0RmlsZW5hbWUodXJpLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgnZG9jJywgJycpO1xuICAgIHdpbmRvdy5sZWlzdXJlQXV0b1J1bkFsbCA9IHRydWU7XG4gICAgd2luZG93Lm1hcmt1cChjb250ZW50cyk7XG4gICAgcmV0dXJuIGJpbmRBbGwoKTtcbiAgfTtcblxuICBiaW5kQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5vZGUsIF9pLCBfbGVuLCBfcmVmMztcblxuICAgIF9yZWYzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltsZWlzdXJlbm9kZT0nY29kZSddXCIpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmM1tfaV07XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29udGVudEVkaXRhYmxlJywgJ3RydWUnKTtcbiAgICAgIGJpbmROb3RlYm9vayhub2RlKTtcbiAgICAgIGNoYW5nZVRoZW1lKG5vZGUsICd0aGluJyk7XG4gICAgICBldmFsRG9jKG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gc2hvd0ZpbGVuYW1lcygpO1xuICB9O1xuXG4gIHh1c0VudiA9IGZ1bmN0aW9uKHJlc3VsdFZhciwgZXhwcikge1xuICAgIHZhciBlbnYsIHJlc3VsdDtcblxuICAgIHJlc3VsdCA9ICcnO1xuICAgIGVudiA9IHtcbiAgICAgIGRlYnVnOiBkZWJ1ZyxcbiAgICAgIGZpbmlzaGVkRXZlbnQ6IGZ1bmN0aW9uKCkge30sXG4gICAgICBvd25lcjogbnVsbCxcbiAgICAgIHJlcXVpcmU6IHJlcSxcbiAgICAgIHdyaXRlOiBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArPSBcIlwiICsgbXNnICsgXCJcXG5cIjtcbiAgICAgIH0sXG4gICAgICBwcm9tcHQ6IGZ1bmN0aW9uKG1zZywgY29udCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICs9IFwiQXR0ZW1wdCB0byBwcm9tcHQgd2l0aCBcIiArIG1zZztcbiAgICAgIH0sXG4gICAgICBwcm9jZXNzUmVzdWx0OiBmdW5jdGlvbihyZXMsIGFzdCkge1xuICAgICAgICByZXN1bHQgKz0gcmVzO1xuICAgICAgICByZXR1cm4gcGVlci5zZXQocmVzdWx0VmFyLCBKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcbiAgICAgIH0sXG4gICAgICBwcmVzZW50VmFsdWU6IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgICB9LFxuICAgICAgZmlsZVNldHRpbmdzOiB7XG4gICAgICAgIHVyaTogbmV3IFVSSShkb2N1bWVudC5sb2NhdGlvbi5ocmVmKVxuICAgICAgfSxcbiAgICAgIGVycjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIHJlc3VsdCArPSBlcnIubGVpc3VyZUNvbnRleHQgPyBcIkVSUk9SOiBcIiArIGVyciArIFwiOlxcblwiICsgKGxlaXN1cmVDb250ZXh0U3RyaW5nKGVycikpICsgXCJcXG5cIiArIGVyci5zdGFjayA6IFwiQ291bGRuJ3QgcGFyc2U6IFwiICsgZXhwcjtcbiAgICAgICAgcmV0dXJuIHBlZXIuc2V0KHJlc3VsdFZhciwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGVudi5fX3Byb3RvX18gPSByb290LmRlZmF1bHRFbnY7XG4gICAgcmV0dXJuIGVudjtcbiAgfTtcblxuICBwZWVyR2V0RG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbm9kZXM7XG5cbiAgICBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbGVpc3VyZW5vZGU9J2NvZGUnXVwiKTtcbiAgICBpZiAobm9kZXMubGVuZ3RoID4gMSB8fCBOb3RlYm9vay5tZCkge1xuICAgICAgcmV0dXJuIGdldE1ERG9jdW1lbnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldFNpbXBsZURvY3VtZW50KCk7XG4gICAgfVxuICB9O1xuXG4gIHBlZXJHZXRGdW5jdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKF8udW5pcSh3aW5kb3cubGVpc3VyZUZ1bmNOYW1lcy50b0FycmF5KCkuc29ydCgpLCB0cnVlKSkuc29ydCgpO1xuICB9O1xuXG4gIGdldE1ERG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWQsIG5vZGUsIF9pLCBfbGVuLCBfcmVmMywgX3JlZjQ7XG5cbiAgICBtZCA9ICcnO1xuICAgIF9yZWYzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RvY10gW2xlaXN1cmVOb2RlXScpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmM1tfaV07XG4gICAgICBtZCArPSBpc0xlaXN1cmVDb2RlKG5vZGUpID8gXCJgYGBcXG5cIiArIChnZXRFbGVtZW50Q29kZShub2RlKSkgKyBcIlxcbmBgYFxcblwiIDogKF9yZWY0ID0gbm9kZS5tZCkgIT0gbnVsbCA/IF9yZWY0IDogJyc7XG4gICAgfVxuICAgIHJldHVybiBtZDtcbiAgfTtcblxuICBtYWtlSWQgPSBmdW5jdGlvbihlbCkge1xuICAgIGlmICghZWwuaWQpIHtcbiAgICAgIHJldHVybiBlbC5pZCA9IFwiTGVpc3VyZS1cIiArIChuZXh0SWQrKyk7XG4gICAgfVxuICB9O1xuXG4gIGFsbG93RXZlbnRzID0gdHJ1ZTtcblxuICBpbml0ID0gZmFsc2U7XG5cbiAgYmluZE5vdGVib29rID0gZnVuY3Rpb24oZWwpIHtcbiAgICBpZiAoIWluaXQpIHtcbiAgICAgIGluaXQgPSB0cnVlO1xuICAgICAgZGVmYXVsdEVudi5wcmVzZW50VmFsdWUgPSBwcmVzZW50VmFsdWU7XG4gICAgICBkZWZhdWx0RW52LndyaXRlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhtc2cpO1xuICAgICAgfTtcbiAgICAgIGRlZmF1bHRFbnYub3duZXIgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgZGVmYXVsdEVudi5maW5pc2hlZEV2ZW50ID0gZnVuY3Rpb24oZXZ0LCBjaGFubmVsKSB7XG4gICAgICAgIHJldHVybiB1cGRhdGUoY2hhbm5lbCAhPSBudWxsID8gY2hhbm5lbCA6ICdhcHAnLCBkZWZhdWx0RW52KTtcbiAgICAgIH07XG4gICAgICBkZWZhdWx0RW52LmRlYnVnID0gZGVidWc7XG4gICAgfVxuICAgIGlmIChlbC5ib3VuZCA9PSBudWxsKSB7XG4gICAgICBtYWtlSWQoZWwpO1xuICAgICAgZWwuYm91bmQgPSB0cnVlO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkJywgKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICBpZiAoYWxsb3dFdmVudHMgJiYgIWVsLnJlcGxhY2luZykge1xuICAgICAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja011dGF0ZUZyb21Nb2RpZmljYXRpb24oZXZ0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksIHRydWUpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignRE9NU3VidHJlZU1vZGlmaWVkJywgKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICBpZiAoYWxsb3dFdmVudHMgJiYgIWVsLnJlcGxhY2luZykge1xuICAgICAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVja011dGF0ZUZyb21Nb2RpZmljYXRpb24oZXZ0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksIHRydWUpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFpc1NsaWRlcihlLnNyY0VsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhpZ2hsaWdodFBvc2l0aW9uKGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSwgdHJ1ZSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIWlzU2xpZGVyKGUuc3JjRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaGlnaGxpZ2h0UG9zaXRpb24oZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLCB0cnVlKTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIWlzU2xpZGVyKGUuc3JjRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaGlnaGxpZ2h0UG9zaXRpb24oZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLCB0cnVlKTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBjLCByLCBzO1xuXG4gICAgICAgIGMgPSBlLmNoYXJDb2RlIHx8IGUua2V5Q29kZSB8fCBlLndoaWNoO1xuICAgICAgICBpZiAoYyA9PT0gREVMIHx8IGMgPT09IEJTKSB7XG4gICAgICAgICAgcyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICByID0gcy5nZXRSYW5nZUF0KDApO1xuICAgICAgICAgIGlmIChjID09PSBCUykge1xuICAgICAgICAgICAgY2hlY2tEZWxldGVFeHByKGdldEJveChyLnN0YXJ0Q29udGFpbmVyKSk7XG4gICAgICAgICAgICBpZiAoc2tpcExlZnRPdmVyT3V0cHV0Qm94KGVsLCByKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gREVMKSB7XG4gICAgICAgICAgICBjaGVja0RlbGV0ZUV4cHIoZ2V0Qm94KHIuc3RhcnRDb250YWluZXIpKTtcbiAgICAgICAgICAgIGlmIChpZ25vcmVEZWxldGVPdXRwdXRCb3goZWwsIHIpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcmludGFibGUoYykpIHtcbiAgICAgICAgICBjbGVhckFzdChnZXRCb3god2luZG93LmdldFNlbGVjdGlvbigpLmZvY3VzTm9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX19pbmRleE9mLmNhbGwoYXJyb3dzLCBjKSA+PSAwKSB8fCBwcmludGFibGUoYykpIHtcbiAgICAgICAgICBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBoaWdobGlnaHRQb3NpdGlvbihlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGMgPT09IEVOVEVSKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZUtleShcIkMtRU5URVJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5hbHRLZXkgJiYgYyA9PT0gRU5URVIpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlS2V5KFwiTS1FTlRFUlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChjID09PSBUQUIpIHtcbiAgICAgICAgICBoYW5kbGVLZXkoXCJUQUJcIik7XG4gICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGJyLCBieCwgciwgcywgc3A7XG5cbiAgICAgICAgcyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgciA9IHMuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgaWYgKChlLmNoYXJDb2RlIHx8IGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PT0gRU5URVIpIHtcbiAgICAgICAgICBiciA9IHRleHROb2RlKCdcXG4nKTtcbiAgICAgICAgICByLmluc2VydE5vZGUoYnIpO1xuICAgICAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgIHIuc2V0U3RhcnQoYnIsIDEpO1xuICAgICAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgcy5hZGRSYW5nZShyKTtcbiAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHIuc3RhcnRDb250YWluZXIucGFyZW50Tm9kZSA9PT0gZWwpIHtcbiAgICAgICAgICBzcCA9IGNvZGVTcGFuKCdcXG4nLCAnY29kZUV4cHInKTtcbiAgICAgICAgICBzcC5zZXRBdHRyaWJ1dGUoJ2dlbmVyYXRlZE5MJywgJycpO1xuICAgICAgICAgIGJ4ID0gYm94KHMuZ2V0UmFuZ2VBdCgwKSwgJ2NvZGVNYWluRXhwcicsIHRydWUpO1xuICAgICAgICAgIGJ4LmFwcGVuZENoaWxkKHNwKTtcbiAgICAgICAgICBtYWtlT3V0cHV0Qm94KGJ4KTtcbiAgICAgICAgICByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICByLnNldFN0YXJ0KHNwLCAwKTtcbiAgICAgICAgICBzLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgIHJldHVybiBzLmFkZFJhbmdlKHIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYWxsb3dFdmVudHMpIHtcbiAgICAgICAgICByZXR1cm4gZmluZEN1cnJlbnRDb2RlSG9sZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLCB0cnVlKTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChhbGxvd0V2ZW50cykge1xuICAgICAgICAgIHJldHVybiBmaW5kQ3VycmVudENvZGVIb2xkZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSksIHRydWUpO1xuICAgICAgaWYgKHdpbmRvdy5sZWlzdXJlQXV0b1J1bkFsbCkge1xuICAgICAgICBhdXRvUnVuKGVsLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gcnVuVGVzdHMoZWwpO1xuICAgICAgICB9KSwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZWwuYXV0b3J1blN0YXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNoZWNrRGVsZXRlRXhwciA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB2YXIgb3V0O1xuXG4gICAgaWYgKGlzT3V0cHV0KG5vZGUgJiYgbm9kZS5vdXRwdXQpKSB7XG4gICAgICBvdXQgPSBub2RlLm91dHB1dDtcbiAgICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghbm9kZS50ZXh0Q29udGVudC50cmltKCkpIHtcbiAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChub2RlLnBhcmVudE5vZGUgPT0gbnVsbCkgJiYgKChvdXQgIT0gbnVsbCA/IG91dC5wYXJlbnROb2RlIDogdm9pZCAwKSAhPSBudWxsKSkge1xuICAgICAgICAgIHJldHVybiBvdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdXQpO1xuICAgICAgICB9XG4gICAgICB9KSwgMSk7XG4gICAgfVxuICB9O1xuXG4gIHNraXBMZWZ0T3Zlck91dHB1dEJveCA9IGZ1bmN0aW9uKGVsLCByKSB7XG4gICAgdmFyIGJveCwgcztcblxuICAgIGVsLm5vcm1hbGl6ZSgpO1xuICAgIGJveCA9IHByZXZpb3VzQm94UmFuZ2VJbnRlcm5hbChyKSB8fCBwcmV2aW91c0JveFJhbmdlU3RhcnQocik7XG4gICAgaWYgKGlzT3V0cHV0KGJveCkpIHtcbiAgICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICByLnNlbGVjdE5vZGUoYm94KTtcbiAgICAgIHIuY29sbGFwc2UodHJ1ZSk7XG4gICAgICBzLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgcy5hZGRSYW5nZShyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHByZXZpb3VzQm94UmFuZ2VJbnRlcm5hbCA9IGZ1bmN0aW9uKHIpIHtcbiAgICByZXR1cm4gci5zdGFydENvbnRhaW5lci5ub2RlVHlwZSA9PT0gMSAmJiByLnN0YXJ0T2Zmc2V0ID4gMCAmJiByLnN0YXJ0Q29udGFpbmVyLmNoaWxkTm9kZXNbci5zdGFydE9mZnNldCAtIDFdO1xuICB9O1xuXG4gIHByZXZpb3VzQm94UmFuZ2VTdGFydCA9IGZ1bmN0aW9uKHIpIHtcbiAgICByZXR1cm4gci5zdGFydENvbnRhaW5lci5ub2RlVHlwZSA9PT0gMyAmJiByLnN0YXJ0T2Zmc2V0ID09PSAwICYmIHByZXZpb3VzU2libGluZyhyLnN0YXJ0Q29udGFpbmVyKTtcbiAgfTtcblxuICBpZ25vcmVEZWxldGVPdXRwdXRCb3ggPSBmdW5jdGlvbihlbCwgcikge1xuICAgIHZhciBuO1xuXG4gICAgZWwubm9ybWFsaXplKCk7XG4gICAgaWYgKHIuc3RhcnRDb250YWluZXIubm9kZVR5cGUgPT09IDMgJiYgci5zdGFydE9mZnNldCA9PT0gci5zdGFydENvbnRhaW5lci5sZW5ndGgpIHtcbiAgICAgIG4gPSByLnN0YXJ0Q29udGFpbmVyO1xuICAgICAgd2hpbGUgKG4gJiYgbi5uZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgICBuID0gbi5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzT3V0cHV0KG4gIT0gbnVsbCA/IG4ubmV4dFNpYmxpbmcgOiB2b2lkIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGlzT3V0cHV0ID0gZnVuY3Rpb24oZWwpIHtcbiAgICByZXR1cm4gKGVsICE9IG51bGwgPyBlbC5ub2RlVHlwZSA6IHZvaWQgMCkgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlKCdMZWlzdXJlT3V0cHV0Jyk7XG4gIH07XG5cbiAgaXNMZWlzdXJlQ29kZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgcmV0dXJuIChlbCAhPSBudWxsID8gZWwubm9kZVR5cGUgOiB2b2lkIDApID09PSAxICYmIGVsLmdldEF0dHJpYnV0ZSgnbGVpc3VyZU5vZGUnKSA9PT0gJ2NvZGUnO1xuICB9O1xuXG4gIHBlZXJOb3RpZnlTZWxlY3Rpb24gPSBmdW5jdGlvbihlbCwgc3RyKSB7fTtcblxuICBwcmludGFibGVDb250cm9sQ2hhcmFjdGVycyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgX2ksIF9sZW4sIF9yZWYzLCBfcmVzdWx0cztcblxuICAgIF9yZWYzID0gXCJcXHJcXGlcXG5cXGJcIjtcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGMgPSBfcmVmM1tfaV07XG4gICAgICBfcmVzdWx0cy5wdXNoKGMuY2hhckNvZGVBdCgwKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfSkoKTtcblxuICBwcmludGFibGUgPSBmdW5jdGlvbihjb2RlKSB7XG4gICAgcmV0dXJuIChjb2RlID4gMHhmICYmIGNvZGUgPCAzNykgfHwgY29kZSA+IDQwIHx8IF9faW5kZXhPZi5jYWxsKHByaW50YWJsZUNvbnRyb2xDaGFyYWN0ZXJzLCBjb2RlKSA+PSAwO1xuICB9O1xuXG4gIG5vbnByaW50YWJsZSA9IG51bGw7XG5cbiAgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBpLCBzLCBfaTtcblxuICAgIHMgPSAnJztcbiAgICBmb3IgKGkgPSBfaSA9IDA7IDAgPD0gMHhmID8gX2kgPD0gMHhmIDogX2kgPj0gMHhmOyBpID0gMCA8PSAweGYgPyArK19pIDogLS1faSkge1xuICAgICAgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpO1xuICAgIH1cbiAgICBzLnJlcGxhY2UoL1tcXGlcXHJcXGZdL2csICcnKTtcbiAgICByZXR1cm4gbm9ucHJpbnRhYmxlID0gbmV3IFJlZ0V4cChcIltcIiArIHMgKyBcIl1cIik7XG4gIH0pKCk7XG5cbiAgaGFuZGxlS2V5ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgdmFyIGJveDtcblxuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlIFwiQy1FTlRFUlwiOlxuICAgICAgY2FzZSBcIlRBQlwiOlxuICAgICAgICBib3ggPSBnZXRCb3god2luZG93LmdldFNlbGVjdGlvbigpLmZvY3VzTm9kZSk7XG4gICAgICAgIGlmICgoYm94LmdldEF0dHJpYnV0ZSgnY29kZU1haW5FeHByJykpICE9IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gZXZhbE91dHB1dChib3gub3V0cHV0KTtcbiAgICAgICAgfSBlbHNlIGlmICgoYm94LmdldEF0dHJpYnV0ZSgnY29kZU1haW4nKSkgIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBhY2NlcHRDb2RlKGJveCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTS1FTlRFUlwiOlxuICAgICAgICBib3ggPSBnZXRCb3god2luZG93LmdldFNlbGVjdGlvbigpLmZvY3VzTm9kZSk7XG4gICAgICAgIGlmICgoYm94LmdldEF0dHJpYnV0ZSgnY29kZU1haW5FeHByJykpICE9IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gY2xlYXJPdXRwdXRCb3goYm94Lm91dHB1dCk7XG4gICAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY2xlYXJBc3QgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgY2JveDtcblxuICAgIGNib3ggPSBnZXRCb3goYm94KTtcbiAgICByZXR1cm4gY2JveCAhPSBudWxsID8gY2JveC5hc3QgPSBudWxsIDogdm9pZCAwO1xuICB9O1xuXG4gIG9sZEJyYWNrZXRzID0gW251bGwsIE5pbF07XG5cbiAgY2xlYW5FbXB0eU5vZGVzID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgbmV4dCwgcHJldiwgX3JlZjM7XG5cbiAgICBpZiAoZWwubm9kZVR5cGUgPT09IDMgJiYgKGVsLnBhcmVudE5vZGUgIT0gbnVsbCkpIHtcbiAgICAgIHJldHVybiBjbGVhbkVtcHR5Tm9kZXMoZWwucGFyZW50Tm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZXYgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG4gICAgICBuZXh0ID0gZWwubmV4dFNpYmxpbmc7XG4gICAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwudGV4dENvbnRlbnQudHJpbSgpID09PSAnJyAmJiAoKF9yZWYzID0gZWwucGFyZW50Tm9kZSkgIT0gbnVsbCA/IF9yZWYzLmhhc0F0dHJpYnV0ZSgnZG9jJykgOiB2b2lkIDApKSB7XG4gICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgfVxuICAgICAgaWYgKG5leHQgPT09IG5leHRTaWJsaW5nKHByZXYpKSB7XG4gICAgICAgIHJldHVybiBtZXJnZUxlaXN1cmVDb2RlKHByZXYsIG5leHQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBwcmVzZW50TGVpc3VyZUNvZGUgPSBmdW5jdGlvbihub2RlLCBkb0V2YWwpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29udGVudEVkaXRhYmxlJywgJ3RydWUnKTtcbiAgICBOb3RlYm9vay5iaW5kTm90ZWJvb2sobm9kZSk7XG4gICAgTm90ZWJvb2suY2hhbmdlVGhlbWUobm9kZSwgJ3RoaW4nKTtcbiAgICBpZiAoZG9FdmFsKSB7XG4gICAgICByZXR1cm4gZXZhbERvYyhub2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGluaXROb3RlYm9vayhub2RlKTtcbiAgICB9XG4gIH07XG5cbiAgbWVyZ2VMZWlzdXJlQ29kZSA9IGZ1bmN0aW9uKGVsMSwgZWwyKSB7XG4gICAgdmFyIG5ld0NvZGUsIHI7XG5cbiAgICBpZiAoZWwxICYmIGVsMikge1xuICAgICAgaWYgKGVsMS5ub2RlVHlwZSA9PT0gMSAmJiBlbDIubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgZWwxLmFwcGVuZENoaWxkKGVsMik7XG4gICAgICAgIHJldHVybiBlbDEubm9ybWFsaXplKCk7XG4gICAgICB9IGVsc2UgaWYgKGVsMS5ub2RlVHlwZSA9PT0gMyAmJiBlbDIubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgZWwyLmluc2VydEJlZm9yZShlbDEsIGVsMi5maXJzdENoaWxkKTtcbiAgICAgICAgcmV0dXJuIGVsMi5ub3JtYWxpemUoKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwxLmhhc0F0dHJpYnV0ZSgnbGVpc3VyZU5vZGUnKSAmJiBlbDEuZ2V0QXR0cmlidXRlKCdsZWlzdXJlTm9kZScpID09PSBlbDIuZ2V0QXR0cmlidXRlKCdsZWlzdXJlTm9kZScpKSB7XG4gICAgICAgIG5ld0NvZGUgPSB0ZXh0Tm9kZShlbDEubWQgPSBlbDEuZ2V0QXR0cmlidXRlKCdsZWlzdXJlTm9kZScpID09PSAnY29kZScgPyBcIlwiICsgKGdldEVsZW1lbnRDb2RlKGVsMSkpICsgXCJcXG5cIiArIChnZXRFbGVtZW50Q29kZShlbDIpKSA6IFwiXCIgKyBlbDEubWQgKyBcIlxcblwiICsgZWwyLm1kKTtcbiAgICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIHIuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsMik7XG4gICAgICAgIGVsMS5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSgnXFxuJykpO1xuICAgICAgICBlbDEuYXBwZW5kQ2hpbGQoci5leHRyYWN0Q29udGVudHMoKSk7XG4gICAgICAgIHJldHVybiBlbDIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbDIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBoaWdobGlnaHRQb3NpdGlvbiA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgYXN0LCBiLCBicmFja2V0cywgY2hhbmdlZCwgaSwgbm9kZSwgcGFyZW50LCBwb3MsIHIsIHJhbmdlcywgcywgc3BhbiwgX2ksIF9qLCBfaywgX2xlbiwgX2xlbjEsIF9sZW4yLCBfcmVmMywgX3JlZjQsIF9yZWY1O1xuXG4gICAgcGFyZW50ID0gbnVsbDtcbiAgICBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzLnJhbmdlQ291bnQpIHtcbiAgICAgIGlmIChjbGVhbkVtcHR5Tm9kZXMocy5nZXRSYW5nZUF0KDApLnN0YXJ0Q29udGFpbmVyKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb2N1c0JveChzLmZvY3VzTm9kZSk7XG4gICAgICBwYXJlbnQgPSBnZXRCb3gocy5mb2N1c05vZGUpO1xuICAgICAgaWYgKChfcmVmMyA9IHMuZ2V0UmFuZ2VBdCgwKSkgIT0gbnVsbCA/IF9yZWYzLmNvbGxhcHNlZCA6IHZvaWQgMCkge1xuICAgICAgICBpZiAoIXBhcmVudCB8fCBpc091dHB1dChwYXJlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnQucGFyZW50Tm9kZSAmJiAoYXN0ID0gZ2V0QXN0KHBhcmVudCkpKSB7XG4gICAgICAgICAgciA9IHMuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgICByLnNldFN0YXJ0KHBhcmVudCwgMCk7XG4gICAgICAgICAgcG9zID0gZ2V0UmFuZ2VUZXh0KHIpLmxlbmd0aDtcbiAgICAgICAgICBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgaWYgKGZhbHNlKSB7XG4gICAgICAgICAgICBicmFja2V0cyA9IExlaXN1cmUuYnJhY2tldChhc3QubGVpc3VyZUJhc2UsIHBvcyk7XG4gICAgICAgICAgICBpZiAob2xkQnJhY2tldHNbMF0gIT09IHBhcmVudCB8fCAhb2xkQnJhY2tldHNbMV0uZXF1YWxzKGJyYWNrZXRzKSkge1xuICAgICAgICAgICAgICBvbGRCcmFja2V0cyA9IFtwYXJlbnQsIGJyYWNrZXRzXTtcbiAgICAgICAgICAgICAgX3JlZjQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW0xlaXN1cmVCcmFja2V0c11cIik7XG4gICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjQubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgICAgICBub2RlID0gX3JlZjRbX2ldO1xuICAgICAgICAgICAgICAgIHVud3JhcChub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBfcmVmNSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBhcnRpYWxBcHBseVwiKTtcbiAgICAgICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjUubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IF9yZWY1W19qXTtcbiAgICAgICAgICAgICAgICB1bndyYXAobm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGFyZW50Lm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgICBtYXJrUGFydGlhbEFwcGxpZXMocGFyZW50KTtcbiAgICAgICAgICAgICAgYiA9IGJyYWNrZXRzO1xuICAgICAgICAgICAgICByYW5nZXMgPSBbXTtcbiAgICAgICAgICAgICAgd2hpbGUgKGIgIT09IE5pbCkge1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKG1ha2VSYW5nZShwYXJlbnQsIGIuaGVhZCgpLmhlYWQoKSwgYi5oZWFkKCkudGFpbCgpLmhlYWQoKSkpO1xuICAgICAgICAgICAgICAgIGIgPSBiLnRhaWwoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmb3IgKGkgPSBfayA9IDAsIF9sZW4yID0gcmFuZ2VzLmxlbmd0aDsgX2sgPCBfbGVuMjsgaSA9ICsrX2spIHtcbiAgICAgICAgICAgICAgICByID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ0xlaXN1cmVCcmFja2V0cycsICcnKTtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBpID09PSAwID8gJ0xlaXN1cmVGdW5jJyA6ICdMZWlzdXJlQXJnJyk7XG4gICAgICAgICAgICAgICAgd3JhcFJhbmdlKHIsIHNwYW4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChoaWRlU2xpZGVyKCkpIHtcbiAgICAgICAgICAgICAgcG9zICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgTW91c2VFdmVudCAmJiBlLnR5cGUgPT09ICdtb3VzZWRvd24nICYmIChlLnRhcmdldCA9PT0gcGFyZW50IHx8IHBhcmVudC5jb250YWlucyhlLnRhcmdldCkpICYmIHNob3dTbGlkZXJCdXR0b24ocGFyZW50LCBwb3MsIGUpKSB7XG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBvcyArPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgICAgd2luZG93LkVWVCA9IGU7XG4gICAgICAgICAgICBzLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgICAgcy5hZGRSYW5nZShtYWtlUmFuZ2UocGFyZW50LCBwb3MpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwZWVyTm90aWZ5U2VsZWN0aW9uKHBhcmVudCwgcy50b1N0cmluZygpKTtcbiAgICB9XG4gIH07XG5cbiAgbnVtYmVyRW5kID0gLyg/Ol58LipbXjAtOS5dKShbMC05XStcXC4/WzAtOV0qfFxcLlswLTldKikkLztcblxuICBudW1iZXJTdGFydCA9IC9eKFswLTldK1xcLlswLTldK3xbMC05XSt8XFwuWzAtOV0rKS87XG5cbiAgc2xpZGVyID0gW107XG5cbiAgc2hvd1NsaWRlckJ1dHRvbiA9IGZ1bmN0aW9uKHBhcmVudCwgcG9zLCBlKSB7XG4gICAgdmFyIGNoYW5nZWQsIGxlbiwgbSwgb2xkUG9zLCByLCBzUGFyZW50LCBzUG9zLCBzVmFsdWUsIHNwYW4sIHRleHQ7XG5cbiAgICBpZiAoc2xpZGVyLmxlbmd0aCkge1xuICAgICAgaGlkZVNsaWRlcigpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXh0ID0gcGFyZW50LnRleHRDb250ZW50O1xuICAgICAgb2xkUG9zID0gcG9zO1xuICAgICAgY2hhbmdlZCA9IDA7XG4gICAgICBpZiAobSA9IHRleHQuc3Vic3RyaW5nKDAsIHBvcykubWF0Y2gobnVtYmVyRW5kKSkge1xuICAgICAgICBwb3MgLT0gbVsxXS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAobSA9IHRleHQuc3Vic3RyaW5nKHBvcykubWF0Y2gobnVtYmVyU3RhcnQpKSB7XG4gICAgICAgIGxlbiA9IG1bMV0ubGVuZ3RoO1xuICAgICAgICBpZiAob2xkUG9zIDw9IHBvcyArIGxlbikge1xuICAgICAgICAgIHNQYXJlbnQgPSBzbGlkZXJbMF0sIHNQb3MgPSBzbGlkZXJbMV0sIHNWYWx1ZSA9IHNsaWRlclsyXTtcbiAgICAgICAgICBpZiAocGFyZW50ICE9PSBzUGFyZW50IHx8IHBvcyAhPT0gc1BvcyB8fCBtWzFdICE9PSBzVmFsdWUpIHtcbiAgICAgICAgICAgIGhpZGVTbGlkZXIoKTtcbiAgICAgICAgICAgIHIgPSBtYWtlUmFuZ2UocGFyZW50LCBwb3MsIHBvcyArIG1bMV0ubGVuZ3RoKTtcbiAgICAgICAgICAgIHNwYW4gPSBjcmVhdGVOb2RlKFwiPHNwYW4gY2xhc3M9J2xlaXN1cmVSYW5nZU51bWJlciB1aS13aWRnZXQtY29udGVudCc+PC9zcGFuPlwiKTtcbiAgICAgICAgICAgIHdyYXBSYW5nZShyLCBzcGFuKTtcbiAgICAgICAgICAgIGNoYW5nZWQgPSAxO1xuICAgICAgICAgICAgc3Bhbi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHNsaWRlciA9IFtwYXJlbnQsIHBvcywgbVsxXSwgc3Bhbl07XG4gICAgICAgICAgICBjcmVhdGVTbGlkZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaGlkZVNsaWRlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBpc1NsaWRlciA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgd2hpbGUgKGVsICE9PSBkb2N1bWVudCkge1xuICAgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnc2xpZGVyJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBjcmVhdGVTbGlkZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZCwgZGl2LCBpbnNpZGUsIG1heCwgbWluLCBwYXJlbnQsIHBvcywgc2wsIHNsaWRpbmcsIHNwYW4sIHZhbHVlO1xuXG4gICAgcGFyZW50ID0gc2xpZGVyWzBdLCBwb3MgPSBzbGlkZXJbMV0sIHZhbHVlID0gc2xpZGVyWzJdLCBzcGFuID0gc2xpZGVyWzNdLCBkaXYgPSBzbGlkZXJbNF07XG4gICAgaWYgKGRpdikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbnNpZGUgPSBmYWxzZTtcbiAgICBzbGlkaW5nID0gZmFsc2U7XG4gICAgZCA9IGNyZWF0ZU5vZGUoXCI8ZGl2IHN0eWxlPSd6LWluZGV4OiAxOyBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAyMDBweDsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogc29saWQgZ3JlZW4gMXB4JyBzbGlkZXIgY29udGVudEVkaXRhYmxlPSdmYWxzZSc+PC9kaXY+XCIpO1xuICAgIHNsaWRlci5wdXNoKGQpO1xuICAgIGQuc3R5bGUudG9wID0gXCJcIiArIChzcGFuLm9mZnNldFRvcCArIHNwYW4ub2Zmc2V0SGVpZ2h0ICsgNSkgKyBcInB4XCI7XG4gICAgZC5zdHlsZS5taW5Ub3AgPSAnMHB4JztcbiAgICBkLnN0eWxlLmxlZnQgPSBcIlwiICsgKE1hdGgubWF4KDAsIChzcGFuLm9mZnNldExlZnQgKyBzcGFuLm9mZnNldFdpZHRoKSAvIDIgLSAxMDApKSArIFwicHhcIjtcbiAgICBkLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghaW5zaWRlKSB7XG4gICAgICAgIHJldHVybiBpbnNpZGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoZS50b0VsZW1lbnQgIT09IGQgJiYgIWQuY29udGFpbnMoZS50b0VsZW1lbnQpKSB7XG4gICAgICAgIGluc2lkZSA9IGZhbHNlO1xuICAgICAgICBpZiAoIXNsaWRpbmcpIHtcbiAgICAgICAgICByZXR1cm4gaGlkZVNsaWRlcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFsdWUgPSBOdW1iZXIodmFsdWUpO1xuICAgIG1pbiA9IHZhbHVlIDwgMCA/IHZhbHVlICogMiA6IHZhbHVlIC8gMjtcbiAgICBtYXggPSB2YWx1ZSA9PT0gMCA/IDEwIDogdmFsdWUgKiAyO1xuICAgIHNsID0gJChkKS5zbGlkZXIoe1xuICAgICAgYW5pbWF0ZTogJ2Zhc3QnLFxuICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBzbGlkaW5nID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBhbGxvd0V2ZW50cyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBzdG9wOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgc2V0TWluTWF4KHNsKTtcbiAgICAgICAgYWxsb3dFdmVudHMgPSB0cnVlO1xuICAgICAgICBzbGlkaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICghaW5zaWRlKSB7XG4gICAgICAgICAgcmV0dXJuIGhpZGVTbGlkZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgdmFyIGFzdCwgX3JlZjM7XG5cbiAgICAgICAgaWYgKHNwYW4uZmlyc3RDaGlsZCkge1xuICAgICAgICAgIHNwYW4uZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBTdHJpbmcodWkudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0RlZihwYXJlbnQpKSB7XG4gICAgICAgICAgcGFyZW50LmFzdCA9IG51bGw7XG4gICAgICAgICAgYWNjZXB0Q29kZShwYXJlbnQpO1xuICAgICAgICAgIGFzdCA9IGdldEFzdChwYXJlbnQpO1xuICAgICAgICAgIGlmICgoX3JlZjMgPSBwYXJlbnQuYXN0KSAhPSBudWxsID8gX3JlZjMubGVpc3VyZU5hbWUgOiB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGUoXCJzZWwtXCIgKyBwYXJlbnQuYXN0LmxlaXN1cmVOYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFrZUlkKHBhcmVudCk7XG4gICAgICAgICAgaWYgKCFwYXJlbnQuZ2V0QXR0cmlidXRlKHBhcmVudC5vdXRwdXQsICdsZWlzdXJlVXBkYXRlJykpIHtcbiAgICAgICAgICAgIHNldFVwZGF0ZShwYXJlbnQub3V0cHV0LCBcImlkLVwiICsgcGFyZW50LmlkICsgXCIgY29tcGlsZVwiLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlKFwiaWQtXCIgKyBwYXJlbnQuaWQpO1xuICAgICAgICAgIHJldHVybiB1cGRhdGUoXCJjb21waWxlXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfSk7XG4gICAgc2V0TWluTWF4KHNsLCB2YWx1ZSk7XG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShkLCBwYXJlbnQuZmlyc3RDaGlsZCk7XG4gICAgcmV0dXJuIGQuZm9jdXMoKTtcbiAgfTtcblxuICBwc2duID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4IDwgMCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gIH07XG5cbiAgc2V0TWluTWF4ID0gZnVuY3Rpb24oc2wsIHZhbHVlKSB7XG4gICAgdmFyIG1heCwgbWluLCBzdGVwLCBfcmVmMztcblxuICAgIHZhbHVlID0gdmFsdWUgfHwgc2wuc2xpZGVyKFwidmFsdWVcIik7XG4gICAgbWluID0gMDtcbiAgICBtYXggPSAoMSA8PSAoX3JlZjMgPSBNYXRoLmFicyh2YWx1ZSkpICYmIF9yZWYzIDwgNTApIHx8IHZhbHVlID09PSAwID8gMTAwICogcHNnbih2YWx1ZSkgOiB2YWx1ZSAqIDI7XG4gICAgaWYgKE1hdGgucm91bmQodmFsdWUpID09PSB2YWx1ZSkge1xuICAgICAgc3RlcCA9IE1hdGgucm91bmQoKG1heCAtIG1pbikgLyAxMDApO1xuICAgICAgc3RlcCA9IHN0ZXAgLSBzdGVwICUgKG1heCAtIG1pbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ZXAgPSAobWF4IC0gbWluKSAvIDEwMDtcbiAgICB9XG4gICAgc2wuc2xpZGVyKFwib3B0aW9uXCIsIFwibWluXCIsIG1pbik7XG4gICAgc2wuc2xpZGVyKFwib3B0aW9uXCIsIFwibWF4XCIsIG1heCk7XG4gICAgcmV0dXJuIHNsLnNsaWRlcihcIm9wdGlvblwiLCBcInN0ZXBcIiwgc3RlcCk7XG4gIH07XG5cbiAgaGlkZVNsaWRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkaXYsIHBhcmVudCwgc1Bvcywgc1ZhbHVlLCBzcGFuO1xuXG4gICAgaWYgKHNsaWRlci5sZW5ndGgpIHtcbiAgICAgIHBhcmVudCA9IHNsaWRlclswXSwgc1BvcyA9IHNsaWRlclsxXSwgc1ZhbHVlID0gc2xpZGVyWzJdLCBzcGFuID0gc2xpZGVyWzNdLCBkaXYgPSBzbGlkZXJbNF07XG4gICAgICB1bndyYXAoc3Bhbik7XG4gICAgICBpZiAoZGl2KSB7XG4gICAgICAgIHJlbW92ZShkaXYpO1xuICAgICAgfVxuICAgICAgcGFyZW50Lm5vcm1hbGl6ZSgpO1xuICAgICAgc2xpZGVyID0gW107XG4gICAgICByZXR1cm4gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9O1xuXG4gIHdyYXBSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlLCBub2RlKSB7XG4gICAgdmFyIGNvbnRlbnRzLCBlcnI7XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHJhbmdlLnN1cnJvdW5kQ29udGVudHMobm9kZSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICBjb250ZW50cyA9IHJhbmdlLmNsb25lQ29udGVudHMoKTtcbiAgICAgIHJlcGxhY2VSYW5nZShyYW5nZSwgbm9kZSk7XG4gICAgICByZXR1cm4gbm9kZS5hcHBlbmRDaGlsZChjb250ZW50cyk7XG4gICAgfVxuICB9O1xuXG4gIHJlcGxhY2VSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlLCBub2RlKSB7XG4gICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTtcbiAgICByZXR1cm4gcmFuZ2UuaW5zZXJ0Tm9kZShub2RlKTtcbiAgfTtcblxuICBnZXRSYW5nZVRleHQgPSBmdW5jdGlvbihyKSB7XG4gICAgcmV0dXJuIHIuY2xvbmVDb250ZW50cygpLnRleHRDb250ZW50O1xuICB9O1xuXG4gIGdldEJveCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB3aGlsZSAoKG5vZGUgIT0gbnVsbCkgJiYgKCh0eXBlb2Ygbm9kZS5nZXRBdHRyaWJ1dGUgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuZ2V0QXR0cmlidXRlKCdMZWlzdXJlQm94JykgOiB2b2lkIDApID09IG51bGwpKSB7XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBjaGVja011dGF0ZUZyb21Nb2RpZmljYXRpb24gPSBmdW5jdGlvbihldnQpIHtcbiAgICB2YXIgYiwgYjI7XG5cbiAgICBiID0gZ2V0Qm94KGV2dC50YXJnZXQpO1xuICAgIGIyID0gZ2V0Qm94KHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGUpO1xuICAgIGlmIChiICYmIGIgPT09IGIyKSB7XG4gICAgICBpZiAoKGlzRGVmKGIpKSAmJiBiLmNsYXNzTGlzdC5jb250YWlucygnY29kZU1haW5FeHByJykpIHtcbiAgICAgICAgdG9EZWZCb3goYik7XG4gICAgICB9IGVsc2UgaWYgKCEoaXNEZWYoYikpICYmIGIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2RlTWFpbicpKSB7XG4gICAgICAgIHRvRXhwckJveChiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXBsaWNhdGUoYik7XG4gICAgfVxuICB9O1xuXG4gIHJlcGxpY2F0ZSA9IGZ1bmN0aW9uKGIpIHtcbiAgICBpZiAoYi5yZXBsaWNhdG9yKSB7XG4gICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBiLnJlcGxpY2F0b3IucmVwbGljYXRlKGIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGJ1dHRvbkNsYXNzZXMgPSAndWktYnV0dG9uIHVpLXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwgdWktYnV0dG9uLXRleHQtb25seScuc3BsaXQoJyAnKTtcblxuICBib3hDbGFzc2VzID0ge1xuICAgIGNvZGVNYWluRXhwcjogWydjb2RlTWFpbkV4cHInLCAndWktd2lkZ2V0JywgJ3VpLXdpZGdldC1jb250ZW50JywgJ3VpLWNvcm5lci1hbGwnXSxcbiAgICBjb2RlTWFpbjogWydjb2RlTWFpbicsICd1aS13aWRnZXQnLCAndWktd2lkZ2V0LWNvbnRlbnQnLCAndWktY29ybmVyLWFsbCddLFxuICAgIGNvZGVNYWluVGVzdDogWydjb2RlTWFpblRlc3QnXSxcbiAgICBvdXRwdXQ6IFsnb3V0cHV0JywgJ3VpLWNvcm5lci1hbGwnXVxuICB9O1xuXG4gIGFkZEJveENsYXNzZXMgPSBmdW5jdGlvbihib3gsIHR5cGUpIHtcbiAgICB2YXIgY2wsIF9pLCBfbGVuLCBfcmVmMywgX3Jlc3VsdHM7XG5cbiAgICBib3guc2V0QXR0cmlidXRlKHR5cGUsICcnKTtcbiAgICBfcmVmMyA9IGJveENsYXNzZXNbdHlwZV07XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBjbCA9IF9yZWYzW19pXTtcbiAgICAgIF9yZXN1bHRzLnB1c2goYm94LmNsYXNzTGlzdC5hZGQoY2wpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIHJlbW92ZUJveENsYXNzZXMgPSBmdW5jdGlvbihib3gsIHR5cGUpIHtcbiAgICB2YXIgY2wsIF9pLCBfbGVuLCBfcmVmMywgX3Jlc3VsdHM7XG5cbiAgICBib3gucmVtb3ZlQXR0cmlidXRlKHR5cGUpO1xuICAgIF9yZWYzID0gYm94Q2xhc3Nlc1t0eXBlXTtcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGNsID0gX3JlZjNbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChib3guY2xhc3NMaXN0LnJlbW92ZShjbCkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG5cbiAgdG9FeHByQm94ID0gZnVuY3Rpb24oYikge1xuICAgIHZhciBub2RlLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMywgX3JlZjQ7XG5cbiAgICByZW1vdmVCb3hDbGFzc2VzKGIsICdjb2RlTWFpbicpO1xuICAgIGFkZEJveENsYXNzZXMoYiwgJ2NvZGVNYWluRXhwcicpO1xuICAgIF9yZWYzID0gYi5xdWVyeVNlbGVjdG9yQWxsKCdbY29kZW5hbWVdJyk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgbm9kZSA9IF9yZWYzW19pXTtcbiAgICAgIHVud3JhcChub2RlKTtcbiAgICB9XG4gICAgX3JlZjQgPSBiLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hc3RidXR0b24nKTtcbiAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmNC5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmNFtfal07XG4gICAgICByZW1vdmUobm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBtYWtlT3V0cHV0Qm94KGIpO1xuICB9O1xuXG4gIHRvRGVmQm94ID0gZnVuY3Rpb24oYikge1xuICAgIGlmIChiLm91dHB1dCkge1xuICAgICAgcmVtb3ZlKGIub3V0cHV0KTtcbiAgICB9XG4gICAgcmVtb3ZlQm94Q2xhc3NlcyhiLCAnY29kZU1haW5FeHByJyk7XG4gICAgYWRkQm94Q2xhc3NlcyhiLCAnY29kZU1haW4nKTtcbiAgICByZXR1cm4gYWRkRGVmQ29udHJvbHMoYik7XG4gIH07XG5cbiAgYWRkRGVmQ29udHJvbHMgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgYnRuO1xuXG4gICAgYnRuID0gY3JlYXRlTm9kZShcIjxidXR0b24gb25jbGljaz0nTm90ZWJvb2suc2hvd0FzdCh0aGlzLnBhcmVudE5vZGUpJyBjbGFzcz0nYXN0YnV0dG9uJyB0aXRsZT0nU2hvdyBBU1QnPjwvYnV0dG9uPlwiKTtcbiAgICBtYXJrdXBCdXR0b24oYnRuKTtcbiAgICByZXR1cm4gYm94LmFwcGVuZENoaWxkKGJ0bik7XG4gIH07XG5cbiAgcmVtb3ZlID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHZhciBfcmVmMztcblxuICAgIHJldHVybiAoX3JlZjMgPSBub2RlLnBhcmVudE5vZGUpICE9IG51bGwgPyBfcmVmMy5yZW1vdmVDaGlsZChub2RlKSA6IHZvaWQgMDtcbiAgfTtcblxuICBzaG93QXN0ID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIG5hbWUsIG5vZGUsIG91dHB1dDtcblxuICAgIG5hbWUgPSAoZ2V0QXN0KGJveCkpLmxlaXN1cmVOYW1lO1xuICAgIGlmIChib3guYXN0T3V0ICE9IG51bGwpIHtcbiAgICAgIHJlbW92ZShib3guYXN0T3V0Lm91dHB1dCk7XG4gICAgICByZW1vdmUoYm94LmFzdE91dCk7XG4gICAgICByZXR1cm4gYm94LmFzdE91dCA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChuYW1lICE9IG51bGwpIHtcbiAgICAgIG5vZGUgPSBjb2RlQm94KCdjb2RlTWFpbkV4cHInKTtcbiAgICAgIGJveC5hc3RPdXQgPSBub2RlO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVPdXRwdXQnLCAnJyk7XG4gICAgICBib3gucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgYm94Lm5leHRTaWJsaW5nKTtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBcIiNAdXBkYXRlIHNlbC1cIiArIG5hbWUgKyBcIlxcbnRyZWVGb3JOb3RlYm9vayBcIiArIG5hbWU7XG4gICAgICBvdXRwdXQgPSBtYWtlT3V0cHV0Qm94KG5vZGUpO1xuICAgICAgdG9nZ2xlRWRpdChvdXRwdXQpO1xuICAgICAgcmV0dXJuIGV2YWxPdXRwdXQob3V0cHV0LCB0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgaGlnaGxpZ2h0Tm90ZWJvb2tGdW5jdGlvbiA9IGZ1bmN0aW9uKGZ1bmNOYW1lLCBzdGFydCwgc3RvcCkge1xuICAgIHZhciBib3gsIG9mZnNldCwgc2VsO1xuXG4gICAgYm94ID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiW2xlaXN1cmVmdW5jPVwiICsgZnVuY05hbWUgKyBcIl1cIik7XG4gICAgb2Zmc2V0ID0gMDtcbiAgICBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgIHJldHVybiBzZWwuYWRkUmFuZ2UobWFrZVJhbmdlKGJveCwgc3RhcnQgKyBvZmZzZXQsIHN0b3AgKyBvZmZzZXQpKTtcbiAgfTtcblxuICBpc0RlZiA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBkZWZUeXBlLCBsZWFkaW5nLCBtLCBtYXRjaGVkLCBuYW1lLCB0eHQ7XG5cbiAgICB0eHQgPSBib3gudGV4dENvbnRlbnQ7XG4gICAgaWYgKChtID0gdHh0Lm1hdGNoKExfZGVmUGF0KCkpKSkge1xuICAgICAgbWF0Y2hlZCA9IG1bMF0sIGxlYWRpbmcgPSBtWzFdLCBuYW1lID0gbVsyXSwgZGVmVHlwZSA9IG1bM107XG4gICAgICByZXR1cm4gKGRlZlR5cGUgIT0gbnVsbCA/IGRlZlR5cGUubGVuZ3RoIDogdm9pZCAwKSA+IDA7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBpbml0Tm90ZWJvb2sgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBwZ207XG5cbiAgICBlbC5yZXBsYWNpbmcgPSB0cnVlO1xuICAgIHJlbW92ZU9sZERlZnMoZWwpO1xuICAgIHBnbSA9IG1hcmt1cERlZnMoZWwsIGZpbmREZWZzKGVsKSk7XG4gICAgZWwubm9ybWFsaXplKCk7XG4gICAgZWwucmVwbGFjaW5nID0gZmFsc2U7XG4gICAgaWYgKCFlbC5oYXNBdHRyaWJ1dGUoJ25vTGVpc3VyZUJhcicpKSB7XG4gICAgICBpbnNlcnRDb250cm9scyhlbCk7XG4gICAgICBlbC50ZXN0UmVzdWx0cy5pbm5lckhUTUwgPSBwZ21bMl07XG4gICAgfVxuICAgIHNuYXBzaG90KGVsLCBwZ20pO1xuICAgIHJldHVybiBwZ207XG4gIH07XG5cbiAgbWFrZUxhYmVsID0gZnVuY3Rpb24odGV4dCwgYykge1xuICAgIHZhciBub2RlO1xuXG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcbiAgICBub2RlLmlubmVySFRNTCA9IHRleHQ7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgYyk7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgbWFrZU9wdGlvbiA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgb3B0O1xuXG4gICAgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnT1BUSU9OJyk7XG4gICAgb3B0LnRleHQgPSBuYW1lO1xuICAgIHJldHVybiBvcHQ7XG4gIH07XG5cbiAgY3JlYXRlTm9kZSA9IGZ1bmN0aW9uKHR4dCkge1xuICAgIHZhciBzY3JhdGNoO1xuXG4gICAgc2NyYXRjaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHNjcmF0Y2guaW5uZXJIVE1MID0gdHh0O1xuICAgIHJldHVybiBzY3JhdGNoLmZpcnN0Q2hpbGQ7XG4gIH07XG5cbiAgY3JlYXRlRnJhZ21lbnQgPSBmdW5jdGlvbih0eHQpIHtcbiAgICB2YXIgZnJhZywgc2NyYXRjaDtcblxuICAgIHNjcmF0Y2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICBzY3JhdGNoLmlubmVySFRNTCA9IHR4dDtcbiAgICBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHdoaWxlIChzY3JhdGNoLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoc2NyYXRjaC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWc7XG4gIH07XG5cbiAgaW5zZXJ0Q29udHJvbHMgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBjb250cm9sRGl2LCBzYXZlQnV0dG9uLCBzcGFjZXIsIHRlc3RCdXR0b24sIHRoZW1lU2VsZWN0LCB2aWV3U2VsZWN0LCBfcmVmMywgX3JlZjQ7XG5cbiAgICBjb250cm9sRGl2ID0gY3JlYXRlTm9kZShcIjxkaXYgTGVpc3VyZU91dHB1dCBjb250ZW50RWRpdGFibGU9J2ZhbHNlJyBjbGFzcz0nbGVpc3VyZV9iYXInPjxkaXYgY2xhc3M9XFxcImxlaXN1cmVfYmFyX2NvbnRlbnRzXFxcIj5cXG4gIDxidXR0b24gbGVpc3VyZUlkPSdzYXZlQnV0dG9uJyBjbGFzcz1cXFwibGVpc3VyZV9zdGFydFxcXCI+U2F2ZTwvYnV0dG9uPlxcbiAgPGJ1dHRvbiBsZWlzdXJlSWQ9J3Rlc3RCdXR0b24nPlJ1biBUZXN0czwvYnV0dG9uPiA8c3BhbiBsZWlzdXJlSWQ9J3Rlc3RSZXN1bHRzJyBjbGFzcz1cXFwibm90cnVuXFxcIj48L3NwYW4+XFxuICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIGxlaXN1cmVJZD0nYXV0b3J1blRlc3RzJz48Yj5BdXRvPC9iPjwvaW5wdXQ+XFxuICA8c3BhbiBjbGFzcz1cXFwibGVpc3VyZV90aGVtZVxcXCI+VGhlbWU6IDwvc3Bhbj5cXG4gIDxzZWxlY3QgbGVpc3VyZUlkPSd0aGVtZVNlbGVjdCc+XFxuICAgIDxvcHRpb24gdmFsdWU9dGhpbj5UaGluPC9vcHRpb24+XFxuICAgIDxvcHRpb24gdmFsdWU9Z2F1ZHk+R2F1ZHk8L29wdGlvbj5cXG4gICAgPG9wdGlvbiB2YWx1ZT1jdGh1bGh1PkN0aHVsaHU8L29wdGlvbj5cXG4gIDwvc2VsZWN0PlxcbiAgPHNwYW4+VmlldzogPC9zcGFuPlxcbiAgPHNlbGVjdCBsZWlzdXJlSWQ9J3ZpZXdTZWxlY3QnPlxcbiAgICA8b3B0aW9uIHZhbHVlPWNvZGluZz5Db2Rpbmc8L29wdGlvbj5cXG4gICAgPG9wdGlvbiB2YWx1ZT1kZWJ1Z2dpbmc+RGVidWdnaW5nPC9vcHRpb24+XFxuICAgIDxvcHRpb24gdmFsdWU9dGVzdGluZz5UZXN0aW5nPC9vcHRpb24+XFxuICAgIDxvcHRpb24gdmFsdWU9cnVubmluZz5SdW5uaW5nPC9vcHRpb24+XFxuICA8L3NlbGVjdD5cXG48L2Rpdj5cIik7XG4gICAgc3BhY2VyID0gY3JlYXRlTm9kZShcIjxkaXYgTGVpc3VyZU91dHB1dCAgY29udGVudEVkaXRhYmxlPSdmYWxzZScgY2xhc3M9J2xlaXN1cmVfc3BhY2UnPjwvZGl2PlwiKTtcbiAgICBlbC5pbnNlcnRCZWZvcmUoc3BhY2VyLCBlbC5maXJzdENoaWxkKTtcbiAgICBlbC5pbnNlcnRCZWZvcmUoY29udHJvbERpdiwgZWwuZmlyc3RDaGlsZCk7XG4gICAgX3JlZjMgPSBnZXRFbGVtZW50cyhlbCwgWydkb3dubG9hZExpbmsnLCAndmlld0xpbmsnLCAnc2F2ZUJ1dHRvbicsICd0ZXN0QnV0dG9uJywgJ3Rlc3RSZXN1bHRzJywgJ2F1dG9ydW5UZXN0cycsICd0aGVtZVNlbGVjdCcsICd2aWV3U2VsZWN0J10pLCBlbC5sZWlzdXJlRG93bmxvYWRMaW5rID0gX3JlZjNbMF0sIGVsLmxlaXN1cmVWaWV3TGluayA9IF9yZWYzWzFdLCBzYXZlQnV0dG9uID0gX3JlZjNbMl0sIHRlc3RCdXR0b24gPSBfcmVmM1szXSwgZWwudGVzdFJlc3VsdHMgPSBfcmVmM1s0XSwgZWwuYXV0b3J1biA9IF9yZWYzWzVdLCB0aGVtZVNlbGVjdCA9IF9yZWYzWzZdLCB2aWV3U2VsZWN0ID0gX3JlZjNbN107XG4gICAgY29udHJvbERpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlQ29udHJvbHMnKSkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlQ29udHJvbHMnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGVDb250cm9scycpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIHJldHVybiBzYXZlUHJvZ3JhbShlbCk7XG4gICAgfSk7XG4gICAgdGVzdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJ1blRlc3RzKGVsKTtcbiAgICB9KTtcbiAgICB0aGVtZVNlbGVjdC52YWx1ZSA9IChfcmVmNCA9IGVsLmxlaXN1cmVUaGVtZSkgIT0gbnVsbCA/IF9yZWY0IDogJ3RoaW4nO1xuICAgIHRoZW1lU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgcmV0dXJuIGNoYW5nZVRoZW1lKGVsLCBldnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9KTtcbiAgICB2aWV3U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgcmV0dXJuIGNoYW5nZVZpZXcoZWwsIGV2dC50YXJnZXQudmFsdWUpO1xuICAgIH0pO1xuICAgIGVsLmF1dG9ydW4uY2hlY2tlZCA9IGVsLmF1dG9ydW5TdGF0ZTtcbiAgICBlbC5hdXRvcnVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgZWwuYXV0b3J1blN0YXRlID0gZWwuYXV0b3J1bi5jaGVja2VkO1xuICAgICAgaWYgKGVsLmF1dG9ydW5TdGF0ZSkge1xuICAgICAgICByZXR1cm4gcnVuVGVzdHMoZWwpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtYXJrdXBCdXR0b25zKGNvbnRyb2xEaXYpO1xuICB9O1xuXG4gIHNhdmVQcm9ncmFtID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHdyaXRlKGZpbGVuYW1lLCBnZXRNRERvY3VtZW50KCksIChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhbGVydChcIlNhdmluZyBcIiArIGZpbGVuYW1lKTtcbiAgICB9KSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgYWxlcnQoZXJyLnN0YWNrKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9KTtcbiAgfTtcblxuICBzaG93RmlsZW5hbWUgPSBmdW5jdGlvbihlbCkge1xuICAgIGlmIChlbCAmJiBmaWxlbmFtZSkge1xuICAgICAgZWwuaW5uZXJIVE1MID0gXCJTYXZlOiBcIiArIChmaWxlbmFtZS5wYXRoTmFtZSgpKTtcbiAgICAgIHJldHVybiBlbC50aXRsZSA9IGZpbGVuYW1lLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIHNob3dGaWxlbmFtZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbm9kZSwgX2ksIF9sZW4sIF9yZWYzLCBfcmVzdWx0cztcblxuICAgIF9yZWYzID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKCdbbGVpc3VyZUlkPXNhdmVCdXR0b25dJyk7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjNbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChzaG93RmlsZW5hbWUobm9kZSkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG5cbiAgc2V0RmlsZW5hbWUgPSBmdW5jdGlvbihuZXdOYW1lKSB7XG4gICAgY29uc29sZS5sb2coXCJTRVQgRklMRU5BTUU6IFwiICsgbmV3TmFtZSk7XG4gICAgZmlsZW5hbWUgPSBuZXdOYW1lIGluc3RhbmNlb2YgVVJJID8gbmV3TmFtZSA6IG5ldyBVUkkoZG9jdW1lbnQubG9jYXRpb24uaHJlZiwgbmV3TmFtZSk7XG4gICAgcmV0dXJuIHNob3dGaWxlbmFtZXMoKTtcbiAgfTtcblxuICBtYXJrdXBCdXR0b25zID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgYnRuLCBfaSwgX2xlbiwgX3JlZjMsIF9yZXN1bHRzO1xuXG4gICAgX3JlZjMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGJ0biA9IF9yZWYzW19pXTtcbiAgICAgIF9yZXN1bHRzLnB1c2gobWFya3VwQnV0dG9uKGJ0bikpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG5cbiAgbWFya3VwQnV0dG9uID0gZnVuY3Rpb24oYnRuKSB7XG4gICAgdmFyIGNsLCBfaSwgX2xlbiwgX3Jlc3VsdHM7XG5cbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gYnV0dG9uQ2xhc3Nlcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgY2wgPSBidXR0b25DbGFzc2VzW19pXTtcbiAgICAgIF9yZXN1bHRzLnB1c2goYnRuLmNsYXNzTGlzdC5hZGQoY2wpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIGdldEVsZW1lbnRzID0gZnVuY3Rpb24oZWwsIGlkcykge1xuICAgIHZhciBlbHMsIGlkLCBub2RlLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMywgX3Jlc3VsdHM7XG5cbiAgICBlbHMgPSB7fTtcbiAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsZWlzdXJlSWRdJyk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgbm9kZSA9IF9yZWYzW19pXTtcbiAgICAgIGVsc1tub2RlLmdldEF0dHJpYnV0ZSgnbGVpc3VyZUlkJyldID0gbm9kZTtcbiAgICB9XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBpZHMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICBpZCA9IGlkc1tfal07XG4gICAgICBfcmVzdWx0cy5wdXNoKGVsc1tpZF0pO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG5cbiAgZXNjYXBlSHRtbCA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bPD5dL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgICAgY2FzZSAnPCc6XG4gICAgICAgICAgICByZXR1cm4gJyZsdDsnO1xuICAgICAgICAgIGNhc2UgJz4nOlxuICAgICAgICAgICAgcmV0dXJuICcmZ3Q7JztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICB9O1xuXG4gIGxvYWRQcm9ncmFtID0gZnVuY3Rpb24oZWwsIGZpbGVzKSB7XG4gICAgdmFyIGZyO1xuXG4gICAgZWwgPSBnZXRCb3g7XG4gICAgZnIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIGZyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgZWwuaW5uZXJIVE1MID0gZXNjYXBlSHRtbChmci5yZXN1bHQpO1xuICAgICAgcmV0dXJuIGluaXROb3RlYm9vayhlbCk7XG4gICAgfTtcbiAgICByZXR1cm4gZnIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGVzLml0ZW0oMCkpO1xuICB9O1xuXG4gIGNvbmZpZ3VyZVNhdmVMaW5rID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgYmxvYiwgYnVpbGRlcjtcblxuICAgIHdpbmRvdy5VUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7XG4gICAgYnVpbGRlciA9IG5ldyBXZWJLaXRCbG9iQnVpbGRlcigpO1xuICAgIGJ1aWxkZXIuYXBwZW5kKGdldEVsZW1lbnRDb2RlKGVsKSk7XG4gICAgYmxvYiA9IGJ1aWxkZXIuZ2V0QmxvYigndGV4dC9wbGFpbicpO1xuICAgIGVsLmxlaXN1cmVEb3dubG9hZExpbmsuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgIHJldHVybiBlbC5sZWlzdXJlVmlld0xpbmsuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICB9O1xuXG4gIGdldEVsZW1lbnRDb2RlID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgcjtcblxuICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHIuc2VsZWN0Tm9kZShlbCk7XG4gICAgYyA9IHIuY2xvbmVDb250ZW50cygpLmZpcnN0Q2hpbGQ7XG4gICAgcmVtb3ZlT2xkRGVmcyhjKTtcbiAgICByZXR1cm4gYy50ZXh0Q29udGVudDtcbiAgfTtcblxuICBydW5UZXN0cyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGZhaWxlZCwgcGFzc2VkLCByZXN1bHRzQ2xhc3MsIHRlc3QsIF9pLCBfbGVuLCBfcmVmMztcblxuICAgIHBhc3NlZCA9IDA7XG4gICAgZmFpbGVkID0gMDtcbiAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2RlTWFpblRlc3QnKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICB0ZXN0ID0gX3JlZjNbX2ldO1xuICAgICAgaWYgKHJ1blRlc3QodGVzdCkpIHtcbiAgICAgICAgcGFzc2VkKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYWlsZWQrKztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVsLnRlc3RSZXN1bHRzKSB7XG4gICAgICByZXN1bHRzQ2xhc3MgPSBlbC50ZXN0UmVzdWx0cy5jbGFzc0xpc3Q7XG4gICAgICByZXN1bHRzQ2xhc3MucmVtb3ZlKCdub3RydW4nKTtcbiAgICAgIGlmICghZmFpbGVkKSB7XG4gICAgICAgIHJlc3VsdHNDbGFzcy5yZW1vdmUoJ2ZhaWxlZCcpO1xuICAgICAgICByZXN1bHRzQ2xhc3MuYWRkKCdwYXNzZWQnKTtcbiAgICAgICAgcmV0dXJuIGVsLnRlc3RSZXN1bHRzLmlubmVySFRNTCA9IHBhc3NlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdHNDbGFzcy5yZW1vdmUoJ3Bhc3NlZCcpO1xuICAgICAgICByZXN1bHRzQ2xhc3MuYWRkKCdmYWlsZWQnKTtcbiAgICAgICAgcmV0dXJuIGVsLnRlc3RSZXN1bHRzLmlubmVySFRNTCA9IFwiXCIgKyBwYXNzZWQgKyBcIi9cIiArIGZhaWxlZDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY2hhbmdlVGhlbWUgPSBmdW5jdGlvbihlbCwgdmFsdWUpIHtcbiAgICB2YXIgdGhlbWU7XG5cbiAgICB0aGVtZSA9IHZhbHVlO1xuICAgIGVsLmxlaXN1cmVUaGVtZSA9IHRoZW1lO1xuICAgIHJldHVybiBlbC5jbGFzc05hbWUgPSB0aGVtZTtcbiAgfTtcblxuICBjaGFuZ2VWaWV3ID0gZnVuY3Rpb24oZWwsIHZhbHVlKSB7XG4gICAgZGVidWcgPSB2YWx1ZSA9PT0gJ2RlYnVnZ2luZyc7XG4gICAgcmV0dXJuIGFsZXJ0KCduZXcgdmlldzogJyArIHZhbHVlICsgXCIsIGRlYnVnOiBcIiArIGRlYnVnKTtcbiAgfTtcblxuICB1bndyYXAgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgdmFyIHBhcmVudDtcblxuICAgIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLmZpcnN0Q2hpbGQsIG5vZGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG4gIH07XG5cbiAgcmVtb3ZlT2xkRGVmcyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGV4dHJhY3RlZCwgbSwgbm9kZSwgdHh0LCBfaSwgX2osIF9rLCBfbCwgX2xlbiwgX2xlbjEsIF9sZW4yLCBfbGVuMywgX3JlZjMsIF9yZWY0LCBfcmVmNTtcblxuICAgIGVsLmxlaXN1cmVEb3dubG9hZExpbmsgPSBudWxsO1xuICAgIGVsLmxlaXN1cmVWaWV3TGluayA9IG51bGw7XG4gICAgZXh0cmFjdGVkID0gW107XG4gICAgX3JlZjMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW0xlaXN1cmVPdXRwdXRdXCIpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmM1tfaV07XG4gICAgICByZW1vdmUobm9kZSk7XG4gICAgfVxuICAgIF9yZWY0ID0gZWwucXVlcnlTZWxlY3RvckFsbChcIltnZW5lcmF0ZWRubF1cIik7XG4gICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjQubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICBub2RlID0gX3JlZjRbX2pdO1xuICAgICAgdHh0ID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgICBpZiAodHh0Lm5vZGVUeXBlID09PSAzICYmIHR4dC5kYXRhW3R4dC5kYXRhLmxlbmd0aCAtIDFdID09PSAnXFxuJykge1xuICAgICAgICB0eHQuZGF0YSA9IHR4dC5kYXRhLnN1YnN0cmluZygwLCB0eHQuZGF0YS5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgX3JlZjUgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW0xlaXN1cmVdXCIpO1xuICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IF9yZWY1Lmxlbmd0aDsgX2sgPCBfbGVuMjsgX2srKykge1xuICAgICAgbm9kZSA9IF9yZWY1W19rXTtcbiAgICAgIGlmIChhZGRzTGluZShub2RlKSAmJiAobm9kZS5maXJzdENoaWxkICE9IG51bGwpKSB7XG4gICAgICAgIGV4dHJhY3RlZC5wdXNoKG5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICB9XG4gICAgICB1bndyYXAobm9kZSk7XG4gICAgfVxuICAgIGZvciAoX2wgPSAwLCBfbGVuMyA9IGV4dHJhY3RlZC5sZW5ndGg7IF9sIDwgX2xlbjM7IF9sKyspIHtcbiAgICAgIG5vZGUgPSBleHRyYWN0ZWRbX2xdO1xuICAgICAgaWYgKChub2RlLnBhcmVudE5vZGUgIT0gbnVsbCkgJiYgIWFkZHNMaW5lKG5vZGUpICYmIChub2RlLnByZXZpb3VzU2libGluZyAhPSBudWxsKSAmJiAhYWRkc0xpbmUobm9kZS5wcmV2aW91c1NpYmxpbmcpKSB7XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGV4dCgnXFxuJyksIG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbC50ZXh0Q29udGVudCA9IGVsLnRleHRDb250ZW50LnJlcGxhY2UoL1xcdUZFRkYvZywgJycpO1xuICAgIHR4dCA9IGVsLmxhc3RDaGlsZDtcbiAgICBpZiAoKHR4dCAhPSBudWxsID8gdHh0Lm5vZGVUeXBlIDogdm9pZCAwKSA9PT0gMyAmJiAobSA9IHR4dC5kYXRhLm1hdGNoKC8oXnxbXlxcbl0pKFxcbispJC8pKSkge1xuICAgICAgcmV0dXJuIHR4dC5kYXRhID0gdHh0LmRhdGEuc3Vic3RyaW5nKDAsIHR4dC5kYXRhLmxlbmd0aCAtIG1bMl0ubGVuZ3RoKTtcbiAgICB9XG4gIH07XG5cbiAgbWFya3VwRGVmcyA9IGZ1bmN0aW9uKGVsLCBkZWZzKSB7XG4gICAgdmFyIGF1dG8sIGJvZCwgYm9keSwgYngsIGRlZiwgaSwgbWFpbiwgbmFtZSwgbm90ZWJvb2tBdXRvTm9kZXMsIHBnbSwgcywgdGVzdCwgdGVzdHMsIHRvdGFsVGVzdHMsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYzLCBfcmVmNDtcblxuICAgIHBnbSA9ICcnO1xuICAgIGF1dG8gPSAnJztcbiAgICB0b3RhbFRlc3RzID0gMDtcbiAgICBub3RlYm9va0F1dG9Ob2RlcyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gZGVmcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgaSA9IGRlZnNbX2ldO1xuICAgICAgbWFpbiA9IGkubWFpbiwgbmFtZSA9IGkubmFtZSwgZGVmID0gaS5kZWYsIGJvZHkgPSBpLmJvZHksIHRlc3RzID0gaS50ZXN0cztcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGJ4ID0gYm94KG1haW4sICdjb2RlTWFpbicsIHRydWUpO1xuICAgICAgICBieC5hcHBlbmRDaGlsZChjb2RlU3BhbihuYW1lLCAnY29kZU5hbWUnKSk7XG4gICAgICAgIGJ4LmFwcGVuZENoaWxkKHRleHROb2RlKGRlZikpO1xuICAgICAgICBib2QgPSBjb2RlU3Bhbih0ZXh0Tm9kZShib2R5KSwgJ2NvZGVCb2R5Jyk7XG4gICAgICAgIGJvZC5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSgnXFxuJykpO1xuICAgICAgICBib2Quc2V0QXR0cmlidXRlKCdnZW5lcmF0ZWROTCcsICcnKTtcbiAgICAgICAgYnguYXBwZW5kQ2hpbGQoYm9kKTtcbiAgICAgICAgYnguYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZXZhbERvYyhlbCk7XG4gICAgICAgIH0pLCB0cnVlKTtcbiAgICAgICAgbWFya1BhcnRpYWxBcHBsaWVzKGJ4KTtcbiAgICAgICAgYWRkRGVmQ29udHJvbHMoYngpO1xuICAgICAgICBwZ20gKz0gXCJcIiArIG5hbWUgKyBcIiBcIiArIGRlZiArIFwiIFwiICsgYm9keSArIFwiXFxuXCI7XG4gICAgICB9IGVsc2UgaWYgKG1haW4gIT0gbnVsbCkge1xuICAgICAgICBieCA9IGJveChtYWluLCAnY29kZU1haW5FeHByJywgdHJ1ZSk7XG4gICAgICAgIHMgPSBjb2RlU3Bhbih0ZXh0Tm9kZShib2R5KSwgJ2NvZGVFeHByJyk7XG4gICAgICAgIHMuc2V0QXR0cmlidXRlKCdnZW5lcmF0ZWROTCcsICcnKTtcbiAgICAgICAgcy5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSgnXFxuJykpO1xuICAgICAgICBieC5hcHBlbmRDaGlsZChzKTtcbiAgICAgICAgbWFya1BhcnRpYWxBcHBsaWVzKGJ4KTtcbiAgICAgICAgaWYgKCgoX3JlZjMgPSBtYWluLmxlaXN1cmVBdXRvKSAhPSBudWxsID8gX3JlZjMubW9kZSA6IHZvaWQgMCkgPT09ICdzaWxlbnQnKSB7XG4gICAgICAgICAgYXV0byArPSBcIlwiICsgYm9keSArIFwiXFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCgoX3JlZjQgPSBtYWluLmxlaXN1cmVBdXRvKSAhPSBudWxsID8gX3JlZjQubW9kZSA6IHZvaWQgMCkgPT09ICdub3RlYm9vaycpIHtcbiAgICAgICAgICAgIG5vdGVib29rQXV0b05vZGVzLnB1c2goYngpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtYWtlT3V0cHV0Qm94KGJ4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gdGVzdHMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgIHRlc3QgPSB0ZXN0c1tfal07XG4gICAgICAgIHJlcGxhY2VSYW5nZSh0ZXN0LCBtYWtlVGVzdEJveCh0ZXN0LmxlaXN1cmVUZXN0KSk7XG4gICAgICAgIHRvdGFsVGVzdHMrKztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtwZ20sIGF1dG8sIHRvdGFsVGVzdHMsIG5vdGVib29rQXV0b05vZGVzXTtcbiAgfTtcblxuICBnZXREZWZOYW1lID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgaWYgKGFzdCBpbnN0YW5jZW9mIExlaXN1cmVfYW5ubyAmJiBnZXRBbm5vTmFtZShhc3QpID09PSAnZGVmaW5pdGlvbicpIHtcbiAgICAgIHJldHVybiBnZXRBbm5vRGF0YShhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgZ2V0QXN0ID0gZnVuY3Rpb24oYngsIGRlZikge1xuICAgIHZhciBkZWZOYW1lLCBfcmVmMztcblxuICAgIGlmIChieC5hc3QgIT0gbnVsbCkge1xuICAgICAgcGF0Y2hGdW5jQXN0KGJ4LmFzdCk7XG4gICAgICBieC5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVGdW5jJywgKF9yZWYzID0gYnguYXN0LmxlaXN1cmVOYW1lKSAhPSBudWxsID8gX3JlZjMgOiAnJyk7XG4gICAgICByZXR1cm4gYnguYXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWYgPSBkZWYgfHwgYngudGV4dENvbnRlbnQ7XG4gICAgICBkZWZOYW1lID0gZ2V0RGVmTmFtZShydW5Nb25hZChyeihMX25ld1BhcnNlTGluZSkobHooTmlsKSkobHooZGVmKSkpKTtcbiAgICAgIHNldEFzdChieCwgKGRlZk5hbWUgPyB7XG4gICAgICAgIGxlaXN1cmVOYW1lOiBkZWZOYW1lLFxuICAgICAgICBsZWlzdXJlU291cmNlOiBkZWZcbiAgICAgIH0gOiB7fSkpO1xuICAgICAgcmV0dXJuIGJ4LmFzdDtcbiAgICB9XG4gIH07XG5cbiAgc2V0QXN0ID0gZnVuY3Rpb24oYngsIGFzdCkge1xuICAgIGJ4LmFzdCA9IGFzdDtcbiAgICByZXR1cm4gcGF0Y2hGdW5jQXN0KGFzdCk7XG4gIH07XG5cbiAgcGF0Y2hGdW5jQXN0ID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIHBhcmVudDtcblxuICAgIGlmICgoYXN0ICE9IG51bGwgPyBhc3QubGVpc3VyZU5hbWUgOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgIHBhcmVudCA9IHdpbmRvd1tuYW1lU3ViKGFzdC5sZWlzdXJlTmFtZSldO1xuICAgICAgaWYgKHBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgIHBhcmVudC5hc3QgPSBhc3Q7XG4gICAgICAgIHBhcmVudC5zcmMgPSBhc3QubGVpc3VyZVNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZShcImFzdC1cIiArIGFzdC5sZWlzdXJlTmFtZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG1hcmtQYXJ0aWFsQXBwbGllcyA9IGZ1bmN0aW9uKGJ4LCBkZWYpIHt9O1xuXG4gIHRleHROb2RlID0gZnVuY3Rpb24odGV4dCkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KTtcbiAgfTtcblxuICBub2RlRm9yID0gZnVuY3Rpb24odGV4dCkge1xuICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB0ZXh0Tm9kZSh0ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9O1xuXG4gIGV2YWxPdXRwdXQgPSBmdW5jdGlvbihleEJveCwgbm9mb2N1cywgY29udCkge1xuICAgIHZhciBzZWxlY3Rvciwgc3RvcFVwZGF0ZXMsIHVwZGF0ZVNlbGVjdG9yLCBfcmVmMztcblxuICAgIGV4Qm94ID0gZ2V0Qm94KGV4Qm94KTtcbiAgICBpZiAoIW5vZm9jdXMpIHtcbiAgICAgIGZvY3VzQm94KGV4Qm94KTtcbiAgICB9XG4gICAgY2xlYW5PdXRwdXQoZXhCb3gsIHRydWUpO1xuICAgIHNlbGVjdG9yID0gZmluZFVwZGF0ZVNlbGVjdG9yKGV4Qm94LnNvdXJjZSk7XG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBleEJveC5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVVcGRhdGUnLCBzZWxlY3Rvcik7XG4gICAgfVxuICAgIG1ha2VPdXRwdXRDb250cm9scyhleEJveCk7XG4gICAgX3JlZjMgPSBnZXRFbGVtZW50cyhleEJveC5maXJzdENoaWxkLCBbJ2Nob29zZVVwZGF0ZScsICdzdG9wVXBkYXRlcyddKSwgdXBkYXRlU2VsZWN0b3IgPSBfcmVmM1swXSwgc3RvcFVwZGF0ZXMgPSBfcmVmM1sxXTtcbiAgICB1cGRhdGVTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIHJldHVybiBzZXRVcGRhdGUoZXhCb3gsIGV2dC50YXJnZXQudmFsdWUsIHRydWUpO1xuICAgIH0pO1xuICAgIHVwZGF0ZVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7XG4gICAgICBjID0gZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaDtcbiAgICAgIGlmIChjID09PSBFTlRFUikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVTZWxlY3Rvci5ibHVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdXBkYXRlU2VsZWN0b3IudmFsdWUgPSAoZXhCb3guZ2V0QXR0cmlidXRlKCdsZWlzdXJlVXBkYXRlJykpIHx8ICcnO1xuICAgIGV4Qm94LnVwZGF0ZVNlbGVjdG9yID0gdXBkYXRlU2VsZWN0b3I7XG4gICAgcmV0dXJuIGV2YWxCb3goZXhCb3guc291cmNlLCBleEJveCwgY29udCk7XG4gIH07XG5cbiAgZmluZFVwZGF0ZVNlbGVjdG9yID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIGRlZiwgZGVmVHlwZSwgbGVhZGluZywgbWF0Y2hlZCwgbmFtZSwgdTtcblxuICAgIGlmIChkZWYgPSBib3gudGV4dENvbnRlbnQubWF0Y2gocnooTF9kZWZQYXQpKSkge1xuICAgICAgbWF0Y2hlZCA9IGRlZlswXSwgbGVhZGluZyA9IGRlZlsxXSwgbmFtZSA9IGRlZlsyXSwgZGVmVHlwZSA9IGRlZlszXTtcbiAgICAgIGlmICh1ID0gbGVhZGluZy5tYXRjaCh1cGRhdGVQYXQpKSB7XG4gICAgICAgIHJldHVybiB1WzNdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBnZXRFeHByU291cmNlID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIGIsIHM7XG5cbiAgICBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGIgPSBnZXRCb3gocy5mb2N1c05vZGUpO1xuICAgIGlmIChiICE9PSBib3ggfHwgIXMucmFuZ2VDb3VudCB8fCBzLmdldFJhbmdlQXQoMCkuY29sbGFwc2VkKSB7XG4gICAgICByZXR1cm4gYm94LnRleHRDb250ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0UmFuZ2VUZXh0KHMuZ2V0UmFuZ2VBdCgwKSk7XG4gICAgfVxuICB9O1xuXG4gIHNldFVwZGF0ZSA9IGZ1bmN0aW9uKGVsLCBjaGFubmVsLCBwcmVzZXJ2ZVNvdXJjZSkge1xuICAgIHZhciBhc3QsIGRlZiwgZGVmVHlwZSwgaW5kZXgsIGxlYWRpbmcsIG1hdGNoZWQsIG5hbWUsIHIsIHR4dCwgdTtcblxuICAgIGVsLnNldEF0dHJpYnV0ZSgnbGVpc3VyZVVwZGF0ZScsIGNoYW5uZWwpO1xuICAgIGlmIChjaGFubmVsKSB7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCd1aS1zdGF0ZS1oaWdobGlnaHQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgndWktc3RhdGUtaGlnaGxpZ2h0Jyk7XG4gICAgfVxuICAgIGFzdCA9IGdldEFzdChlbC5zb3VyY2UpO1xuICAgIHR4dCA9IGVsLnNvdXJjZS50ZXh0Q29udGVudDtcbiAgICBpZiAoIXByZXNlcnZlU291cmNlICYmIChkZWYgPSB0eHQubWF0Y2gocnooTF9kZWZQYXQpKSkpIHtcbiAgICAgIG1hdGNoZWQgPSBkZWZbMF0sIGxlYWRpbmcgPSBkZWZbMV0sIG5hbWUgPSBkZWZbMl0sIGRlZlR5cGUgPSBkZWZbM107XG4gICAgICBpbmRleCA9IGRlZi5pbmRleDtcbiAgICAgIGlmICh1ID0gbGVhZGluZy5tYXRjaCh1cGRhdGVQYXQpKSB7XG4gICAgICAgIGluZGV4ICs9IHUuaW5kZXggKyB1WzFdLmxlbmd0aCArIHVbMl0ubGVuZ3RoO1xuICAgICAgICByID0gbWFrZVJhbmdlKGVsLnNvdXJjZSwgaW5kZXgsIGluZGV4ICsgdVszXS5sZW5ndGgpO1xuICAgICAgICByLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByID0gbWFrZVJhbmdlKGVsLnNvdXJjZSwgaW5kZXggKyBsZWFkaW5nLmxlbmd0aCwgaW5kZXggKyBsZWFkaW5nLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByLmluc2VydE5vZGUodGV4dE5vZGUoY2hhbm5lbCkpO1xuICAgICAgcmV0dXJuIGVsLnNvdXJjZS5ub3JtYWxpemUoKTtcbiAgICB9XG4gIH07XG5cbiAgaGFzTW9uYWRPdXRwdXQgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgX3JlZjMsIF9yZWY0O1xuXG4gICAgcmV0dXJuICgoX3JlZjMgPSBib3guZmlyc3RFbGVtZW50Q2hpbGQpICE9IG51bGwgPyAoX3JlZjQgPSBfcmVmMy5uZXh0RWxlbWVudFNpYmxpbmcpICE9IG51bGwgPyBfcmVmNC5uZXh0RWxlbWVudFNpYmxpbmcgOiB2b2lkIDAgOiB2b2lkIDApICE9IG51bGw7XG4gIH07XG5cbiAgY2hlY2tIaWRlU291cmNlID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIGhzO1xuXG4gICAgaWYgKCFib3guaGlkZU91dHB1dFNvdXJjZSAmJiBoYXNNb25hZE91dHB1dChib3gpKSB7XG4gICAgICBib3guaGlkZU91dHB1dFNvdXJjZSA9IHRydWU7XG4gICAgICBocyA9IGNyZWF0ZU5vZGUoXCI8YnV0dG9uIGNsYXNzPSdlZGl0VG9nZ2xlJyBzdHlsZT0nZmxvYXQ6cmlnaHQnPjwvYnV0dG9uPlwiKTtcbiAgICAgIG1hcmt1cEJ1dHRvbihocyk7XG4gICAgICBocy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdG9nZ2xlRWRpdChocyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBib3guZmlyc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQoaHMpO1xuICAgIH1cbiAgfTtcblxuICBtYWtlT3V0cHV0Q29udHJvbHMgPSBmdW5jdGlvbihleEJveCkge1xuICAgIGlmIChleEJveC5maXJzdENoaWxkLmZpcnN0Q2hpbGQgPT09IGV4Qm94LmZpcnN0Q2hpbGQubGFzdENoaWxkKSB7XG4gICAgICBleEJveC5maXJzdENoaWxkLmluc2VydEJlZm9yZShjcmVhdGVGcmFnbWVudChcIjxidXR0b24gb25jbGljaz0nTm90ZWJvb2suY2xlYXJPdXRwdXRCb3godGhpcyknPlg8L2J1dHRvbj5cIiksIGV4Qm94LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCk7XG4gICAgICBleEJveC5maXJzdENoaWxkLmFwcGVuZENoaWxkKGNyZWF0ZUZyYWdtZW50KFwiPGJ1dHRvbiBvbmNsaWNrPSdOb3RlYm9vay5tYWtlVGVzdENhc2UodGhpcyknIGxlaXN1cmVJZD0nbWFrZVRlc3RDYXNlJz5NYWtlIHRlc3RcXG5jYXNlPC9idXR0b24+PGI+VXBkYXRlOiA8L2I+PGlucHV0IHR5cGU9J3RleHQnXFxucGxhY2Vob2xkZXI9J0NsaWNrIGZvciB1cGRhdGluZycgbGlzdD0nY2hhbm5lbExpc3QnIGxlaXN1cmVJZD0nY2hvb3NlVXBkYXRlJz48L2lucHV0PjxidXR0b25cXG5vbmNsaWNrPSdOb3RlYm9vay5jbGVhclVwZGF0ZXModGhpcyknIGxlaXN1cmVJZD0nc3RvcFVwZGF0ZXMnPlN0b3AgVXBkYXRlczwvYnV0dG9uPlwiKSk7XG4gICAgICBtYXJrdXBCdXR0b25zKGV4Qm94KTtcbiAgICAgIHJldHVybiBleEJveC5jbGFzc0xpc3QuYWRkKCdmYXRDb250cm9scycpO1xuICAgIH1cbiAgfTtcblxuICBzaG93T3V0cHV0U291cmNlID0gZnVuY3Rpb24ob3V0cHV0KSB7XG4gICAgb3V0cHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGluZ1NvdXJjZScpO1xuICAgIHJldHVybiBvdXRwdXQuc291cmNlLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgfTtcblxuICBoaWRlT3V0cHV0U291cmNlID0gZnVuY3Rpb24ob3V0cHV0KSB7XG4gICAgY29uc29sZS5sb2coXCJISURFOiBcIiArIG91dHB1dCk7XG4gICAgb3V0cHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGluZ1NvdXJjZScpO1xuICAgIHJldHVybiBvdXRwdXQuc291cmNlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH07XG5cbiAgdG9nZ2xlRWRpdCA9IGZ1bmN0aW9uKHRvZ2dsZUJ1dHRvbikge1xuICAgIHZhciBvdXRwdXQ7XG5cbiAgICBvdXRwdXQgPSBnZXRCb3godG9nZ2xlQnV0dG9uKTtcbiAgICBpZiAob3V0cHV0LmNsYXNzTGlzdC5jb250YWlucygnaGlkaW5nU291cmNlJykpIHtcbiAgICAgIHJldHVybiBzaG93T3V0cHV0U291cmNlKG91dHB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBoaWRlT3V0cHV0U291cmNlKG91dHB1dCk7XG4gICAgfVxuICB9O1xuXG4gIGNsZWFyVXBkYXRlcyA9IGZ1bmN0aW9uKHdpZGdldCwgcHJlc2VydmVTb3VyY2UpIHtcbiAgICB2YXIgZXhCb3g7XG5cbiAgICBleEJveCA9IGdldEJveCh3aWRnZXQpO1xuICAgIGV4Qm94LnVwZGF0ZVNlbGVjdG9yLnZhbHVlID0gJyc7XG4gICAgcmV0dXJuIHNldFVwZGF0ZShleEJveCwgJycsIHByZXNlcnZlU291cmNlKTtcbiAgfTtcblxuICB1cGRhdGUgPSBmdW5jdGlvbih0eXBlLCBlbnYpIHtcbiAgICB2YXIgbm9kZSwgX2ksIF9sZW4sIF9yZWYzLCBfcmVzdWx0cztcblxuICAgIGVudiA9IGVudiAhPSBudWxsID8gZW52IDogZGVmYXVsdEVudjtcbiAgICBfcmVmMyA9IGVudi5vd25lci5xdWVyeVNlbGVjdG9yQWxsKFwiW2xlaXN1cmVVcGRhdGV+PSdcIiArIHR5cGUgKyBcIiddXCIpO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgbm9kZSA9IF9yZWYzW19pXTtcbiAgICAgIF9yZXN1bHRzLnB1c2goZXZhbE91dHB1dChub2RlLCB0cnVlKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBjbGVhck91dHB1dEJveCA9IGZ1bmN0aW9uKGV4Qm94KSB7XG4gICAgY2xlYXJVcGRhdGVzKGV4Qm94LCB0cnVlKTtcbiAgICByZXR1cm4gY2xlYW5PdXRwdXQoZXhCb3gpO1xuICB9O1xuXG4gIGNsZWFuT3V0cHV0ID0gZnVuY3Rpb24oZXhCb3gsIHByZXNlcnZlQ29udHJvbHMpIHtcbiAgICB2YXIgZmMsIF9yZXN1bHRzO1xuXG4gICAgZXhCb3ggPSBnZXRCb3goZXhCb3gpO1xuICAgIGV4Qm94LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhdENvbnRyb2xzJyk7XG4gICAgaWYgKCFwcmVzZXJ2ZUNvbnRyb2xzKSB7XG4gICAgICBleEJveC5oaWRlT3V0cHV0U291cmNlID0gbnVsbDtcbiAgICAgIGZjID0gZXhCb3guZmlyc3RDaGlsZDtcbiAgICAgIGZjLnJlbW92ZUNoaWxkKGZjLmZpcnN0Q2hpbGQpO1xuICAgICAgd2hpbGUgKGZjLmZpcnN0Q2hpbGQgIT09IGZjLmxhc3RDaGlsZCkge1xuICAgICAgICBmYy5yZW1vdmVDaGlsZChmYy5sYXN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIHdoaWxlIChleEJveC5maXJzdENoaWxkICE9PSBleEJveC5sYXN0Q2hpbGQpIHtcbiAgICAgIF9yZXN1bHRzLnB1c2goZXhCb3gucmVtb3ZlQ2hpbGQoZXhCb3gubGFzdENoaWxkKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBtYWtlVGVzdENhc2UgPSBmdW5jdGlvbihleEJveCkge1xuICAgIHZhciBib3gsIG91dHB1dCwgc291cmNlLCB0ZXN0O1xuXG4gICAgb3V0cHV0ID0gZ2V0Qm94KGV4Qm94KTtcbiAgICBzb3VyY2UgPSBvdXRwdXQuc291cmNlO1xuICAgIHRlc3QgPSB7XG4gICAgICBleHByOiBzb3VyY2UudGV4dENvbnRlbnQudHJpbSgpLFxuICAgICAgZXhwZWN0ZWQ6IGVzY2FwZUh0bWwoUGFyc2UucHJpbnQob3V0cHV0LnJlc3VsdCkpXG4gICAgfTtcbiAgICBib3ggPSBtYWtlVGVzdEJveCh0ZXN0LCBvd25lcihleEJveCkpO1xuICAgIHNvdXJjZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShib3gsIHNvdXJjZSk7XG4gICAgcmVtb3ZlKHNvdXJjZSk7XG4gICAgcmVtb3ZlKG91dHB1dCk7XG4gICAgYm94LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRleHROb2RlKCdcXHVGRUZGJyksIGJveCk7XG4gICAgYm94LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRleHROb2RlKCdcXHVGRUZGJyksIGJveC5uZXh0U2libGluZyk7XG4gICAgaWYgKG93bmVyKGJveCkuYXV0b3J1blN0YXRlKSB7XG4gICAgICByZXR1cm4gY2xpY2tUZXN0KGJveCk7XG4gICAgfVxuICB9O1xuXG4gIG1ha2VUZXN0Qm94ID0gZnVuY3Rpb24odGVzdCwgb3duZXIsIHNyYykge1xuICAgIHZhciBieCwgcztcblxuICAgIHNyYyA9IHNyYyAhPSBudWxsID8gc3JjIDogXCIjQHRlc3QgXCIgKyAoSlNPTi5zdHJpbmdpZnkodGVzdC5leHByKSkgKyBcIlxcbiNAZXhwZWN0ZWQgXCIgKyAoSlNPTi5zdHJpbmdpZnkodGVzdC5leHBlY3RlZCkpO1xuICAgIHMgPSBjb2RlU3BhbihzcmMsICdjb2RlVGVzdCcpO1xuICAgIHMuYXBwZW5kQ2hpbGQodGV4dE5vZGUoJ1xcbicpKTtcbiAgICBzLnNldEF0dHJpYnV0ZSgnZ2VuZXJhdGVkTkwnLCAnJyk7XG4gICAgYnggPSBjb2RlQm94KCdjb2RlTWFpblRlc3QnKTtcbiAgICBieC50ZXN0U3JjID0gcztcbiAgICBieC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NvZGVNYWluVGVzdCBub3RydW4nKTtcbiAgICBieC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICdmYWxzZScpO1xuICAgIGJ4LmFwcGVuZENoaWxkKHMpO1xuICAgIGJ4LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGNsaWNrVGVzdChieCk7XG4gICAgfSksIHRydWUpO1xuICAgIGJ4LnRlc3QgPSB0ZXN0O1xuICAgIHJldHVybiBieDtcbiAgfTtcblxuICBjbGlja1Rlc3QgPSBmdW5jdGlvbihieCkge1xuICAgIHZhciBleHByQm94LCByLCBzcDtcblxuICAgIGlmIChieC5jbGFzc0xpc3QuY29udGFpbnMoJ25vdHJ1bicpKSB7XG4gICAgICByZXR1cm4gcnVuVGVzdChieCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgci5zZXRTdGFydEJlZm9yZShieCk7XG4gICAgICByLnNldEVuZEFmdGVyKGJ4KTtcbiAgICAgIHIuZGVsZXRlQ29udGVudHMoKTtcbiAgICAgIHNwID0gY29kZVNwYW4oYngudGVzdC5leHByLCAnY29kZUV4cHInKTtcbiAgICAgIHNwLnNldEF0dHJpYnV0ZSgnZ2VuZXJhdGVkTkwnLCAnJyk7XG4gICAgICBleHByQm94ID0gYm94KHIsICdjb2RlTWFpbkV4cHInLCB0cnVlKTtcbiAgICAgIGV4cHJCb3guYXBwZW5kQ2hpbGQoc3ApO1xuICAgICAgcmV0dXJuIG1ha2VPdXRwdXRCb3goZXhwckJveCk7XG4gICAgfVxuICB9O1xuXG4gIHJ1blRlc3QgPSBmdW5jdGlvbihieCkge1xuICAgIHZhciBwYXNzZWQsIHRlc3Q7XG5cbiAgICB0ZXN0ID0gYngudGVzdDtcbiAgICBwYXNzZWQgPSB0cnVlO1xuICAgIHByb2Nlc3NMaW5lKHByZXBFeHByKHRlc3QuZXhwciksIHtcbiAgICAgIHZhbHVlczoge30sXG4gICAgICByZXF1aXJlOiByZXEsXG4gICAgICB3cml0ZTogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhzdHIpO1xuICAgICAgfSxcbiAgICAgIGRlYnVnOiBkZWJ1ZyxcbiAgICAgIHByb21wdDogZnVuY3Rpb24obXNnLCBjb250KSB7XG4gICAgICAgIHJldHVybiBjb250KG51bGwpO1xuICAgICAgfSxcbiAgICAgIHByb2Nlc3NSZXN1bHQ6IGZ1bmN0aW9uKHJlc3VsdCwgYXN0KSB7XG4gICAgICAgIHJldHVybiBwYXNzZWQgPSBzaG93UmVzdWx0KGJ4LCBlc2NhcGVIdG1sKFN0cmluZyhyZXN1bHQpKSwgZXNjYXBlSHRtbCh0ZXN0LmV4cGVjdGVkKSk7XG4gICAgICB9LFxuICAgICAgZXJyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIHByZXNlbnRWYWx1ZTogZnVuY3Rpb24oeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH1cbiAgICB9LCBpZGVudGl0eSk7XG4gICAgcmV0dXJuIHBhc3NlZDtcbiAgfTtcblxuICBzaG93UmVzdWx0ID0gZnVuY3Rpb24oYngsIGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgICB2YXIgY2w7XG5cbiAgICBjbCA9IGJ4LmNsYXNzTGlzdDtcbiAgICBjbC5yZW1vdmUoJ25vdHJ1bicpO1xuICAgIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgICBjbC5yZW1vdmUoJ2ZhaWxlZCcpO1xuICAgICAgY2wuYWRkKCdwYXNzZWQnKTtcbiAgICAgIGJ4LnRlc3RTcmMuaW5uZXJIVE1MID0gXCIjQHRlc3QgXCIgKyAoSlNPTi5zdHJpbmdpZnkoYngudGVzdC5leHByKSkgKyBcIlxcbiNAZXhwZWN0ZWQgXCIgKyAoSlNPTi5zdHJpbmdpZnkoYngudGVzdC5leHBlY3RlZCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbC5yZW1vdmUoJ3Bhc3NlZCcpO1xuICAgICAgY2wuYWRkKCdmYWlsZWQnKTtcbiAgICAgIGJ4LnRlc3RTcmMuaW5uZXJIVE1MID0gXCIjQHRlc3QgXCIgKyAoSlNPTi5zdHJpbmdpZnkoYngudGVzdC5leHByKSkgKyBcIlxcbiNAZXhwZWN0ZWQgXCIgKyAoSlNPTi5zdHJpbmdpZnkoYngudGVzdC5leHBlY3RlZCkpICsgXCJcXG4jQHJlc3VsdCBcIiArIChKU09OLnN0cmluZ2lmeShhY3R1YWwpKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXhwZWN0ZWQgPFwiICsgZXhwZWN0ZWQgKyBcIj4gYnV0IGdvdCA8XCIgKyBhY3R1YWwgKyBcIj5cIik7XG4gICAgfVxuICAgIHJldHVybiBhY3R1YWwgPT09IGV4cGVjdGVkO1xuICB9O1xuXG4gIHByZXBFeHByID0gZnVuY3Rpb24odHh0KSB7XG4gICAgcmV0dXJuIHR4dDtcbiAgfTtcblxuICBlbnZGb3IgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgZW52LCBleEJveCwgd2lkZ2V0O1xuXG4gICAgZXhCb3ggPSBnZXRCb3goYm94KTtcbiAgICB3aWRnZXQgPSBudWxsO1xuICAgIGVudiA9IHtcbiAgICAgIGZpbGVTZXR0aW5nczoge30sXG4gICAgICBkZWJ1ZzogZGVidWcsXG4gICAgICBmaW5pc2hlZEV2ZW50OiBmdW5jdGlvbihldnQsIGNoYW5uZWwpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZShjaGFubmVsICE9IG51bGwgPyBjaGFubmVsIDogJ2FwcCcsIHRoaXMpO1xuICAgICAgfSxcbiAgICAgIG93bmVyOiBvd25lcihib3gpLFxuICAgICAgYm94OiBib3gsXG4gICAgICByZXF1aXJlOiByZXEsXG4gICAgICB3cml0ZTogZnVuY3Rpb24obXNnKSB7XG4gICAgICAgIHZhciBkaXY7XG5cbiAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdvdXRwdXREaXYnKTtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IFwiXCIgKyBtc2cgKyBcIlxcblwiO1xuICAgICAgICBleEJveC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICBjaGVja0hpZGVTb3VyY2UoZXhCb3gpO1xuICAgICAgICByZXR1cm4gbWFya3VwQnV0dG9ucyhleEJveCk7XG4gICAgICB9LFxuICAgICAgZ2V0V2lkZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF3aWRnZXQpIHtcbiAgICAgICAgICB3aWRnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO1xuICAgICAgICAgIGV4Qm94LmFwcGVuZENoaWxkKHdpZGdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpZGdldDtcbiAgICAgIH0sXG4gICAgICBkZXN0cm95V2lkZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHdpZGdldCkge1xuICAgICAgICAgIHJldHVybiByZW1vdmUod2lkZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByb21wdDogZnVuY3Rpb24obXNnLCBjb250KSB7XG4gICAgICAgIHJldHVybiBjb250KHdpbmRvdy5wcm9tcHQobXNnKSk7XG4gICAgICB9LFxuICAgICAgcHJvY2Vzc1Jlc3VsdDogZnVuY3Rpb24ocmVzdWx0LCBhc3QpIHtcbiAgICAgICAgYm94LnJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgcmV0dXJuIHNldEFzdChib3gsIGFzdCk7XG4gICAgICB9LFxuICAgICAgcHJlc2VudFZhbHVlOiBwcmVzZW50VmFsdWUsXG4gICAgICBlcnI6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICB2YXIgYnRuLCBfcmVmMztcblxuICAgICAgICBidG4gPSBib3gucXVlcnlTZWxlY3RvcignW2xlaXN1cmVJZD1cIm1ha2VUZXN0Q2FzZVwiXScpO1xuICAgICAgICBpZiAoYnRuKSB7XG4gICAgICAgICAgcmVtb3ZlKGJ0bik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud3JpdGUoXCI8ZGl2IGNsYXNzPSdlcnJvckRpdic+XCIgKyBlc2NhcGVIdG1sKFwiRVJST1I6IFwiICsgKGVyci5sZWlzdXJlQ29udGV4dCA/IFwiXCIgKyBlcnIgKyBcIjpcXG5cIiArIChsZWlzdXJlQ29udGV4dFN0cmluZyhlcnIpKSArIFwiXFxuXCIgOiAnJykgKyAoKF9yZWYzID0gZXJyLnN0YWNrKSAhPSBudWxsID8gX3JlZjMgOiBlcnIpKSArIFwiPC9kaXY+XCIpO1xuICAgICAgfSxcbiAgICAgIGNsZWFudXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lXaWRnZXQoKTtcbiAgICAgICAgaWYgKHJvb3QubGFzdEVudiA9PT0gZW52KSB7XG4gICAgICAgICAgcmV0dXJuIHJvb3QubGFzdEVudiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGVudi5fX3Byb3RvX18gPSBkZWZhdWx0RW52O1xuICAgIGVudi5maWxlU2V0dGluZ3MudXJpID0gbmV3IFVSSShkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcbiAgICByb290Lmxhc3RFbnYgPSBlbnY7XG4gICAgcmV0dXJuIGVudjtcbiAgfTtcblxuICBsZWlzdXJlQ29udGV4dFN0cmluZyA9IGZ1bmN0aW9uKGVycikge1xuICAgIHZhciBmdW5jLCBvZmZzZXQ7XG5cbiAgICByZXR1cm4gKChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjMsIF9yZWY0LCBfcmVzdWx0cztcblxuICAgICAgX3JlZjMgPSBlcnIubGVpc3VyZUNvbnRleHQudG9BcnJheSgpO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgX3JlZjQgPSBfcmVmM1tfaV0sIGZ1bmMgPSBfcmVmNFswXSwgb2Zmc2V0ID0gX3JlZjRbMV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2gobGlua1NvdXJjZShmdW5jLCBvZmZzZXQpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KSgpKS5qb2luKCdcXG4nKTtcbiAgfTtcblxuICBsaW5rU291cmNlID0gZnVuY3Rpb24oZnVuY05hbWUsIG9mZnNldCkge307XG5cbiAgc2hvd1NvdXJjZSA9IGZ1bmN0aW9uKGZ1bmNOYW1lLCBvZmZzZXQpIHt9O1xuXG4gIG1ha2VPdXRwdXRCb3ggPSBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICB2YXIgY2wsIG5vZGUsIF9pLCBfbGVuLCBfcmVmMztcblxuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnTGVpc3VyZU91dHB1dCcsICcnKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnTGVpc3VyZScsICcnKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnTGVpc3VyZUJveCcsICcnKTtcbiAgICBfcmVmMyA9IGJveENsYXNzZXMub3V0cHV0O1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGNsID0gX3JlZjNbX2ldO1xuICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGNsKTtcbiAgICB9XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRFZGl0YWJsZScsICdmYWxzZScpO1xuICAgIG5vZGUuc291cmNlID0gc291cmNlO1xuICAgIHNvdXJjZS5vdXRwdXQgPSBub2RlO1xuICAgIG5vZGUuaW5uZXJIVE1MID0gXCI8ZGl2IGNsYXNzPSdjb250cm9scyc+PGJ1dHRvbiBvbmNsaWNrPSdOb3RlYm9vay5ldmFsT3V0cHV0KHRoaXMpJz4tJmd0OzwvYnV0dG9uPjwvZGl2PlwiO1xuICAgIG1hcmt1cEJ1dHRvbnMobm9kZSk7XG4gICAgc291cmNlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHNvdXJjZS5uZXh0U2libGluZyk7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgY29kZVNwYW4gPSBmdW5jdGlvbih0ZXh0LCBib3hUeXBlKSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKGJveFR5cGUsICcnKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnTGVpc3VyZScsICcnKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBib3hUeXBlKTtcbiAgICBpZiAodGV4dCkge1xuICAgICAgbm9kZS5hcHBlbmRDaGlsZChub2RlRm9yKHRleHQpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgY29kZUJveCA9IGZ1bmN0aW9uKGJveFR5cGUpIHtcbiAgICB2YXIgbm9kZTtcblxuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhZGRCb3hDbGFzc2VzKG5vZGUsIGJveFR5cGUpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlQm94JywgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlJywgJycpO1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHJldHVybiBjaGVja011dGF0ZUZyb21Nb2RpZmljYXRpb24oZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgYm94ID0gZnVuY3Rpb24ocmFuZ2UsIGJveFR5cGUsIGVtcHR5KSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICBub2RlID0gY29kZUJveChib3hUeXBlKTtcbiAgICBpZiAoZW1wdHkpIHtcbiAgICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocmFuZ2UuZXh0cmFjdENvbnRlbnRzKCkpO1xuICAgIH1cbiAgICByYW5nZS5pbnNlcnROb2RlKG5vZGUpO1xuICAgIHJldHVybiBub2RlO1xuICB9O1xuXG4gIGxpbmVQYXQgPSBuZXcgUmVnRXhwKFwiKFwiICsgKHJ6KExfbGluZVBhdCkuc291cmNlKSArIFwiKVwiKTtcblxuICBmaW5kRGVmcyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGRlZiwgcmFuZ2VzLCByZXN0LCBybmcsIHR4dDtcblxuICAgIHR4dCA9IGVsLnRleHRDb250ZW50O1xuICAgIHJlc3QgPSB0eHQ7XG4gICAgcmFuZ2VzID0gW107XG4gICAgd2hpbGUgKChkZWYgPSByZXN0Lm1hdGNoKHJ6KExfdW5hbmNob3JlZERlZlBhdCkpKSAmJiBkZWZbMV0ubGVuZ3RoICE9PSByZXN0Lmxlbmd0aCkge1xuICAgICAgcm5nID0gZ2V0UmFuZ2VzKGVsLCB0eHQsIHJlc3QsIGRlZiwgdHh0Lmxlbmd0aCAtIHJlc3QubGVuZ3RoKTtcbiAgICAgIGlmIChybmcpIHtcbiAgICAgICAgcmVzdCA9IHJuZy5uZXh0O1xuICAgICAgICBpZiAocm5nKSB7XG4gICAgICAgICAgcmFuZ2VzLnB1c2gocm5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByYW5nZXM7XG4gIH07XG5cbiAgdGVzdFBhdCA9IC8oI0B0ZXN0KFteXFxuXSopXFxuI0BleHBlY3RlZChbXlxcbl0qKSlcXG4vbTtcblxuICBnZXRSYW5nZXMgPSBmdW5jdGlvbihlbCwgdHh0LCByZXN0LCBkZWYsIHJlc3RPZmYpIHtcbiAgICB2YXIgYm9keSwgYm9keVN0YXJ0LCBkZWZUeXBlLCBlbmRQYXQsIGV4LCBleEVuZCwgbGVhZE9mZiwgbGVhZGluZywgbGVhZGluZ1NwYWNlcywgbG0sIG0sIG0yLCBtYWluRW5kLCBtYWluU3RhcnQsIG1hdGNoU3RhcnQsIG1hdGNoZWQsIG5hbWUsIG5hbWVFbmQsIG5hbWVSYXcsIG5leHQsIG91dGVyUmFuZ2UsIHIsIHJlc3QxLCB0LCB0T2ZmLCB0ZXN0cywgdGV4dFN0YXJ0LCBfcmVmMywgX3JlZjQsIF9yZWY1LCBfcmVmNjtcblxuICAgIF9yZWYzID0gbSA9IGRlZiwgbWF0Y2hlZCA9IF9yZWYzWzBdLCBsZWFkaW5nID0gX3JlZjNbMV0sIG5hbWVSYXcgPSBfcmVmM1syXSwgZGVmVHlwZSA9IF9yZWYzWzNdO1xuICAgIGlmICghcmVzdC50cmltKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAobSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gW21ha2VSYW5nZShlbCwgcmVzdE9mZiwgdHh0Lmxlbmd0aCksIG51bGwsIG51bGwsIFtdLCAnJ107XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlc3RzID0gW107XG4gICAgICBtYXRjaFN0YXJ0ID0gcmVzdE9mZiArIG0uaW5kZXg7XG4gICAgICBpZiAoZGVmVHlwZSA9PSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChuYW1lUmF3WzBdID09PSAnICcpIHtcbiAgICAgICAgbmFtZSA9IG51bGw7XG4gICAgICAgIGRlZlR5cGUgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmFtZSA9IG5hbWVSYXcudHJpbSgpIHx8IG51bGw7XG4gICAgICB9XG4gICAgICByZXN0MSA9IHJlc3Quc3Vic3RyaW5nKChkZWZUeXBlID8gbWF0Y2hlZCA6IGxlYWRpbmcpLmxlbmd0aCk7XG4gICAgICBlbmRQYXQgPSByZXN0MS5tYXRjaCgvXFxuK1teXFxzXXxcXG4/JC8pO1xuICAgICAgbmV4dCA9IGVuZFBhdCA/IHJlc3QxLnN1YnN0cmluZyhlbmRQYXQuaW5kZXgpIDogcmVzdDE7XG4gICAgICBtYWluRW5kID0gdHh0Lmxlbmd0aCAtIG5leHQubGVuZ3RoO1xuICAgICAgdCA9IGxlYWRpbmc7XG4gICAgICBsZWFkT2ZmID0gdE9mZiA9IHJlc3RPZmY7XG4gICAgICB3aGlsZSAobTIgPSB0Lm1hdGNoKHRlc3RQYXQpKSB7XG4gICAgICAgIHIgPSBtYWtlUmFuZ2UoZWwsIHRPZmYgKyBtMi5pbmRleCwgdE9mZiArIG0yLmluZGV4ICsgbTJbMV0ubGVuZ3RoKTtcbiAgICAgICAgci5sZWlzdXJlVGVzdCA9IHtcbiAgICAgICAgICBleHByOiBKU09OLnBhcnNlKG0yWzJdKSxcbiAgICAgICAgICBleHBlY3RlZDogSlNPTi5wYXJzZShtMlszXSlcbiAgICAgICAgfTtcbiAgICAgICAgdGVzdHMucHVzaChyKTtcbiAgICAgICAgdE9mZiArPSBtMi5pbmRleCArIG0yWzFdLmxlbmd0aDtcbiAgICAgICAgdCA9IGxlYWRpbmcuc3Vic3RyaW5nKHRPZmYgLSBsZWFkT2ZmKTtcbiAgICAgIH1cbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIG1haW5TdGFydCA9IG1hdGNoU3RhcnQgKyAoKF9yZWY0ID0gbGVhZGluZyAhPSBudWxsID8gbGVhZGluZy5sZW5ndGggOiB2b2lkIDApICE9IG51bGwgPyBfcmVmNCA6IDApO1xuICAgICAgICBuYW1lRW5kID0gbWFpblN0YXJ0ICsgbmFtZS5sZW5ndGg7XG4gICAgICAgIGxlYWRpbmdTcGFjZXMgPSAocmVzdDEubWF0Y2goL15cXHMqLykpWzBdLmxlbmd0aDtcbiAgICAgICAgYm9keVN0YXJ0ID0gdHh0Lmxlbmd0aCAtIChyZXN0MS5sZW5ndGggLSBsZWFkaW5nU3BhY2VzKTtcbiAgICAgICAgb3V0ZXJSYW5nZSA9IG1ha2VSYW5nZShlbCwgbWFpblN0YXJ0LCBtYWluRW5kKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtYWluOiBvdXRlclJhbmdlLFxuICAgICAgICAgIG5hbWU6IHR4dC5zdWJzdHJpbmcobWFpblN0YXJ0LCBuYW1lRW5kKSxcbiAgICAgICAgICBkZWY6IGRlZlR5cGUsXG4gICAgICAgICAgYm9keTogdHh0LnN1YnN0cmluZyhib2R5U3RhcnQsIG1haW5FbmQpLFxuICAgICAgICAgIHRlc3RzOiB0ZXN0cyxcbiAgICAgICAgICBuZXh0OiBuZXh0XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYWluU3RhcnQgPSBkZWZUeXBlID09PSAnPScgPyByZXN0T2ZmICsgbS5pbmRleCArIG1bMF0ubGVuZ3RoIDogbWF0Y2hTdGFydCArICgoX3JlZjUgPSBsZWFkaW5nICE9IG51bGwgPyBsZWFkaW5nLmxlbmd0aCA6IHZvaWQgMCkgIT0gbnVsbCA/IF9yZWY1IDogMCk7XG4gICAgICAgIGV4ID0gdHh0LnN1YnN0cmluZyhtYWluU3RhcnQsIG1haW5FbmQpLm1hdGNoKC9eKC4qW14gXFxuXSlbIFxcbl0qJC8pO1xuICAgICAgICBleEVuZCA9IGV4ID8gbWFpblN0YXJ0ICsgZXhbMV0ubGVuZ3RoIDogbWFpbkVuZDtcbiAgICAgICAgYm9keSA9IHR4dC5zdWJzdHJpbmcobWFpblN0YXJ0LCBleEVuZCk7XG4gICAgICAgIGlmIChib2R5LnRyaW0oKSkge1xuICAgICAgICAgIHRleHRTdGFydCA9IHJlc3RPZmYgKyBtLmluZGV4ICsgKHQgPyBsZWFkaW5nLmxlbmd0aCAtIHQubGVuZ3RoIDogMCk7XG4gICAgICAgICAgaWYgKCh0ICE9IG51bGwpICYmIChsbSA9IHQubWF0Y2goL15bIFxcbl0rLykpKSB7XG4gICAgICAgICAgICB0ZXh0U3RhcnQgKz0gbG1bMF0ubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobSA9IHQubWF0Y2goLyg/Ol58XFxuKSNAYXV0byggK1teXFxuXSopPyhcXG58JCkvKSkge1xuICAgICAgICAgICAgb3V0ZXJSYW5nZSA9IG1ha2VSYW5nZShlbCwgdGV4dFN0YXJ0LCBleEVuZCk7XG4gICAgICAgICAgICBvdXRlclJhbmdlLmxlaXN1cmVBdXRvID0gSlNPTi5wYXJzZShcIntcIiArICgoX3JlZjYgPSBtWzFdKSAhPSBudWxsID8gX3JlZjYgOiAnJykgKyBcIn1cIik7XG4gICAgICAgICAgICBpZiAob3V0ZXJSYW5nZS5sZWlzdXJlQXV0by5tb2RlID09PSAnbm90ZWJvb2snKSB7XG4gICAgICAgICAgICAgIG91dGVyUmFuZ2UubGVpc3VyZU5vZGUgPSBlbDtcbiAgICAgICAgICAgICAgb3V0ZXJSYW5nZS5sZWlzdXJlU3RhcnQgPSB0ZXh0U3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBtYWluOiBvdXRlclJhbmdlLFxuICAgICAgICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICAgICAgICBkZWY6IG51bGwsXG4gICAgICAgICAgICAgIGJvZHk6IHR4dC5zdWJzdHJpbmcodGV4dFN0YXJ0LCBleEVuZCksXG4gICAgICAgICAgICAgIHRlc3RzOiB0ZXN0cyxcbiAgICAgICAgICAgICAgZnVsbFRleHQ6IHR4dC5zdWJzdHJpbmcodGV4dFN0YXJ0LCBleEVuZCksXG4gICAgICAgICAgICAgIG5leHQ6IG5leHRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG91dGVyUmFuZ2UgPSBtYWtlUmFuZ2UoZWwsIHRleHRTdGFydCwgZXhFbmQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgbWFpbjogb3V0ZXJSYW5nZSxcbiAgICAgICAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgZGVmOiBudWxsLFxuICAgICAgICAgICAgICBib2R5OiB0eHQuc3Vic3RyaW5nKHRleHRTdGFydCwgZXhFbmQpLFxuICAgICAgICAgICAgICB0ZXN0czogdGVzdHMsXG4gICAgICAgICAgICAgIG5leHQ6IG5leHRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYWluOiBudWxsLFxuICAgICAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAgICAgIGRlZjogbnVsbCxcbiAgICAgICAgICAgIGJvZHk6IG51bGwsXG4gICAgICAgICAgICB0ZXN0czogdGVzdHMsXG4gICAgICAgICAgICBuZXh0OiBuZXh0XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBtYWtlUmFuZ2UgPSBmdW5jdGlvbihlbCwgb2ZmMSwgb2ZmMikge1xuICAgIHZhciBub2RlLCBvZmZzZXQsIHJhbmdlLCBfcmVmMywgX3JlZjQ7XG5cbiAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgX3JlZjMgPSBncnAoZWwsIG9mZjEsIGZhbHNlKSwgbm9kZSA9IF9yZWYzWzBdLCBvZmZzZXQgPSBfcmVmM1sxXTtcbiAgICBpZiAoKG9mZnNldCAhPSBudWxsKSAmJiBvZmZzZXQgPiAwKSB7XG4gICAgICByYW5nZS5zZXRTdGFydChub2RlLCBvZmZzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByYW5nZS5zZXRTdGFydEJlZm9yZShub2RlKTtcbiAgICB9XG4gICAgaWYgKG9mZjIgIT0gbnVsbCkge1xuICAgICAgX3JlZjQgPSBncnAoZWwsIG9mZjIsIHRydWUpLCBub2RlID0gX3JlZjRbMF0sIG9mZnNldCA9IF9yZWY0WzFdO1xuICAgICAgaWYgKG9mZnNldCAhPSBudWxsKSB7XG4gICAgICAgIHJhbmdlLnNldEVuZChub2RlLCBvZmZzZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZ2Uuc2V0RW5kQWZ0ZXIobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICBncnAgPSBmdW5jdGlvbihub2RlLCBjaGFyT2Zmc2V0LCBlbmQpIHtcbiAgICB2YXIgY2hpbGQsIG9mZnNldCwgcmV0LCBfcmVmMztcblxuICAgIF9yZWYzID0gcmV0ID0gZ2V0UmFuZ2VQb3NpdGlvbihub2RlLmZpcnN0Q2hpbGQsIGNoYXJPZmZzZXQsIGVuZCksIGNoaWxkID0gX3JlZjNbMF0sIG9mZnNldCA9IF9yZWYzWzFdO1xuICAgIGlmIChjaGlsZCkge1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9IGVsc2UgaWYgKG5vZGUubGFzdENoaWxkKSB7XG4gICAgICByZXR1cm4gbm9kZUVuZChub2RlLmxhc3RDaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbbm9kZSwgZW5kID8gMSA6IDBdO1xuICAgIH1cbiAgfTtcblxuICBnZXRSYW5nZVBvc2l0aW9uID0gZnVuY3Rpb24obm9kZSwgY2hhck9mZnNldCwgZW5kKSB7XG4gICAgdmFyIG5ld05vZGUsIG5ld09mZiwgcmV0LCBfcmVmMztcblxuICAgIGlmICghbm9kZSkge1xuICAgICAgcmV0dXJuIFtudWxsLCBjaGFyT2Zmc2V0XTtcbiAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIGlmIChub2RlLmxlbmd0aCA+IChlbmQgPyBjaGFyT2Zmc2V0IC0gMSA6IGNoYXJPZmZzZXQpKSB7XG4gICAgICAgIHJldHVybiBbbm9kZSwgY2hhck9mZnNldF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBjb250aW51ZVJhbmdlUG9zaXRpb24obm9kZSwgY2hhck9mZnNldCAtIG5vZGUubGVuZ3RoLCBlbmQpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlTmFtZSA9PT0gJ0JSJykge1xuICAgICAgaWYgKGNoYXJPZmZzZXQgPT09IChlbmQgPyAxIDogMCkpIHtcbiAgICAgICAgcmV0dXJuIFtub2RlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb250aW51ZVJhbmdlUG9zaXRpb24obm9kZSwgY2hhck9mZnNldCwgZW5kKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5vZGUuZmlyc3RDaGlsZCAhPSBudWxsKSB7XG4gICAgICBfcmVmMyA9IGdldFJhbmdlUG9zaXRpb24obm9kZS5maXJzdENoaWxkLCBjaGFyT2Zmc2V0LCBlbmQpLCBuZXdOb2RlID0gX3JlZjNbMF0sIG5ld09mZiA9IF9yZWYzWzFdO1xuICAgICAgaWYgKG5ld05vZGUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW25ld05vZGUsIG5ld09mZl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29udGludWVSYW5nZVBvc2l0aW9uKG5vZGUsIG5ld09mZiwgZW5kKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnRpbnVlUmFuZ2VQb3NpdGlvbihub2RlLCBjaGFyT2Zmc2V0LCBlbmQpO1xuICAgIH1cbiAgfTtcblxuICBjb250aW51ZVJhbmdlUG9zaXRpb24gPSBmdW5jdGlvbihub2RlLCBjaGFyT2Zmc2V0LCBlbmQpIHtcbiAgICB2YXIgbmV3T2ZmO1xuXG4gICAgbmV3T2ZmID0gY2hhck9mZnNldCAtICgoYWRkc0xpbmUobm9kZSkpIHx8ICgobm9kZS5uZXh0U2libGluZyAhPSBudWxsKSAmJiAoYWRkc0xpbmUobm9kZS5uZXh0U2libGluZykpKSA/IDEgOiAwKTtcbiAgICBpZiAoZW5kICYmIChuZXdPZmYgPT09IDEgfHwgY2hhck9mZnNldCA9PT0gMSkpIHtcbiAgICAgIHJldHVybiBub2RlRW5kKG5vZGUpO1xuICAgIH0gZWxzZSBpZiAobm9kZS5uZXh0U2libGluZyAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gZ2V0UmFuZ2VQb3NpdGlvbihub2RlLm5leHRTaWJsaW5nLCBuZXdPZmYsIGVuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb250aW51ZVJhbmdlUG9zaXRpb24obm9kZS5wYXJlbnROb2RlLCBuZXdPZmYsIGVuZCk7XG4gICAgfVxuICB9O1xuXG4gIG5vZGVFbmQgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIFtub2RlLCBub2RlLm5vZGVUeXBlID09PSAzID8gbm9kZS5sZW5ndGggOiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoIC0gMV07XG4gIH07XG5cbiAgYWRkc0xpbmUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIChub2RlICE9IG51bGwgPyBub2RlLm5vZGVUeXBlIDogdm9pZCAwKSA9PT0gMSAmJiAobm9kZS5ub2RlTmFtZSA9PT0gJ0JSJyB8fCAoZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5kaXNwbGF5ID09PSAnYmxvY2snICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSk7XG4gIH07XG5cbiAgcmVxID0gZnVuY3Rpb24oZmlsZSwgY29udCkge1xuICAgIHZhciBuYW1lLCBzO1xuXG4gICAgaWYgKCEoZmlsZS5tYXRjaCgvXFwuanMkLykpKSB7XG4gICAgICBmaWxlID0gXCJcIiArIGZpbGUgKyBcIi5qc1wiO1xuICAgIH1cbiAgICBuYW1lID0gZmlsZS5zdWJzdHJpbmcoMCwgZmlsZS5sZW5ndGggLSAzKTtcbiAgICBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgcy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGZpbGUpO1xuICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgTGVpc3VyZS5wcm9jZXNzRGVmcyhnbG9iYWxbbmFtZV0sIGdsb2JhbCk7XG4gICAgICBpZiAoY29udCkge1xuICAgICAgICByZXR1cm4gY29udChyeihMX2ZhbHNlKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7XG4gIH07XG5cbiAgcG9zdExvYWRRdWV1ZSA9IFtdO1xuXG4gIGxvYWRlZCA9IGZhbHNlO1xuXG4gIHF1ZXVlQWZ0ZXJMb2FkID0gZnVuY3Rpb24oZnVuYykge1xuICAgIGlmIChsb2FkZWQpIHtcbiAgICAgIHJldHVybiBmdW5jKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwb3N0TG9hZFF1ZXVlLnB1c2goZnVuYyk7XG4gICAgfVxuICB9O1xuXG4gIC8qXG4gICMgaGFuZGxlIGZvY3VzIG1hbnVhbGx5LCBiZWNhdXNlIGdyYWJiaW5nIGZvY3VzIGFuZCBibHVyIGV2ZW50cyBkb2Vzbid0IHNlZW0gdG8gd29yayBmb3IgdGhlIHBhcmVudFxuICAqL1xuXG5cbiAgZG9jRm9jdXMgPSBudWxsO1xuXG4gIGNvZGVGb2N1cyA9IG51bGw7XG5cbiAgZmluZEN1cnJlbnRDb2RlSG9sZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9yZWYzO1xuXG4gICAgcmV0dXJuIGZvY3VzQm94KChfcmVmMyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSkgIT0gbnVsbCA/IF9yZWYzLmZvY3VzTm9kZSA6IHZvaWQgMCk7XG4gIH07XG5cbiAgZm9jdXNCb3ggPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgbmV3Q29kZSwgb2xkLCBfcmVmMztcblxuICAgIG5ld0NvZGUgPSBudWxsO1xuICAgIHdoaWxlIChib3ggJiYgKGJveC5ub2RlVHlwZSAhPT0gMSB8fCAhaXNMZWlzdXJlQ29kZShib3gpKSkge1xuICAgICAgaWYgKGJveC5ub2RlVHlwZSA9PT0gMSAmJiAoKGJveC5nZXRBdHRyaWJ1dGUoJ0xlaXN1cmVCb3gnKSkgIT0gbnVsbCkpIHtcbiAgICAgICAgbmV3Q29kZSA9IGJveDtcbiAgICAgIH1cbiAgICAgIGJveCA9IGJveC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICBpZiAoYm94ICE9PSBkb2NGb2N1cykge1xuICAgICAgaWYgKGRvY0ZvY3VzICE9IG51bGwpIHtcbiAgICAgICAgZG9jRm9jdXMuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXNlZCcpO1xuICAgICAgfVxuICAgICAgZG9jRm9jdXMgPSBib3g7XG4gICAgICBpZiAoYm94ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKChfcmVmMyA9IGJveC5jbGFzc0xpc3QpICE9IG51bGwpIHtcbiAgICAgICAgICBfcmVmMy5hZGQoJ2ZvY3VzZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmV3Q29kZSAhPT0gY29kZUZvY3VzKSB7XG4gICAgICBvbGQgPSBjb2RlRm9jdXM7XG4gICAgICBjb2RlRm9jdXMgPSBuZXdDb2RlO1xuICAgICAgaWYgKG9sZCkge1xuICAgICAgICByZXR1cm4gYWNjZXB0Q29kZShvbGQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBvd25lciA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHdoaWxlIChib3ggJiYgKGJveC5ub2RlVHlwZSAhPT0gMSB8fCAhaXNMZWlzdXJlQ29kZShib3gpKSkge1xuICAgICAgYm94ID0gYm94LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBib3g7XG4gIH07XG5cbiAgaGlkZGVuUGF0ID0gLyhefFxcbikjQGhpZGRlbiAqKFxcbnwkKS87XG5cbiAgZXZhbEJveCA9IGZ1bmN0aW9uKGJveCwgZW52Qm94LCBjb250KSB7XG4gICAgdmFyIGVudjtcblxuICAgIGVudiA9IGVudkJveCAhPSBudWxsID8gZW52Rm9yKGVudkJveCkgOiBudWxsO1xuICAgIHByb2Nlc3NMaW5lKGJveC50ZXh0Q29udGVudCwgZW52LCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIGlmIChlbnYgIT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIGVudi5jbGVhbnVwID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBlbnYuY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gKGNvbnQgIT0gbnVsbCA/IGNvbnQgOiBmdW5jdGlvbih4KSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgICAgfSkocmVzdWx0KTtcbiAgICB9KTtcbiAgICBnZXRBc3QoYm94KTtcbiAgICBpZiAoYm94Lm91dHB1dCAmJiBoYXNNb25hZE91dHB1dChib3gub3V0cHV0KSAmJiBib3gudGV4dENvbnRlbnQubWF0Y2goaGlkZGVuUGF0KSkge1xuICAgICAgcmV0dXJuIGhpZGVPdXRwdXRTb3VyY2UoYm94Lm91dHB1dCk7XG4gICAgfSBlbHNlIGlmIChib3gudGV4dENvbnRlbnQubWF0Y2goaGlkZGVuUGF0KSkge1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiTk8gTU9OQUQsIEJVVCBNQVRDSEVTIEhJRERFTlwiKTtcbiAgICB9XG4gIH07XG5cbiAgYWNjZXB0Q29kZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgIGlmICgoYm94LmdldEF0dHJpYnV0ZSgnY29kZW1haW4nKSkgIT0gbnVsbCkge1xuICAgICAgZXZhbEJveChib3gpO1xuICAgICAgdXBkYXRlKCdjb21waWxlJyk7XG4gICAgICBpZiAob3duZXIoYm94KS5hdXRvcnVuU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHJ1blRlc3RzKG93bmVyKGJveCkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBlcnJTdHJpbmcgPSBmdW5jdGlvbihlcnIpIHtcbiAgICByZXR1cm4gZXJyLnN0YWNrO1xuICB9O1xuXG4gIGV2YWx1YXRpbmcgPSBmYWxzZTtcblxuICBldmFsdWF0aW9uUXVldWUgPSBbXTtcblxuICBldmFsTm9kZXMgPSBmdW5jdGlvbihub2Rlcykge1xuICAgIGlmIChldmFsdWF0aW5nKSB7XG4gICAgICByZXR1cm4gZXZhbHVhdGlvblF1ZXVlLnB1c2gobm9kZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY2hhaW5FdmFsTm9kZXMobm9kZXMpO1xuICAgIH1cbiAgfTtcblxuICBjaGFpbkV2YWxOb2RlcyA9IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgZXZhbHVhdGluZyA9IHRydWU7XG4gICAgcmV0dXJuIHJ1bkF1dG8obm9kZXMsIDAsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGV2YWx1YXRpb25RdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNoYWluRXZhbE5vZGVzKGV2YWx1YXRpb25RdWV1ZS5zaGlmdCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBldmFsdWF0aW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgZXZhbERvYyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGF1dG8sIGF1dG9Ob2RlcywgZSwgZXJyLCBwZ20sIHgsIF9yZWYzO1xuXG4gICAgX3JlZjMgPSBpbml0Tm90ZWJvb2soZWwpLCBwZ20gPSBfcmVmM1swXSwgYXV0byA9IF9yZWYzWzFdLCB4ID0gX3JlZjNbMl0sIGF1dG9Ob2RlcyA9IF9yZWYzWzNdO1xuICAgIHRyeSB7XG4gICAgICBpZiAoYXV0byB8fCBhdXRvTm9kZXMpIHtcbiAgICAgICAgYXV0byA9IFwiZG9cXG4gIFwiICsgKChhdXRvICE9IG51bGwgPyBhdXRvIDogJyMnKS50cmltKCkucmVwbGFjZSgvXFxuL2csICdcXG4gICcpKSArIFwiXFxuICBkZWxheVxcbiAgZmluaXNoTG9hZGluZ1wiO1xuICAgICAgICBnbG9iYWwubm9yZWRlZnMgPSBmYWxzZTtcbiAgICAgICAgTm90ZWJvb2sucXVldWVBZnRlckxvYWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXZhbERvY0NvZGUoZWwsIHBnbSk7XG4gICAgICAgICAgaWYgKGVsLmF1dG9ydW5TdGF0ZSkge1xuICAgICAgICAgICAgcnVuVGVzdHMoZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZXZhbE5vZGVzKGF1dG9Ob2Rlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICBlID0gZW52Rm9yKGVsKTtcbiAgICAgICAgZS53cml0ZSA9IGZ1bmN0aW9uKCkge307XG4gICAgICAgIGUuZXJyID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIGFsZXJ0KCdidWJiYSAnICsgZXJyU3RyaW5nKGVycikpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcHJvY2Vzc0xpbmUoYXV0bywgZSwgaWRlbnRpdHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGV2YWxEb2NDb2RlKGVsLCBwZ20pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgcmV0dXJuIHNob3dFcnJvcihlcnIsIFwiRXJyb3IgY29tcGlsaW5nIFwiICsgcGdtKTtcbiAgICB9XG4gIH07XG5cbiAgcnVuQXV0byA9IGZ1bmN0aW9uKG5vZGVzLCBpbmRleCwgY29udCkge1xuICAgIHZhciBub2RlO1xuXG4gICAgaWYgKGluZGV4IDwgbm9kZXMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlJVTk5JTkcgQVVUTzogXCIgKyBpbmRleCk7XG4gICAgICBub2RlID0gbm9kZXNbaW5kZXhdO1xuICAgICAgY29uc29sZS5sb2coXCJldmFsT3V0cHV0XCIsIG5vZGUsIG5vZGUub3V0cHV0KTtcbiAgICAgIHJldHVybiBldmFsT3V0cHV0KG5vZGUub3V0cHV0LCBmYWxzZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBydW5BdXRvKG5vZGVzLCBpbmRleCArIDEsIGNvbnQpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoY29udCAhPSBudWxsID8gY29udCA6IGZ1bmN0aW9uKCkge30pKCk7XG4gICAgfVxuICB9O1xuXG4gIHByb2Nlc3NMaW5lID0gZnVuY3Rpb24odGV4dCwgZW52LCBjb250KSB7XG4gICAgdmFyIGVycjtcblxuICAgIGlmICh0ZXh0KSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gcnVuTW9uYWQocnooTF9uZXdQYXJzZUxpbmUpKGx6KE5pbCkpKGx6KHRleHQpKSwgZW52LCBmdW5jdGlvbihhc3QpIHtcbiAgICAgICAgICB2YXIgZXJyLCByZXN1bHQ7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGdldFR5cGUoYXN0KSA9PT0gJ3BhcnNlRXJyJykge1xuICAgICAgICAgICAgICBlbnYud3JpdGUoZW52LnByZXNlbnRWYWx1ZShhc3QpKTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnYucHJvY2Vzc1Jlc3VsdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQoYXN0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gY29udChhc3QpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZXZhbChcIihcIiArIChnZW4oYXN0KSkgKyBcIilcIik7XG4gICAgICAgICAgICAgIGVudi53cml0ZShlbnYucHJlc2VudFZhbHVlKHJlc3VsdCkpO1xuICAgICAgICAgICAgICBpZiAoaXNNb25hZChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1vbmFkKHJlc3VsdCwgZW52LCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgIGVudi5wcm9jZXNzUmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gY29udChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZW52LnByb2Nlc3NSZXN1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnQocmVzdWx0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUjogXCIgKyBlcnIuc3RhY2spO1xuICAgICAgICAgICAgZW52LndyaXRlKGVudi5wcmVzZW50VmFsdWUoZXJyLnN0YWNrKSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVudi5wcm9jZXNzUmVzdWx0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQoZXJyLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250KGVyci5zdGFjayk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1I6IFwiICsgZXJyLnN0YWNrKTtcbiAgICAgICAgZW52LndyaXRlKGVudi5wcmVzZW50VmFsdWUoZXJyLnN0YWNrKSk7XG4gICAgICAgIGlmICh0eXBlb2YgZW52LnByb2Nlc3NSZXN1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGVudi5wcm9jZXNzUmVzdWx0KGVyci5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnQoZXJyLnN0YWNrKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnQoJycpO1xuICAgIH1cbiAgfTtcblxuICBzaG93RXJyb3IgPSBmdW5jdGlvbihlLCBtc2cpIHtcbiAgICBjb25zb2xlLmxvZyhtc2cpO1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIGNvbnNvbGUubG9nKGUuc3RhY2spO1xuICAgIHJldHVybiBhbGVydChlLnN0YWNrKTtcbiAgfTtcblxuICBldmFsRG9jQ29kZSA9IGZ1bmN0aW9uKGVsLCBwZ20pIHtcbiAgICByZXR1cm4gcnVuTW9uYWQocnooTF9ydW5GaWxlKShseihwZ20pKSwgZGVmYXVsdEVudiwgZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICB2YXIgbm9kZSwgX2ksIF9sZW4sIF9yZWYzLCBfcmVzdWx0cztcblxuICAgICAgX3JlZjMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdbY29kZU1haW5dJyk7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBub2RlID0gX3JlZjNbX2ldO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKGdldEFzdChub2RlKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfSk7XG4gIH07XG5cbiAgZGVmaW5lKCdnZXREb2N1bWVudCcsIGx6KG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgcmV0dXJuIGNvbnQocGVlckdldERvY3VtZW50KCkpO1xuICB9KSkpO1xuXG4gIGRlZmluZSgnZ2V0TGluaycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAwO1xuICB9KTtcblxuICBkZWZpbmUoJ3JlcGxhY2VEb2N1bWVudCcsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmVwbGFjZUNvbnRlbnRzKHJ6KHN0cikpO1xuICAgICAgcmV0dXJuIGNvbnQocnooTF90cnVlKSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2dkcml2ZU9wZW4nLCBseihtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgcmV0dXJuIEdkcml2ZVN0b3JhZ2UucnVuT3BlbihmdW5jdGlvbihqc29uKSB7XG4gICAgICB2YXIgX3JlZjM7XG5cbiAgICAgIGlmICgoanNvbiAhPSBudWxsID8ganNvbi5hY3Rpb24gOiB2b2lkIDApID09PSAncGlja2VkJyAmJiAoKF9yZWYzID0ganNvbi5kb2NzKSAhPSBudWxsID8gX3JlZjMubGVuZ3RoIDogdm9pZCAwKSA+IDApIHtcbiAgICAgICAgcmV0dXJuIEdkcml2ZVN0b3JhZ2UubG9hZEZpbGUoanNvbi5kb2NzWzBdLmlkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gY29udChyeihfc29tZSkobHooanNvbi5kb2NzWzBdLnRpdGxlKSkpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb250KHJ6KF9ub25lKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKSk7XG5cbiAgZGVmaW5lKCdnZXRGaWxlbmFtZScsIGx6KG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgdmFyIF9yZWYzO1xuXG4gICAgcmV0dXJuIGNvbnQoKF9yZWYzID0gZmlsZW5hbWUgIT0gbnVsbCA/IGZpbGVuYW1lLnBhdGhOYW1lKCkgOiB2b2lkIDApICE9IG51bGwgPyBfcmVmMyA6ICcnKTtcbiAgfSkpKTtcblxuICBkZWZpbmUoJ3NldFVSSScsIGx6KGZ1bmN0aW9uKHVyaSkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgc2V0RmlsZW5hbWUocnoodXJpKSk7XG4gICAgICByZXR1cm4gY29udChyeihMX3RydWUpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZ2V0VVJJJywgbHoobWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICB2YXIgX3JlZjM7XG5cbiAgICByZXR1cm4gY29udCgoX3JlZjMgPSBmaWxlbmFtZSAhPSBudWxsID8gZmlsZW5hbWUudG9TdHJpbmcoKSA6IHZvaWQgMCkgIT0gbnVsbCA/IF9yZWYzIDogJycpO1xuICB9KSkpO1xuXG4gIGRlZmluZSgnZmluaXNoTG9hZGluZycsIGx6KG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICB2YXIgaSwgX2ksIF9sZW47XG5cbiAgICBsb2FkZWQgPSB0cnVlO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gcG9zdExvYWRRdWV1ZS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgaSA9IHBvc3RMb2FkUXVldWVbX2ldO1xuICAgICAgcnooaSk7XG4gICAgfVxuICAgIHBvc3RMb2FkUXVldWUgPSBbXTtcbiAgICByZXR1cm4gY29udChyeihMX2ZhbHNlKSk7XG4gIH0pKSk7XG5cbiAgZGVmaW5lKCdtYXJrdXBCdXR0b25zJywgbHoobWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICBpZiAoZW52LmJveCkge1xuICAgICAgbWFya3VwQnV0dG9ucyhlbnYuYm94KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnQocnooTF9mYWxzZSkpO1xuICB9KSkpO1xuXG4gIGRlZmluZSgnYWxlcnQnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHdpbmRvdy5hbGVydChyeihzdHIpKTtcbiAgICAgIHJldHVybiBjb250KHJ6KExfZmFsc2UpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYmluZEV2ZW50JywgbHooZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnROYW1lKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZnVuYykge1xuICAgICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgICB2YXIgbm9kZTtcblxuICAgICAgICAgIG5vZGUgPSBlbnYuYm94LnF1ZXJ5U2VsZWN0b3Iocnooc2VsZWN0b3IpKTtcbiAgICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3Iocnooc2VsZWN0b3IpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coXCJBRERJTkcgRVZFTlQ6IFwiICsgKHJ6KHNlbGVjdG9yKSkgKyBcIiBcIiArIChyeihldmVudE5hbWUpKSArIFwiIE5PREU6IFwiICsgbm9kZSk7XG4gICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUoKSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVWRU5UOiBcIiArIChyeihzZWxlY3RvcikpICsgXCIgXCIgKyAocnooZXZlbnROYW1lKSkgKyBcIiBcIiArIChyeihmdW5jKSkpO1xuICAgICAgICAgICAgICByZXR1cm4gcnVuTW9uYWQocnooZnVuYykobHooZSkpLCBlbnZGb3IoZS50YXJnZXQpLCBmdW5jdGlvbigpIHt9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29udChyeihMX2ZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdxdWl0JywgbHood2luZG93LmNsb3NlKCkpKTtcblxuICBkZWZpbmUoJ2NvbmZpZycsIGx6KGZ1bmN0aW9uKGV4cHIpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHN3aXRjaCAocnooZXhwcikpIHtcbiAgICAgICAgY2FzZSAnYXV0b1Rlc3QnOlxuICAgICAgICAgIGF1dG9SdW4oZW52Lm93bmVyLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250KHJ6KExfZmFsc2UpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnbm90ZWJvb2tTZWxlY3Rpb24nLCBseihmdW5jdGlvbihmdW5jKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICB2YXIgYngsIG9mZnNldCwgcDEsIHAyLCByLCByMiwgc2VsO1xuXG4gICAgICBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBieCA9IGdldEJveChzZWwuZm9jdXNOb2RlKTtcbiAgICAgIGlmICgoYnggIT0gbnVsbCkgJiYgaGFzRnVuYyhieCwgZnVuYykpIHtcbiAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgciA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgICAgICB3aW5kb3cuciA9IHI7XG4gICAgICAgIHIyID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcjIuc2V0U3RhcnQoYngsIDApO1xuICAgICAgICByMi5zZXRFbmQoci5zdGFydENvbnRhaW5lciwgci5zdGFydE9mZnNldCk7XG4gICAgICAgIHAxID0gcjIuY2xvbmVDb250ZW50cygpLnRleHRDb250ZW50Lmxlbmd0aCAtIG9mZnNldDtcbiAgICAgICAgaWYgKCFyLmNvbGxhcHNlZCkge1xuICAgICAgICAgIHIyLnNldEVuZChyLmVuZENvbnRhaW5lciwgci5lbmRPZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHAyID0gcjIuY2xvbmVDb250ZW50cygpLnRleHRDb250ZW50Lmxlbmd0aCAtIG9mZnNldDtcbiAgICAgICAgcmV0dXJuIGNvbnQocnooX3NvbWUyKShseihwMSkpKGx6KHAyKSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnQocnooX25vbmUpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSkpO1xuXG4gIGhhc0Z1bmMgPSBmdW5jdGlvbihieCwgZnVuYykge1xuICAgIHZhciBhc3Q7XG5cbiAgICBhc3QgPSBnZXRBc3QoYngpO1xuICAgIHJldHVybiBhc3QgPT09IGZ1bmMoKS5hc3QgfHwgYXN0ID09PSBmdW5jLmFzdDtcbiAgfTtcblxuICBkZWZpbmUoJ25vdGVib29rQXN0JywgbHooZnVuY3Rpb24oZnVuYykge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgdmFyIGFzdCwgbm9kZTtcblxuICAgICAgaWYgKGZ1bmMubGVpc3VyZU5hbWUgIT0gbnVsbCkge1xuICAgICAgICBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltMZWlzdXJlRnVuYz1cIiArIGZ1bmMubGVpc3VyZU5hbWUgKyBcIl1cIik7XG4gICAgICAgIGlmIChub2RlICE9IG51bGwpIHtcbiAgICAgICAgICBhc3QgPSBnZXRBc3Qobm9kZSk7XG4gICAgICAgICAgcmV0dXJuIGNvbnQocnooX3NvbWUpKGx6KGFzdCkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnQocnooX25vbmUpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGF1dG9SdW4gPSBmdW5jdGlvbihlbCwgc3RhdGUpIHtcbiAgICB2YXIgX3JlZjM7XG5cbiAgICBlbC5hdXRvcnVuU3RhdGUgPSBzdGF0ZTtcbiAgICByZXR1cm4gKF9yZWYzID0gZWwuYXV0b3J1bikgIT0gbnVsbCA/IF9yZWYzLmNoZWNrZWQgPSBzdGF0ZSA6IHZvaWQgMDtcbiAgfTtcblxuICBoZWFkID0gZnVuY3Rpb24obCkge1xuICAgIHJldHVybiBsKGx6KGZ1bmN0aW9uKGhoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odHQpIHtcbiAgICAgICAgcmV0dXJuIHJ6KGhoKTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIHRhaWwgPSBmdW5jdGlvbihsKSB7XG4gICAgcmV0dXJuIGwobHooZnVuY3Rpb24oaGgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih0dCkge1xuICAgICAgICByZXR1cm4gcnoodHQpO1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgaWQgPSBmdW5jdGlvbih2KSB7XG4gICAgcmV0dXJuIHJ6KHYpO1xuICB9O1xuXG4gIGdldFN2Z0VsZW1lbnQgPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciBlbCwgc3ZnO1xuXG4gICAgaWYgKChlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSkpIHtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnID0gY3JlYXRlTm9kZShcIjxzdmcgaWQ9J0hJRERFTl9TVkcnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgdmVyc2lvbj0nMS4xJyBzdHlsZT0ndG9wOiAtMTAwMDAwOyBwb3NpdGlvbjogYWJzb2x1dGUnPjx0ZXh0IGlkPSdISURERU5fVEVYVCc+YnViYmE8L3RleHQ+PC9zdmc+XCIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdmcpO1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICB9XG4gIH07XG5cbiAgc3ZnTWVhc3VyZVRleHQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZikge1xuICAgICAgICB2YXIgYngsIHR4dDtcblxuICAgICAgICB0eHQgPSBnZXRTdmdFbGVtZW50KCdISURERU5fVEVYVCcpO1xuICAgICAgICBpZiAocnooc3R5bGUpKSB7XG4gICAgICAgICAgdHh0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCByeihzdHlsZSkpO1xuICAgICAgICB9XG4gICAgICAgIHR4dC5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSByeih0ZXh0KTtcbiAgICAgICAgYnggPSB0eHQuZ2V0QkJveCgpO1xuICAgICAgICByZXR1cm4gcnooZikobHooYngud2lkdGgpKShseihieC5oZWlnaHQpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcblxuICBwcmltY29uY2F0Tm9kZXMgPSBmdW5jdGlvbihub2Rlcykge1xuICAgIGlmIChub2RlcyA9PT0gcnooX25pbCkpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKGhlYWQobm9kZXMpKShpZCkgKyBjb25jYXROb2Rlcyh0YWlsKG5vZGVzKSk7XG4gICAgfVxuICB9O1xuXG4gIHRyYW5zZm9ybWVkUG9pbnQgPSBmdW5jdGlvbihwdCwgeCwgeSwgY3RtLCBpY3RtKSB7XG4gICAgcHQueCA9IHg7XG4gICAgcHQueSA9IHk7XG4gICAgcmV0dXJuIHB0Lm1hdHJpeFRyYW5zZm9ybShjdG0pLm1hdHJpeFRyYW5zZm9ybShpY3RtKTtcbiAgfTtcblxuICBzdmdNZWFzdXJlID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHJldHVybiBwcmltU3ZnTWVhc3VyZShjb250ZW50LCBiYXNlU3Ryb2tlV2lkdGgpO1xuICB9O1xuXG4gIHN2Z0JldHRlck1lYXN1cmUgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgcmV0dXJuIHByaW1TdmdNZWFzdXJlKGNvbnRlbnQsIHRyYW5zZm9ybVN0cm9rZVdpZHRoKTtcbiAgfTtcblxuICBwcmltU3ZnTWVhc3VyZSA9IGZ1bmN0aW9uKGNvbnRlbnQsIHRyYW5zZm9ybUZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZikge1xuICAgICAgdmFyIGJib3gsIGcsIHBhZCwgc3ZnO1xuXG4gICAgICBzdmcgPSBjcmVhdGVOb2RlKFwiPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZlcnNpb249JzEuMScgc3R5bGU9J3RvcDogLTEwMDAwMCc+PGc+XCIgKyAoY29udGVudCgpKSArIFwiPC9nPjwvc3ZnPlwiKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3ZnKTtcbiAgICAgIGcgPSBzdmcuZmlyc3RDaGlsZDtcbiAgICAgIGJib3ggPSBnLmdldEJCb3goKTtcbiAgICAgIHBhZCA9IGdldE1heFN0cm9rZVdpZHRoKGcsIGcsIHN2ZywgdHJhbnNmb3JtRnVuYyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHN2Zyk7XG4gICAgICByZXR1cm4gcnooZikobHooYmJveC54IC0gTWF0aC5jZWlsKHBhZCAvIDIpKSkobHooYmJveC55IC0gTWF0aC5jZWlsKHBhZCAvIDIpKSkobHooYmJveC53aWR0aCArIHBhZCkpKGx6KGJib3guaGVpZ2h0ICsgcGFkKSk7XG4gICAgfTtcbiAgfTtcblxuICBiYXNlRWxlbWVudHMgPSBbJ3BhdGgnLCAncmVjdCcsICdjaXJjbGUnLCAnZWxsaXBzZScsICdsaW5lJywgJ3BvbHlsaW5lJywgJ3BvbHlnb24nXTtcblxuICBnZXRNYXhTdHJva2VXaWR0aCA9IGZ1bmN0aW9uKGVsLCBiYXNlLCBzdmcsIHRyYW5zZm9ybUZ1bmMpIHtcbiAgICB2YXIgX3JlZjMsIF9yZWY0O1xuXG4gICAgaWYgKF9yZWYzID0gYmFzZS5ub2RlTmFtZSwgX19pbmRleE9mLmNhbGwoYmFzZUVsZW1lbnRzLCBfcmVmMykgPj0gMCkge1xuICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAoX3JlZjQgPSBnZXRDb21wdXRlZFN0eWxlKGJhc2UpLnN0cm9rZVdpZHRoKSAhPSBudWxsID8gX3JlZjQgOiAnMCcsIHN2Zyk7XG4gICAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyhlbCwgc3ZnLndpZHRoLmJhc2VWYWwudmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoYmFzZS5ub2RlTmFtZSA9PT0gJ3VzZScpIHtcbiAgICAgIHJldHVybiBnZXRNYXhTdHJva2VXaWR0aChiYXNlLCBiYXNlLmluc3RhbmNlUm9vdC5jb3JyZXNwb25kaW5nRWxlbWVudCwgc3ZnLCB0cmFuc2Zvcm1GdW5jKTtcbiAgICB9IGVsc2UgaWYgKGJhc2Uubm9kZU5hbWUgPT09ICdnJykge1xuICAgICAgcmV0dXJuIGZvbGRMZWZ0KChmdW5jdGlvbih2LCBuKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCh2LCBnZXRNYXhTdHJva2VXaWR0aChuLCBuLCBzdmcsIHRyYW5zZm9ybUZ1bmMpKTtcbiAgICAgIH0pLCAwLCBlbC5jaGlsZE5vZGVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9O1xuXG4gIGJhc2VTdHJva2VXaWR0aCA9IGZ1bmN0aW9uKGVsLCB3KSB7XG4gICAgcmV0dXJuIHc7XG4gIH07XG5cbiAgdHJhbnNmb3JtU3Ryb2tlV2lkdGggPSBmdW5jdGlvbihlbCwgdykge1xuICAgIHZhciBjdG0sIHRwMSwgdHAyLCB4LCB5O1xuXG4gICAgaWYgKHcgPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdG0gPSBlbC5nZXRTY3JlZW5DVE0oKTtcbiAgICAgIHRwMSA9IHRyYW5zZm9ybWVkUG9pbnQocHQsIGJ4LnggLSBNYXRoLmNlaWwodyksIGJ4LnkgLSBNYXRoLmNlaWwodyksIGN0bSwgaXNjdG0pO1xuICAgICAgdHAyID0gdHJhbnNmb3JtZWRQb2ludChwdCwgYngueCArIGJ4LndpZHRoICsgTWF0aC5jZWlsKHcpLCBieC55ICsgYnguaGVpZ2h0ICsgTWF0aC5jZWlsKHcpLCBjdG0sIGlzY3RtKTtcbiAgICAgIHggPSB0cDIueCAtIHRwMS54O1xuICAgICAgeSA9IHRwMi55IC0gdHAxLnk7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgIH1cbiAgfTtcblxuICBwcmV2aW91c1NpYmxpbmcgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgd2hpbGUgKChub2RlICE9IG51bGwgPyBub2RlLnBhcmVudE5vZGUgOiB2b2lkIDApICYmICFub2RlLnByZXZpb3VzU2libGluZykge1xuICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUgIT0gbnVsbCA/IG5vZGUucHJldmlvdXNTaWJsaW5nIDogdm9pZCAwO1xuICB9O1xuXG4gIG5leHRTaWJsaW5nID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHdoaWxlICgobm9kZSAhPSBudWxsID8gbm9kZS5wYXJlbnROb2RlIDogdm9pZCAwKSAmJiAhbm9kZS5uZXh0U2libGluZykge1xuICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUgIT0gbnVsbCA/IG5vZGUubmV4dFNpYmxpbmcgOiB2b2lkIDA7XG4gIH07XG5cbiAgaGlkZUNvbnRyb2xTZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnRyb2xTZWN0aW9uO1xuXG4gICAgY29udHJvbFNlY3Rpb24gPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJ1tsZWlzdXJlU2VjdGlvbj1cIkxlaXN1cmUgQ29udHJvbHNcIl0nKTtcbiAgICBpZiAoIWNvbnRyb2xTZWN0aW9uKSB7XG4gICAgICBjb250cm9sU2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoY29udHJvbFNlY3Rpb24sIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICByb290Lm1hcmt1cEVsZW1lbnQoY29udHJvbFNlY3Rpb24sIFwiIyBMZWlzdXJlIENvbnRyb2xzXFxuXFxuIyMgRmlsZSBTYXZlIGFuZCBMb2FkXFxuYGBgXFxuc2F2ZUZpbGVcXG5cXG5zYXZlQXMgJ2ZpbGVuYW1lJ1xcblxcbnNhdmVBcyBwaWNrRmlsZVxcblxcbmxvYWRGaWxlXFxuXFxuZW1wdHlGaWxlXFxuYGBgXCIpO1xuICAgICAgdW53cmFwKGNvbnRyb2xTZWN0aW9uKTtcbiAgICB9XG4gICAgY29udHJvbFNlY3Rpb24uY2xhc3NMaXN0LmFkZChsZWlzdXJlX2NvbnRyb2xzKTtcbiAgICByZXR1cm4gY29udHJvbFNlY3Rpb24uY2xhc3NMaXN0LmFkZChoaWRkZW4pO1xuICB9O1xuXG4gIGRlZmluZSgncHJpbnRWYWx1ZScsIGx6KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIGlmIChyeih2YWx1ZSkgIT09IHJ6KExfbmlsKSkge1xuICAgICAgICBlbnYud3JpdGUoXCJcIiArIChlbnYucHJlc2VudFZhbHVlKHJ6KHZhbHVlKSkpICsgXCJcXG5cIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udChMX2ZhbHNlKCkpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmYXVsdEVudi5yZXF1aXJlID0gcmVxO1xuXG4gIHJvb3Quc3ZnTWVhc3VyZVRleHQgPSBzdmdNZWFzdXJlVGV4dDtcblxuICByb290LnN2Z01lYXN1cmUgPSBzdmdNZWFzdXJlO1xuXG4gIHJvb3QuaW5pdE5vdGVib29rID0gaW5pdE5vdGVib29rO1xuXG4gIHJvb3QuYmluZE5vdGVib29rID0gYmluZE5vdGVib29rO1xuXG4gIHJvb3QuYmluZEFsbCA9IGJpbmRBbGw7XG5cbiAgcm9vdC5ldmFsT3V0cHV0ID0gZXZhbE91dHB1dDtcblxuICByb290Lm1ha2VUZXN0Q2FzZSA9IG1ha2VUZXN0Q2FzZTtcblxuICByb290LmNsZWFuT3V0cHV0ID0gY2xlYW5PdXRwdXQ7XG5cbiAgcm9vdC5jbGVhck91dHB1dEJveCA9IGNsZWFyT3V0cHV0Qm94O1xuXG4gIHJvb3QuZW52Rm9yID0gZW52Rm9yO1xuXG4gIHJvb3QucXVldWVBZnRlckxvYWQgPSBxdWV1ZUFmdGVyTG9hZDtcblxuICByb290LmV2YWxEb2MgPSBldmFsRG9jO1xuXG4gIHJvb3QuZ2V0Qm94ID0gZ2V0Qm94O1xuXG4gIHJvb3QubWFrZVJhbmdlID0gbWFrZVJhbmdlO1xuXG4gIHJvb3QuZ3JwID0gZ3JwO1xuXG4gIHJvb3QuY2hhbmdlVGhlbWUgPSBjaGFuZ2VUaGVtZTtcblxuICByb290LnNldFNuYXBwZXIgPSBzZXRTbmFwcGVyO1xuXG4gIHJvb3QudXBkYXRlID0gdXBkYXRlO1xuXG4gIHJvb3QuY2xlYXJVcGRhdGVzID0gY2xlYXJVcGRhdGVzO1xuXG4gIHJvb3Quc2hvd0FzdCA9IHNob3dBc3Q7XG5cbiAgcm9vdC50b2dnbGVFZGl0ID0gdG9nZ2xlRWRpdDtcblxuICByb290LnNob3dTb3VyY2UgPSBzaG93U291cmNlO1xuXG4gIHJvb3QuYm9vdE5vdGVib29rID0gYm9vdE5vdGVib29rO1xuXG4gIHJvb3QuY3JlYXRlTm9kZSA9IGNyZWF0ZU5vZGU7XG5cbiAgcm9vdC5FTlRFUiA9IEVOVEVSO1xuXG4gIHJvb3QudGV4dE5vZGUgPSB0ZXh0Tm9kZTtcblxuICByb290LmNsZWFuRW1wdHlOb2RlcyA9IGNsZWFuRW1wdHlOb2RlcztcblxuICByb290LmlzTGVpc3VyZUNvZGUgPSBpc0xlaXN1cmVDb2RlO1xuXG4gIHJvb3QuZ2V0RWxlbWVudENvZGUgPSBnZXRFbGVtZW50Q29kZTtcblxuICByb290LnJ1blRlc3RzID0gcnVuVGVzdHM7XG5cbiAgcm9vdC5wcmV2aW91c1NpYmxpbmcgPSBwcmV2aW91c1NpYmxpbmc7XG5cbiAgcm9vdC5uZXh0U2libGluZyA9IG5leHRTaWJsaW5nO1xuXG4gIHJvb3QucHJlc2VudExlaXN1cmVDb2RlID0gcHJlc2VudExlaXN1cmVDb2RlO1xuXG4gIHJvb3QubWVyZ2VMZWlzdXJlQ29kZSA9IG1lcmdlTGVpc3VyZUNvZGU7XG5cbiAgcm9vdC5oaWdobGlnaHROb3RlYm9va0Z1bmN0aW9uID0gaGlnaGxpZ2h0Tm90ZWJvb2tGdW5jdGlvbjtcblxuICByb290LkVTQyA9IEVTQztcblxuICByb290LkhPTUUgPSBIT01FO1xuXG4gIHJvb3QuRU5EID0gRU5EO1xuXG4gIHJvb3QuUEFHRV9VUCA9IFBBR0VfVVA7XG5cbiAgcm9vdC5QQUdFX0RPV04gPSBQQUdFX0RPV047XG5cbiAgcm9vdC5MRUZUX0FSUk9XID0gTEVGVF9BUlJPVztcblxuICByb290LlVQX0FSUk9XID0gVVBfQVJST1c7XG5cbiAgcm9vdC5SSUdIVF9BUlJPVyA9IFJJR0hUX0FSUk9XO1xuXG4gIHJvb3QuRE9XTl9BUlJPVyA9IERPV05fQVJST1c7XG5cbiAgcm9vdC5hcnJvd3MgPSBhcnJvd3M7XG5cbiAgcm9vdC5jbG9zZVdpbmRvdyA9IGNsb3NlV2luZG93O1xuXG4gIHJvb3QubWFya3VwQnV0dG9uID0gbWFya3VwQnV0dG9uO1xuXG4gIHJvb3QubWFya3VwQnV0dG9ucyA9IG1hcmt1cEJ1dHRvbnM7XG5cbiAgcm9vdC5nZXRBc3QgPSBnZXRBc3Q7XG5cbiAgcm9vdC5pbnNlcnRDb250cm9scyA9IGluc2VydENvbnRyb2xzO1xuXG4gIHJvb3QuZGVsYXkgPSBkZWxheTtcblxuICByb290LnNldEZpbGVuYW1lID0gc2V0RmlsZW5hbWU7XG5cbiAgcm9vdC51bndyYXAgPSB1bndyYXA7XG5cbiAgcm9vdC5yZW1vdmUgPSByZW1vdmU7XG5cbiAgcm9vdC53cmFwUmFuZ2UgPSB3cmFwUmFuZ2U7XG5cbiAgcm9vdC5yZXBsYWNlQ29udGVudHMgPSByZXBsYWNlQ29udGVudHM7XG5cbiAgcm9vdC5ldmVudCA9IGV2ZW50O1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9bm90ZWJvb2subWFwXG4qL1xuXG59KShzZWxmKSIsIihmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCl7Ly8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuLypcbkNvcHlyaWdodCAoQykgMjAxMywgQmlsbCBCdXJkaWNrLCBUaW55IENvbmNlcHRzOiBodHRwczovL2dpdGh1Yi5jb20vem90L0xlaXN1cmVcblxuKGxpY2Vuc2VkIHdpdGggWkxJQiBsaWNlbnNlKVxuXG5UaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxud2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG5hcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuXG5QZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbmluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbmZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcblxuMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbmNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG5pbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbmFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG5cbjIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG5taXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG5cbjMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIE1vbmFkLCBOaWwsIFNpbXB5Q29ucywgYWN0b3JzLCBhbXQsIGFzdDJKc29uLCBhc3luY01vbmFkLCBiYXNpY0NhbGwsIGJvb2xlYW5Gb3IsIGNhbGwsIGNhbGxNb25hZCwgY29ucywgY29uc0Zyb20sIGNvbnRpbnVlTW9uYWRzLCBjdXJyeSwgZGVmYXVsdEVudiwgZGVmaW5lLCBlbnN1cmVMZWlzdXJlQ2xhc3MsIGZ1bmN0aW9uSW5mbywgZ2V0RGF0YVR5cGUsIGdldE1vbmFkU3luY01vZGUsIGdldFR5cGUsIGdldFZhbHVlLCBoYW10LCBoZWFkLCBpZGVudGl0eSwgaXNNb25hZCwgbGF6eSwgbGVmdCwgbHosIG1ha2VIYW10LCBtYWtlTW9uYWQsIG1ha2VTeW5jTW9uYWQsIG1lbW8sIG1vbmFkTW9kZVN5bmMsIG5hbWVTdWIsIG5ld1J1bk1vbmFkLCBuZXh0TW9uYWQsIG5leHROb2RlLCBub25lLCBwYXJlbnNDb250ZW50LCBwYXJlbnNFbmQsIHBhcmVuc1N0YXJ0LCByZWFkRGlyLCByZWFkRmlsZSwgcmVwbGFjZUVyciwgcmVzb2x2ZSwgcmlnaHQsIHJvb3QsIHJ1bk1vbmFkLCByeiwgc2V0RGF0YVR5cGUsIHNldFR5cGUsIHNldFZhbHVlLCBzZXRXYXJuQXN5bmMsIHNpbXB5Q29ucywgc29tZSwgc3RhdEZpbGUsIHN0ckNvb3JkLCBzdHJGcm9tTGlzdCwgc3RyVG9MaXN0LCBzdWJjdXJyeSwgdGFpbCwgdG9rZW5Qb3MsIHRva2VuU3RyaW5nLCB0cmFtcEN1cnJ5LCB2YWx1ZXMsIHdhcm5Bc3luYywgd2l0aFN5bmNNb2RlRG8sIHdyaXRlRmlsZSwgXywgX2ZhbHNlLCBfaWRlbnRpdHksIF9yZWYsIF9yZWYxLCBfdHJ1ZSxcbiAgICBfX3NsaWNlID0gW10uc2xpY2U7XG5cbiAgX3JlZiA9IHJvb3QgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vYmFzZScpLCByZWFkRmlsZSA9IF9yZWYucmVhZEZpbGUsIHN0YXRGaWxlID0gX3JlZi5zdGF0RmlsZSwgcmVhZERpciA9IF9yZWYucmVhZERpciwgd3JpdGVGaWxlID0gX3JlZi53cml0ZUZpbGUsIGRlZmF1bHRFbnYgPSBfcmVmLmRlZmF1bHRFbnYsIFNpbXB5Q29ucyA9IF9yZWYuU2ltcHlDb25zLCBzaW1weUNvbnMgPSBfcmVmLnNpbXB5Q29ucywgcmVzb2x2ZSA9IF9yZWYucmVzb2x2ZSwgbGF6eSA9IF9yZWYubGF6eTtcblxuICBfcmVmMSA9IHJlcXVpcmUoJy4vYXN0JyksIGRlZmluZSA9IF9yZWYxLmRlZmluZSwgY29ucyA9IF9yZWYxLmNvbnMsIE5pbCA9IF9yZWYxLk5pbCwgaGVhZCA9IF9yZWYxLmhlYWQsIHRhaWwgPSBfcmVmMS50YWlsLCBnZXRUeXBlID0gX3JlZjEuZ2V0VHlwZSwgZ2V0RGF0YVR5cGUgPSBfcmVmMS5nZXREYXRhVHlwZSwgYXN0Mkpzb24gPSBfcmVmMS5hc3QySnNvbiwgZW5zdXJlTGVpc3VyZUNsYXNzID0gX3JlZjEuZW5zdXJlTGVpc3VyZUNsYXNzLCBzZXRUeXBlID0gX3JlZjEuc2V0VHlwZSwgc2V0RGF0YVR5cGUgPSBfcmVmMS5zZXREYXRhVHlwZSwgZnVuY3Rpb25JbmZvID0gX3JlZjEuZnVuY3Rpb25JbmZvLCBuYW1lU3ViID0gX3JlZjEubmFtZVN1YjtcblxuICBfID0gcmVxdWlyZSgnLi9sb2Rhc2gubWluJyk7XG5cbiAgYW10ID0gcmVxdWlyZSgncGVyc2lzdGVudC1oYXNoLXRyaWUnKTtcblxuICByeiA9IHJlc29sdmU7XG5cbiAgbHogPSBsYXp5O1xuXG4gIGNhbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncztcblxuICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgIHJldHVybiBiYXNpY0NhbGwoYXJncywgZGVmYXVsdEVudiwgaWRlbnRpdHkpO1xuICB9O1xuXG4gIGNhbGxNb25hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzLCBjb250LCBlbnYsIF9pO1xuXG4gICAgYXJncyA9IDMgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIF9pID0gYXJndW1lbnRzLmxlbmd0aCAtIDIpIDogKF9pID0gMCwgW10pLCBlbnYgPSBhcmd1bWVudHNbX2krK10sIGNvbnQgPSBhcmd1bWVudHNbX2krK107XG4gICAgcmV0dXJuIGJhc2ljQ2FsbChhcmdzLCBlbnYsIGNvbnQpO1xuICB9O1xuXG4gIGJhc2ljQ2FsbCA9IGZ1bmN0aW9uKGFyZ3MsIGVudiwgY29udCkge1xuICAgIHZhciBhcmcsIHJlcywgX2ksIF9sZW4sIF9yZWYyO1xuXG4gICAgcmVzID0gZ2xvYmFsW1wiTF9cIiArIGFyZ3NbMF1dKCk7XG4gICAgX3JlZjIgPSBhcmdzLnNsaWNlKDEpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGFyZyA9IF9yZWYyW19pXTtcbiAgICAgIHJlcyA9IChmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHJlcyhseihhcmcpKTtcbiAgICAgIH0pKGFyZyk7XG4gICAgfVxuICAgIHJldHVybiBydW5Nb25hZChyZXMsIGVudiwgY29udCk7XG4gIH07XG5cbiAgY29uc0Zyb20gPSBmdW5jdGlvbihhcnJheSwgaSkge1xuICAgIGkgPSBpIHx8IDA7XG4gICAgaWYgKGkgPCBhcnJheS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjb25zKGFycmF5W2ldLCBjb25zRnJvbShhcnJheSwgaSArIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIExfbmlsKCk7XG4gICAgfVxuICB9O1xuXG4gIGlkZW50aXR5ID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4O1xuICB9O1xuXG4gIF9pZGVudGl0eSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gcnooeCk7XG4gIH07XG5cbiAgX3RydWUgPSBzZXRUeXBlKChmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgIHJldHVybiByeihhKTtcbiAgICB9O1xuICB9KSwgJ3RydWUnKTtcblxuICBfZmFsc2UgPSBzZXRUeXBlKChmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgIHJldHVybiByeihiKTtcbiAgICB9O1xuICB9KSwgJ2ZhbHNlJyk7XG5cbiAgbGVmdCA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gc2V0VHlwZSgoZnVuY3Rpb24obENhc2UpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyQ2FzZSkge1xuICAgICAgICByZXR1cm4gcnoobENhc2UpKGx6KHgpKTtcbiAgICAgIH07XG4gICAgfSksICdsZWZ0Jyk7XG4gIH07XG5cbiAgcmlnaHQgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKGxDYXNlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ockNhc2UpIHtcbiAgICAgICAgcmV0dXJuIHJ6KHJDYXNlKShseih4KSk7XG4gICAgICB9O1xuICAgIH0pLCAncmlnaHQnKTtcbiAgfTtcblxuICBzb21lID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihzb21lQ2FzZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5vbmVDYXNlKSB7XG4gICAgICAgIHJldHVybiByeihzb21lQ2FzZSkobHooeCkpO1xuICAgICAgfTtcbiAgICB9KSwgJ3NvbWUnKTtcbiAgfTtcblxuICBub25lID0gc2V0VHlwZSgoZnVuY3Rpb24oc29tZUNhc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obm9uZUNhc2UpIHtcbiAgICAgIHJldHVybiByeihub25lQ2FzZSk7XG4gICAgfTtcbiAgfSksICdub25lJyk7XG5cbiAgYm9vbGVhbkZvciA9IGZ1bmN0aW9uKGJvb2wpIHtcbiAgICBpZiAoYm9vbCkge1xuICAgICAgcmV0dXJuIHJ6KExfdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByeihMX2ZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgZGVmaW5lKCdlcScsIGx6KGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgcmV0dXJuIGJvb2xlYW5Gb3IocnooYSkgPT09IHJ6KGIpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCc9PScsIGx6KGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgcmV0dXJuIGJvb2xlYW5Gb3IocnooYSkgPT09IHJ6KGIpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdoYXNUeXBlJywgbHooZnVuY3Rpb24oZGF0YSkge1xuICAgIHJldHVybiBmdW5jdGlvbihmdW5jKSB7XG4gICAgICBpZiAodHlwZW9mIHJ6KGZ1bmMpID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gYm9vbGVhbkZvcihnZXRUeXBlKHJ6KGRhdGEpKSA9PT0gcnooZnVuYykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGJvb2xlYW5Gb3IoZ2V0VHlwZShyeihkYXRhKSkgPT09IGdldERhdGFUeXBlKHJ6KGZ1bmMpKSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZ2V0RGF0YVR5cGUnLCBseihmdW5jdGlvbihmdW5jKSB7XG4gICAgaWYgKHR5cGVvZiByeihmdW5jKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiByeihmdW5jKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldERhdGFUeXBlKHJ6KGZ1bmMpKTtcbiAgICB9XG4gIH0pKTtcblxuICBkZWZpbmUoJ2Fzc2VydCcsIGx6KGZ1bmN0aW9uKGJvb2wpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obXNnKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZXhwcikge1xuICAgICAgICByZXR1cm4gcnooYm9vbCkoZXhwcikoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJ6KG1zZykpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYXNzZXJ0TG9nJywgbHooZnVuY3Rpb24oYm9vbCkge1xuICAgIHJldHVybiBmdW5jdGlvbihtc2cpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIHJldHVybiByeihib29sKShleHByKShmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhuZXcgRXJyb3IocnoobXNnKSkuc3RhY2spO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTE9HR0VEIEVSUk9SIC0tIFJFU1VNSU5HIEVYRUNVVElPTi4uLlwiKTtcbiAgICAgICAgICByZXR1cm4gcnooZXhwcik7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCcrJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gcnooeCkgKyByeih5KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCctJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gcnooeCkgLSByeih5KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCcqJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gcnooeCkgKiByeih5KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCcvJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gcnooeCkgLyByeih5KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCclJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gcnooeCkgJSByeih5KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCc8JywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gYm9vbGVhbkZvcihyeih4KSA8IHJ6KHkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCc8PScsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIGJvb2xlYW5Gb3IocnooeCkgPD0gcnooeSkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJz4nLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiBib29sZWFuRm9yKHJ6KHgpID4gcnooeSkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJz49JywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gYm9vbGVhbkZvcihyeih4KSA+PSByeih5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZmxvb3InLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdjZWlsJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdtaW4nLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiBNYXRoLm1pbihyeih4KSwgcnooeSkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ21heCcsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KHJ6KHgpLCByeih5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgncm91bmQnLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdhYnMnLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnc3FydCcsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYWNvcycsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5hY29zKHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYXNpbicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5hc2luKHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYXRhbicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuKHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYXRhbjInLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiBNYXRoLmF0YW4yKHJ6KHgpLCByeih5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnY29zJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLmNvcyhyeih4KSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2xvZycsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5sb2cocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdzaW4nLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGguc2luKHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgndGFuJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLnRhbihyeih4KSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ3JhbmQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHJldHVybiBjb250KE1hdGgucmFuZG9tKCkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZWZpbmUoJ3JhbmRJbnQnLCBseihmdW5jdGlvbihsb3cpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaGlnaCkge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHJldHVybiBjb250KE1hdGguZmxvb3IocnoobG93KSArIE1hdGgucmFuZG9tKCkgKiByeihoaWdoKSkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnXicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIE1hdGgucG93KHJ6KHgpLCByeih5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX3Nob3cnLCBseihmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIF9yZWYyO1xuXG4gICAgaWYgKChfcmVmMiA9IHR5cGVvZiByeihkYXRhKSkgPT09ICdzdHJpbmcnIHx8IF9yZWYyID09PSAnbnVtYmVyJyB8fCBfcmVmMiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocnooZGF0YSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gU3RyaW5nKHJ6KGRhdGEpKTtcbiAgICB9XG4gIH0pKTtcblxuICBkZWZpbmUoJ3N0clN0cmluZycsIGx6KGZ1bmN0aW9uKGRhdGEpIHtcbiAgICByZXR1cm4gU3RyaW5nKHJ6KGRhdGEpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX3N0ckFzYycsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiByeihzdHIpLmNoYXJDb2RlQXQoMCk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJDaHInLCBseihmdW5jdGlvbihpKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocnooaSkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyQXQnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiByeihzdHIpW3N0ckNvb3JkKHJ6KHN0ciksIHJ6KGluZGV4KSldO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJTdGFydHNXaXRoJywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHByZWZpeCkge1xuICAgICAgcmV0dXJuIGJvb2xlYW5Gb3Iocnooc3RyKS5zdWJzdHJpbmcoMCwgcnoocHJlZml4KS5sZW5ndGgpID09PSByeihwcmVmaXgpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyTGVuJywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHJ6KHN0cikubGVuZ3RoO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyVG9Mb3dlckNhc2UnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gcnooc3RyKS50b0xvd2VyQ2FzZSgpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyVG9VcHBlckNhc2UnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gcnooc3RyKS50b1VwcGVyQ2FzZSgpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyUmVwbGFjZScsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBmdW5jdGlvbihwYXQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXBsKSB7XG4gICAgICAgIHJldHVybiByeihzdHIpLnJlcGxhY2UocnoocGF0KSwgcnoocmVwbCkpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgc3RyQ29vcmQgPSBmdW5jdGlvbihzdHIsIGNvb3JkKSB7XG4gICAgaWYgKGNvb3JkIDwgMCkge1xuICAgICAgcmV0dXJuIHN0ci5sZW5ndGggKyBjb29yZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvb3JkO1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ19zdHJTdWJzdHJpbmcnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RhcnQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihlbmQpIHtcbiAgICAgICAgdmFyIGEsIGI7XG5cbiAgICAgICAgYSA9IHN0ckNvb3JkKHJ6KHN0ciksIHJ6KHN0YXJ0KSk7XG4gICAgICAgIGIgPSBzdHJDb29yZChyeihzdHIpLCByeihlbmQpKTtcbiAgICAgICAgaWYgKGIgPCBhICYmIHJ6KGVuZCkgPT09IDApIHtcbiAgICAgICAgICBiID0gcnooc3RyKS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ6KHN0cikuc3Vic3RyaW5nKGEsIGIpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyU3BsaXQnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ocGF0KSB7XG4gICAgICByZXR1cm4gY29uc0Zyb20ocnooc3RyKS5zcGxpdChyeihwYXQpIGluc3RhbmNlb2YgUmVnRXhwID8gcnoocGF0KSA6IG5ldyBSZWdFeHAocnoocGF0KSkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyQ2F0JywgbHooZnVuY3Rpb24obGlzdCkge1xuICAgIHJldHVybiBfLm1hcChyeihsaXN0KS50b0FycmF5KCksIGZ1bmN0aW9uKGVsKSB7XG4gICAgICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcnooTF9zaG93KShseihlbCkpO1xuICAgICAgfVxuICAgIH0pLmpvaW4oJycpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyQWRkJywgbHooZnVuY3Rpb24oczEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oczIpIHtcbiAgICAgIHJldHVybiByeihzMSkgKyByeihzMik7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX3N0ck1hdGNoJywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHBhdCkge1xuICAgICAgdmFyIGdyb3VwcywgbSwgcG9zO1xuXG4gICAgICBtID0gcnooc3RyKS5tYXRjaCgocnoocGF0KSBpbnN0YW5jZW9mIFJlZ0V4cCA/IHJ6KHBhdCkgOiBuZXcgUmVnRXhwKHJ6KHBhdCkpKSk7XG4gICAgICBpZiAobSkge1xuICAgICAgICBncm91cHMgPSBbXTtcbiAgICAgICAgcG9zID0gMTtcbiAgICAgICAgd2hpbGUgKG1bcG9zXSkge1xuICAgICAgICAgIGdyb3Vwcy5wdXNoKG1bcG9zKytdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG0uaW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnNGcm9tKFttWzBdLCBjb25zRnJvbShncm91cHMpLCBtLmluZGV4LCBtLmlucHV0XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnNGcm9tKFttWzBdLCBjb25zRnJvbShncm91cHMpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBOaWw7XG4gICAgICB9XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX3N0clRvTGlzdCcsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBzdHJUb0xpc3Qocnooc3RyKSk7XG4gIH0pKTtcblxuICBzdHJUb0xpc3QgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAoc3RyID09PSAnJykge1xuICAgICAgcmV0dXJuIE5pbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnMoc3RyWzBdLCBzdHJUb0xpc3Qoc3RyLnN1YnN0cmluZygxKSkpO1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ19zdHJGcm9tTGlzdCcsIGx6KGZ1bmN0aW9uKGxpc3QpIHtcbiAgICByZXR1cm4gc3RyRnJvbUxpc3QocnoobGlzdCkpO1xuICB9KSk7XG5cbiAgc3RyRnJvbUxpc3QgPSBmdW5jdGlvbihsaXN0KSB7XG4gICAgaWYgKGxpc3QgaW5zdGFuY2VvZiBMZWlzdXJlX25pbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGVhZChsaXN0KSArIHN0ckZyb21MaXN0KHRhaWwobGlzdCkpO1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ19yZWdleHAnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChyeihzdHIpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX3JlZ2V4cEZsYWdzJywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGZsYWdzKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChyeihzdHIpLCByeihmbGFncykpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ19qc29uUGFyc2UnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZmFpbENvbnQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdWNjZXNzQ29udCkge1xuICAgICAgICB2YXIgZXJyLCBwO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcCA9IEpTT04ucGFyc2Uocnooc3RyKSk7XG4gICAgICAgICAgcmV0dXJuIHJ6KHN1Y2Nlc3NDb250KShseihwKSk7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgICByZXR1cm4gcnooZmFpbENvbnQpKGx6KGVycikpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2pzb25TdHJpbmdpZnknLCBseihmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZmFpbENvbnQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdWNjZXNzQ29udCkge1xuICAgICAgICB2YXIgZXJyLCBzO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcyA9IEpTT04uc3RyaW5naWZ5KHJ6KG9iaikpO1xuICAgICAgICAgIHJldHVybiByeihzdWNjZXNzQ29udCkobHoocykpO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICAgICAgcmV0dXJuIHJ6KGZhaWxDb250KShseihlcnIpKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdnZXRQcm9wZXJ0aWVzJywgbHooZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciBfcmVmMjtcblxuICAgIGlmICgoX3JlZjIgPSByeihmdW5jKSkgIT0gbnVsbCA/IF9yZWYyLnByb3BlcnRpZXMgOiB2b2lkIDApIHtcbiAgICAgIHJldHVybiByeihMX3NvbWUpKGx6KHJ6KGZ1bmMpLnByb3BlcnRpZXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJ6KExfbm9uZSk7XG4gICAgfVxuICB9KSk7XG5cbiAgZGVmaW5lKCdsb2cnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ocmVzKSB7XG4gICAgICBjb25zb2xlLmxvZyhTdHJpbmcocnooc3RyKSkpO1xuICAgICAgcmV0dXJuIHJ6KHJlcyk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIG1ha2VNb25hZCA9IGZ1bmN0aW9uKGd1dHMpIHtcbiAgICB2YXIgbTtcblxuICAgIG0gPSBmdW5jdGlvbigpIHt9O1xuICAgIG0uX19wcm90b19fID0gTW9uYWQucHJvdG90eXBlO1xuICAgIG0uY21kID0gZ3V0cztcbiAgICBtLnR5cGUgPSAnbW9uYWQnO1xuICAgIHJldHVybiBtO1xuICB9O1xuXG4gIG1ha2VTeW5jTW9uYWQgPSBmdW5jdGlvbihndXRzKSB7XG4gICAgdmFyIG07XG5cbiAgICBtID0gbWFrZU1vbmFkKGd1dHMpO1xuICAgIG0uc3luYyA9IHRydWU7XG4gICAgcmV0dXJuIG07XG4gIH07XG5cbiAgbmV4dE1vbmFkID0gZnVuY3Rpb24oY29udCkge1xuICAgIHJldHVybiBjb250O1xuICB9O1xuXG4gIHJlcGxhY2VFcnIgPSBmdW5jdGlvbihlcnIsIG1zZykge1xuICAgIGVyci5tZXNzYWdlID0gbXNnO1xuICAgIHJldHVybiBlcnI7XG4gIH07XG5cbiAgZGVmYXVsdEVudi53cml0ZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBwcm9jZXNzLnN0ZG91dC53cml0ZShzdHIpO1xuICB9O1xuXG4gIGRlZmF1bHRFbnYuZXJyID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgdmFyIF9yZWYyO1xuXG4gICAgcmV0dXJuIHRoaXMud3JpdGUoXCJFTlYgRXJyb3I6IFwiICsgKChfcmVmMiA9IGVyci5zdGFjaykgIT0gbnVsbCA/IF9yZWYyIDogZXJyKSk7XG4gIH07XG5cbiAgZGVmYXVsdEVudi5wcm9tcHQgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHByb21wdGluZyFcIik7XG4gIH07XG5cbiAgbW9uYWRNb2RlU3luYyA9IGZhbHNlO1xuXG4gIGdldE1vbmFkU3luY01vZGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbW9uYWRNb2RlU3luYztcbiAgfTtcblxuICB3aXRoU3luY01vZGVEbyA9IGZ1bmN0aW9uKG5ld01vZGUsIGJsb2NrKSB7XG4gICAgdmFyIGVyciwgb2xkTW9kZTtcblxuICAgIG9sZE1vZGUgPSBtb25hZE1vZGVTeW5jO1xuICAgIG1vbmFkTW9kZVN5bmMgPSBuZXdNb2RlO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYmxvY2soKTtcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhcIkVSUjogXCIgKyBlcnIuc3RhY2spO1xuICAgIH0gZmluYWxseSB7XG5cbiAgICB9XG4gIH07XG5cbiAgcnVuTW9uYWQgPSBmdW5jdGlvbihtb25hZCwgZW52LCBjb250KSB7XG4gICAgZW52ID0gZW52ICE9IG51bGwgPyBlbnYgOiByb290LmRlZmF1bHRFbnY7XG4gICAgcmV0dXJuIHdpdGhTeW5jTW9kZURvKHRydWUsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ld1J1bk1vbmFkKG1vbmFkLCBlbnYsIGNvbnQsIFtdKTtcbiAgICB9KTtcbiAgfTtcblxuICBpc01vbmFkID0gZnVuY3Rpb24obSkge1xuICAgIHJldHVybiB0eXBlb2YgbSA9PT0gJ2Z1bmN0aW9uJyAmJiAobS5jbWQgIT0gbnVsbCk7XG4gIH07XG5cbiAgY29udGludWVNb25hZHMgPSBmdW5jdGlvbihjb250U3RhY2ssIGVudikge1xuICAgIHJldHVybiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIHJldHVybiB3aXRoU3luY01vZGVEbyhmYWxzZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXdSdW5Nb25hZChyZXN1bHQsIGVudiwgbnVsbCwgY29udFN0YWNrKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG5cbiAgYXN5bmNNb25hZCA9IHtcbiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCI8YXN5bmNNb25hZFJlc3VsdD5cIjtcbiAgICB9XG4gIH07XG5cbiAgd2FybkFzeW5jID0gZmFsc2U7XG5cbiAgc2V0V2FybkFzeW5jID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICByZXR1cm4gd2FybkFzeW5jID0gc3RhdGU7XG4gIH07XG5cbiAgbmV3UnVuTW9uYWQgPSBmdW5jdGlvbihtb25hZCwgZW52LCBjb250LCBjb250U3RhY2spIHtcbiAgICB2YXIgZXJyLCByZXN1bHQ7XG5cbiAgICBpZiAoY29udCkge1xuICAgICAgY29udFN0YWNrLnB1c2goY29udCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAoaXNNb25hZChtb25hZCkpIHtcbiAgICAgICAgICBpZiAobW9uYWQuYmluZGluZykge1xuICAgICAgICAgICAgY29udFN0YWNrLnB1c2goKGZ1bmN0aW9uKGJuZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBibmQobHooeCkpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkocnoobW9uYWQuYmluZGluZykpKTtcbiAgICAgICAgICAgIG1vbmFkID0gcnoobW9uYWQubW9uYWQpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIGlmICghbW9uYWQuc3luYykge1xuICAgICAgICAgICAgbW9uYWRNb2RlU3luYyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHdhcm5Bc3luYykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFzeW5jIG1vbmFkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9uYWQuY21kKGVudiwgY29udGludWVNb25hZHMoY29udFN0YWNrLCBlbnYpKTtcbiAgICAgICAgICAgIHJldHVybiBhc3luY01vbmFkO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQgPSBtb25hZC5jbWQoZW52LCBpZGVudGl0eSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9uYWRNb2RlU3luYyA9IHRydWU7XG4gICAgICAgICAgcmVzdWx0ID0gbW9uYWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb250U3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBtb25hZCA9IGNvbnRTdGFjay5wb3AoKShyZXN1bHQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgZXJyID0gcmVwbGFjZUVycihlcnIsIFwiXFxuRVJST1IgUlVOTklORyBNT05BRCwgTU9OQUQ6IFwiICsgbW9uYWQgKyBcIiwgRU5WOiBcIiArIGVudiArIFwiLi4uXFxuXCIgKyBlcnIubWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmxvZyhlcnIuc3RhY2spO1xuICAgICAgaWYgKGVudi5lcnJvckhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZW52LmVycm9ySGFuZGxlcnMucG9wKCkoZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgTW9uYWQgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTW9uYWQoKSB7fVxuXG4gICAgTW9uYWQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJNb25hZDogXCIgKyAodGhpcy5jbWQudG9TdHJpbmcoKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNb25hZDtcblxuICB9KSgpO1xuXG4gIGdsb2JhbC5MX3J1bk1vbmFkcyA9IGZ1bmN0aW9uKG1vbmFkQXJyYXkpIHtcbiAgICBtb25hZEFycmF5LnJldmVyc2UoKTtcbiAgICByZXR1cm4gbmV3UnVuTW9uYWQoMCwgZGVmYXVsdEVudiwgbnVsbCwgbW9uYWRBcnJheSk7XG4gIH07XG5cbiAgZGVmaW5lKCdkZWZpbmUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyaXR5KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc3JjKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgICAgIGRlZmluZShyeihuYW1lKSwgZGVmLCByeihhcml0eSksIHJ6KHNyYykpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnQoKHR5cGVvZiBMX3RydWUgIT09IFwidW5kZWZpbmVkXCIgJiYgTF90cnVlICE9PSBudWxsID8gcnooTF90cnVlKSA6IF90cnVlKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2JpbmQnLCBseihmdW5jdGlvbihtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGJpbmRpbmcpIHtcbiAgICAgIHZhciBiaW5kTW9uYWQ7XG5cbiAgICAgIGJpbmRNb25hZCA9IG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHt9KTtcbiAgICAgIGJpbmRNb25hZC5tb25hZCA9IG07XG4gICAgICBiaW5kTW9uYWQuYmluZGluZyA9IGJpbmRpbmc7XG4gICAgICByZXR1cm4gYmluZE1vbmFkO1xuICAgIH07XG4gIH0pKTtcblxuICB2YWx1ZXMgPSB7fTtcblxuICBkZWZpbmUoJ3Byb3RlY3QnLCBseihmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICB2YXIgaG5kO1xuXG4gICAgICBobmQgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJQUk9URUNURUQgRVJST1I6IFwiICsgZXJyLnN0YWNrKTtcbiAgICAgICAgcmV0dXJuIGNvbnQobGVmdChlcnIuc3RhY2spKTtcbiAgICAgIH07XG4gICAgICBlbnYuZXJyb3JIYW5kbGVycy5wdXNoKGhuZCk7XG4gICAgICByZXR1cm4gcnVuTW9uYWQocnoodmFsdWUpLCBlbnYsIChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgaWYgKGVudi5lcnJvckhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChlbnYuZXJyb3JIYW5kbGVyc1tlbnYuZXJyb3JIYW5kbGVycy5sZW5ndGggLSAxXSA9PT0gaG5kKSB7XG4gICAgICAgICAgICBlbnYuZXJyb3JIYW5kbGVycy5wb3AoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKF8uY29udGFpbnMoZW52LmVycm9ySGFuZGxlcnMsIGhuZCkpIHtcbiAgICAgICAgICAgIHdoaWxlIChlbnYuZXJyb3JIYW5kbGVyc1tlbnYuZXJyb3JIYW5kbGVycy5sZW5ndGggLSAxXSAhPT0gaG5kKSB7XG4gICAgICAgICAgICAgIGVudi5lcnJvckhhbmRsZXJzLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udChyaWdodChyZXN1bHQpKTtcbiAgICAgIH0pLCBbXSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBhY3RvcnMgPSB7fTtcblxuICBkZWZpbmUoJ2FjdG9yJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihmdW5jKSB7XG4gICAgICBhY3RvcnNbbmFtZV0gPSBmdW5jO1xuICAgICAgZnVuYy5lbnYgPSB7XG4gICAgICAgIHZhbHVlczoge31cbiAgICAgIH07XG4gICAgICByZXR1cm4gZnVuYy5lbnYuX19wcm90b19fID0gZGVmYXVsdEVudjtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdzZW5kJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihtc2cpIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHJ1bk1vbmFkKHJ6KGFjdG9yc1tuYW1lXSkobXNnKSwgcnooYWN0b3JzW25hbWVdKS5lbnYpO1xuICAgICAgfSksIDEpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2hhc1ZhbHVlJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIGNvbnQoYm9vbGVhbkZvcih2YWx1ZXNbcnoobmFtZSldICE9IG51bGwpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZ2V0VmFsdWVPcicsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZGVmYXVsdFZhbHVlKSB7XG4gICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgdmFyIF9yZWYyO1xuXG4gICAgICAgIHJldHVybiBjb250KChfcmVmMiA9IHZhbHVlc1tyeihuYW1lKV0pICE9IG51bGwgPyBfcmVmMiA6IHJ6KGRlZmF1bHRWYWx1ZSkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZ2V0VmFsdWUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICBpZiAoIShyeihuYW1lKSBpbiB2YWx1ZXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHZhbHVlIG5hbWVkICdcIiArIChyeihuYW1lKSkgKyBcIidcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udCh2YWx1ZXNbcnoobmFtZSldKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnc2V0VmFsdWUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgdmFsdWVzW3J6KG5hbWUpXSA9IHJ6KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGNvbnQoX3RydWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZGVsZXRlVmFsdWUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICBkZWxldGUgdmFsdWVzW3J6KG5hbWUpXTtcbiAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIHNldFZhbHVlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICB9O1xuXG4gIGdldFZhbHVlID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlc1trZXldO1xuICB9O1xuXG4gIGRlZmluZSgnZW52SGFzJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIGNvbnQoYm9vbGVhbkZvcihlbnYudmFsdWVzW3J6KG5hbWUpXSAhPSBudWxsKSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2VudkdldE9yJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICB2YXIgX3JlZjI7XG5cbiAgICAgICAgcmV0dXJuIGNvbnQoKF9yZWYyID0gZW52LnZhbHVlc1tyeihuYW1lKV0pICE9IG51bGwgPyBfcmVmMiA6IHJ6KGRlZmF1bHRWYWx1ZSkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZW52R2V0JywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgaWYgKCEocnoobmFtZSkgaW4gZW52LnZhbHVlcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsdWUgbmFtZWQgJ1wiICsgKHJ6KG5hbWUpKSArIFwiJ1wiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250KGVudi52YWx1ZXNbcnoobmFtZSldKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZW52U2V0JywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIGVudi52YWx1ZXNbcnoobmFtZSldID0gcnoodmFsdWUpO1xuICAgICAgICByZXR1cm4gY29udChfdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdlbnZEZWxldGUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICBkZWxldGUgZW52LnZhbHVlc1tyeihuYW1lKV07XG4gICAgICByZXR1cm4gY29udChfdHJ1ZSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBzZXRWYWx1ZSgnbWFjcm9zJywgTmlsKTtcblxuICBkZWZpbmUoJ2RlZk1hY3JvJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihkZWYpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICB2YWx1ZXMubWFjcm9zID0gY29ucyhjb25zKHJ6KG5hbWUpLCByeihkZWYpKSwgdmFsdWVzLm1hY3Jvcyk7XG4gICAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2Z1bmNzJywgbHoobWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICBjb25zb2xlLmxvZyhcIkxlaXN1cmUgZnVuY3Rpb25zOlxcblwiICsgKF8oZ2xvYmFsLmxlaXN1cmVGdW5jTmFtZXMudG9BcnJheSgpKS5zb3J0KCkuam9pbignXFxuJykpKTtcbiAgICByZXR1cm4gY29udChfdHJ1ZSk7XG4gIH0pKSk7XG5cbiAgZGVmaW5lKCdmdW5jU3JjJywgbHooZnVuY3Rpb24oZnVuYykge1xuICAgIGlmICh0eXBlb2YgcnooZnVuYykgPT09ICdmdW5jdGlvbicgJiYgcnooZnVuYykuc3JjKSB7XG4gICAgICByZXR1cm4gc29tZShyeihmdW5jKS5zcmMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9uZTtcbiAgICB9XG4gIH0pKTtcblxuICBkZWZpbmUoJ2FzdDJKc29uJywgbHooZnVuY3Rpb24oYXN0KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFzdDJKc29uKHJ6KGFzdCkpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnb3ZlcnJpZGUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5ld0Z1bmMpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICB2YXIgbiwgb2xkRGVmO1xuXG4gICAgICAgIG4gPSBcIkxfXCIgKyAobmFtZVN1YihyeihuYW1lKSkpO1xuICAgICAgICBvbGREZWYgPSBnbG9iYWxbbl07XG4gICAgICAgIGlmICghb2xkRGVmKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZGVmaW5pdGlvbiBmb3IgXCIgKyAocnoobmFtZSkpKTtcbiAgICAgICAgfVxuICAgICAgICBnbG9iYWxbbl0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gcnoobmV3RnVuYykob2xkRGVmKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNvbnQoX3RydWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgncHJpbnQnLCBseihmdW5jdGlvbihtc2cpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHZhciBtO1xuXG4gICAgICBtID0gcnoobXNnKTtcbiAgICAgIGVudi53cml0ZShcIlwiICsgKGVudi5wcmVzZW50VmFsdWUobSkpICsgXCJcXG5cIik7XG4gICAgICByZXR1cm4gY29udChfdHJ1ZSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ3dyaXRlJywgbHooZnVuY3Rpb24obXNnKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICBlbnYud3JpdGUoZW52LnByZXNlbnRWYWx1ZShyeihtc2cpKSk7XG4gICAgICByZXR1cm4gY29udChfdHJ1ZSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ3JlYWRGaWxlJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gcmVhZEZpbGUocnoobmFtZSksIGZ1bmN0aW9uKGVyciwgY29udGVudHMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQoKGVyciA/IGxlZnQoZXJyLnN0YWNrKSA6IHJpZ2h0KGNvbnRlbnRzKSkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ3JlYWREaXInLCBseihmdW5jdGlvbihkaXIpIHtcbiAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIHJlYWREaXIocnooZGlyKSwgZnVuY3Rpb24oZXJyLCBmaWxlcykge1xuICAgICAgICByZXR1cm4gY29udCgoZXJyID8gbGVmdChlcnIuc3RhY2spIDogcmlnaHQoZmlsZXMpKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnd3JpdGVGaWxlJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICByZXR1cm4gd3JpdGVGaWxlKHJ6KG5hbWUpLCByeihkYXRhKSwgZnVuY3Rpb24oZXJyLCBjb250ZW50cykge1xuICAgICAgICAgIHJldHVybiBjb250KChlcnIgPyBsZWZ0KGVyci5zdGFjaykgOiByaWdodChjb250ZW50cykpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdzdGF0RmlsZScsIGx6KGZ1bmN0aW9uKGZpbGUpIHtcbiAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIHN0YXRGaWxlKHJ6KGZpbGUpLCBmdW5jdGlvbihlcnIsIHN0YXRzKSB7XG4gICAgICAgIHJldHVybiBjb250KChlcnIgPyBsZWZ0KGVyci5zdGFjaykgOiByaWdodChzdGF0cykpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdwcm9tcHQnLCBseihmdW5jdGlvbihtc2cpIHtcbiAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIGVudi5wcm9tcHQoU3RyaW5nKHJ6KG1zZykpLCBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gY29udChpbnB1dCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgncmFuZCcsIGx6KG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgcmV0dXJuIGNvbnQoTWF0aC5yYW5kb20oKSk7XG4gIH0pKSk7XG5cbiAgZGVmaW5lKCdqcycsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgdmFyIGVyciwgcmVzdWx0O1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBldmFsKHJ6KHN0cikpO1xuICAgICAgICByZXR1cm4gY29udChyaWdodChyZXN1bHQpKTtcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICAgIHJldHVybiBjb250KGxlZnQoZXJyKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2RlbGF5JywgbHooZnVuY3Rpb24odGltZW91dCkge1xuICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICAgIH0pLCByeih0aW1lb3V0KSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2FsdERlZicsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYWx0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYXJpdHkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRlZikge1xuICAgICAgICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgICB2YXIgYWx0cywgaSwgaW5mbywgbmV3RGVmLCBubTtcblxuICAgICAgICAgICAgaW5mbyA9IGZ1bmN0aW9uSW5mb1tyeihuYW1lKV07XG4gICAgICAgICAgICBpZiAoIWluZm8pIHtcbiAgICAgICAgICAgICAgaW5mbyA9IGZ1bmN0aW9uSW5mb1tyeihuYW1lKV0gPSB7XG4gICAgICAgICAgICAgICAgc3JjOiAnJyxcbiAgICAgICAgICAgICAgICBhcml0eTogLTEsXG4gICAgICAgICAgICAgICAgYWx0czoge30sXG4gICAgICAgICAgICAgICAgYWx0TGlzdDogW11cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaW5mby5hbHRzW3J6KGFsdCldKSB7XG4gICAgICAgICAgICAgIGluZm8uYWx0TGlzdC5wdXNoKHJ6KGFsdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5mby5hbHRzW3J6KGFsdCldID0gcnooZGVmKTtcbiAgICAgICAgICAgIGFsdHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuXG4gICAgICAgICAgICAgIF9yZWYyID0gaW5mby5hbHRMaXN0O1xuICAgICAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgaSA9IF9yZWYyW19pXTtcbiAgICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGluZm8uYWx0c1tpXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgIG5ld0RlZiA9IGN1cnJ5KHJ6KGFyaXR5KSwgZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgICB2YXIgYXJnLCBvcHQsIHJlcywgX2ksIF9qLCBfaywgX2xlbiwgX2xlbjEsIF9sZW4yO1xuXG4gICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gYWx0cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgIGFsdCA9IGFsdHNbX2ldO1xuICAgICAgICAgICAgICAgIG9wdCA9IGFsdDtcbiAgICAgICAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBhcmdzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgICAgICAgYXJnID0gYXJnc1tfal07XG4gICAgICAgICAgICAgICAgICBvcHQgPSBvcHQoYXJnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdldFR5cGUob3B0KSA9PT0gJ3NvbWUnKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0KGx6KGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ6KHgpO1xuICAgICAgICAgICAgICAgICAgfSkpKGx6KF9mYWxzZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaW5mby5tYWluRGVmKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gcnooaW5mby5tYWluRGVmKTtcbiAgICAgICAgICAgICAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBhcmdzLmxlbmd0aDsgX2sgPCBfbGVuMjsgX2srKykge1xuICAgICAgICAgICAgICAgICAgYXJnID0gYXJnc1tfa107XG4gICAgICAgICAgICAgICAgICByZXMgPSByZXMoYXJnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBkZWZhdWx0IGRlZmluaXRpb24gZm9yIFwiICsgKHJ6KG5hbWUpKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5tID0gXCJMX1wiICsgKG5hbWVTdWIocnoobmFtZSkpKTtcbiAgICAgICAgICAgIGdsb2JhbFtubV0gPSBnbG9iYWwubGVpc3VyZUZ1bmNOYW1lc1tubV0gPSBuZXdEZWY7XG4gICAgICAgICAgICByZXR1cm4gY29udChkZWYpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgY3VycnkgPSBmdW5jdGlvbihhcml0eSwgZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIChzdWJjdXJyeShhcml0eSwgZnVuYywgW10pKShhcmcpO1xuICAgICAgfTtcbiAgICB9O1xuICB9O1xuXG4gIHN1YmN1cnJ5ID0gZnVuY3Rpb24oYXJpdHksIGZ1bmMsIGFyZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgICBhcmdzID0gYXJncyAhPSBudWxsID8gYXJncyA6IFtdO1xuICAgICAgYXJncy5wdXNoKGFyZyk7XG4gICAgICBpZiAoYXJpdHkgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMoYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3ViY3VycnkoYXJpdHkgLSAxLCBmdW5jLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIG1ha2VIYW10ID0gZnVuY3Rpb24oaGFtdCkge1xuICAgIHZhciB0O1xuXG4gICAgdCA9IHNldERhdGFUeXBlKChmdW5jdGlvbigpIHt9KSwgJ2hhbXQnKTtcbiAgICB0LmhhbXQgPSBoYW10O1xuICAgIHQudHlwZSA9ICdoYW10JztcbiAgICByZXR1cm4gdDtcbiAgfTtcblxuICBoYW10ID0gbWFrZUhhbXQoYW10LlRyaWUoKSk7XG5cbiAgZGVmaW5lKCdoYW10JywgbHooaGFtdCkpO1xuXG4gIGRlZmluZSgnaGFtdFdpdGgnLCBseihmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihoYW10KSB7XG4gICAgICAgIHJldHVybiBtYWtlSGFtdChhbXQuYXNzb2MocnooaGFtdCkuaGFtdCwgcnooa2V5KSwgcnoodmFsdWUpKSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2hhbXRGZXRjaCcsIGx6KGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihoYW10KSB7XG4gICAgICByZXR1cm4gYW10LmdldChyeihoYW10KS5oYW10LCByeihrZXkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdoYW10R2V0JywgbHooZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGhhbXQpIHtcbiAgICAgIHZhciB2O1xuXG4gICAgICB2ID0gYW10LmdldChyeihoYW10KS5oYW10LCByeihrZXkpKTtcbiAgICAgIGlmICh2ICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHNvbWUodik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdoYW10V2l0aG91dCcsIGx6KGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihoYW10KSB7XG4gICAgICByZXR1cm4gbWFrZUhhbXQoYW10LmRpc3NvYyhyeihoYW10KS5oYW10LCByeihrZXkpKSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIG1lbW8gPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMubWVtbyB8fCAoZnVuYy5tZW1vID0gZnVuYygpKTtcbiAgICB9O1xuICB9O1xuXG4gIGRlZmluZSgnaGFtdFBhaXJzJywgbHooZnVuY3Rpb24oaGFtdCkge1xuICAgIHJldHVybiBuZXh0Tm9kZShzaW1weUNvbnMocnooaGFtdCkuaGFtdCwgbnVsbCkpO1xuICB9KSk7XG5cbiAgbmV4dE5vZGUgPSBmdW5jdGlvbihzdGFjaykge1xuICAgIHZhciBjaGlsZCwgaywga2V5LCBub2RlLCB2YWx1ZSwgX3JlZjIsIF9yZWYzO1xuXG4gICAgaWYgKHN0YWNrID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcnooTF9uaWwpO1xuICAgIH1cbiAgICBub2RlID0gc3RhY2suaGVhZDtcbiAgICBzdGFjayA9IHN0YWNrLnRhaWw7XG4gICAgc3dpdGNoIChub2RlLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3RyaWUnOlxuICAgICAgICBfcmVmMiA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgIGZvciAoayBpbiBfcmVmMikge1xuICAgICAgICAgIGNoaWxkID0gX3JlZjJba107XG4gICAgICAgICAgc3RhY2sgPSBzaW1weUNvbnMoY2hpbGQsIHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dE5vZGUoc3RhY2spO1xuICAgICAgY2FzZSAndmFsdWUnOlxuICAgICAgICByZXR1cm4gcnooTF9hY29ucykobHoobm9kZS5rZXkpKShseihub2RlLnZhbHVlKSkobWVtbyhmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gbmV4dE5vZGUoc3RhY2spO1xuICAgICAgICB9KSk7XG4gICAgICBjYXNlICdoYXNobWFwJzpcbiAgICAgICAgX3JlZjMgPSBub2RlLnZhbHVlcztcbiAgICAgICAgZm9yIChrZXkgaW4gX3JlZjMpIHtcbiAgICAgICAgICB2YWx1ZSA9IF9yZWYzW2tleV07XG4gICAgICAgICAgc3RhY2sgPSBzaW1weUNvbnModmFsdWUsIHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dE5vZGUoc3RhY2spO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiVU5LTk9XTiBIQU1UIE5PREUgVFlQRTogXCIgKyBub2RlLnR5cGUpO1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ3RyYW1wb2xpbmVDYWxsJywgbHooZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciByZXQ7XG5cbiAgICByZXQgPSByeihmdW5jKTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgJiYgcmV0LnRyYW1wb2xpbmUpIHtcbiAgICAgICAgcmV0ID0gcmV0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuICAgIH1cbiAgfSkpO1xuXG4gIGRlZmluZSgndHJhbXBvbGluZScsIGx6KGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICB2YXIgYXJpdHksIGY7XG5cbiAgICBmID0gcnooZnVuYyk7XG4gICAgYXJpdHkgPSBmdW5jdGlvbkluZm9bZi5sZWlzdXJlTmFtZV0uYXJpdHk7XG4gICAgcmV0dXJuIHRyYW1wQ3VycnkoZiwgYXJpdHkpO1xuICB9KSk7XG5cbiAgdHJhbXBDdXJyeSA9IGZ1bmN0aW9uKGZ1bmMsIGFyaXR5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgICAgdmFyIGEsIHJlc3VsdDtcblxuICAgICAgYSA9IHJ6KGFyZyk7XG4gICAgICBpZiAoYXJpdHkgPiAxKSB7XG4gICAgICAgIHJldHVybiB0cmFtcEN1cnJ5KGZ1bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH0pLCBhcml0eSAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVzdWx0LnRyYW1wb2xpbmUgPSB0cnVlO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCd0b2tlbicpO1xuXG4gIExlaXN1cmVfdG9rZW4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiVG9rZW4oXCIgKyAoSlNPTi5zdHJpbmdpZnkodG9rZW5TdHJpbmcodGhpcykpKSArIFwiLCBcIiArICh0b2tlblBvcyh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICB0b2tlblN0cmluZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gdChseihmdW5jdGlvbih0eHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgcmV0dXJuIHJ6KHR4dCk7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICB0b2tlblBvcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gdChseihmdW5jdGlvbih0eHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgcmV0dXJuIHJ6KHBvcyk7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3BhcmVucycpO1xuXG4gIExlaXN1cmVfcGFyZW5zLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIlBhcmVucyhcIiArIChwYXJlbnNTdGFydCh0aGlzKSkgKyBcIiwgXCIgKyAocGFyZW5zRW5kKHRoaXMpKSArIFwiLCBcIiArIChwYXJlbnNDb250ZW50KHRoaXMpKSArIFwiKVwiO1xuICB9O1xuXG4gIHBhcmVuc1N0YXJ0ID0gZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiBwKGx6KGZ1bmN0aW9uKHMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihsKSB7XG4gICAgICAgICAgcmV0dXJuIHJ6KHMpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgcGFyZW5zRW5kID0gZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiBwKGx6KGZ1bmN0aW9uKHMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihsKSB7XG4gICAgICAgICAgcmV0dXJuIHJ6KGUpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgcGFyZW5zQ29udGVudCA9IGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gcChseihmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkge1xuICAgICAgICAgIHJldHVybiByeihsKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygndHJ1ZScpO1xuXG4gIExlaXN1cmVfdHJ1ZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJ0cnVlXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdmYWxzZScpO1xuXG4gIExlaXN1cmVfZmFsc2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiZmFsc2VcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2xlZnQnKTtcblxuICBMZWlzdXJlX2xlZnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiTGVmdChcIiArICh0aGlzKGx6KF9pZGVudGl0eSkpKGx6KF9pZGVudGl0eSkpKSArIFwiKVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygncmlnaHQnKTtcblxuICBMZWlzdXJlX3JpZ2h0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIlJpZ2h0KFwiICsgKHRoaXMobHooX2lkZW50aXR5KSkobHooX2lkZW50aXR5KSkpICsgXCIpXCI7XG4gIH07XG5cbiAgcm9vdC5fdHJ1ZSA9IF90cnVlO1xuXG4gIHJvb3QuX2ZhbHNlID0gX2ZhbHNlO1xuXG4gIHJvb3Quc3RhdGVWYWx1ZXMgPSB2YWx1ZXM7XG5cbiAgcm9vdC5ydW5Nb25hZCA9IHJ1bk1vbmFkO1xuXG4gIHJvb3QubmV3UnVuTW9uYWQgPSBuZXdSdW5Nb25hZDtcblxuICByb290LmlzTW9uYWQgPSBpc01vbmFkO1xuXG4gIHJvb3QuaWRlbnRpdHkgPSBpZGVudGl0eTtcblxuICByb290LnNldFZhbHVlID0gc2V0VmFsdWU7XG5cbiAgcm9vdC5nZXRWYWx1ZSA9IGdldFZhbHVlO1xuXG4gIHJvb3QubWFrZU1vbmFkID0gbWFrZU1vbmFkO1xuXG4gIHJvb3QubWFrZVN5bmNNb25hZCA9IG1ha2VTeW5jTW9uYWQ7XG5cbiAgcm9vdC5yZXBsYWNlRXJyID0gcmVwbGFjZUVycjtcblxuICByb290LmxlZnQgPSBsZWZ0O1xuXG4gIHJvb3QucmlnaHQgPSByaWdodDtcblxuICByb290LmdldE1vbmFkU3luY01vZGUgPSBnZXRNb25hZFN5bmNNb2RlO1xuXG4gIHJvb3QuYXN5bmNNb25hZCA9IGFzeW5jTW9uYWQ7XG5cbiAgcm9vdC5zZXRXYXJuQXN5bmMgPSBzZXRXYXJuQXN5bmM7XG5cbiAgcm9vdC5jYWxsID0gY2FsbDtcblxuICByb290LmNhbGxNb25hZCA9IGNhbGxNb25hZDtcblxuICByb290LmJhc2ljQ2FsbCA9IGJhc2ljQ2FsbDtcblxuICByb290LmJvb2xlYW5Gb3IgPSBib29sZWFuRm9yO1xuXG4gIHJvb3QubmV3Q29uc0Zyb20gPSBjb25zRnJvbTtcblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cgIT09IG51bGwpIHtcbiAgICB3aW5kb3cucnVuTW9uYWQgPSBydW5Nb25hZDtcbiAgICB3aW5kb3cuc2V0VHlwZSA9IHNldFR5cGU7XG4gICAgd2luZG93LnNldERhdGFUeXBlID0gc2V0RGF0YVR5cGU7XG4gICAgd2luZG93LmRlZmF1bHRFbnYgPSBkZWZhdWx0RW52O1xuICAgIHdpbmRvdy5pZGVudGl0eSA9IGlkZW50aXR5O1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1ydW50aW1lLm1hcFxuKi9cblxufSkocmVxdWlyZShcIl9fYnJvd3NlcmlmeV9wcm9jZXNzXCIpLHNlbGYpIiwiTF9ydW5Nb25hZHMoW1xuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaWZcIikpKGxhenkoMCkpKGxhenkoXCJpZiA9IGlkXCIpKShMX2lkKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhZmV0Y2hcIikpKGxhenkoMikpKGxhenkoXCJhZmV0Y2ggayBhbGlzdCAgPSBhbGlzdCAoXFxcXGggdCBEIC4gaCBcXFxca2V5IHZhbHVlIC4gZXEga2V5IGsgdmFsdWUgKGFmZXRjaCBrIHQpKSBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2spe3JldHVybiBmdW5jdGlvbihMX2FsaXN0KXtyZXR1cm4gcmVzb2x2ZShMX2FsaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2gpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2tleSl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiByZXNvbHZlKExfZXEpKExfa2V5KShMX2spKExfdmFsdWUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWZldGNoKShMX2spKExfdCl9KSl9fX0pKX19fX0pKShMX25pbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhY29uc2ZcIikpKGxhenkoMykpKGxhenkoXCJhY29uc2Yga2V5IHZhbHVlIGxpc3QgPSBhY29ucyBrZXkgdmFsdWUgKGFyZW1vdmUga2V5IGxpc3QpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9rZXkpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zKShMX2tleSkoTF92YWx1ZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcmVtb3ZlKShMX2tleSkoTF9saXN0KX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhcmVtb3ZlXCIpKShsYXp5KDIpKShsYXp5KFwiYXJlbW92ZSBrZXkgbGlzdCA9IGlzTmlsIGxpc3RcXG4gIG5pbFxcbiAgZXEgKGhlYWQgKGhlYWQgbGlzdCkpIGtleVxcbiAgICBhcmVtb3ZlIGtleSAodGFpbCBsaXN0KVxcbiAgICBhY29uc1BhaXIgKGhlYWQgbGlzdCkgKGFyZW1vdmUga2V5ICh0YWlsIGxpc3QpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfa2V5KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX2xpc3QpKExfbmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9saXN0KX0pKX0pKShMX2tleSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcmVtb3ZlKShMX2tleSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnNQYWlyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcmVtb3ZlKShMX2tleSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSkpfSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJ3aGVuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gcmVzb2x2ZShMX2xpbmUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NvbmQpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9jb25kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImRvXCIpKShMX3Jlc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIm5pbFwiKSkoTF9uaWwpfSkpfSkpfX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFRva2VuR3JvdXApKGxhenkoXCJqc1tcIikpKGxhenkoXCJdXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcImpzW1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwianNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RyQ2F0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImZsYXR0ZW5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RpZnkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9saXN0KX0pKX0pKShMX25pbCl9KSkoTF9uaWwpfSkpfSkpKExfbmlsKX0pKX0pKShMX25pbCl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImh0bWxcIikpKGxhenkoMSkpKGxhenkoXCJodG1sIHggPSBcXFxcZiAuIGYgeFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfeCl9LCAnaHRtbCcpfSwgJ2h0bWwnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc3plcm9cIikpKGxhenkoMCkpKGxhenkoXCJpc3plcm8gPSBlcSAwXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShsYXp5KDApKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwb3NpdGl2ZVwiKSkobGF6eSgwKSkobGF6eShcInBvc2l0aXZlID0gMCA8XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyR5KShsYXp5KDApKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbikobGF6eShcIi0tXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbikobGF6eShcIisrXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCItLVwiKSkobGF6eSgwKSkobGF6eShcIi0tID0gKGZsaXAgKC0pKSAxXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZsaXApKExfJF8pKGxhenkoMSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIisrXCIpKShsYXp5KDApKShsYXp5KFwiKysgPSAoMSArKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykobGF6eSgxKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaW50ZXJjYWxhdGVcIikpKGxhenkoMikpKGxhenkoXCJpbnRlcmNhbGF0ZSB4IGwgPSBjb25jYXQgKGludGVyc3BlcnNlIHggbClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfY29uY2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ludGVyc3BlcnNlKShMX3gpKExfbCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ2aXNpdFwiKSkobGF6eSgyKSkobGF6eShcInZpc2l0IGZ1bmMgbCA9IFxcXFxcXFxcXFxuICByZXN1bHQgPSBmdW5jIGZ1bmMgbFxcbiAgLlxcbiAgaXNDb25zIHJlc3VsdFxcbiAgICByZXN1bHQgXFxcXGggdCAuIGNvbnMgKHZpc2l0IGZ1bmMgaCkgKHZpc2l0IGZ1bmMgdClcXG4gICAgcmVzdWx0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3Jlc3VsdDtcblxuTF9yZXN1bHQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Z1bmMpKExfZnVuYykoTF9sKX0pO1xucmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc3VsdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Zpc2l0KShMX2Z1bmMpKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF92aXNpdCkoTF9mdW5jKShMX3QpfSkpfX19KSl9KSkoTF9yZXN1bHQpfSkoKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNpbXBsaWZ5XCIpKShsYXp5KDEpKShsYXp5KFwic2ltcGxpZnkgZXhwclN0cmluZyA9IGRvXFxuICBsaXN0IDwtIHNjYW5MaW5lTSBleHByU3RyaW5nXFxuICB2aXNpdCAoXFxcXGZ1bmMgeCAuIGlzVG9rZW4geCAodG9rZW5TdHJpbmcgeCkgKChpc1BhcmVucyB4KSAodmlzaXQgZnVuYyAocGFyZW5zQ29udGVudCB4KSkgeCkpIGxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2V4cHJTdHJpbmcpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zY2FuTGluZU0pKExfZXhwclN0cmluZyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF92aXNpdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfeCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfeCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1BhcmVucykoTF94KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Zpc2l0KShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyZW5zQ29udGVudCkoTF94KX0pKX0pKShMX3gpfSkpfX19KSkoTF9saXN0KX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRvYWxsXCIpKShsYXp5KDApKShsYXp5KFwiZG9hbGwgPSBmb2xkcjEgKFxcXFxlbCByZXMgLiBiaW5kIGVsIFxcXFxfIC4gcmVzKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mb2xkcjEpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2VsKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXMpe3JldHVybiByZXNvbHZlKExfYmluZCkoTF9lbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9yZXMpfX0pKX19fSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlcXVpcmVKU1wiKSkobGF6eSgxKSkobGF6eShcInJlcXVpcmVKUyBmaWxlID0gYmluZCAoZ2V0VmFsdWUgJ3JlcXVpcmVkRmlsZXMnKVxcbiAgXFxcXGZpbGVzIC4gY29udGFpbnMgZmlsZXMgZmlsZVxcbiAgICBmYWxzZVxcbiAgICBiaW5kIChsb2FkSlMgZmlsZSlcXG4gICAgICBcXFxccmVzdWx0IC4gcmVzdWx0XFxuICAgICAgICBcXFxceCAuIGxlZnQgeFxcbiAgICAgICAgXFxcXF8gLiBiaW5kIChzZXRWYWx1ZSAncmVxdWlyZWRGaWxlcycgKGNvbnMgZmlsZSBmaWxlcykpXFxuICAgICAgICAgIFxcXFxfIC4gcmlnaHQgdHJ1ZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZmlsZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwicmVxdWlyZWRGaWxlc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZmlsZXMpe3JldHVybiByZXNvbHZlKExfY29udGFpbnMpKExfZmlsZXMpKExfZmlsZSkoTF9mYWxzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYWRKUykoTF9maWxlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF94KXtyZXR1cm4gcmVzb2x2ZShMX2xlZnQpKExfeCl9fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInJlcXVpcmVkRmlsZXNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9maWxlKShMX2ZpbGVzKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fXzApe3JldHVybiByZXNvbHZlKExfcmlnaHQpKExfdHJ1ZSl9fSkpfX0pKX19KSl9KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsb2FkSlNcIikpKGxhenkoMSkpKGxhenkoXCJsb2FkSlMgZmlsZSA9IGJpbmQgKHJlYWRGaWxlIGZpbGUpXFxuICBcXFxccmVzdWx0IC4gcmVzdWx0XFxuICAgIFxcXFxlcnIgLiBlcnJcXG4gICAgXFxcXGNvbnRlbnRzIC4ganMgY29udGVudHNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbGUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZWFkRmlsZSkoTF9maWxlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiByZXNvbHZlKExfZXJyKX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudHMpe3JldHVybiByZXNvbHZlKExfanMpKExfY29udGVudHMpfX0pKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZpbmRPcHRpb25cIikpKGxhenkoMikpKGxhenkoXCJmaW5kT3B0aW9uIGZ1bmMgbGlzdCA9IGRvXFxuICByZXN1bHQgPSBmdW5jIChoZWFkIGxpc3QpXFxuICBpc05pbCBsaXN0XFxuICAgIG5vbmVcXG4gICAgaXNOb25lIHJlc3VsdFxcbiAgICAgIGZpbmRPcHRpb24gZnVuYyAodGFpbCBsaXN0KVxcbiAgICAgIHJlc3VsdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9yZXN1bHQ7XG5cbkxfcmVzdWx0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSl9KTtcbnJldHVybiByZXNvbHZlKExfaXNOaWwpKExfbGlzdCkoTF9ub25lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzTm9uZSkoTF9yZXN1bHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmluZE9wdGlvbikoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbGlzdCl9KSl9KSkoTF9yZXN1bHQpfSkpfSkoKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRsZW1wdHlcIikpKGxhenkoMCkpKGxhenkoXCJkbGVtcHR5ID0gaWRcIikpKExfaWQpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRsXCIpKShsYXp5KDEpKShsYXp5KFwiZGwgaXRlbSA9IFxcXFxyZXN0IC4gaXRlbTpyZXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9pdGVtKShMX3Jlc3QpfSwgJ2RsJyl9LCAnZGwnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkbFB1c2hcIikpKGxhenkoMikpKGxhenkoXCJkbFB1c2ggbGlzdCBpdGVtID0gZGxBcHBlbmQgbGlzdCAoZGwgaXRlbSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiByZXNvbHZlKExfZGxBcHBlbmQpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kbCkoTF9pdGVtKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRsQXBwZW5kXCIpKShsYXp5KDIpKShsYXp5KFwiZGxBcHBlbmQgYSBiID0gXFxcXHJlc3QgLiBhIChiIHJlc3QpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfYSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iKShMX3Jlc3QpfSkpfSwgJ2RsQXBwZW5kJyl9fSwgJ2RsQXBwZW5kJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmVtb3ZlXCIpKShsYXp5KDIpKShsYXp5KFwicmVtb3ZlIHggbCA9IHJlbW92ZUlmIChlcSB4KSBsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF94KXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX3JlbW92ZUlmKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX3gpfSkpKExfbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZW1vdmVJZlwiKSkobGF6eSgyKSkobGF6eShcInJlbW92ZUlmIGYgbCA9IGZpbHRlciAoY29tcG9zZSBub3QgZikgbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZil7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29tcG9zZSkoTF9ub3QpKExfZil9KSkoTF9sKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFueVwiKSkobGF6eSgyKSkobGF6eShcImFueSBmIGwgPSBmaW5kIGYgbCAoXFxcXGVsIC4gdHJ1ZSkgZmFsc2VcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfZmluZCkoTF9mKShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2VsKXtyZXR1cm4gcmVzb2x2ZShMX3RydWUpfX0pKShMX2ZhbHNlKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFsbFwiKSkobGF6eSgyKSkobGF6eShcImFsbCBmIGwgPSBub3QgYW55IChjb21wb3NlIG5vdCBmKSBsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX25vdCkoTF9hbnkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29tcG9zZSkoTF9ub3QpKExfZil9KSkoTF9sKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRha2VcIikpKGxhenkoMikpKGxhenkoXCJ0YWtlIG4gbGlzdCA9IHBvc2l0aXZlIG5cXG4gIGxpc3RcXG4gICAgXFxcXGggdCBEIC4gY29ucyBoICh0YWtlICgtLSBuKSB0KVxcbiAgICBuaWxcXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9wb3NpdGl2ZSkoTF9uKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rha2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJF8kXykoTF9uKX0pKShMX3QpfSkpfX19fSkpKExfbmlsKX0pKShMX25pbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ0YWtlV2hpbGVcIikpKGxhenkoMikpKGxhenkoXCJ0YWtlV2hpbGUgcHJlZGljYXRlIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBwcmVkaWNhdGUgKGhlYWQgbGlzdClcXG4gICAgY29ucyBoICh0YWtlV2hpbGUgcHJlZGljYXRlIHQpXFxuICAgIG5pbFxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wcmVkaWNhdGUpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9wcmVkaWNhdGUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9saXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWtlV2hpbGUpKExfcHJlZGljYXRlKShMX3QpfSkpfSkpKExfbmlsKX19fX0pKShMX25pbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkcm9wXCIpKShsYXp5KDIpKShsYXp5KFwiZHJvcCB4IGxpc3QgPSBwb3NpdGl2ZSB4XFxuICBsaXN0XFxuICAgIFxcXFxoIHQgRCAuIGRyb3AgKC0tIHgpIHRcXG4gICAgbmlsXFxuICBsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF94KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aXZlKShMX3gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9kcm9wKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRfJF8pKExfeCl9KSkoTF90KX19fX0pKShMX25pbCl9KSkoTF9saXN0KX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRyb3BXaGlsZVwiKSkobGF6eSgyKSkobGF6eShcImRyb3BXaGlsZSBwcmVkaWNhdGUgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIHByZWRpY2F0ZSBoXFxuICAgIGRyb3BXaGlsZSBwcmVkaWNhdGUgdFxcbiAgICBsaXN0XFxuICBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ByZWRpY2F0ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX3ByZWRpY2F0ZSkoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Ryb3BXaGlsZSkoTF9wcmVkaWNhdGUpKExfdCl9KSkoTF9saXN0KX19fX0pKShMX25pbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkcm9wTGFzdFwiKSkobGF6eSgyKSkobGF6eShcImRyb3BMYXN0IG4gbGlzdCA9IHJldmVyc2UgKGRyb3AgbiAocmV2ZXJzZSBsaXN0KSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfcmV2ZXJzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kcm9wKShMX24pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmV2ZXJzZSkoTF9saXN0KX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImJveFwiKSkobGF6eSgyKSkobGF6eShcImJveCBuIGxpc3QgPSBsaXN0ID09IG5pbFxcbiAgbmlsXFxuICBbKHRha2UgbiBsaXN0KSB8IGJveCBuIChkcm9wIG4gbGlzdCldXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKExfbGlzdCkoTF9uaWwpKExfbmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFrZSkoTF9uKShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYm94KShMX24pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZHJvcCkoTF9uKShMX2xpc3QpfSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYXRcIikpKGxhenkoMikpKGxhenkoXCJhdCBsIHggPSAoeCA9PSAwKSAoaGVhZCBsKSAoYXQgKHRhaWwgbCkgKC0tICh4KSApIClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfJHAkcCkoTF94KShsYXp5KDApKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2wpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJF8kXykoTF94KX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNlcmllc1wiKSkobGF6eSgyKSkobGF6eShcInNlcmllcyBmdW5jIG4gPSBuOihzZXJpZXMgZnVuYyAoZnVuYyBuKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiByZXNvbHZlKExfY29ucykoTF9uKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NlcmllcykoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Z1bmMpKExfbil9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmcm9tXCIpKShsYXp5KDEpKShsYXp5KFwiZnJvbSBuID0gc2VyaWVzICsrIG5cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiByZXNvbHZlKExfc2VyaWVzKShMXyRvJG8pKExfbil9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZyb21CeVwiKSkobGF6eSgyKSkobGF6eShcImZyb21CeSBuIGluYyA9IHNlcmllcyAoKCspIGluYykgblwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfaW5jKXtyZXR1cm4gcmVzb2x2ZShMX3NlcmllcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykoTF9pbmMpfSkpKExfbil9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmcm9tVG9cIikpKGxhenkoMikpKGxhenkoXCJmcm9tVG8gbiBtID0gdGFrZVdoaWxlICgoPikgbSkgKGZyb20gbilcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiBmdW5jdGlvbihMX20pe3JldHVybiByZXNvbHZlKExfdGFrZVdoaWxlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyR6KShMX20pfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZnJvbSkoTF9uKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZyb21Ub0J5XCIpKShsYXp5KDMpKShsYXp5KFwiZnJvbVRvQnkgbiBtIGluYyA9IHRha2VXaGlsZSAoKD4pIG0pIChmcm9tQnkgbiBpbmMpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uKXtyZXR1cm4gZnVuY3Rpb24oTF9tKXtyZXR1cm4gZnVuY3Rpb24oTF9pbmMpe3JldHVybiByZXNvbHZlKExfdGFrZVdoaWxlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyR6KShMX20pfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZnJvbUJ5KShMX24pKExfaW5jKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjb3VudFwiKSkobGF6eSgyKSkobGF6eShcImNvdW50IHggbCA9IGNvdW50SWYgKGVxIHgpIGxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfY291bnRJZikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF94KX0pKShMX2wpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY291bnRJZlwiKSkobGF6eSgyKSkobGF6eShcImNvdW50SWYgZiBsID0gKGVxIGwgbmlsKSAwXFxuICArIChmIChoZWFkIGwpIDEgMCkgKGNvdW50SWYgZiAodGFpbCBsKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfZXEpKExfbCkoTF9uaWwpKGxhenkoMCkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2wpfSkpKGxhenkoMSkpKGxhenkoMCkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY291bnRJZikoTF9mKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbCl9KSl9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjb3VudElmTm90XCIpKShsYXp5KDIpKShsYXp5KFwiY291bnRJZk5vdCBmIGwgPSBjb3VudElmIChcXFxceC4gbm90IChmIHgpKSBsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2NvdW50SWYpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfeCl9KSl9fSkpKExfbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJvZGRzXCIpKShsYXp5KDEpKShsYXp5KFwib2RkcyBsID0gbFxcbiAgXFxcXGggdCBEIC4gW2ggfCBldmVucyB0XVxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2V2ZW5zKShMX3QpfSkpfX19fSkpKExfbmlsKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZXZlbnNcIikpKGxhenkoMSkpKGxhenkoXCJldmVucyBsID0gbFxcbiAgXFxcXGggdCBEIC4gb2RkcyB0XFxuICBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9vZGRzKShMX3QpfX19fSkpKExfbmlsKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY2xlYXZlXCIpKShsYXp5KDEpKShsYXp5KFwiY2xlYXZlIGwgPSBbKGV2ZW5zIGwpIHwgKG9kZHMgbCldXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXZlbnMpKExfbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vZGRzKShMX2wpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtZXJnZVwiKSkobGF6eSgzKSkobGF6eShcIm1lcmdlIGNtcCBhIGIgPSBhXFxuICBcXFxcYWggYXQgRCAuIGJcXG4gICAgXFxcXGJoIGJ0IEQgLiBjbXAgYWggYmhcXG4gICAgICBbYWggfCAobWVyZ2UgY21wIGF0IGIpXVxcbiAgICAgIFtiaCB8IChtZXJnZSBjbXAgYSBidCldXFxuICAgIGFcXG4gIGJcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NtcCl7cmV0dXJuIGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9hKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9haCl7cmV0dXJuIGZ1bmN0aW9uKExfYXQpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfYikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYmgpe3JldHVybiBmdW5jdGlvbihMX2J0KXtyZXR1cm4gZnVuY3Rpb24oTF9EXzApe3JldHVybiByZXNvbHZlKExfY21wKShMX2FoKShMX2JoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfYWgpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWVyZ2UpKExfY21wKShMX2F0KShMX2IpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9iaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tZXJnZSkoTF9jbXApKExfYSkoTF9idCl9KSl9KSl9fX19KSkoTF9hKX19fX0pKShMX2IpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm1lcmdlU29ydFwiKSkobGF6eSgyKSkobGF6eShcIm1lcmdlU29ydCBjbXAgbCA9IGxcXG4gIFxcXFxoIHQgRCAuIGVxICh0YWlsIGwpIG5pbFxcbiAgICBsXFxuICAgIGRvXFxuICAgICAgY2wgPSBjbGVhdmUgbFxcbiAgICAgIGUgPSBoZWFkIGNsXFxuICAgICAgbyA9IHRhaWwgY2xcXG4gICAgICBtZXJnZSBjbXAgKG1lcmdlU29ydCBjbXAgZSkgKG1lcmdlU29ydCBjbXAgbylcXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY21wKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfZXEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9sKX0pKShMX25pbCkoTF9sKShmdW5jdGlvbigpe1xudmFyIExfbywgTF9lLCBMX2NsO1xuXG5MX28gPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfY2wpfSk7XG5cbkxfZSA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9jbCl9KTtcblxuTF9jbCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY2xlYXZlKShMX2wpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX21lcmdlKShMX2NtcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tZXJnZVNvcnQpKExfY21wKShMX2UpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWVyZ2VTb3J0KShMX2NtcCkoTF9vKX0pKX0pfX19fSkpKExfbmlsKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNvcnRcIikpKGxhenkoMSkpKGxhenkoXCJzb3J0IGwgPSBzb3J0QnkgKDw9KSBsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX3NvcnRCeSkoTF8keSRwKShMX2wpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzb3J0QnlcIikpKGxhenkoMikpKGxhenkoXCJzb3J0QnkgY21wIGwgPSBtZXJnZVNvcnQgY21wIGxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NtcCl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9tZXJnZVNvcnQpKExfY21wKShMX2wpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW4pKGxhenkoXCItPlwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWtTdHJcIikpKGxhenkoMSkpKGxhenkoXCJta1N0ciB0b2sgPSBjb25jYXRbJ1xcXCInICh0b2tlblN0cmluZyB0b2spICdcXFwiJ11cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXCJcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF90b2spfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXCJcIikpKExfbmlsKX0pKX0pKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJkZWZDYXNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3QzLCBMX2gzLCBMX3QyLCBMX2gyLCBMX3QxLCBMX2gxO1xuXG5MX3QzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3QyKX0pO1xuXG5MX2gzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3QyKX0pO1xuXG5MX3QyID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3QxKX0pO1xuXG5MX2gyID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3QxKX0pO1xuXG5MX3QxID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSk7XG5cbkxfaDEgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KTtcbnJldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9saXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfdDEpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF90Mil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oMikobGF6eShcIi5cIikpfSkpKExfdHJ1ZSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlQ2FzZUFyZ3MpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9ta1N0cikoTF9oMSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9ta1N0cikoTF9oMyl9KSkoTF90MykoTF9pZCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXCIpKShMX2xpc3QpfSkpfSkoKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFrZUNhc2VBcmdzXCIpKShsYXp5KDUpKShsYXp5KFwibWFrZUNhc2VBcmdzIG9yaWcgZnVuY05hbWUgYWx0TmFtZSByZXN0IGFyZ3MgPSByZXN0XFxuICBcXFxcaCB0IEQgLiBpc1Rva2VuU3RyaW5nIGggJ3wnXFxuICAgIG1ha2VDYXNlQ29uZGl0aW9uIG9yaWcgZnVuY05hbWUgYWx0TmFtZSAoYXJncyBuaWwpIHQgaWRcXG4gICAgbWFrZUNhc2VBcmdzIG9yaWcgZnVuY05hbWUgYWx0TmFtZSB0IChkbFB1c2ggYXJncyBoKVxcbiAgcGFyc2VFcnIgXFxcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXFxcIiBvcmlnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vcmlnKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jTmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfYWx0TmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIGZ1bmN0aW9uKExfYXJncyl7cmV0dXJuIHJlc29sdmUoTF9yZXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcInxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZUNhc2VDb25kaXRpb24pKExfb3JpZykoTF9mdW5jTmFtZSkoTF9hbHROYW1lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FyZ3MpKExfbmlsKX0pKShMX3QpKExfaWQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZUNhc2VBcmdzKShMX29yaWcpKExfZnVuY05hbWUpKExfYWx0TmFtZSkoTF90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RsUHVzaCkoTF9hcmdzKShMX2gpfSkpfSkpfX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJFcnJvciBpbiBjYXNlIGRlZmluaXRpb24gLS0gZXhwZWN0ZWQgZnVuYy5uYW1lIGFyZ3MgfCBjb25kaXRpb24gLT4gYWN0aW9uLCBidXQgZ290IFwiKSkoTF9vcmlnKX0pKX19fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm1ha2VDYXNlQ29uZGl0aW9uXCIpKShsYXp5KDYpKShsYXp5KFwibWFrZUNhc2VDb25kaXRpb24gb3JpZyBmdW5jTmFtZSBhbHROYW1lIGFyZ3MgcmVzdCBjb25kID0gcmVzdFxcbiAgXFxcXGggdCBEIC4gaXNUb2tlblN0cmluZyBoICctPidcXG4gICAgZm9sZHIxIGFwcGVuZCBbWydhbHREZWYnIGZ1bmNOYW1lIGFsdE5hbWUgKGxlbmd0aCBhcmdzKSAnXFxcXFxcXFwnXSBhcmdzIFsnLicgKGNvbmQgbmlsKSBbJ3NvbWUnIHRdICdub25lJ11dXFxuICAgIG1ha2VDYXNlQ29uZGl0aW9uIG9yaWcgZnVuY05hbWUgYWx0TmFtZSBhcmdzIHQgKGRsUHVzaCBjb25kIGgpXFxuIHBhcnNlRXJyIFxcXCJFcnJvciBpbiBjYXNlIGRlZmluaXRpb24gLS0gZXhwZWN0ZWQgZnVuYy5uYW1lIGFyZ3MgfCBjb25kaXRpb24gLT4gYWN0aW9uLCBidXQgZ290IFxcXCIgb3JpZ1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3JpZyl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuY05hbWUpe3JldHVybiBmdW5jdGlvbihMX2FsdE5hbWUpe3JldHVybiBmdW5jdGlvbihMX2FyZ3Mpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBmdW5jdGlvbihMX2NvbmQpe3JldHVybiByZXNvbHZlKExfcmVzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCItPlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mb2xkcjEpKExfYXBwZW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImFsdERlZlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2Z1bmNOYW1lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfYWx0TmFtZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xlbmd0aCkoTF9hcmdzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFxcXCIpKShMX25pbCl9KSl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2FyZ3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbmQpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcInNvbWVcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF90KShMX25pbCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwibm9uZVwiKSkoTF9uaWwpfSkpfSkpfSkpfSkpKExfbmlsKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VDYXNlQ29uZGl0aW9uKShMX29yaWcpKExfZnVuY05hbWUpKExfYWx0TmFtZSkoTF9hcmdzKShMX3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGxQdXNoKShMX2NvbmQpKExfaCl9KSl9KSl9fX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXCIpKShMX29yaWcpfSkpfX19fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FsdERlZikobGF6eShcInNob3dcIikpKGxhenkoXCJzb21lXCIpKShsYXp5KDEpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9vYmopKExfc29tZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zb21lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiU29tZShcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vYmopKExfaWQpKExfZmFsc2UpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIilcIikpKExfbmlsKX0pKX0pKX0pKX0pKX0pKShMX25vbmUpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJzaG93XCIpKShsYXp5KFwic29tZTJcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9zb21lMikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zb21lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiU29tZTIoXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb2JqKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfYSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLCBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9iKShMX25pbCl9KSl9KSl9fX0pKShMX2ZhbHNlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIpXCIpKShMX25pbCl9KSl9KSl9KSl9KSl9KSkoTF9ub25lKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwic2hvd1wiKSkobGF6eShcIm5vbmVcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9ub25lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NvbWUpKGxhenkoXCJOb25lXCIpKX0pKShMX25vbmUpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJzaG93XCIpKShsYXp5KFwibGVmdFwiKSkobGF6eSgxKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfb2JqKShMX2xlZnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIkxlZnQoXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb2JqKShMX2lkKShMX2lkKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIpXCIpKShMX25pbCl9KSl9KSl9KSl9KSl9KSkoTF9ub25lKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwic2hvd1wiKSkobGF6eShcInJpZ2h0XCIpKShsYXp5KDEpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9vYmopKExfcmlnaHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlJpZ2h0KFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29iaikoTF9pZCkoTF9pZCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiKVwiKSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpKExfbm9uZSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FsdERlZikobGF6eShcInNob3dcIikpKGxhenkoXCJuaWxcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc29tZSkobGF6eShcIm5pbFwiKSl9KSkoTF9ub25lKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwic2hvd1wiKSkobGF6eShcImFzc29jXCIpKShsYXp5KDEpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaXNBbGlzdCkoTF9vYmopKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmxhdHRlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwie1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ludGVyc3BlcnNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Nob3cpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9pdGVtKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI6XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvdykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2l0ZW0pfSkpfSkpKExfbmlsKX0pKX0pKX19KSkoTF9vYmopfSkpKGxhenkoXCIgXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJ9XCIpKShMX25pbCl9KSl9KSl9KSl9KSl9KSl9KSkoTF9ub25lKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwic2hvd1wiKSkobGF6eShcImhhbXRcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9oYW10KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NvbWUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZsYXR0ZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImhhbXR7XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaW50ZXJzcGVyc2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFwKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvdykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2l0ZW0pfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjpcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zaG93KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfaXRlbSl9KSl9KSkoTF9uaWwpfSkpfSkpfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hhbXRQYWlycykoTF9vYmopfSkpfSkpKGxhenkoXCIgXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJ9XCIpKShMX25pbCl9KSl9KSl9KSl9KSl9KSl9KSkoTF9ub25lKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwic2hvd1wiKSkobGF6eShcImNvbnNcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NvbWUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZsYXR0ZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIltcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zaG93KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfb2JqKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvd0NvbnNFbGVtZW50cykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX29iail9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiXVwiKSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpfSkpfSkpKExfbm9uZSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNob3dDb25zRWxlbWVudHNcIikpKGxhenkoMSkpKGxhenkoXCJzaG93Q29uc0VsZW1lbnRzIGxpc3QgPSBpc0NvbnMgbGlzdFxcbiAgWycgJyAoc2hvdyAoaGVhZCBsaXN0KSkgKHNob3dDb25zRWxlbWVudHMgKHRhaWwgbGlzdCkpXVxcbiAgaXNOaWwgbGlzdFxcbiAgICAnJ1xcbiAgICBbJyB8ICcgKHNob3cgbGlzdCldXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvdykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zaG93Q29uc0VsZW1lbnRzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbGlzdCl9KSl9KSkoTF9uaWwpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbGlzdCkobGF6eShcIlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiIHwgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvdykoTF9saXN0KX0pKShMX25pbCl9KSl9KSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FsdERlZikobGF6eShcImJpbmRcIikpKGxhenkoXCJvcHRpb25cIikpKGxhenkoMikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29wdCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29wdCkoTF9zb21lKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfb3B0KShMX25vbmUpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcHQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfdmFsdWUpfX0pKShMX25vbmUpfSkpfSkpKExfbm9uZSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJiaW5kXCIpKShsYXp5KFwiZWl0aGVyXCIpKShsYXp5KDIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9laXRoZXIpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9laXRoZXIpKExfbGVmdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX2VpdGhlcikoTF9yaWdodCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zb21lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VpdGhlcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9laXRoZXIpfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX3ZhbHVlKX19KSl9KSl9KSkoTF9ub25lKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZk1hY3JvKShsYXp5KFwiZGVmV3JhcHBlclwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9ncmFiTGVmdE9mQXJyb3cpKExfbGlzdCkoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xlZnQpe3JldHVybiBmdW5jdGlvbihMX3JpZ2h0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJvdmVycmlkZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiJ1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clRva2VuU3RyaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGVmdCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiJ1wiKSkoTF9uaWwpfSkpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9sZWZ0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIuXCIpKShMX3JpZ2h0KX0pKX0pKShMX25pbCl9KSl9KSl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZ3JhYkxlZnRPZkFycm93XCIpKShsYXp5KDMpKShsYXp5KFwiZ3JhYkxlZnRPZkFycm93IGxpc3QgbGVmdCBjb250ID0gaXNUb2tlblN0cmluZyAoaGVhZCBsaXN0KSAnLT4nXFxuICBjb250IChyZXZlcnNlIGxlZnQpICh0YWlsIGxpc3QpXFxuICBncmFiTGVmdE9mQXJyb3cgKHRhaWwgbGlzdCkgKGhlYWQgbGlzdCkgOiBsZWZ0IGNvbnRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2xlZnQpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpKGxhenkoXCItPlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JldmVyc2UpKExfbGVmdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ3JhYkxlZnRPZkFycm93KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSkoTF9sZWZ0KX0pKShMX2NvbnQpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX292ZXJyaWRlKShsYXp5KFwiaGVhZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb2xkSGVhZCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwiaGVhZCBhcmd1bWVudFwiKSkoTF9jb25zKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaCl9fX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX292ZXJyaWRlKShsYXp5KFwidGFpbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb2xkVGFpbCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwidGFpbCBhcmd1bWVudFwiKSkoTF9jb25zKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfdCl9fX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX292ZXJyaWRlKShsYXp5KFwiaGFtdFdpdGhcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29sZEhhbXRXaXRoKXtyZXR1cm4gZnVuY3Rpb24oTF9rZXkpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gZnVuY3Rpb24oTF9oYW10KXtyZXR1cm4gcmVzb2x2ZShMX29sZEhhbXRXaXRoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJoYW10V2l0aCBrZXlcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX2tleSl9KSkoTF92YWx1ZSkoTF9oYW10KX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaHRtbFwiKSkobGF6eSgxKSkobGF6eShcImh0bWwgeCA9IFxcXFxmIC4gZiB4XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF94KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF94KX0sICdodG1sJyl9LCAnaHRtbCcpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZlRva2VuUGFjaykobGF6eShcInV0aWxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLT5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIi0tXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIrK1wiKSkoTF9uaWwpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJqc1tcIikpKGxhenkoXCJdXCIpKX0pKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX25pbCkoTF9uaWwpfSkpfSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFN0ZFRva2VuUGFja3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcInV0aWxcIikpKExfbmlsKX0pKX1dKTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbnByb2Nlc3MubmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYW5TZXRJbW1lZGlhdGUgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5zZXRJbW1lZGlhdGU7XG4gICAgdmFyIGNhblBvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5wb3N0TWVzc2FnZSAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lclxuICAgIDtcblxuICAgIGlmIChjYW5TZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGYpIH07XG4gICAgfVxuXG4gICAgaWYgKGNhblBvc3QpIHtcbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBpZiAoZXYuc291cmNlID09PSB3aW5kb3cgJiYgZXYuZGF0YSA9PT0gJ3Byb2Nlc3MtdGljaycpIHtcbiAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgncHJvY2Vzcy10aWNrJywgJyonKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgfTtcbn0pKCk7XG5cbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn1cblxuLy8gVE9ETyhzaHR5bG1hbilcbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzdHIpIHtcbiAgdmFyIGhhc2ggPSA1MzgxLFxuICAgICAgaSAgICA9IHN0ci5sZW5ndGhcblxuICB3aGlsZShpKVxuICAgIGhhc2ggPSAoaGFzaCAqIDMzKSBeIHN0ci5jaGFyQ29kZUF0KC0taSlcblxuICAvKiBKYXZhU2NyaXB0IGRvZXMgYml0d2lzZSBvcGVyYXRpb25zIChsaWtlIFhPUiwgYWJvdmUpIG9uIDMyLWJpdCBzaWduZWRcbiAgICogaW50ZWdlcnMuIFNpbmNlIHdlIHdhbnQgdGhlIHJlc3VsdHMgdG8gYmUgYWx3YXlzIHBvc2l0aXZlLCBpZiB0aGUgaGlnaCBiaXRcbiAgICogaXMgc2V0LCB1bnNldCBpdCBhbmQgYWRkIGl0IGJhY2sgaW4gdGhyb3VnaCAoNjQtYml0IElFRUUpIGFkZGl0aW9uLiAqL1xuICByZXR1cm4gaGFzaCA+PSAwID8gaGFzaCA6IChoYXNoICYgMHg3RkZGRkZGRikgKyAweDgwMDAwMDAwXG59XG4iLCIvLyMgSGFzaGluZyBmdW5jdGlvbnNcblxuLy8gSW50LCBJbnQgLT4gSW50XG4vLyBnZXRzIGEgPD0gNSBiaXQgc2VjdGlvbiBvZiBhIGhhc2gsIHNoaWZ0ZWQgZnJvbSB0aGUgbGVmdCBwb3NpdGlvblxuLy8gaW4gcHJhY3RpY2UsIGEgMzIgYml0IHNwbGl0cyBpbnRvIDcgY2h1bmtzIC0gNiBvZiA1IGJpdHMsIG9uZSBvZiAyXG52YXIgbWFzayA9IGZ1bmN0aW9uKGhhc2gsIGZyb20peyByZXR1cm4gKGhhc2ggPj4+IGZyb20pICYgMHgwMWYgfVxuXG4vLyBTdHJpbmcsIEludCwgRnVuY3Rpb24gLT4gSW50XG4vLyBnZXRzIGEgY2h1bmsgb2YgYSBoYXNoLCBnaXZlbiBhIHN0cmluZyBhbmQgYSBoYXNoaW5nIGZ1bmN0aW9uXG4vLyB0aGUgaGFzaGluZyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgMzIgYml0IGhhc2guXG52YXIgaGFzaE1hc2sgPSBmdW5jdGlvbihzdHIsIGZyb20sIGhhc2gpe1xuICAgIHJldHVybiBtYXNrKGhhc2goc3RyKSwgZnJvbSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdGhhc2g6IHJlcXVpcmUoJ3N0cmluZy1oYXNoJyksXG5cdG1hc2s6IGhhc2hNYXNrXG59XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJylcbnZhciBoYXNoID0gcmVxdWlyZSgnLi9oYXNoJylcbnZhciBsaWIgPSBtb2R1bGUuZXhwb3J0c1xuXG4vLyMgcGVyc2lzdGVudCBIYXNoIFRyaWVcblxuLy8gQSBUcmllIGlzIGEgc3BlY2lhbGlzZWQgdmVyc2lvbiBvZiBhIFRyZWUsIGluIHdoaWNoIG5vZGVzIGNhbiBiZSBmb3VuZCBieSBuYXZpZ2F0aW5nIGEgJ3BhdGgnLlxuLy8gRm9yIGluc3RhbmNlLCBhIGRpY3Rpb25hcnkgVHJpZSBtYXkgc3RhcnQgd2l0aCBhIHJvb3Qgbm9kZSwgaGF2ZSBBLVogYXMgdGhlIGNoaWxkIG5vZGVzLlxuLy8gVGhvc2UgY2hpbGQgbm9kZXMgbWF5IGFsc28gYmUgVHJpZXMgKGNvbW1vbmx5IHJlZmVycmVkIHRvIGFzIHN1Yi1UcmllcykuICBUaGVyZWZvcmUsIGlmXG4vLyB5b3Ugd2FudCB0byBsb29rIHVwICdBTlQnLCB5b3UgY2FuIHNlZSBpZiBpdCdzIGluIHRoZSBUcmllIGJ5IG5hdmlnYXRpbmcgdG8gbm9kZSBBLCB0aGVuIHRvXG4vLyBub2RlIEEncyBjaGlsZCBub2RlIE4sIHRoZW4gdG8gdGhhdCBub2RlJ3MgY2hpbGQgbm9kZSBULiAgaS5lLiB0aGUgcGF0aCBmb3IgQU5UIGlzIEEtPk4tPlRcblxuLy8gQSBIYXNoIFRyaWUgZm9ybXMgaXRzIHBhdGggYnkgdGFraW5nIGEgaGFzaCBvZiB0aGUgc3RyaW5nIHRoYXQgaXMgYmVpbmcgbG9va2VkIHVwLCBhbmRcbi8vIHNwbGl0dGluZyB0aGF0IGludG8gcGFydHM6XG4vLyBBTlQgPSAwMTEwMTEwMTEwMTExMDExMTAxMDExMTAxMTAwMDAxMSA9IDAxMTAxLT4xMDExMC0+MTExMDEtPjExMDEwLT4xMTEwMS0+MTAwMDAtPjExXG4vLyBJbiB0aGlzIHNjaGVtZSwgYSAzMi1iaXQgaGFzaCBpcyB0YWtlbiwgYW5kIHNwbGl0IGludG8gcGF0aCBwYXJ0cyB0aGF0IGFyZSBtYXhpbWFsbHlcbi8vIDUgYml0cyBsb25nLiAgRWFjaCBUcmllIHRoZXJlZm9yZSBoYXMgY2hpbGRyZW4gZnJvbSAwMDAwMC0xMTExMSAob3IgMC0zMSBpbiBkZWNpbWFsKS5cblxuLy8gSGFzaCBUcmllcyBhbGxvdyB1cyB0byBzdG9yZSBub2RlcyBhdCBhIHNoYWxsb3cgZGVwdGguICBGb3IgaW5zdGFuY2UsIGlmIHRoZXJlIGlzIG9ubHlcbi8vIG9uZSBtZW1iZXIgb2YgdGhlIFRyaWUgd2hvc2Uga2V5J3MgZmlyc3QgcGF0aCBwYXJ0IGlzIDAxMTAxLCB0aGVuIHdlIGNhbiBzdG9yZSB0aGUgdmFsdWVcbi8vIGRpcmVjdGx5IGFzIHRoZSByb290IFRyaWUncyAwMTEwMSBjaGlsZCBub2RlLiAgV2h5IGdvIGRlZXBlcj8gIEl0IGp1c3QgY29zdHMgbW9yZSB0byByZXRyaWV2ZS5cblxuLy8gSXQgYWxzbyBhbGxvd3MgdXMgdG8ga2VlcCB0aGUgVHJpZSBmYWlybHkgYmFsYW5jZWQ7IHNpbmNlIGEgaGFzaCBmdW5jdGlvbiBzaG91bGQgYmVcbi8vIGhhdmUgYW4gZXZlbiBkaXN0cmlidXRpb24gb2YgaGFzaGVzLCBldmVuIGlmIHRoZSBpbnB1dHMgc2hhcmUgY29tbW9uIHByZWZpeGVzLlxuLy8gSWYgd2UgdXNlZCB0aGUgZmlyc3QgMiBsZXR0ZXJzIG9mIGEgd29yZCwgZm9yIGluc3RhbmNlLCB3ZSdkIGVuZCB1cCB3aXRoIGxvdHMgb2Zcbi8vIG5vZGVzIGluIHRoZSAndW4nIGFuZCAndGgnIHBhdGhzLCBhbmQgbm90IG1hbnkgaW4gdGhlICd0eCcgcGF0aC5cblxuLy8gQW4gcGVyc2lzdGVudCBIYXNoIFRyaWUgaXMgYSBIYXNoIFRyaWUgaW4gd2hpY2ggYW55IGNvbW1vbmx5IHVwZGF0aW5nIGFjdGlvbnMgLSByZW1vdmluZyxcbi8vIHNldHRpbmcgb3IgYWRkaW5nIHZhbHVlcyAtIHByb2R1Y2UgYW4gZW50aXJlbHkgbmV3IEhhc2ggVHJpZSwgYW5kICpkb24ndCogYWZmZWN0IHRoZVxuLy8gb3JpZ2luYWwgaW4gYW55IHdheS4gIFRoaXMgbWVhbnMgdGhhdCB0aGUgSGFzaCBUcmllcyBjYW4gYmUgc2hhcmVkIHNhZmVseTsgd2l0aG91dCBmZWFyXG4vLyB0aGF0IHVwZGF0aW5nIHRoZW0gd2lsbCByZXN1bHQgaW4gYSB2YWx1ZSBjaGFuZ2luZyBpbiBtdWx0aXBsZSBwbGFjZXMgaW4gYSBwcm9ncmFtLlxuXG4vLyBUbyBtYWtlIHRoaXMgZGlzdGluY3Rpb24gY2xlYXJlciwgdGhlIHZlcmJzICdzZXQnIGFuZCAncmVtb3ZlL2RlbGV0ZScgaGF2ZSBiZWVuIHJlcGxhY2VkXG4vLyB3aXRoIGFzc29jIChhc3NvY2lhdGUgYSBuZXcgdmFsdWUgd2l0aCBhbiBwZXJzaXN0ZW50IEhhc2ggVHJpZSksIGFuZCBkaXNzb2MgKGRpc3NvY2lhdGVcbi8vIGFuIGV4aXN0aW5nIHZhbHVlIHdpdGggYW4gcGVyc2lzdGVudCBIYXNoIFRyaWUpLlxuXG5cblxuLy8gdG8gYWxsb3cgaG9va3MgZm9yIG90aGVyIGltcGxlbWVudGF0aW9ucy90ZXN0cyB0byBvdmVycmlkZSB0aGUgZGVmYXVsdFxuLy8gaGFzaCBhbmQgZXF1YWxpdHkgZnVuY3Rpb25zICh3aGljaCBhcmUgdGhlIG5lY2Vzc2FyeSBvbmVzIGZvciBjcmVhdGluZ1xuLy8gaGFzaC10YWJsZS1saWtlIGJlaGF2aW91ciwgYXMgdGhlIGhhc2gtdHJpZSBoYXMpLCB0aGV5IGNhbiBiZSBwYXNzZWQgaW5cbi8vIGFzIG9wdHMgdG8gYXNzb2MvZGlzc29jL2dldC9oYXMuXG5cbi8vIFRoZXNlIGRlZmF1bHRzIGNvdmVyIHRoZSB+ODAlIHVzZSBjYXNlIG9mIHVub3JkZXJlZCBzdHJpbmc6dmFsIHBhaXJzLlxudmFyIGRlZmF1bHRPcHRzID0ge1xuICAgIGVxICAgOiBmdW5jdGlvbihhLCBiKXsgcmV0dXJuIGEgPT09IGIgfSxcbiAgICBoYXNoIDogaGFzaC5oYXNoXG59XG5cbi8vIyBOb2RlIFR5cGVzXG5cbi8vIE9iamVjdCAtPiBUcmllXG4vLyBhIFRyaWUgaXMgYSBzdG9yZSBvZiBjaGlsZHJlbiB2YWx1ZXM7IHRoZSBtb3N0IGJhc2ljIHR5cGUgb2Ygbm9uLWxlYWYgbm9kZS5cbnZhciBUcmllID0gbGliLlRyaWUgPSBmdW5jdGlvbihjaGlsZHJlbil7XG4gICAgcmV0dXJuIHsgdHlwZTogJ3RyaWUnLCBjaGlsZHJlbjogY2hpbGRyZW4gfHwge30gfVxufVxuXG4vLyBTdHJpbmcsIEpTVmFsdWUgLT4gVmFsdWVcbi8vIE5vZGUgdGhhdCByZXByZXNlbnRzIGEgc3BlY2lmaWMgdmFsdWVcbnZhciBWYWx1ZSA9IGxpYi5WYWx1ZSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgIHJldHVybiB7IHR5cGU6ICd2YWx1ZScsIGtleToga2V5LCB2YWx1ZTogdmFsdWUgfVxufVxuXG4vLyB7IEpTVmFsdWUgfSAtPiBIYXNobWFwXG4vLyBhIFRyaWUgd2lsbCBoYXZlIGEgbWF4IGRlcHRoIG9mIDcgKDYsIGlmIDAgaW5kZXhlZCkuICBBZnRlciB0aGF0LCBhZGRpdGlvbmFsXG4vLyB2YWx1ZXMgd2lsbCBqdXN0IHNsdW5nIGludG8gYSBoYXNobWFwIG5vZGVcbnZhciBIYXNobWFwID0gbGliLkhhc2htYXAgPSBmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHJldHVybiB7IHR5cGU6ICdoYXNobWFwJywgdmFsdWVzOiB2YWx1ZXMgfVxufVxuXG5cbi8vIyBCYXNpYyBtYW5pcHVsYXRpb24gZnVuY3Rpb25zIC0gaGFzL2dldC9hc3NvYy9kaXNzb2NcblxuLy8gT2JqZWN0LCBTdHJpbmcsIEpTVmFsdWUgLT4gT2JqZWN0XG5cbi8vIGNyZWF0ZXMgYSBzaGFsbG93IGNsb25lIG9mIGFuIG9iamVjdCwgYWRkaW5nIG9yIHJlcGxhY2luZyBhIGtleTp2YWwgcGFpclxuLy8gd2l0aCB0aGUgb25lIHByb3ZpZGVkXG5cbi8vIG5lY2Vzc2FyeSBmb3IgdXBkYXRpbmcgbm9kZXMgaW4gYGFzc29jYFxudmFyIGNvcHlBZGQgPSBmdW5jdGlvbihvYmosIGtleSwgdmFsKXtcbiAgICBvYmogPSB1dGlsLmNsb25lKG9iailcbiAgICBvYmpba2V5XSA9IHZhbFxuICAgIHJldHVybiBvYmpcbn1cblxuXG4vLyAgTm9kZSwgU3RyaW5nLCBKU1ZhbHVlLCAoSW50KSAtPiBUcmllXG5cbi8vIGFzc29jICdhc3NvY2lhdGVzJyBhIG5ldyB2YWx1ZSB3aXRoIGEgVHJpZS4gIEl0IGRvZXMgc28gYnkgZmluZGluZyB0aGVcbi8vIGFwcHJvcHJpYXRlIHBsYWNlIGZvciB0aGUgbmV3IG5vZGUsIHRoZW4gY3JlYXRpbmcgYSBjb3B5IG9mIHRoZSBwYXJlbnRcbi8vIG5vZGVzLCBhZGRpbmcgaW4gYSByZWZlcmVuY2UgdG8gdGhlIG5ld2x5IGNyZWF0ZWQgY2hpbGQgbm9kZSBlYWNoIHRpbWUuXG5cbi8vIFRoaXMgaXMgY2FsbGVkIHBhdGgtY29weWluZywgc2luY2UgdGhlIHBhdGggZnJvbSB0aGUgcm9vdCBub2RlIHRvIHRoZSBuZXdcbi8vIG5vZGUgaXMgY29waWVkIGZvcm0gb25lIGRhdGFzdHJ1Y3R1cmUgdG8gdGhlIG90aGVyLiAgU2luY2UgdGhlIHZhc3QgbWFqb3JpdHlcbi8vIG9mIGRhdGEgd2lsbCBsaWUgaW4gbm9kZXMgYmVuZWF0aGUgdGhlc2UgaW4gc2l6YWJsZSBkYXRhc3RydWN0dXJlcywgdGhpcyBzaGFyaW5nXG4vLyBvZiBkYXRhIGFsbG93cyBmb3IgcGVyc2lzdGVudCB2YWx1ZXMgdG8gYmUgdXBkYXRlZCByZWxhdGl2ZWx5IGVmZmVjaWVudGx5IGF0IGxhcmdlXG4vLyBzaXplLlxuXG4vLyBUaGUgYWxnb3JpdGhtIGlzIGFsc28gYXdhcmUgb2YgJ3NwZWNpZmljaXR5JzsgaS5lLiB0aGF0IGEgdmFsdWUgbmVlZCBvbmx5IGJlIHN0b3JlZFxuLy8gYXQgYSBkZXB0aCB3aGVyZSBpdCBjYW4gYmUgZGlzdGluZ3Vpc2hlZCB1bmlxdWVseSBmcm9tIG90aGVyIHZhbHVlcyBieSB2aXJ0dWUgb2YgaXRzXG4vLyBwYXRoLiAgSWYgYm90aCAnZm9vJyBhbmQgJ2JhcidzIGZpcnN0IDUgYml0cyBhcmUgMDExMDExLCBhbmQgYm90aCBhcmUgcHJlc2VudCBpbiB0aGVcbi8vIFRyaWUsIHRoZW4gdGhleSBtb3N0IGJlIHN0b3JlZCBpbiBhIHN1Yi1UcmllLCBhbmQgdXNlIHRoZSBmb2xsb3dpbmcgNSBiaXRzIHRvIGRpZmZlcmVuY2lhdGVcbi8vIHRoZW1zZWx2ZXMuICBJZiB0aGUgVHJpZSBnZXRzIGRlZXBlciB0aGFuIHRoZXJlIGFyZSBiaXRzIGluIHRoZSBoYXNoIChpLmUuIGEgdG90YWwgaGFzaCBjb2xsaXNpb24pXG4vLyB0aGVuIGl0IHNpbXBseSBzdG9yZXMgdGhlIG9iamVjdHMgaW4gYSBIYXNobWFwIG5vZGUuXG5saWIuYXNzb2MgPSBmdW5jdGlvbihub2RlLCBrZXksIHZhbCwgb3B0cyl7XG4gICAgcmV0dXJuIGFzc29jKG5vZGUsIGtleSwgdmFsLCBvcHRzIHx8IGRlZmF1bHRPcHRzLCAwKVxufVxuXG52YXIgYXNzb2MgPSBmdW5jdGlvbihub2RlLCBrZXksIHZhbCwgb3B0cywgZGVwdGgpe1xuICAgIHJldHVybiBhc3NvY0Zuc1tub2RlLnR5cGVdKG5vZGUsIGtleSwgdmFsLCBvcHRzLCBkZXB0aClcbn1cblxudmFyIGFzc29jRm5zID0ge1xuICAgIHRyaWU6IGZ1bmN0aW9uKG5vZGUsIGtleSwgdmFsLCBvcHRzLCBkZXB0aCl7XG4gICAgICAgIHZhciBwYXRoID0gaGFzaC5tYXNrKGtleSwgZGVwdGgsIG9wdHMuaGFzaClcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltwYXRoXVxuXG4gICAgICAgIGlmICggY2hpbGQgPT09IHVuZGVmaW5lZCAgKSByZXR1cm4gVHJpZShjb3B5QWRkKG5vZGUuY2hpbGRyZW4sIHBhdGgsIFZhbHVlKGtleSwgdmFsKSkpXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJpZShjb3B5QWRkKG5vZGUuY2hpbGRyZW4sIHBhdGgsIGFzc29jKGNoaWxkLCBrZXksIHZhbCwgb3B0cywgZGVwdGggKyAxKSkpXG4gICAgfSxcbiAgICB2YWx1ZTogZnVuY3Rpb24obm9kZSwga2V5LCB2YWwsIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgdmFyIG5vZGVQYXRoID0gaGFzaC5tYXNrKG5vZGUua2V5LCBkZXB0aCwgb3B0cy5oYXNoKVxuICAgICAgICB2YXIga2V5UGF0aCAgPSBoYXNoLm1hc2soa2V5LCBkZXB0aCwgb3B0cy5oYXNoKVxuXG4gICAgICAgIHZhciBtYWtlSGFzaG1hcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSB7fVxuICAgICAgICAgICAgY2hpbGRyZW5ba2V5XSA9IFZhbHVlKGtleSwgdmFsKVxuICAgICAgICAgICAgY2hpbGRyZW5bbm9kZS5rZXldID0gbm9kZVxuICAgICAgICAgICAgcmV0dXJuIEhhc2htYXAoY2hpbGRyZW4pXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzb2x2ZVNoYWxsb3dDb25mbGljdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSB7fVxuICAgICAgICAgICAgY2hpbGRyZW5bbm9kZVBhdGhdID0gbm9kZVxuICAgICAgICAgICAgY2hpbGRyZW5ba2V5UGF0aF0gID0gVmFsdWUoa2V5LCB2YWwpXG5cbiAgICAgICAgICAgIHJldHVybiBUcmllKGNoaWxkcmVuKVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc29sdmVEZWVwQ29uZmxpY3QgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0ge31cbiAgICAgICAgICAgIGNoaWxkcmVuW2tleVBhdGhdID0gYXNzb2Mobm9kZSwga2V5LCB2YWwsIG9wdHMsIGRlcHRoICsgMSlcbiAgICAgICAgICAgIHJldHVybiBUcmllKGNoaWxkcmVuKVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1ha2VUcmllID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICggbm9kZVBhdGggIT09IGtleVBhdGggKSByZXR1cm4gcmVzb2x2ZVNoYWxsb3dDb25mbGljdCgpXG4gICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVEZWVwQ29uZmxpY3QoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBvcHRzLmVxKG5vZGUua2V5LCBrZXkpICkgcmV0dXJuIFZhbHVlKGtleSwgdmFsKVxuICAgICAgICBlbHNlIGlmICggZGVwdGggPiA2ICkgICAgICAgICByZXR1cm4gbWFrZUhhc2htYXAoKVxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFrZVRyaWUoKVxuICAgIH0sXG4gICAgaGFzaG1hcDogZnVuY3Rpb24obm9kZSwga2V5LCB2YWwsIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgdmFyIHYgPSBjb3B5QWRkKG5vZGUudmFsdWVzLCBrZXksIFZhbHVlKGtleSwgdmFsKSlcbiAgICAgICAgcmV0dXJuIEhhc2htYXAodilcbiAgICB9XG59XG5cbi8vIE9iamVjdCwgU3RyaW5nIC0+IE9iamVjdFxuXG4vLyBjcmVhdGVzIGEgbmV3IG9iamVjdCwgYnV0IHdpdGhvdXQgYSBrZXkuXG4vLyBVc2VkIGluIGBkaXNzb2NgXG52YXIgY29weURpc3NvYyA9IGZ1bmN0aW9uKG9iaiwga2V5KXtcbiAgICBvYmogPSB1dGlsLmNsb25lKG9iailcbiAgICBkZWxldGUgb2JqW2tleV1cbiAgICByZXR1cm4gb2JqXG59XG5cblxuLy8gTm9kZSwgU3RyaW5nLCAoSW50KSAtPiBUcmllXG5cbi8vIGRpc3NvYyAoZGlzYXNzb2NpYXRlKSByZXR1cm5zIGEgbmV3IFRyaWUsIGJ1dCB3aXRob3V0IGEgc3BlY2lmaWVkIGtleVxuXG4vLyBBcyB3aXRoIGFzc29jLCBpdCByZWN1cnNlcyBkb3duIHRoZSBUcmllLiAgSWYgaXQgZmFpbHMgdG8gZmluZCBhIGtleSwgdGhlblxuLy8gaXQgcmV0dXJucyB0aGUgb3JpZ2luYWwgVHJpZSwgc2luY2UgdGhhdCBpcyBjb25jZXB0dWFsbHkgdGhlIHNhbWUgYXMgcmVtb3Zpbmdcbi8vIGEgbm9uLWV4aXN0YW50IGtleSBmcm9tIGFuIG9iamVjdC5cblxuLy8gSWYgaXQgZmluZHMgYSBWYWx1ZSBhc3NvY2lhdGVkIHdpdGggYSBrZXksIGhvd2V2ZXIsIGl0IHdpbGwgY3JlYXRlXG4vLyBhIHBhcmVudCBub2RlIHRvIHRoYXQgVmFsdWUgdGhhdCBjb3BpZXMgYWxsICpvdGhlciogdmFsdWVzLCBidXQgb21pdHNcbi8vIHRoZSB2YWx1ZSB3aXRoIHRoZSBrZXkgaW4gcXVlc3Rpb24uICBBcyB3aXRoIGFzc29jLCBpdCB3aWxsIGFsc28gcHJvZHVjZSBhXG4vLyBjb3B5IG9mICppdHMqIHBhcmVudC4gIFRoaXMgb2NjdXJzIHJlY3Vyc2l2ZWx5LCBhbmQgaXMgZXhhY3RseSB0aGUgc2FtZSBjb25jZXB0XG4vLyBhcyB0aGUgJ3BhdGggY29weWluZycgdGVjaG5pcXVlIHVzZWQgaW4gYXNzb2MuXG5cbi8vIElmIHJlbW92aW5nIGEgdmFsdWUgcmVtb3ZlcyBhIGhhc2ggY29sbGlzaW9uLCB0aGVuIHRoZSBUcmllIG5vZGUgdGhhdCBjb250YWluZWRcbi8vIHRob3NlIHZhbHVlcyBjYW4gYmUgcmVwbGFjZWQgd2l0aCBqdXN0IGEgVmFsdWUgbm9kZSwgd2hpY2ggcmVzdWx0cyBpbiBhIHNoYWxsb3dlclxuLy8gVHJpZS5cbmxpYi5kaXNzb2MgPSBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMpe1xuICAgIHJldHVybiBkaXNzb2Mobm9kZSwga2V5LCBvcHRzIHx8IGRlZmF1bHRPcHRzLCAwKVxufVxuXG52YXIgZGlzc29jID0gZnVuY3Rpb24obm9kZSwga2V5LCBvcHRzLCBkZXB0aCl7XG4gICAgcmV0dXJuIGRpc3NvY0Zuc1tub2RlLnR5cGVdKG5vZGUsIGtleSwgb3B0cywgZGVwdGgpXG59XG5cbnZhciBkaXNzb2NGbnMgPSB7XG4gICAgdHJpZTogZnVuY3Rpb24obm9kZSwga2V5LCBvcHRzLCBkZXB0aCl7XG4gICAgICAgIHZhciBwYXRoID0gaGFzaC5tYXNrKGtleSwgZGVwdGgsIG9wdHMuaGFzaClcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltwYXRoXVxuXG4gICAgICAgIC8vIGhhbmRsZSB0aGUgJ3ByZXNlbnQga2V5JyBjYXNlcy4gIElmIGl0J3MgYSBWYWx1ZSwgcmVtb3ZlIGl0LiAgSWYgaXQncyBhIHN1Yi1UcmllIG9yIEhhc2htYXBcbiAgICAgICAgLy8gcmVjdXJzZSB0byBwcmV2ZW50IG90aGVyIHZhbHVlcyBmcm9tIGJlaW5nIGxvc3RcbiAgICAgICAgdmFyIGRpc3NvY0tleSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoIGNoaWxkLnR5cGUgPT09ICd2YWx1ZScgJiYgb3B0cy5lcShjaGlsZC5rZXksIGtleSkgKVxuICAgICAgICAgICAgICAgIHJldHVybiBUcmllKGNvcHlEaXNzb2Mobm9kZS5jaGlsZHJlbiwgcGF0aCkpXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyaWUoY29weURpc3NvYyhub2RlLmNoaWxkcmVuLCBwYXRoLCBkaXNzb2MoY2hpbGQsIGtleSwgb3B0cywgZGVwdGggKyAxKSkpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGVyZSdzIG9ubHkgYSBzaW5nbGUgdmFsdWUgaW4gYSBUcmllIG5vZGUgbGVmdCwgdGhlbiBpdCBjYW4gYmUgcmVwbGFjZWQgYnkgaXRzIHZhbHVlLFxuICAgICAgICAvLyBhbGxvd2luZyB1cyB0byBtYWtlIHRoZSBUcmllIG1vcmUgc2hhbGxvdywgYW5kIHRoZXJlZm9yZSBtb3JlIGVmZmVjaWVudC5cbiAgICAgICAgdmFyIGNvbGxhcHNlVHJpZSA9IGZ1bmN0aW9uKHRyaWUpe1xuICAgICAgICAgICAgdmFyIG5hbWVzID0gdXRpbC5rZXlzKHRyaWUuY2hpbGRyZW4pXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0cmllLmNoaWxkcmVuW25hbWVzWzBdXVxuXG4gICAgICAgICAgICAvLyBkb24ndCBjb2xsYXBzZSBhbiBlbXB0eSByb290IHRyaWVcbiAgICAgICAgICAgIGlmICggZGVwdGggPT09IDAgKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmllXG4gICAgICAgICAgICBlbHNlIGlmICggY2hpbGQgPT09IHVuZGVmaW5lZCApICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJpZVxuICAgICAgICAgICAgZWxzZSBpZiAoIG5hbWVzLmxlbmd0aCA9PT0gMSAmJiBjaGlsZC50eXBlID09PSAndmFsdWUnICkgcmV0dXJuIFZhbHVlKGNoaWxkLmtleSwgY2hpbGQudmFsdWUpXG4gICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJpZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhbmRsZVRyaWUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIGNvbGxhcHNlVHJpZShkaXNzb2NLZXkobm9kZSkpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGVyZSdzIG5vIGNoaWxkLCByZXR1cm4gdGhlIG5vZGVcbiAgICAgICAgaWYgKCBjaGlsZCA9PT0gdW5kZWZpbmVkICkgIHJldHVybiBub2RlO1xuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVRyaWUoKTtcbiAgICB9LFxuICAgIHZhbHVlOiBmdW5jdGlvbigpe30sXG4gICAgaGFzaG1hcDogZnVuY3Rpb24obm9kZSwga2V5LCBvcHRzLCBkZXB0aCl7XG4gICAgICAgIHZhciByZXQgPSBjb3B5RGlzc29jKG5vZGUudmFsdWVzLCBrZXkpXG4gICAgICAgIHZhciBuYW1lcyA9IHV0aWwua2V5cyhyZXQpXG4gICAgICAgIHZhciBjaGlsZCA9IHJldFtuYW1lc1swXV1cblxuICAgICAgICBpZiAoIG5hbWVzLmxlbmd0aCA9PT0gMSApIHJldHVybiBWYWx1ZShjaGlsZC5rZXksIGNoaWxkLnZhbHVlKVxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIYXNobWFwKHJldClcbiAgICB9XG59XG5cblxuLy8gTm9kZSwgU3RyaW5nLCAoSW50KSwgKE9iamVjdCktPiBCb29sXG5cbi8vIFRyaWUtZXF1aXZhbGVudCBvZiB0aGUgJ2luJyBvcGVyYXRvci5cblxuLy8gSGFzIHJlY3Vyc2VzIGRvd24gYSBub2RlLCB1c2luZyBoYXNoLm1hc2sgdG8gbmF2aWdhdGUgYSAncGF0aCcgZG93biBicmFuY2hlcy5cbi8vIElmIGEgdmFsdWUgbm9kZSBpcyBmb3VuZCwgaWYgaXRzIGtleSBpcyBlcXVhbCB0byB0aGUga2V5IHByb3ZpZGVkLCB0aGVuIHRoZVxuLy8gVHJpZSBjb250YWlucyB0aGUga2V5LCBhbmQgdHJ1ZSBpcyByZXR1cm5lZC5cblxuLy8gSGFzaG1hcHMgc3RvcmUgdmFsdWVzIGluIHRoZSBvdXRlcm1vc3QgbGVhdmVzIHdoZW4gbmVjZXNzYXJ5LiAgSWYgdGhleSBjb250YWluXG4vLyBhIGtleSwgaXQgYWxzbyBtZWFucyB0aGF0IHRoZSBrZXkgaXMgaW4gdGhlIHRyaWUsLlxubGliLmhhcyA9IGZ1bmN0aW9uKHRyaWUsIGtleSwgb3B0cyl7XG4gICAgcmV0dXJuIGhhcyh0cmllLCBrZXksIG9wdHMgfHwgZGVmYXVsdE9wdHMsIDApXG59XG5cbnZhciBoYXMgPSBmdW5jdGlvbih0cmllLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICByZXR1cm4gaGFzRm5zW3RyaWUudHlwZV0odHJpZSwga2V5LCBvcHRzLCBkZXB0aClcbn1cblxudmFyIGhhc0ZucyA9IHtcbiAgICB0cmllOiBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltoYXNoLm1hc2soa2V5LCBkZXB0aCwgb3B0cy5oYXNoKV1cbiAgICAgICAgaWYgKCBjaGlsZCA9PT0gdW5kZWZpbmVkICkgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXMoY2hpbGQsIGtleSwgb3B0cywgZGVwdGggKyAxKVxuICAgIH0sXG4gICAgdmFsdWU6IGZ1bmN0aW9uKG5vZGUsIGtleSwgb3B0cyl7XG4gICAgICAgIHJldHVybiBvcHRzLmVxKG5vZGUua2V5LCBrZXkpXG4gICAgfSxcbiAgICBoYXNobWFwOiBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMpe1xuICAgICAgICByZXR1cm4ga2V5IGluIG5vZGUudmFsdWVzXG4gICAgfVxufVxuXG4vLyBOb2RlLCBTdHJpbmcsIChJbnQpLCAoT2JqZWN0KSAtPiBWYWx1ZVxuXG4vLyBUcmllLWVxdWl2YWxlbnQgb2YgZG90IG9yIGJyYWNrZXQgc3ludGF4IC0gcmV0cmlldmVzIGEgdmFsdWUgYXNzb2NhaXRlZCB3aXRoIGEga2V5XG4vLyBvciB1bmRlZmluZWQuXG5cbi8vIGdldCByZWN1cnNlcyBkb3duIHRoZSBUcmllLCBzaW1pbGFybHkgdG8gaGFzLiAgSWYgaXQgZmluZHMgYSBtYXRjaGluZyBrZXksIGluc3RlYWRcbi8vIG9mIHJldHVybmluZyB0cnVlIG9yIGZhbHNlLCBob3dldmVyLCBpdCB1bnBhY2tzIHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGtleVxuLy8gYW5kIHJldHVybnMgdGhhdCBpbnN0ZWFkLlxubGliLmdldCA9IGZ1bmN0aW9uKHRyaWUsIGtleSwgb3B0cyl7XG4gICAgcmV0dXJuIGdldCh0cmllLCBrZXksIG9wdHMgfHwgZGVmYXVsdE9wdHMsIDApXG59XG5cbnZhciBnZXQgPSBmdW5jdGlvbih0cmllLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICByZXR1cm4gZ2V0Rm5zW3RyaWUudHlwZV0odHJpZSwga2V5LCBvcHRzLCBkZXB0aClcbn1cblxudmFyIGdldEZucyA9IHtcbiAgICB0cmllOiBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltoYXNoLm1hc2soa2V5LCBkZXB0aCwgb3B0cy5oYXNoKV1cbiAgICAgICAgaWYgKCBjaGlsZCA9PT0gdW5kZWZpbmVkICkgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0KGNoaWxkLCBrZXksIG9wdHMsIGRlcHRoICsgMSlcbiAgICB9LFxuICAgIHZhbHVlOiBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgaWYgKCBvcHRzLmVxKG5vZGUua2V5LCBrZXkpICkgcmV0dXJuIG5vZGUudmFsdWVcbiAgICB9LFxuICAgIGhhc2htYXA6IGZ1bmN0aW9uKG5vZGUsIGtleSwgb3B0cywgZGVwdGgpe1xuICAgICAgICB2YXIgdmFsdWUgPSBub2RlLnZhbHVlc1trZXldXG4gICAgICAgIHJldHVybiAgdmFsdWUgPyB2YWx1ZS52YWx1ZSA6IHVuZGVmaW5lZFxuXG4gICAgfVxufVxuXG5cblxuLy8gTm9kZSwgKEFueSwgQW55LCBTdHJpbmcpLCBBbnkgLT4gQW55XG5cbi8vIGdpdmVuIGEgbm9kZSwgZnVuY3Rpb24gYW5kIHNlZWQsIHJlZHVjZSB0byBwcm9kdWNlIHJlc3VsdHMuXG5saWIucmVkdWNlID0gZnVuY3Rpb24obm9kZSwgY2FsbGJhY2ssIGluaXRpYWwpe1xuICAgIHZhciBzdGF0ZSA9IHJlZHVjZShub2RlLCBjYWxsYmFjaywgaW5pdGlhbClcbiAgICByZXR1cm4gc3RhdGUgaW5zdGFuY2VvZiBCcmVhayA/IHN0YXRlLnZhbHVlIDogc3RhdGVcbn1cblxudmFyIHJlZHVjZSA9IGZ1bmN0aW9uKG5vZGUsIGNhbGxiYWNrLCBpbml0aWFsKSB7XG4gICAgcmV0dXJuIHJlZHVjZUZuc1tub2RlLnR5cGVdKG5vZGUsIGNhbGxiYWNrLCBpbml0aWFsKVxufVxuXG52YXIgcmVkdWNlRm5zID0ge1xuICAgIHRyaWU6IGZ1bmN0aW9uKG5vZGUsIGNhbGxiYWNrLCBzdGF0ZSkge1xuICAgICAgICBmb3IgKCB2YXIgcGF0aCBpbiBub2RlLmNoaWxkcmVuICkge1xuICAgICAgICAgICAgaWYgKCBub2RlLmNoaWxkcmVuLmhhc093blByb3BlcnR5KHBhdGgpICkge1xuICAgICAgICAgICAgICAgIHN0YXRlID0gcmVkdWNlKG5vZGUuY2hpbGRyZW5bcGF0aF0sIGNhbGxiYWNrLCBzdGF0ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZSBpbnN0YW5jZW9mIEJyZWFrKSBicmVha1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH0sXG4gICAgdmFsdWU6IGZ1bmN0aW9uKG5vZGUsIGNhbGxiYWNrLCBzdGF0ZSl7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhzdGF0ZSwgbm9kZS52YWx1ZSwgbm9kZS5rZXkpXG4gICAgfSxcbiAgICBoYXNobWFwOiBmdW5jdGlvbihub2RlLCBjYWxsYmFjaywgc3RhdGUpe1xuICAgICAgICBmb3IgKCB2YXIga2V5IGluIG5vZGUudmFsdWVzICkge1xuICAgICAgICAgICAgaWYgKCBub2RlLnZhbHVlcy5oYXNPd25Qcm9wZXJ0eShrZXkpICkge1xuICAgICAgICAgICAgICAgIHN0YXRlID0gcmVkdWNlKG5vZGUudmFsdWVzW2tleV0sIGNhbGxiYWNrLCBzdGF0ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZSBpbnN0YW5jZW9mIEJyZWFrKSBicmVha1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZVxuICAgIH1cbn1cblxuXG52YXIgQnJlYWsgPSBsaWIucmVkdWNlLkJyZWFrID0gZnVuY3Rpb24odikge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCcmVhaykpIHJldHVybiBuZXcgQnJlYWsodilcbiAgICB0aGlzLnZhbHVlID0gdlxufVxuXG5cblxuLy8gTm9kZSAtPiBPYmplY3RcblxuLy8gbXV0YWJsZSByZXR1cm5zIGEgbXV0YWJsZSB2ZXJzaW9uIG9mIGEgVHJpZS5cblxuLy8gSXQgYWNoaWV2ZXMgdGhpcyBieSByZWN1cnNpbmcgZG93biB0aGUgVHJpZSwgZmluZGluZyBhbGwgdGhlIFZhbHVlIG5vZGVzXG4vLyAod2hldGhlciBzdG9yZWQgaW4gYSBUcmllIGRpcmVjdGx5LCBvciBpbiBhIEhhc2htYXAgbm9kZSksIGFuZCBhZGRpbmdcbi8vIHRoZSB2YWx1ZXMgdG8gYSByZXR1cm4gdmFsdWUuXG5cbi8vICAoeWF5IGFidXNpbmcgbXV0YWJpbGl0eSBpbiBzbWFsbCBwaWVjZXMsIGJ1dCBrZWVwaW5nIHRoZSBmdW5jdGlvblxuLy8gcHVyZSBmcm9tIGFuIEFQSSBwZXJzcGVjdGl2ZSlcbmxpYi5tdXRhYmxlID0gZnVuY3Rpb24obm9kZSl7XG4gICAgcmV0dXJuIGxpYi5yZWR1Y2Uobm9kZSwgYWRkS2V5VmFsLCB7fSlcbn1cblxudmFyIGFkZEtleVZhbCA9IGZ1bmN0aW9uKG8sIHZhbCwga2V5KXtcbiAgICBvW2tleV0gPSB2YWxcbiAgICByZXR1cm4gb1xufVxuXG4vLyBOb2RlIC0+IFtTdHJpbmddXG5cbi8vIGtleXMgcmV0dXJucyB0aGUga2V5cyBzdG9yZWQgaW4gdGhlIGFycmF5LCBsaWtlIE9iamVjdC5rZXlzXG5saWIua2V5cyA9IGZ1bmN0aW9uKG5vZGUpe1xuICAgIHJldHVybiBsaWIucmVkdWNlKG5vZGUsIGFkZEtleSwgW10pXG59XG5cbnZhciBhZGRLZXkgPSBmdW5jdGlvbihhcnIsIHZhbCwga2V5KXtcbiAgICBhcnIucHVzaChrZXkpXG4gICAgcmV0dXJuIGFyclxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbi8vIEludGVybmFsXG52YXIgZXh0ZW5kICAgPSBmdW5jdGlvbih0LCBmKSB7IGZvciAoIHZhciBwIGluIGYgKSB0W3BdID0gZltwXTsgcmV0dXJuIHQgfVxudmFyIGNsb25lICAgID0gZnVuY3Rpb24obyl7IHJldHVybiBleHRlbmQoe30sIG8pIH1cbnZhciBzbGljZSAgICA9IGZ1bmN0aW9uKGEsIGYsIG4peyByZXR1cm4gW10uc2xpY2UuY2FsbChhLCBmLCBuKSB9XG5cbnZhciBtYXBPYmogPSBmdW5jdGlvbihvLCBmbil7XG4gICAgdmFyIHIgPSB7fVxuICAgIGZvciAoIHZhciBwIGluIG8gKSByW3BdID0gZm4ob1twXSwgcCwgbylcbiAgICByZXR1cm4gclxufVxuXG52YXIgbWFwID0gZnVuY3Rpb24oYXJyLCBmbil7XG4gICAgdmFyIGEgPSBbXVxuICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpICs9IDEgKSBhLnB1c2goZm4oYXJyW2ldLCBpLCBhcnIpKVxuICAgIHJldHVybiBhXG59XG5cbnZhciByZWR1Y2UgPSBmdW5jdGlvbihhcnIsIGZuKXtcbiAgICB2YXIgc2VlZCA9IGFyclswXVxuICAgIGFyciA9IGFyci5zbGljZSgxKVxuICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpICs9IDEpIHNlZWQgPSBmbihzZWVkLCBhcnJbaV0pXG4gICAgcmV0dXJuIHNlZWRcbn1cblxudmFyIHBpY2sgPSBmdW5jdGlvbihvKXtcbiAgICB2YXIgbmFtZXMgPSBzbGljZShhcmd1bWVudHMsIDEpLFxuICAgICAgICByICAgICA9IHt9XG5cbiAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBuYW1lcy5sZW5ndGg7IGkgPCBsOyBpICs9IDEgKVxuICAgICAgICByW25hbWVzW2ldXSA9IG9bbmFtZXNbaV1dXG4gICAgcmV0dXJuIHJcbn1cblxuLy8gT2JqZWN0IC0+IFtTdHJpbmddXG5cbi8vIGdldCB0aGUga2V5cyBvZiBhbiBvYmplY3RcbnZhciBrZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24obyl7XG4gICAgdmFyIGEgPSBbXVxuICAgIGZvciAoIHZhciBrZXkgaW4gbyApIGEucHVzaChrZXkpXG4gICAgcmV0dXJuIGFcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBleHRlbmQgICAgOiBleHRlbmQsXG4gICAgY2xvbmUgICAgIDogY2xvbmUsXG4gICAgc2xpY2UgICAgIDogc2xpY2UsXG4gICAgbWFwT2JqICAgIDogbWFwT2JqLFxuICAgIHBpY2sgICAgICA6IHBpY2ssXG4gICAgbWFwICAgICAgIDogbWFwLFxuICAgIHJlZHVjZSAgICA6IHJlZHVjZSxcbiAgICBrZXlzICAgICAgOiBrZXlzXG59XG4iXX0=
;