<!DOCTYPE html>
<html>
  <head>
        <style>
                body {
                        position: relative;
                        margin: 0;
                        font-size: large;
                }
                [maindoc] {
                        white-space: pre-wrap;
                }
                [data-org-type="headline"] > [data-org-type="text"] {
                        color: orange;
                        font-weight: bold;
                }
                .collapsed > [data-org-type="text"] {
                        display: inline;
                }
                .collapsed > * {
                        display: none;
                }
                .collapsed > [data-org-type="text"]:after {
                        content: '...';
                }
                .collapsed > [data-org-type="text"]:last-child:after {
                        content: '... (EMPTY)';
                }
                [dirty] {
                        font-style: oblique;
                }
                .commentbox {
                        position: relative;
                }
                .commentbox > img {
                        position: absolute;
                }
                .commentbox > div {
                        min-height: 50px;
                        margin-left: 50px;
                        padding: 5px;
                        display: inline-block;
                }
                .commentbox > .main {
                        border: solid green 1px;
                }
                .commentbox > .added {
                        border: solid blue 1px;
                }
                /* fancy org mode stuff  */
                .hidden {
                        display: none;
                }
                .boundary {
                        white-space: pre-wrap;
                }
                .codeblock {
                        border: solid black 2px;
                        border-radius: 10px;
                        padding: 3px;
                        background: lightgray;
                        min-width: 400px;
                        display: inline-block;
                }
                .codename {
                        padding-left: 24px;
                }
                .codewrapper {
                        position: relative;
                        vertical-align: middle;
                }
                .codecontent, .coderesults, .results-indicator {
                        border-radius: 10px;
                        padding: 3px;
                        background: white;
                        display: inline-block;
                        vertical-align: middle;
                }
                .codecontent {
                        border: solid gray 2px;
                        min-width: 200px;
                }
                .coderesults {
                        border: solid blue 2px;
                        min-width: 100px;
                }
        </style>
        <!-- link href='http://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css' -->
        <!--script src="http://www.google.com/jsapi?autoload=%7B%22modules%22%3A%5B%7B%22name%22%3A%22picker%22%2C%22version%22%3A%221%22%7D%5D%7D"></script-->
        <link href='jquery-ui/css/leisure/jquery-ui-1.9.2.custom.min.css' rel='stylesheet' type='text/css'>
        <script src="jquery-ui/js/jquery-1.8.2.js"></script>
        <script src="jquery-ui/js/jquery-ui-1.9.1.custom.js"></script>
        <script src="rangy-core.js"></script>
        <script src="rangy-textrange.js"></script>
        <script language="javascript">
          window.Boot = {extraJsFiles: [
                'orgSupport',
                'githubExtensions',
                'storage',
                'fancyOrg',
          ]};
          function start() {
                setTimeout(function() {
                        window.Leisure = {calc: true}
                        var script = document.createElement('script');
                        script.src = "bootLeisure.js?uniq=" + Math.random();
                        script.onload = function() {
                                var div = $('[maindoc]');

                                window.ORG_TEXT = div.html().replace(/^\s*<!--*/, '').replace(/-->\s*\n*/m, '').trim();
                                Boot.onboot(function() {
                                        $('#loading').remove();
                                        $('#panel').css('display', '');
                                        //Leisure.basicOrg.useNode(div[0], $('#source'));
                                        //Leisure.initStorage('#login', '#panel', Leisure.basicOrg);
                                        Leisure.fancyOrg.useNode(div[0], $('#source'));
                                        Leisure.initStorage('#login', '#panel', Leisure.fancyOrg);
                                });
                        }
                        document.head.appendChild(script);
                }, 1);
          }
        </script>
  </head>
  <body class="loading">
    <div id="loading">LOADING ORG</div>
<div id="login" style="display: none">
Github Login: <input id='name' type='text'> Password: <input id='password' type='password'><hr>
User: <input id='user' type='text'><br>
Repository: <input id='repository' type='text'><br>
File: <input id='file' type='text'><br>
<button onclick="Leisure.connectStorage()">Connect</button>
</div>
<div id="panel" style="display: none">
<div maindoc style='border: green solid 2px' contenteditable='true'><!--
* code :duh:
#+BEGIN_SRC leisure :results dynamic
3 + 4
#+END_SRC

#+RESULTS:
: 7

* one

* two

--></div>
<br>Source...
<div id='source' style="white-space: pre-wrap; border: blue solid 2px"></div>
</div>
<script>start()</script>
  </body>
</html>
