;(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2012, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var L_anno, L_apply, L_lambda, L_let, L_lit, L_ref, LeisureObject, Leisure_BaseCons, Leisure_cons, Leisure_nil, Nil, anno, apply, ast2Json, ast2JsonEncodings, astString, charCodes, checkType, cons, consEq, consFrom, define, ensureLeisureClass, evalFunc, foldLeft, functionInfo, getAnnoBody, getAnnoData, getAnnoName, getApplyArg, getApplyFunc, getDataType, getLambdaBody, getLambdaVar, getLetBody, getLetName, getLetValue, getLitVal, getRefName, getType, head, jsType, json2Ast, json2AstEncodings, lambda, lazy, leisureAddFunc, letStr, lit, llet, lz, makeSuper, mkProto, nameFunc, nameSub, primCons, primFoldLeft, ref, resolve, root, rz, save, setDataType, setType, supertypes, tail, throwError, _, _ref, _ref1, _ref2, _ref3,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  _ref = root = module.exports = require('./base'), resolve = _ref.resolve, lazy = _ref.lazy;

  _ = require('./lodash.min');

  rz = resolve;

  lz = lazy;

  charCodes = {
    "'": '$a',
    ',': '$b',
    '$': '$$',
    '@': '$d',
    '?': '$e',
    '/': '$f',
    '*': '$g',
    '&': '$h',
    '^': '$i',
    '!': '$k',
    '`': '$l',
    '~': '$m',
    '-': '$_',
    '+': '$o',
    '=': '$p',
    '|': '$q',
    '[': '$r',
    ']': '$s',
    '{': '$t',
    '}': '$u',
    '"': '$v',
    ':': '$w',
    ';': '$x',
    '<': '$y',
    '>': '$z',
    '%': '$A',
    '.': '$B'
  };

  nameSub = function(name) {
    var code, i, s, _i, _ref1;

    s = '';
    for (i = _i = 0, _ref1 = name.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {
      code = charCodes[name[i]];
      s += code != null ? code : name[i];
    }
    return s;
  };

  setDataType = function(func, dataType) {
    if (dataType) {
      func.dataType = dataType;
    }
    return func;
  };

  setType = function(func, type) {
    if (type) {
      func.type = type;
    }
    func.__proto__ = (ensureLeisureClass(type)).prototype;
    return func;
  };

  LeisureObject = (function() {
    function LeisureObject() {}

    return LeisureObject;

  })();

  LeisureObject.prototype.className = 'LeisureObject';

  global.Leisure_Object = LeisureObject;

  supertypes = {};

  root.leisureClassChange = 0;

  ensureLeisureClass = function(leisureClass) {
    var cl;

    cl = "Leisure_" + (nameSub(leisureClass));
    if (global[cl] == null) {
      global[cl] = eval("(function " + cl + "(){})");
      supertypes[cl] = 'Leisure_Object';
      root.leisureClassChange++;
    }
    return global[cl];
  };

  makeSuper = function(type, supertype) {
    supertypes["Leisure_" + (nameSub(type))] = "Leisure_" + (nameSub(supertype));
    return root.leisureClassChange++;
  };

  ensureLeisureClass('cons');

  ensureLeisureClass('nil');

  supertypes.Leisure_cons = 'Leisure_Object';

  supertypes.Leisure_nil = 'Leisure_Object';

  ensureLeisureClass('ast');

  ensureLeisureClass('lit');

  Leisure_lit.prototype.toString = function() {
    return "lit(" + (getLitVal(this)) + ")";
  };

  ensureLeisureClass('ref');

  Leisure_ref.prototype.toString = function() {
    return "ref(" + (getRefName(this)) + ")";
  };

  ensureLeisureClass('lambda');

  Leisure_lambda.prototype.toString = function() {
    return "lambda(" + (astString(this)) + ")";
  };

  ensureLeisureClass('apply');

  Leisure_apply.prototype.toString = function() {
    return "apply(" + (astString(this)) + ")";
  };

  ensureLeisureClass('let');

  Leisure_let.prototype.toString = function() {
    return "let(" + (astString(this)) + ")";
  };

  ensureLeisureClass('anno');

  Leisure_anno.prototype.toString = function() {
    return "anno(" + (astString(this)) + ")";
  };

  ensureLeisureClass('doc');

  ensureLeisureClass('srcLocation');

  ensureLeisureClass('pattern');

  makeSuper('lit', 'ast');

  makeSuper('ref', 'ast');

  makeSuper('lambda', 'ast');

  makeSuper('apply', 'ast');

  makeSuper('let', 'ast');

  makeSuper('anno', 'ast');

  astString = function(ast) {
    var argStr, funcStr, _ref1;

    switch (getType(ast)) {
      case 'lit':
        return getLitVal(ast);
      case 'ref':
        return getRefName(ast);
      case 'apply':
        funcStr = astString(getApplyFunc(ast));
        if ((_ref1 = getType(getApplyFunc(ast))) === 'lambda' || _ref1 === 'let') {
          funcStr = "(" + funcStr + ")";
        }
        argStr = astString(getApplyArg(ast));
        if (getType(getApplyArg(ast)) === 'apply') {
          argStr = "(" + argStr + ")";
        }
        return "" + funcStr + " " + argStr;
      case 'lambda':
        return "\\" + (getLambdaVar(ast)) + " . " + (astString(getLambdaBody(ast)));
      case 'let':
        return "\\\\" + (letStr(ast));
      case 'anno':
        return "\\@" + (getAnnoName(ast)) + " " + (getAnnoData(ast)) + " . " + (astString(getAnnoBody(ast)));
    }
  };

  letStr = function(ast) {
    var binding, body;

    body = getLetBody(ast);
    binding = "(" + (getLetName(ast)) + " = " + (astString(getLetValue(ast))) + ")";
    if (body instanceof Leisure_let) {
      return "" + binding + " " + (letStr(body));
    } else {
      return "" + binding + " . " + (astString(body));
    }
  };

  Leisure_BaseCons = (function(_super) {
    __extends(Leisure_BaseCons, _super);

    function Leisure_BaseCons() {
      _ref1 = Leisure_BaseCons.__super__.constructor.apply(this, arguments);
      return _ref1;
    }

    Leisure_BaseCons.prototype.head = function() {
      throw new Error("Not Implemented");
    };

    Leisure_BaseCons.prototype.tail = function() {
      throw new Error("Not Implemented");
    };

    Leisure_BaseCons.prototype.isNil = function() {
      return false;
    };

    Leisure_BaseCons.prototype.find = function(func) {
      if (func(this.head())) {
        return this.head();
      } else {
        return this.tail().find(func);
      }
    };

    Leisure_BaseCons.prototype.removeAll = function(func) {
      var t;

      t = this.tail().removeAll(func);
      if (func(this.head())) {
        return t;
      } else if (t === this.tail()) {
        return this;
      } else {
        return cons(this.head(), t);
      }
    };

    Leisure_BaseCons.prototype.map = function(func) {
      return cons(func(this.head()), this.tail().map(func));
    };

    Leisure_BaseCons.prototype.foldl = function(func, arg) {
      return this.tail().foldl(func, func(arg, this.head()));
    };

    Leisure_BaseCons.prototype.foldl1 = function(func) {
      return this.tail().foldl(func, this.head());
    };

    Leisure_BaseCons.prototype.foldr = function(func, arg) {
      return func(this.head(), this.tail().foldr(func, arg));
    };

    Leisure_BaseCons.prototype.foldr1 = function(func) {
      if (this.tail() === Nil) {
        return this.head();
      } else {
        return func(this.head(), this.tail().foldr1(func));
      }
    };

    Leisure_BaseCons.prototype.toArray = function() {
      return this.foldl((function(i, el) {
        i.push(el);
        return i;
      }), []);
    };

    Leisure_BaseCons.prototype.join = function(str) {
      return this.toArray().join(str);
    };

    Leisure_BaseCons.prototype.reverse = function() {
      return this.rev(Nil);
    };

    Leisure_BaseCons.prototype.rev = function(result) {
      return this.tail().rev(cons(this.head(), result));
    };

    Leisure_BaseCons.prototype.elementString = function() {
      var _ref2;

      return "" + (((_ref2 = this.head()) != null ? _ref2.constructor : void 0) === this.constructor || this.head() instanceof Leisure_nil ? '[' + this.head().elementString() + ']' : this.head()) + (this.tail() instanceof Leisure_nil ? '' : this.tail() instanceof Leisure_BaseCons ? " " + (this.tail().elementString()) : " | " + (this.tail()));
    };

    Leisure_BaseCons.prototype.equals = function(other) {
      return this === other || (other instanceof Leisure_BaseCons && consEq(this.head(), other.head()) && consEq(this.tail(), other.tail()));
    };

    Leisure_BaseCons.prototype.each = function(block) {
      block(this.head());
      return this.tail().each(block);
    };

    Leisure_BaseCons.prototype.length = function() {
      return this.foldl((function(i, el) {
        return i + 1;
      }), 0);
    };

    Leisure_BaseCons.prototype.last = function() {
      var t;

      t = this.tail();
      if (t === Nil) {
        return this.head();
      } else {
        return t.last();
      }
    };

    Leisure_BaseCons.prototype.append = function(l) {
      return cons(this.head(), this.tail().append(l));
    };

    Leisure_BaseCons.prototype.toString = function() {
      return "" + (this.stringName()) + "[" + (this.elementString()) + "]";
    };

    Leisure_BaseCons.prototype.stringName = function() {
      return "BaseCons";
    };

    return Leisure_BaseCons;

  })(LeisureObject);

  consEq = function(a, b) {
    return a === b || (a instanceof Leisure_BaseCons && a.equals(b));
  };

  Leisure_cons = (function(_super) {
    __extends(Leisure_cons, _super);

    function Leisure_cons() {
      _ref2 = Leisure_cons.__super__.constructor.apply(this, arguments);
      return _ref2;
    }

    Leisure_cons.prototype.head = function() {
      return this(function() {
        return function(a) {
          return function(b) {
            return rz(a);
          };
        };
      });
    };

    Leisure_cons.prototype.tail = function() {
      return this(function() {
        return function(a) {
          return function(b) {
            return rz(b);
          };
        };
      });
    };

    Leisure_cons.prototype.stringName = function() {
      return "Cons";
    };

    return Leisure_cons;

  })(Leisure_BaseCons);

  global.Leisure_cons = Leisure_cons;

  Leisure_nil = (function(_super) {
    __extends(Leisure_nil, _super);

    function Leisure_nil() {
      _ref3 = Leisure_nil.__super__.constructor.apply(this, arguments);
      return _ref3;
    }

    Leisure_nil.prototype.isNil = function() {
      return true;
    };

    Leisure_nil.prototype.find = function() {
      return this;
    };

    Leisure_nil.prototype.removeAll = function() {
      return this;
    };

    Leisure_nil.prototype.map = function(func) {
      return Nil;
    };

    Leisure_nil.prototype.foldl = function(func, arg) {
      return arg;
    };

    Leisure_nil.prototype.foldr = function(func, arg) {
      return arg;
    };

    Leisure_nil.prototype.reverse = function() {
      return this;
    };

    Leisure_nil.prototype.rev = function(result) {
      return result;
    };

    Leisure_nil.prototype.equals = function(other) {
      return other instanceof Leisure_nil;
    };

    Leisure_nil.prototype.each = function() {};

    Leisure_nil.prototype.toArray = function() {
      return [];
    };

    Leisure_nil.prototype.join = function() {
      return '';
    };

    Leisure_nil.prototype.append = function(l) {
      return l;
    };

    Leisure_nil.prototype.toString = function() {
      return "Cons[]";
    };

    Leisure_nil.prototype.elementString = function() {
      return '';
    };

    return Leisure_nil;

  })(LeisureObject);

  global.Leisure_nil = Leisure_nil;

  jsType = function(v) {
    var t;

    t = typeof v;
    if (t === 'object') {
      return v.constructor || t;
    } else {
      return t;
    }
  };

  mkProto = function(protoFunc, value) {
    value.__proto__ = protoFunc.prototype;
    return value;
  };

  throwError = function(msg) {
    throw (msg instanceof Error ? msg : new Error(String(msg)));
  };

  checkType = function(value, type) {
    if (!(value instanceof type)) {
      return throwError("Type error: expected type: " + type + ", but got: " + (jsType(value)));
    }
  };

  primCons = setDataType((function(a) {
    return function(b) {
      return mkProto(Leisure_cons, setType((function(f) {
        return rz(f)(a)(b);
      }), 'cons'));
    };
  }), 'cons');

  Nil = mkProto(Leisure_nil, setDataType(setType((function(a) {
    return function(b) {
      return rz(b);
    };
  }), 'nil'), 'nil'));

  cons = function(a, b) {
    return primCons(lz(a))(lz(b));
  };

  foldLeft = function(func, val, thing) {
    if (thing instanceof Leisure_cons) {
      return thing.foldl(func, val);
    } else {
      return primFoldLeft(func, val, thing, 0);
    }
  };

  primFoldLeft = function(func, val, array, index) {
    if (index < array.length) {
      return primFoldLeft(func, func(val, array[index]), array, index + 1);
    } else {
      return val;
    }
  };

  global.leisureFuncs = {};

  global.leisureFuncNames = Nil;

  leisureAddFunc = global.leisureAddFunc = function(nm) {
    return global.leisureFuncNames = cons(nm, global.leisureFuncNames);
  };

  root.evalFunc = evalFunc = eval;

  root.functionCount = 0;

  functionInfo = {};

  nameFunc = function(func, name) {
    var f;

    f = null;
    return function() {
      if (f === null) {
        f = rz(func);
        if (typeof f === 'function') {
          f.leisureName = name;
        }
        return f;
      } else {
        return f;
      }
    };
  };

  define = function(name, func, arity, src, method) {
    var nm;

    functionInfo[name] = {
      src: src,
      arity: arity,
      leisureName: name,
      alts: {},
      altList: []
    };
    nm = 'L_' + nameSub(name);
    if (!method && global.noredefs && (global[nm] != null)) {
      throwError("[DEF] Attempt to redefine definition: " + name);
    }
    functionInfo[name].mainDef = global[nm] = global.leisureFuncs[nm] = nameFunc(func, name);
    leisureAddFunc(name);
    root.functionCount++;
    return func;
  };

  L_lit = setDataType((function(_x) {
    return setType((function(_f) {
      return rz(_f)(_x);
    }), 'lit');
  }), 'lit');

  L_ref = setDataType((function(_x) {
    return setType((function(_f) {
      return rz(_f)(_x);
    }), 'ref');
  }), 'ref');

  L_lambda = setDataType((function(_v) {
    return function(_f) {
      return setType((function(_g) {
        return rz(_g)(_v)(_f);
      }), 'lambda');
    };
  }), 'lambda');

  L_apply = setDataType((function(_func) {
    return function(_arg) {
      return setType((function(_f) {
        return rz(_f)(_func)(_arg);
      }), 'apply');
    };
  }), 'apply');

  L_let = setDataType((function(_n) {
    return function(_v) {
      return function(_b) {
        return setType((function(_f) {
          return rz(_f)(_n)(_v)(_b);
        }), 'let');
      };
    };
  }), 'let');

  L_anno = setDataType((function(_name) {
    return function(_data) {
      return function(_body) {
        return setType((function(_f) {
          return rz(_f)(_name)(_data)(_body);
        }), 'anno');
      };
    };
  }), 'anno');

  getType = function(f) {
    var t, _ref4;

    t = typeof f;
    return (t === 'function' && (f != null ? f.type : void 0)) || ("*" + ((t === 'object' && ((_ref4 = f.constructor) != null ? _ref4.name : void 0)) || t));
  };

  define('getType', lz(function(value) {
    return getType(rz(value));
  }), 1);

  getDataType = function(f) {
    return (typeof f === 'function' && f.dataType) || '';
  };

  define('getDataType', lz(function(value) {
    return getDataType(rz(value));
  }), 1);

  save = {};

  save.lit = lit = function(l) {
    return L_lit(lz(l));
  };

  save.ref = ref = function(r) {
    return L_ref(lz(r));
  };

  save.lambda = lambda = function(v, body) {
    return L_lambda(lz(v))(lz(body));
  };

  save.apply = apply = function(f, a) {
    return L_apply(lz(f))(lz(a));
  };

  save.llet = llet = function(n, v, b) {
    return L_let(lz(n))(lz(v))(lz(b));
  };

  save.anno = anno = function(name, data, body) {
    return L_anno(lz(name))(lz(data))(lz(body));
  };

  save.cons = cons;

  getLitVal = function(lt) {
    return lt(lz(function(v) {
      return rz(v);
    }));
  };

  getRefName = function(rf) {
    return rf(lz(function(v) {
      return rz(v);
    }));
  };

  getLambdaVar = function(lam) {
    return lam(lz(function(v) {
      return function(b) {
        return rz(v);
      };
    }));
  };

  getLambdaBody = function(lam) {
    return lam(lz(function(v) {
      return function(b) {
        return rz(b);
      };
    }));
  };

  getApplyFunc = function(apl) {
    return apl(lz(function(a) {
      return function(b) {
        return rz(a);
      };
    }));
  };

  getApplyArg = function(apl) {
    return apl(lz(function(a) {
      return function(b) {
        return rz(b);
      };
    }));
  };

  getLetName = function(lt) {
    return lt(lz(function(n) {
      return function(v) {
        return function(b) {
          return rz(n);
        };
      };
    }));
  };

  getLetValue = function(lt) {
    return lt(lz(function(n) {
      return function(v) {
        return function(b) {
          return rz(v);
        };
      };
    }));
  };

  getLetBody = function(lt) {
    return lt(lz(function(n) {
      return function(v) {
        return function(b) {
          return rz(b);
        };
      };
    }));
  };

  getAnnoName = function(anno) {
    return anno(lz(function(name) {
      return function(data) {
        return function(body) {
          return rz(name);
        };
      };
    }));
  };

  getAnnoData = function(anno) {
    return anno(lz(function(name) {
      return function(data) {
        return function(body) {
          return rz(data);
        };
      };
    }));
  };

  getAnnoBody = function(anno) {
    return anno(lz(function(name) {
      return function(data) {
        return function(body) {
          return rz(body);
        };
      };
    }));
  };

  json2AstEncodings = {
    lit: function(json) {
      return L_lit(lz(json.value));
    },
    ref: function(json) {
      return L_ref(lz(json.varName));
    },
    lambda: function(json) {
      return L_lambda(lz(json.varName))(lz(json2Ast(json.body)));
    },
    apply: function(json) {
      return L_apply(lz(json2Ast(json.func)))(lz(json2Ast(json.arg)));
    },
    "let": function(json) {
      return L_let(lz(json.varName))(lz(json2Ast(json.value)))(lz(json2Ast(json.body)));
    },
    anno: function(json) {
      return L_anno(lz(json.name))(lz(json2Ast(json.data)))(lz(json2Ast(json.body)));
    },
    cons: function(json) {
      return save.cons(json2Ast(json.head), json2Ast(json.tail));
    },
    nil: function(json) {
      return Nil;
    }
  };

  lit = save.lit;

  ref = save.ref;

  lambda = save.lambda;

  apply = save.apply;

  llet = save.llet;

  anno = save.anno;

  cons = save.cons;

  json2Ast = function(json) {
    if (typeof json === 'object') {
      return json2AstEncodings[json._type](json);
    } else {
      return json;
    }
  };

  ast2JsonEncodings = {
    Leisure_lit: function(ast) {
      return {
        _type: 'lit',
        value: getLitVal(ast)
      };
    },
    Leisure_ref: function(ast) {
      return {
        _type: 'ref',
        varName: getRefName(ast)
      };
    },
    Leisure_lambda: function(ast) {
      return {
        _type: 'lambda',
        varName: getLambdaVar(ast),
        body: ast2Json(getLambdaBody(ast))
      };
    },
    Leisure_apply: function(ast) {
      return {
        _type: 'apply',
        func: ast2Json(getApplyFunc(ast)),
        arg: ast2Json(getApplyArg(ast))
      };
    },
    Leisure_let: function(ast) {
      return {
        _type: 'let',
        varName: getLetName(ast),
        value: ast2Json(getLetValue(ast)),
        body: ast2Json(getLetBody(ast))
      };
    },
    Leisure_anno: function(ast) {
      return {
        _type: 'anno',
        name: getAnnoName(ast),
        data: ast2Json(getAnnoData(ast)),
        body: ast2Json(getAnnoBody(ast))
      };
    },
    Leisure_cons: function(ast) {
      return {
        _type: 'cons',
        head: ast2Json(ast.head()),
        tail: ast2Json(ast.tail())
      };
    },
    Leisure_nil: function(ast) {
      return {
        _type: 'nil'
      };
    }
  };

  ast2Json = function(ast) {
    var _ref4;

    if (ast2JsonEncodings[(_ref4 = ast.constructor) != null ? _ref4.name : void 0]) {
      return ast2JsonEncodings[ast.constructor.name](ast);
    } else {
      return ast;
    }
  };

  define('json2Ast', lz(function(json) {
    return json2Ast(JSON.parse(rz(json)));
  }));

  define('ast2Json', lz(function(ast) {
    return JSON.stringify(ast2Json(rz(ast)));
  }));

  consFrom = function(array, i) {
    i = i || 0;
    if (i < array.length) {
      return cons(array[i], consFrom(array, i + 1));
    } else {
      return Nil;
    }
  };

  head = function(l) {
    return l.head();
  };

  tail = function(l) {
    return l.tail();
  };

  root.head = head;

  root.tail = tail;

  root.consFrom = consFrom;

  root.nameSub = nameSub;

  root.setDataType = setDataType;

  root.setType = setType;

  root.mkProto = mkProto;

  root.Nil = Nil;

  root.cons = cons;

  root.primCons = primCons;

  root.define = define;

  root.getType = getType;

  root.getDataType = getDataType;

  root.lit = lit;

  root.ref = ref;

  root.lambda = lambda;

  root.apply = apply;

  root.anno = anno;

  root.llet = llet;

  root.getRefName = getRefName;

  root.getLitVal = getLitVal;

  root.getLambdaBody = getLambdaBody;

  root.getLambdaVar = getLambdaVar;

  root.getApplyFunc = getApplyFunc;

  root.getApplyArg = getApplyArg;

  root.getLetName = getLetName;

  root.getLetValue = getLetValue;

  root.getLetBody = getLetBody;

  root.getAnnoName = getAnnoName;

  root.getAnnoData = getAnnoData;

  root.getAnnoBody = getAnnoBody;

  root.throwError = throwError;

  root.foldLeft = foldLeft;

  root.LeisureObject = LeisureObject;

  root.evalFunc = evalFunc;

  root.json2Ast = json2Ast;

  root.ast2Json = ast2Json;

  root.Leisure_lit = Leisure_lit;

  root.Leisure_ref = Leisure_ref;

  root.Leisure_lambda = Leisure_lambda;

  root.Leisure_apply = Leisure_apply;

  root.Leisure_let = Leisure_let;

  root.Leisure_anno = Leisure_anno;

  root.ensureLeisureClass = ensureLeisureClass;

  root.makeSuper = makeSuper;

  root.supertypes = supertypes;

  root.functionInfo = functionInfo;

}).call(this);

/*
*/

})(self)
},{"./base":2,"./lodash.min":6}],2:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var SimpyCons, defaultEnv, readDir, readFile, root, simpyCons, statFile, writeFile;

  root = module.exports;

  defaultEnv = {
    presentValue: function(x) {
      return x;
    },
    values: {},
    errorHandlers: []
  };

  global.resolve = function(value) {
    if (typeof value === 'function') {
      return value.memo || (value.memo = value());
    } else {
      return value;
    }
  };

  global.lazy = function(l) {
    if (typeof l === 'function') {
      return function() {
        return l;
      };
    } else {
      return l;
    }
  };

  readFile = function(fileName, cont) {
    return defaultEnv.readFile(fileName, cont);
  };

  writeFile = function(fileName, data, cont) {
    return defaultEnv.writeFile(fileName, data, cont);
  };

  readDir = function(fileName, cont) {
    return defaultEnv.readDir(fileName, cont);
  };

  statFile = function(fileName, cont) {
    return defaultEnv.statFile(fileName, cont);
  };

  SimpyCons = (function() {
    function SimpyCons(head, tail) {
      this.head = head;
      this.tail = tail;
    }

    SimpyCons.prototype.toArray = function() {
      var array, h;

      h = this;
      array = [];
      while (h !== null) {
        array.push(h.head);
        h = h.tail;
      }
      return array;
    };

    return SimpyCons;

  })();

  simpyCons = function(a, b) {
    return new SimpyCons(a, b);
  };

  root.defaultEnv = defaultEnv;

  root.readFile = readFile;

  root.readDir = readDir;

  root.writeFile = writeFile;

  root.statFile = statFile;

  root.SimpyCons = SimpyCons;

  root.simpyCons = simpyCons;

  root.resolve = global.resolve;

  root.lazy = global.lazy;

}).call(this);

/*
*/

})(self)
},{}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
(function() {
  var Leisure, exports, k, nb, v, _ref;

  window.marked = require('./marked');

  Leisure = exports = module.exports = require('./base');

  require('./ast');

  require('./gen');

  require('./runtime');

  require('./generatedPrelude');

  require('./std');

  require('./md');

  window.Notebook = nb = require('./notebook');

  _ref = window.Leisure;
  for (k in _ref) {
    v = _ref[k];
    Leisure[k] = v;
  }

  window.Leisure = Leisure;

}).call(this);

/*
*/

},{"./ast":1,"./base":2,"./gen":4,"./generatedPrelude":5,"./marked":7,"./md":8,"./notebook":9,"./runtime":10,"./std":11}],4:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var Leisure_anno, Leisure_apply, Leisure_lambda, Leisure_let, Leisure_lit, Leisure_ref, Nil, addLambdaProperties, addUniq, arrayify, assocListProps, cons, consFrom, curry, define, dumpAnno, gen, genApplyArg, genLambda, genLets, genUniq, getAnnoBody, getAnnoData, getAnnoName, getApplyArg, getApplyFunc, getAssocListProps, getLambdaBody, getLambdaProperties, getLambdaVar, getLastLetBody, getLetBody, getLetName, getLetValue, getLitVal, getRefName, lacons, lazy, lcons, lconsFrom, left, letList, lz, makeSyncMonad, memoize, nameSub, resolve, right, root, runMonad, rz, setDataType, setType, simpyCons, specialAnnotations, uniqName, varNameSub, _, _false, _ref, _ref1, _ref2;

  _ref = require('./base'), simpyCons = _ref.simpyCons, resolve = _ref.resolve, lazy = _ref.lazy;

  rz = resolve;

  lz = lazy;

  _ref1 = root = module.exports = require('./ast'), nameSub = _ref1.nameSub, getLitVal = _ref1.getLitVal, getRefName = _ref1.getRefName, getLambdaVar = _ref1.getLambdaVar, getLambdaBody = _ref1.getLambdaBody, getApplyFunc = _ref1.getApplyFunc, getApplyArg = _ref1.getApplyArg, getAnnoName = _ref1.getAnnoName, getAnnoData = _ref1.getAnnoData, getAnnoBody = _ref1.getAnnoBody, getLetName = _ref1.getLetName, getLetValue = _ref1.getLetValue, getLetBody = _ref1.getLetBody, Leisure_lit = _ref1.Leisure_lit, Leisure_ref = _ref1.Leisure_ref, Leisure_lambda = _ref1.Leisure_lambda, Leisure_apply = _ref1.Leisure_apply, Leisure_let = _ref1.Leisure_let, Leisure_anno = _ref1.Leisure_anno, setType = _ref1.setType, setDataType = _ref1.setDataType, cons = _ref1.cons, Nil = _ref1.Nil, consFrom = _ref1.consFrom, define = _ref1.define;

  _ref2 = require('./runtime'), makeSyncMonad = _ref2.makeSyncMonad, runMonad = _ref2.runMonad, _false = _ref2._false, left = _ref2.left, right = _ref2.right;

  _ = require('./lodash.min');

  varNameSub = function(n) {
    return "L_" + (nameSub(n));
  };

  gen = function(ast) {
    return genUniq(ast, Nil, [Nil, 0]);
  };

  genUniq = function(ast, names, uniq) {
    var arity, data, funcName, genned, name, src, _ref3;

    switch (ast.constructor) {
      case Leisure_lit:
        return JSON.stringify(getLitVal(ast));
      case Leisure_ref:
        return "resolve(" + (uniqName(getRefName(ast), uniq)) + ")";
      case Leisure_lambda:
        return genLambda(ast, names, uniq, 0);
      case Leisure_apply:
        return "" + (genUniq(getApplyFunc(ast), names, uniq)) + "(" + (genApplyArg(getApplyArg(ast), names, uniq)) + ")";
      case Leisure_let:
        return "(function(){\n" + (genLets(ast, names, uniq)) + "})()";
      case Leisure_anno:
        name = getAnnoName(ast);
        data = getAnnoData(ast);
        genned = genUniq(getAnnoBody(ast), names, uniq);
        switch (name) {
          case 'type':
            return "setType(" + genned + ", '" + data + "')";
          case 'dataType':
            return "setDataType(" + genned + ", '" + data + "')";
          case 'define':
            _ref3 = data.toArray(), funcName = _ref3[0], arity = _ref3[1], src = _ref3[2];
            return "define('" + funcName + "', (function(){return " + genned + "}), " + arity + ", " + (JSON.stringify(src)) + ")";
          default:
            return genned;
        }
        break;
      default:
        return "DUR? " + ast + ", " + ast.constructor + " " + Leisure_lambda;
    }
  };

  genLambda = function(ast, names, uniq, count) {
    var n, name, u;

    name = getLambdaVar(ast);
    u = addUniq(name, names, uniq);
    n = cons(name, names);
    return addLambdaProperties(ast, "function(" + (uniqName(name, u)) + "){return " + (genUniq(getLambdaBody(ast), n, u)) + "}");
  };

  specialAnnotations = ['type', 'dataType', 'define'];

  arrayify = function(cons) {
    if (cons instanceof Leisure_cons) {
      return cons.map(function(el) {
        return arrayify(el);
      }).toArray();
    } else {
      return cons;
    }
  };

  getLambdaProperties = function(body, props) {
    var value;

    if (body instanceof Leisure_anno) {
      if (!_.contains(specialAnnotations, getAnnoName(body))) {
        if (!props) {
          props = {};
        }
        value = getAnnoData(body);
        props[getAnnoName(body)] = arrayify(value);
      }
      getLambdaProperties(getAnnoBody(body), props);
    }
    return props;
  };

  addLambdaProperties = function(ast, def) {
    var props;

    props = getLambdaProperties(getLambdaBody(ast));
    if (props) {
      return "setLambdaProperties(" + def + ", " + (JSON.stringify(props)) + ")";
    } else {
      return def;
    }
  };

  lcons = function(a, b) {
    return rz(L_cons)(lz(a))(lz(b));
  };

  lconsFrom = function(array) {
    var el, p, _i, _len, _ref3;

    if (array instanceof Array) {
      p = rz(L_nil);
      _ref3 = array.reverse();
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        el = _ref3[_i];
        p = lcons(lconsFrom(el), p);
      }
      return p;
    } else {
      return array;
    }
  };

  assocListProps = null;

  getAssocListProps = function() {
    if (!assocListProps) {
      assocListProps = lcons(lcons('assoc', 'true'), rz(L_nil));
      assocListProps.properties = assocListProps;
    }
    return assocListProps;
  };

  lacons = function(key, value, list) {
    var alist;

    alist = lcons(lcons(key, value), list);
    alist.properties = getAssocListProps();
    return alist;
  };

  global.setLambdaProperties = function(def, props) {
    var k, p, v;

    p = rz(L_nil);
    for (k in props) {
      v = props[k];
      p = lacons(k, lconsFrom(v), p);
    }
    def.properties = p;
    return def;
  };

  memoize = function(func) {
    return "(function(){return " + func + "})";
  };

  dumpAnno = function(ast) {
    if (ast instanceof Leisure_anno) {
      return dumpAnno(getAnnoBody(ast));
    } else {
      return ast;
    }
  };

  genApplyArg = function(arg, names, uniq) {
    if (dumpAnno(arg) instanceof Leisure_apply) {
      return memoize(genUniq(arg, names, uniq));
    } else if (arg instanceof Leisure_ref) {
      return uniqName(getRefName(arg), uniq);
    } else if (arg instanceof Leisure_lit) {
      return "lazy(" + (JSON.stringify(getLitVal(arg))) + ")";
    } else if (arg instanceof Leisure_let) {
      return "function(){" + (genLets(arg, names, uniq)) + "}";
    } else if (dumpAnno(arg) instanceof Leisure_lambda) {
      return memoize(genUniq(arg, names, uniq));
    } else {
      return "function(){return " + (genUniq(arg, names, uniq)) + "}";
    }
  };

  genLets = function(ast, names, uniq) {
    var assigns, decs, _ref3;

    _ref3 = _.foldl(letList(ast, []), (function(result, l) {
      var code, letName, letNames, n, newU, u;

      n = result[0], u = result[1], letNames = result[2], code = result[3];
      newU = addUniq(getLetName(l), n, u);
      letName = uniqName(getLetName(l), newU);
      return [cons(getLetName(l), n), newU, cons(letName, letNames), cons('\n' + letName + ' = ' + genApplyArg(getLetValue(l), n, u), code)];
    }), [names, uniq, Nil, Nil]), names = _ref3[0], uniq = _ref3[1], decs = _ref3[2], assigns = _ref3[3];
    return "\nvar " + (decs.join(', ')) + ";\n" + (assigns.join(';\n')) + ";\nreturn " + (genUniq(getLastLetBody(ast), names, uniq));
  };

  addUniq = function(name, names, uniq) {
    var num, overrides;

    if ((names.find(function(el) {
      return el === name;
    })) !== Nil) {
      overrides = uniq[0], num = uniq[1];
      return [cons(cons(name, "" + name + "_" + num), overrides), num + 1];
    } else {
      return uniq;
    }
  };

  uniqName = function(name, uniq) {
    var kv;

    uniq = uniq[0];
    kv = uniq.find((function(el) {
      return el.head() === name;
    }), uniq);
    return varNameSub((kv !== Nil ? kv.tail() : name));
  };

  letList = function(ast, buf) {
    if (ast instanceof Leisure_let) {
      buf.push(ast);
      return letList(getLetBody(ast), buf);
    } else {
      return buf;
    }
  };

  getLastLetBody = function(ast) {
    if (ast instanceof Leisure_let) {
      return getLastLetBody(getLetBody(ast));
    } else {
      return ast;
    }
  };

  define('runAst', lz(function(ast) {
    var err;

    try {
      return eval("(" + (gen(rz(ast))) + ")");
    } catch (_error) {
      err = _error;
      return rz(L_parseErr)(lz("\n\nParse error: " + err.toString() + "\nAST: "))(ast);
    }
  }));

  curry = function(func, args, pos) {
    if (pos === func.length) {
      return func.apply(null, args.toArray(func.length - 1, []));
    } else {
      return function(arg) {
        return curry(func, simpyCons(arg, args), pos + 1);
      };
    }
  };

  root.gen = gen;

  root.curry = curry;

}).call(this);

/*
*/

})(self)
},{"./ast":1,"./base":2,"./lodash.min":6,"./runtime":10}],5:[function(require,module,exports){
L_runMonads([
  function(){return resolve(L_define)(lazy("true"))(lazy(0))(lazy("true = \\a b . a"))((function(){return setDataType(setType(function(L_a){return function(L_b){return resolve(L_a)}}, 'true'), 'true')}))},
  function(){return resolve(L_define)(lazy("false"))(lazy(0))(lazy("false = \\a b . b"))((function(){return setDataType(setType(function(L_a){return function(L_b){return resolve(L_b)}}, 'false'), 'false')}))},
  function(){return resolve(L_define)(lazy("not"))(lazy(1))(lazy("not b = b false true"))((function(){return function(L_b){return resolve(L_b)(L_false)(L_true)}}))},
  function(){return resolve(L_define)(lazy("and"))(lazy(2))(lazy("and a b = a b false"))((function(){return function(L_a){return function(L_b){return resolve(L_a)(L_b)(L_false)}}}))},
  function(){return resolve(L_define)(lazy("or"))(lazy(2))(lazy("or a b = a true b"))((function(){return function(L_a){return function(L_b){return resolve(L_a)(L_true)(L_b)}}}))},
  function(){return resolve(L_define)(lazy("some"))(lazy(1))(lazy("some x = \\someCase noneCase . someCase x"))((function(){return setDataType(function(L_x){return setType(function(L_someCase){return function(L_noneCase){return resolve(L_someCase)(L_x)}}, 'some')}, 'some')}))},
  function(){return resolve(L_define)(lazy("some2"))(lazy(2))(lazy("some2 a b = \\someCase noneCase . someCase a b"))((function(){return setDataType(function(L_a){return function(L_b){return setType(function(L_someCase){return function(L_noneCase){return resolve(L_someCase)(L_a)(L_b)}}, 'some2')}}, 'some2')}))},
  function(){return resolve(L_define)(lazy("none"))(lazy(0))(lazy("none = \\someCase noneCase . noneCase"))((function(){return setDataType(setType(function(L_someCase){return function(L_noneCase){return resolve(L_noneCase)}}, 'none'), 'none')}))},
  function(){return resolve(L_define)(lazy("isNone"))(lazy(1))(lazy("isNone obj = hasType obj none"))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_none)}}))},
  function(){return resolve(L_define)(lazy("isSome"))(lazy(1))(lazy("isSome obj = hasType obj some"))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_some)}}))},
  function(){return resolve(L_define)(lazy("isSome2"))(lazy(1))(lazy("isSome2 obj = hasType obj some2"))((function(){return function(L_obj){return resolve(L_hasType)(L_obj)(L_some2)}}))},
  function(){return resolve(L_define)(lazy("neq"))(lazy(2))(lazy("neq a b = not (eq a b)"))((function(){return function(L_a){return function(L_b){return resolve(L_not)((function(){return resolve(L_eq)(L_a)(L_b)}))}}}))},
  function(){return resolve(L_define)(lazy("left"))(lazy(1))(lazy("left x = \\lCase rCase . lCase x"))((function(){return setDataType(function(L_x){return setType(function(L_lCase){return function(L_rCase){return resolve(L_lCase)(L_x)}}, 'left')}, 'left')}))},
  function(){return resolve(L_define)(lazy("right"))(lazy(1))(lazy("right x = \\lCase rCase . rCase x"))((function(){return setDataType(function(L_x){return setType(function(L_lCase){return function(L_rCase){return resolve(L_rCase)(L_x)}}, 'right')}, 'right')}))},
  function(){return resolve(L_define)(lazy("strAsc"))(lazy(1))(lazy("strAsc string = _strAsc (assertType 'strAsc string' '*string' string)"))((function(){return function(L_string){return resolve(L__strAsc)((function(){return resolve(L_assertType)(lazy("strAsc string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strChr"))(lazy(1))(lazy("strChr ascii = _strChr (assertType 'strChr string' '*number' ascii)"))((function(){return function(L_ascii){return resolve(L__strChr)((function(){return resolve(L_assertType)(lazy("strChr string"))(lazy("*number"))(L_ascii)}))}}))},
  function(){return resolve(L_define)(lazy("strAt"))(lazy(2))(lazy("strAt string index = _strAt\n  assertType 'strAt string' '*string' string\n  assertType 'strAt index' '*number' index"))((function(){return function(L_string){return function(L_index){return resolve(L__strAt)((function(){return resolve(L_assertType)(lazy("strAt string"))(lazy("*string"))(L_string)}))((function(){return resolve(L_assertType)(lazy("strAt index"))(lazy("*number"))(L_index)}))}}}))},
  function(){return resolve(L_define)(lazy("strStartsWith"))(lazy(2))(lazy("strStartsWith string prefix = _strStartsWith\n  assertType 'strStartsWith string' '*string' string\n  assertType 'strStartsWith prefix' '*string' prefix"))((function(){return function(L_string){return function(L_prefix){return resolve(L__strStartsWith)((function(){return resolve(L_assertType)(lazy("strStartsWith string"))(lazy("*string"))(L_string)}))((function(){return resolve(L_assertType)(lazy("strStartsWith prefix"))(lazy("*string"))(L_prefix)}))}}}))},
  function(){return resolve(L_define)(lazy("strLen"))(lazy(1))(lazy("strLen string = _strLen (assertType 'strLen string' '*string' string)"))((function(){return function(L_string){return resolve(L__strLen)((function(){return resolve(L_assertType)(lazy("strLen string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strToLowerCase"))(lazy(1))(lazy("strToLowerCase string = _strToLowerCase (assertType 'strToLowerCase string' '*string' string)"))((function(){return function(L_string){return resolve(L__strToLowerCase)((function(){return resolve(L_assertType)(lazy("strToLowerCase string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strToUpperCase"))(lazy(1))(lazy("strToUpperCase string = _strToUpperCase (assertType 'strToUpperCase string' '*string' string)"))((function(){return function(L_string){return resolve(L__strToUpperCase)((function(){return resolve(L_assertType)(lazy("strToUpperCase string"))(lazy("*string"))(L_string)}))}}))},
  function(){return resolve(L_define)(lazy("strReplace"))(lazy(3))(lazy("strReplace string pat repl = _strReplace\n  assertType 'strReplace string' '*string' string\n  assert (or (hasType pat '*string') (hasType pat '*RegExp')) (strCat (cons 'strStartsWith pat should be type string or RegExp but it is type ' (cons (getType pat) (cons ': ' (cons (show pat) nil))))) pat\n  assertType 'strReplace repl' '*string' repl"))((function(){return function(L_string){return function(L_pat){return function(L_repl){return resolve(L__strReplace)((function(){return resolve(L_assertType)(lazy("strReplace string"))(lazy("*string"))(L_string)}))((function(){return resolve(L_assert)((function(){return resolve(L_or)((function(){return resolve(L_hasType)(L_pat)(lazy("*string"))}))((function(){return resolve(L_hasType)(L_pat)(lazy("*RegExp"))}))}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strStartsWith pat should be type string or RegExp but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_pat)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_pat)}))(L_nil)}))}))}))}))}))(L_pat)}))((function(){return resolve(L_assertType)(lazy("strReplace repl"))(lazy("*string"))(L_repl)}))}}}}))},
  function(){return resolve(L_define)(lazy("strSubstring"))(lazy(3))(lazy("strSubstring str start end = _strSubstring\n  assertType 'strSubstring str' '*string' str\n  assertType 'strSubstring start' '*number' start\n  assertType 'strSubstring end' '*number' end"))((function(){return function(L_str){return function(L_start){return function(L_end){return resolve(L__strSubstring)((function(){return resolve(L_assertType)(lazy("strSubstring str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assertType)(lazy("strSubstring start"))(lazy("*number"))(L_start)}))((function(){return resolve(L_assertType)(lazy("strSubstring end"))(lazy("*number"))(L_end)}))}}}}))},
  function(){return resolve(L_define)(lazy("strSplit"))(lazy(2))(lazy("strSplit str pat = _strSplit\n  assertType 'strSplit str' '*string' str\n  assert (or (hasType pat '*string') (hasType pat '*RegExp')) (strCat (cons 'strSplit pat should be type string or RegExp but it is type ' (cons (getType pat) (cons ': ' (cons (show pat) nil))))) pat"))((function(){return function(L_str){return function(L_pat){return resolve(L__strSplit)((function(){return resolve(L_assertType)(lazy("strSplit str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assert)((function(){return resolve(L_or)((function(){return resolve(L_hasType)(L_pat)(lazy("*string"))}))((function(){return resolve(L_hasType)(L_pat)(lazy("*RegExp"))}))}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strSplit pat should be type string or RegExp but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_pat)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_pat)}))(L_nil)}))}))}))}))}))(L_pat)}))}}}))},
  function(){return resolve(L_define)(lazy("strCat"))(lazy(1))(lazy("strCat list = _strCat\n  assert (isList list) (strCat (cons 'strCat list should be type cons or nil but it is type ' (cons (getType list) (cons ': ' (cons list))))) list"))((function(){return function(L_list){return resolve(L__strCat)((function(){return resolve(L_assert)((function(){return resolve(L_isList)(L_list)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strCat list should be type cons or nil but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_list)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)(L_list)}))}))}))}))}))(L_list)}))}}))},
  function(){return resolve(L_define)(lazy("strAdd"))(lazy(2))(lazy("strAdd str1 str2 = _strAdd (assertType 'strAdd str1' '*string' str1) (assertType 'strAdd str2' '*string' str2)"))((function(){return function(L_str1){return function(L_str2){return resolve(L__strAdd)((function(){return resolve(L_assertType)(lazy("strAdd str1"))(lazy("*string"))(L_str1)}))((function(){return resolve(L_assertType)(lazy("strAdd str2"))(lazy("*string"))(L_str2)}))}}}))},
  function(){return resolve(L_define)(lazy("strMatch"))(lazy(2))(lazy("strMatch str pat = _strMatch\n  assertType 'strMatch str' '*string' str\n  assert (or (hasType pat '*string') (hasType pat '*RegExp')) (strCat (cons 'strMatch pat should be type string or RegExp but it is type ' (cons (getType pat) (cons ': ' (cons (show pat) nil))))) pat"))((function(){return function(L_str){return function(L_pat){return resolve(L__strMatch)((function(){return resolve(L_assertType)(lazy("strMatch str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assert)((function(){return resolve(L_or)((function(){return resolve(L_hasType)(L_pat)(lazy("*string"))}))((function(){return resolve(L_hasType)(L_pat)(lazy("*RegExp"))}))}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strMatch pat should be type string or RegExp but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_pat)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_pat)}))(L_nil)}))}))}))}))}))(L_pat)}))}}}))},
  function(){return resolve(L_define)(lazy("strToList"))(lazy(1))(lazy("strToList str = _strToList (assertType 'strToList str' '*string' str)"))((function(){return function(L_str){return resolve(L__strToList)((function(){return resolve(L_assertType)(lazy("strToList str"))(lazy("*string"))(L_str)}))}}))},
  function(){return resolve(L_define)(lazy("strFromList"))(lazy(1))(lazy("strFromList list = _strFromList\n  assert (isList list) (strCat (cons 'strFromList list should be type cons or nil but it is type ' (cons (getType list) (cons ': ' (cons list))))) list"))((function(){return function(L_list){return resolve(L__strFromList)((function(){return resolve(L_assert)((function(){return resolve(L_isList)(L_list)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("strFromList list should be type cons or nil but it is type "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_list)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)(L_list)}))}))}))}))}))(L_list)}))}}))},
  function(){return resolve(L_define)(lazy("regexp"))(lazy(1))(lazy("regexp str = _regexp (assertType 'regexp str' '*string' str)"))((function(){return function(L_str){return resolve(L__regexp)((function(){return resolve(L_assertType)(lazy("regexp str"))(lazy("*string"))(L_str)}))}}))},
  function(){return resolve(L_define)(lazy("regexpFlags"))(lazy(2))(lazy("regexpFlags str flags = _regexpFlags\n  assertType 'regexp str' '*string' str\n  assertType 'regexp flags' '*string' flags"))((function(){return function(L_str){return function(L_flags){return resolve(L__regexpFlags)((function(){return resolve(L_assertType)(lazy("regexp str"))(lazy("*string"))(L_str)}))((function(){return resolve(L_assertType)(lazy("regexp flags"))(lazy("*string"))(L_flags)}))}}}))},
  function(){return resolve(L_define)(lazy("jsonParse"))(lazy(3))(lazy("jsonParse str failure success = _jsonParse\n  assertType 'jsonParse str' '*string' str\n  failure\n  success"))((function(){return function(L_str){return function(L_failure){return function(L_success){return resolve(L__jsonParse)((function(){return resolve(L_assertType)(lazy("jsonParse str"))(lazy("*string"))(L_str)}))(L_failure)(L_success)}}}}))},
  function(){return resolve(L_define)(lazy("show"))(lazy(1))(lazy("show x = _show x"))((function(){return function(L_x){return resolve(L__show)(L_x)}}))},
  function(){return resolve(L_define)(lazy("id"))(lazy(1))(lazy("id x = x"))((function(){return function(L_x){return resolve(L_x)}}))},
  function(){return resolve(L_define)(lazy("compose"))(lazy(2))(lazy("compose f g = \\x . f (g x)"))((function(){return setDataType(function(L_f){return function(L_g){return setType(function(L_x){return resolve(L_f)((function(){return resolve(L_g)(L_x)}))}, 'compose')}}, 'compose')}))},
  function(){return resolve(L_define)(lazy("flip"))(lazy(1))(lazy("flip func = \\x y . func y x"))((function(){return setDataType(function(L_func){return setType(function(L_x){return function(L_y){return resolve(L_func)(L_y)(L_x)}}, 'flip')}, 'flip')}))},
  function(){return resolve(L_define)(lazy("cons"))(lazy(2))(lazy("cons a b = \\f . f a b"))((function(){return setDataType(function(L_a){return function(L_b){return setType(function(L_f){return resolve(L_f)(L_a)(L_b)}, 'cons')}}, 'cons')}))},
  function(){return resolve(L_define)(lazy("isCons"))(lazy(1))(lazy("isCons c = hasType c cons"))((function(){return function(L_c){return resolve(L_hasType)(L_c)(L_cons)}}))},
  function(){return resolve(L_define)(lazy("isList"))(lazy(1))(lazy("isList l = or (hasType l cons) (hasType l nil)"))((function(){return function(L_l){return resolve(L_or)((function(){return resolve(L_hasType)(L_l)(L_cons)}))((function(){return resolve(L_hasType)(L_l)(L_nil)}))}}))},
  function(){return resolve(L_define)(lazy("assertType"))(lazy(3))(lazy("assertType msg type value = assert (hasType value type) (strCat (cons msg (cons ' should be type ' (cons (getDataType type) (cons ', but its type is ' (cons (getType value) (cons ': ' (cons (show value) nil)))))))) value"))((function(){return function(L_msg){return function(L_type){return function(L_value){return resolve(L_assert)((function(){return resolve(L_hasType)(L_value)(L_type)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_msg)((function(){return resolve(L_cons)(lazy(" should be type "))((function(){return resolve(L_cons)((function(){return resolve(L_getDataType)(L_type)}))((function(){return resolve(L_cons)(lazy(", but its type is "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_value)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_value)}))(L_nil)}))}))}))}))}))}))}))}))(L_value)}}}}))},
  function(){return resolve(L_define)(lazy("nil"))(lazy(0))(lazy("nil = \\a b . b"))((function(){return setDataType(setType(function(L_a){return function(L_b){return resolve(L_b)}}, 'nil'), 'nil')}))},
  function(){return resolve(L_define)(lazy("isNil"))(lazy(1))(lazy("isNil n = hasType n nil"))((function(){return function(L_n){return resolve(L_hasType)(L_n)(L_nil)}}))},
  function(){return resolve(L_define)(lazy("head"))(lazy(1))(lazy("head l = l \\h t . h"))((function(){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return resolve(L_h)}}}))}}))},
  function(){return resolve(L_define)(lazy("tail"))(lazy(1))(lazy("tail l = l \\h t . t"))((function(){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return resolve(L_t)}}}))}}))},
  function(){return resolve(L_define)(lazy("last"))(lazy(1))(lazy("last l = isNil (tail l)\n  head l\n  last (tail l)"))((function(){return function(L_l){return resolve(L_isNil)((function(){return resolve(L_tail)(L_l)}))((function(){return resolve(L_head)(L_l)}))((function(){return resolve(L_last)((function(){return resolve(L_tail)(L_l)}))}))}}))},
  function(){return resolve(L_define)(lazy("removeLast"))(lazy(1))(lazy("removeLast l = isNil (tail l)\n  nil\n  cons (head l) (removeLast (tail l))"))((function(){return function(L_l){return resolve(L_isNil)((function(){return resolve(L_tail)(L_l)}))(L_nil)((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_l)}))((function(){return resolve(L_removeLast)((function(){return resolve(L_tail)(L_l)}))}))}))}}))},
  function(){return resolve(L_define)(lazy("length"))(lazy(1))(lazy("length list = isCons list\n  + 1 (length (tail list))\n  0"))((function(){return function(L_list){return resolve(L_isCons)(L_list)((function(){return resolve(L_$o)(lazy(1))((function(){return resolve(L_length)((function(){return resolve(L_tail)(L_list)}))}))}))(lazy(0))}}))},
  function(){return resolve(L_define)(lazy("append"))(lazy(2))(lazy("append a b = isNil a\n  b\n  cons (head a) (append (tail a) b)"))((function(){return function(L_a){return function(L_b){return resolve(L_isNil)(L_a)(L_b)((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_a)}))((function(){return resolve(L_append)((function(){return resolve(L_tail)(L_a)}))(L_b)}))}))}}}))},
  function(){return resolve(L_define)(lazy("flatten"))(lazy(1))(lazy("flatten list = isCons list\n  subflatten list nil\n  list"))((function(){return function(L_list){return resolve(L_isCons)(L_list)((function(){return resolve(L_subflatten)(L_list)(L_nil)}))(L_list)}}))},
  function(){return resolve(L_define)(lazy("subflatten"))(lazy(2))(lazy("subflatten list result = isNil list\n  result\n  isCons list\n    subflatten (head list) (subflatten (tail list) result)\n    cons list result"))((function(){return function(L_list){return function(L_result){return resolve(L_isNil)(L_list)(L_result)((function(){return resolve(L_isCons)(L_list)((function(){return resolve(L_subflatten)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_subflatten)((function(){return resolve(L_tail)(L_list)}))(L_result)}))}))((function(){return resolve(L_cons)(L_list)(L_result)}))}))}}}))},
  function(){return resolve(L_define)(lazy("reverse"))(lazy(1))(lazy("reverse l = rev l nil"))((function(){return function(L_l){return resolve(L_rev)(L_l)(L_nil)}}))},
  function(){return resolve(L_define)(lazy("rev"))(lazy(2))(lazy("rev l result = isNil l\n  result\n  rev (tail l) (cons (head l) result)"))((function(){return function(L_l){return function(L_result){return resolve(L_isNil)(L_l)(L_result)((function(){return resolve(L_rev)((function(){return resolve(L_tail)(L_l)}))((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_l)}))(L_result)}))}))}}}))},
  function(){return resolve(L_define)(lazy("filter"))(lazy(2))(lazy("filter func list = isNil list\n  nil\n  func (head list) (cons (head list)) id (filter func (tail list))"))((function(){return function(L_func){return function(L_list){return resolve(L_isNil)(L_list)(L_nil)((function(){return resolve(L_func)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_list)}))}))(L_id)((function(){return resolve(L_filter)(L_func)((function(){return resolve(L_tail)(L_list)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("find"))(lazy(2))(lazy("find predicate list = isNil list\n  none\n  predicate (head list) (some (head list)) (find predicate (tail list))"))((function(){return function(L_predicate){return function(L_list){return resolve(L_isNil)(L_list)(L_none)((function(){return resolve(L_predicate)((function(){return resolve(L_head)(L_list)}))((function(){return resolve(L_some)((function(){return resolve(L_head)(L_list)}))}))((function(){return resolve(L_find)(L_predicate)((function(){return resolve(L_tail)(L_list)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("contains"))(lazy(2))(lazy("contains list item = find (\\el . eq el item) list (\\x . true) false"))((function(){return function(L_list){return function(L_item){return resolve(L_find)((function(){return function(L_el){return resolve(L_eq)(L_el)(L_item)}}))(L_list)((function(){return function(L_x){return resolve(L_true)}}))(L_false)}}}))},
  function(){return resolve(L_define)(lazy("map"))(lazy(2))(lazy("map func l = isNil l\n  nil\n  cons (func (head l)) (map func (tail l))"))((function(){return function(L_func){return function(L_l){return resolve(L_isNil)(L_l)(L_nil)((function(){return resolve(L_cons)((function(){return resolve(L_func)((function(){return resolve(L_head)(L_l)}))}))((function(){return resolve(L_map)(L_func)((function(){return resolve(L_tail)(L_l)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("mapSave"))(lazy(2))(lazy("mapSave func l = isNil l\n  nil\n  \\\\\n    newH = func (head l)\n    newT = mapSave func (tail l)\n    .\n    and (eq newH (head l)) (eq newT (tail l))\n      l\n      cons newH newT"))((function(){return function(L_func){return function(L_l){return resolve(L_isNil)(L_l)(L_nil)(function(){
var L_newT, L_newH;

L_newT = (function(){return resolve(L_mapSave)(L_func)((function(){return resolve(L_tail)(L_l)}))});

L_newH = (function(){return resolve(L_func)((function(){return resolve(L_head)(L_l)}))});
return resolve(L_and)((function(){return resolve(L_eq)(L_newH)((function(){return resolve(L_head)(L_l)}))}))((function(){return resolve(L_eq)(L_newT)((function(){return resolve(L_tail)(L_l)}))}))(L_l)((function(){return resolve(L_cons)(L_newH)(L_newT)}))})}}}))},
  function(){return resolve(L_define)(lazy("foldl"))(lazy(3))(lazy("foldl func initialValue l = l (\\h t D . foldl func (func initialValue h) t) initialValue"))((function(){return function(L_func){return function(L_initialValue){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_foldl)(L_func)((function(){return resolve(L_func)(L_initialValue)(L_h)}))(L_t)}}}}))(L_initialValue)}}}}))},
  function(){return resolve(L_define)(lazy("foldl1"))(lazy(2))(lazy("foldl1 func l = l \\h t . foldl func h t"))((function(){return function(L_func){return function(L_l){return resolve(L_l)((function(){return function(L_h){return function(L_t){return resolve(L_foldl)(L_func)(L_h)(L_t)}}}))}}}))},
  function(){return resolve(L_define)(lazy("foldr"))(lazy(3))(lazy("foldr func initialValue list = list\n  \\h t D . func h (foldr func initialValue t)\n  initialValue"))((function(){return function(L_func){return function(L_initialValue){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_func)(L_h)((function(){return resolve(L_foldr)(L_func)(L_initialValue)(L_t)}))}}}}))(L_initialValue)}}}}))},
  function(){return resolve(L_define)(lazy("foldr1"))(lazy(2))(lazy("foldr1 func list = list \\h t . isNil t\n  h\n  func h (foldr1 func t)"))((function(){return function(L_func){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_isNil)(L_t)(L_h)((function(){return resolve(L_func)(L_h)((function(){return resolve(L_foldr1)(L_func)(L_t)}))}))}}}))}}}))},
  function(){return resolve(L_define)(lazy("intersperse"))(lazy(2))(lazy("intersperse list element = list (\\h t D .\n  isNil t\n    list\n    cons h (cons element (intersperse t element))) nil"))((function(){return function(L_list){return function(L_element){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isNil)(L_t)(L_list)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)(L_element)((function(){return resolve(L_intersperse)(L_t)(L_element)}))}))}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("join"))(lazy(2))(lazy("join list el = strCat (intersperse list el)"))((function(){return function(L_list){return function(L_el){return resolve(L_strCat)((function(){return resolve(L_intersperse)(L_list)(L_el)}))}}}))},
  function(){return resolve(L_define)(lazy("findIndex"))(lazy(2))(lazy("findIndex func list = idx list func 0"))((function(){return function(L_func){return function(L_list){return resolve(L_idx)(L_list)(L_func)(lazy(0))}}}))},
  function(){return resolve(L_define)(lazy("idx"))(lazy(3))(lazy("idx list func pos = list\n  \\h t D . func h\n    pos\n    idx t func (+ 1 pos)\n  -1"))((function(){return function(L_list){return function(L_func){return function(L_pos){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_func)(L_h)(L_pos)((function(){return resolve(L_idx)(L_t)(L_func)((function(){return resolve(L_$o)(lazy(1))(L_pos)}))}))}}}}))(lazy(-1))}}}}))},
  function(){return resolve(L_define)(lazy("index"))(lazy(2))(lazy("index list el = find (\\item . == el item) list"))((function(){return function(L_list){return function(L_el){return resolve(L_find)((function(){return function(L_item){return resolve(L_$p$p)(L_el)(L_item)}}))(L_list)}}}))},
  function(){return resolve(L_define)(lazy("assertAlist"))(lazy(3))(lazy("assertAlist msg value result = assert (isAlist value) (strCat (cons msg (cons ' should be a association list, but it is not; its type is ' (cons (getType value) (cons ': ' (cons (show value) nil)))))) result"))((function(){return function(L_msg){return function(L_value){return function(L_result){return resolve(L_assert)((function(){return resolve(L_isAlist)(L_value)}))((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_msg)((function(){return resolve(L_cons)(lazy(" should be a association list, but it is not; its type is "))((function(){return resolve(L_cons)((function(){return resolve(L_getType)(L_value)}))((function(){return resolve(L_cons)(lazy(": "))((function(){return resolve(L_cons)((function(){return resolve(L_show)(L_value)}))(L_nil)}))}))}))}))}))}))(L_result)}}}}))},
  function(){return resolve(L_define)(lazy("acons"))(lazy(3))(lazy("acons k v alist = assertAlist \"acons alist\" alist (\\@ type cons . \\f . \\@ assoc true . f (cons k v) alist)"))((function(){return function(L_k){return function(L_v){return function(L_alist){return resolve(L_assertAlist)(lazy("acons alist"))(L_alist)((function(){return setType(setLambdaProperties(function(L_f){return resolve(L_f)((function(){return resolve(L_cons)(L_k)(L_v)}))(L_alist)}, {"assoc":"true"}), 'cons')}))}}}}))},
  function(){return resolve(L_define)(lazy("assoc"))(lazy(2))(lazy("assoc k alist  = find (\\el . eq k (head el)) alist (\\cell . cell \\head tail . some tail) none"))((function(){return function(L_k){return function(L_alist){return resolve(L_find)((function(){return function(L_el){return resolve(L_eq)(L_k)((function(){return resolve(L_head)(L_el)}))}}))(L_alist)((function(){return function(L_cell){return resolve(L_cell)((function(){return function(L_head){return function(L_tail){return resolve(L_some)(L_tail)}}}))}}))(L_none)}}}))},
  function(){return resolve(L_define)(lazy("rassoc"))(lazy(2))(lazy("rassoc v alist = find (\\el . eq v (tail el)) alist (\\cell . cell \\head tail . some head) none"))((function(){return function(L_v){return function(L_alist){return resolve(L_find)((function(){return function(L_el){return resolve(L_eq)(L_v)((function(){return resolve(L_tail)(L_el)}))}}))(L_alist)((function(){return function(L_cell){return resolve(L_cell)((function(){return function(L_head){return function(L_tail){return resolve(L_some)(L_head)}}}))}}))(L_none)}}}))},
  function(){return resolve(L_define)(lazy("isAlist"))(lazy(1))(lazy("isAlist obj = or (isNil obj) (hasProperty obj 'assoc')"))((function(){return function(L_obj){return resolve(L_or)((function(){return resolve(L_isNil)(L_obj)}))((function(){return resolve(L_hasProperty)(L_obj)(lazy("assoc"))}))}}))},
  function(){return resolve(L_define)(lazy("aconsPair"))(lazy(2))(lazy("aconsPair keyValue list = \\@ type cons . \\f . \\@ assoc true . f keyValue list"))((function(){return function(L_keyValue){return function(L_list){return setType(setLambdaProperties(function(L_f){return resolve(L_f)(L_keyValue)(L_list)}, {"assoc":"true"}), 'cons')}}}))},
  function(){return resolve(L_define)(lazy("appendAlist"))(lazy(2))(lazy("appendAlist a b = isNil a\n  b\n  aconsPair (head a) (appendAlist (tail a) b)"))((function(){return function(L_a){return function(L_b){return resolve(L_isNil)(L_a)(L_b)((function(){return resolve(L_aconsPair)((function(){return resolve(L_head)(L_a)}))((function(){return resolve(L_appendAlist)((function(){return resolve(L_tail)(L_a)}))(L_b)}))}))}}}))},
  function(){return resolve(L_define)(lazy("keys"))(lazy(1))(lazy("keys list = map (\\l . head l) list"))((function(){return function(L_list){return resolve(L_map)((function(){return function(L_l){return resolve(L_head)(L_l)}}))(L_list)}}))},
  function(){return resolve(L_define)(lazy("getProperty"))(lazy(2))(lazy("getProperty func prop = getProperties func\n  \\props . assoc prop props\n  none"))((function(){return function(L_func){return function(L_prop){return resolve(L_getProperties)(L_func)((function(){return function(L_props){return resolve(L_assoc)(L_prop)(L_props)}}))(L_none)}}}))},
  function(){return resolve(L_define)(lazy("hasProperty"))(lazy(2))(lazy("hasProperty func prop = getProperty func prop\n  \\_ . true\n  false"))((function(){return function(L_func){return function(L_prop){return resolve(L_getProperty)(L_func)(L_prop)((function(){return function(L__){return resolve(L_true)}}))(L_false)}}}))},
  function(){return resolve(L_define)(lazy("quicksort"))(lazy(2))(lazy("quicksort less list = (qs less list) nil"))((function(){return function(L_less){return function(L_list){return resolve(L_qs)(L_less)(L_list)(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("qs"))(lazy(2))(lazy("qs sortedFunc list = list\n  \\h t D . \\\\\n    greater = filter (sortedFunc h) t\n    lesser = filter (compose not (sortedFunc h)) t\n    .\n    \\rest . (qs sortedFunc lesser) (cons h ((qs sortedFunc greater) rest))\n  id"))((function(){return function(L_sortedFunc){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return (function(){

var L_lesser, L_greater;

L_lesser = (function(){return resolve(L_filter)((function(){return resolve(L_compose)(L_not)((function(){return resolve(L_sortedFunc)(L_h)}))}))(L_t)});

L_greater = (function(){return resolve(L_filter)((function(){return resolve(L_sortedFunc)(L_h)}))(L_t)});
return function(L_rest){return resolve(L_qs)(L_sortedFunc)(L_lesser)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_qs)(L_sortedFunc)(L_greater)(L_rest)}))}))}})()}}}}))(L_id)}}}))},
  function(){return resolve(L_define)(lazy("insertSorted"))(lazy(3))(lazy("insertSorted sortFunc item list = list\n  \\h t D . sortFunc item h (cons item list) (cons h (insertSorted sortFunc item t))\n  cons item nil"))((function(){return function(L_sortFunc){return function(L_item){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_sortFunc)(L_item)(L_h)((function(){return resolve(L_cons)(L_item)(L_list)}))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_insertSorted)(L_sortFunc)(L_item)(L_t)}))}))}}}}))((function(){return resolve(L_cons)(L_item)(L_nil)}))}}}}))},
  function(){return resolve(L_define)(lazy("token"))(lazy(2))(lazy("token txt pos = \\f . f txt pos"))((function(){return setDataType(function(L_txt){return function(L_pos){return setType(function(L_f){return resolve(L_f)(L_txt)(L_pos)}, 'token')}}, 'token')}))},
  function(){return resolve(L_define)(lazy("tokenString"))(lazy(1))(lazy("tokenString tok = tok \\t p . t"))((function(){return function(L_tok){return resolve(L_tok)((function(){return function(L_t){return function(L_p){return resolve(L_t)}}}))}}))},
  function(){return resolve(L_define)(lazy("tokenPos"))(lazy(1))(lazy("tokenPos tok = tok \\t p . p"))((function(){return function(L_tok){return resolve(L_tok)((function(){return function(L_t){return function(L_p){return resolve(L_p)}}}))}}))},
  function(){return resolve(L_define)(lazy("isToken"))(lazy(1))(lazy("isToken t = hasType t token"))((function(){return function(L_t){return resolve(L_hasType)(L_t)(L_token)}}))},
  function(){return resolve(L_define)(lazy("parens"))(lazy(3))(lazy("parens start end content = \\f . f start end content"))((function(){return setDataType(function(L_start){return function(L_end){return function(L_content){return setType(function(L_f){return resolve(L_f)(L_start)(L_end)(L_content)}, 'parens')}}}, 'parens')}))},
  function(){return resolve(L_define)(lazy("parensStart"))(lazy(1))(lazy("parensStart p = p \\s e c . s"))((function(){return function(L_p){return resolve(L_p)((function(){return function(L_s){return function(L_e){return function(L_c){return resolve(L_s)}}}}))}}))},
  function(){return resolve(L_define)(lazy("parensEnd"))(lazy(1))(lazy("parensEnd p = p \\s e c . e"))((function(){return function(L_p){return resolve(L_p)((function(){return function(L_s){return function(L_e){return function(L_c){return resolve(L_e)}}}}))}}))},
  function(){return resolve(L_define)(lazy("parensContent"))(lazy(1))(lazy("parensContent p = p \\s e c . c"))((function(){return function(L_p){return resolve(L_p)((function(){return function(L_s){return function(L_e){return function(L_c){return resolve(L_c)}}}}))}}))},
  function(){return resolve(L_define)(lazy("isParens"))(lazy(1))(lazy("isParens p = hasType p parens"))((function(){return function(L_p){return resolve(L_hasType)(L_p)(L_parens)}}))},
  function(){return resolve(L_define)(lazy("makeParens"))(lazy(3))(lazy("makeParens start end content =\n  and (isCons content) (isNil (tail content))\n    makeParens start end (head content)\n    or (isToken content) (isParens content)\n      content\n      parens start end content"))((function(){return function(L_start){return function(L_end){return function(L_content){return resolve(L_and)((function(){return resolve(L_isCons)(L_content)}))((function(){return resolve(L_isNil)((function(){return resolve(L_tail)(L_content)}))}))((function(){return resolve(L_makeParens)(L_start)(L_end)((function(){return resolve(L_head)(L_content)}))}))((function(){return resolve(L_or)((function(){return resolve(L_isToken)(L_content)}))((function(){return resolve(L_isParens)(L_content)}))(L_content)((function(){return resolve(L_parens)(L_start)(L_end)(L_content)}))}))}}}}))},
  function(){return resolve(L_define)(lazy("parensFromToks"))(lazy(3))(lazy("parensFromToks left right content = \\\\\n  start = tokenPos left\n  end = + (tokenPos right) (strLen (tokenString right))\n  .\n  parens start end content"))((function(){return function(L_left){return function(L_right){return function(L_content){return (function(){

var L_end, L_start;

L_end = (function(){return resolve(L_$o)((function(){return resolve(L_tokenPos)(L_right)}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_right)}))}))});

L_start = (function(){return resolve(L_tokenPos)(L_left)});
return resolve(L_parens)(L_start)(L_end)(L_content)})()}}}}))},
  function(){return resolve(L_define)(lazy("stripParens"))(lazy(1))(lazy("stripParens p = isParens p (parensContent p) p"))((function(){return function(L_p){return resolve(L_isParens)(L_p)((function(){return resolve(L_parensContent)(L_p)}))(L_p)}}))},
  function(){return resolve(L_define)(lazy("parseErr"))(lazy(2))(lazy("parseErr msg1 msg2 = \\f . f (strCat (cons msg1 (cons msg2 nil)))"))((function(){return setDataType(function(L_msg1){return function(L_msg2){return setType(function(L_f){return resolve(L_f)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_msg1)((function(){return resolve(L_cons)(L_msg2)(L_nil)}))}))}))}, 'parseErr')}}, 'parseErr')}))},
  function(){return resolve(L_define)(lazy("parseErrMsg"))(lazy(1))(lazy("parseErrMsg err = err \\m . m"))((function(){return function(L_err){return resolve(L_err)((function(){return function(L_m){return resolve(L_m)}}))}}))},
  function(){return resolve(L_define)(lazy("isParseErr"))(lazy(1))(lazy("isParseErr thing = hasType thing parseErr"))((function(){return function(L_thing){return resolve(L_hasType)(L_thing)(L_parseErr)}}))},
  function(){return resolve(L_define)(lazy("emptyToken"))(lazy(0))(lazy("emptyToken = regexp '^\\\\n[ \\\\i]*(#|$)'"))((function(){return resolve(L_regexp)(lazy("^\\n[ \\i]*(#|$)"))}))},
  function(){return resolve(L_define)(lazy("makeTokens"))(lazy(2))(lazy("makeTokens strings start = strings (\\h t D . makeMoreTokens h t start) nil"))((function(){return function(L_strings){return function(L_start){return resolve(L_strings)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_makeMoreTokens)(L_h)(L_t)(L_start)}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("makeMoreTokens"))(lazy(3))(lazy("makeMoreTokens h t start = \\\\\n  next = makeTokens t (+ start (strLen h))\n  .\n  and (strMatches h emptyToken) (or (isNil t) (strStartsWith (head t) '\\n'))\n    makeTokens t (+ start (strLen h))\n    or (strStartsWith h ' ') (strStartsWith h '#')\n      next\n      and (strStartsWith h '\\n') (strStartsWith (head t) '#')\n        makeTokens (tail t) (+ start (+ (strLen h) (strLen (head t))))\n        cons (token h start) next"))((function(){return function(L_h){return function(L_t){return function(L_start){return (function(){

var L_next;

L_next = (function(){return resolve(L_makeTokens)(L_t)((function(){return resolve(L_$o)(L_start)((function(){return resolve(L_strLen)(L_h)}))}))});
return resolve(L_and)((function(){return resolve(L_strMatches)(L_h)(L_emptyToken)}))((function(){return resolve(L_or)((function(){return resolve(L_isNil)(L_t)}))((function(){return resolve(L_strStartsWith)((function(){return resolve(L_head)(L_t)}))(lazy("\n"))}))}))((function(){return resolve(L_makeTokens)(L_t)((function(){return resolve(L_$o)(L_start)((function(){return resolve(L_strLen)(L_h)}))}))}))((function(){return resolve(L_or)((function(){return resolve(L_strStartsWith)(L_h)(lazy(" "))}))((function(){return resolve(L_strStartsWith)(L_h)(lazy("#"))}))(L_next)((function(){return resolve(L_and)((function(){return resolve(L_strStartsWith)(L_h)(lazy("\n"))}))((function(){return resolve(L_strStartsWith)((function(){return resolve(L_head)(L_t)}))(lazy("#"))}))((function(){return resolve(L_makeTokens)((function(){return resolve(L_tail)(L_t)}))((function(){return resolve(L_$o)(L_start)((function(){return resolve(L_$o)((function(){return resolve(L_strLen)(L_h)}))((function(){return resolve(L_strLen)((function(){return resolve(L_head)(L_t)}))}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_token)(L_h)(L_start)}))(L_next)}))}))}))})()}}}}))},
  function(){return resolve(L_define)(lazy("splitTokens"))(lazy(2))(lazy("splitTokens str pat = filter (\\s . not (eq s '')) (basicSplitTokens str pat true)"))((function(){return function(L_str){return function(L_pat){return resolve(L_filter)((function(){return function(L_s){return resolve(L_not)((function(){return resolve(L_eq)(L_s)(lazy(""))}))}}))((function(){return resolve(L_basicSplitTokens)(L_str)(L_pat)(L_true)}))}}}))},
  function(){return resolve(L_define)(lazy("numberPat"))(lazy(0))(lazy("numberPat = regexp '-?([0-9]+(\\\\.[0-9]+)?|\\\\.[0-9]+)'"))((function(){return resolve(L_regexp)(lazy("-?([0-9]+(\\.[0-9]+)?|\\.[0-9]+)"))}))},
  function(){return resolve(L_define)(lazy("matchOffset"))(lazy(2))(lazy("matchOffset str match = isNil match\n  strLen str\n  head (tail (tail match))"))((function(){return function(L_str){return function(L_match){return resolve(L_isNil)(L_match)((function(){return resolve(L_strLen)(L_str)}))((function(){return resolve(L_head)((function(){return resolve(L_tail)((function(){return resolve(L_tail)(L_match)}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("basicSplitTokens"))(lazy(3))(lazy("basicSplitTokens str pat prevIsDel = == str ''\n  nil\n  \\\\\n    num = strMatch str numberPat\n    del = strMatch str pat\n    numOffset = matchOffset str num\n    delOffset = matchOffset str del\n    select = and (== numOffset 0) prevIsDel\n      \\del num first . num\n      == delOffset 0\n        \\del num first . del\n        \\del num first . first\n    first = select (head del) (head num) (strSubstring str 0 delOffset)\n    .\n    cons\n      first\n      basicSplitTokens\n        strSubstring str (strLen first) 0\n        pat\n        select true false false"))((function(){return function(L_str){return function(L_pat){return function(L_prevIsDel){return resolve(L_$p$p)(L_str)(lazy(""))(L_nil)(function(){
var L_first, L_select, L_delOffset, L_numOffset, L_del, L_num;

L_first = (function(){return resolve(L_select)((function(){return resolve(L_head)(L_del)}))((function(){return resolve(L_head)(L_num)}))((function(){return resolve(L_strSubstring)(L_str)(lazy(0))(L_delOffset)}))});

L_select = (function(){return resolve(L_and)((function(){return resolve(L_$p$p)(L_numOffset)(lazy(0))}))(L_prevIsDel)((function(){return function(L_del_0){return function(L_num_1){return function(L_first){return resolve(L_num_1)}}}}))((function(){return resolve(L_$p$p)(L_delOffset)(lazy(0))((function(){return function(L_del_0){return function(L_num_1){return function(L_first){return resolve(L_del_0)}}}}))((function(){return function(L_del_0){return function(L_num_1){return function(L_first){return resolve(L_first)}}}}))}))});

L_delOffset = (function(){return resolve(L_matchOffset)(L_str)(L_del)});

L_numOffset = (function(){return resolve(L_matchOffset)(L_str)(L_num)});

L_del = (function(){return resolve(L_strMatch)(L_str)(L_pat)});

L_num = (function(){return resolve(L_strMatch)(L_str)(L_numberPat)});
return resolve(L_cons)(L_first)((function(){return resolve(L_basicSplitTokens)((function(){return resolve(L_strSubstring)(L_str)((function(){return resolve(L_strLen)(L_first)}))(lazy(0))}))(L_pat)((function(){return resolve(L_select)(L_true)(L_false)(L_false)}))}))})}}}}))},
  function(){return resolve(L_define)(lazy("tokens"))(lazy(2))(lazy("tokens str pat = makeTokens (splitTokens str pat) 0"))((function(){return function(L_str){return function(L_pat){return resolve(L_makeTokens)((function(){return resolve(L_splitTokens)(L_str)(L_pat)}))(lazy(0))}}}))},
  function(){return resolve(L_define)(lazy("isString"))(lazy(1))(lazy("isString s = == (getType s) '*string'"))((function(){return function(L_s){return resolve(L_$p$p)((function(){return resolve(L_getType)(L_s)}))(lazy("*string"))}}))},
  function(){return resolve(L_define)(lazy("isNumber"))(lazy(1))(lazy("isNumber s = == (getType s) '*number'"))((function(){return function(L_s){return resolve(L_$p$p)((function(){return resolve(L_getType)(L_s)}))(lazy("*number"))}}))},
  function(){return resolve(L_define)(lazy("isTokenString"))(lazy(2))(lazy("isTokenString tok str = or\n  and (isToken tok) (eq (tokenString tok) str)\n  and (isString tok) (eq tok str)"))((function(){return function(L_tok){return function(L_str){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_isToken)(L_tok)}))((function(){return resolve(L_eq)((function(){return resolve(L_tokenString)(L_tok)}))(L_str)}))}))((function(){return resolve(L_and)((function(){return resolve(L_isString)(L_tok)}))((function(){return resolve(L_eq)(L_tok)(L_str)}))}))}}}))},
  function(){return resolve(L_define)(lazy("isTokenStart"))(lazy(2))(lazy("isTokenStart tok str = or\n  and (isToken tok) (strStartsWith (tokenString tok) str)\n  and (isString tok) (strStartsWith tok str)"))((function(){return function(L_tok){return function(L_str){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_isToken)(L_tok)}))((function(){return resolve(L_strStartsWith)((function(){return resolve(L_tokenString)(L_tok)}))(L_str)}))}))((function(){return resolve(L_and)((function(){return resolve(L_isString)(L_tok)}))((function(){return resolve(L_strStartsWith)(L_tok)(L_str)}))}))}}}))},
  function(){return resolve(L_define)(lazy("strTokenString"))(lazy(1))(lazy("strTokenString tok = withToken tok nil \\str pos . str"))((function(){return function(L_tok){return resolve(L_withToken)(L_tok)(L_nil)((function(){return function(L_str){return function(L_pos){return resolve(L_str)}}}))}}))},
  function(){return resolve(L_define)(lazy("withToken"))(lazy(3))(lazy("withToken tok nonTokCase tokCase = isToken tok\n  tok tokCase\n  isString tok\n    tokCase tok -1\n    nonTokCase"))((function(){return function(L_tok){return function(L_nonTokCase){return function(L_tokCase){return resolve(L_isToken)(L_tok)((function(){return resolve(L_tok)(L_tokCase)}))((function(){return resolve(L_isString)(L_tok)((function(){return resolve(L_tokCase)(L_tok)(lazy(-1))}))(L_nonTokCase)}))}}}}))},
  function(){return resolve(L_define)(lazy("withCons"))(lazy(3))(lazy("withCons l nilCase cont = isCons l (l (\\h t D . cont h t) nilCase) nilCase"))((function(){return function(L_l){return function(L_nilCase){return function(L_cont){return resolve(L_isCons)(L_l)((function(){return resolve(L_l)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_cont)(L_h)(L_t)}}}}))(L_nilCase)}))(L_nilCase)}}}}))},
  function(){return resolve(L_define)(lazy("ifNotErr"))(lazy(2))(lazy("ifNotErr thing cont = hasType thing parseErr thing (cont thing)"))((function(){return function(L_thing){return function(L_cont){return resolve(L_hasType)(L_thing)(L_parseErr)(L_thing)((function(){return resolve(L_cont)(L_thing)}))}}}))},
  function(){return resolve(L_define)(lazy("parseToks"))(lazy(2))(lazy("parseToks toks groups =\n  isNil toks nil\n    ifNotErr (parseTok toks groups) \\list . list \\h t .\n      ifNotErr (parseToks t groups) \\res .\n        cons h\n          and (isCons res) (isBlockStart (head res))\n            cons res nil\n            res"))((function(){return function(L_toks){return function(L_groups){return resolve(L_isNil)(L_toks)(L_nil)((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_ifNotErr)((function(){return resolve(L_parseToks)(L_t)(L_groups)}))((function(){return function(L_res){return resolve(L_cons)(L_h)((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_res)}))((function(){return resolve(L_isBlockStart)((function(){return resolve(L_head)(L_res)}))}))((function(){return resolve(L_cons)(L_res)(L_nil)}))(L_res)}))}}))}}}))}}))}))}}}))},
  function(){return resolve(L_define)(lazy("parseTok"))(lazy(2))(lazy("parseTok toks groups = withCons toks nil \\h t .\n  withToken h toks \\txt pos .\n    assoc txt groups\n      \\close . parseGroup h t nil close groups\n      isTokenStart h '\\n' (parseIndent h t nil groups)\n        toks"))((function(){return function(L_toks){return function(L_groups){return resolve(L_withCons)(L_toks)(L_nil)((function(){return function(L_h){return function(L_t){return resolve(L_withToken)(L_h)(L_toks)((function(){return function(L_txt){return function(L_pos){return resolve(L_assoc)(L_txt)(L_groups)((function(){return function(L_close){return resolve(L_parseGroup)(L_h)(L_t)(L_nil)(L_close)(L_groups)}}))((function(){return resolve(L_isTokenStart)(L_h)(lazy("\n"))((function(){return resolve(L_parseIndent)(L_h)(L_t)(L_nil)(L_groups)}))(L_toks)}))}}}))}}}))}}}))},
  function(){return resolve(L_define)(lazy("parseGroup"))(lazy(5))(lazy("parseGroup left toks gr close groups = withCons toks (parseErr 'Unterminated group starting ' (loc left))\n  \\h t . isTokenString h close\n    eq close ')'\n      cons (parensFromToks left h (reverse gr)) t\n      cons (cons left (cons (reverse gr) (cons h nil))) t\n    withToken h\n      ifNotErr (parseTok toks groups) \\list . list \\restH restT .\n        parseGroup left restT (cons restH gr) close groups\n      \\txt pos .\n        rassoc txt groups\n          \\open . parseErr (strCat (cons 'Mismatched group: ' (cons (tokenString left) (cons txt (cons ' ' nil))))) (loc left)\n          ifNotErr (parseTok toks groups) \\list . list \\restH restT . parseGroup left restT (cons restH gr) close groups"))((function(){return function(L_left){return function(L_toks){return function(L_gr){return function(L_close){return function(L_groups){return resolve(L_withCons)(L_toks)((function(){return resolve(L_parseErr)(lazy("Unterminated group starting "))((function(){return resolve(L_loc)(L_left)}))}))((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(L_close)((function(){return resolve(L_eq)(L_close)(lazy(")"))((function(){return resolve(L_cons)((function(){return resolve(L_parensFromToks)(L_left)(L_h)((function(){return resolve(L_reverse)(L_gr)}))}))(L_t)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_left)((function(){return resolve(L_cons)((function(){return resolve(L_reverse)(L_gr)}))((function(){return resolve(L_cons)(L_h)(L_nil)}))}))}))(L_t)}))}))((function(){return resolve(L_withToken)(L_h)((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_restH){return function(L_restT){return resolve(L_parseGroup)(L_left)(L_restT)((function(){return resolve(L_cons)(L_restH)(L_gr)}))(L_close)(L_groups)}}}))}}))}))((function(){return function(L_txt){return function(L_pos){return resolve(L_rassoc)(L_txt)(L_groups)((function(){return function(L_open){return resolve(L_parseErr)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Mismatched group: "))((function(){return resolve(L_cons)((function(){return resolve(L_tokenString)(L_left)}))((function(){return resolve(L_cons)(L_txt)((function(){return resolve(L_cons)(lazy(" "))(L_nil)}))}))}))}))}))((function(){return resolve(L_loc)(L_left)}))}}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_restH){return function(L_restT){return resolve(L_parseGroup)(L_left)(L_restT)((function(){return resolve(L_cons)(L_restH)(L_gr)}))(L_close)(L_groups)}}}))}}))}))}}}))}))}}}))}}}}}}))},
  function(){return resolve(L_define)(lazy("parseIndent"))(lazy(4))(lazy("parseIndent indent toks gr groups =\n  withCons toks (cons (makeParens (tokenPos indent) (lexEnd (head gr)) (reverse gr)) nil)\n    \\h t . or (withToken h false (\\txt pos . rassoc txt groups (\\open . true) false))\n      and (isTokenStart h '\\n') (<= (strLen (tokenString h)) (strLen (tokenString indent)))\n      cons (makeParens (tokenPos indent) (tokenPos h) (reverse gr)) toks\n      ifNotErr (parseTok toks groups) \\list . list \\restH restT . parseIndent indent restT (cons restH gr) groups"))((function(){return function(L_indent){return function(L_toks){return function(L_gr){return function(L_groups){return resolve(L_withCons)(L_toks)((function(){return resolve(L_cons)((function(){return resolve(L_makeParens)((function(){return resolve(L_tokenPos)(L_indent)}))((function(){return resolve(L_lexEnd)((function(){return resolve(L_head)(L_gr)}))}))((function(){return resolve(L_reverse)(L_gr)}))}))(L_nil)}))((function(){return function(L_h){return function(L_t){return resolve(L_or)((function(){return resolve(L_withToken)(L_h)(L_false)((function(){return function(L_txt){return function(L_pos){return resolve(L_rassoc)(L_txt)(L_groups)((function(){return function(L_open){return resolve(L_true)}}))(L_false)}}}))}))((function(){return resolve(L_and)((function(){return resolve(L_isTokenStart)(L_h)(lazy("\n"))}))((function(){return resolve(L_$y$p)((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_h)}))}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_indent)}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_makeParens)((function(){return resolve(L_tokenPos)(L_indent)}))((function(){return resolve(L_tokenPos)(L_h)}))((function(){return resolve(L_reverse)(L_gr)}))}))(L_toks)}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseTok)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_restH){return function(L_restT){return resolve(L_parseIndent)(L_indent)(L_restT)((function(){return resolve(L_cons)(L_restH)(L_gr)}))(L_groups)}}}))}}))}))}}}))}}}}}))},
  function(){return resolve(L_define)(lazy("lit"))(lazy(1))(lazy("lit value = \\f . f value"))((function(){return setDataType(function(L_value){return setType(function(L_f){return resolve(L_f)(L_value)}, 'lit')}, 'lit')}))},
  function(){return resolve(L_define)(lazy("ref"))(lazy(1))(lazy("ref name = \\f . f name"))((function(){return setDataType(function(L_name){return setType(function(L_f){return resolve(L_f)(L_name)}, 'ref')}, 'ref')}))},
  function(){return resolve(L_define)(lazy("lambda"))(lazy(2))(lazy("lambda name body = \\f . f name body"))((function(){return setDataType(function(L_name){return function(L_body){return setType(function(L_f){return resolve(L_f)(L_name)(L_body)}, 'lambda')}}, 'lambda')}))},
  function(){return resolve(L_define)(lazy("apply"))(lazy(2))(lazy("apply func arg = \\f . f func arg"))((function(){return setDataType(function(L_func){return function(L_arg){return setType(function(L_f){return resolve(L_f)(L_func)(L_arg)}, 'apply')}}, 'apply')}))},
  function(){return resolve(L_define)(lazy("let"))(lazy(3))(lazy("let name value body = \\f . f name value body"))((function(){return setDataType(function(L_name){return function(L_value){return function(L_body){return setType(function(L_f){return resolve(L_f)(L_name)(L_value)(L_body)}, 'let')}}}, 'let')}))},
  function(){return resolve(L_define)(lazy("anno"))(lazy(3))(lazy("anno name data body = \\f . f name data body"))((function(){return setDataType(function(L_name){return function(L_data){return function(L_body){return setType(function(L_f){return resolve(L_f)(L_name)(L_data)(L_body)}, 'anno')}}}, 'anno')}))},
  function(){return resolve(L_define)(lazy("withParens"))(lazy(3))(lazy("withParens p err cont = isParens p (p cont) err"))((function(){return function(L_p){return function(L_err){return function(L_cont){return resolve(L_isParens)(L_p)((function(){return resolve(L_p)(L_cont)}))(L_err)}}}}))},
  function(){return resolve(L_define)(lazy("setParens"))(lazy(2))(lazy("setParens p func = isParens p\n  p \\start end content . parens start end (func content)\n  func p"))((function(){return function(L_p){return function(L_func){return resolve(L_isParens)(L_p)((function(){return resolve(L_p)((function(){return function(L_start){return function(L_end){return function(L_content){return resolve(L_parens)(L_start)(L_end)((function(){return resolve(L_func)(L_content)}))}}}}))}))((function(){return resolve(L_func)(L_p)}))}}}))},
  function(){return resolve(L_define)(lazy("withStripped"))(lazy(2))(lazy("withStripped list cont = withParens list (cont list) \\start end content . withStripped content cont"))((function(){return function(L_list){return function(L_cont){return resolve(L_withParens)(L_list)((function(){return resolve(L_cont)(L_list)}))((function(){return function(L_start){return function(L_end){return function(L_content){return resolve(L_withStripped)(L_content)(L_cont)}}}}))}}}))},
  function(){return resolve(L_define)(lazy("position"))(lazy(1))(lazy("position thing = isToken thing (tokenPos thing)\n  isParens thing (parensStart thing)\n    isCons thing (position (head thing))\n      -1"))((function(){return function(L_thing){return resolve(L_isToken)(L_thing)((function(){return resolve(L_tokenPos)(L_thing)}))((function(){return resolve(L_isParens)(L_thing)((function(){return resolve(L_parensStart)(L_thing)}))((function(){return resolve(L_isCons)(L_thing)((function(){return resolve(L_position)((function(){return resolve(L_head)(L_thing)}))}))(lazy(-1))}))}))}}))},
  function(){return resolve(L_define)(lazy("lexEnd"))(lazy(1))(lazy("lexEnd thing = isToken thing (+ (tokenPos thing) (strLen (tokenString thing)))\n  isParens thing (parensEnd thing)\n    isCons thing (lexEnd (last thing))\n      -1"))((function(){return function(L_thing){return resolve(L_isToken)(L_thing)((function(){return resolve(L_$o)((function(){return resolve(L_tokenPos)(L_thing)}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_thing)}))}))}))((function(){return resolve(L_isParens)(L_thing)((function(){return resolve(L_parensEnd)(L_thing)}))((function(){return resolve(L_isCons)(L_thing)((function(){return resolve(L_lexEnd)((function(){return resolve(L_last)(L_thing)}))}))(lazy(-1))}))}))}}))},
  function(){return resolve(L_define)(lazy("loc"))(lazy(1))(lazy("loc thing = \\\\\n  p = position thing\n  l = eq p -1 'an unknown location' p\n  .\n  strCat (cons 'at ' (cons l nil))"))((function(){return function(L_thing){return (function(){

var L_l, L_p;

L_l = (function(){return resolve(L_eq)(L_p)(lazy(-1))(lazy("an unknown location"))(L_p)});

L_p = (function(){return resolve(L_position)(L_thing)});
return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("at "))((function(){return resolve(L_cons)(L_l)(L_nil)}))}))})()}}))},
  function(){return resolve(L_define)(lazy("scrub"))(lazy(1))(lazy("scrub str = strFromList (scrubList (strToList str))"))((function(){return function(L_str){return resolve(L_strFromList)((function(){return resolve(L_scrubList)((function(){return resolve(L_strToList)(L_str)}))}))}}))},
  function(){return resolve(L_define)(lazy("scrubList"))(lazy(1))(lazy("scrubList list = list\n  \\h t D . \\\\\n    next = scrubList t\n    .\n    eq h '\\\\' (cons h (cons (head t) (scrubList (tail t))))\n      eq h '\\\"' (cons '\\\\' (cons '\\\"' next))\n        cons h next\n  nil"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return (function(){

var L_next;

L_next = (function(){return resolve(L_scrubList)(L_t)});
return resolve(L_eq)(L_h)(lazy("\\"))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)((function(){return resolve(L_head)(L_t)}))((function(){return resolve(L_scrubList)((function(){return resolve(L_tail)(L_t)}))}))}))}))((function(){return resolve(L_eq)(L_h)(lazy("\""))((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(lazy("\""))(L_next)}))}))((function(){return resolve(L_cons)(L_h)(L_next)}))}))})()}}}}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("createAst"))(lazy(2))(lazy("createAst inList names = withStripped inList \\list .\n  isToken list (createLitOrRef (tokenString list) names)\n    list\n      \\h t D .\n        isTokenString h '\\\\\\\\' (createLet h t names)\n          isTokenString h '\\\\@' (createAnno h t names)\n            isTokenString h '\\\\' (createLambda h t names)\n              createApply list names\n      nil"))((function(){return function(L_inList){return function(L_names){return resolve(L_withStripped)(L_inList)((function(){return function(L_list){return resolve(L_isToken)(L_list)((function(){return resolve(L_createLitOrRef)((function(){return resolve(L_tokenString)(L_list)}))(L_names)}))((function(){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("\\\\"))((function(){return resolve(L_createLet)(L_h)(L_t)(L_names)}))((function(){return resolve(L_isTokenString)(L_h)(lazy("\\@"))((function(){return resolve(L_createAnno)(L_h)(L_t)(L_names)}))((function(){return resolve(L_isTokenString)(L_h)(lazy("\\"))((function(){return resolve(L_createLambda)(L_h)(L_t)(L_names)}))((function(){return resolve(L_createApply)(L_list)(L_names)}))}))}))}}}}))(L_nil)}))}}))}}}))},
  function(){return resolve(L_define)(lazy("strMatches"))(lazy(2))(lazy("strMatches str pat = isCons (strMatch str pat)"))((function(){return function(L_str){return function(L_pat){return resolve(L_isCons)((function(){return resolve(L_strMatch)(L_str)(L_pat)}))}}}))},
  function(){return resolve(L_define)(lazy("digit"))(lazy(0))(lazy("digit = regexp '^[0-9]+$'"))((function(){return resolve(L_regexp)(lazy("^[0-9]+$"))}))},
  function(){return resolve(L_define)(lazy("backslashCodes"))(lazy(0))(lazy("backslashCodes = 'bfnrt'"))(lazy("bfnrt"))},
  function(){return resolve(L_define)(lazy("backslashValues"))(lazy(0))(lazy("backslashValues = '\\b\\f\\n\\r\\t'"))(lazy("\b\f\n\r\t"))},
  function(){return resolve(L_define)(lazy("convertStringEscape"))(lazy(3))(lazy("convertStringEscape char codes values =\n  eq codes ''\n    char\n    eq char (strAt codes 0)\n      strAt values 0\n      convertStringEscape char (strSubstring codes 1 0) (strSubstring values 1 0)"))((function(){return function(L_char){return function(L_codes){return function(L_values){return resolve(L_eq)(L_codes)(lazy(""))(L_char)((function(){return resolve(L_eq)(L_char)((function(){return resolve(L_strAt)(L_codes)(lazy(0))}))((function(){return resolve(L_strAt)(L_values)(lazy(0))}))((function(){return resolve(L_convertStringEscape)(L_char)((function(){return resolve(L_strSubstring)(L_codes)(lazy(1))(lazy(0))}))((function(){return resolve(L_strSubstring)(L_values)(lazy(1))(lazy(0))}))}))}))}}}}))},
  function(){return resolve(L_define)(lazy("convertStringEscapes"))(lazy(3))(lazy("convertStringEscapes orig str cont =\n  eq str ''\n    cont str\n    eq (strAt str 0) '\\\\'\n      eq (strLen str) 1 (parseErr \"Error, backslash without character in string: \" orig)\n        convertStringEscapes orig (strSubstring str 2 0) \\rest . cont\n          strAdd\n            convertStringEscape (strAt str 1) backslashCodes backslashValues\n            rest\n      convertStringEscapes orig (strSubstring str 1 0) \\rest . cont\n        strAdd\n          strAt str 0\n          rest"))((function(){return function(L_orig){return function(L_str){return function(L_cont){return resolve(L_eq)(L_str)(lazy(""))((function(){return resolve(L_cont)(L_str)}))((function(){return resolve(L_eq)((function(){return resolve(L_strAt)(L_str)(lazy(0))}))(lazy("\\"))((function(){return resolve(L_eq)((function(){return resolve(L_strLen)(L_str)}))(lazy(1))((function(){return resolve(L_parseErr)(lazy("Error, backslash without character in string: "))(L_orig)}))((function(){return resolve(L_convertStringEscapes)(L_orig)((function(){return resolve(L_strSubstring)(L_str)(lazy(2))(lazy(0))}))((function(){return function(L_rest){return resolve(L_cont)((function(){return resolve(L_strAdd)((function(){return resolve(L_convertStringEscape)((function(){return resolve(L_strAt)(L_str)(lazy(1))}))(L_backslashCodes)(L_backslashValues)}))(L_rest)}))}}))}))}))((function(){return resolve(L_convertStringEscapes)(L_orig)((function(){return resolve(L_strSubstring)(L_str)(lazy(1))(lazy(0))}))((function(){return function(L_rest){return resolve(L_cont)((function(){return resolve(L_strAdd)((function(){return resolve(L_strAt)(L_str)(lazy(0))}))(L_rest)}))}}))}))}))}}}}))},
  function(){return resolve(L_define)(lazy("parseString"))(lazy(2))(lazy("parseString str cont =\n  neq (strAt str 0) (strAt str -1) (parseErr \"Badly terminated string: \" str)\n    convertStringEscapes str (strSubstring str 1 -1) cont"))((function(){return function(L_str){return function(L_cont){return resolve(L_neq)((function(){return resolve(L_strAt)(L_str)(lazy(0))}))((function(){return resolve(L_strAt)(L_str)(lazy(-1))}))((function(){return resolve(L_parseErr)(lazy("Badly terminated string: "))(L_str)}))((function(){return resolve(L_convertStringEscapes)(L_str)((function(){return resolve(L_strSubstring)(L_str)(lazy(1))(lazy(-1))}))(L_cont)}))}}}))},
  function(){return resolve(L_define)(lazy("createLitOrRef"))(lazy(2))(lazy("createLitOrRef tok names =\n  contains names tok\n    ref tok\n    or (strStartsWith tok '\\\"') (strStartsWith tok \"'\")\n      parseString tok \\str . lit str\n      strStartsWith tok '.'\n        jsonParse (strCat (cons '0' (cons tok nil))) (\\err . ref tok) (\\item . lit item)\n        or (and (>= (strAt tok 0) '0') (<= (strAt tok 0) '9')) (strStartsWith tok '-')\n          jsonParse tok (\\err . ref tok) (\\item . lit item)\n          ref tok"))((function(){return function(L_tok){return function(L_names){return resolve(L_contains)(L_names)(L_tok)((function(){return resolve(L_ref)(L_tok)}))((function(){return resolve(L_or)((function(){return resolve(L_strStartsWith)(L_tok)(lazy("\""))}))((function(){return resolve(L_strStartsWith)(L_tok)(lazy("'"))}))((function(){return resolve(L_parseString)(L_tok)((function(){return function(L_str){return resolve(L_lit)(L_str)}}))}))((function(){return resolve(L_strStartsWith)(L_tok)(lazy("."))((function(){return resolve(L_jsonParse)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("0"))((function(){return resolve(L_cons)(L_tok)(L_nil)}))}))}))((function(){return function(L_err){return resolve(L_ref)(L_tok)}}))((function(){return function(L_item){return resolve(L_lit)(L_item)}}))}))((function(){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_$z$p)((function(){return resolve(L_strAt)(L_tok)(lazy(0))}))(lazy("0"))}))((function(){return resolve(L_$y$p)((function(){return resolve(L_strAt)(L_tok)(lazy(0))}))(lazy("9"))}))}))((function(){return resolve(L_strStartsWith)(L_tok)(lazy("-"))}))((function(){return resolve(L_jsonParse)(L_tok)((function(){return function(L_err){return resolve(L_ref)(L_tok)}}))((function(){return function(L_item){return resolve(L_lit)(L_item)}}))}))((function(){return resolve(L_ref)(L_tok)}))}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("createLambda"))(lazy(3))(lazy("createLambda start list names = \\\\\n  err = parseErr \"Lambda needs a variable name, a dot, and a body \" (loc start)\n  .\n  withCons list err \\name rest .\n    withToken name err \\n p .\n      withCons rest err \\dot body .\n        # are these partial applications too hard to read?\n        isTokenString dot '.'\n          ifNotErr (createAst body (cons n names)) \\bodyAst . lambda n bodyAst\n          ifNotErr (createLambda start rest (cons n names)) \\bodyAst . lambda n bodyAst"))((function(){return function(L_start){return function(L_list){return function(L_names){return (function(){

var L_err;

L_err = (function(){return resolve(L_parseErr)(lazy("Lambda needs a variable name, a dot, and a body "))((function(){return resolve(L_loc)(L_start)}))});
return resolve(L_withCons)(L_list)(L_err)((function(){return function(L_name){return function(L_rest){return resolve(L_withToken)(L_name)(L_err)((function(){return function(L_n){return function(L_p){return resolve(L_withCons)(L_rest)(L_err)((function(){return function(L_dot){return function(L_body){return resolve(L_isTokenString)(L_dot)(lazy("."))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_body)((function(){return resolve(L_cons)(L_n)(L_names)}))}))((function(){return function(L_bodyAst){return resolve(L_lambda)(L_n)(L_bodyAst)}}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createLambda)(L_start)(L_rest)((function(){return resolve(L_cons)(L_n)(L_names)}))}))((function(){return function(L_bodyAst){return resolve(L_lambda)(L_n)(L_bodyAst)}}))}))}}}))}}}))}}}))})()}}}}))},
  function(){return resolve(L_define)(lazy("createAnno"))(lazy(3))(lazy("createAnno start list names =\n  withCons list (parseErr \"No annotation name or data in annotation \" (loc start)) \\name rest .\n    withCons rest (parseErr \"No data for annotation \" (loc start)) \\data rest . \\\\\n      finish data body = ifNotErr (createAst body names) \\bodyAst .\n        cleanTokens start name \\name .\n          cleanTokens start data \\data .\n            anno name data bodyAst\n      .\n      isTokenString data '.'\n        finish nil rest\n        withStripped data \\data .\n          withCons rest (parseErr \"No body for annotation \" (loc start)) \\dot body .\n            isTokenString dot '.'\n              finish data body\n              parseErr \"Annotation expects dot after name and data \" (loc start)"))((function(){return function(L_start){return function(L_list){return function(L_names){return resolve(L_withCons)(L_list)((function(){return resolve(L_parseErr)(lazy("No annotation name or data in annotation "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_name){return function(L_rest){return resolve(L_withCons)(L_rest)((function(){return resolve(L_parseErr)(lazy("No data for annotation "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_data){return function(L_rest_0){return (function(){

var L_finish;

L_finish = (function(){return function(L_data_1){return function(L_body){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_body)(L_names)}))((function(){return function(L_bodyAst){return resolve(L_cleanTokens)(L_start)(L_name)((function(){return function(L_name_2){return resolve(L_cleanTokens)(L_start)(L_data_1)((function(){return function(L_data_3){return resolve(L_anno)(L_name_2)(L_data_3)(L_bodyAst)}}))}}))}}))}}});
return resolve(L_isTokenString)(L_data)(lazy("."))((function(){return resolve(L_finish)(L_nil)(L_rest_0)}))((function(){return resolve(L_withStripped)(L_data)((function(){return function(L_data_1){return resolve(L_withCons)(L_rest_0)((function(){return resolve(L_parseErr)(lazy("No body for annotation "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_dot){return function(L_body){return resolve(L_isTokenString)(L_dot)(lazy("."))((function(){return resolve(L_finish)(L_data_1)(L_body)}))((function(){return resolve(L_parseErr)(lazy("Annotation expects dot after name and data "))((function(){return resolve(L_loc)(L_start)}))}))}}}))}}))}))})()}}}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("bodyStructPat"))(lazy(0))(lazy("bodyStructPat = regexp '\\\\|\\\\\\\\|\\\\@'"))((function(){return resolve(L_regexp)(lazy("\\|\\\\|\\@"))}))},
  function(){return resolve(L_define)(lazy("createApply"))(lazy(2))(lazy("createApply inList names = withStripped inList \\list .\n  withCons list (parseErr \"Funcion apply expecting a non-empty list \" (loc inList)) \\h t .\n    ifNotErr (createAst h names) \\func . chainApply func t names"))((function(){return function(L_inList){return function(L_names){return resolve(L_withStripped)(L_inList)((function(){return function(L_list){return resolve(L_withCons)(L_list)((function(){return resolve(L_parseErr)(lazy("Funcion apply expecting a non-empty list "))((function(){return resolve(L_loc)(L_inList)}))}))((function(){return function(L_h){return function(L_t){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_h)(L_names)}))((function(){return function(L_func){return resolve(L_chainApply)(L_func)(L_t)(L_names)}}))}}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("blockStarts"))(lazy(0))(lazy("blockStarts = cons '\\\\' (cons '\\\\\\\\' (cons '\\\\@' nil))"))((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(lazy("\\\\"))((function(){return resolve(L_cons)(lazy("\\@"))(L_nil)}))}))}))},
  function(){return resolve(L_define)(lazy("chainApply"))(lazy(3))(lazy("chainApply func list names = withCons list func \\argItem rest .\n  and (isToken argItem) (contains blockStarts (tokenString argItem))\n    ifNotErr (createAst list names) \\arg . apply func arg\n    ifNotErr (createAst argItem names) \\arg . chainApply (apply func arg) rest names"))((function(){return function(L_func){return function(L_list){return function(L_names){return resolve(L_withCons)(L_list)(L_func)((function(){return function(L_argItem){return function(L_rest){return resolve(L_and)((function(){return resolve(L_isToken)(L_argItem)}))((function(){return resolve(L_contains)(L_blockStarts)((function(){return resolve(L_tokenString)(L_argItem)}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_list)(L_names)}))((function(){return function(L_arg){return resolve(L_apply)(L_func)(L_arg)}}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_argItem)(L_names)}))((function(){return function(L_arg){return resolve(L_chainApply)((function(){return resolve(L_apply)(L_func)(L_arg)}))(L_rest)(L_names)}}))}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("cleanTokens"))(lazy(3))(lazy("cleanTokens start toks cont = isToken toks\n  cont (tokenString toks)\n  withCons toks (cont toks) \\head tail .\n    cleanTokens start head \\head .\n      cleanTokens start tail \\tail .\n        cont (cons head tail)"))((function(){return function(L_start){return function(L_toks){return function(L_cont){return resolve(L_isToken)(L_toks)((function(){return resolve(L_cont)((function(){return resolve(L_tokenString)(L_toks)}))}))((function(){return resolve(L_withCons)(L_toks)((function(){return resolve(L_cont)(L_toks)}))((function(){return function(L_head){return function(L_tail){return resolve(L_cleanTokens)(L_start)(L_head)((function(){return function(L_head_0){return resolve(L_cleanTokens)(L_start)(L_tail)((function(){return function(L_tail_1){return resolve(L_cont)((function(){return resolve(L_cons)(L_head_0)(L_tail_1)}))}}))}}))}}}))}))}}}}))},
  function(){return resolve(L_define)(lazy("createLet"))(lazy(3))(lazy("createLet start list names = withCons list\n  parseErr \"No variable or body for let \" (loc start)\n  \\binding body . eq body nil (createAst binding name)\n    getLetNames start list names \\newNames .\n      createSublets start binding body newNames id"))((function(){return function(L_start){return function(L_list){return function(L_names){return resolve(L_withCons)(L_list)((function(){return resolve(L_parseErr)(lazy("No variable or body for let "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_binding){return function(L_body){return resolve(L_eq)(L_body)(L_nil)((function(){return resolve(L_createAst)(L_binding)(L_name)}))((function(){return resolve(L_getLetNames)(L_start)(L_list)(L_names)((function(){return function(L_newNames){return resolve(L_createSublets)(L_start)(L_binding)(L_body)(L_newNames)(L_id)}}))}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("getLetNames"))(lazy(4))(lazy("getLetNames start list names cont = \\\\\n  err = parseErr \"Let expected binding \" (loc start)\n  .\n  withCons list (cont names) \\binding body .\n    isTokenString binding '.' (cont names)\n      withParens binding err \\start end def .\n        withCons def err \\name rest .\n          withToken name err \\str pos .\n            getLetNames start body (cons str names) cont"))((function(){return function(L_start){return function(L_list){return function(L_names){return function(L_cont){return (function(){

var L_err;

L_err = (function(){return resolve(L_parseErr)(lazy("Let expected binding "))((function(){return resolve(L_loc)(L_start)}))});
return resolve(L_withCons)(L_list)((function(){return resolve(L_cont)(L_names)}))((function(){return function(L_binding){return function(L_body){return resolve(L_isTokenString)(L_binding)(lazy("."))((function(){return resolve(L_cont)(L_names)}))((function(){return resolve(L_withParens)(L_binding)(L_err)((function(){return function(L_start_0){return function(L_end){return function(L_def){return resolve(L_withCons)(L_def)(L_err)((function(){return function(L_name){return function(L_rest){return resolve(L_withToken)(L_name)(L_err)((function(){return function(L_str){return function(L_pos){return resolve(L_getLetNames)(L_start_0)(L_body)((function(){return resolve(L_cons)(L_str)(L_names)}))(L_cont)}}}))}}}))}}}}))}))}}}))})()}}}}}))},
  function(){return resolve(L_define)(lazy("createSublets"))(lazy(5))(lazy("createSublets start binding body names cont =\n  isTokenString binding '.' (ifNotErr (createAst body names) cont)\n    withCons body (parseErr \"Let expected a body \" (loc start)) \\bodyH bodyT .\n      getNameAndDef (parensStart binding) (parensContent binding) names \\name def .\n        createSublets start bodyH bodyT names \\bodyAst .\n          cont (let (tokenString name) def bodyAst)"))((function(){return function(L_start){return function(L_binding){return function(L_body){return function(L_names){return function(L_cont){return resolve(L_isTokenString)(L_binding)(lazy("."))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_body)(L_names)}))(L_cont)}))((function(){return resolve(L_withCons)(L_body)((function(){return resolve(L_parseErr)(lazy("Let expected a body "))((function(){return resolve(L_loc)(L_start)}))}))((function(){return function(L_bodyH){return function(L_bodyT){return resolve(L_getNameAndDef)((function(){return resolve(L_parensStart)(L_binding)}))((function(){return resolve(L_parensContent)(L_binding)}))(L_names)((function(){return function(L_name){return function(L_def){return resolve(L_createSublets)(L_start)(L_bodyH)(L_bodyT)(L_names)((function(){return function(L_bodyAst){return resolve(L_cont)((function(){return resolve(L_let)((function(){return resolve(L_tokenString)(L_name)}))(L_def)(L_bodyAst)}))}}))}}}))}}}))}))}}}}}}))},
  function(){return resolve(L_define)(lazy("getNameAndDef"))(lazy(4))(lazy("getNameAndDef pos binding names cont =\n  withCons (tail binding) (parseErr \"Let expected binding at \" pos) \\snd sndT .\n    isTokenString snd '=' (ifNotErr (createAst sndT names) \\def . cont (head binding) def)\n      getLetLambda pos (tail binding) nil names \\lamb . cont (head binding) lamb"))((function(){return function(L_pos){return function(L_binding){return function(L_names){return function(L_cont){return resolve(L_withCons)((function(){return resolve(L_tail)(L_binding)}))((function(){return resolve(L_parseErr)(lazy("Let expected binding at "))(L_pos)}))((function(){return function(L_snd){return function(L_sndT){return resolve(L_isTokenString)(L_snd)(lazy("="))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_sndT)(L_names)}))((function(){return function(L_def){return resolve(L_cont)((function(){return resolve(L_head)(L_binding)}))(L_def)}}))}))((function(){return resolve(L_getLetLambda)(L_pos)((function(){return resolve(L_tail)(L_binding)}))(L_nil)(L_names)((function(){return function(L_lamb){return resolve(L_cont)((function(){return resolve(L_head)(L_binding)}))(L_lamb)}}))}))}}}))}}}}}))},
  function(){return resolve(L_define)(lazy("getLetLambda"))(lazy(5))(lazy("getLetLambda pos def args names cont =\n  withCons def (parseErr \"Let expected binding at \" pos) \\arg rest .\n    not (isToken arg) (parseErr \"Let expected binding at \" pos)\n      isTokenString arg '='\n        ifNotErr (createAst (cons (token '\\\\' pos) (append (reverse args) (cons (token '.' (position arg)) rest))) names) cont\n        getLetLambda pos rest (cons arg args) names cont"))((function(){return function(L_pos){return function(L_def){return function(L_args){return function(L_names){return function(L_cont){return resolve(L_withCons)(L_def)((function(){return resolve(L_parseErr)(lazy("Let expected binding at "))(L_pos)}))((function(){return function(L_arg){return function(L_rest){return resolve(L_not)((function(){return resolve(L_isToken)(L_arg)}))((function(){return resolve(L_parseErr)(lazy("Let expected binding at "))(L_pos)}))((function(){return resolve(L_isTokenString)(L_arg)(lazy("="))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("\\"))(L_pos)}))((function(){return resolve(L_append)((function(){return resolve(L_reverse)(L_args)}))((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("."))((function(){return resolve(L_position)(L_arg)}))}))(L_rest)}))}))}))(L_names)}))(L_cont)}))((function(){return resolve(L_getLetLambda)(L_pos)(L_rest)((function(){return resolve(L_cons)(L_arg)(L_args)}))(L_names)(L_cont)}))}))}}}))}}}}}}))},
  function(){return resolve(L_define)(lazy("scanLineG"))(lazy(5))(lazy("scanLineG str pat groups onDef onExpr = \\\\\n  toks = tokens str pat\n  groupToks = foldr (\\el value . el \\h t . cons h (cons t value)) (cons '=' blockStarts) groups\n  .\n  # check if it's a definition\n  find (\\tok . or (contains groupToks (tokenString tok)) (isCons (strMatch (tokenString tok) '^\\n'))) toks (\\item . isTokenString item '=') false\n    toks \\name rest . \\\\\n      parseIt func = \\\\\n        parsed = parseToks (checkSetDataType func rest name) groups\n        .\n        onDef (ifNotErr parsed \\list . createDef list name (arity rest 0) str)\n      .\n      isTokenString (head rest) '='\n        isTokenString (head (tail rest)) '\\\\'\n          parseIt (setTypeAnno (tail rest) (tokenString name))\n          parseIt (tail rest)\n        transformDef name rest \\def .\n          parseIt (cons (token '\\\\' (- (position (head rest)) 1)) def)\n    ifNotErr (parseToks toks groups) \\list . onExpr list"))((function(){return function(L_str){return function(L_pat){return function(L_groups){return function(L_onDef){return function(L_onExpr){return (function(){

var L_groupToks, L_toks;

L_groupToks = (function(){return resolve(L_foldr)((function(){return function(L_el){return function(L_value){return resolve(L_el)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)(L_t)(L_value)}))}}}))}}}))((function(){return resolve(L_cons)(lazy("="))(L_blockStarts)}))(L_groups)});

L_toks = (function(){return resolve(L_tokens)(L_str)(L_pat)});
return resolve(L_find)((function(){return function(L_tok){return resolve(L_or)((function(){return resolve(L_contains)(L_groupToks)((function(){return resolve(L_tokenString)(L_tok)}))}))((function(){return resolve(L_isCons)((function(){return resolve(L_strMatch)((function(){return resolve(L_tokenString)(L_tok)}))(lazy("^\n"))}))}))}}))(L_toks)((function(){return function(L_item){return resolve(L_isTokenString)(L_item)(lazy("="))}}))(L_false)((function(){return resolve(L_toks)((function(){return function(L_name){return function(L_rest){return (function(){

var L_parseIt;

L_parseIt = (function(){return function(L_func){return (function(){

var L_parsed;

L_parsed = (function(){return resolve(L_parseToks)((function(){return resolve(L_checkSetDataType)(L_func)(L_rest)(L_name)}))(L_groups)});
return resolve(L_onDef)((function(){return resolve(L_ifNotErr)(L_parsed)((function(){return function(L_list){return resolve(L_createDef)(L_list)(L_name)((function(){return resolve(L_arity)(L_rest)(lazy(0))}))(L_str)}}))}))})()}});
return resolve(L_isTokenString)((function(){return resolve(L_head)(L_rest)}))(lazy("="))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_rest)}))}))(lazy("\\"))((function(){return resolve(L_parseIt)((function(){return resolve(L_setTypeAnno)((function(){return resolve(L_tail)(L_rest)}))((function(){return resolve(L_tokenString)(L_name)}))}))}))((function(){return resolve(L_parseIt)((function(){return resolve(L_tail)(L_rest)}))}))}))((function(){return resolve(L_transformDef)(L_name)(L_rest)((function(){return function(L_def){return resolve(L_parseIt)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("\\"))((function(){return resolve(L_$_)((function(){return resolve(L_position)((function(){return resolve(L_head)(L_rest)}))}))(lazy(1))}))}))(L_def)}))}}))}))})()}}}))}))((function(){return resolve(L_ifNotErr)((function(){return resolve(L_parseToks)(L_toks)(L_groups)}))((function(){return function(L_list){return resolve(L_onExpr)(L_list)}}))}))})()}}}}}}))},
  function(){return resolve(L_define)(lazy("parseLineG"))(lazy(6))(lazy("parseLineG str pat names groups onDef onExpr = \\\\\n  astCallback cb = \\list . ifNotErr (createAst list names) \\ast . cb ast\n  .\n  scanLineG str pat groups (astCallback onDef) (astCallback onExpr)"))((function(){return function(L_str){return function(L_pat){return function(L_names){return function(L_groups){return function(L_onDef){return function(L_onExpr){return (function(){

var L_astCallback;

L_astCallback = (function(){return function(L_cb){return function(L_list){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_list)(L_names)}))((function(){return function(L_ast){return resolve(L_cb)(L_ast)}}))}}});
return resolve(L_scanLineG)(L_str)(L_pat)(L_groups)((function(){return resolve(L_astCallback)(L_onDef)}))((function(){return resolve(L_astCallback)(L_onExpr)}))})()}}}}}}}))},
  function(){return resolve(L_define)(lazy("transformDef"))(lazy(3))(lazy("transformDef name toks cont = withCons toks (parseErr \"Bad definition, expecting tokens\" (loc name)) \\h t .\n  isTokenString h '='\n    isTokenString (head t) '\\\\'\n      cont (cons (token '.' (position h)) (setTypeAnno t (tokenString name)))\n      cont (cons (token '.' (position h)) t)\n    transformDef name t \\list . cont (cons h list)"))((function(){return function(L_name){return function(L_toks){return function(L_cont){return resolve(L_withCons)(L_toks)((function(){return resolve(L_parseErr)(lazy("Bad definition, expecting tokens"))((function(){return resolve(L_loc)(L_name)}))}))((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_t)}))(lazy("\\"))((function(){return resolve(L_cont)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("."))((function(){return resolve(L_position)(L_h)}))}))((function(){return resolve(L_setTypeAnno)(L_t)((function(){return resolve(L_tokenString)(L_name)}))}))}))}))((function(){return resolve(L_cont)((function(){return resolve(L_cons)((function(){return resolve(L_token)(lazy("."))((function(){return resolve(L_position)(L_h)}))}))(L_t)}))}))}))((function(){return resolve(L_transformDef)(L_name)(L_t)((function(){return function(L_list){return resolve(L_cont)((function(){return resolve(L_cons)(L_h)(L_list)}))}}))}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("setTypeAnno"))(lazy(2))(lazy("setTypeAnno toks name = \\\\\n  tok = \\str . token str (position toks)\n  .\n  cons (tok '\\\\@') (cons (tok 'type') (cons (tok name) (cons (tok '.') toks)))"))((function(){return function(L_toks){return function(L_name){return (function(){

var L_tok;

L_tok = (function(){return function(L_str){return resolve(L_token)(L_str)((function(){return resolve(L_position)(L_toks)}))}});
return resolve(L_cons)((function(){return resolve(L_tok)(lazy("\\@"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("type"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_name)}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("."))}))(L_toks)}))}))}))})()}}}))},
  function(){return resolve(L_define)(lazy("setDataTypeAnno"))(lazy(2))(lazy("setDataTypeAnno toks name = \\\\\n  tok = \\str . token str (position toks)\n  .\n  cons (tok '\\\\@') (cons (tok 'dataType') (cons (tok (tokenString name)) (cons (tok '.') toks)))"))((function(){return function(L_toks){return function(L_name){return (function(){

var L_tok;

L_tok = (function(){return function(L_str){return resolve(L_token)(L_str)((function(){return resolve(L_position)(L_toks)}))}});
return resolve(L_cons)((function(){return resolve(L_tok)(lazy("\\@"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("dataType"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)((function(){return resolve(L_tokenString)(L_name)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("."))}))(L_toks)}))}))}))})()}}}))},
  function(){return resolve(L_define)(lazy("createDef"))(lazy(4))(lazy("createDef def name arity src = \\\\\n  tok str = token str (position def)\n  .\n  jsonStringify (tokenString name) (\\err . parseErr (strCat (cons \"Bad function name \" (cons (loc name) nil))) err) \\nameStr .\n    jsonStringify src (\\err . parseErr (strCat (cons \"Bad source \" (cons (loc name) nil))) err) \\srcStr .\n      #cons (tok 'define') (cons (tok nameStr) (cons (tok (strString arity)) (cons (tok srcStr) (cons def nil))))\n      cons (tok '\\\\@') (cons (cons (tok 'definition') (cons (tok name) nil)) (cons (tok '.') (cons (tok 'define') (cons (tok nameStr) (cons (tok (strString arity)) (cons (tok srcStr) (cons def nil)))))))"))((function(){return function(L_def){return function(L_name){return function(L_arity){return function(L_src){return (function(){

var L_tok;

L_tok = (function(){return function(L_str){return resolve(L_token)(L_str)((function(){return resolve(L_position)(L_def)}))}});
return resolve(L_jsonStringify)((function(){return resolve(L_tokenString)(L_name)}))((function(){return function(L_err){return resolve(L_parseErr)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Bad function name "))((function(){return resolve(L_cons)((function(){return resolve(L_loc)(L_name)}))(L_nil)}))}))}))(L_err)}}))((function(){return function(L_nameStr){return resolve(L_jsonStringify)(L_src)((function(){return function(L_err){return resolve(L_parseErr)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("Bad source "))((function(){return resolve(L_cons)((function(){return resolve(L_loc)(L_name)}))(L_nil)}))}))}))(L_err)}}))((function(){return function(L_srcStr){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("\\@"))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("definition"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_name)}))(L_nil)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("."))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(lazy("define"))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_nameStr)}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)((function(){return resolve(L_strString)(L_arity)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_tok)(L_srcStr)}))((function(){return resolve(L_cons)(L_def)(L_nil)}))}))}))}))}))}))}))}}))}}))})()}}}}}))},
  function(){return resolve(L_define)(lazy("checkSetDataType"))(lazy(3))(lazy("checkSetDataType toks curToks name = withCons curToks toks \\h t .\n  isTokenString h '='\n    isTokenString (head t) '\\\\'\n      setDataTypeAnno toks name\n      toks\n    checkSetDataType toks t name"))((function(){return function(L_toks){return function(L_curToks){return function(L_name){return resolve(L_withCons)(L_curToks)(L_toks)((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_t)}))(lazy("\\"))((function(){return resolve(L_setDataTypeAnno)(L_toks)(L_name)}))(L_toks)}))((function(){return resolve(L_checkSetDataType)(L_toks)(L_t)(L_name)}))}}}))}}}}))},
  function(){return resolve(L_define)(lazy("arity"))(lazy(2))(lazy("arity toks n = isTokenString (head toks) '=' n (arity (tail toks) (+ n 1))"))((function(){return function(L_toks){return function(L_n){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_toks)}))(lazy("="))(L_n)((function(){return resolve(L_arity)((function(){return resolve(L_tail)(L_toks)}))((function(){return resolve(L_$o)(L_n)(lazy(1))}))}))}}}))},
  function(){return resolve(L_define)(lazy("tokListStr"))(lazy(1))(lazy("tokListStr toks = jsonStringify (join (map (\\t . tokenString t) toks) ' ')"))((function(){return function(L_toks){return resolve(L_jsonStringify)((function(){return resolve(L_join)((function(){return resolve(L_map)((function(){return function(L_t){return resolve(L_tokenString)(L_t)}}))(L_toks)}))(lazy(" "))}))}}))},
  function(){return resolve(L_define)(lazy("linePat"))(lazy(0))(lazy("linePat = regexp '\\\\r?\\\\n(?=[^ ]|$)'"))((function(){return resolve(L_regexp)(lazy("\\r?\\n(?=[^ ]|$)"))}))},
  function(){return resolve(L_define)(lazy("emptyLinePat"))(lazy(0))(lazy("emptyLinePat = regexp '(^[ \\\\i]*\\\\#.*|^[ \\\\i]*$|^\\\\r?\\\\n[ \\\\i]*$)'"))((function(){return resolve(L_regexp)(lazy("(^[ \\i]*\\#.*|^[ \\i]*$|^\\r?\\n[ \\i]*$)"))}))},
  function(){return resolve(L_define)(lazy("lineScrub"))(lazy(0))(lazy("lineScrub = regexpFlags '\\\\r\\\\n' 'g'"))((function(){return resolve(L_regexpFlags)(lazy("\\r\\n"))(lazy("g"))}))},
  function(){return resolve(L_define)(lazy("linesForFile"))(lazy(1))(lazy("linesForFile text = filter\n  \\line . isNil (strMatch line emptyLinePat)\n  strSplit (strReplace text lineScrub '\\n') linePat"))((function(){return function(L_text){return resolve(L_filter)((function(){return function(L_line){return resolve(L_isNil)((function(){return resolve(L_strMatch)(L_line)(L_emptyLinePat)}))}}))((function(){return resolve(L_strSplit)((function(){return resolve(L_strReplace)(L_text)(L_lineScrub)(lazy("\n"))}))(L_linePat)}))}}))},
  function(){return resolve(L_define)(lazy("defPat"))(lazy(0))(lazy("defPat = regexp '^[^ =]+.* =( |$)'"))((function(){return resolve(L_regexp)(lazy("^[^ =]+.* =( |$)"))}))},
  function(){return resolve(L_define)(lazy("unanchoredDefPat"))(lazy(0))(lazy("unanchoredDefPat = regexp '^((?:\\\\s*\\\\n|#[^\\\\n]*\\\\n)*)([^=\\\\n]*)(=\\\\([^=]+=|=)?'"))((function(){return resolve(L_regexp)(lazy("^((?:\\s*\\n|#[^\\n]*\\n)*)([^=\\n]*)(=\\([^=]+=|=)?"))}))},
  function(){return resolve(L_define)(lazy("namesForLines"))(lazy(1))(lazy("namesForLines lines = foldl\n  \\result line . \\\\\n    m = strMatch line defPat\n    .\n    isNil m result (cons (head (tail m)) result)\n  nil\n  lines"))((function(){return function(L_lines){return resolve(L_foldl)((function(){return function(L_result){return function(L_line){return (function(){

var L_m;

L_m = (function(){return resolve(L_strMatch)(L_line)(L_defPat)});
return resolve(L_isNil)(L_m)(L_result)((function(){return resolve(L_cons)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_m)}))}))(L_result)}))})()}}}))(L_nil)(L_lines)}}))},
  function(){return resolve(L_define)(lazy("runParseFilters"))(lazy(2))(lazy("runParseFilters filters line = filters\n  \\h t D . bind (h line) \\filtered . runParseFilters t filtered\n  line"))((function(){return function(L_filters){return function(L_line){return resolve(L_filters)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_bind)((function(){return resolve(L_h)(L_line)}))((function(){return function(L_filtered){return resolve(L_runParseFilters)(L_t)(L_filtered)}}))}}}}))(L_line)}}}))},
  function(){return resolve(L_define)(lazy("isBlockStart"))(lazy(1))(lazy("isBlockStart tok = and\n  or (isToken tok) (isString tok)\n  contains blockStarts (strTokenString tok)"))((function(){return function(L_tok){return resolve(L_and)((function(){return resolve(L_or)((function(){return resolve(L_isToken)(L_tok)}))((function(){return resolve(L_isString)(L_tok)}))}))((function(){return resolve(L_contains)(L_blockStarts)((function(){return resolve(L_strTokenString)(L_tok)}))}))}}))},
  function(){return resolve(L_define)(lazy("macroSub"))(lazy(2))(lazy("macroSub macs expr = postProcessMacro -1 -1 (baseMacroSub macs expr)"))((function(){return function(L_macs){return function(L_expr){return resolve(L_postProcessMacro)(lazy(-1))(lazy(-1))((function(){return resolve(L_baseMacroSub)(L_macs)(L_expr)}))}}}))},
  function(){return resolve(L_define)(lazy("consifyMacroValue"))(lazy(1))(lazy("consifyMacroValue value = isCons value value (cons value nil)"))((function(){return function(L_value){return resolve(L_isCons)(L_value)(L_value)((function(){return resolve(L_cons)(L_value)(L_nil)}))}}))},
  function(){return resolve(L_define)(lazy("baseMacroSub"))(lazy(2))(lazy("baseMacroSub macs expr = isToken expr\n  expr\n  isParens expr\n    expr \\start end content . \\\\\n      result = baseMacroSub macs content\n      .\n      isToken result result (parens start end result)\n    withCons expr expr \\h t .\n      isBlockStart h\n        cons h\n          isTokenString h '\\\\\\\\'\n            macroSubLet macs t\n            macroSubBody '.' macs t\n        withToken h\n          \\\\\n            subH = baseMacroSub macs h\n            .\n            withToken subH\n              cons subH (map (baseMacroSub macs) t)\n              \\tok pos . baseMacroSub macs (cons subH t)\n          \\tok pos . assoc tok macs\n            \\def . baseMacroSub macs (def t)\n            cons h (map (baseMacroSub macs) t)"))((function(){return function(L_macs){return function(L_expr){return resolve(L_isToken)(L_expr)(L_expr)((function(){return resolve(L_isParens)(L_expr)((function(){return resolve(L_expr)((function(){return function(L_start){return function(L_end){return function(L_content){return (function(){

var L_result;

L_result = (function(){return resolve(L_baseMacroSub)(L_macs)(L_content)});
return resolve(L_isToken)(L_result)(L_result)((function(){return resolve(L_parens)(L_start)(L_end)(L_result)}))})()}}}}))}))((function(){return resolve(L_withCons)(L_expr)(L_expr)((function(){return function(L_h){return function(L_t){return resolve(L_isBlockStart)(L_h)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(lazy("\\\\"))((function(){return resolve(L_macroSubLet)(L_macs)(L_t)}))((function(){return resolve(L_macroSubBody)(lazy("."))(L_macs)(L_t)}))}))}))((function(){return resolve(L_withToken)(L_h)(function(){
var L_subH;

L_subH = (function(){return resolve(L_baseMacroSub)(L_macs)(L_h)});
return resolve(L_withToken)(L_subH)((function(){return resolve(L_cons)(L_subH)((function(){return resolve(L_map)((function(){return resolve(L_baseMacroSub)(L_macs)}))(L_t)}))}))((function(){return function(L_tok){return function(L_pos){return resolve(L_baseMacroSub)(L_macs)((function(){return resolve(L_cons)(L_subH)(L_t)}))}}}))})((function(){return function(L_tok){return function(L_pos){return resolve(L_assoc)(L_tok)(L_macs)((function(){return function(L_def){return resolve(L_baseMacroSub)(L_macs)((function(){return resolve(L_def)(L_t)}))}}))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_map)((function(){return resolve(L_baseMacroSub)(L_macs)}))(L_t)}))}))}}}))}))}}}))}))}))}}}))},
  function(){return resolve(L_define)(lazy("macroSubLet"))(lazy(2))(lazy("macroSubLet macs list = list\n  \\h t D . isTokenString h '.'\n    cons h (baseMacroSub macs t)\n    cons (setParens h \\content . macroSubBody '=' macs content) (macroSubLet macs t)\n  # Don't bother with parse errors at this point -- ast generator will detect them\n  nil"))((function(){return function(L_macs){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("."))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_baseMacroSub)(L_macs)(L_t)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_setParens)(L_h)((function(){return function(L_content){return resolve(L_macroSubBody)(lazy("="))(L_macs)(L_content)}}))}))((function(){return resolve(L_macroSubLet)(L_macs)(L_t)}))}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("macroSubBody"))(lazy(3))(lazy("macroSubBody char macs list = list\n  \\h t D . cons h\n    isTokenString h char baseMacroSub (macroSubBody char)\n      macs\n      t\n  nil"))((function(){return function(L_char){return function(L_macs){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(L_char)(L_baseMacroSub)((function(){return resolve(L_macroSubBody)(L_char)}))(L_macs)(L_t)}))}}}}))(L_nil)}}}}))},
  function(){return resolve(L_define)(lazy("postProcessMacro"))(lazy(3))(lazy("postProcessMacro before after expr = isString expr\n  token expr (eq after -1 before after)\n  isParens expr\n    expr \\start end contents . parens start end (postProcessMacro start end contents)\n    isCons expr\n      expr \\h t .\n        isToken h\n          cons h (postProcessMacro (+ 1 (+ (tokenPos h) (strLen (tokenString h)))) -1 t)\n          \\\\\n            posStart = position h\n            posEnd = position t\n            t2 = postProcessMacro -1 after t\n            h2 = postProcessMacro before -1 h\n            .\n            eq posStart -1\n              cons (postProcessMacro before (position t2) h) t2\n              cons h2 (postProcessMacro (+ 1 (lexEnd h2)) after t)\n      isNumber expr\n        token (strString expr) (eq after -1 before after)\n        expr"))((function(){return function(L_before){return function(L_after){return function(L_expr){return resolve(L_isString)(L_expr)((function(){return resolve(L_token)(L_expr)((function(){return resolve(L_eq)(L_after)(lazy(-1))(L_before)(L_after)}))}))((function(){return resolve(L_isParens)(L_expr)((function(){return resolve(L_expr)((function(){return function(L_start){return function(L_end){return function(L_contents){return resolve(L_parens)(L_start)(L_end)((function(){return resolve(L_postProcessMacro)(L_start)(L_end)(L_contents)}))}}}}))}))((function(){return resolve(L_isCons)(L_expr)((function(){return resolve(L_expr)((function(){return function(L_h){return function(L_t){return resolve(L_isToken)(L_h)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_postProcessMacro)((function(){return resolve(L_$o)(lazy(1))((function(){return resolve(L_$o)((function(){return resolve(L_tokenPos)(L_h)}))((function(){return resolve(L_strLen)((function(){return resolve(L_tokenString)(L_h)}))}))}))}))(lazy(-1))(L_t)}))}))(function(){
var L_h2, L_t2, L_posEnd, L_posStart;

L_h2 = (function(){return resolve(L_postProcessMacro)(L_before)(lazy(-1))(L_h)});

L_t2 = (function(){return resolve(L_postProcessMacro)(lazy(-1))(L_after)(L_t)});

L_posEnd = (function(){return resolve(L_position)(L_t)});

L_posStart = (function(){return resolve(L_position)(L_h)});
return resolve(L_eq)(L_posStart)(lazy(-1))((function(){return resolve(L_cons)((function(){return resolve(L_postProcessMacro)(L_before)((function(){return resolve(L_position)(L_t2)}))(L_h)}))(L_t2)}))((function(){return resolve(L_cons)(L_h2)((function(){return resolve(L_postProcessMacro)((function(){return resolve(L_$o)(lazy(1))((function(){return resolve(L_lexEnd)(L_h2)}))}))(L_after)(L_t)}))}))})}}}))}))((function(){return resolve(L_isNumber)(L_expr)((function(){return resolve(L_token)((function(){return resolve(L_strString)(L_expr)}))((function(){return resolve(L_eq)(L_after)(lazy(-1))(L_before)(L_after)}))}))(L_expr)}))}))}))}}}}))},
  function(){return resolve(L_define)(lazy("defMacro"))(lazy(2))(lazy("defMacro name def = bind (getValue 'macroDefs') \\macs . setValue 'macroDefs' (acons name def macs)"))((function(){return function(L_name){return function(L_def){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("macroDefs"))}))((function(){return function(L_macs){return resolve(L_setValue)(lazy("macroDefs"))((function(){return resolve(L_acons)(L_name)(L_def)(L_macs)}))}}))}}}))},
  function(){return resolve(L_define)(lazy("delimiterListPrefix"))(lazy(0))(lazy("delimiterListPrefix = \"\\\"(?:\\\\\\\\.|[^\\\"])*\\\"|'(?:\\\\\\\\.|[^'])*'|\\\\n *|#.*| +\""))(lazy("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|\\n *|#.*| +"))},
  function(){return resolve(L_define)(lazy("regexpEscapePat"))(lazy(0))(lazy("regexpEscapePat = regexpFlags '[\\\\-\\\\[\\\\]/\\\\{\\\\}\\\\(\\\\)\\\\*\\\\+\\\\?\\\\.\\\\\\\\\\\\^\\\\$\\\\|]' 'g'"))((function(){return resolve(L_regexpFlags)(lazy("[\\-\\[\\]/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]"))(lazy("g"))}))},
  function(){return resolve(L_define)(lazy("addToken"))(lazy(1))(lazy("addToken del = bind (getValue 'tokenList')\n  \\dels . contains dels del\n    false\n    \\\\\n      newDels = insertSorted (\\a b . > (strLen a) (strLen b)) del dels\n      .\n      bind (setValue 'tokenList' newDels)\n        \\_ . computeTokenPat newDels"))((function(){return function(L_del){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenList"))}))((function(){return function(L_dels){return resolve(L_contains)(L_dels)(L_del)(L_false)(function(){
var L_newDels;

L_newDels = (function(){return resolve(L_insertSorted)((function(){return function(L_a){return function(L_b){return resolve(L_$z)((function(){return resolve(L_strLen)(L_a)}))((function(){return resolve(L_strLen)(L_b)}))}}}))(L_del)(L_dels)});
return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenList"))(L_newDels)}))((function(){return function(L__){return resolve(L_computeTokenPat)(L_newDels)}}))})}}))}}))},
  function(){return resolve(L_define)(lazy("computeTokenPat"))(lazy(1))(lazy("computeTokenPat dels = \\\\\n  delPats = map (\\item . strReplace item regexpEscapePat \"\\\\$&\") dels\n  newPat = strCat (cons '(' (cons (join (cons delimiterListPrefix delPats) '|') (cons ')' nil)))\n  .\n  setValue 'tokenPat' newPat"))((function(){return function(L_dels){return (function(){

var L_newPat, L_delPats;

L_newPat = (function(){return resolve(L_strCat)((function(){return resolve(L_cons)(lazy("("))((function(){return resolve(L_cons)((function(){return resolve(L_join)((function(){return resolve(L_cons)(L_delimiterListPrefix)(L_delPats)}))(lazy("|"))}))((function(){return resolve(L_cons)(lazy(")"))(L_nil)}))}))}))});

L_delPats = (function(){return resolve(L_map)((function(){return function(L_item){return resolve(L_strReplace)(L_item)(L_regexpEscapePat)(lazy("\\$&"))}}))(L_dels)});
return resolve(L_setValue)(lazy("tokenPat"))(L_newPat)})()}}))},
  function(){return resolve(L_define)(lazy("addTokenGroup"))(lazy(2))(lazy("addTokenGroup open close = bind (addToken open)\n  \\_ . bind (addToken close)\n    \\_ . bind (getValue 'tokenGroups')\n      \\gr . setValue 'tokenGroups' (acons open close gr)"))((function(){return function(L_open){return function(L_close){return resolve(L_bind)((function(){return resolve(L_addToken)(L_open)}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_addToken)(L_close)}))((function(){return function(L___0){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_gr){return resolve(L_setValue)(lazy("tokenGroups"))((function(){return resolve(L_acons)(L_open)(L_close)(L_gr)}))}}))}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("parenGroups"))(lazy(0))(lazy("parenGroups = acons '(' ')' nil"))((function(){return resolve(L_acons)(lazy("("))(lazy(")"))(L_nil)}))},
  function(){return resolve(L_define)(lazy("parse"))(lazy(2))(lazy("parse str pat = ifNotErr (parseIndent (token '\\n' 0) (tokens str pat) nil parenGroups) \\list . list \\h t . stripParens h"))((function(){return function(L_str){return function(L_pat){return resolve(L_ifNotErr)((function(){return resolve(L_parseIndent)((function(){return resolve(L_token)(lazy("\n"))(lazy(0))}))((function(){return resolve(L_tokens)(L_str)(L_pat)}))(L_nil)(L_parenGroups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_stripParens)(L_h)}}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("parseG"))(lazy(3))(lazy("parseG str pat groups = ifNotErr (parseIndent (token '\\n' 0) (tokens str pat) nil groups) \\list . list \\h t . stripParens h"))((function(){return function(L_str){return function(L_pat){return function(L_groups){return resolve(L_ifNotErr)((function(){return resolve(L_parseIndent)((function(){return resolve(L_token)(lazy("\n"))(lazy(0))}))((function(){return resolve(L_tokens)(L_str)(L_pat)}))(L_nil)(L_groups)}))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_stripParens)(L_h)}}}))}}))}}}}))},
  function(){return resolve(L_define)(lazy("parseToAst"))(lazy(2))(lazy("parseToAst str pat = createAst (parse str pat) nil"))((function(){return function(L_str){return function(L_pat){return resolve(L_createAst)((function(){return resolve(L_parse)(L_str)(L_pat)}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("parseM"))(lazy(1))(lazy("parseM str =\n  bind (getValue 'tokenPat')\n    \\tokPat . bind (getValue 'tokenGroups')\n      \\groups . parseG str tokPat groups"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_parseG)(L_str)(L_tokPat)(L_groups)}}))}}))}}))},
  function(){return resolve(L_define)(lazy("scanLine"))(lazy(4))(lazy("scanLine str pat onDef onExpr = scanLineG str pat parenGroups onDef onExpr"))((function(){return function(L_str){return function(L_pat){return function(L_onDef){return function(L_onExpr){return resolve(L_scanLineG)(L_str)(L_pat)(L_parenGroups)(L_onDef)(L_onExpr)}}}}}))},
  function(){return resolve(L_define)(lazy("parseLine"))(lazy(5))(lazy("parseLine str pat names onDef onExpr = parseLineG str pat names parenGroups onDef onExpr"))((function(){return function(L_str){return function(L_pat){return function(L_names){return function(L_onDef){return function(L_onExpr){return resolve(L_parseLineG)(L_str)(L_pat)(L_names)(L_parenGroups)(L_onDef)(L_onExpr)}}}}}}))},
  function(){return resolve(L_define)(lazy("parseLineM"))(lazy(1))(lazy("parseLineM str = bind (getValue 'tokenPat')\n  \\tokPat . bind (getValue 'tokenGroups')\n    \\groups . parseLineG str tokPat nil groups id id"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_parseLineG)(L_str)(L_tokPat)(L_nil)(L_groups)(L_id)(L_id)}}))}}))}}))},
  function(){return resolve(L_define)(lazy("macroSubM"))(lazy(1))(lazy("macroSubM expr =\n  bind (getValue 'macroDefs')\n    \\macs . macroSub macs expr"))((function(){return function(L_expr){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("macroDefs"))}))((function(){return function(L_macs){return resolve(L_macroSub)(L_macs)(L_expr)}}))}}))},
  function(){return resolve(L_define)(lazy("macroParse"))(lazy(1))(lazy("macroParse str =\n  bind (parseM str)\n    \\ex . macroSubM ex"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_parseM)(L_str)}))((function(){return function(L_ex){return resolve(L_macroSubM)(L_ex)}}))}}))},
  function(){return resolve(L_define)(lazy("tokensM"))(lazy(1))(lazy("tokensM str =\n  bind (getValue 'tokenPat')\n    \\delimiterPat . tokens str delimiterPat"))((function(){return function(L_str){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_delimiterPat){return resolve(L_tokens)(L_str)(L_delimiterPat)}}))}}))},
  function(){return resolve(L_define)(lazy("parseLines"))(lazy(2))(lazy("parseLines lines result = lines\n  \\h t D . bind (parseLineM h)\n    \\ast . parseLines t (cons ast result)\n  reverse result"))((function(){return function(L_lines){return function(L_result){return resolve(L_lines)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_bind)((function(){return resolve(L_parseLineM)(L_h)}))((function(){return function(L_ast){return resolve(L_parseLines)(L_t)((function(){return resolve(L_cons)(L_ast)(L_result)}))}}))}}}}))((function(){return resolve(L_reverse)(L_result)}))}}}))},
  function(){return resolve(L_define)(lazy("parseFile"))(lazy(1))(lazy("parseFile text = parseLines (linesForFile text) nil"))((function(){return function(L_text){return resolve(L_parseLines)((function(){return resolve(L_linesForFile)(L_text)}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("simpleScanLine"))(lazy(1))(lazy("simpleScanLine line = bind (getValue 'tokenPat')\n  \\tokenPat . bind (getValue 'tokenGroups')\n    \\groups . scanLineG line tokenPat groups id id"))((function(){return function(L_line){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokenPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_scanLineG)(L_line)(L_tokenPat)(L_groups)(L_id)(L_id)}}))}}))}}))},
  function(){return resolve(L_define)(lazy("scanLineM"))(lazy(1))(lazy("scanLineM line = bind (getValue 'tokenPat')\n  \\tokenPat . bind (getValue 'tokenGroups')\n    \\groups . bind (getValue 'parseFilters')\n      \\filters . bind (getValue 'macroDefs')\n        \\macros . bind (runParseFilters filters (scanLineG line tokenPat groups id id))\n          \\scanned . macroSub macros scanned"))((function(){return function(L_line){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPat"))}))((function(){return function(L_tokenPat){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("parseFilters"))}))((function(){return function(L_filters){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("macroDefs"))}))((function(){return function(L_macros){return resolve(L_bind)((function(){return resolve(L_runParseFilters)(L_filters)((function(){return resolve(L_scanLineG)(L_line)(L_tokenPat)(L_groups)(L_id)(L_id)}))}))((function(){return function(L_scanned){return resolve(L_macroSub)(L_macros)(L_scanned)}}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("newParseLine"))(lazy(2))(lazy("newParseLine names line = bind (scanLineM line)\n  \\scanned . ifNotErr (createAst scanned names) \\ast . ast"))((function(){return function(L_names){return function(L_line){return resolve(L_bind)((function(){return resolve(L_scanLineM)(L_line)}))((function(){return function(L_scanned){return resolve(L_ifNotErr)((function(){return resolve(L_createAst)(L_scanned)(L_names)}))((function(){return function(L_ast){return resolve(L_ast)}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("runLine"))(lazy(2))(lazy("runLine names line = bind (newParseLine names line)\n  \\ast . bind (runAst ast)\n    \\result . cons\n      ast\n      isParseErr result\n        left (parseErrMsg result)\n        right result"))((function(){return function(L_names){return function(L_line){return resolve(L_bind)((function(){return resolve(L_newParseLine)(L_names)(L_line)}))((function(){return function(L_ast){return resolve(L_bind)((function(){return resolve(L_runAst)(L_ast)}))((function(){return function(L_result){return resolve(L_cons)(L_ast)((function(){return resolve(L_isParseErr)(L_result)((function(){return resolve(L_left)((function(){return resolve(L_parseErrMsg)(L_result)}))}))((function(){return resolve(L_right)(L_result)}))}))}}))}}))}}}))},
  function(){return resolve(L_define)(lazy("runLines"))(lazy(2))(lazy("runLines names lines = lines\n  \\h t D . bind (runLine names h)\n    \\line . bind (runLines names t)\n      \\rest . cons line rest\n  nil"))((function(){return function(L_names){return function(L_lines){return resolve(L_lines)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_bind)((function(){return resolve(L_runLine)(L_names)(L_h)}))((function(){return function(L_line){return resolve(L_bind)((function(){return resolve(L_runLines)(L_names)(L_t)}))((function(){return function(L_rest){return resolve(L_cons)(L_line)(L_rest)}}))}}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("runFile"))(lazy(1))(lazy("runFile text = \\\\\n  lines = linesForFile text\n  names = namesForLines lines\n  .\n  runLines names lines"))((function(){return function(L_text){return (function(){

var L_names, L_lines;

L_names = (function(){return resolve(L_namesForLines)(L_lines)});

L_lines = (function(){return resolve(L_linesForFile)(L_text)});
return resolve(L_runLines)(L_names)(L_lines)})()}}))},
  function(){return resolve(L_define)(lazy("baseLoad"))(lazy(1))(lazy("baseLoad file = bind (readFile file)\n  \\result . result\n    \\err . err\n    \\contents . bind (getValue 'activeTokenPacks')\n      \\activePacks . bind resetStdTokenPacks\n        \\_ . bind (runFile contents)\n          \\result . isNil activePacks\n            bind resetStdTokenPacks\n              \\_ . result\n            bind (resetTokenPacks activePacks)\n                \\_ . result"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_readFile)(L_file)}))((function(){return function(L_result){return resolve(L_result)((function(){return function(L_err){return resolve(L_err)}}))((function(){return function(L_contents){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("activeTokenPacks"))}))((function(){return function(L_activePacks){return resolve(L_bind)(L_resetStdTokenPacks)((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_runFile)(L_contents)}))((function(){return function(L_result_0){return resolve(L_isNil)(L_activePacks)((function(){return resolve(L_bind)(L_resetStdTokenPacks)((function(){return function(L___1){return resolve(L_result_0)}}))}))((function(){return resolve(L_bind)((function(){return resolve(L_resetTokenPacks)(L_activePacks)}))((function(){return function(L___1){return resolve(L_result_0)}}))}))}}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("load"))(lazy(1))(lazy("load file = bind (baseLoad file)\n  \\result . \\\\\n    errs = foldr (\\line results . tail line (\\er . cons er results) (\\x . results)) nil result\n    .\n    isNil errs\n      right true\n      left errs"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_baseLoad)(L_file)}))((function(){return function(L_result){return (function(){

var L_errs;

L_errs = (function(){return resolve(L_foldr)((function(){return function(L_line){return function(L_results){return resolve(L_tail)(L_line)((function(){return function(L_er){return resolve(L_cons)(L_er)(L_results)}}))((function(){return function(L_x){return resolve(L_results)}}))}}}))(L_nil)(L_result)});
return resolve(L_isNil)(L_errs)((function(){return resolve(L_right)(L_true)}))((function(){return resolve(L_left)(L_errs)}))})()}}))}}))},
  function(){return resolve(L_define)(lazy("require"))(lazy(1))(lazy("require file = bind (getValue 'requiredFiles')\n  \\files . contains files file\n    false\n    bind (load file)\n      \\result . result\n        \\x . left x\n        \\_ . bind (setValue 'requiredFiles' (cons file files))\n          \\_ . right true"))((function(){return function(L_file){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("requiredFiles"))}))((function(){return function(L_files){return resolve(L_contains)(L_files)(L_file)(L_false)((function(){return resolve(L_bind)((function(){return resolve(L_load)(L_file)}))((function(){return function(L_result){return resolve(L_result)((function(){return function(L_x){return resolve(L_left)(L_x)}}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("requiredFiles"))((function(){return resolve(L_cons)(L_file)(L_files)}))}))((function(){return function(L___0){return resolve(L_right)(L_true)}}))}}))}}))}))}}))}}))},
  function(){return resolve(L_define)(lazy("defTokenPack"))(lazy(2))(lazy("defTokenPack name pack = bind (getValue 'tokenPacks')\n  \\packs . setValue 'tokenPacks' (acons name pack packs)"))((function(){return function(L_name){return function(L_pack){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPacks"))}))((function(){return function(L_packs){return resolve(L_setValue)(lazy("tokenPacks"))((function(){return resolve(L_acons)(L_name)(L_pack)(L_packs)}))}}))}}}))},
  function(){return resolve(L_define)(lazy("useTokenPack"))(lazy(1))(lazy("useTokenPack name = bind (getValue 'tokenPacks')\n  \\packs . bind (getValue 'tokenGroups')\n    \\groups . bind (getValue 'tokenList')\n      \\tokens . bind (getValue 'activeTokenPacks')\n        \\activePacks . bind (getValue 'parseFilters')\n          \\filters . assoc name packs\n            \\pack . \\\\\n              groupToks = foldl (\\value el . el \\h t . cons h (cons t value)) nil (head (tail pack))\n              newToks = quicksort (\\a b . > (strLen a) (strLen b)) (append (head pack) (append groupToks tokens))\n              .\n              bind (setValue 'tokenList' newToks)\n                \\_ . bind (setValue 'tokenGroups' (appendAlist (head (tail pack)) groups))\n                  \\_ . bind (setValue 'parseFilters' (append filters (head (tail (tail pack)))))\n                    \\_ . bind (computeTokenPat newToks)\n                      \\_ . setValue 'activeTokenPacks' (cons name activePacks)\n            nil"))((function(){return function(L_name){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenPacks"))}))((function(){return function(L_packs){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenList"))}))((function(){return function(L_tokens){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("activeTokenPacks"))}))((function(){return function(L_activePacks){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("parseFilters"))}))((function(){return function(L_filters){return resolve(L_assoc)(L_name)(L_packs)((function(){return function(L_pack){return (function(){

var L_newToks, L_groupToks;

L_newToks = (function(){return resolve(L_quicksort)((function(){return function(L_a){return function(L_b){return resolve(L_$z)((function(){return resolve(L_strLen)(L_a)}))((function(){return resolve(L_strLen)(L_b)}))}}}))((function(){return resolve(L_append)((function(){return resolve(L_head)(L_pack)}))((function(){return resolve(L_append)(L_groupToks)(L_tokens)}))}))});

L_groupToks = (function(){return resolve(L_foldl)((function(){return function(L_value){return function(L_el){return resolve(L_el)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)(L_t)(L_value)}))}}}))}}}))(L_nil)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_pack)}))}))});
return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenList"))(L_newToks)}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenGroups"))((function(){return resolve(L_appendAlist)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_pack)}))}))(L_groups)}))}))((function(){return function(L___0){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("parseFilters"))((function(){return resolve(L_append)(L_filters)((function(){return resolve(L_head)((function(){return resolve(L_tail)((function(){return resolve(L_tail)(L_pack)}))}))}))}))}))((function(){return function(L___1){return resolve(L_bind)((function(){return resolve(L_computeTokenPat)(L_newToks)}))((function(){return function(L___2){return resolve(L_setValue)(lazy("activeTokenPacks"))((function(){return resolve(L_cons)(L_name)(L_activePacks)}))}}))}}))}}))}}))})()}}))(L_nil)}}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("resetTokenPacks"))(lazy(1))(lazy("resetTokenPacks packs = bind (setValue 'tokenGroups' nil)\n  \\_ . bind (setValue 'tokenList' nil)\n    \\_ . bind (setValue 'activeTokenPacks' nil)\n      \\_ . bind (setValue 'parseFilters' nil)\n        \\_ . foldr1\n          \\packCmd result . bind packCmd \\_ . result\n          map useTokenPack packs"))((function(){return function(L_packs){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenGroups"))(L_nil)}))((function(){return function(L__){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("tokenList"))(L_nil)}))((function(){return function(L___0){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("activeTokenPacks"))(L_nil)}))((function(){return function(L___1){return resolve(L_bind)((function(){return resolve(L_setValue)(lazy("parseFilters"))(L_nil)}))((function(){return function(L___2){return resolve(L_foldr1)((function(){return function(L_packCmd){return function(L_result){return resolve(L_bind)(L_packCmd)((function(){return function(L___3){return resolve(L_result)}}))}}}))((function(){return resolve(L_map)(L_useTokenPack)(L_packs)}))}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("resetStdTokenPacks"))(lazy(0))(lazy("resetStdTokenPacks = bind (getValue 'stdTokenPacks')\n  \\stds . bind (resetTokenPacks stds)\n    \\_ . setValue 'activeTokenPacks' nil"))((function(){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("stdTokenPacks"))}))((function(){return function(L_stds){return resolve(L_bind)((function(){return resolve(L_resetTokenPacks)(L_stds)}))((function(){return function(L__){return resolve(L_setValue)(lazy("activeTokenPacks"))(L_nil)}}))}}))}))},
  function(){return resolve(L_define)(lazy("addStdTokenPacks"))(lazy(1))(lazy("addStdTokenPacks morePacks = bind (getValue 'stdTokenPacks')\n  \\stds . setValue 'stdTokenPacks' (append stds morePacks)"))((function(){return function(L_morePacks){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("stdTokenPacks"))}))((function(){return function(L_stds){return resolve(L_setValue)(lazy("stdTokenPacks"))((function(){return resolve(L_append)(L_stds)(L_morePacks)}))}}))}}))},
  function(){return resolve(L_define)(lazy("addParseFilter"))(lazy(1))(lazy("addParseFilter filt = bind (getValue 'parseFilters')\n  \\filters . setValue 'parseFilters' (append filters (cons filt nil))"))((function(){return function(L_filt){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("parseFilters"))}))((function(){return function(L_filters){return resolve(L_setValue)(lazy("parseFilters"))((function(){return resolve(L_append)(L_filters)((function(){return resolve(L_cons)(L_filt)(L_nil)}))}))}}))}}))},
  function(){return resolve(L_define)(lazy("d"))(lazy(3))(lazy("d label value expr = log (strCat (cons label (cons value nil))) expr"))((function(){return function(L_label){return function(L_value){return function(L_expr){return resolve(L_log)((function(){return resolve(L_strCat)((function(){return resolve(L_cons)(L_label)((function(){return resolve(L_cons)(L_value)(L_nil)}))}))}))(L_expr)}}}}))},
  function(){return resolve(L_define)(lazy("dd"))(lazy(2))(lazy("dd label arg = d label arg arg"))((function(){return function(L_label){return function(L_arg){return resolve(L_d)(L_label)(L_arg)(L_arg)}}}))},
  function(){return resolve(L_setValue)(lazy("macroDefs"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("requiredFiles"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("tokenPacks"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("activeTokenPacks"))(L_nil)},
  function(){return resolve(L_setValue)(lazy("stdTokenPacks"))((function(){return resolve(L_cons)(lazy("std"))(L_nil)}))},
  function(){return resolve(L_defTokenPack)(lazy("std"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("."))((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(lazy("\\\\"))((function(){return resolve(L_cons)(lazy("\\@"))(L_nil)}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_acons)(lazy("("))(lazy(")"))(L_nil)}))((function(){return resolve(L_cons)(L_nil)(L_nil)}))}))}))},
  function(){return resolve(L_resetStdTokenPacks)},
  function(){return resolve(L_addTokenGroup)(lazy("["))(lazy("]"))},
  function(){return resolve(L_addToken)(lazy("|"))},
  function(){return resolve(L_define)(lazy("listifyOp"))(lazy(2))(lazy("listifyOp op list = list\n  \\h t D . isTokenString h '|'\n    cons t nil\n    cons (cons op (cons h (listifyOp op t))) nil\n  cons 'nil' nil"))((function(){return function(L_op){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){return resolve(L_cons)(L_t)(L_nil)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_op)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_listifyOp)(L_op)(L_t)}))}))}))(L_nil)}))}}}}))((function(){return resolve(L_cons)(lazy("nil"))(L_nil)}))}}}))},
  function(){return resolve(L_define)(lazy("listify"))(lazy(1))(lazy("listify list = listifyOp 'cons' list"))((function(){return function(L_list){return resolve(L_listifyOp)(lazy("cons"))(L_list)}}))},
  function(){return resolve(L_defMacro)(lazy("["))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_listify)(L_h)}}}))}}))},
  function(){return resolve(L_define)(lazy("listFilter"))(lazy(1))(lazy("listFilter code = bind (getValue 'listMacros')\n  \\listMacros . filterApplies code \\list . list \\h t .\n    and (isToken h) (contains listMacros (tokenString h))\n      listFilterTail list\n      list"))((function(){return function(L_code){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("listMacros"))}))((function(){return function(L_listMacros){return resolve(L_filterApplies)(L_code)((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_and)((function(){return resolve(L_isToken)(L_h)}))((function(){return resolve(L_contains)(L_listMacros)((function(){return resolve(L_tokenString)(L_h)}))}))((function(){return resolve(L_listFilterTail)(L_list)}))(L_list)}}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("listFilterTail"))(lazy(1))(lazy("listFilterTail list = list\n  \\h t D . isTokenString h '|'\n    > (length t) 2\n      cons h (cons (removeLast t) (cons (last t) nil))\n      list\n    cons h (listFilterTail t)\n  nil"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){return resolve(L_$z)((function(){return resolve(L_length)(L_t)}))(lazy(2))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_cons)((function(){return resolve(L_removeLast)(L_t)}))((function(){return resolve(L_cons)((function(){return resolve(L_last)(L_t)}))(L_nil)}))}))}))(L_list)}))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_listFilterTail)(L_t)}))}))}}}}))(L_nil)}}))},
  function(){return resolve(L_define)(lazy("filterApplies"))(lazy(2))(lazy("filterApplies code func = isParens code\n  code \\start end contents . parens start end (filterApplies contents func)\n  isCons code\n    \\\\\n      filtered = filterApplyElements code func\n      .\n      and (isCons filtered) (isBlockStart (head filtered))\n        filtered\n        func filtered\n    code"))((function(){return function(L_code){return function(L_func){return resolve(L_isParens)(L_code)((function(){return resolve(L_code)((function(){return function(L_start){return function(L_end){return function(L_contents){return resolve(L_parens)(L_start)(L_end)((function(){return resolve(L_filterApplies)(L_contents)(L_func)}))}}}}))}))((function(){return resolve(L_isCons)(L_code)(function(){
var L_filtered;

L_filtered = (function(){return resolve(L_filterApplyElements)(L_code)(L_func)});
return resolve(L_and)((function(){return resolve(L_isCons)(L_filtered)}))((function(){return resolve(L_isBlockStart)((function(){return resolve(L_head)(L_filtered)}))}))(L_filtered)((function(){return resolve(L_func)(L_filtered)}))})(L_code)}))}}}))},
  function(){return resolve(L_define)(lazy("filterApplyElements"))(lazy(2))(lazy("filterApplyElements code func = code\n  \\h t D . isBlockStart h\n    cons h (filterBlock h t func)\n    cons (filterApplies h func)\n      and (isCons t) (isBlockStart (head t))\n        cons (filterApplyElements t func) nil\n        filterApplyElements t func\n  nil"))((function(){return function(L_code){return function(L_func){return resolve(L_code)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isBlockStart)(L_h)((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_filterBlock)(L_h)(L_t)(L_func)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_filterApplies)(L_h)(L_func)}))((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_t)}))((function(){return resolve(L_isBlockStart)((function(){return resolve(L_head)(L_t)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_filterApplyElements)(L_t)(L_func)}))(L_nil)}))((function(){return resolve(L_filterApplyElements)(L_t)(L_func)}))}))}))}}}}))(L_nil)}}}))},
  function(){return resolve(L_define)(lazy("filterBlock"))(lazy(3))(lazy("filterBlock type code func = isTokenString type '\\\\'\n  filterLambda code func\n  filterLet code func"))((function(){return function(L_type){return function(L_code){return function(L_func){return resolve(L_isTokenString)(L_type)(lazy("\\"))((function(){return resolve(L_filterLambda)(L_code)(L_func)}))((function(){return resolve(L_filterLet)(L_code)(L_func)}))}}}}))},
  function(){return resolve(L_define)(lazy("filterLet"))(lazy(2))(lazy("filterLet code func = code \\h t . isTokenString h '.'\n  cons h (filterApplies t func)\n  cons (filterLetBinding h func)\n    filterLet t func"))((function(){return function(L_code){return function(L_func){return resolve(L_code)((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("."))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_filterApplies)(L_t)(L_func)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_filterLetBinding)(L_h)(L_func)}))((function(){return resolve(L_filterLet)(L_t)(L_func)}))}))}}}))}}}))},
  function(){return resolve(L_define)(lazy("filterLetBinding"))(lazy(2))(lazy("filterLetBinding code func = isParens code\n  setParens code \\contents . filterLetBinding contents func\n  isCons code\n    code \\h t . cons h\n      isTokenString h '='\n        filterApplies t func\n        filterLetBinding t func\n    code"))((function(){return function(L_code){return function(L_func){return resolve(L_isParens)(L_code)((function(){return resolve(L_setParens)(L_code)((function(){return function(L_contents){return resolve(L_filterLetBinding)(L_contents)(L_func)}}))}))((function(){return resolve(L_isCons)(L_code)((function(){return resolve(L_code)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_filterApplies)(L_t)(L_func)}))((function(){return resolve(L_filterLetBinding)(L_t)(L_func)}))}))}}}))}))(L_code)}))}}}))},
  function(){return resolve(L_define)(lazy("filterLambda"))(lazy(2))(lazy("filterLambda code func = code \\h t . cons h\n  isTokenString h '.'\n    filterApplies t func\n    filterLambda t func"))((function(){return function(L_code){return function(L_func){return resolve(L_code)((function(){return function(L_h){return function(L_t){return resolve(L_cons)(L_h)((function(){return resolve(L_isTokenString)(L_h)(lazy("."))((function(){return resolve(L_filterApplies)(L_t)(L_func)}))((function(){return resolve(L_filterLambda)(L_t)(L_func)}))}))}}}))}}}))},
  function(){return resolve(L_setValue)(lazy("listMacros"))((function(){return resolve(L_cons)(lazy("["))((function(){return resolve(L_cons)(lazy("{"))((function(){return resolve(L_cons)(lazy("hamt{"))(L_nil)}))}))}))},
  function(){return resolve(L_addParseFilter)(L_listFilter)},
  function(){return resolve(L_addTokenGroup)(lazy("{"))(lazy("}"))},
  function(){return resolve(L_defMacro)(lazy("{"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_listifyOp)(lazy("aconsPair"))(L_h)}}}))}}))},
  function(){return resolve(L_addTokenGroup)(lazy("hamt{"))(lazy("}"))},
  function(){return resolve(L_defMacro)(lazy("hamt{"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_hamtify)(L_h)}}}))}}))},
  function(){return resolve(L_define)(lazy("hamtWithPair"))(lazy(2))(lazy("hamtWithPair pair t = hamtWith (head pair) (tail pair) t"))((function(){return function(L_pair){return function(L_t){return resolve(L_hamtWith)((function(){return resolve(L_head)(L_pair)}))((function(){return resolve(L_tail)(L_pair)}))(L_t)}}}))},
  function(){return resolve(L_define)(lazy("hamtify"))(lazy(1))(lazy("hamtify list = list\n  \\h t D . isTokenString h '|'\n    cons t nil\n    and (isCons h) (or (isTokenString (head h) 'cons') (isTokenString (head h) ':'))\n      [['hamtWith' (head (tail h)) (head (tail (tail h))) | hamtify t]]\n      [['hamtWithPair' h | hamtify t]]\n  ['hamt']"))((function(){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){return resolve(L_cons)(L_t)(L_nil)}))((function(){return resolve(L_and)((function(){return resolve(L_isCons)(L_h)}))((function(){return resolve(L_or)((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_h)}))(lazy("cons"))}))((function(){return resolve(L_isTokenString)((function(){return resolve(L_head)(L_h)}))(lazy(":"))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("hamtWith"))((function(){return resolve(L_cons)((function(){return resolve(L_head)((function(){return resolve(L_tail)(L_h)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_head)((function(){return resolve(L_tail)((function(){return resolve(L_tail)(L_h)}))}))}))((function(){return resolve(L_hamtify)(L_t)}))}))}))}))(L_nil)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("hamtWithPair"))((function(){return resolve(L_cons)(L_h)((function(){return resolve(L_hamtify)(L_t)}))}))}))(L_nil)}))}))}}}}))((function(){return resolve(L_cons)(lazy("hamt"))(L_nil)}))}}))},
  function(){return resolve(L_defTokenPack)(lazy("list"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("|"))((function(){return resolve(L_cons)(lazy("="))(L_nil)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("{"))(lazy("}"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("hamt{"))(lazy("}"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("or["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("and["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("concat["))(lazy("]"))}))((function(){return resolve(L_aconsPair)((function(){return resolve(L_cons)(lazy("concatFlat["))(lazy("]"))}))(L_nil)}))}))}))}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_listFilter)(L_nil)}))(L_nil)}))}))}))},
  function(){return resolve(L_addTokenGroup)(lazy("or["))(lazy("]"))},
  function(){return resolve(L_addTokenGroup)(lazy("and["))(lazy("]"))},
  function(){return resolve(L_addTokenGroup)(lazy("concat["))(lazy("]"))},
  function(){return resolve(L_addTokenGroup)(lazy("concatFlat["))(lazy("]"))},
  function(){return resolve(L_define)(lazy("listMacroFoldOp"))(lazy(3))(lazy("listMacroFoldOp op emptyCase list = list \\h t . foldr\n    \\case result . [op case result]\n    emptyCase\n    h"))((function(){return function(L_op){return function(L_emptyCase){return function(L_list){return resolve(L_list)((function(){return function(L_h){return function(L_t){return resolve(L_foldr)((function(){return function(L_case){return function(L_result){return resolve(L_cons)(L_op)((function(){return resolve(L_cons)(L_case)((function(){return resolve(L_cons)(L_result)(L_nil)}))}))}}}))(L_emptyCase)(L_h)}}}))}}}}))},
  function(){return resolve(L_defMacro)(lazy("or["))((function(){return function(L_list){return resolve(L_listMacroFoldOp)(lazy("or"))(lazy("false"))(L_list)}}))},
  function(){return resolve(L_defMacro)(lazy("and["))((function(){return function(L_list){return resolve(L_listMacroFoldOp)(lazy("and"))(lazy("true"))(L_list)}}))},
  function(){return resolve(L_defMacro)(lazy("concat["))((function(){return function(L_list){return resolve(L_cons)(lazy("strCat"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_listify)((function(){return resolve(L_head)(L_list)}))}))(L_nil)}))(L_nil)}))}}))},
  function(){return resolve(L_defMacro)(lazy("concatFlat["))((function(){return function(L_list){return resolve(L_cons)(lazy("strCat"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("flatten"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)((function(){return resolve(L_listify)((function(){return resolve(L_head)(L_list)}))}))(L_nil)}))(L_nil)}))}))(L_nil)}))}}))},
  function(){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("listMacros"))}))((function(){return function(L_lm){return resolve(L_cons)(lazy("concat["))(L_lm)}}))},
  function(){return resolve(L_define)(lazy("infix"))(lazy(1))(lazy("infix code = bind (getValue 'infixPrecedence')\n  \\prec . bind (getValue 'infixRightAssociative')\n    \\right . bind (getValue 'tokenGroups')\n      \\groups . filterApplies\n        code\n        \\expr . infixRearrange prec right (map (\\cell . tail cell) groups) expr"))((function(){return function(L_code){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("infixPrecedence"))}))((function(){return function(L_prec){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("infixRightAssociative"))}))((function(){return function(L_right){return resolve(L_bind)((function(){return resolve(L_getValue)(lazy("tokenGroups"))}))((function(){return function(L_groups){return resolve(L_filterApplies)(L_code)((function(){return function(L_expr){return resolve(L_infixRearrange)(L_prec)(L_right)((function(){return resolve(L_map)((function(){return function(L_cell){return resolve(L_tail)(L_cell)}}))(L_groups)}))(L_expr)}}))}}))}}))}}))}}))},
  function(){return resolve(L_define)(lazy("infixRearrange"))(lazy(4))(lazy("infixRearrange prec right closes list = \\\\\n  len = length list\n  head1 = head list\n  tail1 = tail list\n  head2 = head tail1\n  tail2 = tail tail1\n  head3 = head tail2\n  opPrec = getPrec prec head2\n  .\n  < len 2\n    list\n    isInfix opPrec head1 head2 len\n      or (== len 2) (not (isInfixArg closes head3))\n        [[head2 head1] | tail2]\n        infixRearrange prec right closes (absorbArgument opPrec prec right closes head1 head2 tail2 head3 (- len 2))\n      [head1 | infixRearrange prec right closes tail1]"))((function(){return function(L_prec){return function(L_right){return function(L_closes){return function(L_list){return (function(){

var L_opPrec, L_head3, L_tail2, L_head2, L_tail1, L_head1, L_len;

L_opPrec = (function(){return resolve(L_getPrec)(L_prec)(L_head2)});

L_head3 = (function(){return resolve(L_head)(L_tail2)});

L_tail2 = (function(){return resolve(L_tail)(L_tail1)});

L_head2 = (function(){return resolve(L_head)(L_tail1)});

L_tail1 = (function(){return resolve(L_tail)(L_list)});

L_head1 = (function(){return resolve(L_head)(L_list)});

L_len = (function(){return resolve(L_length)(L_list)});
return resolve(L_$y)(L_len)(lazy(2))(L_list)((function(){return resolve(L_isInfix)(L_opPrec)(L_head1)(L_head2)(L_len)((function(){return resolve(L_or)((function(){return resolve(L_$p$p)(L_len)(lazy(2))}))((function(){return resolve(L_not)((function(){return resolve(L_isInfixArg)(L_closes)(L_head3)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_head2)((function(){return resolve(L_cons)(L_head1)(L_nil)}))}))(L_tail2)}))((function(){return resolve(L_infixRearrange)(L_prec)(L_right)(L_closes)((function(){return resolve(L_absorbArgument)(L_opPrec)(L_prec)(L_right)(L_closes)(L_head1)(L_head2)(L_tail2)(L_head3)((function(){return resolve(L_$_)(L_len)(lazy(2))}))}))}))}))((function(){return resolve(L_cons)(L_head1)((function(){return resolve(L_infixRearrange)(L_prec)(L_right)(L_closes)(L_tail1)}))}))}))})()}}}}}))},
  function(){return resolve(L_define)(lazy("absorbArgument"))(lazy(9))(lazy("absorbArgument opPrec prec right closes head1 head2 tail2 head3 len = \\\\\n  tail3 = tail tail2\n  head4 = head tail3\n  tail4 = tail tail3\n  head5 = head tail4\n  .\n  infixShouldEatNext opPrec prec (contains right (strTokenString head2)) head3 head4 head5 closes len\n    [head1 head2 | absorbArgument (getPrec prec head4) prec right closes head3 head4 tail4 head5 (- len 2)]\n    [[head2 head1 head3] | tail3]"))((function(){return function(L_opPrec){return function(L_prec){return function(L_right){return function(L_closes){return function(L_head1){return function(L_head2){return function(L_tail2){return function(L_head3){return function(L_len){return (function(){

var L_head5, L_tail4, L_head4, L_tail3;

L_head5 = (function(){return resolve(L_head)(L_tail4)});

L_tail4 = (function(){return resolve(L_tail)(L_tail3)});

L_head4 = (function(){return resolve(L_head)(L_tail3)});

L_tail3 = (function(){return resolve(L_tail)(L_tail2)});
return resolve(L_infixShouldEatNext)(L_opPrec)(L_prec)((function(){return resolve(L_contains)(L_right)((function(){return resolve(L_strTokenString)(L_head2)}))}))(L_head3)(L_head4)(L_head5)(L_closes)(L_len)((function(){return resolve(L_cons)(L_head1)((function(){return resolve(L_cons)(L_head2)((function(){return resolve(L_absorbArgument)((function(){return resolve(L_getPrec)(L_prec)(L_head4)}))(L_prec)(L_right)(L_closes)(L_head3)(L_head4)(L_tail4)(L_head5)((function(){return resolve(L_$_)(L_len)(lazy(2))}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_head2)((function(){return resolve(L_cons)(L_head1)((function(){return resolve(L_cons)(L_head3)(L_nil)}))}))}))(L_tail3)}))})()}}}}}}}}}}))},
  function(){return resolve(L_define)(lazy("isInfixArg"))(lazy(2))(lazy("isInfixArg closes item = or[\n  isParens item\n  isCons item\n  and[\n    isToken item\n    not (contains closes (tokenString item))\n    not (isBlockStart item)]]"))((function(){return function(L_closes){return function(L_item){return resolve(L_or)((function(){return resolve(L_isParens)(L_item)}))((function(){return resolve(L_or)((function(){return resolve(L_isCons)(L_item)}))((function(){return resolve(L_or)((function(){return resolve(L_and)((function(){return resolve(L_isToken)(L_item)}))((function(){return resolve(L_and)((function(){return resolve(L_not)((function(){return resolve(L_contains)(L_closes)((function(){return resolve(L_tokenString)(L_item)}))}))}))((function(){return resolve(L_and)((function(){return resolve(L_not)((function(){return resolve(L_isBlockStart)(L_item)}))}))(L_true)}))}))}))(L_false)}))}))}}}))},
  function(){return resolve(L_define)(lazy("isInfix"))(lazy(4))(lazy("isInfix opPrec head1 head2 len = and[\n  > len 1\n  > opPrec -1\n  isInfixArg nil head1]"))((function(){return function(L_opPrec){return function(L_head1){return function(L_head2){return function(L_len){return resolve(L_and)((function(){return resolve(L_$z)(L_len)(lazy(1))}))((function(){return resolve(L_and)((function(){return resolve(L_$z)(L_opPrec)(lazy(-1))}))((function(){return resolve(L_and)((function(){return resolve(L_isInfixArg)(L_nil)(L_head1)}))(L_true)}))}))}}}}}))},
  function(){return resolve(L_define)(lazy("getPrec"))(lazy(2))(lazy("getPrec prec token = \\\\\n  str = tokenString token\n  .\n  isToken token\n    findIndex (\\level . contains level str) prec\n    -1"))((function(){return function(L_prec){return function(L_token){return (function(){

var L_str;

L_str = (function(){return resolve(L_tokenString)(L_token)});
return resolve(L_isToken)(L_token)((function(){return resolve(L_findIndex)((function(){return function(L_level){return resolve(L_contains)(L_level)(L_str)}}))(L_prec)}))(lazy(-1))})()}}}))},
  function(){return resolve(L_define)(lazy("infixShouldEatNext"))(lazy(8))(lazy("infixShouldEatNext opPrec prec isRight curArg nextOp nextArg closes len = \\\\\n  nextPrec = getPrec prec nextOp\n  .\n  and[\n    > len 2\n    isInfix nextPrec curArg nextOp len\n    or (> opPrec nextPrec) (and (== opPrec nextPrec) isRight)\n    isInfixArg closes nextArg]"))((function(){return function(L_opPrec){return function(L_prec){return function(L_isRight){return function(L_curArg){return function(L_nextOp){return function(L_nextArg){return function(L_closes){return function(L_len){return (function(){

var L_nextPrec;

L_nextPrec = (function(){return resolve(L_getPrec)(L_prec)(L_nextOp)});
return resolve(L_and)((function(){return resolve(L_$z)(L_len)(lazy(2))}))((function(){return resolve(L_and)((function(){return resolve(L_isInfix)(L_nextPrec)(L_curArg)(L_nextOp)(L_len)}))((function(){return resolve(L_and)((function(){return resolve(L_or)((function(){return resolve(L_$z)(L_opPrec)(L_nextPrec)}))((function(){return resolve(L_and)((function(){return resolve(L_$p$p)(L_opPrec)(L_nextPrec)}))(L_isRight)}))}))((function(){return resolve(L_and)((function(){return resolve(L_isInfixArg)(L_closes)(L_nextArg)}))(L_true)}))}))}))})()}}}}}}}}}))},
  function(){return resolve(L_defMacro)(lazy(":"))((function(){return function(L_list){return resolve(L_cons)(lazy("cons"))(L_list)}}))},
  function(){return resolve(L_define)(lazy("iprec"))(lazy(0))(lazy("iprec = [['*' '/' '%'] ['+' '-'] [':'] ['<' '>' '<=' '>='] ['==' '!=']]"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("*"))((function(){return resolve(L_cons)(lazy("/"))((function(){return resolve(L_cons)(lazy("%"))(L_nil)}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("+"))((function(){return resolve(L_cons)(lazy("-"))(L_nil)}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy(":"))(L_nil)}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("<"))((function(){return resolve(L_cons)(lazy(">"))((function(){return resolve(L_cons)(lazy("<="))((function(){return resolve(L_cons)(lazy(">="))(L_nil)}))}))}))}))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("=="))((function(){return resolve(L_cons)(lazy("!="))(L_nil)}))}))(L_nil)}))}))}))}))}))},
  function(){return resolve(L_define)(lazy("rightAssoc"))(lazy(0))(lazy("rightAssoc = [':']"))((function(){return resolve(L_cons)(lazy(":"))(L_nil)}))},
  function(){return resolve(L_setValue)(lazy("infixPrecedence"))(L_iprec)},
  function(){return resolve(L_setValue)(lazy("infixRightAssociative"))(L_rightAssoc)},
  function(){return resolve(L_defTokenPack)(lazy("infix"))((function(){return resolve(L_cons)((function(){return resolve(L_flatten)(L_iprec)}))((function(){return resolve(L_cons)(L_nil)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(L_infix)(L_nil)}))(L_nil)}))}))}))},
  function(){return resolve(L_useTokenPack)(lazy("infix"))},
  function(){return resolve(L_defMacro)(lazy("do"))((function(){return function(L_list){return resolve(L_handleDo)(L_list)(L_false)(L_id)}}))},
  function(){return resolve(L_define)(lazy("handleDo"))(lazy(3))(lazy("handleDo list inLet cont = list\n  \\h t D . isNil t\n    cont (inLet ['.' h] [h])\n    doClause (stripParens h) h nil inLet \\newInLet chain .\n      handleDo t newInLet \\rest . cont (chain rest)\n  cont nil"))((function(){return function(L_list){return function(L_inLet){return function(L_cont){return resolve(L_list)((function(){return function(L_h){return function(L_t){return function(L_D){return resolve(L_isNil)(L_t)((function(){return resolve(L_cont)((function(){return resolve(L_inLet)((function(){return resolve(L_cons)(lazy("."))((function(){return resolve(L_cons)(L_h)(L_nil)}))}))((function(){return resolve(L_cons)(L_h)(L_nil)}))}))}))((function(){return resolve(L_doClause)((function(){return resolve(L_stripParens)(L_h)}))(L_h)(L_nil)(L_inLet)((function(){return function(L_newInLet){return function(L_chain){return resolve(L_handleDo)(L_t)(L_newInLet)((function(){return function(L_rest){return resolve(L_cont)((function(){return resolve(L_chain)(L_rest)}))}}))}}}))}))}}}}))((function(){return resolve(L_cont)(L_nil)}))}}}}))},
  function(){return resolve(L_define)(lazy("doClause"))(lazy(5))(lazy("doClause steppingClause clause prefix inLet cont = \\\\\n  makeBind var monad = cont false \\rest . inLet (cons '.') id\n    ['bind' monad ['\\\\' var '.' | rest]]\n  .\n  isCons steppingClause\n    steppingClause \\h t . isTokenString h '='\n      inLet\n        cont true \\rest . [clause | rest]\n        cont true \\rest . ['\\\\\\\\' clause | rest]\n      isTokenString h '<-'\n        isNil t\n          parseErr \"No monad in do-clause: \" clause\n          prefix\n            \\ph pt D . isNil pt\n              makeBind (isNil prefix '_' (head prefix)) t\n              parseErr \"More than one variable in do-clause: \" clause\n            makeBind '_' t\n        doClause t clause [h | prefix] inLet cont\n    makeBind '_' clause"))((function(){return function(L_steppingClause){return function(L_clause){return function(L_prefix){return function(L_inLet){return function(L_cont){return (function(){

var L_makeBind;

L_makeBind = (function(){return function(L_var){return function(L_monad){return resolve(L_cont)(L_false)((function(){return function(L_rest){return resolve(L_inLet)((function(){return resolve(L_cons)(lazy("."))}))(L_id)((function(){return resolve(L_cons)(lazy("bind"))((function(){return resolve(L_cons)(L_monad)((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("\\"))((function(){return resolve(L_cons)(L_var)((function(){return resolve(L_cons)(lazy("."))(L_rest)}))}))}))(L_nil)}))}))}))}}))}}});
return resolve(L_isCons)(L_steppingClause)((function(){return resolve(L_steppingClause)((function(){return function(L_h){return function(L_t){return resolve(L_isTokenString)(L_h)(lazy("="))((function(){return resolve(L_inLet)((function(){return resolve(L_cont)(L_true)((function(){return function(L_rest){return resolve(L_cons)(L_clause)(L_rest)}}))}))((function(){return resolve(L_cont)(L_true)((function(){return function(L_rest){return resolve(L_cons)(lazy("\\\\"))((function(){return resolve(L_cons)(L_clause)(L_rest)}))}}))}))}))((function(){return resolve(L_isTokenString)(L_h)(lazy("<-"))((function(){return resolve(L_isNil)(L_t)((function(){return resolve(L_parseErr)(lazy("No monad in do-clause: "))(L_clause)}))((function(){return resolve(L_prefix)((function(){return function(L_ph){return function(L_pt){return function(L_D){return resolve(L_isNil)(L_pt)((function(){return resolve(L_makeBind)((function(){return resolve(L_isNil)(L_prefix)(lazy("_"))((function(){return resolve(L_head)(L_prefix)}))}))(L_t)}))((function(){return resolve(L_parseErr)(lazy("More than one variable in do-clause: "))(L_clause)}))}}}}))((function(){return resolve(L_makeBind)(lazy("_"))(L_t)}))}))}))((function(){return resolve(L_doClause)(L_t)(L_clause)((function(){return resolve(L_cons)(L_h)(L_prefix)}))(L_inLet)(L_cont)}))}))}}}))}))((function(){return resolve(L_makeBind)(lazy("_"))(L_clause)}))})()}}}}}}))},
  function(){return resolve(L_defTokenPack)(lazy("do"))((function(){return resolve(L_cons)((function(){return resolve(L_cons)(lazy("<-"))(L_nil)}))((function(){return resolve(L_cons)(L_nil)((function(){return resolve(L_cons)(L_nil)(L_nil)}))}))}))},
  function(){return resolve(L_addStdTokenPacks)((function(){return resolve(L_cons)(lazy("list"))((function(){return resolve(L_cons)(lazy("infix"))((function(){return resolve(L_cons)(lazy("do"))(L_nil)}))}))}))},
  function(){return resolve(L_resetStdTokenPacks)}]);

},{}],6:[function(require,module,exports){
(function(global){/*!
 Lo-Dash 0.7.0 lodash.com/license
 Underscore.js 1.3.3 github.com/documentcloud/underscore/blob/master/LICENSE
*/
;(function(e,t){function s(e){return new o(e)}function o(e){if(e&&e.__wrapped__)return e;this.__wrapped__=e}function u(e,t){return function(n,r,i){return e.call(t,n,r,i)}}function a(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||W),s=i?{}:e;if(i)for(var o=t-1;++o<r;)n=e[o]+"",(at.call(s,n)?s[n]:s[n]=[]).push(e[o]);return function(e){if(i){var n=e+"";return at.call(s,n)&&-1<L(s[n],e)}return-1<L(s,e,t)}}function f(e,n){var r=e.b,i=n.b,e=e.a,n=n.a;if(e!==n){if(e>n||e===t)return 1;if(e<n||n===t)return-1}return r<
i?-1:1}function l(e,t,n){function r(){var u=arguments,a=s?this:t;return i||(e=t[o]),n.length&&(u=u.length?n.concat(ct.call(u)):n),this instanceof r?(v.prototype=e.prototype,a=new v,(u=e.apply(a,u))&&$t[typeof u]?u:a):e.apply(a,u)}var i=E(e),s=!n,o=e;return s&&(n=t),r}function c(){for(var e,t,n,s=-1,o=arguments.length,a={e:"",f:"",j:"",q:"",c:{d:""},m:{d:""}};++s<o;)for(t in e=arguments[s],e)n=(n=e[t])==r?"":n,/d|i/.test(t)?("string"==typeof n&&(n={b:n,l:n}),a.c[t]=n.b||"",a.m[t]=n.l||""):a[t]=n;e=
a.a,t=/^[^,]+/.exec(e)[0],n=a.s,a.g=t,a.h=Mt,a.k=Rt,a.n=Pt,a.p=rt,a.r=a.r!==i,a.s=n==r?Ut:n,a.o==r&&(a.o=jt),a.f||(a.f="if(!"+t+")return u");if("e"!=t||!a.c.i)a.c=r;t="",a.s&&(t+="'use strict';"),t+="var j,A,k="+a.g+",u",a.j&&(t+="="+a.j),t+=";"+a.f+";"+a.q+";",a.c&&(t+="var l=k.length;j=-1;",a.m&&(t+="if(l===+l){"),a.o&&(t+="if(z.call(k)==x){k=k.split('')}"),t+=a.c.d+";while(++j<l){A=k[j];"+a.c.i+"}",a.m&&(t+="}"));if(a.m){a.c?t+="else{":a.n&&(t+="var l=k.length;j=-1;if(l&&O(k)){while(++j<l){A=k[j+=''];"+
a.m.i+"}}else{"),a.h||(t+="var v=typeof k=='function'&&r.call(k,'prototype');");if(a.k&&a.r)t+="var o=-1,p=X[typeof k]?m(k):[],l=p.length;"+a.m.d+";while(++o<l){j=p[o];",a.h||(t+="if(!(v&&j=='prototype')){"),t+="A=k[j];"+a.m.i+"",a.h||(t+="}");else{t+=a.m.d+";for(j in k){";if(!a.h||a.r)t+="if(",a.h||(t+="!(v&&j=='prototype')"),!a.h&&a.r&&(t+="&&"),a.r&&(t+="h.call(k,j)"),t+="){";t+="A=k[j];"+a.m.i+";";if(!a.h||a.r)t+="}"}t+="}";if(a.h){t+="var g=k.constructor;";for(n=0;7>n;n++)t+="j='"+a.p[n]+"';if("
,"constructor"==a.p[n]&&(t+="!(g&&g.prototype===k)&&"),t+="h.call(k,j)){A=k[j];"+a.m.i+"}"}if(a.c||a.n)t+="}"}return t+=a.e+";return u",Function("D,E,F,c,I,f,J,h,i,M,O,Q,S,T,W,X,m,r,w,x,z","var G=function("+e+"){"+t+"};return G")(zt,R,D,u,f,ut,ln,at,P,L,w,sn,E,on,Ct,$t,gt,lt,ct,Lt,ht)}function h(e,t){return ot[t]}function p(e){return"\\"+Jt[e]}function d(e){return Xt[e]}function v(){}function m(e,t){if(e&&V.test(t))return"<e%-"+t+"%>";var n=ot.length;return ot[n]="'+__e("+t+")+'",it+n+st}function g
(e,t,n,i){return i?(e=ot.length,ot[e]="';"+i+";__p+='",it+e+st):t?m(r,t):y(r,n)}function y(e,t){if(e&&V.test(t))return"<e%="+t+"%>";var n=ot.length;return ot[n]="'+((__t=("+t+"))==null?'':__t)+'",it+n+st}function b(e){return Vt[e]}function w(e){return ht.call(e)==Et}function E(e){return"function"==typeof e}function S(e,t){var n=i;if(!e||"object"!=typeof e||!t&&w(e))return n;var r=e.constructor;return(!Ft||"function"==typeof e.toString||"string"!=typeof (e+""))&&(!E(r)||r instanceof r)?Dt?(ln(e,function(
e,t,r){return n=!at.call(r,t),i}),n===i):(ln(e,function(e,t){n=t}),n===i||at.call(e,n)):n}function x(e,t,s,o,u){if(e==r)return e;s&&(t=i);if(s=$t[typeof e]){var a=ht.call(e);if(!Wt[a]||Ht&&w(e))return e;var f=a==St,s=f||(a==Ct?on(e,n):s)}if(!s||!t)return s?f?ct.call(e):fn({},e):e;s=e.constructor;switch(a){case xt:return new s(e==n);case Tt:return new s(+e);case Nt:case Lt:return new s(e);case kt:return s(e.source,G.exec(e))}o||(o=[]),u||(u=[]);for(a=o.length;a--;)if(o[a]==e)return u[a];var l=f?s(
a=e.length):{};o.push(e),u.push(l);if(f)for(f=-1;++f<a;)l[f]=x(e[f],t,r,o,u);else cn(e,function(e,n){l[n]=x(e,t,r,o,u)});return l}function T(e,t,s,o){if(e==r||t==r)return e===t;if(e===t)return 0!==e||1/e==1/t;if($t[typeof e]||$t[typeof t])e=e.__wrapped__||e,t=t.__wrapped__||t;var u=ht.call(e);if(u!=ht.call(t))return i;switch(u){case xt:case Tt:return+e==+t;case Nt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case kt:case Lt:return e==t+""}var a=zt[u];if(Ht&&!a&&(a=w(e))&&!w(t)||!a&&(u!=Ct||Ft&&("function"!=typeof 
e.toString&&"string"==typeof (e+"")||"function"!=typeof t.toString&&"string"==typeof (t+""))))return i;s||(s=[]),o||(o=[]);for(u=s.length;u--;)if(s[u]==e)return o[u]==t;var u=-1,f=n,l=0;s.push(e),o.push(t);if(a){l=e.length;if(f=l==t.length)for(;l--&&(f=T(e[l],t[l],s,o)););return f}a=e.constructor,f=t.constructor;if(a!=f&&(!E(a)||!(a instanceof a&&E(f)&&f instanceof f)))return i;for(var c in e)if(at.call(e,c)&&(l++,!at.call(t,c)||!T(e[c],t[c],s,o)))return i;for(c in t)if(at.call(t,c)&&!(l--))return i
;if(Mt)for(;7>++u;)if(c=rt[u],at.call(e,c)&&(!at.call(t,c)||!T(e[c],t[c],s,o)))return i;return n}function N(e,t,n,r){if(!e)return n;var i=e.length,s=3>arguments.length;r&&(t=u(t,r));if(i===+i){var o=jt&&ht.call(e)==Lt?e.split(""):e;for(i&&s&&(n=o[--i]);i--;)n=t(n,o[i],i,e);return n}o=vn(e);for((i=o.length)&&s&&(n=e[o[--i]]);i--;)s=o[i],n=t(n,e[s],s,e);return n}function C(e,t,n){if(e)return t==r||n?e[0]:ct.call(e,0,t)}function k(e,t){var n=[];if(!e)return n;for(var r,i=-1,s=e.length;++i<s;)r=e[i],
sn(r)?ft.apply(n,t?r:k(r)):n.push(r);return n}function L(e,t,n){if(!e)return-1;var r=-1,i=e.length;if(n){if("number"!=typeof n)return r=M(e,t),e[r]===t?r:-1;r=(0>n?yt(0,i+n):n)-1}for(;++r<i;)if(e[r]===t)return r;return-1}function A(e,t,n){var r=-Infinity,i=r;if(!e)return i;var s=-1,o=e.length;if(!t){for(;++s<o;)e[s]>i&&(i=e[s]);return i}for(n&&(t=u(t,n));++s<o;)n=t(e[s],s,e),n>r&&(r=n,i=e[s]);return i}function O(e,t,n){return e?ct.call(e,t==r||n?1:t):[]}function M(e,t,n,r){if(!e)return 0;var i=0,
s=e.length;if(n){r&&(n=D(n,r));for(t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=r+1:s=r}else for(;i<s;)r=i+s>>>1,e[r]<t?i=r+1:s=r;return i}function _(e,t,n,r){var s=[];if(!e)return s;var o=-1,a=e.length,f=[];"function"==typeof t&&(r=n,n=t,t=i);for(n?r&&(n=u(n,r)):n=P;++o<a;)if(r=n(e[o],o,e),t?!o||f[f.length-1]!==r:0>L(f,r))f.push(r),s.push(e[o]);return s}function D(e,t){return qt||pt&&2<arguments.length?pt.call.apply(pt,arguments):l(e,t,ct.call(arguments,2))}function P(e){return e}function H(e){Cn(hn(e),function(
t){var r=s[t]=e[t];o.prototype[t]=function(){var e=[this.__wrapped__];return arguments.length&&ft.apply(e,arguments),e=r.apply(s,e),this.__chain__&&(e=new o(e),e.__chain__=n),e}})}var n=!0,r=null,i=!1,B,j,F,I,q="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(e=global),exports),R=Array.prototype,U=Object.prototype,z=0,W=30,X=e._,V=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,$=/&(?:amp|lt|gt|quot|#x27);/g,J=/\b__p\+='';/g,K=/\b(__p\+=)''\+/g
,Q=/(__e\(.*?\)|\b__t\))\+'';/g,G=/\w*$/,Y=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g,Z=RegExp("^"+(U.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),et=/__token(\d+)__/g,tt=/[&<>"']/g,nt=/['\n\r\t\u2028\u2029\\]/g,rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),it="__token",st="__",ot=[],ut=R.concat,at=U.hasOwnProperty,ft=R.push,lt=U.propertyIsEnumerable,ct=R.slice,ht=U.toString,pt=Z.test(
pt=ct.bind)&&pt,dt=Math.floor,vt=Z.test(vt=Array.isArray)&&vt,mt=e.isFinite,gt=Z.test(gt=Object.keys)&&gt,yt=Math.max,bt=Math.min,wt=Math.random,Et="[object Arguments]",St="[object Array]",xt="[object Boolean]",Tt="[object Date]",Nt="[object Number]",Ct="[object Object]",kt="[object RegExp]",Lt="[object String]",At=e.clearTimeout,Ot=e.setTimeout,Mt,_t,Dt,Pt=n;(function(){function e(){this.x=1}var t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments)Pt=!r;Mt=4>
(n+"").length,Dt="x"!=n[0],_t=(n.splice.call(t,0,1),t[0])})(1);var Ht=!w(arguments),Bt="x"!=ct.call("x")[0],jt="xx"!="x"[0]+Object("x")[0];try{var Ft=("[object Object]",ht.call(e.document||0)==Ct)}catch(It){}var qt=pt&&/\n|Opera/.test(pt+ht.call(e.opera)),Rt=gt&&/^.+$|true/.test(gt+!!e.attachEvent),Ut=!qt,zt={};zt[xt]=zt[Tt]=zt["[object Function]"]=zt[Nt]=zt[Ct]=zt[kt]=i,zt[Et]=zt[St]=zt[Lt]=n;var Wt={};Wt[Et]=Wt["[object Function]"]=i,Wt[St]=Wt[xt]=Wt[Tt]=Wt[Nt]=Wt[Ct]=Wt[kt]=Wt[Lt]=n;var Xt={"&"
:"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Vt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},$t={"boolean":i,"function":n,object:n,number:i,string:i,"undefined":i,unknown:n},Jt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};s.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Kt={a:"e,d,y",j:"e",q:"if(!d)d=i;else if(y)d=c(d,y)",i:"if(d(A,j,e)===false)return u"},Qt={j:"{}"
,q:"var q;if(typeof d!='function'){var hh=d;d=function(A){return A[hh]}}else if(y)d=c(d,y)",i:"q=d(A,j,e);(h.call(u,q)?u[q]++:u[q]=1)"},Gt={j:"true",i:"if(!d(A,j,e))return!u"},Yt={r:i,s:i,a:"n",j:"n",q:"for(var a=1,b=arguments.length;a<b;a++){if(k=arguments[a]){",i:"u[j]=A",e:"}}"},Zt={j:"[]",i:"d(A,j,e)&&u.push(A)"},en={q:"if(y)d=c(d,y)"},tn={i:{l:Kt.i}},nn={j:"",f:"if(!e)return[]",d:{b:"u=Array(l)",l:"u="+(Rt?"Array(l)":"[]")},i:{b:"u[j]=d(A,j,e)",l:"u"+(Rt?"[o]=":".push")+"(d(A,j,e))"}},rn={r:
i,a:"n,d,y",j:"{}",q:"var R=typeof d=='function';if(!R){var t=f.apply(E,arguments)}else if(y)d=c(d,y)",i:"if(R?!d(A,j,n):M(t,j)<0)u[j]=A"};Ht&&(w=function(e){return!!e&&!!at.call(e,"callee")});var sn=vt||function(e){return ht.call(e)==St};E(/x/)&&(E=function(e){return"[object Function]"==ht.call(e)});var on=$t.__proto__!=U?S:function(e,t){if(!e)return i;var n=e.valueOf,r="function"==typeof n&&(r=n.__proto__)&&r.__proto__;return r?e==r||e.__proto__==r&&(t||!w(e)):S(e)},un=c({a:"n",j:"[]",i:"u.push(j)"
}),an=c(Yt,{i:"if(u[j]==null)"+Yt.i}),fn=c(Yt),ln=c(Kt,en,tn,{r:i}),cn=c(Kt,en,tn),hn=c({r:i,a:"n",j:"[]",i:"if(S(A))u.push(j)",e:"u.sort()"}),pn=c({a:"n",j:"{}",i:"u[A]=j"}),dn=c({a:"A",j:"true",q:"var H=z.call(A),l=A.length;if(D[H]"+(Ht?"||O(A)":"")+"||(H==W&&l===+l&&S(A.splice)))return!l",i:{l:"return false"}}),vn=gt?function(e){var t=typeof e;return"function"==t&&lt.call(e,"prototype")?un(e):e&&$t[t]?gt(e):[]}:un,mn=c(Yt,{a:"n,cc,N",q:"var b,P,dd,ee,C=arguments,a=0;if(N==T){b=2;dd=C[3];ee=C[4]}else{b=C.length;dd=[];ee=[]}while(++a<b){if(k=C[a]){"
,i:"if((cc=A)&&((P=Q(cc))||T(cc))){var K=false,ff=dd.length;while(ff--)if(K=dd[ff]==cc)break;if(K){u[j]=ee[ff]}else{dd.push(cc);ee.push(A=(A=u[j])&&P?(Q(A)?A:[]):(T(A)?A:{}));u[j]=G(A,cc,T,dd,ee)}}else if(cc!=null)u[j]=cc"}),gn=c(rn),yn=c({a:"n",j:"[]",i:"u"+(Rt?"[o]=":".push")+"([j,A])"}),bn=c(rn,{q:"if(typeof d!='function'){var q,t=f.apply(E,arguments),l=t.length;for(j=1;j<l;j++){q=t[j];if(q in n)u[q]=n[q]}}else{if(y)d=c(d,y)",i:"if(d(A,j,n))u[j]=A",e:"}"}),wn=c({a:"n",j:"[]",i:"u.push(A)"}),En=
c({a:"e,gg",j:"false",o:i,d:{b:"if(z.call(e)==x)return e.indexOf(gg)>-1"},i:"if(A===gg)return true"}),Sn=c(Kt,Qt),xn=c(Kt,Gt),Tn=c(Kt,Zt),Nn=c(Kt,en,{j:"",i:"if(d(A,j,e))return A"}),Cn=c(Kt,en),kn=c(Kt,Qt,{i:"q=d(A,j,e);(h.call(u,q)?u[q]:u[q]=[]).push(A)"}),Ln=c(nn,{a:"e,U",q:"var C=w.call(arguments,2),R=typeof U=='function'",i:{b:"u[j]=(R?U:A[U]).apply(A,C)",l:"u"+(Rt?"[o]=":".push")+"((R?U:A[U]).apply(A,C))"}}),An=c(Kt,nn),On=c(nn,{a:"e,aa",i:{b:"u[j]=A[aa]",l:"u"+(Rt?"[o]=":".push")+"(A[aa])"}
}),Mn=c({a:"e,d,B,y",j:"B",q:"var V=arguments.length<3;if(y)d=c(d,y)",d:{b:"if(V)u=k[++j]"},i:{b:"u=d(u,A,j,e)",l:"u=V?(V=false,A):d(u,A,j,e)"}}),_n=c(Kt,Zt,{i:"!"+Zt.i}),Dn=c(Kt,Gt,{j:"false",i:Gt.i.replace("!","")}),Pn=c(Kt,Qt,nn,{i:{b:"u[j]={a:d(A,j,e),b:j,c:A}",l:"u"+(Rt?"[o]=":".push")+"({a:d(A,j,e),b:j,c:A})"},e:"u.sort(I);l=u.length;while(l--)u[l]=u[l].c"}),Hn=c(Zt,{a:"e,Z",q:"var t=[];J(Z,function(A,q){t.push(q)});var bb=t.length",i:"for(var q,Y=true,s=0;s<bb;s++){q=t[s];if(!(Y=A[q]===Z[q]))break}Y&&u.push(A)"
}),Bn=c({r:i,s:i,a:"n",j:"n",q:"var L=arguments,l=L.length;if(l>1){for(var j=1;j<l;j++)u[L[j]]=F(u[L[j]],u);return u}",i:"if(S(u[j]))u[j]=F(u[j],u)"});s.VERSION="0.7.0",s.after=function(e,t){return 1>e?t():function(){if(1>--e)return t.apply(this,arguments)}},s.bind=D,s.bindAll=Bn,s.chain=function(e){return e=new o(e),e.__chain__=n,e},s.clone=x,s.compact=function(e){var t=[];if(!e)return t;for(var n=-1,r=e.length;++n<r;)e[n]&&t.push(e[n]);return t},s.compose=function(){var e=arguments;return function(
){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},s.contains=En,s.countBy=Sn,s.debounce=function(e,t,n){function i(){a=r,n||(o=e.apply(u,s))}var s,o,u,a;return function(){var r=n&&!a;return s=arguments,u=this,At(a),a=Ot(i,t),r&&(o=e.apply(u,s)),o}},s.defaults=an,s.defer=function(e){var n=ct.call(arguments,1);return Ot(function(){return e.apply(t,n)},1)},s.delay=function(e,n){var r=ct.call(arguments,2);return Ot(function(){return e.apply(t,r)},n)},s.difference=function(e){
var t=[];if(!e)return t;for(var n=-1,r=e.length,i=ut.apply(t,arguments),i=a(i,r);++n<r;)i(e[n])||t.push(e[n]);return t},s.escape=function(e){return e==r?"":(e+"").replace(tt,d)},s.every=xn,s.extend=fn,s.filter=Tn,s.find=Nn,s.first=C,s.flatten=k,s.forEach=Cn,s.forIn=ln,s.forOwn=cn,s.functions=hn,s.groupBy=kn,s.has=function(e,t){return e?at.call(e,t):i},s.identity=P,s.indexOf=L,s.initial=function(e,t,n){return e?ct.call(e,0,-(t==r||n?1:t)):[]},s.intersection=function(e){var t=[];if(!e)return t;var n
,r=arguments.length,i=[],s=-1,o=e.length;e:for(;++s<o;)if(n=e[s],0>L(t,n)){for(var u=1;u<r;u++)if(!(i[u]||(i[u]=a(arguments[u])))(n))continue e;t.push(n)}return t},s.invert=pn,s.invoke=Ln,s.isArguments=w,s.isArray=sn,s.isBoolean=function(e){return e===n||e===i||ht.call(e)==xt},s.isElement=function(e){return e?1===e.nodeType:i},s.isEmpty=dn,s.isEqual=T,s.isFinite=function(e){return mt(e)&&ht.call(e)==Nt},s.isFunction=E,s.isNaN=function(e){return ht.call(e)==Nt&&e!=+e},s.isNull=function(e){return e===
r},s.isObject=function(e){return e?$t[typeof e]:i},s.isUndefined=function(e){return e===t},s.keys=vn,s.last=function(e,t,n){if(e){var i=e.length;return t==r||n?e[i-1]:ct.call(e,-t||i)}},s.lastIndexOf=function(e,t,n){if(!e)return-1;var r=e.length;for(n&&"number"==typeof n&&(r=(0>n?yt(0,r+n):bt(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},s.lateBind=function(e,t){return l(t,e,ct.call(arguments,2))},s.map=An,s.max=A,s.memoize=function(e,t){var n={};return function(){var r=t?t.apply(this,arguments)
:arguments[0];return at.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},s.merge=mn,s.min=function(e,t,n){var r=Infinity,i=r;if(!e)return i;var s=-1,o=e.length;if(!t){for(;++s<o;)e[s]<i&&(i=e[s]);return i}for(n&&(t=u(t,n));++s<o;)n=t(e[s],s,e),n<r&&(r=n,i=e[s]);return i},s.mixin=H,s.noConflict=function(){return e._=X,this},s.object=function(e,t){if(!e)return{};for(var n=-1,r=e.length,i={};++n<r;)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},s.omit=gn,s.once=function(e){var t,s=i;return function(){return s?
t:(s=n,t=e.apply(this,arguments),e=r,t)}},s.pairs=yn,s.partial=function(e){return l(e,ct.call(arguments,1))},s.pick=bn,s.pluck=On,s.random=function(e,t){return e==r&&t==r?wt():(e=+e||0,t==r&&(t=e,e=0),e+dt(wt()*((+t||0)-e+1)))},s.range=function(e,t,n){e=+e||0,n=+n||1,t==r&&(t=e,e=0);for(var i=-1,t=yt(0,Math.ceil((t-e)/n)),s=Array(t);++i<t;)s[i]=e,e+=n;return s},s.reduce=Mn,s.reduceRight=N,s.reject=_n,s.rest=O,s.result=function(e,t){if(!e)return r;var n=e[t];return E(n)?e[t]():n},s.shuffle=function(
e){if(!e)return[];for(var t,n=-1,r=e.length,i=Array(r);++n<r;)t=dt(wt()*(n+1)),i[n]=i[t],i[t]=e[n];return i},s.size=function(e){if(!e)return 0;var t=e.length;return t===+t?t:vn(e).length},s.some=Dn,s.sortBy=Pn,s.sortedIndex=M,s.tap=function(e,t){return t(e),e},s.template=function(e,t,n){n||(n={});var e=e+"",o,u;o=n.escape;var a=n.evaluate,f=n.interpolate,l=s.templateSettings,c=n=n.variable||l.variable;o==r&&(o=l.escape),a==r&&(a=l.evaluate||i),f==r&&(f=l.interpolate),o&&(e=e.replace(o,m)),f&&(e=e
.replace(f,y)),a!=B&&(B=a,I=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(a?"|"+a.source:""),"g")),o=ot.length,e=e.replace(I,g),o=o!=ot.length,e="__p += '"+e.replace(nt,p).replace(et,h)+"';",ot.length=0,c||(n=j||"obj",o?e="with("+n+"){"+e+"}":(n!=j&&(j=n,F=RegExp("(\\(\\s*)"+n+"\\."+n+"\\b","g")),e=e.replace(Y,"$&"+n+".").replace(F,"$1__d"))),e=(o?e.replace(J,""):e).replace(K,"$1").replace(Q,"$1;"),e="function("+n+"){"+(c?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}"
:(c?"":",__d="+n+"."+n+"||"+n)+";")+e+"return __p}";try{u=Function("_","return "+e)(s)}catch(d){throw d.source=e,d}return t?u(t):(u.source=e,u)},s.throttle=function(e,t){function n(){a=new Date,u=r,s=e.apply(o,i)}var i,s,o,u,a=0;return function(){var r=new Date,f=t-(r-a);return i=arguments,o=this,0>=f?(a=r,s=e.apply(o,i)):u||(u=Ot(n,f)),s}},s.times=function(e,t,n){var r=-1;if(n)for(;++r<e;)t.call(n,r);else for(;++r<e;)t(r)},s.toArray=function(e){if(!e)return[];var t=e.length;return t===+t?(Bt?ht.
call(e)==Lt:"string"==typeof e)?e.split(""):ct.call(e):wn(e)},s.unescape=function(e){return e==r?"":(e+"").replace($,b)},s.union=function(){for(var e=-1,t=[],n=ut.apply(t,arguments),r=n.length;++e<r;)0>L(t,n[e])&&t.push(n[e]);return t},s.uniq=_,s.uniqueId=function(e){var t=z++;return e?e+t:t},s.values=wn,s.where=Hn,s.without=function(e){var t=[];if(!e)return t;for(var n=-1,r=e.length,i=a(arguments,1,20);++n<r;)i(e[n])||t.push(e[n]);return t},s.wrap=function(e,t){return function(){var n=[e];return arguments
.length&&ft.apply(n,arguments),t.apply(this,n)}},s.zip=function(e){if(!e)return[];for(var t=-1,n=A(On(arguments,"length")),r=Array(n);++t<n;)r[t]=On(arguments,t);return r},s.all=xn,s.any=Dn,s.collect=An,s.detect=Nn,s.drop=O,s.each=Cn,s.foldl=Mn,s.foldr=N,s.head=C,s.include=En,s.inject=Mn,s.methods=hn,s.select=Tn,s.tail=O,s.take=C,s.unique=_,Cn({Date:Tt,Number:Nt,RegExp:kt,String:Lt},function(e,t){s["is"+t]=function(t){return ht.call(t)==e}}),o.prototype=s.prototype,H(s),o.prototype.chain=function(
){return this.__chain__=n,this},o.prototype.value=function(){return this.__wrapped__},Cn("pop push reverse shift sort splice unshift".split(" "),function(e){var t=R[e];o.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),_t&&e.length===0&&delete e[0],this.__chain__&&(e=new o(e),e.__chain__=n),e}}),Cn(["concat","join","slice"],function(e){var t=R[e];o.prototype[e]=function(){var e=t.apply(this.__wrapped__,arguments);return this.__chain__&&(e=new o(e),e.__chain__=n),e}}),typeof 
define=="function"&&typeof define.amd=="object"&&define.amd?(e._=s,define(function(){return s})):q?"object"==typeof module&&module&&module.exports==q?(module.exports=s)._=s:q._=s:e._=s})(this);
})(self)
},{}],7:[function(require,module,exports){
(function(global){/**
 * marked - A markdown parser (https://github.com/chjj/marked)
 * Copyright (c) 2011-2012, Christopher Jeffrey. (MIT Licensed)
 */

;(function() {

/**
 * Block-Level Grammar
 */

var block = {
  newline: /^\n+/,
  code: /^( {4}[^\n]+\n*)+/,
  fences: noop,
  hr: /^( *[-*_]){3,} *(?:\n+|$)/,
  heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,
  lheading: /^([^\n]+)\n *(=|-){3,} *\n*/,
  blockquote: /^( *>[^\n]+(\n[^\n]+)*\n*)+/,
  list: /^( *)(bull) [^\0]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
  html: /^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,
  def: /^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,
  paragraph: /^([^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+\n*/,
  text: /^[^\n]+/
};

block.bullet = /(?:[*+-]|\d+\.)/;
block.item = /^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;
block.item = replace(block.item, 'gm')
  (/bull/g, block.bullet)
  ();

block.list = replace(block.list)
  (/bull/g, block.bullet)
  ('hr', /\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)
  ();

block.html = replace(block.html)
  ('comment', /<!--[^\0]*?-->/)
  ('closed', /<(tag)[^\0]+?<\/\1>/)
  ('closing', /<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)
  (/tag/g, tag())
  ();

block.paragraph = replace(block.paragraph)
  ('hr', block.hr)
  ('heading', block.heading)
  ('lheading', block.lheading)
  ('blockquote', block.blockquote)
  ('tag', '<' + tag())
  ('def', block.def)
  ();

block.normal = {
  fences: block.fences,
  paragraph: block.paragraph
};

block.gfm = {
  fences: /^ *(```|~~~) *(\w+)? *\n([^\0]+?)\s*\1 *(?:\n+|$)/,
  paragraph: /^/
};

block.gfm.paragraph = replace(block.paragraph)
  ('(?!', '(?!' + block.gfm.fences.source.replace('\\1', '\\2') + '|')
  ();

/**
 * Block Lexer
 */

block.lexer = function(src) {
  var tokens = [];

  tokens.links = {};

  src = src
    .replace(/\r\n|\r/g, '\n')
    .replace(/\t/g, '    ');

  return block.token(src, tokens, true);
};

block.token = function(src, tokens, top) {
  var src = src.replace(/^ +$/gm, '')
    , next
    , loose
    , cap
    , item
    , space
    , i
    , l
    , start;

  while (src) {
    start = src.length;
    // newline
    if (cap = block.newline.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[0].length > 1) {
        tokens.push({
          type: 'space'
        });
      }
    }

    // code
    if (cap = block.code.exec(src)) {
      src = src.substring(cap[0].length);
      cap = cap[0].replace(/^ {4}/gm, '');
      tokens.push({
        type: 'code',
        text: !options.pedantic
          ? cap.replace(/\n+$/, '')
          : cap,
        textLen: start - src.length,
        remain: src.length
      });
      continue;
    }

    // fences (gfm)
    if (cap = block.fences.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'code',
        lang: cap[2],
        text: cap[3],
        textLen: start - src.length,
        remain: src.length
      });
      continue;
    }

    // heading
    if (cap = block.heading.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'heading',
        depth: cap[1].length,
        text: cap[2]
      });
      continue;
    }

    // lheading
    if (cap = block.lheading.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'heading',
        depth: cap[2] === '=' ? 1 : 2,
        text: cap[1]
      });
      continue;
    }

    // hr
    if (cap = block.hr.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'hr'
      });
      continue;
    }

    // blockquote
    if (cap = block.blockquote.exec(src)) {
      src = src.substring(cap[0].length);

      tokens.push({
        type: 'blockquote_start'
      });

      cap = cap[0].replace(/^ *> ?/gm, '');

      // Pass `top` to keep the current
      // "toplevel" state. This is exactly
      // how markdown.pl works.
      block.token(cap, tokens, top);

      tokens.push({
        type: 'blockquote_end'
      });

      continue;
    }

    // list
    if (cap = block.list.exec(src)) {
      src = src.substring(cap[0].length);

      tokens.push({
        type: 'list_start',
        ordered: isFinite(cap[2])
      });

      // Get each top-level item.
      cap = cap[0].match(block.item);

      next = false;
      l = cap.length;
      i = 0;

      for (; i < l; i++) {
        item = cap[i];

        // Remove the list item's bullet
        // so it is seen as the next token.
        space = item.length;
        item = item.replace(/^ *([*+-]|\d+\.) +/, '');

        // Outdent whatever the
        // list item contains. Hacky.
        if (~item.indexOf('\n ')) {
          space -= item.length;
          item = !options.pedantic
            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')
            : item.replace(/^ {1,4}/gm, '');
        }

        // Determine whether item is loose or not.
        // Use: /(^|\n)(?! )[^\n]+\n\n(?!\s*$)/
        // for discount behavior.
        loose = next || /\n\n(?!\s*$)/.test(item);
        if (i !== l - 1) {
          next = item[item.length-1] === '\n';
          if (!loose) loose = next;
        }

        tokens.push({
          type: loose
            ? 'loose_item_start'
            : 'list_item_start'
        });

        // Recurse.
        block.token(item, tokens);

        tokens.push({
          type: 'list_item_end'
        });
      }

      tokens.push({
        type: 'list_end'
      });

      continue;
    }

    // html
    if (cap = block.html.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: options.sanitize
          ? 'paragraph'
          : 'html',
        pre: cap[1] === 'pre',
        text: cap[0]
      });
      continue;
    }

    // def
    if (top && (cap = block.def.exec(src))) {
      src = src.substring(cap[0].length);
      tokens.links[cap[1].toLowerCase()] = {
        href: cap[2],
        title: cap[3]
      };
      continue;
    }

    // top-level paragraph
    if (top && (cap = block.paragraph.exec(src))) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'paragraph',
        text: cap[0]
      });
      continue;
    }

    // text
    if (cap = block.text.exec(src)) {
      // Top-level should never reach here.
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'text',
        text: cap[0]
      });
      continue;
    }
  }

  return tokens;
};

/**
 * Inline Processing
 */

var inline = {
  escape: /^\\([\\`*{}\[\]()#+\-.!_>])/,
  autolink: /^<([^ >]+(@|:\/)[^ >]+)>/,
  url: noop,
  tag: /^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,
  link: /^!?\[(inside)\]\(href\)/,
  reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/,
  nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,
  strong: /^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,
  em: /^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,
  code: /^(`+)([^\0]*?[^`])\1(?!`)/,
  br: /^ {2,}\n(?!\s*$)/,
  text: /^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/
};

inline._linkInside = /(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/;
inline._linkHref = /\s*<?([^\s]*?)>?(?:\s+['"]([^\0]*?)['"])?\s*/;

inline.link = replace(inline.link)
  ('inside', inline._linkInside)
  ('href', inline._linkHref)
  ();

inline.reflink = replace(inline.reflink)
  ('inside', inline._linkInside)
  ();

inline.normal = {
  url: inline.url,
  strong: inline.strong,
  em: inline.em,
  text: inline.text
};

inline.pedantic = {
  strong: /^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,
  em: /^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/
};

inline.gfm = {
  url: /^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,
  text: /^[^\0]+?(?=[\\<!\[_*`]|https?:\/\/| {2,}\n|$)/
};

/**
 * Inline Lexer
 */

inline.lexer = function(src) {
  var out = ''
    , links = tokens.links
    , link
    , text
    , href
    , cap;

  while (src) {
    // escape
    if (cap = inline.escape.exec(src)) {
      src = src.substring(cap[0].length);
      out += cap[1];
      continue;
    }

    // autolink
    if (cap = inline.autolink.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[2] === '@') {
        text = cap[1][6] === ':'
          ? mangle(cap[1].substring(7))
          : mangle(cap[1]);
        href = mangle('mailto:') + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      out += '<a href="'
        + href
        + '">'
        + text
        + '</a>';
      continue;
    }

    // url (gfm)
    if (cap = inline.url.exec(src)) {
      src = src.substring(cap[0].length);
      text = escape(cap[1]);
      href = text;
      out += '<a href="'
        + href
        + '">'
        + text
        + '</a>';
      continue;
    }

    // tag
    if (cap = inline.tag.exec(src)) {
      src = src.substring(cap[0].length);
      out += options.sanitize
        ? escape(cap[0])
        : cap[0];
      continue;
    }

    // link
    if (cap = inline.link.exec(src)) {
      src = src.substring(cap[0].length);
      out += outputLink(cap, {
        href: cap[2],
        title: cap[3]
      });
      continue;
    }

    // reflink, nolink
    if ((cap = inline.reflink.exec(src))
        || (cap = inline.nolink.exec(src))) {
      src = src.substring(cap[0].length);
      link = (cap[2] || cap[1]).replace(/\s+/g, ' ');
      link = links[link.toLowerCase()];
      if (!link || !link.href) {
        out += cap[0][0];
        src = cap[0].substring(1) + src;
        continue;
      }
      out += outputLink(cap, link);
      continue;
    }

    // strong
    if (cap = inline.strong.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<strong>'
        + inline.lexer(cap[2] || cap[1])
        + '</strong>';
      continue;
    }

    // em
    if (cap = inline.em.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<em>'
        + inline.lexer(cap[2] || cap[1])
        + '</em>';
      continue;
    }

    // code
    if (cap = inline.code.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<code>'
        + escape(cap[2], true)
        + '</code>';
      continue;
    }

    // br
    if (cap = inline.br.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<br>';
      continue;
    }

    // text
    if (cap = inline.text.exec(src)) {
      src = src.substring(cap[0].length);
      out += escape(cap[0]);
      continue;
    }
  }

  return out;
};

function outputLink(cap, link) {
  if (cap[0][0] !== '!') {
    return '<a href="'
      + escape(link.href)
      + '"'
      + (link.title
      ? ' title="'
      + escape(link.title)
      + '"'
      : '')
      + '>'
      + inline.lexer(cap[1])
      + '</a>';
  } else {
    return '<img src="'
      + escape(link.href)
      + '" alt="'
      + escape(cap[1])
      + '"'
      + (link.title
      ? ' title="'
      + escape(link.title)
      + '"'
      : '')
      + '>';
  }
}

/**
 * Parsing
 */

var tokens
  , token;

function next() {
  return token = tokens.pop();
}

function tok() {
  switch (token.type) {
    case 'space': {
      return '';
    }
    case 'hr': {
      return '<hr>\n';
    }
    case 'heading': {
      return '<h'
        + token.depth
        + '>'
        + inline.lexer(token.text)
        + '</h'
        + token.depth
        + '>\n';
    }
    case 'code': {
      if (options.highlight) {
        token.code = options.highlight(token.text, token.lang);
        if (token.code != null && token.code !== token.text) {
          token.escaped = true;
          token.text = token.code;
        }
      }

      if (!token.escaped) {
        token.text = escape(token.text, true);
      }

      return '<pre><code'
        + (token.lang
        ? ' class="lang-'
        + token.lang
        + '"'
        : '')
        + '>'
        + token.text
        + '</code></pre>\n';
    }
    case 'blockquote_start': {
      var body = '';

      while (next().type !== 'blockquote_end') {
        body += tok();
      }

      return '<blockquote>\n'
        + body
        + '</blockquote>\n';
    }
    case 'list_start': {
      var type = token.ordered ? 'ol' : 'ul'
        , body = '';

      while (next().type !== 'list_end') {
        body += tok();
      }

      return '<'
        + type
        + '>\n'
        + body
        + '</'
        + type
        + '>\n';
    }
    case 'list_item_start': {
      var body = '';

      while (next().type !== 'list_item_end') {
        body += token.type === 'text'
          ? parseText()
          : tok();
      }

      return '<li>'
        + body
        + '</li>\n';
    }
    case 'loose_item_start': {
      var body = '';

      while (next().type !== 'list_item_end') {
        body += tok();
      }

      return '<li>'
        + body
        + '</li>\n';
    }
    case 'html': {
      return !token.pre && !options.pedantic
        ? inline.lexer(token.text)
        : token.text;
    }
    case 'paragraph': {
      return '<p>'
        + inline.lexer(token.text)
        + '</p>\n';
    }
    case 'text': {
      return '<p>'
        + parseText()
        + '</p>\n';
    }
  }
}

function parseText() {
  var body = token.text
    , top;

  while ((top = tokens[tokens.length-1])
         && top.type === 'text') {
    body += '\n' + next().text;
  }

  return inline.lexer(body);
}

function parse(src) {
  tokens = src.reverse();

  var out = '';
  while (next()) {
    out += tok();
  }

  tokens = null;
  token = null;

  return out;
}

/**
 * Helpers
 */

function escape(html, encode) {
  return html
    .replace(!encode ? /&(?!#?\w+;)/g : /&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function mangle(text) {
  var out = ''
    , l = text.length
    , i = 0
    , ch;

  for (; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = 'x' + ch.toString(16);
    }
    out += '&#' + ch + ';';
  }

  return out;
}

function tag() {
  var tag = '(?!(?:'
    + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'
    + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'
    + '|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b';

  return tag;
}

function replace(regex, opt) {
  regex = regex.source;
  opt = opt || '';
  return function self(name, val) {
    if (!name) return new RegExp(regex, opt);
    val = val.source || val;
    val = val.replace(/(^|[^\[])\^/g, '$1');
    regex = regex.replace(name, val);
    return self;
  };
}

function noop() {}
noop.exec = noop;

/**
 * Marked
 */

function marked(src, opt) {
  setOptions(opt);
  if (opt && opt.saveLex) {
    return [parse(block.lexer(src)), block.lexer(src)];
  } else {
    return parse(block.lexer(src));
  }
}

/**
 * Options
 */

var options
  , defaults;

function setOptions(opt) {
  if (!opt) opt = defaults;
  if (options === opt) return;
  options = opt;

  if (options.gfm) {
    block.fences = block.gfm.fences;
    block.paragraph = block.gfm.paragraph;
    inline.text = inline.gfm.text;
    inline.url = inline.gfm.url;
  } else {
    block.fences = block.normal.fences;
    block.paragraph = block.normal.paragraph;
    inline.text = inline.normal.text;
    inline.url = inline.normal.url;
  }

  if (options.pedantic) {
    inline.em = inline.pedantic.em;
    inline.strong = inline.pedantic.strong;
  } else {
    inline.em = inline.normal.em;
    inline.strong = inline.normal.strong;
  }
}

marked.options =
marked.setOptions = function(opt) {
  defaults = opt;
  setOptions(opt);
  return marked;
};

marked.setOptions({
  gfm: true,
  pedantic: false,
  sanitize: false,
  highlight: null
});

/**
 * Expose
 */

marked.parser = function(src, opt) {
  setOptions(opt);
  return parse(src);
};

marked.lexer = function(src, opt) {
  setOptions(opt);
  return block.lexer(src);
};

marked.parse = marked;

if (typeof module !== 'undefined') {
  module.exports = marked;
} else {
  this.marked = marked;
}

}).call(function() {
  return this || (typeof window !== 'undefined' ? window : global);
}());

})(self)
},{}],8:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
(function() {
  var $, DOWN_ARROW, END, ENTER, ESC, HOME, LEFT_ARROW, Notebook, PAGE_DOWN, PAGE_UP, Q, RIGHT_ARROW, UP_ARROW, arrows, bindMarkupDiv, bindSlider, chooseSlide, cleanEmptyNodes, closeWindow, countSlide, createNode, delay, editingEnabled, enableEditing, enableSlideControls, firstSlide, getElementCode, handleInternalSections, hideSlide, insertControls, isLeisureCode, jQuery, lastSlide, makeMarkupDiv, makeSection, makeSlideDiv, markupButtons, markupElement, markupSlideContent, markupSlides, mergeLeisureCode, mergeUp, nextSibling, nextSlide, nthSlide, oldSlide, padSlide, presentLeisureCode, presentSlide, prevSlide, previousSibling, remove, showSlide, slideControls, slideControlsEnabled, slideKeyListener, slideName, slidePat, slides, sliding, textNode, unwrap, unwrapContent, _, _ref,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  jQuery = window.jQuery, $ = window.$, _ = window._;

  _ref = Notebook = require('./notebook'), ENTER = _ref.ENTER, delay = _ref.delay, textNode = _ref.textNode, createNode = _ref.createNode, remove = _ref.remove, unwrap = _ref.unwrap, insertControls = _ref.insertControls, cleanEmptyNodes = _ref.cleanEmptyNodes, isLeisureCode = _ref.isLeisureCode, getElementCode = _ref.getElementCode, previousSibling = _ref.previousSibling, nextSibling = _ref.nextSibling, presentLeisureCode = _ref.presentLeisureCode, mergeLeisureCode = _ref.mergeLeisureCode, closeWindow = _ref.closeWindow, markupButtons = _ref.markupButtons, ESC = _ref.ESC, HOME = _ref.HOME, END = _ref.END, PAGE_UP = _ref.PAGE_UP, PAGE_DOWN = _ref.PAGE_DOWN, LEFT_ARROW = _ref.LEFT_ARROW, RIGHT_ARROW = _ref.RIGHT_ARROW, UP_ARROW = _ref.UP_ARROW, DOWN_ARROW = _ref.DOWN_ARROW, arrows = _ref.arrows;

  Q = 81;

  window.markup = function(md) {
    var maindoc, nodes, _ref1;

    nodes = document.querySelectorAll('[maindoc]');
    if (nodes.length === 0) {
      maindoc = createNode("<div maindoc></div>");
      document.body.insertBefore(maindoc, document.body.firstChild);
      nodes = [maindoc];
    } else {
      maindoc = nodes[0];
    }
    md = ((_ref1 = md != null ? md.replace(/\r\n/mg, '\n') : void 0) != null ? _ref1 : maindoc.innerHTML.replace(/^\s*<!--*/, '').replace(/-->\s*\n*/m, '')).trim();
    document.body.classList.add('hideControls');
    markupSlides(maindoc, md);
    return insertControls(maindoc);
  };

  lastSlide = null;

  if (typeof console !== "undefined" && console !== null) {
    if (typeof console.error === "function") {
      console.error(new Error("REMINDER: Incompatibility: using -webkit-calc").stack);
    }
  }

  slidePat = /^(\*\*\*[^\n]*\n(?:--?\n)?)/m;

  slideName = /^\*\*\*([^\n]*)\n(?:--?\n)?/m;

  sliding = false;

  markupSlides = function(el, md) {
    var div, hasCode, slides;

    hasCode = markupSlideContent(el, md);
    slides = el.querySelectorAll('[leisureSection]');
    if (slides.length <= (el.querySelector('[leisureSection="Leisure Controls"]') ? 2 : 1)) {
      document.body.classList.add("oneSlide");
    }
    div = createNode("<div class='slide-controls'>\n  <div id='slide-killbutton' onclick='toggleSlideShow()' style='float: right'><button>Slides</button></div>\n  <div id='slide-num' style='float: right; margin-right: 10px'></div>\n</div>");
    markupButtons(div);
    el.appendChild(div);
    if (location.search && _.find(location.search.slice(1).split('&'), (function(p) {
      return p.match(/^slides=/);
    }))) {
      sliding = true;
      showSlide($(chooseSlide()));
    } else {
      document.body.classList.add('scroll');
    }
    return hasCode;
  };

  markupSlideContent = function(el, md, noMain) {
    var content, hasCode, i, m, p, pageType, pages, _i, _ref1, _ref2;

    pages = md.split(slidePat);
    hasCode = false;
    if (pages.length > 1) {
      document.body.classList.add('slide-container');
      el.innerHTML = '';
      bindSlider();
      el.removeAttribute('doc');
      if (pages.length === 3 && !pages[0] && !pages[2]) {
        pages[2] = '\n';
      }
      for (i = _i = 0, _ref1 = pages.length; _i < _ref1; i = _i += 2) {
        p = pages[i];
        if (p) {
          pageType = i > 0 ? (m = (_ref2 = pages[i - 1].match(slidePat)) != null ? _ref2[1] : void 0, m.match(/\n-\n/) ? ['continuation', 'hiddenPage'] : m.match(/\n--\n/) ? ['hiddenPage', 'secretPage'] : []) : [];
          content = makeSlideDiv(el, pageType, (i > 0 ? pages[i - 1].match(slideName)[1].trim() : 'Main'));
          if (i > 0) {
            hasCode = (markupElement(content, pages[i - 1] + p)) || hasCode;
          } else {
            hasCode = (markupElement(content, '***\n' + p)) || hasCode;
          }
          padSlide(content, (i > 0 ? pages[i - 1] : '***\n'));
        }
      }
    } else {
      content = makeSlideDiv(el, ['page'], 'Main');
      while (el.firstChild !== content.parentNode) {
        content.appendChild(el.firstChild);
      }
      hasCode = markupElement(content, md);
      padSlide(content, '***\n');
      if (noMain) {
        unwrapContent(content);
      }
    }
    return hasCode;
  };

  padSlide = function(content, header) {
    var div, range;

    if (!content.firstChild || isLeisureCode(content.firstChild)) {
      range = document.createRange();
      range.setStart(content, 0);
      range.setEnd(content, 0);
      div = makeMarkupDiv(range, header);
      div.appendChild(createNode('<br>'));
    }
    if (isLeisureCode(content.lastChild)) {
      range = document.createRange();
      range.setStartAfter(content.lastChild);
      range.setEndAfter(content.lastChild);
      div = makeMarkupDiv(range, '\n');
      return div.appendChild(createNode('<br>'));
    }
  };

  unwrapContent = function(content) {
    var el, section;

    section = content.parentNode;
    el = section.parentNode;
    el.insertBefore(content, section);
    remove(section);
    return unwrap(content);
  };

  makeSlideDiv = function(el, pageTypes, title) {
    var content, div, pageType, sectionTitle, _i, _len;

    lastSlide = div = createNode("<div class='leisure_page'></div>");
    div.setAttribute('leisureSection', title);
    div.setAttribute('doc', '');
    div.setAttribute('slide', '');
    div.classList.add('slide');
    div.classList.add('ui-corner-all');
    div.classList.add('ui-widget');
    div.classList.add('ui-widget-content');
    for (_i = 0, _len = pageTypes.length; _i < _len; _i++) {
      pageType = pageTypes[_i];
      div.classList.add(pageType);
    }
    el.appendChild(div);
    sectionTitle = createNode("<div class='pageTitle'>" + title + "</div>");
    sectionTitle.setAttribute('leisureoutput', '');
    div.appendChild(sectionTitle);
    content = createNode("<div class='pageContent'></div>");
    div.appendChild(content);
    return content;
  };

  chooseSlide = function() {
    var param;

    param = _.find(location.search.slice(1).split('&'), (function(p) {
      return p.match(/^slide=.*/);
    }));
    console.log(param);
    if (param) {
      return document.querySelector("[slide='" + (param.split('=')[1]) + "']");
    } else {
      return document.querySelector('[maindoc]').firstElementChild;
    }
  };

  oldSlide = 0;

  window.toggleSlideShow = function() {
    sliding = $(document.body).is('.scroll');
    enableSlideControls(true);
    enableEditing(true);
    if (sliding) {
      $(document.body).removeClass('scroll');
      return showSlide(nthSlide(oldSlide));
    } else {
      oldSlide = $('.slide.showing').attr('slide');
      hideSlide($('.slide.showing'));
      $(document.body).addClass('scroll');
      return $('#slide-num').html('');
    }
  };

  bindSlider = function() {
    return document.body.addEventListener('keydown', slideKeyListener);
  };

  slideControls = [Q, ESC, LEFT_ARROW, RIGHT_ARROW, HOME, END, PAGE_UP, PAGE_DOWN];

  slideControlsEnabled = true;

  enableSlideControls = function(state) {
    return slideControlsEnabled = state;
  };

  presentSlide = function(s) {
    hideSlide($('.slide.showing'));
    return showSlide(s);
  };

  firstSlide = function() {
    return slides();
  };

  lastSlide = function() {
    return slides().last();
  };

  prevSlide = function() {
    var n;

    n = $('.slide.showing').prevAll('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
    if (n.length) {
      return n;
    } else {
      return slides();
    }
  };

  nextSlide = function() {
    var n;

    n = $('.slide.showing').nextAll('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
    if (n.length) {
      return n;
    } else {
      return $('.slide.showing');
    }
  };

  slideKeyListener = function(e) {
    var c;

    if (sliding) {
      window.evt = e;
      c = e.charCode || e.keyCode || e.which;
      if ((__indexOf.call(slideControls, c) >= 0) && !$(e.target).is('[leisurenode=code],[leisurenode=code] *') && slideControlsEnabled) {
        e.preventDefault();
        if (c === ESC) {
          return toggleSlideShow();
        } else if (c === Q) {
          return closeWindow();
        } else {
          return presentSlide(((function() {
            switch (c) {
              case HOME:
                return firstSlide();
              case END:
                return lastSlide();
              case LEFT_ARROW:
              case PAGE_UP:
                return prevSlide();
              case RIGHT_ARROW:
              case PAGE_DOWN:
                return nextSlide();
            }
          })()));
        }
      }
    }
  };

  slides = function() {
    return $('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
  };

  nthSlide = function(n) {
    return slides().slice(n);
  };

  countSlide = function(el) {
    var count, n, slide, _i, _len, _ref1;

    n = -1;
    count = 0;
    _ref1 = slides();
    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
      slide = _ref1[_i];
      count++;
      if (slide === el) {
        n = count;
      }
    }
    return [n, count];
  };

  showSlide = function(el) {
    var count, n, _ref1;

    _ref1 = countSlide(el[0]), n = _ref1[0], count = _ref1[1];
    oldSlide = n;
    $('#slide-num').html("" + n + " / " + count);
    return $(el).first().removeClass('hidden').addClass('showing');
  };

  hideSlide = function(el) {
    return $(el).first().addClass('hidden').removeClass('showing');
  };

  markupElement = function(el, md) {
    var code, codePos, len, lex, markup, node, prev, prevCodePos, range, slide, _i, _len, _ref1, _ref2, _ref3;

    len = md.length;
    slide = (_ref1 = md.match(slidePat)) != null ? _ref1 : '';
    _ref2 = window.marked((slide ? md.slice(slide[0].length) : md), {
      saveLex: true,
      gfm: true
    }), markup = _ref2[0], lex = _ref2[1];
    el.innerHTML = markup.trim() || '<br>';
    prev = null;
    range = document.createRange();
    prevCodePos = -1;
    codePos = 0;
    _ref3 = el.querySelectorAll('code');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      while (lex[codePos].type !== 'code') {
        codePos++;
      }
      if (node.parentNode.tagName !== 'PRE') {
        code = node;
      } else {
        code = node.parentNode;
        code.innerHTML = node.innerHTML;
      }
      code.setAttribute('noLeisureBar', '');
      code.setAttribute('leisureNode', 'code');
      code.md = lex[codePos].text;
      if (code.parentNode.firstChild !== code) {
        if (prev === null || prev.parentNode !== code.parentNode) {
          range.setStart(code.parentNode, 0);
        } else {
          range.setStartAfter(prev);
        }
        range.setEndBefore(code);
        makeMarkupDiv(range, md.substring((prevCodePos === -1 ? 0 : len - lex[prevCodePos].remain), len - lex[codePos].remain - lex[codePos].textLen));
      }
      prevCodePos = codePos;
      codePos++;
      prev = code;
    }
    if (prevCodePos > -1) {
      if (lex[prevCodePos].remain > 0) {
        range.selectNodeContents(prev.parentNode);
        range.setStartAfter(prev);
        makeMarkupDiv(range, md.substring(len - lex[prevCodePos].remain));
      }
    } else {
      range.selectNodeContents(el);
      makeMarkupDiv(range, md);
    }
    return prevCodePos > -1;
  };

  handleInternalSections = function(content) {
    var before, innerSections, marker, node, nodeContent, nodeTitle, prev, section, sectionHolder, title, _i, _j, _len, _len1, _ref1;

    section = content.parentNode;
    sectionHolder = section.parentNode;
    innerSections = section.querySelectorAll('[leisureSection]');
    if (innerSections.length === 0) {
      if (!((_ref1 = content.firstChild.md) != null ? _ref1.match(/^\*\*\*/) : void 0)) {
        if (!section.previousSibling) {
          return section.setAttribute('leisureSection', 'Main');
        } else {
          prev = section.previousSibling.querySelector('.pageContent');
          while (content.firstChild) {
            mergeUp(content.firstChild, prev);
          }
          return remove(section);
        }
      }
    } else {
      title = section.getAttribute('leisureSection');
      before = false;
      for (_i = 0, _len = innerSections.length; _i < _len; _i++) {
        node = innerSections[_i];
        if (node.getAttribute('leisureSection') === title) {
          before = true;
          break;
        }
      }
      before = before || (!innerSections[0].previousSibling);
      marker = section;
      for (_j = 0, _len1 = innerSections.length; _j < _len1; _j++) {
        node = innerSections[_j];
        nodeTitle = node.getAttribute('leisureSection');
        nodeContent = node.querySelector('.pageContent');
        if (nodeTitle === title || (node.previousSibling && nodeTitle === 'Main')) {
          if (nodeTitle === title) {
            before = false;
          }
          while (nodeContent.firstChild) {
            content.insertBefore(nodeContent.firstChild, node);
            mergeLeisureCode(node.previousSibling, node);
          }
          remove(node);
        } else {
          while (node.nextSibling && !node.nextSibling.getAttribute('leisureSection')) {
            mergeUp(node.nextSibling, nodeContent);
          }
          padSlide(nodeContent, "***" + nodeTitle + "\n");
          if (before) {
            section.parentNode.insertBefore(node, section);
          } else {
            section.parentNode.insertBefore(node, marker.nextSibling);
            marker = node;
          }
        }
      }
      if (!content.firstChild) {
        return remove(section);
      } else {
        return padSlide(content, "***" + title + "\n");
      }
    }
  };

  mergeUp = function(el, newParent) {
    newParent.appendChild(el);
    return mergeLeisureCode(newParent.lastChild.previousSibling, newParent.lastChild);
  };

  makeSection = function(title, node, next) {
    var div;

    div = createNode("<div leisureSection='" + title + "'></div>");
    node.parentNode.insertBefore(div, node);
    while (div.nextSibling && div.nextSibling !== next) {
      div.appendChild(div.nextSibling);
    }
    return div;
  };

  makeMarkupDiv = function(range, md) {
    var div;

    div = document.createElement('div');
    range.surroundContents(div);
    div.md = md;
    bindMarkupDiv(div);
    return div;
  };

  editingEnabled = true;

  enableEditing = function(state) {
    return editingEnabled = state;
  };

  bindMarkupDiv = function(div) {
    var editing;

    div.bound = true;
    div.setAttribute('leisureNode', 'markdown');
    div.setAttribute('contenteditable', 'false');
    editing = false;
    div.addEventListener('dblclick', function(e) {
      if (!editing && editingEnabled) {
        div.innerHTML = '';
        div.appendChild(textNode(div.md));
        div.style.whiteSpace = 'pre-wrap';
        div.setAttribute('contenteditable', 'true');
        editing = true;
        div.parentNode.setAttribute('editing', 'true');
        return div.focus();
      }
    });
    div.addEventListener('keypress', function(e) {
      var br, r, s;

      if (editing) {
        s = window.getSelection();
        r = s.getRangeAt(0);
        if ((e.charCode || e.keyCode || e.which) === ENTER) {
          br = textNode('\n');
          r.insertNode(br);
          r = document.createRange();
          r.setStart(br, 1);
          s.removeAllRanges();
          s.addRange(r);
          return e.preventDefault();
        }
      }
    });
    return div.addEventListener('blur', function(e) {
      var first, frag, last, node, parent, prevSection, r, scroll, _i, _len, _ref1, _ref2;

      if (editing) {
        scroll = document.body.scrollTop;
        div.style.whiteSpace = '';
        editing = false;
        div.parentNode.removeAttribute('editing');
        div.setAttribute('contenteditable', 'false');
        prevSection = (_ref1 = div.parentNode.parentNode.previousSibling) != null ? _ref1.getAttribute('leisureSection') : void 0;
        parent = div.parentNode;
        if (markupSlideContent(div, div.textContent, prevSection && prevSection !== 'Leisure Controls')) {
          _ref2 = div.querySelectorAll("[leisurenode='code']");
          for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
            node = _ref2[_i];
            presentLeisureCode(node, true);
          }
        } else if (div.textContent.trim() === '') {
          cleanEmptyNodes(div);
        }
        r = document.createRange();
        r.selectNodeContents(div);
        frag = r.extractContents();
        first = frag.childNodes[0];
        last = frag.childNodes[frag.childNodes.length - 1];
        parent.replaceChild(frag, div);
        mergeLeisureCode(previousSibling(first), first);
        mergeLeisureCode(last, nextSibling(last));
        handleInternalSections(parent);
        return delay(function() {
          return document.body.scrollTop = scroll;
        });
      }
    });
  };

  Notebook.markupElement = markupElement;

  Notebook.enableSlideControls = enableSlideControls;

  Notebook.enableEditing = enableEditing;

  Notebook.presentSlide = presentSlide;

  Notebook.firstSlide = firstSlide;

  Notebook.lastSlide = lastSlide;

  Notebook.prevSlide = prevSlide;

  Notebook.nextSlide = nextSlide;

}).call(this);

/*
*/

},{"./notebook":9}],9:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
# use an element as a Leisure notebook
# Only runs in the context of a browser
*/


(function() {
  var $, BS, DEL, DOWN_ARROW, END, ENTER, ESC, HOME, LEFT_ARROW, Leisure_anno, Nil, PAGE_DOWN, PAGE_UP, RIGHT_ARROW, TAB, UP_ARROW, URI, Xus, acceptCode, addBoxClasses, addDefControls, addsLine, allowEvents, arrows, autoRun, baseElements, baseStrokeWidth, basicCall, bindAll, bindNotebook, bootNotebook, box, boxClasses, buttonClasses, c, chainEvalNodes, changeTheme, changeView, checkDeleteExpr, checkHideSource, checkMutateFromModification, cleanEmptyNodes, cleanOutput, clearAst, clearOutputBox, clearUpdates, clickTest, closeWindow, codeBox, codeFocus, codeSpan, configureSaveLink, continueRangePosition, createFragment, createNode, createPeer, createSlider, debug, defaultEnv, define, delay, docFocus, envFor, errString, escapeHtml, evalBox, evalDoc, evalDocCode, evalNodes, evalOutput, evaluating, evaluationQueue, event, filename, findCurrentCodeHolder, findDefs, findUpdateSelector, focusBox, foldLeft, gen, getAnnoBody, getAnnoData, getAnnoName, getAst, getBox, getDefName, getElementCode, getElements, getExprSource, getHtml, getMDDocument, getMaxStrokeWidth, getParseErr, getRangePosition, getRangeText, getRanges, getRefName, getSvgElement, getType, grp, handleKey, hasFunc, hasMonadOutput, head, hiddenPat, hideControlSection, hideOutputSource, hideSlider, highlightNotebookFunction, highlightPosition, id, identity, ignoreDeleteOutputBox, init, initNotebook, insertControls, isDef, isLeisureCode, isMonad, isOutput, isSlider, lazy, leisureContextString, linePat, linkSource, loadProgram, loaded, lz, makeId, makeLabel, makeMonad, makeOption, makeOutputBox, makeOutputControls, makeRange, makeSyncMonad, makeTestBox, makeTestCase, markPartialApplies, markupButton, markupButtons, markupDefs, mergeLeisureCode, nameSub, nextId, nextSibling, nodeEnd, nodeFor, nonprintable, numberEnd, numberStart, oldBrackets, owner, patchFuncAst, peer, peerGetDocument, peerGetFunctions, peerNotifySelection, postLoadQueue, prepExpr, presentLeisureCode, presentValue, previousBoxRangeInternal, previousBoxRangeStart, previousSibling, primSvgMeasure, primconcatNodes, printable, printableControlCharacters, processLine, psgn, queueAfterLoad, remove, removeBoxClasses, removeOldDefs, replaceContents, replaceRange, replicate, req, resolve, root, runAuto, runMonad, runTest, runTests, rz, saveProgram, setAst, setFilename, setMinMax, setSnapper, setUpdate, showAst, showError, showFilename, showFilenames, showOutputSource, showResult, showSliderButton, showSource, skipLeftOverOutputBox, slider, snapshot, svgBetterMeasure, svgMeasure, svgMeasureText, tail, testPat, textNode, toDefBox, toExprBox, toggleEdit, transformStrokeWidth, transformedPoint, unwrap, update, updatePat, wrapRange, xusEnv, _, _ref, _ref1, _ref2,
    __slice = [].slice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  console.log("LOADING NOTEBOOK");

  _ref = root = module.exports = require('./base'), resolve = _ref.resolve, lazy = _ref.lazy;

  rz = resolve;

  lz = lazy;

  _ref1 = root = module.exports = require('./ast'), nameSub = _ref1.nameSub, getRefName = _ref1.getRefName, define = _ref1.define, foldLeft = _ref1.foldLeft, Nil = _ref1.Nil, getType = _ref1.getType, getAnnoName = _ref1.getAnnoName, getAnnoData = _ref1.getAnnoData, getAnnoBody = _ref1.getAnnoBody, Leisure_anno = _ref1.Leisure_anno;

  _ref2 = require('./runtime'), isMonad = _ref2.isMonad, runMonad = _ref2.runMonad, makeMonad = _ref2.makeMonad, makeSyncMonad = _ref2.makeSyncMonad, identity = _ref2.identity, defaultEnv = _ref2.defaultEnv, basicCall = _ref2.basicCall;

  gen = require('./gen').gen;

  URI = window.URI;

  Xus = window.Xus;

  $ = window.$;

  _ = require('./lodash.min');

  window.global = window;

  debug = false;

  BS = 8;

  TAB = 9;

  ENTER = 13;

  ESC = 27;

  PAGE_UP = 33;

  PAGE_DOWN = 34;

  END = 35;

  HOME = 36;

  LEFT_ARROW = 37;

  UP_ARROW = 38;

  RIGHT_ARROW = 39;

  DOWN_ARROW = 40;

  DEL = 46;

  arrows = [37, 38, 39, 40];

  updatePat = /(^|\n)(#@update )([^\n]+)(?:^|\n)/;

  peer = null;

  nextId = 0;

  filename = null;

  event = function() {
    var args, widget;

    widget = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return basicCall(args, envFor(widget), identity);
  };

  defaultEnv.readFile = function(fileName, cont) {
    var uri;

    uri = new URI(document.location.href, fileName);
    console.log("\n\n@@@@READ FILE: " + uri + "\n\n");
    return $.get(String(uri)).done(function(data) {
      return cont(null, data);
    }).fail(function(err) {
      return cont(err, null);
    });
  };

  defaultEnv.writeFile = function(fileName, data, cont) {};

  snapshot = function(el, pgm) {};

  setSnapper = function(snapFunc) {
    return snapshot = snapFunc;
  };

  delay = function(func) {
    return window.setTimeout(func, 1);
  };

  getParseErr = getHtml = function(x) {
    return x(lz(function(value) {
      return rz(value);
    }));
  };

  escapeHtml = function(str) {
    if (typeof str === 'string') {
      return str.replace(/[<>]/g, function(c) {
        switch (c) {
          case '<':
            return '&lt;';
          case '>':
            return '&gt;';
        }
      });
    } else {
      return str;
    }
  };

  presentValue = function(v) {
    var content;

    if ((getType(v)) === 'svgNode') {
      content = v(function() {
        return id;
      });
      return _svgPresent()(function() {
        return content;
      })(function() {
        return id;
      });
    } else if ((getType(v)) === 'html') {
      return getHtml(v);
    } else if ((getType(v)) === 'parseErr') {
      return "PARSE ERROR: " + (getParseErr(v));
    } else {
      return escapeHtml(String(v));
    }
  };

  bootNotebook = function(el) {
    if ((document.getElementById('channelList')) == null) {
      document.body.appendChild(createNode("<datalist id='channelList'>\n   <option value=''></option>\n   <option value='app'>app</option>\n   <option value='compile'>compile</option>\n   <option value='editorFocus'>editorFocus</option>\n</datalist>"));
    }
    return createPeer();
  };

  closeWindow = function() {
    console.log("CLOSING WINDOW");
    window.open('', '_self', '');
    return window.close();
  };

  createPeer = function() {
    var k, param, params, server, v, _i, _len, _ref3, _ref4;

    root.xusServer = server = new Xus.Server();
    server.exit = function() {
      return closeWindow();
    };
    peer = root.peer = Xus.createDirectPeer(server);
    peer.server = server;
    peer.listen('leisure/selection/contents', true, function(key, value) {
      var node, r, s;

      if (key === 'leisure/selection/contents') {
        s = window.getSelection();
        if (s.rangeCount && s.toString() !== value) {
          r = s.getRangeAt(0);
          r.deleteContents();
          node = textNode(value.toString());
          r.insertNode(node);
          s.removeAllRanges();
          r.selectNode(node);
          return s.addRange(r);
        }
      }
    });
    peer.set('leisure/evalExpr', null, 'transient');
    peer.listen('leisure/evalExpr', false, function(key, value) {
      var env, expr, result;

      if (key === 'leisure/evalExpr' && (value != null)) {
        expr = value[0], result = value[1];
        console.log("EVAL: " + expr + ", RESULT: " + result);
        env = xusEnv(result, expr);
        return processLine(expr, env, function() {
          return typeof env.cleanup === "function" ? env.cleanup() : void 0;
        });
      }
    });
    peer.set('leisure/document', peerGetDocument);
    peer.set('leisure/functions', peerGetFunctions);
    peer.set('leisure/storage', []);
    if (Boot.documentFragment) {
      params = {};
      _ref3 = Boot.documentFragment.substring(1).split('&');
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        param = _ref3[_i];
        _ref4 = param.split('='), k = _ref4[0], v = _ref4[1];
        params[k.toLowerCase()] = decodeURIComponent(v);
      }
      if (params.xusproxy != null) {
        return Xus.xusToProxy(server, params.xusproxy);
      }
    }
  };

  replaceContents = function(uri, contents) {
    if (!contents) {
      contents = uri;
      uri = null;
    }
    if (uri) {
      setFilename(uri.toString());
    }
    document.body.setAttribute('doc', '');
    window.leisureAutoRunAll = true;
    window.markup(contents);
    return bindAll();
  };

  bindAll = function() {
    var node, _i, _len, _ref3;

    _ref3 = document.querySelectorAll("[leisurenode='code']");
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      node.setAttribute('contentEditable', 'true');
      bindNotebook(node);
      changeTheme(node, 'thin');
      evalDoc(node);
    }
    return showFilenames();
  };

  xusEnv = function(resultVar, expr) {
    var env, result;

    result = '';
    env = {
      debug: debug,
      finishedEvent: function() {},
      owner: null,
      require: req,
      write: function(msg) {
        return result += "" + msg + "\n";
      },
      prompt: function(msg, cont) {
        return result += "Attempt to prompt with " + msg;
      },
      processResult: function(res, ast) {
        result += res;
        return peer.set(resultVar, JSON.stringify(result));
      },
      presentValue: function(x) {
        return x;
      },
      fileSettings: {
        uri: new URI(document.location.href)
      },
      err: function(err) {
        result += err.leisureContext ? "ERROR: " + err + ":\n" + (leisureContextString(err)) + "\n" + err.stack : "Couldn't parse: " + expr;
        return peer.set(resultVar, result);
      }
    };
    env.__proto__ = root.defaultEnv;
    return env;
  };

  peerGetDocument = function() {
    var nodes;

    nodes = document.querySelectorAll("[leisurenode='code']");
    if (nodes.length > 1 || Notebook.md) {
      return getMDDocument();
    } else {
      return getSimpleDocument();
    }
  };

  peerGetFunctions = function() {
    return (_.uniq(window.leisureFuncNames.toArray().sort(), true)).sort();
  };

  getMDDocument = function() {
    var md, node, _i, _len, _ref3, _ref4;

    md = '';
    _ref3 = document.querySelectorAll('[doc] [leisureNode]');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      md += isLeisureCode(node) ? "```\n" + (getElementCode(node)) + "\n```\n" : (_ref4 = node.md) != null ? _ref4 : '';
    }
    return md;
  };

  makeId = function(el) {
    if (!el.id) {
      return el.id = "Leisure-" + (nextId++);
    }
  };

  allowEvents = true;

  init = false;

  bindNotebook = function(el) {
    if (!init) {
      init = true;
      defaultEnv.presentValue = presentValue;
      defaultEnv.write = function(msg) {
        return console.log(msg);
      };
      defaultEnv.owner = document.body;
      defaultEnv.finishedEvent = function(evt, channel) {
        return update(channel != null ? channel : 'app', defaultEnv);
      };
      defaultEnv.debug = debug;
    }
    if (el.bound == null) {
      makeId(el);
      el.bound = true;
      el.addEventListener('DOMCharacterDataModified', (function(evt) {
        if (allowEvents && !el.replacing) {
          return delay(function() {
            return checkMutateFromModification(evt);
          });
        }
      }), true);
      el.addEventListener('DOMSubtreeModified', (function(evt) {
        if (allowEvents && !el.replacing) {
          return delay(function() {
            return checkMutateFromModification(evt);
          });
        }
      }), true);
      el.addEventListener('mousedown', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('mousemove', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('mouseup', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('keydown', function(e) {
        var c, r, s;

        c = e.charCode || e.keyCode || e.which;
        if (c === DEL || c === BS) {
          s = window.getSelection();
          r = s.getRangeAt(0);
          if (c === BS) {
            checkDeleteExpr(getBox(r.startContainer));
            if (skipLeftOverOutputBox(el, r)) {
              return e.preventDefault();
            }
          } else if (c === DEL) {
            checkDeleteExpr(getBox(r.startContainer));
            if (ignoreDeleteOutputBox(el, r)) {
              return e.preventDefault();
            }
          }
        }
        if (printable(c)) {
          clearAst(getBox(window.getSelection().focusNode));
        }
        if ((__indexOf.call(arrows, c) >= 0) || printable(c)) {
          delay(function() {
            return highlightPosition(e);
          });
        }
        if (e.ctrlKey && c === ENTER) {
          return handleKey("C-ENTER");
        } else if (e.altKey && c === ENTER) {
          return handleKey("M-ENTER");
        } else if (c === TAB) {
          handleKey("TAB");
          return e.preventDefault();
        }
      });
      el.addEventListener('keypress', function(e) {
        var br, bx, r, s, sp;

        s = window.getSelection();
        r = s.getRangeAt(0);
        if ((e.charCode || e.keyCode || e.which) === ENTER) {
          br = textNode('\n');
          r.insertNode(br);
          r = document.createRange();
          r.setStart(br, 1);
          s.removeAllRanges();
          s.addRange(r);
          return e.preventDefault();
        } else if (r.startContainer.parentNode === el) {
          sp = codeSpan('\n', 'codeExpr');
          sp.setAttribute('generatedNL', '');
          bx = box(s.getRangeAt(0), 'codeMainExpr', true);
          bx.appendChild(sp);
          makeOutputBox(bx);
          r = document.createRange();
          r.setStart(sp, 0);
          s.removeAllRanges();
          return s.addRange(r);
        }
      });
      el.addEventListener('focus', (function() {
        if (allowEvents) {
          return findCurrentCodeHolder();
        }
      }), true);
      el.addEventListener('blur', (function() {
        if (allowEvents) {
          return findCurrentCodeHolder();
        }
      }), true);
      if (window.leisureAutoRunAll) {
        autoRun(el, true);
        return window.setTimeout((function() {
          return runTests(el);
        }), 1);
      } else {
        return el.autorunState = false;
      }
    }
  };

  checkDeleteExpr = function(node) {
    var out;

    if (isOutput(node && node.output)) {
      out = node.output;
      return window.setTimeout((function() {
        if (!node.textContent.trim()) {
          node.parentNode.removeChild(node);
        }
        if ((node.parentNode == null) && ((out != null ? out.parentNode : void 0) != null)) {
          return out.parentNode.removeChild(out);
        }
      }), 1);
    }
  };

  skipLeftOverOutputBox = function(el, r) {
    var box, s;

    el.normalize();
    box = previousBoxRangeInternal(r) || previousBoxRangeStart(r);
    if (isOutput(box)) {
      s = window.getSelection();
      r.selectNode(box);
      r.collapse(true);
      s.removeAllRanges();
      s.addRange(r);
      return true;
    } else {
      return false;
    }
  };

  previousBoxRangeInternal = function(r) {
    return r.startContainer.nodeType === 1 && r.startOffset > 0 && r.startContainer.childNodes[r.startOffset - 1];
  };

  previousBoxRangeStart = function(r) {
    return r.startContainer.nodeType === 3 && r.startOffset === 0 && previousSibling(r.startContainer);
  };

  ignoreDeleteOutputBox = function(el, r) {
    var n;

    el.normalize();
    if (r.startContainer.nodeType === 3 && r.startOffset === r.startContainer.length) {
      n = r.startContainer;
      while (n && n.nextSibling === null) {
        n = n.parentNode;
      }
      return isOutput(n != null ? n.nextSibling : void 0);
    } else {
      return false;
    }
  };

  isOutput = function(el) {
    return (el != null ? el.nodeType : void 0) === 1 && el.hasAttribute('LeisureOutput');
  };

  isLeisureCode = function(el) {
    return (el != null ? el.nodeType : void 0) === 1 && el.getAttribute('leisureNode') === 'code';
  };

  peerNotifySelection = function(el, str) {};

  printableControlCharacters = (function() {
    var _i, _len, _ref3, _results;

    _ref3 = "\r\i\n\b";
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      c = _ref3[_i];
      _results.push(c.charCodeAt(0));
    }
    return _results;
  })();

  printable = function(code) {
    return (code > 0xf && code < 37) || code > 40 || __indexOf.call(printableControlCharacters, code) >= 0;
  };

  nonprintable = null;

  (function() {
    var i, s, _i;

    s = '';
    for (i = _i = 0; 0 <= 0xf ? _i <= 0xf : _i >= 0xf; i = 0 <= 0xf ? ++_i : --_i) {
      s += String.fromCharCode(i);
    }
    s.replace(/[\i\r\f]/g, '');
    return nonprintable = new RegExp("[" + s + "]");
  })();

  handleKey = function(key) {
    var box;

    switch (key) {
      case "C-ENTER":
      case "TAB":
        box = getBox(window.getSelection().focusNode);
        if ((box.getAttribute('codeMainExpr')) != null) {
          return evalOutput(box.output);
        } else if ((box.getAttribute('codeMain')) != null) {
          return acceptCode(box);
        }
        break;
      case "M-ENTER":
        box = getBox(window.getSelection().focusNode);
        if ((box.getAttribute('codeMainExpr')) != null) {
          return clearOutputBox(box.output);
        }
    }
  };

  clearAst = function(box) {
    var cbox;

    cbox = getBox(box);
    return cbox != null ? cbox.ast = null : void 0;
  };

  oldBrackets = [null, Nil];

  cleanEmptyNodes = function(el) {
    var next, prev, _ref3;

    if (el.nodeType === 3 && (el.parentNode != null)) {
      return cleanEmptyNodes(el.parentNode);
    } else {
      prev = el.previousSibling;
      next = el.nextSibling;
      if (el.nodeType === 1 && el.textContent.trim() === '' && ((_ref3 = el.parentNode) != null ? _ref3.hasAttribute('doc') : void 0)) {
        el.parentNode.removeChild(el);
      }
      if (next === nextSibling(prev)) {
        return mergeLeisureCode(prev, next);
      }
    }
  };

  presentLeisureCode = function(node, doEval) {
    node.setAttribute('contentEditable', 'true');
    Notebook.bindNotebook(node);
    Notebook.changeTheme(node, 'thin');
    if (doEval) {
      return evalDoc(node);
    } else {
      return initNotebook(node);
    }
  };

  mergeLeisureCode = function(el1, el2) {
    var newCode, r;

    if (el1 && el2) {
      if (el1.nodeType === 1 && el2.nodeType === 3) {
        el1.appendChild(el2);
        return el1.normalize();
      } else if (el1.nodeType === 3 && el2.nodeType === 1) {
        el2.insertBefore(el1, el2.firstChild);
        return el2.normalize();
      } else if (el1.hasAttribute('leisureNode') && el1.getAttribute('leisureNode') === el2.getAttribute('leisureNode')) {
        newCode = textNode(el1.md = el1.getAttribute('leisureNode') === 'code' ? "" + (getElementCode(el1)) + "\n" + (getElementCode(el2)) : "" + el1.md + "\n" + el2.md);
        r = document.createRange();
        r.selectNodeContents(el2);
        el1.appendChild(textNode('\n'));
        el1.appendChild(r.extractContents());
        return el2.parentNode.removeChild(el2);
      }
    }
  };

  highlightPosition = function(e) {
    var ast, b, brackets, changed, i, node, parent, pos, r, ranges, s, span, _i, _j, _k, _len, _len1, _len2, _ref3, _ref4, _ref5;

    parent = null;
    s = window.getSelection();
    if (s.rangeCount) {
      if (cleanEmptyNodes(s.getRangeAt(0).startContainer)) {
        return;
      }
      focusBox(s.focusNode);
      parent = getBox(s.focusNode);
      if ((_ref3 = s.getRangeAt(0)) != null ? _ref3.collapsed : void 0) {
        if (!parent || isOutput(parent)) {
          return;
        }
        if (parent.parentNode && (ast = getAst(parent))) {
          r = s.getRangeAt(0);
          r.setStart(parent, 0);
          pos = getRangeText(r).length;
          changed = false;
          if (false) {
            brackets = Leisure.bracket(ast.leisureBase, pos);
            if (oldBrackets[0] !== parent || !oldBrackets[1].equals(brackets)) {
              oldBrackets = [parent, brackets];
              _ref4 = document.querySelectorAll("[LeisureBrackets]");
              for (_i = 0, _len = _ref4.length; _i < _len; _i++) {
                node = _ref4[_i];
                unwrap(node);
              }
              _ref5 = parent.querySelectorAll(".partialApply");
              for (_j = 0, _len1 = _ref5.length; _j < _len1; _j++) {
                node = _ref5[_j];
                unwrap(node);
              }
              parent.normalize();
              markPartialApplies(parent);
              b = brackets;
              ranges = [];
              while (b !== Nil) {
                ranges.push(makeRange(parent, b.head().head(), b.head().tail().head()));
                b = b.tail();
              }
              for (i = _k = 0, _len2 = ranges.length; _k < _len2; i = ++_k) {
                r = ranges[i];
                span = document.createElement('span');
                span.setAttribute('LeisureBrackets', '');
                span.setAttribute('class', i === 0 ? 'LeisureFunc' : 'LeisureArg');
                wrapRange(r, span);
              }
              changed = true;
            }
          }
          if (e instanceof KeyboardEvent) {
            if (hideSlider()) {
              pos += 1;
            }
          } else if (e instanceof MouseEvent && e.type === 'mousedown' && (e.target === parent || parent.contains(e.target)) && showSliderButton(parent, pos, e)) {
            changed = true;
            pos += 1;
          }
          if (changed) {
            window.EVT = e;
            s.removeAllRanges();
            s.addRange(makeRange(parent, pos));
          }
        }
      }
      return peerNotifySelection(parent, s.toString());
    }
  };

  numberEnd = /(?:^|.*[^0-9.])([0-9]+\.?[0-9]*|\.[0-9]*)$/;

  numberStart = /^([0-9]+\.[0-9]+|[0-9]+|\.[0-9]+)/;

  slider = [];

  showSliderButton = function(parent, pos, e) {
    var changed, len, m, oldPos, r, sParent, sPos, sValue, span, text;

    if (slider.length) {
      hideSlider();
      return false;
    } else {
      text = parent.textContent;
      oldPos = pos;
      changed = 0;
      if (m = text.substring(0, pos).match(numberEnd)) {
        pos -= m[1].length;
      }
      if (m = text.substring(pos).match(numberStart)) {
        len = m[1].length;
        if (oldPos <= pos + len) {
          sParent = slider[0], sPos = slider[1], sValue = slider[2];
          if (parent !== sParent || pos !== sPos || m[1] !== sValue) {
            hideSlider();
            r = makeRange(parent, pos, pos + m[1].length);
            span = createNode("<span class='leisureRangeNumber ui-widget-content'></span>");
            wrapRange(r, span);
            changed = 1;
            span.normalize();
            slider = [parent, pos, m[1], span];
            createSlider();
          }
        }
        return changed;
      } else {
        return hideSlider();
      }
    }
  };

  isSlider = function(el) {
    while (el !== document) {
      if (el.hasAttribute('slider')) {
        return true;
      }
      el = el.parentNode;
    }
    return false;
  };

  createSlider = function() {
    var d, div, inside, max, min, parent, pos, sl, sliding, span, value;

    parent = slider[0], pos = slider[1], value = slider[2], span = slider[3], div = slider[4];
    if (div) {
      return;
    }
    inside = false;
    sliding = false;
    d = createNode("<div style='z-index: 1; position: absolute; width: 200px; background: white; border: solid green 1px' slider contentEditable='false'></div>");
    slider.push(d);
    d.style.top = "" + (span.offsetTop + span.offsetHeight + 5) + "px";
    d.style.minTop = '0px';
    d.style.left = "" + (Math.max(0, (span.offsetLeft + span.offsetWidth) / 2 - 100)) + "px";
    d.addEventListener('mouseover', function(e) {
      if (!inside) {
        return inside = true;
      }
    });
    d.addEventListener('mouseout', function(e) {
      if (e.toElement !== d && !d.contains(e.toElement)) {
        inside = false;
        if (!sliding) {
          return hideSlider();
        }
      }
    });
    value = Number(value);
    min = value < 0 ? value * 2 : value / 2;
    max = value === 0 ? 10 : value * 2;
    sl = $(d).slider({
      animate: 'fast',
      start: function() {
        sliding = true;
        return delay(function() {
          return allowEvents = false;
        });
      },
      stop: function(event, ui) {
        setMinMax(sl);
        allowEvents = true;
        sliding = false;
        if (!inside) {
          return hideSlider();
        }
      },
      slide: function(event, ui) {
        var ast, _ref3;

        if (span.firstChild) {
          span.firstChild.nodeValue = String(ui.value);
        }
        if (isDef(parent)) {
          parent.ast = null;
          acceptCode(parent);
          ast = getAst(parent);
          if ((_ref3 = parent.ast) != null ? _ref3.leisureName : void 0) {
            return update("sel-" + parent.ast.leisureName);
          }
        } else {
          makeId(parent);
          if (!parent.getAttribute(parent.output, 'leisureUpdate')) {
            setUpdate(parent.output, "id-" + parent.id + " compile", true);
          }
          update("id-" + parent.id);
          return update("compile");
        }
      },
      value: value
    });
    setMinMax(sl, value);
    parent.insertBefore(d, parent.firstChild);
    return d.focus();
  };

  psgn = function(x) {
    if (x < 0) {
      return -1;
    } else {
      return 1;
    }
  };

  setMinMax = function(sl, value) {
    var max, min, step, _ref3;

    value = value || sl.slider("value");
    min = 0;
    max = (1 <= (_ref3 = Math.abs(value)) && _ref3 < 50) || value === 0 ? 100 * psgn(value) : value * 2;
    if (Math.round(value) === value) {
      step = Math.round((max - min) / 100);
      step = step - step % (max - min);
    } else {
      step = (max - min) / 100;
    }
    sl.slider("option", "min", min);
    sl.slider("option", "max", max);
    return sl.slider("option", "step", step);
  };

  hideSlider = function() {
    var div, parent, sPos, sValue, span;

    if (slider.length) {
      parent = slider[0], sPos = slider[1], sValue = slider[2], span = slider[3], div = slider[4];
      unwrap(span);
      if (div) {
        remove(div);
      }
      parent.normalize();
      slider = [];
      return 2;
    } else {
      return 0;
    }
  };

  wrapRange = function(range, node) {
    var contents, err;

    try {
      return range.surroundContents(node);
    } catch (_error) {
      err = _error;
      contents = range.cloneContents();
      replaceRange(range, node);
      return node.appendChild(contents);
    }
  };

  replaceRange = function(range, node) {
    range.deleteContents();
    return range.insertNode(node);
  };

  getRangeText = function(r) {
    return r.cloneContents().textContent;
  };

  getBox = function(node) {
    while ((node != null) && ((typeof node.getAttribute === "function" ? node.getAttribute('LeisureBox') : void 0) == null)) {
      node = node.parentElement;
    }
    return node;
  };

  checkMutateFromModification = function(evt) {
    var b, b2;

    b = getBox(evt.target);
    b2 = getBox(window.getSelection().focusNode);
    if (b && b === b2) {
      if ((isDef(b)) && b.classList.contains('codeMainExpr')) {
        toDefBox(b);
      } else if (!(isDef(b)) && b.classList.contains('codeMain')) {
        toExprBox(b);
      }
      return replicate(b);
    }
  };

  replicate = function(b) {
    if (b.replicator) {
      return delay(function() {
        return b.replicator.replicate(b);
      });
    }
  };

  buttonClasses = 'ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only'.split(' ');

  boxClasses = {
    codeMainExpr: ['codeMainExpr', 'ui-widget', 'ui-widget-content', 'ui-corner-all'],
    codeMain: ['codeMain', 'ui-widget', 'ui-widget-content', 'ui-corner-all'],
    codeMainTest: ['codeMainTest'],
    output: ['output', 'ui-corner-all']
  };

  addBoxClasses = function(box, type) {
    var cl, _i, _len, _ref3, _results;

    box.setAttribute(type, '');
    _ref3 = boxClasses[type];
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      cl = _ref3[_i];
      _results.push(box.classList.add(cl));
    }
    return _results;
  };

  removeBoxClasses = function(box, type) {
    var cl, _i, _len, _ref3, _results;

    box.removeAttribute(type);
    _ref3 = boxClasses[type];
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      cl = _ref3[_i];
      _results.push(box.classList.remove(cl));
    }
    return _results;
  };

  toExprBox = function(b) {
    var node, _i, _j, _len, _len1, _ref3, _ref4;

    removeBoxClasses(b, 'codeMain');
    addBoxClasses(b, 'codeMainExpr');
    _ref3 = b.querySelectorAll('[codename]');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      unwrap(node);
    }
    _ref4 = b.querySelectorAll('.astbutton');
    for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
      node = _ref4[_j];
      remove(node);
    }
    return makeOutputBox(b);
  };

  toDefBox = function(b) {
    if (b.output) {
      remove(b.output);
    }
    removeBoxClasses(b, 'codeMainExpr');
    addBoxClasses(b, 'codeMain');
    return addDefControls(b);
  };

  addDefControls = function(box) {
    var btn;

    btn = createNode("<button onclick='Notebook.showAst(this.parentNode)' class='astbutton' title='Show AST'></button>");
    markupButton(btn);
    return box.appendChild(btn);
  };

  remove = function(node) {
    var _ref3;

    return (_ref3 = node.parentNode) != null ? _ref3.removeChild(node) : void 0;
  };

  showAst = function(box) {
    var name, node, output;

    name = (getAst(box)).leisureName;
    if (box.astOut != null) {
      remove(box.astOut.output);
      remove(box.astOut);
      return box.astOut = null;
    } else if (name != null) {
      node = codeBox('codeMainExpr');
      box.astOut = node;
      node.setAttribute('leisureOutput', '');
      box.parentNode.insertBefore(node, box.nextSibling);
      node.textContent = "#@update sel-" + name + "\ntreeForNotebook " + name;
      output = makeOutputBox(node);
      toggleEdit(output);
      return evalOutput(output, true);
    }
  };

  highlightNotebookFunction = function(funcName, start, stop) {
    var box, offset, sel;

    box = document.body.querySelector("[leisurefunc=" + funcName + "]");
    offset = 0;
    sel = window.getSelection();
    sel.removeAllRanges();
    return sel.addRange(makeRange(box, start + offset, stop + offset));
  };

  isDef = function(box) {
    var defType, leading, m, matched, name, txt;

    txt = box.textContent;
    if ((m = txt.match(L_defPat()))) {
      matched = m[0], leading = m[1], name = m[2], defType = m[3];
      return (defType != null ? defType.length : void 0) > 0;
    }
    return false;
  };

  initNotebook = function(el) {
    var pgm;

    el.replacing = true;
    removeOldDefs(el);
    pgm = markupDefs(el, findDefs(el));
    el.normalize();
    el.replacing = false;
    if (!el.hasAttribute('noLeisureBar')) {
      insertControls(el);
      el.testResults.innerHTML = pgm[2];
    }
    snapshot(el, pgm);
    return pgm;
  };

  makeLabel = function(text, c) {
    var node;

    node = document.createElement('SPAN');
    node.innerHTML = text;
    node.setAttribute('class', c);
    return node;
  };

  makeOption = function(name) {
    var opt;

    opt = document.createElement('OPTION');
    opt.text = name;
    return opt;
  };

  createNode = function(txt) {
    var scratch;

    scratch = document.createElement('DIV');
    scratch.innerHTML = txt;
    return scratch.firstChild;
  };

  createFragment = function(txt) {
    var frag, scratch;

    scratch = document.createElement('DIV');
    scratch.innerHTML = txt;
    frag = document.createDocumentFragment();
    while (scratch.firstChild) {
      frag.appendChild(scratch.firstChild);
    }
    return frag;
  };

  insertControls = function(el) {
    var controlDiv, saveButton, spacer, testButton, themeSelect, viewSelect, _ref3, _ref4;

    controlDiv = createNode("<div LeisureOutput contentEditable='false' class='leisure_bar'><div class=\"leisure_bar_contents\">\n  <button leisureId='saveButton' class=\"leisure_start\">Save</button>\n  <button leisureId='testButton'>Run Tests</button> <span leisureId='testResults' class=\"notrun\"></span>\n  <input type='checkbox' leisureId='autorunTests'><b>Auto</b></input>\n  <span class=\"leisure_theme\">Theme: </span>\n  <select leisureId='themeSelect'>\n    <option value=thin>Thin</option>\n    <option value=gaudy>Gaudy</option>\n    <option value=cthulhu>Cthulhu</option>\n  </select>\n  <span>View: </span>\n  <select leisureId='viewSelect'>\n    <option value=coding>Coding</option>\n    <option value=debugging>Debugging</option>\n    <option value=testing>Testing</option>\n    <option value=running>Running</option>\n  </select>\n</div>");
    spacer = createNode("<div LeisureOutput  contentEditable='false' class='leisure_space'></div>");
    el.insertBefore(spacer, el.firstChild);
    el.insertBefore(controlDiv, el.firstChild);
    _ref3 = getElements(el, ['downloadLink', 'viewLink', 'saveButton', 'testButton', 'testResults', 'autorunTests', 'themeSelect', 'viewSelect']), el.leisureDownloadLink = _ref3[0], el.leisureViewLink = _ref3[1], saveButton = _ref3[2], testButton = _ref3[3], el.testResults = _ref3[4], el.autorun = _ref3[5], themeSelect = _ref3[6], viewSelect = _ref3[7];
    controlDiv.addEventListener('click', function(evt) {
      if (document.body.classList.contains('hideControls')) {
        return document.body.classList.remove('hideControls');
      } else {
        return document.body.classList.add('hideControls');
      }
    });
    saveButton.addEventListener('click', function(evt) {
      return saveProgram(el);
    });
    testButton.addEventListener('click', function() {
      return runTests(el);
    });
    themeSelect.value = (_ref4 = el.leisureTheme) != null ? _ref4 : 'thin';
    themeSelect.addEventListener('change', function(evt) {
      return changeTheme(el, evt.target.value);
    });
    viewSelect.addEventListener('change', function(evt) {
      return changeView(el, evt.target.value);
    });
    el.autorun.checked = el.autorunState;
    el.autorun.addEventListener('change', function(evt) {
      el.autorunState = el.autorun.checked;
      if (el.autorunState) {
        return runTests(el);
      }
    });
    return markupButtons(controlDiv);
  };

  saveProgram = function() {
    return write(filename, getMDDocument(), (function() {
      return alert("Saving " + filename);
    }), function(err) {
      console.log(err);
      alert(err.stack);
      throw err;
    });
  };

  showFilename = function(el) {
    if (el && filename) {
      el.innerHTML = "Save: " + (filename.pathName());
      return el.title = filename.toString();
    }
  };

  showFilenames = function() {
    var node, _i, _len, _ref3, _results;

    _ref3 = document.body.querySelectorAll('[leisureId=saveButton]');
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      _results.push(showFilename(node));
    }
    return _results;
  };

  setFilename = function(newName) {
    console.log("SET FILENAME: " + newName);
    filename = newName instanceof URI ? newName : new URI(document.location.href, newName);
    return showFilenames();
  };

  markupButtons = function(el) {
    var btn, _i, _len, _ref3, _results;

    _ref3 = el.querySelectorAll('button');
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      btn = _ref3[_i];
      _results.push(markupButton(btn));
    }
    return _results;
  };

  markupButton = function(btn) {
    var cl, _i, _len, _results;

    _results = [];
    for (_i = 0, _len = buttonClasses.length; _i < _len; _i++) {
      cl = buttonClasses[_i];
      _results.push(btn.classList.add(cl));
    }
    return _results;
  };

  getElements = function(el, ids) {
    var els, id, node, _i, _j, _len, _len1, _ref3, _results;

    els = {};
    _ref3 = el.querySelectorAll('[leisureId]');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      els[node.getAttribute('leisureId')] = node;
    }
    _results = [];
    for (_j = 0, _len1 = ids.length; _j < _len1; _j++) {
      id = ids[_j];
      _results.push(els[id]);
    }
    return _results;
  };

  escapeHtml = function(str) {
    if (typeof str === 'string') {
      return str.replace(/[<>]/g, function(c) {
        switch (c) {
          case '<':
            return '&lt;';
          case '>':
            return '&gt;';
        }
      });
    } else {
      return str;
    }
  };

  loadProgram = function(el, files) {
    var fr;

    el = getBox;
    fr = new FileReader();
    fr.onloadend = function(evt) {
      el.innerHTML = escapeHtml(fr.result);
      return initNotebook(el);
    };
    return fr.readAsBinaryString(files.item(0));
  };

  configureSaveLink = function(el) {
    var blob, builder;

    window.URL = window.URL || window.webkitURL;
    builder = new WebKitBlobBuilder();
    builder.append(getElementCode(el));
    blob = builder.getBlob('text/plain');
    el.leisureDownloadLink.href = window.URL.createObjectURL(blob);
    return el.leisureViewLink.href = window.URL.createObjectURL(blob);
  };

  getElementCode = function(el) {
    var r;

    r = document.createRange();
    r.selectNode(el);
    c = r.cloneContents().firstChild;
    removeOldDefs(c);
    return c.textContent;
  };

  runTests = function(el) {
    var failed, passed, resultsClass, test, _i, _len, _ref3;

    passed = 0;
    failed = 0;
    _ref3 = el.querySelectorAll('.codeMainTest');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      test = _ref3[_i];
      if (runTest(test)) {
        passed++;
      } else {
        failed++;
      }
    }
    if (el.testResults) {
      resultsClass = el.testResults.classList;
      resultsClass.remove('notrun');
      if (!failed) {
        resultsClass.remove('failed');
        resultsClass.add('passed');
        return el.testResults.innerHTML = passed;
      } else {
        resultsClass.remove('passed');
        resultsClass.add('failed');
        return el.testResults.innerHTML = "" + passed + "/" + failed;
      }
    }
  };

  changeTheme = function(el, value) {
    var theme;

    theme = value;
    el.leisureTheme = theme;
    return el.className = theme;
  };

  changeView = function(el, value) {
    debug = value === 'debugging';
    return alert('new view: ' + value + ", debug: " + debug);
  };

  unwrap = function(node) {
    var parent;

    parent = node.parentNode;
    if (parent) {
      while (node.firstChild != null) {
        parent.insertBefore(node.firstChild, node);
      }
      return parent.removeChild(node);
    }
  };

  removeOldDefs = function(el) {
    var extracted, m, node, txt, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref3, _ref4, _ref5;

    el.leisureDownloadLink = null;
    el.leisureViewLink = null;
    extracted = [];
    _ref3 = el.querySelectorAll("[LeisureOutput]");
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      remove(node);
    }
    _ref4 = el.querySelectorAll("[generatednl]");
    for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
      node = _ref4[_j];
      txt = node.lastChild;
      if (txt.nodeType === 3 && txt.data[txt.data.length - 1] === '\n') {
        txt.data = txt.data.substring(0, txt.data.length - 1);
      }
    }
    _ref5 = el.querySelectorAll("[Leisure]");
    for (_k = 0, _len2 = _ref5.length; _k < _len2; _k++) {
      node = _ref5[_k];
      if (addsLine(node) && (node.firstChild != null)) {
        extracted.push(node.firstChild);
      }
      unwrap(node);
    }
    for (_l = 0, _len3 = extracted.length; _l < _len3; _l++) {
      node = extracted[_l];
      if ((node.parentNode != null) && !addsLine(node) && (node.previousSibling != null) && !addsLine(node.previousSibling)) {
        node.parentNode.insertBefore(text('\n'), node);
      }
    }
    el.textContent = el.textContent.replace(/\uFEFF/g, '');
    txt = el.lastChild;
    if ((txt != null ? txt.nodeType : void 0) === 3 && (m = txt.data.match(/(^|[^\n])(\n+)$/))) {
      return txt.data = txt.data.substring(0, txt.data.length - m[2].length);
    }
  };

  markupDefs = function(el, defs) {
    var auto, bod, body, bx, def, i, main, name, notebookAutoNodes, pgm, s, test, tests, totalTests, _i, _j, _len, _len1, _ref3, _ref4;

    pgm = '';
    auto = '';
    totalTests = 0;
    notebookAutoNodes = [];
    for (_i = 0, _len = defs.length; _i < _len; _i++) {
      i = defs[_i];
      main = i.main, name = i.name, def = i.def, body = i.body, tests = i.tests;
      if (name) {
        bx = box(main, 'codeMain', true);
        bx.appendChild(codeSpan(name, 'codeName'));
        bx.appendChild(textNode(def));
        bod = codeSpan(textNode(body), 'codeBody');
        bod.appendChild(textNode('\n'));
        bod.setAttribute('generatedNL', '');
        bx.appendChild(bod);
        bx.addEventListener('blur', (function() {
          return evalDoc(el);
        }), true);
        markPartialApplies(bx);
        addDefControls(bx);
        pgm += "" + name + " " + def + " " + body + "\n";
      } else if (main != null) {
        bx = box(main, 'codeMainExpr', true);
        s = codeSpan(textNode(body), 'codeExpr');
        s.setAttribute('generatedNL', '');
        s.appendChild(textNode('\n'));
        bx.appendChild(s);
        markPartialApplies(bx);
        if (((_ref3 = main.leisureAuto) != null ? _ref3.mode : void 0) === 'silent') {
          auto += "" + body + "\n";
        } else {
          if (((_ref4 = main.leisureAuto) != null ? _ref4.mode : void 0) === 'notebook') {
            notebookAutoNodes.push(bx);
          }
          makeOutputBox(bx);
        }
      }
      for (_j = 0, _len1 = tests.length; _j < _len1; _j++) {
        test = tests[_j];
        replaceRange(test, makeTestBox(test.leisureTest));
        totalTests++;
      }
    }
    return [pgm, auto, totalTests, notebookAutoNodes];
  };

  getDefName = function(ast) {
    if (ast instanceof Leisure_anno && getAnnoName(ast) === 'definition') {
      return getAnnoData(ast);
    } else {
      return null;
    }
  };

  getAst = function(bx, def) {
    var defName, _ref3;

    if (bx.ast != null) {
      patchFuncAst(bx.ast);
      bx.setAttribute('leisureFunc', (_ref3 = bx.ast.leisureName) != null ? _ref3 : '');
      return bx.ast;
    } else {
      def = def || bx.textContent;
      defName = getDefName(runMonad(rz(L_newParseLine)(lz(Nil))(lz(def))));
      setAst(bx, (defName ? {
        leisureName: defName,
        leisureSource: def
      } : {}));
      return bx.ast;
    }
  };

  setAst = function(bx, ast) {
    bx.ast = ast;
    return patchFuncAst(ast);
  };

  patchFuncAst = function(ast) {
    var parent;

    if ((ast != null ? ast.leisureName : void 0) != null) {
      parent = window[nameSub(ast.leisureName)];
      if (parent != null) {
        parent.ast = ast;
        parent.src = ast.leisureSource;
        return update("ast-" + ast.leisureName);
      }
    }
  };

  markPartialApplies = function(bx, def) {};

  textNode = function(text) {
    return document.createTextNode(text);
  };

  nodeFor = function(text) {
    if (typeof text === 'string') {
      return textNode(text);
    } else {
      return text;
    }
  };

  evalOutput = function(exBox, nofocus, cont) {
    var selector, stopUpdates, updateSelector, _ref3;

    exBox = getBox(exBox);
    if (!nofocus) {
      focusBox(exBox);
    }
    cleanOutput(exBox, true);
    selector = findUpdateSelector(exBox.source);
    if (selector) {
      exBox.setAttribute('leisureUpdate', selector);
    }
    makeOutputControls(exBox);
    _ref3 = getElements(exBox.firstChild, ['chooseUpdate', 'stopUpdates']), updateSelector = _ref3[0], stopUpdates = _ref3[1];
    updateSelector.addEventListener('change', function(evt) {
      return setUpdate(exBox, evt.target.value, true);
    });
    updateSelector.addEventListener('keydown', function(e) {
      c = e.charCode || e.keyCode || e.which;
      if (c === ENTER) {
        e.preventDefault();
        return updateSelector.blur();
      }
    });
    updateSelector.value = (exBox.getAttribute('leisureUpdate')) || '';
    exBox.updateSelector = updateSelector;
    return evalBox(exBox.source, exBox, cont);
  };

  findUpdateSelector = function(box) {
    var def, defType, leading, matched, name, u;

    if (def = box.textContent.match(rz(L_defPat))) {
      matched = def[0], leading = def[1], name = def[2], defType = def[3];
      if (u = leading.match(updatePat)) {
        return u[3];
      }
    }
  };

  getExprSource = function(box) {
    var b, s;

    s = window.getSelection();
    b = getBox(s.focusNode);
    if (b !== box || !s.rangeCount || s.getRangeAt(0).collapsed) {
      return box.textContent;
    } else {
      return getRangeText(s.getRangeAt(0));
    }
  };

  setUpdate = function(el, channel, preserveSource) {
    var ast, def, defType, index, leading, matched, name, r, txt, u;

    el.setAttribute('leisureUpdate', channel);
    if (channel) {
      el.classList.add('ui-state-highlight');
    } else {
      el.classList.remove('ui-state-highlight');
    }
    ast = getAst(el.source);
    txt = el.source.textContent;
    if (!preserveSource && (def = txt.match(rz(L_defPat)))) {
      matched = def[0], leading = def[1], name = def[2], defType = def[3];
      index = def.index;
      if (u = leading.match(updatePat)) {
        index += u.index + u[1].length + u[2].length;
        r = makeRange(el.source, index, index + u[3].length);
        r.deleteContents();
      } else {
        r = makeRange(el.source, index + leading.length, index + leading.length);
      }
      r.insertNode(textNode(channel));
      return el.source.normalize();
    }
  };

  hasMonadOutput = function(box) {
    var _ref3, _ref4;

    return ((_ref3 = box.firstElementChild) != null ? (_ref4 = _ref3.nextElementSibling) != null ? _ref4.nextElementSibling : void 0 : void 0) != null;
  };

  checkHideSource = function(box) {
    var hs;

    if (!box.hideOutputSource && hasMonadOutput(box)) {
      box.hideOutputSource = true;
      hs = createNode("<button class='editToggle' style='float:right'></button>");
      markupButton(hs);
      hs.addEventListener('click', function() {
        return toggleEdit(hs);
      });
      return box.firstElementChild.appendChild(hs);
    }
  };

  makeOutputControls = function(exBox) {
    if (exBox.firstChild.firstChild === exBox.firstChild.lastChild) {
      exBox.firstChild.insertBefore(createFragment("<button onclick='Notebook.clearOutputBox(this)'>X</button>"), exBox.firstChild.firstChild);
      exBox.firstChild.appendChild(createFragment("<button onclick='Notebook.makeTestCase(this)' leisureId='makeTestCase'>Make test\ncase</button><b>Update: </b><input type='text'\nplaceholder='Click for updating' list='channelList' leisureId='chooseUpdate'></input><button\nonclick='Notebook.clearUpdates(this)' leisureId='stopUpdates'>Stop Updates</button>"));
      markupButtons(exBox);
      return exBox.classList.add('fatControls');
    }
  };

  showOutputSource = function(output) {
    output.classList.remove('hidingSource');
    return output.source.style.display = '';
  };

  hideOutputSource = function(output) {
    console.log("HIDE: " + output);
    output.classList.add('hidingSource');
    return output.source.style.display = 'none';
  };

  toggleEdit = function(toggleButton) {
    var output;

    output = getBox(toggleButton);
    if (output.classList.contains('hidingSource')) {
      return showOutputSource(output);
    } else {
      return hideOutputSource(output);
    }
  };

  clearUpdates = function(widget, preserveSource) {
    var exBox;

    exBox = getBox(widget);
    exBox.updateSelector.value = '';
    return setUpdate(exBox, '', preserveSource);
  };

  update = function(type, env) {
    var node, _i, _len, _ref3, _results;

    env = env != null ? env : defaultEnv;
    _ref3 = env.owner.querySelectorAll("[leisureUpdate~='" + type + "']");
    _results = [];
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      _results.push(evalOutput(node, true));
    }
    return _results;
  };

  clearOutputBox = function(exBox) {
    clearUpdates(exBox, true);
    return cleanOutput(exBox);
  };

  cleanOutput = function(exBox, preserveControls) {
    var fc, _results;

    exBox = getBox(exBox);
    exBox.classList.remove('fatControls');
    if (!preserveControls) {
      exBox.hideOutputSource = null;
      fc = exBox.firstChild;
      fc.removeChild(fc.firstChild);
      while (fc.firstChild !== fc.lastChild) {
        fc.removeChild(fc.lastChild);
      }
    }
    _results = [];
    while (exBox.firstChild !== exBox.lastChild) {
      _results.push(exBox.removeChild(exBox.lastChild));
    }
    return _results;
  };

  makeTestCase = function(exBox) {
    var box, output, source, test;

    output = getBox(exBox);
    source = output.source;
    test = {
      expr: source.textContent.trim(),
      expected: escapeHtml(Parse.print(output.result))
    };
    box = makeTestBox(test, owner(exBox));
    source.parentNode.insertBefore(box, source);
    remove(source);
    remove(output);
    box.parentNode.insertBefore(textNode('\uFEFF'), box);
    box.parentNode.insertBefore(textNode('\uFEFF'), box.nextSibling);
    if (owner(box).autorunState) {
      return clickTest(box);
    }
  };

  makeTestBox = function(test, owner, src) {
    var bx, s;

    src = src != null ? src : "#@test " + (JSON.stringify(test.expr)) + "\n#@expected " + (JSON.stringify(test.expected));
    s = codeSpan(src, 'codeTest');
    s.appendChild(textNode('\n'));
    s.setAttribute('generatedNL', '');
    bx = codeBox('codeMainTest');
    bx.testSrc = s;
    bx.setAttribute('class', 'codeMainTest notrun');
    bx.setAttribute('contenteditable', 'false');
    bx.appendChild(s);
    bx.addEventListener('click', (function() {
      return clickTest(bx);
    }), true);
    bx.test = test;
    return bx;
  };

  clickTest = function(bx) {
    var exprBox, r, sp;

    if (bx.classList.contains('notrun')) {
      return runTest(bx);
    } else {
      r = document.createRange();
      r.setStartBefore(bx);
      r.setEndAfter(bx);
      r.deleteContents();
      sp = codeSpan(bx.test.expr, 'codeExpr');
      sp.setAttribute('generatedNL', '');
      exprBox = box(r, 'codeMainExpr', true);
      exprBox.appendChild(sp);
      return makeOutputBox(exprBox);
    }
  };

  runTest = function(bx) {
    var passed, test;

    test = bx.test;
    passed = true;
    processLine(prepExpr(test.expr), {
      values: {},
      require: req,
      write: function(str) {
        return console.log(str);
      },
      debug: debug,
      prompt: function(msg, cont) {
        return cont(null);
      },
      processResult: function(result, ast) {
        return passed = showResult(bx, escapeHtml(String(result)), escapeHtml(test.expected));
      },
      err: function() {
        return passed = false;
      },
      presentValue: function(x) {
        return x;
      }
    }, identity);
    return passed;
  };

  showResult = function(bx, actual, expected) {
    var cl;

    cl = bx.classList;
    cl.remove('notrun');
    if (actual === expected) {
      cl.remove('failed');
      cl.add('passed');
      bx.testSrc.innerHTML = "#@test " + (JSON.stringify(bx.test.expr)) + "\n#@expected " + (JSON.stringify(bx.test.expected));
    } else {
      cl.remove('passed');
      cl.add('failed');
      bx.testSrc.innerHTML = "#@test " + (JSON.stringify(bx.test.expr)) + "\n#@expected " + (JSON.stringify(bx.test.expected)) + "\n#@result " + (JSON.stringify(actual));
      console.log("expected <" + expected + "> but got <" + actual + ">");
    }
    return actual === expected;
  };

  prepExpr = function(txt) {
    return txt;
  };

  envFor = function(box) {
    var env, exBox, widget;

    exBox = getBox(box);
    widget = null;
    env = {
      fileSettings: {},
      debug: debug,
      finishedEvent: function(evt, channel) {
        return update(channel != null ? channel : 'app', this);
      },
      owner: owner(box),
      box: box,
      require: req,
      write: function(msg) {
        var div;

        div = document.createElement('div');
        div.classList.add('outputDiv');
        div.innerHTML = "" + msg + "\n";
        exBox.appendChild(div);
        checkHideSource(exBox);
        return markupButtons(exBox);
      },
      getWidget: function() {
        if (!widget) {
          widget = document.createElement("DIV");
          exBox.appendChild(widget);
        }
        return widget;
      },
      destroyWidget: function() {
        if (widget) {
          return remove(widget);
        }
      },
      prompt: function(msg, cont) {
        return cont(window.prompt(msg));
      },
      processResult: function(result, ast) {
        box.result = result;
        return setAst(box, ast);
      },
      presentValue: presentValue,
      err: function(err) {
        var btn, _ref3;

        btn = box.querySelector('[leisureId="makeTestCase"]');
        if (btn) {
          remove(btn);
        }
        return this.write("<div class='errorDiv'>" + escapeHtml("ERROR: " + (err.leisureContext ? "" + err + ":\n" + (leisureContextString(err)) + "\n" : '') + ((_ref3 = err.stack) != null ? _ref3 : err)) + "</div>");
      },
      cleanup: function() {
        this.destroyWidget();
        if (root.lastEnv === env) {
          return root.lastEnv = null;
        }
      }
    };
    env.__proto__ = defaultEnv;
    env.fileSettings.uri = new URI(document.location.href);
    root.lastEnv = env;
    return env;
  };

  leisureContextString = function(err) {
    var func, offset;

    return ((function() {
      var _i, _len, _ref3, _ref4, _results;

      _ref3 = err.leisureContext.toArray();
      _results = [];
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        _ref4 = _ref3[_i], func = _ref4[0], offset = _ref4[1];
        _results.push(linkSource(func, offset));
      }
      return _results;
    })()).join('\n');
  };

  linkSource = function(funcName, offset) {};

  showSource = function(funcName, offset) {};

  makeOutputBox = function(source) {
    var cl, node, _i, _len, _ref3;

    node = document.createElement('div');
    node.setAttribute('LeisureOutput', '');
    node.setAttribute('Leisure', '');
    node.setAttribute('LeisureBox', '');
    _ref3 = boxClasses.output;
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      cl = _ref3[_i];
      node.classList.add(cl);
    }
    node.setAttribute('contentEditable', 'false');
    node.source = source;
    source.output = node;
    node.innerHTML = "<div class='controls'><button onclick='Notebook.evalOutput(this)'>-&gt;</button></div>";
    markupButtons(node);
    source.parentNode.insertBefore(node, source.nextSibling);
    return node;
  };

  codeSpan = function(text, boxType) {
    var node;

    node = document.createElement('span');
    node.setAttribute(boxType, '');
    node.setAttribute('Leisure', '');
    node.setAttribute('class', boxType);
    if (text) {
      node.appendChild(nodeFor(text));
    }
    return node;
  };

  codeBox = function(boxType) {
    var node;

    node = document.createElement('div');
    addBoxClasses(node, boxType);
    node.setAttribute('LeisureBox', '');
    node.setAttribute('Leisure', '');
    node.addEventListener('compositionstart', function(e) {
      return checkMutateFromModification(e);
    });
    return node;
  };

  box = function(range, boxType, empty) {
    var node;

    node = codeBox(boxType);
    if (empty) {
      range.deleteContents();
    } else {
      node.appendChild(range.extractContents());
    }
    range.insertNode(node);
    return node;
  };

  linePat = new RegExp("(" + (rz(L_linePat).source) + ")");

  findDefs = function(el) {
    var def, ranges, rest, rng, txt;

    txt = el.textContent;
    rest = txt;
    ranges = [];
    while ((def = rest.match(rz(L_unanchoredDefPat))) && def[1].length !== rest.length) {
      rng = getRanges(el, txt, rest, def, txt.length - rest.length);
      if (rng) {
        rest = rng.next;
        if (rng) {
          ranges.push(rng);
        } else {
          break;
        }
      } else {
        break;
      }
    }
    return ranges;
  };

  testPat = /(#@test([^\n]*)\n#@expected([^\n]*))\n/m;

  getRanges = function(el, txt, rest, def, restOff) {
    var body, bodyStart, defType, endPat, ex, exEnd, leadOff, leading, leadingSpaces, lm, m, m2, mainEnd, mainStart, matchStart, matched, name, nameEnd, nameRaw, next, outerRange, r, rest1, t, tOff, tests, textStart, _ref3, _ref4, _ref5, _ref6;

    _ref3 = m = def, matched = _ref3[0], leading = _ref3[1], nameRaw = _ref3[2], defType = _ref3[3];
    if (!rest.trim()) {
      return null;
    } else if (m == null) {
      return [makeRange(el, restOff, txt.length), null, null, [], ''];
    } else {
      tests = [];
      matchStart = restOff + m.index;
      if (defType == null) {
        name = null;
      } else if (nameRaw[0] === ' ') {
        name = null;
        defType = null;
      } else {
        name = nameRaw.trim() || null;
      }
      rest1 = rest.substring((defType ? matched : leading).length);
      endPat = rest1.match(/\n+[^\s]|\n?$/);
      next = endPat ? rest1.substring(endPat.index) : rest1;
      mainEnd = txt.length - next.length;
      t = leading;
      leadOff = tOff = restOff;
      while (m2 = t.match(testPat)) {
        r = makeRange(el, tOff + m2.index, tOff + m2.index + m2[1].length);
        r.leisureTest = {
          expr: JSON.parse(m2[2]),
          expected: JSON.parse(m2[3])
        };
        tests.push(r);
        tOff += m2.index + m2[1].length;
        t = leading.substring(tOff - leadOff);
      }
      if (name) {
        mainStart = matchStart + ((_ref4 = leading != null ? leading.length : void 0) != null ? _ref4 : 0);
        nameEnd = mainStart + name.length;
        leadingSpaces = (rest1.match(/^\s*/))[0].length;
        bodyStart = txt.length - (rest1.length - leadingSpaces);
        outerRange = makeRange(el, mainStart, mainEnd);
        return {
          main: outerRange,
          name: txt.substring(mainStart, nameEnd),
          def: defType,
          body: txt.substring(bodyStart, mainEnd),
          tests: tests,
          next: next
        };
      } else {
        mainStart = defType === '=' ? restOff + m.index + m[0].length : matchStart + ((_ref5 = leading != null ? leading.length : void 0) != null ? _ref5 : 0);
        ex = txt.substring(mainStart, mainEnd).match(/^(.*[^ \n])[ \n]*$/);
        exEnd = ex ? mainStart + ex[1].length : mainEnd;
        body = txt.substring(mainStart, exEnd);
        if (body.trim()) {
          textStart = restOff + m.index + (t ? leading.length - t.length : 0);
          if ((t != null) && (lm = t.match(/^[ \n]+/))) {
            textStart += lm[0].length;
          }
          if (m = t.match(/(?:^|\n)#@auto( +[^\n]*)?(\n|$)/)) {
            outerRange = makeRange(el, textStart, exEnd);
            outerRange.leisureAuto = JSON.parse("{" + ((_ref6 = m[1]) != null ? _ref6 : '') + "}");
            if (outerRange.leisureAuto.mode === 'notebook') {
              outerRange.leisureNode = el;
              outerRange.leisureStart = textStart;
            }
            return {
              main: outerRange,
              name: null,
              def: null,
              body: txt.substring(textStart, exEnd),
              tests: tests,
              fullText: txt.substring(textStart, exEnd),
              next: next
            };
          } else {
            outerRange = makeRange(el, textStart, exEnd);
            return {
              main: outerRange,
              name: null,
              def: null,
              body: txt.substring(textStart, exEnd),
              tests: tests,
              next: next
            };
          }
        } else {
          return {
            main: null,
            name: null,
            def: null,
            body: null,
            tests: tests,
            next: next
          };
        }
      }
    }
  };

  makeRange = function(el, off1, off2) {
    var node, offset, range, _ref3, _ref4;

    range = document.createRange();
    _ref3 = grp(el, off1, false), node = _ref3[0], offset = _ref3[1];
    if ((offset != null) && offset > 0) {
      range.setStart(node, offset);
    } else {
      range.setStartBefore(node);
    }
    if (off2 != null) {
      _ref4 = grp(el, off2, true), node = _ref4[0], offset = _ref4[1];
      if (offset != null) {
        range.setEnd(node, offset);
      } else {
        range.setEndAfter(node);
      }
    }
    return range;
  };

  grp = function(node, charOffset, end) {
    var child, offset, ret, _ref3;

    _ref3 = ret = getRangePosition(node.firstChild, charOffset, end), child = _ref3[0], offset = _ref3[1];
    if (child) {
      return ret;
    } else if (node.lastChild) {
      return nodeEnd(node.lastChild);
    } else {
      return [node, end ? 1 : 0];
    }
  };

  getRangePosition = function(node, charOffset, end) {
    var newNode, newOff, ret, _ref3;

    if (!node) {
      return [null, charOffset];
    } else if (node.nodeType === 3) {
      if (node.length > (end ? charOffset - 1 : charOffset)) {
        return [node, charOffset];
      } else {
        ret = continueRangePosition(node, charOffset - node.length, end);
        return ret;
      }
    } else if (node.nodeName === 'BR') {
      if (charOffset === (end ? 1 : 0)) {
        return [node];
      } else {
        return continueRangePosition(node, charOffset, end);
      }
    } else if (node.firstChild != null) {
      _ref3 = getRangePosition(node.firstChild, charOffset, end), newNode = _ref3[0], newOff = _ref3[1];
      if (newNode != null) {
        return [newNode, newOff];
      } else {
        return continueRangePosition(node, newOff, end);
      }
    } else {
      return continueRangePosition(node, charOffset, end);
    }
  };

  continueRangePosition = function(node, charOffset, end) {
    var newOff;

    newOff = charOffset - ((addsLine(node)) || ((node.nextSibling != null) && (addsLine(node.nextSibling))) ? 1 : 0);
    if (end && (newOff === 1 || charOffset === 1)) {
      return nodeEnd(node);
    } else if (node.nextSibling != null) {
      return getRangePosition(node.nextSibling, newOff, end);
    } else {
      return continueRangePosition(node.parentNode, newOff, end);
    }
  };

  nodeEnd = function(node) {
    return [node, node.nodeType === 3 ? node.length : node.childNodes.length - 1];
  };

  addsLine = function(node) {
    return (node != null ? node.nodeType : void 0) === 1 && (node.nodeName === 'BR' || (getComputedStyle(node, null).display === 'block' && node.childNodes.length > 0));
  };

  req = function(file, cont) {
    var name, s;

    if (!(file.match(/\.js$/))) {
      file = "" + file + ".js";
    }
    name = file.substring(0, file.length - 3);
    s = document.createElement('script');
    s.setAttribute('src', file);
    s.addEventListener('load', function() {
      Leisure.processDefs(global[name], global);
      if (cont) {
        return cont(rz(L_false));
      }
    });
    return document.head.appendChild(s);
  };

  postLoadQueue = [];

  loaded = false;

  queueAfterLoad = function(func) {
    if (loaded) {
      return func();
    } else {
      return postLoadQueue.push(func);
    }
  };

  /*
  # handle focus manually, because grabbing focus and blur events doesn't seem to work for the parent
  */


  docFocus = null;

  codeFocus = null;

  findCurrentCodeHolder = function() {
    var _ref3;

    return focusBox((_ref3 = window.getSelection()) != null ? _ref3.focusNode : void 0);
  };

  focusBox = function(box) {
    var newCode, old, _ref3;

    newCode = null;
    while (box && (box.nodeType !== 1 || !isLeisureCode(box))) {
      if (box.nodeType === 1 && ((box.getAttribute('LeisureBox')) != null)) {
        newCode = box;
      }
      box = box.parentNode;
    }
    if (box !== docFocus) {
      if (docFocus != null) {
        docFocus.classList.remove('focused');
      }
      docFocus = box;
      if (box != null) {
        if ((_ref3 = box.classList) != null) {
          _ref3.add('focused');
        }
      }
    }
    if (newCode !== codeFocus) {
      old = codeFocus;
      codeFocus = newCode;
      if (old) {
        return acceptCode(old);
      }
    }
  };

  owner = function(box) {
    while (box && (box.nodeType !== 1 || !isLeisureCode(box))) {
      box = box.parentNode;
    }
    return box;
  };

  hiddenPat = /(^|\n)#@hidden *(\n|$)/;

  evalBox = function(box, envBox, cont) {
    var env;

    env = envBox != null ? envFor(envBox) : null;
    processLine(box.textContent, env, function(result) {
      if (env != null) {
        if (typeof env.cleanup === "function") {
          env.cleanup();
        }
      }
      return (cont != null ? cont : function(x) {
        return x;
      })(result);
    });
    getAst(box);
    if (box.output && hasMonadOutput(box.output) && box.textContent.match(hiddenPat)) {
      return hideOutputSource(box.output);
    } else if (box.textContent.match(hiddenPat)) {
      return console.log("NO MONAD, BUT MATCHES HIDDEN");
    }
  };

  acceptCode = function(box) {
    if ((box.getAttribute('codemain')) != null) {
      evalBox(box);
      update('compile');
      if (owner(box).autorunState) {
        return runTests(owner(box));
      }
    }
  };

  errString = function(err) {
    return err.stack;
  };

  evaluating = false;

  evaluationQueue = [];

  evalNodes = function(nodes) {
    if (evaluating) {
      return evaluationQueue.push(nodes);
    } else {
      return chainEvalNodes(nodes);
    }
  };

  chainEvalNodes = function(nodes) {
    evaluating = true;
    return runAuto(nodes, 0, function() {
      if (evaluationQueue.length) {
        return chainEvalNodes(evaluationQueue.shift());
      } else {
        return evaluating = false;
      }
    });
  };

  evalDoc = function(el) {
    var auto, autoNodes, e, err, pgm, x, _ref3;

    _ref3 = initNotebook(el), pgm = _ref3[0], auto = _ref3[1], x = _ref3[2], autoNodes = _ref3[3];
    try {
      if (auto || autoNodes) {
        auto = "do\n  " + ((auto != null ? auto : '#').trim().replace(/\n/g, '\n  ')) + "\n  delay\n  finishLoading";
        global.noredefs = false;
        Notebook.queueAfterLoad(function() {
          evalDocCode(el, pgm);
          if (el.autorunState) {
            runTests(el);
          }
          return evalNodes(autoNodes);
        });
        e = envFor(el);
        e.write = function() {};
        e.err = function(err) {
          return alert('bubba ' + errString(err));
        };
        return processLine(auto, e, identity);
      } else {
        return evalDocCode(el, pgm);
      }
    } catch (_error) {
      err = _error;
      return showError(err, "Error compiling " + pgm);
    }
  };

  runAuto = function(nodes, index, cont) {
    var node;

    if (index < nodes.length) {
      console.log("RUNNING AUTO: " + index);
      node = nodes[index];
      console.log("evalOutput", node, node.output);
      return evalOutput(node.output, false, function() {
        return runAuto(nodes, index + 1, cont);
      });
    } else {
      return (cont != null ? cont : function() {})();
    }
  };

  processLine = function(text, env, cont) {
    var err;

    if (text) {
      try {
        return runMonad(rz(L_newParseLine)(lz(Nil))(lz(text)), env, function(ast) {
          var err, result;

          try {
            if (getType(ast) === 'parseErr') {
              env.write(env.presentValue(ast));
              if (typeof env.processResult === "function") {
                env.processResult(ast);
              }
              return cont(ast);
            } else {
              result = eval("(" + (gen(ast)) + ")");
              env.write(env.presentValue(result));
              if (isMonad(result)) {
                return runMonad(result, env, function(result) {
                  env.processResult(result);
                  return cont(result);
                });
              } else {
                if (typeof env.processResult === "function") {
                  env.processResult(result);
                }
                return cont(result);
              }
            }
          } catch (_error) {
            err = _error;
            console.log("ERROR: " + err.stack);
            env.write(env.presentValue(err.stack));
            if (typeof env.processResult === "function") {
              env.processResult(err.stack);
            }
            return cont(err.stack);
          }
        });
      } catch (_error) {
        err = _error;
        console.log("ERROR: " + err.stack);
        env.write(env.presentValue(err.stack));
        if (typeof env.processResult === "function") {
          env.processResult(err.stack);
        }
        return cont(err.stack);
      }
    } else {
      return cont('');
    }
  };

  showError = function(e, msg) {
    console.log(msg);
    console.log(e);
    console.log(e.stack);
    return alert(e.stack);
  };

  evalDocCode = function(el, pgm) {
    return runMonad(rz(L_runFile)(lz(pgm)), defaultEnv, function(result) {
      var node, _i, _len, _ref3, _results;

      _ref3 = el.querySelectorAll('[codeMain]');
      _results = [];
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        node = _ref3[_i];
        _results.push(getAst(node));
      }
      return _results;
    });
  };

  define('getDocument', lz(makeSyncMonad(function(env, cont) {
    return cont(peerGetDocument());
  })));

  define('getLink', function() {
    return 0;
  });

  define('replaceDocument', lz(function(str) {
    return makeSyncMonad(function(env, cont) {
      replaceContents(rz(str));
      return cont(rz(L_true));
    });
  }));

  define('gdriveOpen', lz(makeMonad(function(env, cont) {
    return GdriveStorage.runOpen(function(json) {
      var _ref3;

      if ((json != null ? json.action : void 0) === 'picked' && ((_ref3 = json.docs) != null ? _ref3.length : void 0) > 0) {
        return GdriveStorage.loadFile(json.docs[0].id, function() {
          return cont(rz(_some)(lz(json.docs[0].title)));
        });
      } else {
        return cont(rz(_none));
      }
    });
  })));

  define('getFilename', lz(makeSyncMonad(function(env, cont) {
    var _ref3;

    return cont((_ref3 = filename != null ? filename.pathName() : void 0) != null ? _ref3 : '');
  })));

  define('setURI', lz(function(uri) {
    return makeSyncMonad(function(env, cont) {
      setFilename(rz(uri));
      return cont(rz(L_true));
    });
  }));

  define('getURI', lz(makeSyncMonad(function(env, cont) {
    var _ref3;

    return cont((_ref3 = filename != null ? filename.toString() : void 0) != null ? _ref3 : '');
  })));

  define('finishLoading', lz(makeMonad(function(env, cont) {
    var i, _i, _len;

    loaded = true;
    for (_i = 0, _len = postLoadQueue.length; _i < _len; _i++) {
      i = postLoadQueue[_i];
      rz(i);
    }
    postLoadQueue = [];
    return cont(rz(L_false));
  })));

  define('markupButtons', lz(makeSyncMonad(function(env, cont) {
    if (env.box) {
      markupButtons(env.box);
    }
    return cont(rz(L_false));
  })));

  define('alert', lz(function(str) {
    return makeSyncMonad(function(env, cont) {
      window.alert(rz(str));
      return cont(rz(L_false));
    });
  }));

  define('bindEvent', lz(function(selector) {
    return function(eventName) {
      return function(func) {
        return makeSyncMonad(function(env, cont) {
          var node;

          node = env.box.querySelector(rz(selector));
          if (!node) {
            node = document.body.querySelector(rz(selector));
          }
          console.log("ADDING EVENT: " + (rz(selector)) + " " + (rz(eventName)) + " NODE: " + node);
          if (node) {
            node.addEventListener(eventName(), function(e) {
              console.log("EVENT: " + (rz(selector)) + " " + (rz(eventName)) + " " + (rz(func)));
              return runMonad(rz(func)(lz(e)), envFor(e.target), function() {});
            });
          }
          return cont(rz(L_false));
        });
      };
    };
  }));

  define('quit', lz(window.close()));

  define('config', lz(function(expr) {
    return makeSyncMonad(function(env, cont) {
      switch (rz(expr)) {
        case 'autoTest':
          autoRun(env.owner, true);
      }
      return cont(rz(L_false));
    });
  }));

  define('notebookSelection', lz(function(func) {
    return makeSyncMonad(function(env, cont) {
      var bx, offset, p1, p2, r, r2, sel;

      sel = window.getSelection();
      bx = getBox(sel.focusNode);
      if ((bx != null) && hasFunc(bx, func)) {
        offset = 0;
        r = sel.getRangeAt(0);
        window.r = r;
        r2 = document.createRange();
        r2.setStart(bx, 0);
        r2.setEnd(r.startContainer, r.startOffset);
        p1 = r2.cloneContents().textContent.length - offset;
        if (!r.collapsed) {
          r2.setEnd(r.endContainer, r.endOffset);
        }
        p2 = r2.cloneContents().textContent.length - offset;
        return cont(rz(_some2)(lz(p1))(lz(p2)));
      } else {
        return cont(rz(_none));
      }
    });
  }));

  hasFunc = function(bx, func) {
    var ast;

    ast = getAst(bx);
    return ast === func().ast || ast === func.ast;
  };

  define('notebookAst', lz(function(func) {
    return makeSyncMonad(function(env, cont) {
      var ast, node;

      if (func.leisureName != null) {
        node = document.querySelector("[LeisureFunc=" + func.leisureName + "]");
        if (node != null) {
          ast = getAst(node);
          return cont(rz(_some)(lz(ast)));
        }
      }
      return cont(rz(_none));
    });
  }));

  autoRun = function(el, state) {
    var _ref3;

    el.autorunState = state;
    return (_ref3 = el.autorun) != null ? _ref3.checked = state : void 0;
  };

  head = function(l) {
    return l(lz(function(hh) {
      return function(tt) {
        return rz(hh);
      };
    }));
  };

  tail = function(l) {
    return l(lz(function(hh) {
      return function(tt) {
        return rz(tt);
      };
    }));
  };

  id = function(v) {
    return rz(v);
  };

  getSvgElement = function(id) {
    var el, svg;

    if ((el = document.getElementById(id))) {
      return el;
    } else {
      svg = createNode("<svg id='HIDDEN_SVG' xmlns='http://www.w3.org/2000/svg' version='1.1' style='top: -100000; position: absolute'><text id='HIDDEN_TEXT'>bubba</text></svg>");
      document.body.appendChild(svg);
      return document.getElementById(id);
    }
  };

  svgMeasureText = function(text) {
    return function(style) {
      return function(f) {
        var bx, txt;

        txt = getSvgElement('HIDDEN_TEXT');
        if (rz(style)) {
          txt.setAttribute('style', rz(style));
        }
        txt.lastChild.textContent = rz(text);
        bx = txt.getBBox();
        return rz(f)(lz(bx.width))(lz(bx.height));
      };
    };
  };

  primconcatNodes = function(nodes) {
    if (nodes === rz(_nil)) {
      return "";
    } else {
      return (head(nodes))(id) + concatNodes(tail(nodes));
    }
  };

  transformedPoint = function(pt, x, y, ctm, ictm) {
    pt.x = x;
    pt.y = y;
    return pt.matrixTransform(ctm).matrixTransform(ictm);
  };

  svgMeasure = function(content) {
    return primSvgMeasure(content, baseStrokeWidth);
  };

  svgBetterMeasure = function(content) {
    return primSvgMeasure(content, transformStrokeWidth);
  };

  primSvgMeasure = function(content, transformFunc) {
    return function(f) {
      var bbox, g, pad, svg;

      svg = createNode("<svg xmlns='http://www.w3.org/2000/svg' version='1.1' style='top: -100000'><g>" + (content()) + "</g></svg>");
      document.body.appendChild(svg);
      g = svg.firstChild;
      bbox = g.getBBox();
      pad = getMaxStrokeWidth(g, g, svg, transformFunc);
      document.body.removeChild(svg);
      return rz(f)(lz(bbox.x - Math.ceil(pad / 2)))(lz(bbox.y - Math.ceil(pad / 2)))(lz(bbox.width + pad))(lz(bbox.height + pad));
    };
  };

  baseElements = ['path', 'rect', 'circle', 'ellipse', 'line', 'polyline', 'polygon'];

  getMaxStrokeWidth = function(el, base, svg, transformFunc) {
    var _ref3, _ref4;

    if (_ref3 = base.nodeName, __indexOf.call(baseElements, _ref3) >= 0) {
      svg.setAttribute('width', (_ref4 = getComputedStyle(base).strokeWidth) != null ? _ref4 : '0', svg);
      return transformFunc(el, svg.width.baseVal.value);
    } else if (base.nodeName === 'use') {
      return getMaxStrokeWidth(base, base.instanceRoot.correspondingElement, svg, transformFunc);
    } else if (base.nodeName === 'g') {
      return foldLeft((function(v, n) {
        return Math.max(v, getMaxStrokeWidth(n, n, svg, transformFunc));
      }), 0, el.childNodes);
    } else {
      return 0;
    }
  };

  baseStrokeWidth = function(el, w) {
    return w;
  };

  transformStrokeWidth = function(el, w) {
    var ctm, tp1, tp2, x, y;

    if (w === 0) {
      return 0;
    } else {
      ctm = el.getScreenCTM();
      tp1 = transformedPoint(pt, bx.x - Math.ceil(w), bx.y - Math.ceil(w), ctm, isctm);
      tp2 = transformedPoint(pt, bx.x + bx.width + Math.ceil(w), bx.y + bx.height + Math.ceil(w), ctm, isctm);
      x = tp2.x - tp1.x;
      y = tp2.y - tp1.y;
      return Math.sqrt(x * x + y * y);
    }
  };

  previousSibling = function(node) {
    while ((node != null ? node.parentNode : void 0) && !node.previousSibling) {
      node = node.parentNode;
    }
    return node != null ? node.previousSibling : void 0;
  };

  nextSibling = function(node) {
    while ((node != null ? node.parentNode : void 0) && !node.nextSibling) {
      node = node.parentNode;
    }
    return node != null ? node.nextSibling : void 0;
  };

  hideControlSection = function() {
    var controlSection;

    controlSection = document.body.querySelector('[leisureSection="Leisure Controls"]');
    if (!controlSection) {
      controlSection = document.createElement('DIV');
      document.body.insertBefore(controlSection, document.body.firstChild);
      root.markupElement(controlSection, "# Leisure Controls\n\n## File Save and Load\n```\nsaveFile\n\nsaveAs 'filename'\n\nsaveAs pickFile\n\nloadFile\n\nemptyFile\n```");
      unwrap(controlSection);
    }
    controlSection.classList.add(leisure_controls);
    return controlSection.classList.add(hidden);
  };

  define('printValue', lz(function(value) {
    return makeMonad(function(env, cont) {
      if (rz(value) !== rz(L_nil)) {
        env.write("" + (env.presentValue(rz(value))) + "\n");
      }
      return cont(L_false());
    });
  }));

  defaultEnv.require = req;

  root.svgMeasureText = svgMeasureText;

  root.svgMeasure = svgMeasure;

  root.initNotebook = initNotebook;

  root.bindNotebook = bindNotebook;

  root.bindAll = bindAll;

  root.evalOutput = evalOutput;

  root.makeTestCase = makeTestCase;

  root.cleanOutput = cleanOutput;

  root.clearOutputBox = clearOutputBox;

  root.envFor = envFor;

  root.queueAfterLoad = queueAfterLoad;

  root.evalDoc = evalDoc;

  root.getBox = getBox;

  root.makeRange = makeRange;

  root.grp = grp;

  root.changeTheme = changeTheme;

  root.setSnapper = setSnapper;

  root.update = update;

  root.clearUpdates = clearUpdates;

  root.showAst = showAst;

  root.toggleEdit = toggleEdit;

  root.showSource = showSource;

  root.bootNotebook = bootNotebook;

  root.createNode = createNode;

  root.ENTER = ENTER;

  root.textNode = textNode;

  root.cleanEmptyNodes = cleanEmptyNodes;

  root.isLeisureCode = isLeisureCode;

  root.getElementCode = getElementCode;

  root.runTests = runTests;

  root.previousSibling = previousSibling;

  root.nextSibling = nextSibling;

  root.presentLeisureCode = presentLeisureCode;

  root.mergeLeisureCode = mergeLeisureCode;

  root.highlightNotebookFunction = highlightNotebookFunction;

  root.ESC = ESC;

  root.HOME = HOME;

  root.END = END;

  root.PAGE_UP = PAGE_UP;

  root.PAGE_DOWN = PAGE_DOWN;

  root.LEFT_ARROW = LEFT_ARROW;

  root.UP_ARROW = UP_ARROW;

  root.RIGHT_ARROW = RIGHT_ARROW;

  root.DOWN_ARROW = DOWN_ARROW;

  root.arrows = arrows;

  root.closeWindow = closeWindow;

  root.markupButton = markupButton;

  root.markupButtons = markupButtons;

  root.getAst = getAst;

  root.insertControls = insertControls;

  root.delay = delay;

  root.setFilename = setFilename;

  root.unwrap = unwrap;

  root.remove = remove;

  root.wrapRange = wrapRange;

  root.replaceContents = replaceContents;

  root.event = event;

}).call(this);

/*
*/

})(self)
},{"./ast":1,"./base":2,"./gen":4,"./lodash.min":6,"./runtime":10}],10:[function(require,module,exports){
(function(process,global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var Monad, Nil, SimpyCons, actors, amt, ast2Json, asyncMonad, basicCall, booleanFor, call, callMonad, cons, consFrom, continueMonads, curry, defaultEnv, define, ensureLeisureClass, functionInfo, getDataType, getMonadSyncMode, getType, getValue, hamt, head, identity, isMonad, lazy, left, lz, makeHamt, makeMonad, makeSyncMonad, memo, monadModeSync, nameSub, newRunMonad, nextMonad, nextNode, none, parensContent, parensEnd, parensStart, readDir, readFile, replaceErr, resolve, right, root, runMonad, rz, setDataType, setType, setValue, setWarnAsync, simpyCons, some, statFile, strCoord, strFromList, strToList, subcurry, tail, tokenPos, tokenString, trampCurry, values, warnAsync, withSyncModeDo, writeFile, _, _false, _identity, _ref, _ref1, _true,
    __slice = [].slice;

  _ref = root = module.exports = require('./base'), readFile = _ref.readFile, statFile = _ref.statFile, readDir = _ref.readDir, writeFile = _ref.writeFile, defaultEnv = _ref.defaultEnv, SimpyCons = _ref.SimpyCons, simpyCons = _ref.simpyCons, resolve = _ref.resolve, lazy = _ref.lazy;

  _ref1 = require('./ast'), define = _ref1.define, cons = _ref1.cons, Nil = _ref1.Nil, head = _ref1.head, tail = _ref1.tail, getType = _ref1.getType, getDataType = _ref1.getDataType, ast2Json = _ref1.ast2Json, ensureLeisureClass = _ref1.ensureLeisureClass, setType = _ref1.setType, setDataType = _ref1.setDataType, functionInfo = _ref1.functionInfo, nameSub = _ref1.nameSub;

  _ = require('./lodash.min');

  amt = require('persistent-hash-trie');

  rz = resolve;

  lz = lazy;

  call = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return basicCall(args, defaultEnv, identity);
  };

  callMonad = function() {
    var args, cont, env, _i;

    args = 3 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 2) : (_i = 0, []), env = arguments[_i++], cont = arguments[_i++];
    return basicCall(args, env, cont);
  };

  basicCall = function(args, env, cont) {
    var arg, res, _i, _len, _ref2;

    res = global["L_" + args[0]]();
    _ref2 = args.slice(1);
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      arg = _ref2[_i];
      res = (function(arg) {
        return res(lz(arg));
      })(arg);
    }
    return runMonad(res, env, cont);
  };

  consFrom = function(array, i) {
    i = i || 0;
    if (i < array.length) {
      return cons(array[i], consFrom(array, i + 1));
    } else {
      return L_nil();
    }
  };

  identity = function(x) {
    return x;
  };

  _identity = function(x) {
    return rz(x);
  };

  _true = setType((function(a) {
    return function(b) {
      return rz(a);
    };
  }), 'true');

  _false = setType((function(a) {
    return function(b) {
      return rz(b);
    };
  }), 'false');

  left = function(x) {
    return setType((function(lCase) {
      return function(rCase) {
        return rz(lCase)(lz(x));
      };
    }), 'left');
  };

  right = function(x) {
    return setType((function(lCase) {
      return function(rCase) {
        return rz(rCase)(lz(x));
      };
    }), 'right');
  };

  some = function(x) {
    return setType((function(someCase) {
      return function(noneCase) {
        return rz(someCase)(lz(x));
      };
    }), 'some');
  };

  none = setType((function(someCase) {
    return function(noneCase) {
      return rz(noneCase);
    };
  }), 'none');

  booleanFor = function(bool) {
    if (bool) {
      return rz(L_true);
    } else {
      return rz(L_false);
    }
  };

  define('eq', lz(function(a) {
    return function(b) {
      return booleanFor(rz(a) === rz(b));
    };
  }));

  define('==', lz(function(a) {
    return function(b) {
      return booleanFor(rz(a) === rz(b));
    };
  }));

  define('hasType', lz(function(data) {
    return function(func) {
      if (typeof rz(func) === 'string') {
        return booleanFor(getType(rz(data)) === rz(func));
      } else {
        return booleanFor(getType(rz(data)) === getDataType(rz(func)));
      }
    };
  }));

  define('getDataType', lz(function(func) {
    if (typeof rz(func) === 'string') {
      return rz(func);
    } else {
      return getDataType(rz(func));
    }
  }));

  define('assert', lz(function(bool) {
    return function(msg) {
      return function(expr) {
        return rz(bool)(expr)(function() {
          throw new Error(rz(msg));
        });
      };
    };
  }));

  define('assertLog', lz(function(bool) {
    return function(msg) {
      return function(expr) {
        return rz(bool)(expr)(function() {
          console.log(new Error(rz(msg)).stack);
          console.log("LOGGED ERROR -- RESUMING EXECUTION...");
          return rz(expr);
        });
      };
    };
  }));

  define('+', lz(function(x) {
    return function(y) {
      return rz(x) + rz(y);
    };
  }));

  define('-', lz(function(x) {
    return function(y) {
      return rz(x) - rz(y);
    };
  }));

  define('*', lz(function(x) {
    return function(y) {
      return rz(x) * rz(y);
    };
  }));

  define('/', lz(function(x) {
    return function(y) {
      return rz(x) / rz(y);
    };
  }));

  define('%', lz(function(x) {
    return function(y) {
      return rz(x) % rz(y);
    };
  }));

  define('<', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) < rz(y));
    };
  }));

  define('<=', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) <= rz(y));
    };
  }));

  define('>', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) > rz(y));
    };
  }));

  define('>=', lz(function(x) {
    return function(y) {
      return booleanFor(rz(x) >= rz(y));
    };
  }));

  define('floor', lz(function(x) {
    return Math.floor(rz(x));
  }));

  define('ceil', lz(function(x) {
    return Math.ceil(rz(x));
  }));

  define('min', lz(function(x) {
    return function(y) {
      return Math.min(rz(x), rz(y));
    };
  }));

  define('max', lz(function(x) {
    return function(y) {
      return Math.max(rz(x), rz(y));
    };
  }));

  define('round', lz(function(x) {
    return Math.round(rz(x));
  }));

  define('abs', lz(function(x) {
    return Math.abs(rz(x));
  }));

  define('sqrt', lz(function(x) {
    return Math.sqrt(rz(x));
  }));

  define('acos', lz(function(x) {
    return Math.acos(rz(x));
  }));

  define('asin', lz(function(x) {
    return Math.asin(rz(x));
  }));

  define('atan', lz(function(x) {
    return Math.atan(rz(x));
  }));

  define('atan2', lz(function(x) {
    return function(y) {
      return Math.atan2(rz(x), rz(y));
    };
  }));

  define('cos', lz(function(x) {
    return Math.cos(rz(x));
  }));

  define('log', lz(function(x) {
    return Math.log(rz(x));
  }));

  define('sin', lz(function(x) {
    return Math.sin(rz(x));
  }));

  define('tan', lz(function(x) {
    return Math.tan(rz(x));
  }));

  define('rand', function() {
    return makeSyncMonad(function(env, cont) {
      return cont(Math.random());
    });
  });

  define('randInt', lz(function(low) {
    return function(high) {
      return makeSyncMonad(function(env, cont) {
        return cont(Math.floor(rz(low) + Math.random() * rz(high)));
      });
    };
  }));

  define('^', lz(function(x) {
    return function(y) {
      return Math.pow(rz(x), rz(y));
    };
  }));

  define('_show', lz(function(data) {
    var _ref2;

    if ((_ref2 = typeof rz(data)) === 'string' || _ref2 === 'number' || _ref2 === 'boolean') {
      return JSON.stringify(rz(data));
    } else {
      return String(rz(data));
    }
  }));

  define('strString', lz(function(data) {
    return String(rz(data));
  }));

  define('_strAsc', lz(function(str) {
    return rz(str).charCodeAt(0);
  }));

  define('_strChr', lz(function(i) {
    return String.fromCharCode(rz(i));
  }));

  define('_strAt', lz(function(str) {
    return function(index) {
      return rz(str)[strCoord(rz(str), rz(index))];
    };
  }));

  define('_strStartsWith', lz(function(str) {
    return function(prefix) {
      return booleanFor(rz(str).substring(0, rz(prefix).length) === rz(prefix));
    };
  }));

  define('_strLen', lz(function(str) {
    return rz(str).length;
  }));

  define('_strToLowerCase', lz(function(str) {
    return rz(str).toLowerCase();
  }));

  define('_strToUpperCase', lz(function(str) {
    return rz(str).toUpperCase();
  }));

  define('_strReplace', lz(function(str) {
    return function(pat) {
      return function(repl) {
        return rz(str).replace(rz(pat), rz(repl));
      };
    };
  }));

  strCoord = function(str, coord) {
    if (coord < 0) {
      return str.length + coord;
    } else {
      return coord;
    }
  };

  define('_strSubstring', lz(function(str) {
    return function(start) {
      return function(end) {
        var a, b;

        a = strCoord(rz(str), rz(start));
        b = strCoord(rz(str), rz(end));
        if (b < a && rz(end) === 0) {
          b = rz(str).length;
        }
        return rz(str).substring(a, b);
      };
    };
  }));

  define('_strSplit', lz(function(str) {
    return function(pat) {
      return consFrom(rz(str).split(rz(pat) instanceof RegExp ? rz(pat) : new RegExp(rz(pat))));
    };
  }));

  define('_strCat', lz(function(list) {
    return _.map(rz(list).toArray(), function(el) {
      if (typeof el === 'string') {
        return el;
      } else {
        return rz(L_show)(lz(el));
      }
    }).join('');
  }));

  define('_strAdd', lz(function(s1) {
    return function(s2) {
      return rz(s1) + rz(s2);
    };
  }));

  define('_strMatch', lz(function(str) {
    return function(pat) {
      var groups, m, pos;

      m = rz(str).match((rz(pat) instanceof RegExp ? rz(pat) : new RegExp(rz(pat))));
      if (m) {
        groups = [];
        pos = 1;
        while (m[pos]) {
          groups.push(m[pos++]);
        }
        if (typeof m.index !== 'undefined') {
          return consFrom([m[0], consFrom(groups), m.index, m.input]);
        } else {
          return consFrom([m[0], consFrom(groups)]);
        }
      } else {
        return Nil;
      }
    };
  }));

  define('_strToList', lz(function(str) {
    return strToList(rz(str));
  }));

  strToList = function(str) {
    if (str === '') {
      return Nil;
    } else {
      return cons(str[0], strToList(str.substring(1)));
    }
  };

  define('_strFromList', lz(function(list) {
    return strFromList(rz(list));
  }));

  strFromList = function(list) {
    if (list instanceof Leisure_nil) {
      return '';
    } else {
      return head(list) + strFromList(tail(list));
    }
  };

  define('_regexp', lz(function(str) {
    return new RegExp(rz(str));
  }));

  define('_regexpFlags', lz(function(str) {
    return function(flags) {
      return new RegExp(rz(str), rz(flags));
    };
  }));

  define('_jsonParse', lz(function(str) {
    return function(failCont) {
      return function(successCont) {
        var err, p;

        try {
          p = JSON.parse(rz(str));
          return rz(successCont)(lz(p));
        } catch (_error) {
          err = _error;
          return rz(failCont)(lz(err));
        }
      };
    };
  }));

  define('jsonStringify', lz(function(obj) {
    return function(failCont) {
      return function(successCont) {
        var err, s;

        try {
          s = JSON.stringify(rz(obj));
          return rz(successCont)(lz(s));
        } catch (_error) {
          err = _error;
          return rz(failCont)(lz(err));
        }
      };
    };
  }));

  define('getProperties', lz(function(func) {
    var _ref2;

    if ((_ref2 = rz(func)) != null ? _ref2.properties : void 0) {
      return rz(L_some)(lz(rz(func).properties));
    } else {
      return rz(L_none);
    }
  }));

  define('log', lz(function(str) {
    return function(res) {
      console.log(String(rz(str)));
      return rz(res);
    };
  }));

  makeMonad = function(guts) {
    var m;

    m = function() {};
    m.__proto__ = Monad.prototype;
    m.cmd = guts;
    m.type = 'monad';
    return m;
  };

  makeSyncMonad = function(guts) {
    var m;

    m = makeMonad(guts);
    m.sync = true;
    return m;
  };

  nextMonad = function(cont) {
    return cont;
  };

  replaceErr = function(err, msg) {
    err.message = msg;
    return err;
  };

  defaultEnv.write = function(str) {
    return process.stdout.write(str);
  };

  defaultEnv.err = function(err) {
    var _ref2;

    return this.write("ENV Error: " + ((_ref2 = err.stack) != null ? _ref2 : err));
  };

  defaultEnv.prompt = function() {
    throw new Error("Environment does not support prompting!");
  };

  monadModeSync = false;

  getMonadSyncMode = function() {
    return monadModeSync;
  };

  withSyncModeDo = function(newMode, block) {
    var err, oldMode;

    oldMode = monadModeSync;
    monadModeSync = newMode;
    try {
      return block();
    } catch (_error) {
      err = _error;
      return console.log("ERR: " + err.stack);
    } finally {

    }
  };

  runMonad = function(monad, env, cont) {
    env = env != null ? env : root.defaultEnv;
    return withSyncModeDo(true, function() {
      return newRunMonad(monad, env, cont, []);
    });
  };

  isMonad = function(m) {
    return typeof m === 'function' && (m.cmd != null);
  };

  continueMonads = function(contStack, env) {
    return function(result) {
      return withSyncModeDo(false, function() {
        return newRunMonad(result, env, null, contStack);
      });
    };
  };

  asyncMonad = {
    toString: function() {
      return "<asyncMonadResult>";
    }
  };

  warnAsync = false;

  setWarnAsync = function(state) {
    return warnAsync = state;
  };

  newRunMonad = function(monad, env, cont, contStack) {
    var err, result;

    if (cont) {
      contStack.push(cont);
    }
    try {
      while (true) {
        if (isMonad(monad)) {
          if (monad.binding) {
            contStack.push((function(bnd) {
              return function(x) {
                return bnd(lz(x));
              };
            })(rz(monad.binding)));
            monad = rz(monad.monad);
            continue;
          } else if (!monad.sync) {
            monadModeSync = false;
            if (warnAsync) {
              console.log("async monad");
            }
            monad.cmd(env, continueMonads(contStack, env));
            return asyncMonad;
          }
          result = monad.cmd(env, identity);
        } else {
          monadModeSync = true;
          result = monad;
        }
        if (!contStack.length) {
          return result;
        }
        monad = contStack.pop()(result);
      }
    } catch (_error) {
      err = _error;
      err = replaceErr(err, "\nERROR RUNNING MONAD, MONAD: " + monad + ", ENV: " + env + "...\n" + err.message);
      console.log(err.stack);
      if (env.errorHandlers.length) {
        return env.errorHandlers.pop()(err);
      }
    }
  };

  Monad = (function() {
    function Monad() {}

    Monad.prototype.toString = function() {
      return "Monad: " + (this.cmd.toString());
    };

    return Monad;

  })();

  global.L_runMonads = function(monadArray) {
    monadArray.reverse();
    return newRunMonad(0, defaultEnv, null, monadArray);
  };

  define('define', lz(function(name) {
    return function(arity) {
      return function(src) {
        return function(def) {
          return makeSyncMonad(function(env, cont) {
            define(rz(name), def, rz(arity), rz(src));
            return cont((typeof L_true !== "undefined" && L_true !== null ? rz(L_true) : _true));
          });
        };
      };
    };
  }));

  define('bind', lz(function(m) {
    return function(binding) {
      var bindMonad;

      bindMonad = makeMonad(function(env, cont) {});
      bindMonad.monad = m;
      bindMonad.binding = binding;
      return bindMonad;
    };
  }));

  values = {};

  define('protect', lz(function(value) {
    return makeMonad(function(env, cont) {
      var hnd;

      hnd = function(err) {
        console.log("PROTECTED ERROR: " + err.stack);
        return cont(left(err.stack));
      };
      env.errorHandlers.push(hnd);
      return runMonad(rz(value), env, (function(result) {
        if (env.errorHandlers.length) {
          if (env.errorHandlers[env.errorHandlers.length - 1] === hnd) {
            env.errorHandlers.pop();
          } else if (_.contains(env.errorHandlers, hnd)) {
            while (env.errorHandlers[env.errorHandlers.length - 1] !== hnd) {
              env.errorHandlers.pop();
            }
          }
        }
        return cont(right(result));
      }), []);
    });
  }));

  actors = {};

  define('actor', lz(function(name) {
    return function(func) {
      actors[name] = func;
      func.env = {
        values: {}
      };
      return func.env.__proto__ = defaultEnv;
    };
  }));

  define('send', lz(function(name) {
    return function(msg) {
      return setTimeout((function() {
        return runMonad(rz(actors[name])(msg), rz(actors[name]).env);
      }), 1);
    };
  }));

  define('hasValue', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      return cont(booleanFor(values[rz(name)] != null));
    });
  }));

  define('getValueOr', lz(function(name) {
    return function(defaultValue) {
      return makeSyncMonad(function(env, cont) {
        var _ref2;

        return cont((_ref2 = values[rz(name)]) != null ? _ref2 : rz(defaultValue));
      });
    };
  }));

  define('getValue', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      if (!(rz(name) in values)) {
        throw new Error("No value named '" + (rz(name)) + "'");
      }
      return cont(values[rz(name)]);
    });
  }));

  define('setValue', lz(function(name) {
    return function(value) {
      return makeSyncMonad(function(env, cont) {
        values[rz(name)] = rz(value);
        return cont(_true);
      });
    };
  }));

  define('deleteValue', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      delete values[rz(name)];
      return cont(_true);
    });
  }));

  setValue = function(key, value) {
    return values[key] = value;
  };

  getValue = function(key) {
    return values[key];
  };

  define('envHas', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      return cont(booleanFor(env.values[rz(name)] != null));
    });
  }));

  define('envGetOr', lz(function(name) {
    return function(defaultValue) {
      return makeSyncMonad(function(env, cont) {
        var _ref2;

        return cont((_ref2 = env.values[rz(name)]) != null ? _ref2 : rz(defaultValue));
      });
    };
  }));

  define('envGet', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      if (!(rz(name) in env.values)) {
        throw new Error("No value named '" + (rz(name)) + "'");
      }
      return cont(env.values[rz(name)]);
    });
  }));

  define('envSet', lz(function(name) {
    return function(value) {
      return makeSyncMonad(function(env, cont) {
        env.values[rz(name)] = rz(value);
        return cont(_true);
      });
    };
  }));

  define('envDelete', lz(function(name) {
    return makeSyncMonad(function(env, cont) {
      delete env.values[rz(name)];
      return cont(_true);
    });
  }));

  setValue('macros', Nil);

  define('defMacro', lz(function(name) {
    return function(def) {
      return makeSyncMonad(function(env, cont) {
        values.macros = cons(cons(rz(name), rz(def)), values.macros);
        return cont(_true);
      });
    };
  }));

  define('funcs', lz(makeSyncMonad(function(env, cont) {
    console.log("Leisure functions:\n" + (_(global.leisureFuncNames.toArray()).sort().join('\n')));
    return cont(_true);
  })));

  define('funcSrc', lz(function(func) {
    if (typeof rz(func) === 'function' && rz(func).src) {
      return some(rz(func).src);
    } else {
      return none;
    }
  }));

  define('ast2Json', lz(function(ast) {
    return JSON.stringify(ast2Json(rz(ast)));
  }));

  define('override', lz(function(name) {
    return function(newFunc) {
      return makeSyncMonad(function(env, cont) {
        var n, oldDef;

        n = "L_" + (nameSub(rz(name)));
        oldDef = global[n];
        if (!oldDef) {
          throw new Error("No definition for " + (rz(name)));
        }
        global[n] = function() {
          return rz(newFunc)(oldDef);
        };
        return cont(_true);
      });
    };
  }));

  define('print', lz(function(msg) {
    return makeSyncMonad(function(env, cont) {
      var m;

      m = rz(msg);
      env.write("" + (env.presentValue(m)) + "\n");
      return cont(_true);
    });
  }));

  define('write', lz(function(msg) {
    return makeSyncMonad(function(env, cont) {
      env.write(env.presentValue(rz(msg)));
      return cont(_true);
    });
  }));

  define('readFile', lz(function(name) {
    return makeMonad(function(env, cont) {
      return readFile(rz(name), function(err, contents) {
        return cont((err ? left(err.stack) : right(contents)));
      });
    });
  }));

  define('readDir', lz(function(dir) {
    return makeMonad(function(env, cont) {
      return readDir(rz(dir), function(err, files) {
        return cont((err ? left(err.stack) : right(files)));
      });
    });
  }));

  define('writeFile', lz(function(name) {
    return function(data) {
      return makeMonad(function(env, cont) {
        return writeFile(rz(name), rz(data), function(err, contents) {
          return cont((err ? left(err.stack) : right(contents)));
        });
      });
    };
  }));

  define('statFile', lz(function(file) {
    return makeMonad(function(env, cont) {
      return statFile(rz(file), function(err, stats) {
        return cont((err ? left(err.stack) : right(stats)));
      });
    });
  }));

  define('prompt', lz(function(msg) {
    return makeMonad(function(env, cont) {
      return env.prompt(String(rz(msg)), function(input) {
        return cont(input);
      });
    });
  }));

  define('rand', lz(makeSyncMonad(function(env, cont) {
    return cont(Math.random());
  })));

  define('js', lz(function(str) {
    return makeSyncMonad(function(env, cont) {
      var err, result;

      try {
        result = eval(rz(str));
        return cont(right(result));
      } catch (_error) {
        err = _error;
        return cont(left(err));
      }
    });
  }));

  define('delay', lz(function(timeout) {
    return makeMonad(function(env, cont) {
      return setTimeout((function() {
        return cont(_true);
      }), rz(timeout));
    });
  }));

  define('altDef', lz(function(name) {
    return function(alt) {
      return function(arity) {
        return function(def) {
          return makeMonad(function(env, cont) {
            var alts, i, info, newDef, nm;

            info = functionInfo[rz(name)];
            if (!info) {
              info = functionInfo[rz(name)] = {
                src: '',
                arity: -1,
                alts: {},
                altList: []
              };
            }
            if (!info.alts[rz(alt)]) {
              info.altList.push(rz(alt));
            }
            info.alts[rz(alt)] = def;
            alts = (function() {
              var _i, _len, _ref2, _results;

              _ref2 = info.altList;
              _results = [];
              for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
                i = _ref2[_i];
                _results.push(info.alts[i]);
              }
              return _results;
            })();
            newDef = curry(rz(arity), function(args) {
              var arg, opt, res, _i, _j, _k, _len, _len1, _len2;

              for (_i = 0, _len = alts.length; _i < _len; _i++) {
                alt = alts[_i];
                opt = rz(alt);
                for (_j = 0, _len1 = args.length; _j < _len1; _j++) {
                  arg = args[_j];
                  opt = opt(arg);
                }
                if (getType(opt) === 'some') {
                  return opt(lz(function(x) {
                    return rz(x);
                  }))(lz(_false));
                }
              }
              if (info.mainDef) {
                res = rz(info.mainDef);
                for (_k = 0, _len2 = args.length; _k < _len2; _k++) {
                  arg = args[_k];
                  res = res(arg);
                }
                return res;
              }
              throw new Error("No default definition for " + (rz(name)));
            });
            nm = "L_" + (nameSub(rz(name)));
            global[nm] = global.leisureFuncNames[nm] = newDef;
            return cont(def);
          });
        };
      };
    };
  }));

  curry = function(arity, func) {
    return function() {
      return subcurry(arity, func, []);
    };
  };

  subcurry = function(arity, func, args) {
    return function(arg) {
      args = args != null ? args : [];
      args.push(arg);
      if (arity === 1) {
        return func(args);
      } else {
        return subcurry(arity - 1, func, args);
      }
    };
  };

  makeHamt = function(hamt) {
    var t;

    t = setDataType((function() {}), 'hamt');
    t.hamt = hamt;
    t.type = 'hamt';
    return t;
  };

  hamt = makeHamt(amt.Trie());

  define('hamt', lz(hamt));

  define('hamtWith', lz(function(key) {
    return function(value) {
      return function(hamt) {
        return makeHamt(amt.assoc(rz(hamt).hamt, rz(key), rz(value)));
      };
    };
  }));

  define('hamtFetch', lz(function(key) {
    return function(hamt) {
      return amt.get(rz(hamt).hamt, rz(key));
    };
  }));

  define('hamtGet', lz(function(key) {
    return function(hamt) {
      var v;

      v = amt.get(rz(hamt).hamt, rz(key));
      if (v !== void 0) {
        return some(v);
      } else {
        return none;
      }
    };
  }));

  define('hamtWithout', lz(function(key) {
    return function(hamt) {
      return makeHamt(amt.dissoc(rz(hamt).hamt, rz(key)));
    };
  }));

  memo = function(func) {
    return function() {
      return func.memo || (func.memo = func());
    };
  };

  define('hamtPairs', lz(function(hamt) {
    return nextNode(simpyCons(rz(hamt).hamt, null));
  }));

  nextNode = function(stack) {
    var child, k, key, node, value, _ref2, _ref3;

    if (stack === null) {
      return rz(L_nil);
    }
    node = stack.head;
    stack = stack.tail;
    switch (node.type) {
      case 'trie':
        _ref2 = node.children;
        for (k in _ref2) {
          child = _ref2[k];
          stack = simpyCons(child, stack);
        }
        return nextNode(stack);
      case 'value':
        return rz(L_acons)(lz(node.key))(lz(node.value))(memo(function() {
          return nextNode(stack);
        }));
      case 'hashmap':
        _ref3 = node.values;
        for (key in _ref3) {
          value = _ref3[key];
          stack = simpyCons(value, stack);
        }
        return nextNode(stack);
      default:
        return console.log("UNKNOWN HAMT NODE TYPE: " + node.type);
    }
  };

  define('trampolineCall', lz(function(func) {
    var ret;

    ret = rz(func);
    while (true) {
      if (typeof ret === 'function' && ret.trampoline) {
        ret = ret();
      } else {
        return ret;
      }
    }
  }));

  define('trampoline', lz(function(func) {
    var arity, f;

    f = rz(func);
    arity = functionInfo[f.leisureName].arity;
    return trampCurry(f, arity);
  }));

  trampCurry = function(func, arity) {
    return function(arg) {
      var a, result;

      a = rz(arg);
      if (arity > 1) {
        return trampCurry(func(function() {
          return a;
        }), arity - 1);
      } else {
        result = function() {
          return func(function() {
            return a;
          });
        };
        result.trampoline = true;
        return result;
      }
    };
  };

  ensureLeisureClass('token');

  Leisure_token.prototype.toString = function() {
    return "Token(" + (JSON.stringify(tokenString(this))) + ", " + (tokenPos(this)) + ")";
  };

  tokenString = function(t) {
    return t(lz(function(txt) {
      return function(pos) {
        return rz(txt);
      };
    }));
  };

  tokenPos = function(t) {
    return t(lz(function(txt) {
      return function(pos) {
        return rz(pos);
      };
    }));
  };

  ensureLeisureClass('parens');

  Leisure_parens.prototype.toString = function() {
    return "Parens(" + (parensStart(this)) + ", " + (parensEnd(this)) + ", " + (parensContent(this)) + ")";
  };

  parensStart = function(p) {
    return p(lz(function(s) {
      return function(e) {
        return function(l) {
          return rz(s);
        };
      };
    }));
  };

  parensEnd = function(p) {
    return p(lz(function(s) {
      return function(e) {
        return function(l) {
          return rz(e);
        };
      };
    }));
  };

  parensContent = function(p) {
    return p(lz(function(s) {
      return function(e) {
        return function(l) {
          return rz(l);
        };
      };
    }));
  };

  ensureLeisureClass('true');

  Leisure_true.prototype.toString = function() {
    return "true";
  };

  ensureLeisureClass('false');

  Leisure_false.prototype.toString = function() {
    return "false";
  };

  ensureLeisureClass('left');

  Leisure_left.prototype.toString = function() {
    return "Left(" + (this(lz(_identity))(lz(_identity))) + ")";
  };

  ensureLeisureClass('right');

  Leisure_right.prototype.toString = function() {
    return "Right(" + (this(lz(_identity))(lz(_identity))) + ")";
  };

  root._true = _true;

  root._false = _false;

  root.stateValues = values;

  root.runMonad = runMonad;

  root.newRunMonad = newRunMonad;

  root.isMonad = isMonad;

  root.identity = identity;

  root.setValue = setValue;

  root.getValue = getValue;

  root.makeMonad = makeMonad;

  root.makeSyncMonad = makeSyncMonad;

  root.replaceErr = replaceErr;

  root.left = left;

  root.right = right;

  root.getMonadSyncMode = getMonadSyncMode;

  root.asyncMonad = asyncMonad;

  root.setWarnAsync = setWarnAsync;

  root.call = call;

  root.callMonad = callMonad;

  root.basicCall = basicCall;

  root.booleanFor = booleanFor;

  root.newConsFrom = consFrom;

  if (typeof window !== "undefined" && window !== null) {
    window.runMonad = runMonad;
    window.setType = setType;
    window.setDataType = setDataType;
    window.defaultEnv = defaultEnv;
    window.identity = identity;
  }

}).call(this);

/*
*/

})(require("__browserify_process"),self)
},{"./ast":1,"./base":2,"./lodash.min":6,"__browserify_process":12,"persistent-hash-trie":15}],11:[function(require,module,exports){
L_runMonads([
  function(){return resolve(L_define)(lazy("if"))(lazy(0))(lazy("if = id"))(L_id)},
  function(){return resolve(L_define)(lazy("afetch"))(lazy(2))(lazy("afetch k alist  = alist (\\h t D . h \\key value . eq key k value (afetch k t)) nil"))((function(){var $m; return function(){return $m || ($m = function(L_k){return function(L_alist){return resolve(L_alist)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_h)((function(){var $m; return function(){return $m || ($m = function(L_key){return function(L_value){return resolve(L_eq)(L_key)(L_k)(L_value)((function(){var $m; return function(){return $m || ($m = resolve(L_afetch)(L_k)(L_t))}})())}})}})())}}})}})())(L_nil)}})}})())},
  function(){return resolve(L_define)(lazy("aconsf"))(lazy(3))(lazy("aconsf key value list = acons key value (aremove key list)"))((function(){var $m; return function(){return $m || ($m = function(L_key){return function(L_value){return function(L_list){return resolve(L_acons)(L_key)(L_value)((function(){var $m; return function(){return $m || ($m = resolve(L_aremove)(L_key)(L_list))}})())}}})}})())},
  function(){return resolve(L_define)(lazy("aremove"))(lazy(2))(lazy("aremove key list = isNil list\n  nil\n  eq (head (head list)) key\n    aremove key (tail list)\n    aconsPair (head list) (aremove key (tail list))"))((function(){var $m; return function(){return $m || ($m = function(L_key){return function(L_list){return resolve(L_isNil)(L_list)(L_nil)((function(){var $m; return function(){return $m || ($m = resolve(L_eq)((function(){var $m; return function(){return $m || ($m = resolve(L_head)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})()))}})())(L_key)((function(){var $m; return function(){return $m || ($m = resolve(L_aremove)(L_key)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_list))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_aconsPair)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_aremove)(L_key)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_list))}})()))}})()))}})()))}})())}})}})())},
  function(){return resolve(L_defMacro)(lazy("when"))((function(){var $m; return function(){return $m || ($m = function(L_line){return resolve(L_line)((function(){var $m; return function(){return $m || ($m = function(L_cond){return function(L_rest){return resolve(L_cons)(L_cond)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("do"))(L_rest))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("nil"))(L_nil))}})()))}})())}})}})())})}})())},
  function(){return resolve(L_addTokenGroup)(lazy("js["))(lazy("]"))},
  function(){return resolve(L_defMacro)(lazy("js["))((function(){var $m; return function(){return $m || ($m = function(L_list){return resolve(L_cons)(lazy("js"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("strCat"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("flatten"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_listify)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})()))}})())(L_nil))}})())(L_nil))}})()))}})())(L_nil))}})()))}})())(L_nil))}})())})}})())},
  function(){return resolve(L_define)(lazy("html"))(lazy(1))(lazy("html x = \\f . f x"))((function(){var $m; return function(){return $m || ($m = setDataType(function(L_x){return setType(function(L_f){return resolve(L_f)(L_x)}, 'html')}, 'html'))}})())},
  function(){return resolve(L_define)(lazy("iszero"))(lazy(0))(lazy("iszero = eq 0"))((function(){var $m; return function(){return $m || ($m = resolve(L_eq)(lazy(0)))}})())},
  function(){return resolve(L_define)(lazy("positive"))(lazy(0))(lazy("positive = 0 <"))((function(){var $m; return function(){return $m || ($m = resolve(L_$y)(lazy(0)))}})())},
  function(){return resolve(L_addToken)(lazy("--"))},
  function(){return resolve(L_addToken)(lazy("++"))},
  function(){return resolve(L_define)(lazy("--"))(lazy(0))(lazy("-- = (flip (-)) 1"))((function(){var $m; return function(){return $m || ($m = resolve(L_flip)(L_$_)(lazy(1)))}})())},
  function(){return resolve(L_define)(lazy("++"))(lazy(0))(lazy("++ = (1 +)"))((function(){var $m; return function(){return $m || ($m = resolve(L_$o)(lazy(1)))}})())},
  function(){return resolve(L_define)(lazy("intercalate"))(lazy(2))(lazy("intercalate x l = concat (intersperse x l)"))((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_l){return resolve(L_concat)((function(){var $m; return function(){return $m || ($m = resolve(L_intersperse)(L_x)(L_l))}})())}})}})())},
  function(){return resolve(L_define)(lazy("visit"))(lazy(2))(lazy("visit func l = \\\\\n  result = func func l\n  .\n  isCons result\n    result \\h t . cons (visit func h) (visit func t)\n    result"))((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_l){return (function(){

var L_result;

L_result = (function(){var $m; return function(){return $m || ($m = resolve(L_func)(L_func)(L_l))}})();
return resolve(L_isCons)(L_result)((function(){var $m; return function(){return $m || ($m = resolve(L_result)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_visit)(L_func)(L_h))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_visit)(L_func)(L_t))}})())}})}})()))}})())(L_result)})()}})}})())},
  function(){return resolve(L_define)(lazy("simplify"))(lazy(1))(lazy("simplify exprString = do\n  list <- scanLineM exprString\n  visit (\\func x . isToken x (tokenString x) ((isParens x) (visit func (parensContent x)) x)) list"))((function(){var $m; return function(){return $m || ($m = function(L_exprString){return resolve(L_bind)((function(){var $m; return function(){return $m || ($m = resolve(L_scanLineM)(L_exprString))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return resolve(L_visit)((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_x){return resolve(L_isToken)(L_x)((function(){var $m; return function(){return $m || ($m = resolve(L_tokenString)(L_x))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_isParens)(L_x)((function(){var $m; return function(){return $m || ($m = resolve(L_visit)(L_func)((function(){var $m; return function(){return $m || ($m = resolve(L_parensContent)(L_x))}})()))}})())(L_x))}})())}})}})())(L_list)})}})())})}})())},
  function(){return resolve(L_define)(lazy("doall"))(lazy(0))(lazy("doall = foldr1 (\\el res . bind el \\_ . res)"))((function(){var $m; return function(){return $m || ($m = resolve(L_foldr1)((function(){var $m; return function(){return $m || ($m = function(L_el){return function(L_res){return resolve(L_bind)(L_el)((function(){var $m; return function(){return $m || ($m = function(L__){return resolve(L_res)})}})())}})}})()))}})())},
  function(){return resolve(L_define)(lazy("requireJS"))(lazy(1))(lazy("requireJS file = bind (getValue 'requiredFiles')\n  \\files . contains files file\n    false\n    bind (loadJS file)\n      \\result . result\n        \\x . left x\n        \\_ . bind (setValue 'requiredFiles' (cons file files))\n          \\_ . right true"))((function(){var $m; return function(){return $m || ($m = function(L_file){return resolve(L_bind)((function(){var $m; return function(){return $m || ($m = resolve(L_getValue)(lazy("requiredFiles")))}})())((function(){var $m; return function(){return $m || ($m = function(L_files){return resolve(L_contains)(L_files)(L_file)(L_false)((function(){var $m; return function(){return $m || ($m = resolve(L_bind)((function(){var $m; return function(){return $m || ($m = resolve(L_loadJS)(L_file))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return resolve(L_result)((function(){var $m; return function(){return $m || ($m = function(L_x){return resolve(L_left)(L_x)})}})())((function(){var $m; return function(){return $m || ($m = function(L__){return resolve(L_bind)((function(){var $m; return function(){return $m || ($m = resolve(L_setValue)(lazy("requiredFiles"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_file)(L_files))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L___0){return resolve(L_right)(L_true)})}})())})}})())})}})()))}})())})}})())})}})())},
  function(){return resolve(L_define)(lazy("loadJS"))(lazy(1))(lazy("loadJS file = bind (readFile file)\n  \\result . result\n    \\err . err\n    \\contents . js contents"))((function(){var $m; return function(){return $m || ($m = function(L_file){return resolve(L_bind)((function(){var $m; return function(){return $m || ($m = resolve(L_readFile)(L_file))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return resolve(L_result)((function(){var $m; return function(){return $m || ($m = function(L_err){return resolve(L_err)})}})())((function(){var $m; return function(){return $m || ($m = function(L_contents){return resolve(L_js)(L_contents)})}})())})}})())})}})())},
  function(){return resolve(L_define)(lazy("findOption"))(lazy(2))(lazy("findOption func list = do\n  result = func (head list)\n  isNil list\n    none\n    isNone result\n      findOption func (tail list)\n      result"))((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_list){return (function(){

var L_result;

L_result = (function(){var $m; return function(){return $m || ($m = resolve(L_func)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})()))}})();
return resolve(L_isNil)(L_list)(L_none)((function(){var $m; return function(){return $m || ($m = resolve(L_isNone)(L_result)((function(){var $m; return function(){return $m || ($m = resolve(L_findOption)(L_func)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_list))}})()))}})())(L_result))}})())})()}})}})())},
  function(){return resolve(L_define)(lazy("dlempty"))(lazy(0))(lazy("dlempty = id"))(L_id)},
  function(){return resolve(L_define)(lazy("dl"))(lazy(1))(lazy("dl item = \\rest . item:rest"))((function(){var $m; return function(){return $m || ($m = setDataType(function(L_item){return setType(function(L_rest){return resolve(L_cons)(L_item)(L_rest)}, 'dl')}, 'dl'))}})())},
  function(){return resolve(L_define)(lazy("dlPush"))(lazy(2))(lazy("dlPush list item = dlAppend list (dl item)"))((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_item){return resolve(L_dlAppend)(L_list)((function(){var $m; return function(){return $m || ($m = resolve(L_dl)(L_item))}})())}})}})())},
  function(){return resolve(L_define)(lazy("dlAppend"))(lazy(2))(lazy("dlAppend a b = \\rest . a (b rest)"))((function(){var $m; return function(){return $m || ($m = setDataType(function(L_a){return function(L_b){return setType(function(L_rest){return resolve(L_a)((function(){var $m; return function(){return $m || ($m = resolve(L_b)(L_rest))}})())}, 'dlAppend')}}, 'dlAppend'))}})())},
  function(){return resolve(L_define)(lazy("remove"))(lazy(2))(lazy("remove x l = removeIf (eq x) l"))((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_l){return resolve(L_removeIf)((function(){var $m; return function(){return $m || ($m = resolve(L_eq)(L_x))}})())(L_l)}})}})())},
  function(){return resolve(L_define)(lazy("removeIf"))(lazy(2))(lazy("removeIf f l = filter (compose not f) l"))((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return resolve(L_filter)((function(){var $m; return function(){return $m || ($m = resolve(L_compose)(L_not)(L_f))}})())(L_l)}})}})())},
  function(){return resolve(L_define)(lazy("any"))(lazy(2))(lazy("any f l = find f l (\\el . true) false"))((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return resolve(L_find)(L_f)(L_l)((function(){var $m; return function(){return $m || ($m = function(L_el){return resolve(L_true)})}})())(L_false)}})}})())},
  function(){return resolve(L_define)(lazy("all"))(lazy(2))(lazy("all f l = not any (compose not f) l"))((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return resolve(L_not)(L_any)((function(){var $m; return function(){return $m || ($m = resolve(L_compose)(L_not)(L_f))}})())(L_l)}})}})())},
  function(){return resolve(L_define)(lazy("take"))(lazy(2))(lazy("take n list = positive n\n  list\n    \\h t D . cons h (take (-- n) t)\n    nil\n  nil"))((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_list){return resolve(L_positive)(L_n)((function(){var $m; return function(){return $m || ($m = resolve(L_list)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_cons)(L_h)((function(){var $m; return function(){return $m || ($m = resolve(L_take)((function(){var $m; return function(){return $m || ($m = resolve(L_$_$_)(L_n))}})())(L_t))}})())}}})}})())(L_nil))}})())(L_nil)}})}})())},
  function(){return resolve(L_define)(lazy("takeWhile"))(lazy(2))(lazy("takeWhile predicate list = list\n  \\h t D . predicate (head list)\n    cons h (takeWhile predicate t)\n    nil\n  nil"))((function(){var $m; return function(){return $m || ($m = function(L_predicate){return function(L_list){return resolve(L_list)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_predicate)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_h)((function(){var $m; return function(){return $m || ($m = resolve(L_takeWhile)(L_predicate)(L_t))}})()))}})())(L_nil)}}})}})())(L_nil)}})}})())},
  function(){return resolve(L_define)(lazy("drop"))(lazy(2))(lazy("drop x list = positive x\n  list\n    \\h t D . drop (-- x) t\n    nil\n  list"))((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_list){return resolve(L_positive)(L_x)((function(){var $m; return function(){return $m || ($m = resolve(L_list)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_drop)((function(){var $m; return function(){return $m || ($m = resolve(L_$_$_)(L_x))}})())(L_t)}}})}})())(L_nil))}})())(L_list)}})}})())},
  function(){return resolve(L_define)(lazy("dropWhile"))(lazy(2))(lazy("dropWhile predicate list = list\n  \\h t D . predicate h\n    dropWhile predicate t\n    list\n  nil"))((function(){var $m; return function(){return $m || ($m = function(L_predicate){return function(L_list){return resolve(L_list)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_predicate)(L_h)((function(){var $m; return function(){return $m || ($m = resolve(L_dropWhile)(L_predicate)(L_t))}})())(L_list)}}})}})())(L_nil)}})}})())},
  function(){return resolve(L_define)(lazy("dropLast"))(lazy(2))(lazy("dropLast n list = reverse (drop n (reverse list))"))((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_list){return resolve(L_reverse)((function(){var $m; return function(){return $m || ($m = resolve(L_drop)(L_n)((function(){var $m; return function(){return $m || ($m = resolve(L_reverse)(L_list))}})()))}})())}})}})())},
  function(){return resolve(L_define)(lazy("box"))(lazy(2))(lazy("box n list = list == nil\n  nil\n  [(take n list) | box n (drop n list)]"))((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_list){return resolve(L_$p$p)(L_list)(L_nil)(L_nil)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_take)(L_n)(L_list))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_box)(L_n)((function(){var $m; return function(){return $m || ($m = resolve(L_drop)(L_n)(L_list))}})()))}})()))}})())}})}})())},
  function(){return resolve(L_define)(lazy("at"))(lazy(2))(lazy("at l x = (x == 0) (head l) (at (tail l) (-- (x) ) )"))((function(){var $m; return function(){return $m || ($m = function(L_l){return function(L_x){return resolve(L_$p$p)(L_x)(lazy(0))((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_l))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_at)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_l))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_$_$_)(L_x))}})()))}})())}})}})())},
  function(){return resolve(L_define)(lazy("series"))(lazy(2))(lazy("series func n = n:(series func (func n))"))((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_n){return resolve(L_cons)(L_n)((function(){var $m; return function(){return $m || ($m = resolve(L_series)(L_func)((function(){var $m; return function(){return $m || ($m = resolve(L_func)(L_n))}})()))}})())}})}})())},
  function(){return resolve(L_define)(lazy("from"))(lazy(1))(lazy("from n = series ++ n"))((function(){var $m; return function(){return $m || ($m = function(L_n){return resolve(L_series)(L_$o$o)(L_n)})}})())},
  function(){return resolve(L_define)(lazy("fromBy"))(lazy(2))(lazy("fromBy n inc = series ((+) inc) n"))((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_inc){return resolve(L_series)((function(){var $m; return function(){return $m || ($m = resolve(L_$o)(L_inc))}})())(L_n)}})}})())},
  function(){return resolve(L_define)(lazy("fromTo"))(lazy(2))(lazy("fromTo n m = takeWhile ((>) m) (from n)"))((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_m){return resolve(L_takeWhile)((function(){var $m; return function(){return $m || ($m = resolve(L_$z)(L_m))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_from)(L_n))}})())}})}})())},
  function(){return resolve(L_define)(lazy("fromToBy"))(lazy(3))(lazy("fromToBy n m inc = takeWhile ((>) m) (fromBy n inc)"))((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_m){return function(L_inc){return resolve(L_takeWhile)((function(){var $m; return function(){return $m || ($m = resolve(L_$z)(L_m))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_fromBy)(L_n)(L_inc))}})())}}})}})())},
  function(){return resolve(L_define)(lazy("count"))(lazy(2))(lazy("count x l = countIf (eq x) l"))((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_l){return resolve(L_countIf)((function(){var $m; return function(){return $m || ($m = resolve(L_eq)(L_x))}})())(L_l)}})}})())},
  function(){return resolve(L_define)(lazy("countIf"))(lazy(2))(lazy("countIf f l = (eq l nil) 0\n  + (f (head l) 1 0) (countIf f (tail l))"))((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return resolve(L_eq)(L_l)(L_nil)(lazy(0))((function(){var $m; return function(){return $m || ($m = resolve(L_$o)((function(){var $m; return function(){return $m || ($m = resolve(L_f)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_l))}})())(lazy(1))(lazy(0)))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_countIf)(L_f)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_l))}})()))}})()))}})())}})}})())},
  function(){return resolve(L_define)(lazy("countIfNot"))(lazy(2))(lazy("countIfNot f l = countIf (\\x. not (f x)) l"))((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return resolve(L_countIf)((function(){var $m; return function(){return $m || ($m = function(L_x){return resolve(L_not)((function(){var $m; return function(){return $m || ($m = resolve(L_f)(L_x))}})())})}})())(L_l)}})}})())},
  function(){return resolve(L_define)(lazy("odds"))(lazy(1))(lazy("odds l = l\n  \\h t D . [h | evens t]\n  nil"))((function(){var $m; return function(){return $m || ($m = function(L_l){return resolve(L_l)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_cons)(L_h)((function(){var $m; return function(){return $m || ($m = resolve(L_evens)(L_t))}})())}}})}})())(L_nil)})}})())},
  function(){return resolve(L_define)(lazy("evens"))(lazy(1))(lazy("evens l = l\n  \\h t D . odds t\n  nil"))((function(){var $m; return function(){return $m || ($m = function(L_l){return resolve(L_l)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_odds)(L_t)}}})}})())(L_nil)})}})())},
  function(){return resolve(L_define)(lazy("cleave"))(lazy(1))(lazy("cleave l = [(evens l) | (odds l)]"))((function(){var $m; return function(){return $m || ($m = function(L_l){return resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_evens)(L_l))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_odds)(L_l))}})())})}})())},
  function(){return resolve(L_define)(lazy("merge"))(lazy(3))(lazy("merge cmp a b = a\n  \\ah at D . b\n    \\bh bt D . cmp ah bh\n      [ah | (merge cmp at b)]\n      [bh | (merge cmp a bt)]\n    a\n  b"))((function(){var $m; return function(){return $m || ($m = function(L_cmp){return function(L_a){return function(L_b){return resolve(L_a)((function(){var $m; return function(){return $m || ($m = function(L_ah){return function(L_at){return function(L_D){return resolve(L_b)((function(){var $m; return function(){return $m || ($m = function(L_bh){return function(L_bt){return function(L_D_0){return resolve(L_cmp)(L_ah)(L_bh)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_ah)((function(){var $m; return function(){return $m || ($m = resolve(L_merge)(L_cmp)(L_at)(L_b))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_bh)((function(){var $m; return function(){return $m || ($m = resolve(L_merge)(L_cmp)(L_a)(L_bt))}})()))}})())}}})}})())(L_a)}}})}})())(L_b)}}})}})())},
  function(){return resolve(L_define)(lazy("mergeSort"))(lazy(2))(lazy("mergeSort cmp l = l\n  \\h t D . eq (tail l) nil\n    l\n    do\n      cl = cleave l\n      e = head cl\n      o = tail cl\n      merge cmp (mergeSort cmp e) (mergeSort cmp o)\n  nil"))((function(){var $m; return function(){return $m || ($m = function(L_cmp){return function(L_l){return resolve(L_l)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_eq)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_l))}})())(L_nil)(L_l)(function(){
var L_o, L_e, L_cl;

L_o = (function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_cl))}})();

L_e = (function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_cl))}})();

L_cl = (function(){var $m; return function(){return $m || ($m = resolve(L_cleave)(L_l))}})();
return resolve(L_merge)(L_cmp)((function(){var $m; return function(){return $m || ($m = resolve(L_mergeSort)(L_cmp)(L_e))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_mergeSort)(L_cmp)(L_o))}})())})}}})}})())(L_nil)}})}})())},
  function(){return resolve(L_define)(lazy("sort"))(lazy(1))(lazy("sort l = sortBy lte l"))((function(){var $m; return function(){return $m || ($m = function(L_l){return resolve(L_sortBy)(L_lte)(L_l)})}})())},
  function(){return resolve(L_define)(lazy("sortBy"))(lazy(2))(lazy("sortBy cmp l = mergeSort cmp l"))((function(){var $m; return function(){return $m || ($m = function(L_cmp){return function(L_l){return resolve(L_mergeSort)(L_cmp)(L_l)}})}})())},
  function(){return resolve(L_addToken)(lazy("->"))},
  function(){return resolve(L_define)(lazy("mkStr"))(lazy(1))(lazy("mkStr tok = concat['\"' (tokenString tok) '\"']"))((function(){var $m; return function(){return $m || ($m = function(L_tok){return resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("\""))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_tokenString)(L_tok))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("\""))(L_nil))}})()))}})()))}})())})}})())},
  function(){return resolve(L_defMacro)(lazy("defCase"))((function(){var $m; return function(){return $m || ($m = function(L_list){return (function(){

var L_t3, L_h3, L_t2, L_h2, L_t1, L_h1;

L_t3 = (function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_t2))}})();

L_h3 = (function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_t2))}})();

L_t2 = (function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_t1))}})();

L_h2 = (function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_t1))}})();

L_t1 = (function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_list))}})();

L_h1 = (function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})();
return resolve(L_and)((function(){var $m; return function(){return $m || ($m = resolve(L_isCons)(L_list))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_and)((function(){var $m; return function(){return $m || ($m = resolve(L_isCons)(L_t1))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_and)((function(){var $m; return function(){return $m || ($m = resolve(L_isCons)(L_t2))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_and)((function(){var $m; return function(){return $m || ($m = resolve(L_isTokenString)(L_h2)(lazy(".")))}})())(L_true))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_makeCaseArgs)(L_list)((function(){var $m; return function(){return $m || ($m = resolve(L_mkStr)(L_h1))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_mkStr)(L_h3))}})())(L_t3)(L_id))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_parseErr)(lazy("Error in case definition -- expected func.name args | condition -> action, but got "))(L_list))}})())})()})}})())},
  function(){return resolve(L_define)(lazy("makeCaseArgs"))(lazy(5))(lazy("makeCaseArgs orig funcName altName rest args = rest\n  \\h t D . isTokenString h '|'\n    makeCaseCondition orig funcName altName (args nil) t id\n    makeCaseArgs orig funcName altName t (dlPush args h)\n  parseErr \"Error in case definition -- expected func.name args | condition -> action, but got \" orig"))((function(){var $m; return function(){return $m || ($m = function(L_orig){return function(L_funcName){return function(L_altName){return function(L_rest){return function(L_args){return resolve(L_rest)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("|"))((function(){var $m; return function(){return $m || ($m = resolve(L_makeCaseCondition)(L_orig)(L_funcName)(L_altName)((function(){var $m; return function(){return $m || ($m = resolve(L_args)(L_nil))}})())(L_t)(L_id))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_makeCaseArgs)(L_orig)(L_funcName)(L_altName)(L_t)((function(){var $m; return function(){return $m || ($m = resolve(L_dlPush)(L_args)(L_h))}})()))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = resolve(L_parseErr)(lazy("Error in case definition -- expected func.name args | condition -> action, but got "))(L_orig))}})())}}}}})}})())},
  function(){return resolve(L_define)(lazy("makeCaseCondition"))(lazy(6))(lazy("makeCaseCondition orig funcName altName args rest cond = rest\n  \\h t D . isTokenString h '->'\n    foldr1 append [['altDef' funcName altName (length args) '\\\\'] args ['.' (cond nil) ['some' t] 'none']]\n    makeCaseCondition orig funcName altName args t (dlPush cond h)\n parseErr \"Error in case definition -- expected func.name args | condition -> action, but got \" orig"))((function(){var $m; return function(){return $m || ($m = function(L_orig){return function(L_funcName){return function(L_altName){return function(L_args){return function(L_rest){return function(L_cond){return resolve(L_rest)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return resolve(L_isTokenString)(L_h)(lazy("->"))((function(){var $m; return function(){return $m || ($m = resolve(L_foldr1)(L_append)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("altDef"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_funcName)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_altName)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_length)(L_args))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("\\"))(L_nil))}})()))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_args)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("."))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cond)(L_nil))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("some"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_t)(L_nil))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("none"))(L_nil))}})()))}})()))}})()))}})())(L_nil))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_makeCaseCondition)(L_orig)(L_funcName)(L_altName)(L_args)(L_t)((function(){var $m; return function(){return $m || ($m = resolve(L_dlPush)(L_cond)(L_h))}})()))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = resolve(L_parseErr)(lazy("Error in case definition -- expected func.name args | condition -> action, but got "))(L_orig))}})())}}}}}})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("some"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("Some("))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_obj)(L_id)(L_false))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(")"))(L_nil))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("some2"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_some2)((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("Some2("))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_obj)((function(){var $m; return function(){return $m || ($m = function(L_a){return function(L_b){return resolve(L_cons)(L_a)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(", "))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_b)(L_nil))}})()))}})())}})}})())(L_false))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(")"))(L_nil))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("none"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_none)((function(){var $m; return function(){return $m || ($m = resolve(L_some)(lazy("None")))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("left"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_left)((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("Left("))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_obj)(L_id)(L_id))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(")"))(L_nil))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("right"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_right)((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("Right("))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_obj)(L_id)(L_id))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(")"))(L_nil))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("nil"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_nil)((function(){var $m; return function(){return $m || ($m = resolve(L_some)(lazy("nil")))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("assoc"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_isAlist)(L_obj)((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_flatten)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("{"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_intersperse)((function(){var $m; return function(){return $m || ($m = resolve(L_map)((function(){var $m; return function(){return $m || ($m = function(L_item){return resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_show)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_item))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(":"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_show)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_item))}})()))}})())(L_nil))}})()))}})())})}})())(L_obj))}})())(lazy(" ")))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("}"))(L_nil))}})()))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("hamt"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_hamt)((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_flatten)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("hamt{"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_intersperse)((function(){var $m; return function(){return $m || ($m = resolve(L_map)((function(){var $m; return function(){return $m || ($m = function(L_item){return resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_show)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_item))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(":"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_show)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_item))}})()))}})())(L_nil))}})()))}})())})}})())((function(){var $m; return function(){return $m || ($m = resolve(L_hamtPairs)(L_obj))}})()))}})())(lazy(" ")))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("}"))(L_nil))}})()))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return resolve(L_altDef)(lazy("show"))(lazy("cons"))(lazy(1))((function(){var $m; return function(){return $m || ($m = function(L_obj){return resolve(L_hasType)(L_obj)(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_flatten)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("["))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_show)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_obj))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_showConsElements)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_obj))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("]"))(L_nil))}})()))}})()))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return resolve(L_define)(lazy("showConsElements"))(lazy(1))(lazy("showConsElements list = isCons list\n  [' ' (show (head list)) (showConsElements (tail list))]\n  isNil list\n    ''\n    [' | ' (show list)]"))((function(){var $m; return function(){return $m || ($m = function(L_list){return resolve(L_isCons)(L_list)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(" "))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_show)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_showConsElements)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_list))}})()))}})())(L_nil))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_isNil)(L_list)(lazy(""))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy(" | "))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_show)(L_list))}})())(L_nil))}})()))}})()))}})())})}})())},
  function(){return resolve(L_altDef)(lazy("bind"))(lazy("option"))(lazy(2))((function(){var $m; return function(){return $m || ($m = function(L_opt){return function(L_cont){return resolve(L_or)((function(){var $m; return function(){return $m || ($m = resolve(L_hasType)(L_opt)(L_some))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_hasType)(L_opt)(L_none))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_opt)((function(){var $m; return function(){return $m || ($m = function(L_value){return resolve(L_cont)(L_value)})}})())(L_none))}})()))}})())(L_none)}})}})())},
  function(){return resolve(L_altDef)(lazy("bind"))(lazy("either"))(lazy(2))((function(){var $m; return function(){return $m || ($m = function(L_either){return function(L_cont){return resolve(L_or)((function(){var $m; return function(){return $m || ($m = resolve(L_hasType)(L_either)(L_left))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_hasType)(L_either)(L_right))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_some)((function(){var $m; return function(){return $m || ($m = resolve(L_either)((function(){var $m; return function(){return $m || ($m = function(L__){return resolve(L_either)})}})())((function(){var $m; return function(){return $m || ($m = function(L_value){return resolve(L_cont)(L_value)})}})()))}})()))}})())(L_none)}})}})())},
  function(){return resolve(L_defMacro)(lazy("defWrapper"))((function(){var $m; return function(){return $m || ($m = function(L_list){return resolve(L_grabLeftOfArrow)(L_list)(L_nil)((function(){var $m; return function(){return $m || ($m = function(L_left){return function(L_right){return resolve(L_cons)(lazy("override"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_strCat)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("'"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_strTokenString)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_left))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("'"))(L_nil))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_append)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("\\"))((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_left))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("."))(L_right))}})()))}})())(L_nil))}})()))}})())}})}})())})}})())},
  function(){return resolve(L_define)(lazy("grabLeftOfArrow"))(lazy(3))(lazy("grabLeftOfArrow list left cont = isTokenString (head list) '->'\n  cont (reverse left) (tail list)\n  grabLeftOfArrow (tail list) (head list) : left cont"))((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_left){return function(L_cont){return resolve(L_isTokenString)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})())(lazy("->"))((function(){var $m; return function(){return $m || ($m = resolve(L_cont)((function(){var $m; return function(){return $m || ($m = resolve(L_reverse)(L_left))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_list))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_grabLeftOfArrow)((function(){var $m; return function(){return $m || ($m = resolve(L_tail)(L_list))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_head)(L_list))}})())(L_left))}})())(L_cont))}})())}}})}})())},
  function(){return resolve(L_override)(lazy("head"))((function(){var $m; return function(){return $m || ($m = function(L_oldHead){return function(L_list){return resolve(L_assertType)(lazy("head argument"))(L_cons)(L_list)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return resolve(L_h)}})}})())}})}})())},
  function(){return resolve(L_override)(lazy("tail"))((function(){var $m; return function(){return $m || ($m = function(L_oldTail){return function(L_list){return resolve(L_assertType)(lazy("tail argument"))(L_cons)(L_list)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return resolve(L_t)}})}})())}})}})())},
  function(){return resolve(L_override)(lazy("hamtWith"))((function(){var $m; return function(){return $m || ($m = function(L_oldHamtWith){return function(L_key){return function(L_value){return function(L_hamt){return resolve(L_oldHamtWith)((function(){var $m; return function(){return $m || ($m = resolve(L_assertType)(lazy("hamtWith key"))(lazy("*string"))(L_key))}})())(L_value)(L_hamt)}}}})}})())},
  function(){return resolve(L_define)(lazy("html"))(lazy(1))(lazy("html x = \\f . f x"))((function(){var $m; return function(){return $m || ($m = setDataType(function(L_x){return setType(function(L_f){return resolve(L_f)(L_x)}, 'html')}, 'html'))}})())},
  function(){return resolve(L_defTokenPack)(lazy("util"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("->"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("--"))((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("++"))(L_nil))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("js["))(lazy("]")))}})())(L_nil))}})())((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(L_nil)(L_nil))}})()))}})()))}})())},
  function(){return resolve(L_addStdTokenPacks)((function(){var $m; return function(){return $m || ($m = resolve(L_cons)(lazy("util"))(L_nil))}})())}]);

},{}],12:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    if (canPost) {
        var queue = [];
        window.addEventListener('message', function (ev) {
            if (ev.source === window && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

process.binding = function (name) {
    throw new Error('process.binding is not supported');
}

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],13:[function(require,module,exports){
module.exports = function(str) {
  var hash = 5381,
      i    = str.length

  while(i)
    hash = (hash * 33) ^ str.charCodeAt(--i)

  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed
   * integers. Since we want the results to be always positive, if the high bit
   * is set, unset it and add it back in through (64-bit IEEE) addition. */
  return hash >= 0 ? hash : (hash & 0x7FFFFFFF) + 0x80000000
}

},{}],14:[function(require,module,exports){
//# Hashing functions

// Int, Int -> Int
// gets a <= 5 bit section of a hash, shifted from the left position
// in practice, a 32 bit splits into 7 chunks - 6 of 5 bits, one of 2
var mask = function(hash, from){ return (hash >>> from) & 0x01f }

// String, Int, Function -> Int
// gets a chunk of a hash, given a string and a hashing function
// the hashing function should return a 32 bit hash.
var hashMask = function(str, from, hash){
    return mask(hash(str), from)
}

module.exports = {
	hash: require('string-hash'),
	mask: hashMask
}

},{"string-hash":13}],15:[function(require,module,exports){
'use strict';

var util = require('./util')
var hash = require('./hash')
var lib = module.exports

//# persistent Hash Trie

// A Trie is a specialised version of a Tree, in which nodes can be found by navigating a 'path'.
// For instance, a dictionary Trie may start with a root node, have A-Z as the child nodes.
// Those child nodes may also be Tries (commonly referred to as sub-Tries).  Therefore, if
// you want to look up 'ANT', you can see if it's in the Trie by navigating to node A, then to
// node A's child node N, then to that node's child node T.  i.e. the path for ANT is A->N->T

// A Hash Trie forms its path by taking a hash of the string that is being looked up, and
// splitting that into parts:
// ANT = 01101101101110111010111011000011 = 01101->10110->11101->11010->11101->10000->11
// In this scheme, a 32-bit hash is taken, and split into path parts that are maximally
// 5 bits long.  Each Trie therefore has children from 00000-11111 (or 0-31 in decimal).

// Hash Tries allow us to store nodes at a shallow depth.  For instance, if there is only
// one member of the Trie whose key's first path part is 01101, then we can store the value
// directly as the root Trie's 01101 child node.  Why go deeper?  It just costs more to retrieve.

// It also allows us to keep the Trie fairly balanced; since a hash function should be
// have an even distribution of hashes, even if the inputs share common prefixes.
// If we used the first 2 letters of a word, for instance, we'd end up with lots of
// nodes in the 'un' and 'th' paths, and not many in the 'tx' path.

// An persistent Hash Trie is a Hash Trie in which any commonly updating actions - removing,
// setting or adding values - produce an entirely new Hash Trie, and *don't* affect the
// original in any way.  This means that the Hash Tries can be shared safely; without fear
// that updating them will result in a value changing in multiple places in a program.

// To make this distinction clearer, the verbs 'set' and 'remove/delete' have been replaced
// with assoc (associate a new value with an persistent Hash Trie), and dissoc (dissociate
// an existing value with an persistent Hash Trie).



// to allow hooks for other implementations/tests to override the default
// hash and equality functions (which are the necessary ones for creating
// hash-table-like behaviour, as the hash-trie has), they can be passed in
// as opts to assoc/dissoc/get/has.

// These defaults cover the ~80% use case of unordered string:val pairs.
var defaultOpts = {
    eq   : function(a, b){ return a === b },
    hash : hash.hash
}

//# Node Types

// Object -> Trie
// a Trie is a store of children values; the most basic type of non-leaf node.
var Trie = lib.Trie = function(children){
    return { type: 'trie', children: children || {} }
}

// String, JSValue -> Value
// Node that represents a specific value
var Value = lib.Value = function(key, value){
    return { type: 'value', key: key, value: value }
}

// { JSValue } -> Hashmap
// a Trie will have a max depth of 7 (6, if 0 indexed).  After that, additional
// values will just slung into a hashmap node
var Hashmap = lib.Hashmap = function(values){
    return { type: 'hashmap', values: values }
}


//# Basic manipulation functions - has/get/assoc/dissoc

// Object, String, JSValue -> Object

// creates a shallow clone of an object, adding or replacing a key:val pair
// with the one provided

// necessary for updating nodes in `assoc`
var copyAdd = function(obj, key, val){
    obj = util.clone(obj)
    obj[key] = val
    return obj
}


//  Node, String, JSValue, (Int) -> Trie

// assoc 'associates' a new value with a Trie.  It does so by finding the
// appropriate place for the new node, then creating a copy of the parent
// nodes, adding in a reference to the newly created child node each time.

// This is called path-copying, since the path from the root node to the new
// node is copied form one datastructure to the other.  Since the vast majority
// of data will lie in nodes beneathe these in sizable datastructures, this sharing
// of data allows for persistent values to be updated relatively effeciently at large
// size.

// The algorithm is also aware of 'specificity'; i.e. that a value need only be stored
// at a depth where it can be distinguished uniquely from other values by virtue of its
// path.  If both 'foo' and 'bar's first 5 bits are 011011, and both are present in the
// Trie, then they most be stored in a sub-Trie, and use the following 5 bits to differenciate
// themselves.  If the Trie gets deeper than there are bits in the hash (i.e. a total hash collision)
// then it simply stores the objects in a Hashmap node.
lib.assoc = function(node, key, val, opts){
    return assoc(node, key, val, opts || defaultOpts, 0)
}

var assoc = function(node, key, val, opts, depth){
    return assocFns[node.type](node, key, val, opts, depth)
}

var assocFns = {
    trie: function(node, key, val, opts, depth){
        var path = hash.mask(key, depth, opts.hash)
        var child = node.children[path]

        if ( child === undefined  ) return Trie(copyAdd(node.children, path, Value(key, val)))
        else                        return Trie(copyAdd(node.children, path, assoc(child, key, val, opts, depth + 1)))
    },
    value: function(node, key, val, opts, depth){
        var nodePath = hash.mask(node.key, depth, opts.hash)
        var keyPath  = hash.mask(key, depth, opts.hash)

        var makeHashmap = function(){
            var children = {}
            children[key] = Value(key, val)
            children[node.key] = node
            return Hashmap(children)
        }

        var resolveShallowConflict = function(){
            var children = {}
            children[nodePath] = node
            children[keyPath]  = Value(key, val)

            return Trie(children)
        }

        var resolveDeepConflict = function(){
            var children = {}
            children[keyPath] = assoc(node, key, val, opts, depth + 1)
            return Trie(children)
        }

        var makeTrie = function(){
            if ( nodePath !== keyPath ) return resolveShallowConflict()
            else                        return resolveDeepConflict()
        }

        if ( opts.eq(node.key, key) ) return Value(key, val)
        else if ( depth > 6 )         return makeHashmap()
        else                          return makeTrie()
    },
    hashmap: function(node, key, val, opts, depth){
        var v = copyAdd(node.values, key, Value(key, val))
        return Hashmap(v)
    }
}

// Object, String -> Object

// creates a new object, but without a key.
// Used in `dissoc`
var copyDissoc = function(obj, key){
    obj = util.clone(obj)
    delete obj[key]
    return obj
}


// Node, String, (Int) -> Trie

// dissoc (disassociate) returns a new Trie, but without a specified key

// As with assoc, it recurses down the Trie.  If it fails to find a key, then
// it returns the original Trie, since that is conceptually the same as removing
// a non-existant key from an object.

// If it finds a Value associated with a key, however, it will create
// a parent node to that Value that copies all *other* values, but omits
// the value with the key in question.  As with assoc, it will also produce a
// copy of *its* parent.  This occurs recursively, and is exactly the same concept
// as the 'path copying' technique used in assoc.

// If removing a value removes a hash collision, then the Trie node that contained
// those values can be replaced with just a Value node, which results in a shallower
// Trie.
lib.dissoc = function(node, key, opts){
    return dissoc(node, key, opts || defaultOpts, 0)
}

var dissoc = function(node, key, opts, depth){
    return dissocFns[node.type](node, key, opts, depth)
}

var dissocFns = {
    trie: function(node, key, opts, depth){
        var path = hash.mask(key, depth, opts.hash)
        var child = node.children[path]

        // handle the 'present key' cases.  If it's a Value, remove it.  If it's a sub-Trie or Hashmap
        // recurse to prevent other values from being lost
        var dissocKey = function(){
            if ( child.type === 'value' && opts.eq(child.key, key) )
                return Trie(copyDissoc(node.children, path))
            else
                return Trie(copyDissoc(node.children, path, dissoc(child, key, opts, depth + 1)))
        }

        // if there's only a single value in a Trie node left, then it can be replaced by its value,
        // allowing us to make the Trie more shallow, and therefore more effecient.
        var collapseTrie = function(trie){
            var names = util.keys(trie.children)
            var child = trie.children[names[0]]

            // don't collapse an empty root trie
            if ( depth === 0 )                                       return trie
            else if ( child === undefined )                          return trie
            else if ( names.length === 1 && child.type === 'value' ) return Value(child.key, child.value)
            else                                                     return trie
        }

        var handleTrie = function(){
            return collapseTrie(dissocKey(node))
        }

        // if there's no child, return the node
        if ( child === undefined )  return node;
        else                        return handleTrie();
    },
    value: function(){},
    hashmap: function(node, key, opts, depth){
        var ret = copyDissoc(node.values, key)
        var names = util.keys(ret)
        var child = ret[names[0]]

        if ( names.length === 1 ) return Value(child.key, child.value)
        else                      return Hashmap(ret)
    }
}


// Node, String, (Int), (Object)-> Bool

// Trie-equivalent of the 'in' operator.

// Has recurses down a node, using hash.mask to navigate a 'path' down branches.
// If a value node is found, if its key is equal to the key provided, then the
// Trie contains the key, and true is returned.

// Hashmaps store values in the outermost leaves when necessary.  If they contain
// a key, it also means that the key is in the trie,.
lib.has = function(trie, key, opts){
    return has(trie, key, opts || defaultOpts, 0)
}

var has = function(trie, key, opts, depth){
    return hasFns[trie.type](trie, key, opts, depth)
}

var hasFns = {
    trie: function(node, key, opts, depth){
        var child = node.children[hash.mask(key, depth, opts.hash)]
        if ( child === undefined )    return false
        else                          return has(child, key, opts, depth + 1)
    },
    value: function(node, key, opts){
        return opts.eq(node.key, key)
    },
    hashmap: function(node, key, opts){
        return key in node.values
    }
}

// Node, String, (Int), (Object) -> Value

// Trie-equivalent of dot or bracket syntax - retrieves a value assocaited with a key
// or undefined.

// get recurses down the Trie, similarly to has.  If it finds a matching key, instead
// of returning true or false, however, it unpacks the value associated with the key
// and returns that instead.
lib.get = function(trie, key, opts){
    return get(trie, key, opts || defaultOpts, 0)
}

var get = function(trie, key, opts, depth){
    return getFns[trie.type](trie, key, opts, depth)
}

var getFns = {
    trie: function(node, key, opts, depth){
        var child = node.children[hash.mask(key, depth, opts.hash)]
        if ( child === undefined )    return undefined
        else                          return get(child, key, opts, depth + 1)
    },
    value: function(node, key, opts, depth){
        if ( opts.eq(node.key, key) ) return node.value
    },
    hashmap: function(node, key, opts, depth){
        var value = node.values[key]
        return  value ? value.value : undefined

    }
}



// Node, (Any, Any, String), Any -> Any

// given a node, function and seed, reduce to produce results.
lib.reduce = function(node, callback, initial){
    var state = reduce(node, callback, initial)
    return state instanceof Break ? state.value : state
}

var reduce = function(node, callback, initial) {
    return reduceFns[node.type](node, callback, initial)
}

var reduceFns = {
    trie: function(node, callback, state) {
        for ( var path in node.children ) {
            if ( node.children.hasOwnProperty(path) ) {
                state = reduce(node.children[path], callback, state)
            }
            if (state instanceof Break) break
        }
        return state
    },
    value: function(node, callback, state){
        return callback(state, node.value, node.key)
    },
    hashmap: function(node, callback, state){
        for ( var key in node.values ) {
            if ( node.values.hasOwnProperty(key) ) {
                state = reduce(node.values[key], callback, state)
            }
            if (state instanceof Break) break
        }
        return state
    }
}


var Break = lib.reduce.Break = function(v) {
    if (!(this instanceof Break)) return new Break(v)
    this.value = v
}



// Node -> Object

// mutable returns a mutable version of a Trie.

// It achieves this by recursing down the Trie, finding all the Value nodes
// (whether stored in a Trie directly, or in a Hashmap node), and adding
// the values to a return value.

//  (yay abusing mutability in small pieces, but keeping the function
// pure from an API perspective)
lib.mutable = function(node){
    return lib.reduce(node, addKeyVal, {})
}

var addKeyVal = function(o, val, key){
    o[key] = val
    return o
}

// Node -> [String]

// keys returns the keys stored in the array, like Object.keys
lib.keys = function(node){
    return lib.reduce(node, addKey, [])
}

var addKey = function(arr, val, key){
    arr.push(key)
    return arr
}

},{"./hash":14,"./util":16}],16:[function(require,module,exports){
'use strict'

// Internal
var extend   = function(t, f) { for ( var p in f ) t[p] = f[p]; return t }
var clone    = function(o){ return extend({}, o) }
var slice    = function(a, f, n){ return [].slice.call(a, f, n) }

var mapObj = function(o, fn){
    var r = {}
    for ( var p in o ) r[p] = fn(o[p], p, o)
    return r
}

var map = function(arr, fn){
    var a = []
    for ( var i = 0, l = arr.length; i < l; i += 1 ) a.push(fn(arr[i], i, arr))
    return a
}

var reduce = function(arr, fn){
    var seed = arr[0]
    arr = arr.slice(1)
    for ( var i = 0, l = arr.length; i < l; i += 1) seed = fn(seed, arr[i])
    return seed
}

var pick = function(o){
    var names = slice(arguments, 1),
        r     = {}

    for ( var i = 0, l = names.length; i < l; i += 1 )
        r[names[i]] = o[names[i]]
    return r
}

// Object -> [String]

// get the keys of an object
var keys = Object.keys || function(o){
    var a = []
    for ( var key in o ) a.push(key)
    return a
}


module.exports = {
    extend    : extend,
    clone     : clone,
    slice     : slice,
    mapObj    : mapObj,
    pick      : pick,
    map       : map,
    reduce    : reduce,
    keys      : keys
}

},{}]},{},[3])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9hc3QuanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9iYXNlLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvYnJvd3Nlck1haW4uanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9nZW4uanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9nZW5lcmF0ZWRQcmVsdWRlLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvbG9kYXNoLm1pbi5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbGliL21hcmtlZC5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbGliL21kLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvbm90ZWJvb2suanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9ydW50aW1lLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvc3RkLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaW5zZXJ0LW1vZHVsZS1nbG9iYWxzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL25vZGVfbW9kdWxlcy9wZXJzaXN0ZW50LWhhc2gtdHJpZS9ub2RlX21vZHVsZXMvc3RyaW5nLWhhc2gvaW5kZXguanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL25vZGVfbW9kdWxlcy9wZXJzaXN0ZW50LWhhc2gtdHJpZS9zcmMvaGFzaC5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbm9kZV9tb2R1bGVzL3BlcnNpc3RlbnQtaGFzaC10cmllL3NyYy9wZXJzaXN0ZW50LWhhc2gtdHJpZS5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbm9kZV9tb2R1bGVzL3BlcnNpc3RlbnQtaGFzaC10cmllL3NyYy91dGlsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25nQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3h4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3R1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcHpDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGdsb2JhbCl7Ly8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuLypcbkNvcHlyaWdodCAoQykgMjAxMiwgQmlsbCBCdXJkaWNrLCBUaW55IENvbmNlcHRzOiBodHRwczovL2dpdGh1Yi5jb20vem90L0xlaXN1cmVcblxuKGxpY2Vuc2VkIHdpdGggWkxJQiBsaWNlbnNlKVxuXG5UaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxud2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG5hcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuXG5QZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbmluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbmZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcblxuMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbmNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG5pbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbmFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG5cbjIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG5taXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG5cbjMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIExfYW5ubywgTF9hcHBseSwgTF9sYW1iZGEsIExfbGV0LCBMX2xpdCwgTF9yZWYsIExlaXN1cmVPYmplY3QsIExlaXN1cmVfQmFzZUNvbnMsIExlaXN1cmVfY29ucywgTGVpc3VyZV9uaWwsIE5pbCwgYW5ubywgYXBwbHksIGFzdDJKc29uLCBhc3QySnNvbkVuY29kaW5ncywgYXN0U3RyaW5nLCBjaGFyQ29kZXMsIGNoZWNrVHlwZSwgY29ucywgY29uc0VxLCBjb25zRnJvbSwgZGVmaW5lLCBlbnN1cmVMZWlzdXJlQ2xhc3MsIGV2YWxGdW5jLCBmb2xkTGVmdCwgZnVuY3Rpb25JbmZvLCBnZXRBbm5vQm9keSwgZ2V0QW5ub0RhdGEsIGdldEFubm9OYW1lLCBnZXRBcHBseUFyZywgZ2V0QXBwbHlGdW5jLCBnZXREYXRhVHlwZSwgZ2V0TGFtYmRhQm9keSwgZ2V0TGFtYmRhVmFyLCBnZXRMZXRCb2R5LCBnZXRMZXROYW1lLCBnZXRMZXRWYWx1ZSwgZ2V0TGl0VmFsLCBnZXRSZWZOYW1lLCBnZXRUeXBlLCBoZWFkLCBqc1R5cGUsIGpzb24yQXN0LCBqc29uMkFzdEVuY29kaW5ncywgbGFtYmRhLCBsYXp5LCBsZWlzdXJlQWRkRnVuYywgbGV0U3RyLCBsaXQsIGxsZXQsIGx6LCBtYWtlU3VwZXIsIG1rUHJvdG8sIG5hbWVGdW5jLCBuYW1lU3ViLCBwcmltQ29ucywgcHJpbUZvbGRMZWZ0LCByZWYsIHJlc29sdmUsIHJvb3QsIHJ6LCBzYXZlLCBzZXREYXRhVHlwZSwgc2V0VHlwZSwgc3VwZXJ0eXBlcywgdGFpbCwgdGhyb3dFcnJvciwgXywgX3JlZiwgX3JlZjEsIF9yZWYyLCBfcmVmMyxcbiAgICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuICBfcmVmID0gcm9vdCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9iYXNlJyksIHJlc29sdmUgPSBfcmVmLnJlc29sdmUsIGxhenkgPSBfcmVmLmxhenk7XG5cbiAgXyA9IHJlcXVpcmUoJy4vbG9kYXNoLm1pbicpO1xuXG4gIHJ6ID0gcmVzb2x2ZTtcblxuICBseiA9IGxhenk7XG5cbiAgY2hhckNvZGVzID0ge1xuICAgIFwiJ1wiOiAnJGEnLFxuICAgICcsJzogJyRiJyxcbiAgICAnJCc6ICckJCcsXG4gICAgJ0AnOiAnJGQnLFxuICAgICc/JzogJyRlJyxcbiAgICAnLyc6ICckZicsXG4gICAgJyonOiAnJGcnLFxuICAgICcmJzogJyRoJyxcbiAgICAnXic6ICckaScsXG4gICAgJyEnOiAnJGsnLFxuICAgICdgJzogJyRsJyxcbiAgICAnfic6ICckbScsXG4gICAgJy0nOiAnJF8nLFxuICAgICcrJzogJyRvJyxcbiAgICAnPSc6ICckcCcsXG4gICAgJ3wnOiAnJHEnLFxuICAgICdbJzogJyRyJyxcbiAgICAnXSc6ICckcycsXG4gICAgJ3snOiAnJHQnLFxuICAgICd9JzogJyR1JyxcbiAgICAnXCInOiAnJHYnLFxuICAgICc6JzogJyR3JyxcbiAgICAnOyc6ICckeCcsXG4gICAgJzwnOiAnJHknLFxuICAgICc+JzogJyR6JyxcbiAgICAnJSc6ICckQScsXG4gICAgJy4nOiAnJEInXG4gIH07XG5cbiAgbmFtZVN1YiA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgY29kZSwgaSwgcywgX2ksIF9yZWYxO1xuXG4gICAgcyA9ICcnO1xuICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZjEgPSBuYW1lLmxlbmd0aDsgMCA8PSBfcmVmMSA/IF9pIDwgX3JlZjEgOiBfaSA+IF9yZWYxOyBpID0gMCA8PSBfcmVmMSA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICBjb2RlID0gY2hhckNvZGVzW25hbWVbaV1dO1xuICAgICAgcyArPSBjb2RlICE9IG51bGwgPyBjb2RlIDogbmFtZVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG4gIH07XG5cbiAgc2V0RGF0YVR5cGUgPSBmdW5jdGlvbihmdW5jLCBkYXRhVHlwZSkge1xuICAgIGlmIChkYXRhVHlwZSkge1xuICAgICAgZnVuYy5kYXRhVHlwZSA9IGRhdGFUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuYztcbiAgfTtcblxuICBzZXRUeXBlID0gZnVuY3Rpb24oZnVuYywgdHlwZSkge1xuICAgIGlmICh0eXBlKSB7XG4gICAgICBmdW5jLnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBmdW5jLl9fcHJvdG9fXyA9IChlbnN1cmVMZWlzdXJlQ2xhc3ModHlwZSkpLnByb3RvdHlwZTtcbiAgICByZXR1cm4gZnVuYztcbiAgfTtcblxuICBMZWlzdXJlT2JqZWN0ID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIExlaXN1cmVPYmplY3QoKSB7fVxuXG4gICAgcmV0dXJuIExlaXN1cmVPYmplY3Q7XG5cbiAgfSkoKTtcblxuICBMZWlzdXJlT2JqZWN0LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnTGVpc3VyZU9iamVjdCc7XG5cbiAgZ2xvYmFsLkxlaXN1cmVfT2JqZWN0ID0gTGVpc3VyZU9iamVjdDtcblxuICBzdXBlcnR5cGVzID0ge307XG5cbiAgcm9vdC5sZWlzdXJlQ2xhc3NDaGFuZ2UgPSAwO1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcyA9IGZ1bmN0aW9uKGxlaXN1cmVDbGFzcykge1xuICAgIHZhciBjbDtcblxuICAgIGNsID0gXCJMZWlzdXJlX1wiICsgKG5hbWVTdWIobGVpc3VyZUNsYXNzKSk7XG4gICAgaWYgKGdsb2JhbFtjbF0gPT0gbnVsbCkge1xuICAgICAgZ2xvYmFsW2NsXSA9IGV2YWwoXCIoZnVuY3Rpb24gXCIgKyBjbCArIFwiKCl7fSlcIik7XG4gICAgICBzdXBlcnR5cGVzW2NsXSA9ICdMZWlzdXJlX09iamVjdCc7XG4gICAgICByb290LmxlaXN1cmVDbGFzc0NoYW5nZSsrO1xuICAgIH1cbiAgICByZXR1cm4gZ2xvYmFsW2NsXTtcbiAgfTtcblxuICBtYWtlU3VwZXIgPSBmdW5jdGlvbih0eXBlLCBzdXBlcnR5cGUpIHtcbiAgICBzdXBlcnR5cGVzW1wiTGVpc3VyZV9cIiArIChuYW1lU3ViKHR5cGUpKV0gPSBcIkxlaXN1cmVfXCIgKyAobmFtZVN1YihzdXBlcnR5cGUpKTtcbiAgICByZXR1cm4gcm9vdC5sZWlzdXJlQ2xhc3NDaGFuZ2UrKztcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2NvbnMnKTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ25pbCcpO1xuXG4gIHN1cGVydHlwZXMuTGVpc3VyZV9jb25zID0gJ0xlaXN1cmVfT2JqZWN0JztcblxuICBzdXBlcnR5cGVzLkxlaXN1cmVfbmlsID0gJ0xlaXN1cmVfT2JqZWN0JztcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2FzdCcpO1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnbGl0Jyk7XG5cbiAgTGVpc3VyZV9saXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwibGl0KFwiICsgKGdldExpdFZhbCh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3JlZicpO1xuXG4gIExlaXN1cmVfcmVmLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcInJlZihcIiArIChnZXRSZWZOYW1lKHRoaXMpKSArIFwiKVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnbGFtYmRhJyk7XG5cbiAgTGVpc3VyZV9sYW1iZGEucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwibGFtYmRhKFwiICsgKGFzdFN0cmluZyh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2FwcGx5Jyk7XG5cbiAgTGVpc3VyZV9hcHBseS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJhcHBseShcIiArIChhc3RTdHJpbmcodGhpcykpICsgXCIpXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdsZXQnKTtcblxuICBMZWlzdXJlX2xldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJsZXQoXCIgKyAoYXN0U3RyaW5nKHRoaXMpKSArIFwiKVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnYW5ubycpO1xuXG4gIExlaXN1cmVfYW5uby5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJhbm5vKFwiICsgKGFzdFN0cmluZyh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2RvYycpO1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnc3JjTG9jYXRpb24nKTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3BhdHRlcm4nKTtcblxuICBtYWtlU3VwZXIoJ2xpdCcsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ3JlZicsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ2xhbWJkYScsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ2FwcGx5JywgJ2FzdCcpO1xuXG4gIG1ha2VTdXBlcignbGV0JywgJ2FzdCcpO1xuXG4gIG1ha2VTdXBlcignYW5ubycsICdhc3QnKTtcblxuICBhc3RTdHJpbmcgPSBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgYXJnU3RyLCBmdW5jU3RyLCBfcmVmMTtcblxuICAgIHN3aXRjaCAoZ2V0VHlwZShhc3QpKSB7XG4gICAgICBjYXNlICdsaXQnOlxuICAgICAgICByZXR1cm4gZ2V0TGl0VmFsKGFzdCk7XG4gICAgICBjYXNlICdyZWYnOlxuICAgICAgICByZXR1cm4gZ2V0UmVmTmFtZShhc3QpO1xuICAgICAgY2FzZSAnYXBwbHknOlxuICAgICAgICBmdW5jU3RyID0gYXN0U3RyaW5nKGdldEFwcGx5RnVuYyhhc3QpKTtcbiAgICAgICAgaWYgKChfcmVmMSA9IGdldFR5cGUoZ2V0QXBwbHlGdW5jKGFzdCkpKSA9PT0gJ2xhbWJkYScgfHwgX3JlZjEgPT09ICdsZXQnKSB7XG4gICAgICAgICAgZnVuY1N0ciA9IFwiKFwiICsgZnVuY1N0ciArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIGFyZ1N0ciA9IGFzdFN0cmluZyhnZXRBcHBseUFyZyhhc3QpKTtcbiAgICAgICAgaWYgKGdldFR5cGUoZ2V0QXBwbHlBcmcoYXN0KSkgPT09ICdhcHBseScpIHtcbiAgICAgICAgICBhcmdTdHIgPSBcIihcIiArIGFyZ1N0ciArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiICsgZnVuY1N0ciArIFwiIFwiICsgYXJnU3RyO1xuICAgICAgY2FzZSAnbGFtYmRhJzpcbiAgICAgICAgcmV0dXJuIFwiXFxcXFwiICsgKGdldExhbWJkYVZhcihhc3QpKSArIFwiIC4gXCIgKyAoYXN0U3RyaW5nKGdldExhbWJkYUJvZHkoYXN0KSkpO1xuICAgICAgY2FzZSAnbGV0JzpcbiAgICAgICAgcmV0dXJuIFwiXFxcXFxcXFxcIiArIChsZXRTdHIoYXN0KSk7XG4gICAgICBjYXNlICdhbm5vJzpcbiAgICAgICAgcmV0dXJuIFwiXFxcXEBcIiArIChnZXRBbm5vTmFtZShhc3QpKSArIFwiIFwiICsgKGdldEFubm9EYXRhKGFzdCkpICsgXCIgLiBcIiArIChhc3RTdHJpbmcoZ2V0QW5ub0JvZHkoYXN0KSkpO1xuICAgIH1cbiAgfTtcblxuICBsZXRTdHIgPSBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgYmluZGluZywgYm9keTtcblxuICAgIGJvZHkgPSBnZXRMZXRCb2R5KGFzdCk7XG4gICAgYmluZGluZyA9IFwiKFwiICsgKGdldExldE5hbWUoYXN0KSkgKyBcIiA9IFwiICsgKGFzdFN0cmluZyhnZXRMZXRWYWx1ZShhc3QpKSkgKyBcIilcIjtcbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIExlaXN1cmVfbGV0KSB7XG4gICAgICByZXR1cm4gXCJcIiArIGJpbmRpbmcgKyBcIiBcIiArIChsZXRTdHIoYm9keSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJcIiArIGJpbmRpbmcgKyBcIiAuIFwiICsgKGFzdFN0cmluZyhib2R5KSk7XG4gICAgfVxuICB9O1xuXG4gIExlaXN1cmVfQmFzZUNvbnMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExlaXN1cmVfQmFzZUNvbnMsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBMZWlzdXJlX0Jhc2VDb25zKCkge1xuICAgICAgX3JlZjEgPSBMZWlzdXJlX0Jhc2VDb25zLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIF9yZWYxO1xuICAgIH1cblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmhlYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBJbXBsZW1lbnRlZFwiKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUudGFpbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudGVkXCIpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5pc05pbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgaWYgKGZ1bmModGhpcy5oZWFkKCkpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhlYWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhaWwoKS5maW5kKGZ1bmMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5yZW1vdmVBbGwgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICB2YXIgdDtcblxuICAgICAgdCA9IHRoaXMudGFpbCgpLnJlbW92ZUFsbChmdW5jKTtcbiAgICAgIGlmIChmdW5jKHRoaXMuaGVhZCgpKSkge1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH0gZWxzZSBpZiAodCA9PT0gdGhpcy50YWlsKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29ucyh0aGlzLmhlYWQoKSwgdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIHJldHVybiBjb25zKGZ1bmModGhpcy5oZWFkKCkpLCB0aGlzLnRhaWwoKS5tYXAoZnVuYykpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5mb2xkbCA9IGZ1bmN0aW9uKGZ1bmMsIGFyZykge1xuICAgICAgcmV0dXJuIHRoaXMudGFpbCgpLmZvbGRsKGZ1bmMsIGZ1bmMoYXJnLCB0aGlzLmhlYWQoKSkpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5mb2xkbDEgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gdGhpcy50YWlsKCkuZm9sZGwoZnVuYywgdGhpcy5oZWFkKCkpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5mb2xkciA9IGZ1bmN0aW9uKGZ1bmMsIGFyZykge1xuICAgICAgcmV0dXJuIGZ1bmModGhpcy5oZWFkKCksIHRoaXMudGFpbCgpLmZvbGRyKGZ1bmMsIGFyZykpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5mb2xkcjEgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICBpZiAodGhpcy50YWlsKCkgPT09IE5pbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuYyh0aGlzLmhlYWQoKSwgdGhpcy50YWlsKCkuZm9sZHIxKGZ1bmMpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZm9sZGwoKGZ1bmN0aW9uKGksIGVsKSB7XG4gICAgICAgIGkucHVzaChlbCk7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfSksIFtdKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oc3RyKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucmV2KE5pbCk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnJldiA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFpbCgpLnJldihjb25zKHRoaXMuaGVhZCgpLCByZXN1bHQpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZWxlbWVudFN0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuXG4gICAgICByZXR1cm4gXCJcIiArICgoKF9yZWYyID0gdGhpcy5oZWFkKCkpICE9IG51bGwgPyBfcmVmMi5jb25zdHJ1Y3RvciA6IHZvaWQgMCkgPT09IHRoaXMuY29uc3RydWN0b3IgfHwgdGhpcy5oZWFkKCkgaW5zdGFuY2VvZiBMZWlzdXJlX25pbCA/ICdbJyArIHRoaXMuaGVhZCgpLmVsZW1lbnRTdHJpbmcoKSArICddJyA6IHRoaXMuaGVhZCgpKSArICh0aGlzLnRhaWwoKSBpbnN0YW5jZW9mIExlaXN1cmVfbmlsID8gJycgOiB0aGlzLnRhaWwoKSBpbnN0YW5jZW9mIExlaXN1cmVfQmFzZUNvbnMgPyBcIiBcIiArICh0aGlzLnRhaWwoKS5lbGVtZW50U3RyaW5nKCkpIDogXCIgfCBcIiArICh0aGlzLnRhaWwoKSkpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvdGhlcikge1xuICAgICAgcmV0dXJuIHRoaXMgPT09IG90aGVyIHx8IChvdGhlciBpbnN0YW5jZW9mIExlaXN1cmVfQmFzZUNvbnMgJiYgY29uc0VxKHRoaXMuaGVhZCgpLCBvdGhlci5oZWFkKCkpICYmIGNvbnNFcSh0aGlzLnRhaWwoKSwgb3RoZXIudGFpbCgpKSk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbihibG9jaykge1xuICAgICAgYmxvY2sodGhpcy5oZWFkKCkpO1xuICAgICAgcmV0dXJuIHRoaXMudGFpbCgpLmVhY2goYmxvY2spO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmZvbGRsKChmdW5jdGlvbihpLCBlbCkge1xuICAgICAgICByZXR1cm4gaSArIDE7XG4gICAgICB9KSwgMCk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0O1xuXG4gICAgICB0ID0gdGhpcy50YWlsKCk7XG4gICAgICBpZiAodCA9PT0gTmlsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhlYWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0Lmxhc3QoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obCkge1xuICAgICAgcmV0dXJuIGNvbnModGhpcy5oZWFkKCksIHRoaXMudGFpbCgpLmFwcGVuZChsKSk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJcIiArICh0aGlzLnN0cmluZ05hbWUoKSkgKyBcIltcIiArICh0aGlzLmVsZW1lbnRTdHJpbmcoKSkgKyBcIl1cIjtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuc3RyaW5nTmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiQmFzZUNvbnNcIjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExlaXN1cmVfQmFzZUNvbnM7XG5cbiAgfSkoTGVpc3VyZU9iamVjdCk7XG5cbiAgY29uc0VxID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhID09PSBiIHx8IChhIGluc3RhbmNlb2YgTGVpc3VyZV9CYXNlQ29ucyAmJiBhLmVxdWFscyhiKSk7XG4gIH07XG5cbiAgTGVpc3VyZV9jb25zID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMZWlzdXJlX2NvbnMsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBMZWlzdXJlX2NvbnMoKSB7XG4gICAgICBfcmVmMiA9IExlaXN1cmVfY29ucy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBfcmVmMjtcbiAgICB9XG5cbiAgICBMZWlzdXJlX2NvbnMucHJvdG90eXBlLmhlYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICByZXR1cm4gcnooYSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX2NvbnMucHJvdG90eXBlLnRhaWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICByZXR1cm4gcnooYik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX2NvbnMucHJvdG90eXBlLnN0cmluZ05hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIkNvbnNcIjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExlaXN1cmVfY29ucztcblxuICB9KShMZWlzdXJlX0Jhc2VDb25zKTtcblxuICBnbG9iYWwuTGVpc3VyZV9jb25zID0gTGVpc3VyZV9jb25zO1xuXG4gIExlaXN1cmVfbmlsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMZWlzdXJlX25pbCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIExlaXN1cmVfbmlsKCkge1xuICAgICAgX3JlZjMgPSBMZWlzdXJlX25pbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBfcmVmMztcbiAgICB9XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuaXNOaWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5yZW1vdmVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIE5pbDtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmZvbGRsID0gZnVuY3Rpb24oZnVuYywgYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuZm9sZHIgPSBmdW5jdGlvbihmdW5jLCBhcmcpIHtcbiAgICAgIHJldHVybiBhcmc7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLnJldiA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBMZWlzdXJlX25pbDtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKGwpIHtcbiAgICAgIHJldHVybiBsO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIkNvbnNbXVwiO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuZWxlbWVudFN0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGVpc3VyZV9uaWw7XG5cbiAgfSkoTGVpc3VyZU9iamVjdCk7XG5cbiAgZ2xvYmFsLkxlaXN1cmVfbmlsID0gTGVpc3VyZV9uaWw7XG5cbiAganNUeXBlID0gZnVuY3Rpb24odikge1xuICAgIHZhciB0O1xuXG4gICAgdCA9IHR5cGVvZiB2O1xuICAgIGlmICh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHYuY29uc3RydWN0b3IgfHwgdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICB9O1xuXG4gIG1rUHJvdG8gPSBmdW5jdGlvbihwcm90b0Z1bmMsIHZhbHVlKSB7XG4gICAgdmFsdWUuX19wcm90b19fID0gcHJvdG9GdW5jLnByb3RvdHlwZTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgdGhyb3dFcnJvciA9IGZ1bmN0aW9uKG1zZykge1xuICAgIHRocm93IChtc2cgaW5zdGFuY2VvZiBFcnJvciA/IG1zZyA6IG5ldyBFcnJvcihTdHJpbmcobXNnKSkpO1xuICB9O1xuXG4gIGNoZWNrVHlwZSA9IGZ1bmN0aW9uKHZhbHVlLCB0eXBlKSB7XG4gICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiB0eXBlKSkge1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoXCJUeXBlIGVycm9yOiBleHBlY3RlZCB0eXBlOiBcIiArIHR5cGUgKyBcIiwgYnV0IGdvdDogXCIgKyAoanNUeXBlKHZhbHVlKSkpO1xuICAgIH1cbiAgfTtcblxuICBwcmltQ29ucyA9IHNldERhdGFUeXBlKChmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgIHJldHVybiBta1Byb3RvKExlaXN1cmVfY29ucywgc2V0VHlwZSgoZnVuY3Rpb24oZikge1xuICAgICAgICByZXR1cm4gcnooZikoYSkoYik7XG4gICAgICB9KSwgJ2NvbnMnKSk7XG4gICAgfTtcbiAgfSksICdjb25zJyk7XG5cbiAgTmlsID0gbWtQcm90byhMZWlzdXJlX25pbCwgc2V0RGF0YVR5cGUoc2V0VHlwZSgoZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICByZXR1cm4gcnooYik7XG4gICAgfTtcbiAgfSksICduaWwnKSwgJ25pbCcpKTtcblxuICBjb25zID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBwcmltQ29ucyhseihhKSkobHooYikpO1xuICB9O1xuXG4gIGZvbGRMZWZ0ID0gZnVuY3Rpb24oZnVuYywgdmFsLCB0aGluZykge1xuICAgIGlmICh0aGluZyBpbnN0YW5jZW9mIExlaXN1cmVfY29ucykge1xuICAgICAgcmV0dXJuIHRoaW5nLmZvbGRsKGZ1bmMsIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwcmltRm9sZExlZnQoZnVuYywgdmFsLCB0aGluZywgMCk7XG4gICAgfVxuICB9O1xuXG4gIHByaW1Gb2xkTGVmdCA9IGZ1bmN0aW9uKGZ1bmMsIHZhbCwgYXJyYXksIGluZGV4KSB7XG4gICAgaWYgKGluZGV4IDwgYXJyYXkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcHJpbUZvbGRMZWZ0KGZ1bmMsIGZ1bmModmFsLCBhcnJheVtpbmRleF0pLCBhcnJheSwgaW5kZXggKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gIH07XG5cbiAgZ2xvYmFsLmxlaXN1cmVGdW5jcyA9IHt9O1xuXG4gIGdsb2JhbC5sZWlzdXJlRnVuY05hbWVzID0gTmlsO1xuXG4gIGxlaXN1cmVBZGRGdW5jID0gZ2xvYmFsLmxlaXN1cmVBZGRGdW5jID0gZnVuY3Rpb24obm0pIHtcbiAgICByZXR1cm4gZ2xvYmFsLmxlaXN1cmVGdW5jTmFtZXMgPSBjb25zKG5tLCBnbG9iYWwubGVpc3VyZUZ1bmNOYW1lcyk7XG4gIH07XG5cbiAgcm9vdC5ldmFsRnVuYyA9IGV2YWxGdW5jID0gZXZhbDtcblxuICByb290LmZ1bmN0aW9uQ291bnQgPSAwO1xuXG4gIGZ1bmN0aW9uSW5mbyA9IHt9O1xuXG4gIG5hbWVGdW5jID0gZnVuY3Rpb24oZnVuYywgbmFtZSkge1xuICAgIHZhciBmO1xuXG4gICAgZiA9IG51bGw7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGYgPT09IG51bGwpIHtcbiAgICAgICAgZiA9IHJ6KGZ1bmMpO1xuICAgICAgICBpZiAodHlwZW9mIGYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBmLmxlaXN1cmVOYW1lID0gbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgZGVmaW5lID0gZnVuY3Rpb24obmFtZSwgZnVuYywgYXJpdHksIHNyYywgbWV0aG9kKSB7XG4gICAgdmFyIG5tO1xuXG4gICAgZnVuY3Rpb25JbmZvW25hbWVdID0ge1xuICAgICAgc3JjOiBzcmMsXG4gICAgICBhcml0eTogYXJpdHksXG4gICAgICBsZWlzdXJlTmFtZTogbmFtZSxcbiAgICAgIGFsdHM6IHt9LFxuICAgICAgYWx0TGlzdDogW11cbiAgICB9O1xuICAgIG5tID0gJ0xfJyArIG5hbWVTdWIobmFtZSk7XG4gICAgaWYgKCFtZXRob2QgJiYgZ2xvYmFsLm5vcmVkZWZzICYmIChnbG9iYWxbbm1dICE9IG51bGwpKSB7XG4gICAgICB0aHJvd0Vycm9yKFwiW0RFRl0gQXR0ZW1wdCB0byByZWRlZmluZSBkZWZpbml0aW9uOiBcIiArIG5hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbkluZm9bbmFtZV0ubWFpbkRlZiA9IGdsb2JhbFtubV0gPSBnbG9iYWwubGVpc3VyZUZ1bmNzW25tXSA9IG5hbWVGdW5jKGZ1bmMsIG5hbWUpO1xuICAgIGxlaXN1cmVBZGRGdW5jKG5hbWUpO1xuICAgIHJvb3QuZnVuY3Rpb25Db3VudCsrO1xuICAgIHJldHVybiBmdW5jO1xuICB9O1xuXG4gIExfbGl0ID0gc2V0RGF0YVR5cGUoKGZ1bmN0aW9uKF94KSB7XG4gICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKF9mKSB7XG4gICAgICByZXR1cm4gcnooX2YpKF94KTtcbiAgICB9KSwgJ2xpdCcpO1xuICB9KSwgJ2xpdCcpO1xuXG4gIExfcmVmID0gc2V0RGF0YVR5cGUoKGZ1bmN0aW9uKF94KSB7XG4gICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKF9mKSB7XG4gICAgICByZXR1cm4gcnooX2YpKF94KTtcbiAgICB9KSwgJ3JlZicpO1xuICB9KSwgJ3JlZicpO1xuXG4gIExfbGFtYmRhID0gc2V0RGF0YVR5cGUoKGZ1bmN0aW9uKF92KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKF9mKSB7XG4gICAgICByZXR1cm4gc2V0VHlwZSgoZnVuY3Rpb24oX2cpIHtcbiAgICAgICAgcmV0dXJuIHJ6KF9nKShfdikoX2YpO1xuICAgICAgfSksICdsYW1iZGEnKTtcbiAgICB9O1xuICB9KSwgJ2xhbWJkYScpO1xuXG4gIExfYXBwbHkgPSBzZXREYXRhVHlwZSgoZnVuY3Rpb24oX2Z1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oX2FyZykge1xuICAgICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKF9mKSB7XG4gICAgICAgIHJldHVybiByeihfZikoX2Z1bmMpKF9hcmcpO1xuICAgICAgfSksICdhcHBseScpO1xuICAgIH07XG4gIH0pLCAnYXBwbHknKTtcblxuICBMX2xldCA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfbikge1xuICAgIHJldHVybiBmdW5jdGlvbihfdikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKF9iKSB7XG4gICAgICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihfZikge1xuICAgICAgICAgIHJldHVybiByeihfZikoX24pKF92KShfYik7XG4gICAgICAgIH0pLCAnbGV0Jyk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pLCAnbGV0Jyk7XG5cbiAgTF9hbm5vID0gc2V0RGF0YVR5cGUoKGZ1bmN0aW9uKF9uYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKF9kYXRhKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oX2JvZHkpIHtcbiAgICAgICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKF9mKSB7XG4gICAgICAgICAgcmV0dXJuIHJ6KF9mKShfbmFtZSkoX2RhdGEpKF9ib2R5KTtcbiAgICAgICAgfSksICdhbm5vJyk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pLCAnYW5ubycpO1xuXG4gIGdldFR5cGUgPSBmdW5jdGlvbihmKSB7XG4gICAgdmFyIHQsIF9yZWY0O1xuXG4gICAgdCA9IHR5cGVvZiBmO1xuICAgIHJldHVybiAodCA9PT0gJ2Z1bmN0aW9uJyAmJiAoZiAhPSBudWxsID8gZi50eXBlIDogdm9pZCAwKSkgfHwgKFwiKlwiICsgKCh0ID09PSAnb2JqZWN0JyAmJiAoKF9yZWY0ID0gZi5jb25zdHJ1Y3RvcikgIT0gbnVsbCA/IF9yZWY0Lm5hbWUgOiB2b2lkIDApKSB8fCB0KSk7XG4gIH07XG5cbiAgZGVmaW5lKCdnZXRUeXBlJywgbHooZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZ2V0VHlwZShyeih2YWx1ZSkpO1xuICB9KSwgMSk7XG5cbiAgZ2V0RGF0YVR5cGUgPSBmdW5jdGlvbihmKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBmLmRhdGFUeXBlKSB8fCAnJztcbiAgfTtcblxuICBkZWZpbmUoJ2dldERhdGFUeXBlJywgbHooZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZ2V0RGF0YVR5cGUocnoodmFsdWUpKTtcbiAgfSksIDEpO1xuXG4gIHNhdmUgPSB7fTtcblxuICBzYXZlLmxpdCA9IGxpdCA9IGZ1bmN0aW9uKGwpIHtcbiAgICByZXR1cm4gTF9saXQobHoobCkpO1xuICB9O1xuXG4gIHNhdmUucmVmID0gcmVmID0gZnVuY3Rpb24ocikge1xuICAgIHJldHVybiBMX3JlZihseihyKSk7XG4gIH07XG5cbiAgc2F2ZS5sYW1iZGEgPSBsYW1iZGEgPSBmdW5jdGlvbih2LCBib2R5KSB7XG4gICAgcmV0dXJuIExfbGFtYmRhKGx6KHYpKShseihib2R5KSk7XG4gIH07XG5cbiAgc2F2ZS5hcHBseSA9IGFwcGx5ID0gZnVuY3Rpb24oZiwgYSkge1xuICAgIHJldHVybiBMX2FwcGx5KGx6KGYpKShseihhKSk7XG4gIH07XG5cbiAgc2F2ZS5sbGV0ID0gbGxldCA9IGZ1bmN0aW9uKG4sIHYsIGIpIHtcbiAgICByZXR1cm4gTF9sZXQobHoobikpKGx6KHYpKShseihiKSk7XG4gIH07XG5cbiAgc2F2ZS5hbm5vID0gYW5ubyA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEsIGJvZHkpIHtcbiAgICByZXR1cm4gTF9hbm5vKGx6KG5hbWUpKShseihkYXRhKSkobHooYm9keSkpO1xuICB9O1xuXG4gIHNhdmUuY29ucyA9IGNvbnM7XG5cbiAgZ2V0TGl0VmFsID0gZnVuY3Rpb24obHQpIHtcbiAgICByZXR1cm4gbHQobHooZnVuY3Rpb24odikge1xuICAgICAgcmV0dXJuIHJ6KHYpO1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRSZWZOYW1lID0gZnVuY3Rpb24ocmYpIHtcbiAgICByZXR1cm4gcmYobHooZnVuY3Rpb24odikge1xuICAgICAgcmV0dXJuIHJ6KHYpO1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRMYW1iZGFWYXIgPSBmdW5jdGlvbihsYW0pIHtcbiAgICByZXR1cm4gbGFtKGx6KGZ1bmN0aW9uKHYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiByeih2KTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGdldExhbWJkYUJvZHkgPSBmdW5jdGlvbihsYW0pIHtcbiAgICByZXR1cm4gbGFtKGx6KGZ1bmN0aW9uKHYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiByeihiKTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGdldEFwcGx5RnVuYyA9IGZ1bmN0aW9uKGFwbCkge1xuICAgIHJldHVybiBhcGwobHooZnVuY3Rpb24oYSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHJ6KGEpO1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgZ2V0QXBwbHlBcmcgPSBmdW5jdGlvbihhcGwpIHtcbiAgICByZXR1cm4gYXBsKGx6KGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiByeihiKTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGdldExldE5hbWUgPSBmdW5jdGlvbihsdCkge1xuICAgIHJldHVybiBsdChseihmdW5jdGlvbihuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICAgIHJldHVybiByeihuKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGdldExldFZhbHVlID0gZnVuY3Rpb24obHQpIHtcbiAgICByZXR1cm4gbHQobHooZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICByZXR1cm4gcnoodik7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRMZXRCb2R5ID0gZnVuY3Rpb24obHQpIHtcbiAgICByZXR1cm4gbHQobHooZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICByZXR1cm4gcnooYik7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBnZXRBbm5vTmFtZSA9IGZ1bmN0aW9uKGFubm8pIHtcbiAgICByZXR1cm4gYW5ubyhseihmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYm9keSkge1xuICAgICAgICAgIHJldHVybiByeihuYW1lKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIGdldEFubm9EYXRhID0gZnVuY3Rpb24oYW5ubykge1xuICAgIHJldHVybiBhbm5vKGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihib2R5KSB7XG4gICAgICAgICAgcmV0dXJuIHJ6KGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgZ2V0QW5ub0JvZHkgPSBmdW5jdGlvbihhbm5vKSB7XG4gICAgcmV0dXJuIGFubm8obHooZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgICAgICByZXR1cm4gcnooYm9keSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBqc29uMkFzdEVuY29kaW5ncyA9IHtcbiAgICBsaXQ6IGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIHJldHVybiBMX2xpdChseihqc29uLnZhbHVlKSk7XG4gICAgfSxcbiAgICByZWY6IGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIHJldHVybiBMX3JlZihseihqc29uLnZhck5hbWUpKTtcbiAgICB9LFxuICAgIGxhbWJkYTogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIExfbGFtYmRhKGx6KGpzb24udmFyTmFtZSkpKGx6KGpzb24yQXN0KGpzb24uYm9keSkpKTtcbiAgICB9LFxuICAgIGFwcGx5OiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9hcHBseShseihqc29uMkFzdChqc29uLmZ1bmMpKSkobHooanNvbjJBc3QoanNvbi5hcmcpKSk7XG4gICAgfSxcbiAgICBcImxldFwiOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9sZXQobHooanNvbi52YXJOYW1lKSkobHooanNvbjJBc3QoanNvbi52YWx1ZSkpKShseihqc29uMkFzdChqc29uLmJvZHkpKSk7XG4gICAgfSxcbiAgICBhbm5vOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9hbm5vKGx6KGpzb24ubmFtZSkpKGx6KGpzb24yQXN0KGpzb24uZGF0YSkpKShseihqc29uMkFzdChqc29uLmJvZHkpKSk7XG4gICAgfSxcbiAgICBjb25zOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gc2F2ZS5jb25zKGpzb24yQXN0KGpzb24uaGVhZCksIGpzb24yQXN0KGpzb24udGFpbCkpO1xuICAgIH0sXG4gICAgbmlsOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTmlsO1xuICAgIH1cbiAgfTtcblxuICBsaXQgPSBzYXZlLmxpdDtcblxuICByZWYgPSBzYXZlLnJlZjtcblxuICBsYW1iZGEgPSBzYXZlLmxhbWJkYTtcblxuICBhcHBseSA9IHNhdmUuYXBwbHk7XG5cbiAgbGxldCA9IHNhdmUubGxldDtcblxuICBhbm5vID0gc2F2ZS5hbm5vO1xuXG4gIGNvbnMgPSBzYXZlLmNvbnM7XG5cbiAganNvbjJBc3QgPSBmdW5jdGlvbihqc29uKSB7XG4gICAgaWYgKHR5cGVvZiBqc29uID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIGpzb24yQXN0RW5jb2RpbmdzW2pzb24uX3R5cGVdKGpzb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gIH07XG5cbiAgYXN0Mkpzb25FbmNvZGluZ3MgPSB7XG4gICAgTGVpc3VyZV9saXQ6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICdsaXQnLFxuICAgICAgICB2YWx1ZTogZ2V0TGl0VmFsKGFzdClcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX3JlZjogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ3JlZicsXG4gICAgICAgIHZhck5hbWU6IGdldFJlZk5hbWUoYXN0KVxuICAgICAgfTtcbiAgICB9LFxuICAgIExlaXN1cmVfbGFtYmRhOiBmdW5jdGlvbihhc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF90eXBlOiAnbGFtYmRhJyxcbiAgICAgICAgdmFyTmFtZTogZ2V0TGFtYmRhVmFyKGFzdCksXG4gICAgICAgIGJvZHk6IGFzdDJKc29uKGdldExhbWJkYUJvZHkoYXN0KSlcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX2FwcGx5OiBmdW5jdGlvbihhc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF90eXBlOiAnYXBwbHknLFxuICAgICAgICBmdW5jOiBhc3QySnNvbihnZXRBcHBseUZ1bmMoYXN0KSksXG4gICAgICAgIGFyZzogYXN0Mkpzb24oZ2V0QXBwbHlBcmcoYXN0KSlcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX2xldDogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2xldCcsXG4gICAgICAgIHZhck5hbWU6IGdldExldE5hbWUoYXN0KSxcbiAgICAgICAgdmFsdWU6IGFzdDJKc29uKGdldExldFZhbHVlKGFzdCkpLFxuICAgICAgICBib2R5OiBhc3QySnNvbihnZXRMZXRCb2R5KGFzdCkpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9hbm5vOiBmdW5jdGlvbihhc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF90eXBlOiAnYW5ubycsXG4gICAgICAgIG5hbWU6IGdldEFubm9OYW1lKGFzdCksXG4gICAgICAgIGRhdGE6IGFzdDJKc29uKGdldEFubm9EYXRhKGFzdCkpLFxuICAgICAgICBib2R5OiBhc3QySnNvbihnZXRBbm5vQm9keShhc3QpKVxuICAgICAgfTtcbiAgICB9LFxuICAgIExlaXN1cmVfY29uczogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2NvbnMnLFxuICAgICAgICBoZWFkOiBhc3QySnNvbihhc3QuaGVhZCgpKSxcbiAgICAgICAgdGFpbDogYXN0Mkpzb24oYXN0LnRhaWwoKSlcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX25pbDogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ25pbCdcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIGFzdDJKc29uID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIF9yZWY0O1xuXG4gICAgaWYgKGFzdDJKc29uRW5jb2RpbmdzWyhfcmVmNCA9IGFzdC5jb25zdHJ1Y3RvcikgIT0gbnVsbCA/IF9yZWY0Lm5hbWUgOiB2b2lkIDBdKSB7XG4gICAgICByZXR1cm4gYXN0Mkpzb25FbmNvZGluZ3NbYXN0LmNvbnN0cnVjdG9yLm5hbWVdKGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhc3Q7XG4gICAgfVxuICB9O1xuXG4gIGRlZmluZSgnanNvbjJBc3QnLCBseihmdW5jdGlvbihqc29uKSB7XG4gICAgcmV0dXJuIGpzb24yQXN0KEpTT04ucGFyc2UocnooanNvbikpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYXN0Mkpzb24nLCBseihmdW5jdGlvbihhc3QpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXN0Mkpzb24ocnooYXN0KSkpO1xuICB9KSk7XG5cbiAgY29uc0Zyb20gPSBmdW5jdGlvbihhcnJheSwgaSkge1xuICAgIGkgPSBpIHx8IDA7XG4gICAgaWYgKGkgPCBhcnJheS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjb25zKGFycmF5W2ldLCBjb25zRnJvbShhcnJheSwgaSArIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5pbDtcbiAgICB9XG4gIH07XG5cbiAgaGVhZCA9IGZ1bmN0aW9uKGwpIHtcbiAgICByZXR1cm4gbC5oZWFkKCk7XG4gIH07XG5cbiAgdGFpbCA9IGZ1bmN0aW9uKGwpIHtcbiAgICByZXR1cm4gbC50YWlsKCk7XG4gIH07XG5cbiAgcm9vdC5oZWFkID0gaGVhZDtcblxuICByb290LnRhaWwgPSB0YWlsO1xuXG4gIHJvb3QuY29uc0Zyb20gPSBjb25zRnJvbTtcblxuICByb290Lm5hbWVTdWIgPSBuYW1lU3ViO1xuXG4gIHJvb3Quc2V0RGF0YVR5cGUgPSBzZXREYXRhVHlwZTtcblxuICByb290LnNldFR5cGUgPSBzZXRUeXBlO1xuXG4gIHJvb3QubWtQcm90byA9IG1rUHJvdG87XG5cbiAgcm9vdC5OaWwgPSBOaWw7XG5cbiAgcm9vdC5jb25zID0gY29ucztcblxuICByb290LnByaW1Db25zID0gcHJpbUNvbnM7XG5cbiAgcm9vdC5kZWZpbmUgPSBkZWZpbmU7XG5cbiAgcm9vdC5nZXRUeXBlID0gZ2V0VHlwZTtcblxuICByb290LmdldERhdGFUeXBlID0gZ2V0RGF0YVR5cGU7XG5cbiAgcm9vdC5saXQgPSBsaXQ7XG5cbiAgcm9vdC5yZWYgPSByZWY7XG5cbiAgcm9vdC5sYW1iZGEgPSBsYW1iZGE7XG5cbiAgcm9vdC5hcHBseSA9IGFwcGx5O1xuXG4gIHJvb3QuYW5ubyA9IGFubm87XG5cbiAgcm9vdC5sbGV0ID0gbGxldDtcblxuICByb290LmdldFJlZk5hbWUgPSBnZXRSZWZOYW1lO1xuXG4gIHJvb3QuZ2V0TGl0VmFsID0gZ2V0TGl0VmFsO1xuXG4gIHJvb3QuZ2V0TGFtYmRhQm9keSA9IGdldExhbWJkYUJvZHk7XG5cbiAgcm9vdC5nZXRMYW1iZGFWYXIgPSBnZXRMYW1iZGFWYXI7XG5cbiAgcm9vdC5nZXRBcHBseUZ1bmMgPSBnZXRBcHBseUZ1bmM7XG5cbiAgcm9vdC5nZXRBcHBseUFyZyA9IGdldEFwcGx5QXJnO1xuXG4gIHJvb3QuZ2V0TGV0TmFtZSA9IGdldExldE5hbWU7XG5cbiAgcm9vdC5nZXRMZXRWYWx1ZSA9IGdldExldFZhbHVlO1xuXG4gIHJvb3QuZ2V0TGV0Qm9keSA9IGdldExldEJvZHk7XG5cbiAgcm9vdC5nZXRBbm5vTmFtZSA9IGdldEFubm9OYW1lO1xuXG4gIHJvb3QuZ2V0QW5ub0RhdGEgPSBnZXRBbm5vRGF0YTtcblxuICByb290LmdldEFubm9Cb2R5ID0gZ2V0QW5ub0JvZHk7XG5cbiAgcm9vdC50aHJvd0Vycm9yID0gdGhyb3dFcnJvcjtcblxuICByb290LmZvbGRMZWZ0ID0gZm9sZExlZnQ7XG5cbiAgcm9vdC5MZWlzdXJlT2JqZWN0ID0gTGVpc3VyZU9iamVjdDtcblxuICByb290LmV2YWxGdW5jID0gZXZhbEZ1bmM7XG5cbiAgcm9vdC5qc29uMkFzdCA9IGpzb24yQXN0O1xuXG4gIHJvb3QuYXN0Mkpzb24gPSBhc3QySnNvbjtcblxuICByb290LkxlaXN1cmVfbGl0ID0gTGVpc3VyZV9saXQ7XG5cbiAgcm9vdC5MZWlzdXJlX3JlZiA9IExlaXN1cmVfcmVmO1xuXG4gIHJvb3QuTGVpc3VyZV9sYW1iZGEgPSBMZWlzdXJlX2xhbWJkYTtcblxuICByb290LkxlaXN1cmVfYXBwbHkgPSBMZWlzdXJlX2FwcGx5O1xuXG4gIHJvb3QuTGVpc3VyZV9sZXQgPSBMZWlzdXJlX2xldDtcblxuICByb290LkxlaXN1cmVfYW5ubyA9IExlaXN1cmVfYW5ubztcblxuICByb290LmVuc3VyZUxlaXN1cmVDbGFzcyA9IGVuc3VyZUxlaXN1cmVDbGFzcztcblxuICByb290Lm1ha2VTdXBlciA9IG1ha2VTdXBlcjtcblxuICByb290LnN1cGVydHlwZXMgPSBzdXBlcnR5cGVzO1xuXG4gIHJvb3QuZnVuY3Rpb25JbmZvID0gZnVuY3Rpb25JbmZvO1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9YXN0Lm1hcFxuKi9cblxufSkoc2VsZikiLCIoZnVuY3Rpb24oZ2xvYmFsKXsvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4vKlxuQ29weXJpZ2h0IChDKSAyMDEzLCBCaWxsIEJ1cmRpY2ssIFRpbnkgQ29uY2VwdHM6IGh0dHBzOi8vZ2l0aHViLmNvbS96b3QvTGVpc3VyZVxuXG4obGljZW5zZWQgd2l0aCBaTElCIGxpY2Vuc2UpXG5cblRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG53YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbmFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG5cblBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuXG4xLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbmluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cblxuMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbm1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cblxuMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgU2ltcHlDb25zLCBkZWZhdWx0RW52LCByZWFkRGlyLCByZWFkRmlsZSwgcm9vdCwgc2ltcHlDb25zLCBzdGF0RmlsZSwgd3JpdGVGaWxlO1xuXG4gIHJvb3QgPSBtb2R1bGUuZXhwb3J0cztcblxuICBkZWZhdWx0RW52ID0ge1xuICAgIHByZXNlbnRWYWx1ZTogZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfSxcbiAgICB2YWx1ZXM6IHt9LFxuICAgIGVycm9ySGFuZGxlcnM6IFtdXG4gIH07XG5cbiAgZ2xvYmFsLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5tZW1vIHx8ICh2YWx1ZS5tZW1vID0gdmFsdWUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH07XG5cbiAgZ2xvYmFsLmxhenkgPSBmdW5jdGlvbihsKSB7XG4gICAgaWYgKHR5cGVvZiBsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBsO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGw7XG4gICAgfVxuICB9O1xuXG4gIHJlYWRGaWxlID0gZnVuY3Rpb24oZmlsZU5hbWUsIGNvbnQpIHtcbiAgICByZXR1cm4gZGVmYXVsdEVudi5yZWFkRmlsZShmaWxlTmFtZSwgY29udCk7XG4gIH07XG5cbiAgd3JpdGVGaWxlID0gZnVuY3Rpb24oZmlsZU5hbWUsIGRhdGEsIGNvbnQpIHtcbiAgICByZXR1cm4gZGVmYXVsdEVudi53cml0ZUZpbGUoZmlsZU5hbWUsIGRhdGEsIGNvbnQpO1xuICB9O1xuXG4gIHJlYWREaXIgPSBmdW5jdGlvbihmaWxlTmFtZSwgY29udCkge1xuICAgIHJldHVybiBkZWZhdWx0RW52LnJlYWREaXIoZmlsZU5hbWUsIGNvbnQpO1xuICB9O1xuXG4gIHN0YXRGaWxlID0gZnVuY3Rpb24oZmlsZU5hbWUsIGNvbnQpIHtcbiAgICByZXR1cm4gZGVmYXVsdEVudi5zdGF0RmlsZShmaWxlTmFtZSwgY29udCk7XG4gIH07XG5cbiAgU2ltcHlDb25zID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFNpbXB5Q29ucyhoZWFkLCB0YWlsKSB7XG4gICAgICB0aGlzLmhlYWQgPSBoZWFkO1xuICAgICAgdGhpcy50YWlsID0gdGFpbDtcbiAgICB9XG5cbiAgICBTaW1weUNvbnMucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcnJheSwgaDtcblxuICAgICAgaCA9IHRoaXM7XG4gICAgICBhcnJheSA9IFtdO1xuICAgICAgd2hpbGUgKGggIT09IG51bGwpIHtcbiAgICAgICAgYXJyYXkucHVzaChoLmhlYWQpO1xuICAgICAgICBoID0gaC50YWlsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG5cbiAgICByZXR1cm4gU2ltcHlDb25zO1xuXG4gIH0pKCk7XG5cbiAgc2ltcHlDb25zID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBuZXcgU2ltcHlDb25zKGEsIGIpO1xuICB9O1xuXG4gIHJvb3QuZGVmYXVsdEVudiA9IGRlZmF1bHRFbnY7XG5cbiAgcm9vdC5yZWFkRmlsZSA9IHJlYWRGaWxlO1xuXG4gIHJvb3QucmVhZERpciA9IHJlYWREaXI7XG5cbiAgcm9vdC53cml0ZUZpbGUgPSB3cml0ZUZpbGU7XG5cbiAgcm9vdC5zdGF0RmlsZSA9IHN0YXRGaWxlO1xuXG4gIHJvb3QuU2ltcHlDb25zID0gU2ltcHlDb25zO1xuXG4gIHJvb3Quc2ltcHlDb25zID0gc2ltcHlDb25zO1xuXG4gIHJvb3QucmVzb2x2ZSA9IGdsb2JhbC5yZXNvbHZlO1xuXG4gIHJvb3QubGF6eSA9IGdsb2JhbC5sYXp5O1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5tYXBcbiovXG5cbn0pKHNlbGYpIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuKGZ1bmN0aW9uKCkge1xuICB2YXIgTGVpc3VyZSwgZXhwb3J0cywgaywgbmIsIHYsIF9yZWY7XG5cbiAgd2luZG93Lm1hcmtlZCA9IHJlcXVpcmUoJy4vbWFya2VkJyk7XG5cbiAgTGVpc3VyZSA9IGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vYmFzZScpO1xuXG4gIHJlcXVpcmUoJy4vYXN0Jyk7XG5cbiAgcmVxdWlyZSgnLi9nZW4nKTtcblxuICByZXF1aXJlKCcuL3J1bnRpbWUnKTtcblxuICByZXF1aXJlKCcuL2dlbmVyYXRlZFByZWx1ZGUnKTtcblxuICByZXF1aXJlKCcuL3N0ZCcpO1xuXG4gIHJlcXVpcmUoJy4vbWQnKTtcblxuICB3aW5kb3cuTm90ZWJvb2sgPSBuYiA9IHJlcXVpcmUoJy4vbm90ZWJvb2snKTtcblxuICBfcmVmID0gd2luZG93LkxlaXN1cmU7XG4gIGZvciAoayBpbiBfcmVmKSB7XG4gICAgdiA9IF9yZWZba107XG4gICAgTGVpc3VyZVtrXSA9IHY7XG4gIH1cblxuICB3aW5kb3cuTGVpc3VyZSA9IExlaXN1cmU7XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1icm93c2VyTWFpbi5tYXBcbiovXG4iLCIoZnVuY3Rpb24oZ2xvYmFsKXsvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4vKlxuQ29weXJpZ2h0IChDKSAyMDEzLCBCaWxsIEJ1cmRpY2ssIFRpbnkgQ29uY2VwdHM6IGh0dHBzOi8vZ2l0aHViLmNvbS96b3QvTGVpc3VyZVxuXG4obGljZW5zZWQgd2l0aCBaTElCIGxpY2Vuc2UpXG5cblRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG53YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbmFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG5cblBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuXG4xLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbmluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cblxuMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbm1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cblxuMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgTGVpc3VyZV9hbm5vLCBMZWlzdXJlX2FwcGx5LCBMZWlzdXJlX2xhbWJkYSwgTGVpc3VyZV9sZXQsIExlaXN1cmVfbGl0LCBMZWlzdXJlX3JlZiwgTmlsLCBhZGRMYW1iZGFQcm9wZXJ0aWVzLCBhZGRVbmlxLCBhcnJheWlmeSwgYXNzb2NMaXN0UHJvcHMsIGNvbnMsIGNvbnNGcm9tLCBjdXJyeSwgZGVmaW5lLCBkdW1wQW5ubywgZ2VuLCBnZW5BcHBseUFyZywgZ2VuTGFtYmRhLCBnZW5MZXRzLCBnZW5VbmlxLCBnZXRBbm5vQm9keSwgZ2V0QW5ub0RhdGEsIGdldEFubm9OYW1lLCBnZXRBcHBseUFyZywgZ2V0QXBwbHlGdW5jLCBnZXRBc3NvY0xpc3RQcm9wcywgZ2V0TGFtYmRhQm9keSwgZ2V0TGFtYmRhUHJvcGVydGllcywgZ2V0TGFtYmRhVmFyLCBnZXRMYXN0TGV0Qm9keSwgZ2V0TGV0Qm9keSwgZ2V0TGV0TmFtZSwgZ2V0TGV0VmFsdWUsIGdldExpdFZhbCwgZ2V0UmVmTmFtZSwgbGFjb25zLCBsYXp5LCBsY29ucywgbGNvbnNGcm9tLCBsZWZ0LCBsZXRMaXN0LCBseiwgbWFrZVN5bmNNb25hZCwgbWVtb2l6ZSwgbmFtZVN1YiwgcmVzb2x2ZSwgcmlnaHQsIHJvb3QsIHJ1bk1vbmFkLCByeiwgc2V0RGF0YVR5cGUsIHNldFR5cGUsIHNpbXB5Q29ucywgc3BlY2lhbEFubm90YXRpb25zLCB1bmlxTmFtZSwgdmFyTmFtZVN1YiwgXywgX2ZhbHNlLCBfcmVmLCBfcmVmMSwgX3JlZjI7XG5cbiAgX3JlZiA9IHJlcXVpcmUoJy4vYmFzZScpLCBzaW1weUNvbnMgPSBfcmVmLnNpbXB5Q29ucywgcmVzb2x2ZSA9IF9yZWYucmVzb2x2ZSwgbGF6eSA9IF9yZWYubGF6eTtcblxuICByeiA9IHJlc29sdmU7XG5cbiAgbHogPSBsYXp5O1xuXG4gIF9yZWYxID0gcm9vdCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9hc3QnKSwgbmFtZVN1YiA9IF9yZWYxLm5hbWVTdWIsIGdldExpdFZhbCA9IF9yZWYxLmdldExpdFZhbCwgZ2V0UmVmTmFtZSA9IF9yZWYxLmdldFJlZk5hbWUsIGdldExhbWJkYVZhciA9IF9yZWYxLmdldExhbWJkYVZhciwgZ2V0TGFtYmRhQm9keSA9IF9yZWYxLmdldExhbWJkYUJvZHksIGdldEFwcGx5RnVuYyA9IF9yZWYxLmdldEFwcGx5RnVuYywgZ2V0QXBwbHlBcmcgPSBfcmVmMS5nZXRBcHBseUFyZywgZ2V0QW5ub05hbWUgPSBfcmVmMS5nZXRBbm5vTmFtZSwgZ2V0QW5ub0RhdGEgPSBfcmVmMS5nZXRBbm5vRGF0YSwgZ2V0QW5ub0JvZHkgPSBfcmVmMS5nZXRBbm5vQm9keSwgZ2V0TGV0TmFtZSA9IF9yZWYxLmdldExldE5hbWUsIGdldExldFZhbHVlID0gX3JlZjEuZ2V0TGV0VmFsdWUsIGdldExldEJvZHkgPSBfcmVmMS5nZXRMZXRCb2R5LCBMZWlzdXJlX2xpdCA9IF9yZWYxLkxlaXN1cmVfbGl0LCBMZWlzdXJlX3JlZiA9IF9yZWYxLkxlaXN1cmVfcmVmLCBMZWlzdXJlX2xhbWJkYSA9IF9yZWYxLkxlaXN1cmVfbGFtYmRhLCBMZWlzdXJlX2FwcGx5ID0gX3JlZjEuTGVpc3VyZV9hcHBseSwgTGVpc3VyZV9sZXQgPSBfcmVmMS5MZWlzdXJlX2xldCwgTGVpc3VyZV9hbm5vID0gX3JlZjEuTGVpc3VyZV9hbm5vLCBzZXRUeXBlID0gX3JlZjEuc2V0VHlwZSwgc2V0RGF0YVR5cGUgPSBfcmVmMS5zZXREYXRhVHlwZSwgY29ucyA9IF9yZWYxLmNvbnMsIE5pbCA9IF9yZWYxLk5pbCwgY29uc0Zyb20gPSBfcmVmMS5jb25zRnJvbSwgZGVmaW5lID0gX3JlZjEuZGVmaW5lO1xuXG4gIF9yZWYyID0gcmVxdWlyZSgnLi9ydW50aW1lJyksIG1ha2VTeW5jTW9uYWQgPSBfcmVmMi5tYWtlU3luY01vbmFkLCBydW5Nb25hZCA9IF9yZWYyLnJ1bk1vbmFkLCBfZmFsc2UgPSBfcmVmMi5fZmFsc2UsIGxlZnQgPSBfcmVmMi5sZWZ0LCByaWdodCA9IF9yZWYyLnJpZ2h0O1xuXG4gIF8gPSByZXF1aXJlKCcuL2xvZGFzaC5taW4nKTtcblxuICB2YXJOYW1lU3ViID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBcIkxfXCIgKyAobmFtZVN1YihuKSk7XG4gIH07XG5cbiAgZ2VuID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgcmV0dXJuIGdlblVuaXEoYXN0LCBOaWwsIFtOaWwsIDBdKTtcbiAgfTtcblxuICBnZW5VbmlxID0gZnVuY3Rpb24oYXN0LCBuYW1lcywgdW5pcSkge1xuICAgIHZhciBhcml0eSwgZGF0YSwgZnVuY05hbWUsIGdlbm5lZCwgbmFtZSwgc3JjLCBfcmVmMztcblxuICAgIHN3aXRjaCAoYXN0LmNvbnN0cnVjdG9yKSB7XG4gICAgICBjYXNlIExlaXN1cmVfbGl0OlxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZ2V0TGl0VmFsKGFzdCkpO1xuICAgICAgY2FzZSBMZWlzdXJlX3JlZjpcbiAgICAgICAgcmV0dXJuIFwicmVzb2x2ZShcIiArICh1bmlxTmFtZShnZXRSZWZOYW1lKGFzdCksIHVuaXEpKSArIFwiKVwiO1xuICAgICAgY2FzZSBMZWlzdXJlX2xhbWJkYTpcbiAgICAgICAgcmV0dXJuIGdlbkxhbWJkYShhc3QsIG5hbWVzLCB1bmlxLCAwKTtcbiAgICAgIGNhc2UgTGVpc3VyZV9hcHBseTpcbiAgICAgICAgcmV0dXJuIFwiXCIgKyAoZ2VuVW5pcShnZXRBcHBseUZ1bmMoYXN0KSwgbmFtZXMsIHVuaXEpKSArIFwiKFwiICsgKGdlbkFwcGx5QXJnKGdldEFwcGx5QXJnKGFzdCksIG5hbWVzLCB1bmlxKSkgKyBcIilcIjtcbiAgICAgIGNhc2UgTGVpc3VyZV9sZXQ6XG4gICAgICAgIHJldHVybiBcIihmdW5jdGlvbigpe1xcblwiICsgKGdlbkxldHMoYXN0LCBuYW1lcywgdW5pcSkpICsgXCJ9KSgpXCI7XG4gICAgICBjYXNlIExlaXN1cmVfYW5ubzpcbiAgICAgICAgbmFtZSA9IGdldEFubm9OYW1lKGFzdCk7XG4gICAgICAgIGRhdGEgPSBnZXRBbm5vRGF0YShhc3QpO1xuICAgICAgICBnZW5uZWQgPSBnZW5VbmlxKGdldEFubm9Cb2R5KGFzdCksIG5hbWVzLCB1bmlxKTtcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICByZXR1cm4gXCJzZXRUeXBlKFwiICsgZ2VubmVkICsgXCIsICdcIiArIGRhdGEgKyBcIicpXCI7XG4gICAgICAgICAgY2FzZSAnZGF0YVR5cGUnOlxuICAgICAgICAgICAgcmV0dXJuIFwic2V0RGF0YVR5cGUoXCIgKyBnZW5uZWQgKyBcIiwgJ1wiICsgZGF0YSArIFwiJylcIjtcbiAgICAgICAgICBjYXNlICdkZWZpbmUnOlxuICAgICAgICAgICAgX3JlZjMgPSBkYXRhLnRvQXJyYXkoKSwgZnVuY05hbWUgPSBfcmVmM1swXSwgYXJpdHkgPSBfcmVmM1sxXSwgc3JjID0gX3JlZjNbMl07XG4gICAgICAgICAgICByZXR1cm4gXCJkZWZpbmUoJ1wiICsgZnVuY05hbWUgKyBcIicsIChmdW5jdGlvbigpe3JldHVybiBcIiArIGdlbm5lZCArIFwifSksIFwiICsgYXJpdHkgKyBcIiwgXCIgKyAoSlNPTi5zdHJpbmdpZnkoc3JjKSkgKyBcIilcIjtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGdlbm5lZDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkRVUj8gXCIgKyBhc3QgKyBcIiwgXCIgKyBhc3QuY29uc3RydWN0b3IgKyBcIiBcIiArIExlaXN1cmVfbGFtYmRhO1xuICAgIH1cbiAgfTtcblxuICBnZW5MYW1iZGEgPSBmdW5jdGlvbihhc3QsIG5hbWVzLCB1bmlxLCBjb3VudCkge1xuICAgIHZhciBuLCBuYW1lLCB1O1xuXG4gICAgbmFtZSA9IGdldExhbWJkYVZhcihhc3QpO1xuICAgIHUgPSBhZGRVbmlxKG5hbWUsIG5hbWVzLCB1bmlxKTtcbiAgICBuID0gY29ucyhuYW1lLCBuYW1lcyk7XG4gICAgcmV0dXJuIGFkZExhbWJkYVByb3BlcnRpZXMoYXN0LCBcImZ1bmN0aW9uKFwiICsgKHVuaXFOYW1lKG5hbWUsIHUpKSArIFwiKXtyZXR1cm4gXCIgKyAoZ2VuVW5pcShnZXRMYW1iZGFCb2R5KGFzdCksIG4sIHUpKSArIFwifVwiKTtcbiAgfTtcblxuICBzcGVjaWFsQW5ub3RhdGlvbnMgPSBbJ3R5cGUnLCAnZGF0YVR5cGUnLCAnZGVmaW5lJ107XG5cbiAgYXJyYXlpZnkgPSBmdW5jdGlvbihjb25zKSB7XG4gICAgaWYgKGNvbnMgaW5zdGFuY2VvZiBMZWlzdXJlX2NvbnMpIHtcbiAgICAgIHJldHVybiBjb25zLm1hcChmdW5jdGlvbihlbCkge1xuICAgICAgICByZXR1cm4gYXJyYXlpZnkoZWwpO1xuICAgICAgfSkudG9BcnJheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29ucztcbiAgICB9XG4gIH07XG5cbiAgZ2V0TGFtYmRhUHJvcGVydGllcyA9IGZ1bmN0aW9uKGJvZHksIHByb3BzKSB7XG4gICAgdmFyIHZhbHVlO1xuXG4gICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBMZWlzdXJlX2Fubm8pIHtcbiAgICAgIGlmICghXy5jb250YWlucyhzcGVjaWFsQW5ub3RhdGlvbnMsIGdldEFubm9OYW1lKGJvZHkpKSkge1xuICAgICAgICBpZiAoIXByb3BzKSB7XG4gICAgICAgICAgcHJvcHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IGdldEFubm9EYXRhKGJvZHkpO1xuICAgICAgICBwcm9wc1tnZXRBbm5vTmFtZShib2R5KV0gPSBhcnJheWlmeSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBnZXRMYW1iZGFQcm9wZXJ0aWVzKGdldEFubm9Cb2R5KGJvZHkpLCBwcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9wcztcbiAgfTtcblxuICBhZGRMYW1iZGFQcm9wZXJ0aWVzID0gZnVuY3Rpb24oYXN0LCBkZWYpIHtcbiAgICB2YXIgcHJvcHM7XG5cbiAgICBwcm9wcyA9IGdldExhbWJkYVByb3BlcnRpZXMoZ2V0TGFtYmRhQm9keShhc3QpKTtcbiAgICBpZiAocHJvcHMpIHtcbiAgICAgIHJldHVybiBcInNldExhbWJkYVByb3BlcnRpZXMoXCIgKyBkZWYgKyBcIiwgXCIgKyAoSlNPTi5zdHJpbmdpZnkocHJvcHMpKSArIFwiKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVmO1xuICAgIH1cbiAgfTtcblxuICBsY29ucyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gcnooTF9jb25zKShseihhKSkobHooYikpO1xuICB9O1xuXG4gIGxjb25zRnJvbSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGVsLCBwLCBfaSwgX2xlbiwgX3JlZjM7XG5cbiAgICBpZiAoYXJyYXkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgcCA9IHJ6KExfbmlsKTtcbiAgICAgIF9yZWYzID0gYXJyYXkucmV2ZXJzZSgpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBlbCA9IF9yZWYzW19pXTtcbiAgICAgICAgcCA9IGxjb25zKGxjb25zRnJvbShlbCksIHApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG4gIH07XG5cbiAgYXNzb2NMaXN0UHJvcHMgPSBudWxsO1xuXG4gIGdldEFzc29jTGlzdFByb3BzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFhc3NvY0xpc3RQcm9wcykge1xuICAgICAgYXNzb2NMaXN0UHJvcHMgPSBsY29ucyhsY29ucygnYXNzb2MnLCAndHJ1ZScpLCByeihMX25pbCkpO1xuICAgICAgYXNzb2NMaXN0UHJvcHMucHJvcGVydGllcyA9IGFzc29jTGlzdFByb3BzO1xuICAgIH1cbiAgICByZXR1cm4gYXNzb2NMaXN0UHJvcHM7XG4gIH07XG5cbiAgbGFjb25zID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgbGlzdCkge1xuICAgIHZhciBhbGlzdDtcblxuICAgIGFsaXN0ID0gbGNvbnMobGNvbnMoa2V5LCB2YWx1ZSksIGxpc3QpO1xuICAgIGFsaXN0LnByb3BlcnRpZXMgPSBnZXRBc3NvY0xpc3RQcm9wcygpO1xuICAgIHJldHVybiBhbGlzdDtcbiAgfTtcblxuICBnbG9iYWwuc2V0TGFtYmRhUHJvcGVydGllcyA9IGZ1bmN0aW9uKGRlZiwgcHJvcHMpIHtcbiAgICB2YXIgaywgcCwgdjtcblxuICAgIHAgPSByeihMX25pbCk7XG4gICAgZm9yIChrIGluIHByb3BzKSB7XG4gICAgICB2ID0gcHJvcHNba107XG4gICAgICBwID0gbGFjb25zKGssIGxjb25zRnJvbSh2KSwgcCk7XG4gICAgfVxuICAgIGRlZi5wcm9wZXJ0aWVzID0gcDtcbiAgICByZXR1cm4gZGVmO1xuICB9O1xuXG4gIG1lbW9pemUgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgcmV0dXJuIFwiKGZ1bmN0aW9uKCl7cmV0dXJuIFwiICsgZnVuYyArIFwifSlcIjtcbiAgfTtcblxuICBkdW1wQW5ubyA9IGZ1bmN0aW9uKGFzdCkge1xuICAgIGlmIChhc3QgaW5zdGFuY2VvZiBMZWlzdXJlX2Fubm8pIHtcbiAgICAgIHJldHVybiBkdW1wQW5ubyhnZXRBbm5vQm9keShhc3QpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFzdDtcbiAgICB9XG4gIH07XG5cbiAgZ2VuQXBwbHlBcmcgPSBmdW5jdGlvbihhcmcsIG5hbWVzLCB1bmlxKSB7XG4gICAgaWYgKGR1bXBBbm5vKGFyZykgaW5zdGFuY2VvZiBMZWlzdXJlX2FwcGx5KSB7XG4gICAgICByZXR1cm4gbWVtb2l6ZShnZW5VbmlxKGFyZywgbmFtZXMsIHVuaXEpKTtcbiAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIExlaXN1cmVfcmVmKSB7XG4gICAgICByZXR1cm4gdW5pcU5hbWUoZ2V0UmVmTmFtZShhcmcpLCB1bmlxKTtcbiAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIExlaXN1cmVfbGl0KSB7XG4gICAgICByZXR1cm4gXCJsYXp5KFwiICsgKEpTT04uc3RyaW5naWZ5KGdldExpdFZhbChhcmcpKSkgKyBcIilcIjtcbiAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIExlaXN1cmVfbGV0KSB7XG4gICAgICByZXR1cm4gXCJmdW5jdGlvbigpe1wiICsgKGdlbkxldHMoYXJnLCBuYW1lcywgdW5pcSkpICsgXCJ9XCI7XG4gICAgfSBlbHNlIGlmIChkdW1wQW5ubyhhcmcpIGluc3RhbmNlb2YgTGVpc3VyZV9sYW1iZGEpIHtcbiAgICAgIHJldHVybiBtZW1vaXplKGdlblVuaXEoYXJnLCBuYW1lcywgdW5pcSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJmdW5jdGlvbigpe3JldHVybiBcIiArIChnZW5VbmlxKGFyZywgbmFtZXMsIHVuaXEpKSArIFwifVwiO1xuICAgIH1cbiAgfTtcblxuICBnZW5MZXRzID0gZnVuY3Rpb24oYXN0LCBuYW1lcywgdW5pcSkge1xuICAgIHZhciBhc3NpZ25zLCBkZWNzLCBfcmVmMztcblxuICAgIF9yZWYzID0gXy5mb2xkbChsZXRMaXN0KGFzdCwgW10pLCAoZnVuY3Rpb24ocmVzdWx0LCBsKSB7XG4gICAgICB2YXIgY29kZSwgbGV0TmFtZSwgbGV0TmFtZXMsIG4sIG5ld1UsIHU7XG5cbiAgICAgIG4gPSByZXN1bHRbMF0sIHUgPSByZXN1bHRbMV0sIGxldE5hbWVzID0gcmVzdWx0WzJdLCBjb2RlID0gcmVzdWx0WzNdO1xuICAgICAgbmV3VSA9IGFkZFVuaXEoZ2V0TGV0TmFtZShsKSwgbiwgdSk7XG4gICAgICBsZXROYW1lID0gdW5pcU5hbWUoZ2V0TGV0TmFtZShsKSwgbmV3VSk7XG4gICAgICByZXR1cm4gW2NvbnMoZ2V0TGV0TmFtZShsKSwgbiksIG5ld1UsIGNvbnMobGV0TmFtZSwgbGV0TmFtZXMpLCBjb25zKCdcXG4nICsgbGV0TmFtZSArICcgPSAnICsgZ2VuQXBwbHlBcmcoZ2V0TGV0VmFsdWUobCksIG4sIHUpLCBjb2RlKV07XG4gICAgfSksIFtuYW1lcywgdW5pcSwgTmlsLCBOaWxdKSwgbmFtZXMgPSBfcmVmM1swXSwgdW5pcSA9IF9yZWYzWzFdLCBkZWNzID0gX3JlZjNbMl0sIGFzc2lnbnMgPSBfcmVmM1szXTtcbiAgICByZXR1cm4gXCJcXG52YXIgXCIgKyAoZGVjcy5qb2luKCcsICcpKSArIFwiO1xcblwiICsgKGFzc2lnbnMuam9pbignO1xcbicpKSArIFwiO1xcbnJldHVybiBcIiArIChnZW5VbmlxKGdldExhc3RMZXRCb2R5KGFzdCksIG5hbWVzLCB1bmlxKSk7XG4gIH07XG5cbiAgYWRkVW5pcSA9IGZ1bmN0aW9uKG5hbWUsIG5hbWVzLCB1bmlxKSB7XG4gICAgdmFyIG51bSwgb3ZlcnJpZGVzO1xuXG4gICAgaWYgKChuYW1lcy5maW5kKGZ1bmN0aW9uKGVsKSB7XG4gICAgICByZXR1cm4gZWwgPT09IG5hbWU7XG4gICAgfSkpICE9PSBOaWwpIHtcbiAgICAgIG92ZXJyaWRlcyA9IHVuaXFbMF0sIG51bSA9IHVuaXFbMV07XG4gICAgICByZXR1cm4gW2NvbnMoY29ucyhuYW1lLCBcIlwiICsgbmFtZSArIFwiX1wiICsgbnVtKSwgb3ZlcnJpZGVzKSwgbnVtICsgMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmlxO1xuICAgIH1cbiAgfTtcblxuICB1bmlxTmFtZSA9IGZ1bmN0aW9uKG5hbWUsIHVuaXEpIHtcbiAgICB2YXIga3Y7XG5cbiAgICB1bmlxID0gdW5pcVswXTtcbiAgICBrdiA9IHVuaXEuZmluZCgoZnVuY3Rpb24oZWwpIHtcbiAgICAgIHJldHVybiBlbC5oZWFkKCkgPT09IG5hbWU7XG4gICAgfSksIHVuaXEpO1xuICAgIHJldHVybiB2YXJOYW1lU3ViKChrdiAhPT0gTmlsID8ga3YudGFpbCgpIDogbmFtZSkpO1xuICB9O1xuXG4gIGxldExpc3QgPSBmdW5jdGlvbihhc3QsIGJ1Zikge1xuICAgIGlmIChhc3QgaW5zdGFuY2VvZiBMZWlzdXJlX2xldCkge1xuICAgICAgYnVmLnB1c2goYXN0KTtcbiAgICAgIHJldHVybiBsZXRMaXN0KGdldExldEJvZHkoYXN0KSwgYnVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9XG4gIH07XG5cbiAgZ2V0TGFzdExldEJvZHkgPSBmdW5jdGlvbihhc3QpIHtcbiAgICBpZiAoYXN0IGluc3RhbmNlb2YgTGVpc3VyZV9sZXQpIHtcbiAgICAgIHJldHVybiBnZXRMYXN0TGV0Qm9keShnZXRMZXRCb2R5KGFzdCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXN0O1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ3J1bkFzdCcsIGx6KGZ1bmN0aW9uKGFzdCkge1xuICAgIHZhciBlcnI7XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGV2YWwoXCIoXCIgKyAoZ2VuKHJ6KGFzdCkpKSArIFwiKVwiKTtcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgIHJldHVybiByeihMX3BhcnNlRXJyKShseihcIlxcblxcblBhcnNlIGVycm9yOiBcIiArIGVyci50b1N0cmluZygpICsgXCJcXG5BU1Q6IFwiKSkoYXN0KTtcbiAgICB9XG4gIH0pKTtcblxuICBjdXJyeSA9IGZ1bmN0aW9uKGZ1bmMsIGFyZ3MsIHBvcykge1xuICAgIGlmIChwb3MgPT09IGZ1bmMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseShudWxsLCBhcmdzLnRvQXJyYXkoZnVuYy5sZW5ndGggLSAxLCBbXSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiBjdXJyeShmdW5jLCBzaW1weUNvbnMoYXJnLCBhcmdzKSwgcG9zICsgMSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICByb290LmdlbiA9IGdlbjtcblxuICByb290LmN1cnJ5ID0gY3Vycnk7XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1nZW4ubWFwXG4qL1xuXG59KShzZWxmKSIsIkxfcnVuTW9uYWRzKFtcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRydWVcIikpKGxhenkoMCkpKGxhenkoXCJ0cnVlID0gXFxcXGEgYiAuIGFcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShzZXRUeXBlKGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9hKX19LCAndHJ1ZScpLCAndHJ1ZScpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZhbHNlXCIpKShsYXp5KDApKShsYXp5KFwiZmFsc2UgPSBcXFxcYSBiIC4gYlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKHNldFR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMX2IpfX0sICdmYWxzZScpLCAnZmFsc2UnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJub3RcIikpKGxhenkoMSkpKGxhenkoXCJub3QgYiA9IGIgZmFsc2UgdHJ1ZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9iKShMX2ZhbHNlKShMX3RydWUpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhbmRcIikpKGxhenkoMikpKGxhenkoXCJhbmQgYSBiID0gYSBiIGZhbHNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMX2EpKExfYikoTF9mYWxzZSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJvclwiKSkobGF6eSgyKSkobGF6eShcIm9yIGEgYiA9IGEgdHJ1ZSBiXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMX2EpKExfdHJ1ZSkoTF9iKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNvbWVcIikpKGxhenkoMSkpKGxhenkoXCJzb21lIHggPSBcXFxcc29tZUNhc2Ugbm9uZUNhc2UgLiBzb21lQ2FzZSB4XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF94KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3NvbWVDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9ub25lQ2FzZSl7cmV0dXJuIHJlc29sdmUoTF9zb21lQ2FzZSkoTF94KX19LCAnc29tZScpfSwgJ3NvbWUnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzb21lMlwiKSkobGF6eSgyKSkobGF6eShcInNvbWUyIGEgYiA9IFxcXFxzb21lQ2FzZSBub25lQ2FzZSAuIHNvbWVDYXNlIGEgYlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9zb21lQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfbm9uZUNhc2Upe3JldHVybiByZXNvbHZlKExfc29tZUNhc2UpKExfYSkoTF9iKX19LCAnc29tZTInKX19LCAnc29tZTInKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJub25lXCIpKShsYXp5KDApKShsYXp5KFwibm9uZSA9IFxcXFxzb21lQ2FzZSBub25lQ2FzZSAuIG5vbmVDYXNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoc2V0VHlwZShmdW5jdGlvbihMX3NvbWVDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9ub25lQ2FzZSl7cmV0dXJuIHJlc29sdmUoTF9ub25lQ2FzZSl9fSwgJ25vbmUnKSwgJ25vbmUnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc05vbmVcIikpKGxhenkoMSkpKGxhenkoXCJpc05vbmUgb2JqID0gaGFzVHlwZSBvYmogbm9uZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfb2JqKShMX25vbmUpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc1NvbWVcIikpKGxhenkoMSkpKGxhenkoXCJpc1NvbWUgb2JqID0gaGFzVHlwZSBvYmogc29tZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfb2JqKShMX3NvbWUpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc1NvbWUyXCIpKShsYXp5KDEpKShsYXp5KFwiaXNTb21lMiBvYmogPSBoYXNUeXBlIG9iaiBzb21lMlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfb2JqKShMX3NvbWUyKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibmVxXCIpKShsYXp5KDIpKShsYXp5KFwibmVxIGEgYiA9IG5vdCAoZXEgYSBiKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9ub3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKExfYSkoTF9iKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxlZnRcIikpKGxhenkoMSkpKGxhenkoXCJsZWZ0IHggPSBcXFxcbENhc2UgckNhc2UgLiBsQ2FzZSB4XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF94KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2xDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9yQ2FzZSl7cmV0dXJuIHJlc29sdmUoTF9sQ2FzZSkoTF94KX19LCAnbGVmdCcpfSwgJ2xlZnQnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyaWdodFwiKSkobGF6eSgxKSkobGF6eShcInJpZ2h0IHggPSBcXFxcbENhc2UgckNhc2UgLiByQ2FzZSB4XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF94KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2xDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9yQ2FzZSl7cmV0dXJuIHJlc29sdmUoTF9yQ2FzZSkoTF94KX19LCAncmlnaHQnKX0sICdyaWdodCcpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0ckFzY1wiKSkobGF6eSgxKSkobGF6eShcInN0ckFzYyBzdHJpbmcgPSBfc3RyQXNjIChhc3NlcnRUeXBlICdzdHJBc2Mgc3RyaW5nJyAnKnN0cmluZycgc3RyaW5nKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyaW5nKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJBc2MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0ckFzYyBzdHJpbmdcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cmluZyl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0ckNoclwiKSkobGF6eSgxKSkobGF6eShcInN0ckNociBhc2NpaSA9IF9zdHJDaHIgKGFzc2VydFR5cGUgJ3N0ckNociBzdHJpbmcnICcqbnVtYmVyJyBhc2NpaSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FzY2lpKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJDaHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0ckNociBzdHJpbmdcIikpKGxhenkoXCIqbnVtYmVyXCIpKShMX2FzY2lpKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3RyQXRcIikpKGxhenkoMikpKGxhenkoXCJzdHJBdCBzdHJpbmcgaW5kZXggPSBfc3RyQXRcXG4gIGFzc2VydFR5cGUgJ3N0ckF0IHN0cmluZycgJypzdHJpbmcnIHN0cmluZ1xcbiAgYXNzZXJ0VHlwZSAnc3RyQXQgaW5kZXgnICcqbnVtYmVyJyBpbmRleFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyaW5nKXtyZXR1cm4gZnVuY3Rpb24oTF9pbmRleCl7cmV0dXJuIHJlc29sdmUoTF9fc3RyQXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0ckF0IHN0cmluZ1wiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJBdCBpbmRleFwiKSkobGF6eShcIipudW1iZXJcIikpKExfaW5kZXgpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3RyU3RhcnRzV2l0aFwiKSkobGF6eSgyKSkobGF6eShcInN0clN0YXJ0c1dpdGggc3RyaW5nIHByZWZpeCA9IF9zdHJTdGFydHNXaXRoXFxuICBhc3NlcnRUeXBlICdzdHJTdGFydHNXaXRoIHN0cmluZycgJypzdHJpbmcnIHN0cmluZ1xcbiAgYXNzZXJ0VHlwZSAnc3RyU3RhcnRzV2l0aCBwcmVmaXgnICcqc3RyaW5nJyBwcmVmaXhcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cmluZyl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlZml4KXtyZXR1cm4gcmVzb2x2ZShMX19zdHJTdGFydHNXaXRoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJTdGFydHNXaXRoIHN0cmluZ1wiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJTdGFydHNXaXRoIHByZWZpeFwiKSkobGF6eShcIipzdHJpbmdcIikpKExfcHJlZml4KX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0ckxlblwiKSkobGF6eSgxKSkobGF6eShcInN0ckxlbiBzdHJpbmcgPSBfc3RyTGVuIChhc3NlcnRUeXBlICdzdHJMZW4gc3RyaW5nJyAnKnN0cmluZycgc3RyaW5nKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyaW5nKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJMZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0ckxlbiBzdHJpbmdcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cmluZyl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0clRvTG93ZXJDYXNlXCIpKShsYXp5KDEpKShsYXp5KFwic3RyVG9Mb3dlckNhc2Ugc3RyaW5nID0gX3N0clRvTG93ZXJDYXNlIChhc3NlcnRUeXBlICdzdHJUb0xvd2VyQ2FzZSBzdHJpbmcnICcqc3RyaW5nJyBzdHJpbmcpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHJpbmcpe3JldHVybiByZXNvbHZlKExfX3N0clRvTG93ZXJDYXNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJUb0xvd2VyQ2FzZSBzdHJpbmdcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cmluZyl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0clRvVXBwZXJDYXNlXCIpKShsYXp5KDEpKShsYXp5KFwic3RyVG9VcHBlckNhc2Ugc3RyaW5nID0gX3N0clRvVXBwZXJDYXNlIChhc3NlcnRUeXBlICdzdHJUb1VwcGVyQ2FzZSBzdHJpbmcnICcqc3RyaW5nJyBzdHJpbmcpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHJpbmcpe3JldHVybiByZXNvbHZlKExfX3N0clRvVXBwZXJDYXNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJUb1VwcGVyQ2FzZSBzdHJpbmdcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cmluZyl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0clJlcGxhY2VcIikpKGxhenkoMykpKGxhenkoXCJzdHJSZXBsYWNlIHN0cmluZyBwYXQgcmVwbCA9IF9zdHJSZXBsYWNlXFxuICBhc3NlcnRUeXBlICdzdHJSZXBsYWNlIHN0cmluZycgJypzdHJpbmcnIHN0cmluZ1xcbiAgYXNzZXJ0IChvciAoaGFzVHlwZSBwYXQgJypzdHJpbmcnKSAoaGFzVHlwZSBwYXQgJypSZWdFeHAnKSkgKHN0ckNhdCAoY29ucyAnc3RyU3RhcnRzV2l0aCBwYXQgc2hvdWxkIGJlIHR5cGUgc3RyaW5nIG9yIFJlZ0V4cCBidXQgaXQgaXMgdHlwZSAnIChjb25zIChnZXRUeXBlIHBhdCkgKGNvbnMgJzogJyAoY29ucyAoc2hvdyBwYXQpIG5pbCkpKSkpIHBhdFxcbiAgYXNzZXJ0VHlwZSAnc3RyUmVwbGFjZSByZXBsJyAnKnN0cmluZycgcmVwbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyaW5nKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX3JlcGwpe3JldHVybiByZXNvbHZlKExfX3N0clJlcGxhY2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0clJlcGxhY2Ugc3RyaW5nXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHJpbmcpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfcGF0KShsYXp5KFwiKnN0cmluZ1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3BhdCkobGF6eShcIipSZWdFeHBcIikpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzdHJTdGFydHNXaXRoIHBhdCBzaG91bGQgYmUgdHlwZSBzdHJpbmcgb3IgUmVnRXhwIGJ1dCBpdCBpcyB0eXBlIFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFR5cGUpKExfcGF0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI6IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Nob3cpKExfcGF0KX0pKShMX25pbCl9KSl9KSl9KSl9KSl9KSkoTF9wYXQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0clJlcGxhY2UgcmVwbFwiKSkobGF6eShcIipzdHJpbmdcIikpKExfcmVwbCl9KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3RyU3Vic3RyaW5nXCIpKShsYXp5KDMpKShsYXp5KFwic3RyU3Vic3RyaW5nIHN0ciBzdGFydCBlbmQgPSBfc3RyU3Vic3RyaW5nXFxuICBhc3NlcnRUeXBlICdzdHJTdWJzdHJpbmcgc3RyJyAnKnN0cmluZycgc3RyXFxuICBhc3NlcnRUeXBlICdzdHJTdWJzdHJpbmcgc3RhcnQnICcqbnVtYmVyJyBzdGFydFxcbiAgYXNzZXJ0VHlwZSAnc3RyU3Vic3RyaW5nIGVuZCcgJypudW1iZXInIGVuZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfZW5kKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJTdWJzdHJpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0clN1YnN0cmluZyBzdHJcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyU3Vic3RyaW5nIHN0YXJ0XCIpKShsYXp5KFwiKm51bWJlclwiKSkoTF9zdGFydCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyU3Vic3RyaW5nIGVuZFwiKSkobGF6eShcIipudW1iZXJcIikpKExfZW5kKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJTcGxpdFwiKSkobGF6eSgyKSkobGF6eShcInN0clNwbGl0IHN0ciBwYXQgPSBfc3RyU3BsaXRcXG4gIGFzc2VydFR5cGUgJ3N0clNwbGl0IHN0cicgJypzdHJpbmcnIHN0clxcbiAgYXNzZXJ0IChvciAoaGFzVHlwZSBwYXQgJypzdHJpbmcnKSAoaGFzVHlwZSBwYXQgJypSZWdFeHAnKSkgKHN0ckNhdCAoY29ucyAnc3RyU3BsaXQgcGF0IHNob3VsZCBiZSB0eXBlIHN0cmluZyBvciBSZWdFeHAgYnV0IGl0IGlzIHR5cGUgJyAoY29ucyAoZ2V0VHlwZSBwYXQpIChjb25zICc6ICcgKGNvbnMgKHNob3cgcGF0KSBuaWwpKSkpKSBwYXRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gcmVzb2x2ZShMX19zdHJTcGxpdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyU3BsaXQgc3RyXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfcGF0KShsYXp5KFwiKnN0cmluZ1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3BhdCkobGF6eShcIipSZWdFeHBcIikpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzdHJTcGxpdCBwYXQgc2hvdWxkIGJlIHR5cGUgc3RyaW5nIG9yIFJlZ0V4cCBidXQgaXQgaXMgdHlwZSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRUeXBlKShMX3BhdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zaG93KShMX3BhdCl9KSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpKExfcGF0KX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0ckNhdFwiKSkobGF6eSgxKSkobGF6eShcInN0ckNhdCBsaXN0ID0gX3N0ckNhdFxcbiAgYXNzZXJ0IChpc0xpc3QgbGlzdCkgKHN0ckNhdCAoY29ucyAnc3RyQ2F0IGxpc3Qgc2hvdWxkIGJlIHR5cGUgY29ucyBvciBuaWwgYnV0IGl0IGlzIHR5cGUgJyAoY29ucyAoZ2V0VHlwZSBsaXN0KSAoY29ucyAnOiAnIChjb25zIGxpc3QpKSkpKSBsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX19zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzTGlzdCkoTF9saXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwic3RyQ2F0IGxpc3Qgc2hvdWxkIGJlIHR5cGUgY29ucyBvciBuaWwgYnV0IGl0IGlzIHR5cGUgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VHlwZSkoTF9saXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI6IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2xpc3QpfSkpfSkpfSkpfSkpfSkpKExfbGlzdCl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0ckFkZFwiKSkobGF6eSgyKSkobGF6eShcInN0ckFkZCBzdHIxIHN0cjIgPSBfc3RyQWRkIChhc3NlcnRUeXBlICdzdHJBZGQgc3RyMScgJypzdHJpbmcnIHN0cjEpIChhc3NlcnRUeXBlICdzdHJBZGQgc3RyMicgJypzdHJpbmcnIHN0cjIpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIxKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIyKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJBZGQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0ckFkZCBzdHIxXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIxKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJzdHJBZGQgc3RyMlwiKSkobGF6eShcIipzdHJpbmdcIikpKExfc3RyMil9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJNYXRjaFwiKSkobGF6eSgyKSkobGF6eShcInN0ck1hdGNoIHN0ciBwYXQgPSBfc3RyTWF0Y2hcXG4gIGFzc2VydFR5cGUgJ3N0ck1hdGNoIHN0cicgJypzdHJpbmcnIHN0clxcbiAgYXNzZXJ0IChvciAoaGFzVHlwZSBwYXQgJypzdHJpbmcnKSAoaGFzVHlwZSBwYXQgJypSZWdFeHAnKSkgKHN0ckNhdCAoY29ucyAnc3RyTWF0Y2ggcGF0IHNob3VsZCBiZSB0eXBlIHN0cmluZyBvciBSZWdFeHAgYnV0IGl0IGlzIHR5cGUgJyAoY29ucyAoZ2V0VHlwZSBwYXQpIChjb25zICc6ICcgKGNvbnMgKHNob3cgcGF0KSBuaWwpKSkpKSBwYXRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gcmVzb2x2ZShMX19zdHJNYXRjaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwic3RyTWF0Y2ggc3RyXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfcGF0KShsYXp5KFwiKnN0cmluZ1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3BhdCkobGF6eShcIipSZWdFeHBcIikpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzdHJNYXRjaCBwYXQgc2hvdWxkIGJlIHR5cGUgc3RyaW5nIG9yIFJlZ0V4cCBidXQgaXQgaXMgdHlwZSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRUeXBlKShMX3BhdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zaG93KShMX3BhdCl9KSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpKExfcGF0KX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0clRvTGlzdFwiKSkobGF6eSgxKSkobGF6eShcInN0clRvTGlzdCBzdHIgPSBfc3RyVG9MaXN0IChhc3NlcnRUeXBlICdzdHJUb0xpc3Qgc3RyJyAnKnN0cmluZycgc3RyKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gcmVzb2x2ZShMX19zdHJUb0xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInN0clRvTGlzdCBzdHJcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cil9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0ckZyb21MaXN0XCIpKShsYXp5KDEpKShsYXp5KFwic3RyRnJvbUxpc3QgbGlzdCA9IF9zdHJGcm9tTGlzdFxcbiAgYXNzZXJ0IChpc0xpc3QgbGlzdCkgKHN0ckNhdCAoY29ucyAnc3RyRnJvbUxpc3QgbGlzdCBzaG91bGQgYmUgdHlwZSBjb25zIG9yIG5pbCBidXQgaXQgaXMgdHlwZSAnIChjb25zIChnZXRUeXBlIGxpc3QpIChjb25zICc6ICcgKGNvbnMgbGlzdCkpKSkpIGxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfX3N0ckZyb21MaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0xpc3QpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcInN0ckZyb21MaXN0IGxpc3Qgc2hvdWxkIGJlIHR5cGUgY29ucyBvciBuaWwgYnV0IGl0IGlzIHR5cGUgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VHlwZSkoTF9saXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI6IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2xpc3QpfSkpfSkpfSkpfSkpfSkpKExfbGlzdCl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlZ2V4cFwiKSkobGF6eSgxKSkobGF6eShcInJlZ2V4cCBzdHIgPSBfcmVnZXhwIChhc3NlcnRUeXBlICdyZWdleHAgc3RyJyAnKnN0cmluZycgc3RyKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gcmVzb2x2ZShMX19yZWdleHApKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInJlZ2V4cCBzdHJcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cil9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlZ2V4cEZsYWdzXCIpKShsYXp5KDIpKShsYXp5KFwicmVnZXhwRmxhZ3Mgc3RyIGZsYWdzID0gX3JlZ2V4cEZsYWdzXFxuICBhc3NlcnRUeXBlICdyZWdleHAgc3RyJyAnKnN0cmluZycgc3RyXFxuICBhc3NlcnRUeXBlICdyZWdleHAgZmxhZ3MnICcqc3RyaW5nJyBmbGFnc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9mbGFncyl7cmV0dXJuIHJlc29sdmUoTF9fcmVnZXhwRmxhZ3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInJlZ2V4cCBzdHJcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX3N0cil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hc3NlcnRUeXBlKShsYXp5KFwicmVnZXhwIGZsYWdzXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9mbGFncyl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJqc29uUGFyc2VcIikpKGxhenkoMykpKGxhenkoXCJqc29uUGFyc2Ugc3RyIGZhaWx1cmUgc3VjY2VzcyA9IF9qc29uUGFyc2VcXG4gIGFzc2VydFR5cGUgJ2pzb25QYXJzZSBzdHInICcqc3RyaW5nJyBzdHJcXG4gIGZhaWx1cmVcXG4gIHN1Y2Nlc3NcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfZmFpbHVyZSl7cmV0dXJuIGZ1bmN0aW9uKExfc3VjY2Vzcyl7cmV0dXJuIHJlc29sdmUoTF9fanNvblBhcnNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJqc29uUGFyc2Ugc3RyXCIpKShsYXp5KFwiKnN0cmluZ1wiKSkoTF9zdHIpfSkpKExfZmFpbHVyZSkoTF9zdWNjZXNzKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzaG93XCIpKShsYXp5KDEpKShsYXp5KFwic2hvdyB4ID0gX3Nob3cgeFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfeCl7cmV0dXJuIHJlc29sdmUoTF9fc2hvdykoTF94KX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaWRcIikpKGxhenkoMSkpKGxhenkoXCJpZCB4ID0geFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfeCl7cmV0dXJuIHJlc29sdmUoTF94KX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY29tcG9zZVwiKSkobGF6eSgyKSkobGF6eShcImNvbXBvc2UgZiBnID0gXFxcXHggLiBmIChnIHgpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gZnVuY3Rpb24oTF9nKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfZikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nKShMX3gpfSkpfSwgJ2NvbXBvc2UnKX19LCAnY29tcG9zZScpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZsaXBcIikpKGxhenkoMSkpKGxhenkoXCJmbGlwIGZ1bmMgPSBcXFxceCB5IC4gZnVuYyB5IHhcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIGZ1bmN0aW9uKExfeSl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKShMX3kpKExfeCl9fSwgJ2ZsaXAnKX0sICdmbGlwJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY29uc1wiKSkobGF6eSgyKSkobGF6eShcImNvbnMgYSBiID0gXFxcXGYgLiBmIGEgYlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfYSkoTF9iKX0sICdjb25zJyl9fSwgJ2NvbnMnKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc0NvbnNcIikpKGxhenkoMSkpKGxhenkoXCJpc0NvbnMgYyA9IGhhc1R5cGUgYyBjb25zXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfYykoTF9jb25zKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNMaXN0XCIpKShsYXp5KDEpKShsYXp5KFwiaXNMaXN0IGwgPSBvciAoaGFzVHlwZSBsIGNvbnMpIChoYXNUeXBlIGwgbmlsKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX2wpKExfY29ucyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX2wpKExfbmlsKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYXNzZXJ0VHlwZVwiKSkobGF6eSgzKSkobGF6eShcImFzc2VydFR5cGUgbXNnIHR5cGUgdmFsdWUgPSBhc3NlcnQgKGhhc1R5cGUgdmFsdWUgdHlwZSkgKHN0ckNhdCAoY29ucyBtc2cgKGNvbnMgJyBzaG91bGQgYmUgdHlwZSAnIChjb25zIChnZXREYXRhVHlwZSB0eXBlKSAoY29ucyAnLCBidXQgaXRzIHR5cGUgaXMgJyAoY29ucyAoZ2V0VHlwZSB2YWx1ZSkgKGNvbnMgJzogJyAoY29ucyAoc2hvdyB2YWx1ZSkgbmlsKSkpKSkpKSkgdmFsdWVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX21zZyl7cmV0dXJuIGZ1bmN0aW9uKExfdHlwZSl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfdmFsdWUpKExfdHlwZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9tc2cpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIiBzaG91bGQgYmUgdHlwZSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXREYXRhVHlwZSkoTF90eXBlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIsIGJ1dCBpdHMgdHlwZSBpcyBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRUeXBlKShMX3ZhbHVlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI6IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Nob3cpKExfdmFsdWUpfSkpKExfbmlsKX0pKX0pKX0pKX0pKX0pKX0pKX0pKX0pKShMX3ZhbHVlKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJuaWxcIikpKGxhenkoMCkpKGxhenkoXCJuaWwgPSBcXFxcYSBiIC4gYlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKHNldFR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gcmVzb2x2ZShMX2IpfX0sICduaWwnKSwgJ25pbCcpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzTmlsXCIpKShsYXp5KDEpKShsYXp5KFwiaXNOaWwgbiA9IGhhc1R5cGUgbiBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9uKShMX25pbCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImhlYWRcIikpKGxhenkoMSkpKGxhenkoXCJoZWFkIGwgPSBsIFxcXFxoIHQgLiBoXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaCl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidGFpbFwiKSkobGF6eSgxKSkobGF6eShcInRhaWwgbCA9IGwgXFxcXGggdCAuIHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF90KX19fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsYXN0XCIpKShsYXp5KDEpKShsYXp5KFwibGFzdCBsID0gaXNOaWwgKHRhaWwgbClcXG4gIGhlYWQgbFxcbiAgbGFzdCAodGFpbCBsKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2wpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9sKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xhc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9sKX0pKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmVtb3ZlTGFzdFwiKSkobGF6eSgxKSkobGF6eShcInJlbW92ZUxhc3QgbCA9IGlzTmlsICh0YWlsIGwpXFxuICBuaWxcXG4gIGNvbnMgKGhlYWQgbCkgKHJlbW92ZUxhc3QgKHRhaWwgbCkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbCl9KSkoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2wpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVtb3ZlTGFzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2wpfSkpfSkpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsZW5ndGhcIikpKGxhenkoMSkpKGxhenkoXCJsZW5ndGggbGlzdCA9IGlzQ29ucyBsaXN0XFxuICArIDEgKGxlbmd0aCAodGFpbCBsaXN0KSlcXG4gIDBcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKGxhenkoMSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGVuZ3RoKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbGlzdCl9KSl9KSl9KSkobGF6eSgwKSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFwcGVuZFwiKSkobGF6eSgyKSkobGF6eShcImFwcGVuZCBhIGIgPSBpc05pbCBhXFxuICBiXFxuICBjb25zIChoZWFkIGEpIChhcHBlbmQgKHRhaWwgYSkgYilcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfYSkoTF9iKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9hKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FwcGVuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2EpfSkpKExfYil9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmbGF0dGVuXCIpKShsYXp5KDEpKShsYXp5KFwiZmxhdHRlbiBsaXN0ID0gaXNDb25zIGxpc3RcXG4gIHN1YmZsYXR0ZW4gbGlzdCBuaWxcXG4gIGxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3ViZmxhdHRlbikoTF9saXN0KShMX25pbCl9KSkoTF9saXN0KX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3ViZmxhdHRlblwiKSkobGF6eSgyKSkobGF6eShcInN1YmZsYXR0ZW4gbGlzdCByZXN1bHQgPSBpc05pbCBsaXN0XFxuICByZXN1bHRcXG4gIGlzQ29ucyBsaXN0XFxuICAgIHN1YmZsYXR0ZW4gKGhlYWQgbGlzdCkgKHN1YmZsYXR0ZW4gKHRhaWwgbGlzdCkgcmVzdWx0KVxcbiAgICBjb25zIGxpc3QgcmVzdWx0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbGlzdCkoTF9yZXN1bHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3ViZmxhdHRlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3ViZmxhdHRlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSkpKExfcmVzdWx0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbGlzdCkoTF9yZXN1bHQpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmV2ZXJzZVwiKSkobGF6eSgxKSkobGF6eShcInJldmVyc2UgbCA9IHJldiBsIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9yZXYpKExfbCkoTF9uaWwpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZXZcIikpKGxhenkoMikpKGxhenkoXCJyZXYgbCByZXN1bHQgPSBpc05pbCBsXFxuICByZXN1bHRcXG4gIHJldiAodGFpbCBsKSAoY29ucyAoaGVhZCBsKSByZXN1bHQpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbCkoTF9yZXN1bHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmV2KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbCl9KSkoTF9yZXN1bHQpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmlsdGVyXCIpKShsYXp5KDIpKShsYXp5KFwiZmlsdGVyIGZ1bmMgbGlzdCA9IGlzTmlsIGxpc3RcXG4gIG5pbFxcbiAgZnVuYyAoaGVhZCBsaXN0KSAoY29ucyAoaGVhZCBsaXN0KSkgaWQgKGZpbHRlciBmdW5jICh0YWlsIGxpc3QpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9saXN0KShMX25pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSl9KSkoTF9pZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXIpKExfZnVuYykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmluZFwiKSkobGF6eSgyKSkobGF6eShcImZpbmQgcHJlZGljYXRlIGxpc3QgPSBpc05pbCBsaXN0XFxuICBub25lXFxuICBwcmVkaWNhdGUgKGhlYWQgbGlzdCkgKHNvbWUgKGhlYWQgbGlzdCkpIChmaW5kIHByZWRpY2F0ZSAodGFpbCBsaXN0KSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ByZWRpY2F0ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9saXN0KShMX25vbmUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcHJlZGljYXRlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zb21lKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maW5kKShMX3ByZWRpY2F0ZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY29udGFpbnNcIikpKGxhenkoMikpKGxhenkoXCJjb250YWlucyBsaXN0IGl0ZW0gPSBmaW5kIChcXFxcZWwgLiBlcSBlbCBpdGVtKSBsaXN0IChcXFxceCAuIHRydWUpIGZhbHNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbmQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2VsKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX2VsKShMX2l0ZW0pfX0pKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfdHJ1ZSl9fSkpKExfZmFsc2UpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFwXCIpKShsYXp5KDIpKShsYXp5KFwibWFwIGZ1bmMgbCA9IGlzTmlsIGxcXG4gIG5pbFxcbiAgY29ucyAoZnVuYyAoaGVhZCBsKSkgKG1hcCBmdW5jICh0YWlsIGwpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9sKShMX25pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9sKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfbCl9KSl9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYXBTYXZlXCIpKShsYXp5KDIpKShsYXp5KFwibWFwU2F2ZSBmdW5jIGwgPSBpc05pbCBsXFxuICBuaWxcXG4gIFxcXFxcXFxcXFxuICAgIG5ld0ggPSBmdW5jIChoZWFkIGwpXFxuICAgIG5ld1QgPSBtYXBTYXZlIGZ1bmMgKHRhaWwgbClcXG4gICAgLlxcbiAgICBhbmQgKGVxIG5ld0ggKGhlYWQgbCkpIChlcSBuZXdUICh0YWlsIGwpKVxcbiAgICAgIGxcXG4gICAgICBjb25zIG5ld0ggbmV3VFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9sKShMX25pbCkoZnVuY3Rpb24oKXtcbnZhciBMX25ld1QsIExfbmV3SDtcblxuTF9uZXdUID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXBTYXZlKShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9sKX0pKX0pO1xuXG5MX25ld0ggPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9sKX0pKX0pO1xucmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKExfbmV3SCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2wpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKExfbmV3VCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2wpfSkpfSkpKExfbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX25ld0gpKExfbmV3VCl9KSl9KX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZvbGRsXCIpKShsYXp5KDMpKShsYXp5KFwiZm9sZGwgZnVuYyBpbml0aWFsVmFsdWUgbCA9IGwgKFxcXFxoIHQgRCAuIGZvbGRsIGZ1bmMgKGZ1bmMgaW5pdGlhbFZhbHVlIGgpIHQpIGluaXRpYWxWYWx1ZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfaW5pdGlhbFZhbHVlKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfZm9sZGwpKExfZnVuYykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKShMX2luaXRpYWxWYWx1ZSkoTF9oKX0pKShMX3QpfX19fSkpKExfaW5pdGlhbFZhbHVlKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmb2xkbDFcIikpKGxhenkoMikpKGxhenkoXCJmb2xkbDEgZnVuYyBsID0gbCBcXFxcaCB0IC4gZm9sZGwgZnVuYyBoIHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9mb2xkbCkoTF9mdW5jKShMX2gpKExfdCl9fX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZvbGRyXCIpKShsYXp5KDMpKShsYXp5KFwiZm9sZHIgZnVuYyBpbml0aWFsVmFsdWUgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGZ1bmMgaCAoZm9sZHIgZnVuYyBpbml0aWFsVmFsdWUgdClcXG4gIGluaXRpYWxWYWx1ZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfaW5pdGlhbFZhbHVlKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfZnVuYykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZvbGRyKShMX2Z1bmMpKExfaW5pdGlhbFZhbHVlKShMX3QpfSkpfX19fSkpKExfaW5pdGlhbFZhbHVlKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmb2xkcjFcIikpKGxhenkoMikpKGxhenkoXCJmb2xkcjEgZnVuYyBsaXN0ID0gbGlzdCBcXFxcaCB0IC4gaXNOaWwgdFxcbiAgaFxcbiAgZnVuYyBoIChmb2xkcjEgZnVuYyB0KVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX3QpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZm9sZHIxKShMX2Z1bmMpKExfdCl9KSl9KSl9fX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImludGVyc3BlcnNlXCIpKShsYXp5KDIpKShsYXp5KFwiaW50ZXJzcGVyc2UgbGlzdCBlbGVtZW50ID0gbGlzdCAoXFxcXGggdCBEIC5cXG4gIGlzTmlsIHRcXG4gICAgbGlzdFxcbiAgICBjb25zIGggKGNvbnMgZWxlbWVudCAoaW50ZXJzcGVyc2UgdCBlbGVtZW50KSkpIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfZWxlbWVudCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX3QpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9lbGVtZW50KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ludGVyc3BlcnNlKShMX3QpKExfZWxlbWVudCl9KSl9KSl9KSl9fX19KSkoTF9uaWwpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiam9pblwiKSkobGF6eSgyKSkobGF6eShcImpvaW4gbGlzdCBlbCA9IHN0ckNhdCAoaW50ZXJzcGVyc2UgbGlzdCBlbClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2VsKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pbnRlcnNwZXJzZSkoTF9saXN0KShMX2VsKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZpbmRJbmRleFwiKSkobGF6eSgyKSkobGF6eShcImZpbmRJbmRleCBmdW5jIGxpc3QgPSBpZHggbGlzdCBmdW5jIDBcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfaWR4KShMX2xpc3QpKExfZnVuYykobGF6eSgwKSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpZHhcIikpKGxhenkoMykpKGxhenkoXCJpZHggbGlzdCBmdW5jIHBvcyA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGZ1bmMgaFxcbiAgICBwb3NcXG4gICAgaWR4IHQgZnVuYyAoKyAxIHBvcylcXG4gIC0xXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKShMX2gpKExfcG9zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lkeCkoTF90KShMX2Z1bmMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKGxhenkoMSkpKExfcG9zKX0pKX0pKX19fX0pKShsYXp5KC0xKSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaW5kZXhcIikpKGxhenkoMikpKGxhenkoXCJpbmRleCBsaXN0IGVsID0gZmluZCAoXFxcXGl0ZW0gLiA9PSBlbCBpdGVtKSBsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIHJlc29sdmUoTF9maW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKExfZWwpKExfaXRlbSl9fSkpKExfbGlzdCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhc3NlcnRBbGlzdFwiKSkobGF6eSgzKSkobGF6eShcImFzc2VydEFsaXN0IG1zZyB2YWx1ZSByZXN1bHQgPSBhc3NlcnQgKGlzQWxpc3QgdmFsdWUpIChzdHJDYXQgKGNvbnMgbXNnIChjb25zICcgc2hvdWxkIGJlIGEgYXNzb2NpYXRpb24gbGlzdCwgYnV0IGl0IGlzIG5vdDsgaXRzIHR5cGUgaXMgJyAoY29ucyAoZ2V0VHlwZSB2YWx1ZSkgKGNvbnMgJzogJyAoY29ucyAoc2hvdyB2YWx1ZSkgbmlsKSkpKSkpIHJlc3VsdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbXNnKXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0FsaXN0KShMX3ZhbHVlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX21zZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiIHNob3VsZCBiZSBhIGFzc29jaWF0aW9uIGxpc3QsIGJ1dCBpdCBpcyBub3Q7IGl0cyB0eXBlIGlzIFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFR5cGUpKExfdmFsdWUpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjogXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2hvdykoTF92YWx1ZSl9KSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpfSkpKExfcmVzdWx0KX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhY29uc1wiKSkobGF6eSgzKSkobGF6eShcImFjb25zIGsgdiBhbGlzdCA9IGFzc2VydEFsaXN0IFxcXCJhY29ucyBhbGlzdFxcXCIgYWxpc3QgKFxcXFxAIHR5cGUgY29ucyAuIFxcXFxmIC4gXFxcXEAgYXNzb2MgdHJ1ZSAuIGYgKGNvbnMgayB2KSBhbGlzdClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2spe3JldHVybiBmdW5jdGlvbihMX3Ype3JldHVybiBmdW5jdGlvbihMX2FsaXN0KXtyZXR1cm4gcmVzb2x2ZShMX2Fzc2VydEFsaXN0KShsYXp5KFwiYWNvbnMgYWxpc3RcIikpKExfYWxpc3QpKChmdW5jdGlvbigpe3JldHVybiBzZXRUeXBlKHNldExhbWJkYVByb3BlcnRpZXMoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9rKShMX3YpfSkpKExfYWxpc3QpfSwge1wiYXNzb2NcIjpcInRydWVcIn0pLCAnY29ucycpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFzc29jXCIpKShsYXp5KDIpKShsYXp5KFwiYXNzb2MgayBhbGlzdCAgPSBmaW5kIChcXFxcZWwgLiBlcSBrIChoZWFkIGVsKSkgYWxpc3QgKFxcXFxjZWxsIC4gY2VsbCBcXFxcaGVhZCB0YWlsIC4gc29tZSB0YWlsKSBub25lXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9rKXtyZXR1cm4gZnVuY3Rpb24oTF9hbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9maW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9rKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfZWwpfSkpfX0pKShMX2FsaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jZWxsKXtyZXR1cm4gcmVzb2x2ZShMX2NlbGwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2hlYWQpe3JldHVybiBmdW5jdGlvbihMX3RhaWwpe3JldHVybiByZXNvbHZlKExfc29tZSkoTF90YWlsKX19fSkpfX0pKShMX25vbmUpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmFzc29jXCIpKShsYXp5KDIpKShsYXp5KFwicmFzc29jIHYgYWxpc3QgPSBmaW5kIChcXFxcZWwgLiBlcSB2ICh0YWlsIGVsKSkgYWxpc3QgKFxcXFxjZWxsIC4gY2VsbCBcXFxcaGVhZCB0YWlsIC4gc29tZSBoZWFkKSBub25lXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF92KXtyZXR1cm4gZnVuY3Rpb24oTF9hbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9maW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF92KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfZWwpfSkpfX0pKShMX2FsaXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jZWxsKXtyZXR1cm4gcmVzb2x2ZShMX2NlbGwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2hlYWQpe3JldHVybiBmdW5jdGlvbihMX3RhaWwpe3JldHVybiByZXNvbHZlKExfc29tZSkoTF9oZWFkKX19fSkpfX0pKShMX25vbmUpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNBbGlzdFwiKSkobGF6eSgxKSkobGF6eShcImlzQWxpc3Qgb2JqID0gb3IgKGlzTmlsIG9iaikgKGhhc1Byb3BlcnR5IG9iaiAnYXNzb2MnKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX29iail9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYXNQcm9wZXJ0eSkoTF9vYmopKGxhenkoXCJhc3NvY1wiKSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFjb25zUGFpclwiKSkobGF6eSgyKSkobGF6eShcImFjb25zUGFpciBrZXlWYWx1ZSBsaXN0ID0gXFxcXEAgdHlwZSBjb25zIC4gXFxcXGYgLiBcXFxcQCBhc3NvYyB0cnVlIC4gZiBrZXlWYWx1ZSBsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9rZXlWYWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHNldFR5cGUoc2V0TGFtYmRhUHJvcGVydGllcyhmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF9rZXlWYWx1ZSkoTF9saXN0KX0sIHtcImFzc29jXCI6XCJ0cnVlXCJ9KSwgJ2NvbnMnKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFwcGVuZEFsaXN0XCIpKShsYXp5KDIpKShsYXp5KFwiYXBwZW5kQWxpc3QgYSBiID0gaXNOaWwgYVxcbiAgYlxcbiAgYWNvbnNQYWlyIChoZWFkIGEpIChhcHBlbmRBbGlzdCAodGFpbCBhKSBiKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9hKShMX2IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnNQYWlyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfYSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmRBbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2EpfSkpKExfYil9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJrZXlzXCIpKShsYXp5KDEpKShsYXp5KFwia2V5cyBsaXN0ID0gbWFwIChcXFxcbCAuIGhlYWQgbCkgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9tYXApKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9sKX19KSkoTF9saXN0KX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZ2V0UHJvcGVydHlcIikpKGxhenkoMikpKGxhenkoXCJnZXRQcm9wZXJ0eSBmdW5jIHByb3AgPSBnZXRQcm9wZXJ0aWVzIGZ1bmNcXG4gIFxcXFxwcm9wcyAuIGFzc29jIHByb3AgcHJvcHNcXG4gIG5vbmVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX3Byb3Ape3JldHVybiByZXNvbHZlKExfZ2V0UHJvcGVydGllcykoTF9mdW5jKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wcm9wcyl7cmV0dXJuIHJlc29sdmUoTF9hc3NvYykoTF9wcm9wKShMX3Byb3BzKX19KSkoTF9ub25lKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImhhc1Byb3BlcnR5XCIpKShsYXp5KDIpKShsYXp5KFwiaGFzUHJvcGVydHkgZnVuYyBwcm9wID0gZ2V0UHJvcGVydHkgZnVuYyBwcm9wXFxuICBcXFxcXyAuIHRydWVcXG4gIGZhbHNlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9wcm9wKXtyZXR1cm4gcmVzb2x2ZShMX2dldFByb3BlcnR5KShMX2Z1bmMpKExfcHJvcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF90cnVlKX19KSkoTF9mYWxzZSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJxdWlja3NvcnRcIikpKGxhenkoMikpKGxhenkoXCJxdWlja3NvcnQgbGVzcyBsaXN0ID0gKHFzIGxlc3MgbGlzdCkgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sZXNzKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX3FzKShMX2xlc3MpKExfbGlzdCkoTF9uaWwpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicXNcIikpKGxhenkoMikpKGxhenkoXCJxcyBzb3J0ZWRGdW5jIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBcXFxcXFxcXFxcbiAgICBncmVhdGVyID0gZmlsdGVyIChzb3J0ZWRGdW5jIGgpIHRcXG4gICAgbGVzc2VyID0gZmlsdGVyIChjb21wb3NlIG5vdCAoc29ydGVkRnVuYyBoKSkgdFxcbiAgICAuXFxuICAgIFxcXFxyZXN0IC4gKHFzIHNvcnRlZEZ1bmMgbGVzc2VyKSAoY29ucyBoICgocXMgc29ydGVkRnVuYyBncmVhdGVyKSByZXN0KSlcXG4gIGlkXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zb3J0ZWRGdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbGVzc2VyLCBMX2dyZWF0ZXI7XG5cbkxfbGVzc2VyID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29tcG9zZSkoTF9ub3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc29ydGVkRnVuYykoTF9oKX0pKX0pKShMX3QpfSk7XG5cbkxfZ3JlYXRlciA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NvcnRlZEZ1bmMpKExfaCl9KSkoTF90KX0pO1xucmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9xcykoTF9zb3J0ZWRGdW5jKShMX2xlc3NlcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcXMpKExfc29ydGVkRnVuYykoTF9ncmVhdGVyKShMX3Jlc3QpfSkpfSkpfX0pKCl9fX19KSkoTF9pZCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpbnNlcnRTb3J0ZWRcIikpKGxhenkoMykpKGxhenkoXCJpbnNlcnRTb3J0ZWQgc29ydEZ1bmMgaXRlbSBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gc29ydEZ1bmMgaXRlbSBoIChjb25zIGl0ZW0gbGlzdCkgKGNvbnMgaCAoaW5zZXJ0U29ydGVkIHNvcnRGdW5jIGl0ZW0gdCkpXFxuICBjb25zIGl0ZW0gbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zb3J0RnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX3NvcnRGdW5jKShMX2l0ZW0pKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2l0ZW0pKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaW5zZXJ0U29ydGVkKShMX3NvcnRGdW5jKShMX2l0ZW0pKExfdCl9KSl9KSl9fX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2l0ZW0pKExfbmlsKX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ0b2tlblwiKSkobGF6eSgyKSkobGF6eShcInRva2VuIHR4dCBwb3MgPSBcXFxcZiAuIGYgdHh0IHBvc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfdHh0KXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKShMX3R4dCkoTF9wb3MpfSwgJ3Rva2VuJyl9fSwgJ3Rva2VuJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidG9rZW5TdHJpbmdcIikpKGxhenkoMSkpKGxhenkoXCJ0b2tlblN0cmluZyB0b2sgPSB0b2sgXFxcXHQgcCAuIHRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIHJlc29sdmUoTF90b2spKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiByZXNvbHZlKExfdCl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidG9rZW5Qb3NcIikpKGxhenkoMSkpKGxhenkoXCJ0b2tlblBvcyB0b2sgPSB0b2sgXFxcXHQgcCAuIHBcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIHJlc29sdmUoTF90b2spKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiByZXNvbHZlKExfcCl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNUb2tlblwiKSkobGF6eSgxKSkobGF6eShcImlzVG9rZW4gdCA9IGhhc1R5cGUgdCB0b2tlblwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3QpKExfdG9rZW4pfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJlbnNcIikpKGxhenkoMykpKGxhenkoXCJwYXJlbnMgc3RhcnQgZW5kIGNvbnRlbnQgPSBcXFxcZiAuIGYgc3RhcnQgZW5kIGNvbnRlbnRcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKShMX3N0YXJ0KShMX2VuZCkoTF9jb250ZW50KX0sICdwYXJlbnMnKX19fSwgJ3BhcmVucycpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcmVuc1N0YXJ0XCIpKShsYXp5KDEpKShsYXp5KFwicGFyZW5zU3RhcnQgcCA9IHAgXFxcXHMgZSBjIC4gc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcCl7cmV0dXJuIHJlc29sdmUoTF9wKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zKXtyZXR1cm4gZnVuY3Rpb24oTF9lKXtyZXR1cm4gZnVuY3Rpb24oTF9jKXtyZXR1cm4gcmVzb2x2ZShMX3MpfX19fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJlbnNFbmRcIikpKGxhenkoMSkpKGxhenkoXCJwYXJlbnNFbmQgcCA9IHAgXFxcXHMgZSBjIC4gZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcCl7cmV0dXJuIHJlc29sdmUoTF9wKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zKXtyZXR1cm4gZnVuY3Rpb24oTF9lKXtyZXR1cm4gZnVuY3Rpb24oTF9jKXtyZXR1cm4gcmVzb2x2ZShMX2UpfX19fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJlbnNDb250ZW50XCIpKShsYXp5KDEpKShsYXp5KFwicGFyZW5zQ29udGVudCBwID0gcCBcXFxccyBlIGMgLiBjXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gcmVzb2x2ZShMX3ApKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Mpe3JldHVybiBmdW5jdGlvbihMX2Upe3JldHVybiBmdW5jdGlvbihMX2Mpe3JldHVybiByZXNvbHZlKExfYyl9fX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzUGFyZW5zXCIpKShsYXp5KDEpKShsYXp5KFwiaXNQYXJlbnMgcCA9IGhhc1R5cGUgcCBwYXJlbnNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9wKShMX3BhcmVucyl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm1ha2VQYXJlbnNcIikpKGxhenkoMykpKGxhenkoXCJtYWtlUGFyZW5zIHN0YXJ0IGVuZCBjb250ZW50ID1cXG4gIGFuZCAoaXNDb25zIGNvbnRlbnQpIChpc05pbCAodGFpbCBjb250ZW50KSlcXG4gICAgbWFrZVBhcmVucyBzdGFydCBlbmQgKGhlYWQgY29udGVudClcXG4gICAgb3IgKGlzVG9rZW4gY29udGVudCkgKGlzUGFyZW5zIGNvbnRlbnQpXFxuICAgICAgY29udGVudFxcbiAgICAgIHBhcmVucyBzdGFydCBlbmQgY29udGVudFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2NvbnRlbnQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9jb250ZW50KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VQYXJlbnMpKExfc3RhcnQpKExfZW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfY29udGVudCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX2NvbnRlbnQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNQYXJlbnMpKExfY29udGVudCl9KSkoTF9jb250ZW50KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVucykoTF9zdGFydCkoTF9lbmQpKExfY29udGVudCl9KSl9KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyZW5zRnJvbVRva3NcIikpKGxhenkoMykpKGxhenkoXCJwYXJlbnNGcm9tVG9rcyBsZWZ0IHJpZ2h0IGNvbnRlbnQgPSBcXFxcXFxcXFxcbiAgc3RhcnQgPSB0b2tlblBvcyBsZWZ0XFxuICBlbmQgPSArICh0b2tlblBvcyByaWdodCkgKHN0ckxlbiAodG9rZW5TdHJpbmcgcmlnaHQpKVxcbiAgLlxcbiAgcGFyZW5zIHN0YXJ0IGVuZCBjb250ZW50XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sZWZ0KXtyZXR1cm4gZnVuY3Rpb24oTF9yaWdodCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9lbmQsIExfc3RhcnQ7XG5cbkxfZW5kID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblBvcykoTF9yaWdodCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfcmlnaHQpfSkpfSkpfSk7XG5cbkxfc3RhcnQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuUG9zKShMX2xlZnQpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX3BhcmVucykoTF9zdGFydCkoTF9lbmQpKExfY29udGVudCl9KSgpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0cmlwUGFyZW5zXCIpKShsYXp5KDEpKShsYXp5KFwic3RyaXBQYXJlbnMgcCA9IGlzUGFyZW5zIHAgKHBhcmVuc0NvbnRlbnQgcCkgcFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcCl7cmV0dXJuIHJlc29sdmUoTF9pc1BhcmVucykoTF9wKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVuc0NvbnRlbnQpKExfcCl9KSkoTF9wKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VFcnJcIikpKGxhenkoMikpKGxhenkoXCJwYXJzZUVyciBtc2cxIG1zZzIgPSBcXFxcZiAuIGYgKHN0ckNhdCAoY29ucyBtc2cxIChjb25zIG1zZzIgbmlsKSkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9tc2cxKXtyZXR1cm4gZnVuY3Rpb24oTF9tc2cyKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9tc2cxKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbXNnMikoTF9uaWwpfSkpfSkpfSkpfSwgJ3BhcnNlRXJyJyl9fSwgJ3BhcnNlRXJyJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VFcnJNc2dcIikpKGxhenkoMSkpKGxhenkoXCJwYXJzZUVyck1zZyBlcnIgPSBlcnIgXFxcXG0gLiBtXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiByZXNvbHZlKExfZXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9tKXtyZXR1cm4gcmVzb2x2ZShMX20pfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNQYXJzZUVyclwiKSkobGF6eSgxKSkobGF6eShcImlzUGFyc2VFcnIgdGhpbmcgPSBoYXNUeXBlIHRoaW5nIHBhcnNlRXJyXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90aGluZyl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3RoaW5nKShMX3BhcnNlRXJyKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZW1wdHlUb2tlblwiKSkobGF6eSgwKSkobGF6eShcImVtcHR5VG9rZW4gPSByZWdleHAgJ15cXFxcXFxcXG5bIFxcXFxcXFxcaV0qKCN8JCknXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIl5cXFxcblsgXFxcXGldKigjfCQpXCIpKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWtlVG9rZW5zXCIpKShsYXp5KDIpKShsYXp5KFwibWFrZVRva2VucyBzdHJpbmdzIHN0YXJ0ID0gc3RyaW5ncyAoXFxcXGggdCBEIC4gbWFrZU1vcmVUb2tlbnMgaCB0IHN0YXJ0KSBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cmluZ3Mpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gcmVzb2x2ZShMX3N0cmluZ3MpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfbWFrZU1vcmVUb2tlbnMpKExfaCkoTF90KShMX3N0YXJ0KX19fX0pKShMX25pbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWtlTW9yZVRva2Vuc1wiKSkobGF6eSgzKSkobGF6eShcIm1ha2VNb3JlVG9rZW5zIGggdCBzdGFydCA9IFxcXFxcXFxcXFxuICBuZXh0ID0gbWFrZVRva2VucyB0ICgrIHN0YXJ0IChzdHJMZW4gaCkpXFxuICAuXFxuICBhbmQgKHN0ck1hdGNoZXMgaCBlbXB0eVRva2VuKSAob3IgKGlzTmlsIHQpIChzdHJTdGFydHNXaXRoIChoZWFkIHQpICdcXFxcbicpKVxcbiAgICBtYWtlVG9rZW5zIHQgKCsgc3RhcnQgKHN0ckxlbiBoKSlcXG4gICAgb3IgKHN0clN0YXJ0c1dpdGggaCAnICcpIChzdHJTdGFydHNXaXRoIGggJyMnKVxcbiAgICAgIG5leHRcXG4gICAgICBhbmQgKHN0clN0YXJ0c1dpdGggaCAnXFxcXG4nKSAoc3RyU3RhcnRzV2l0aCAoaGVhZCB0KSAnIycpXFxuICAgICAgICBtYWtlVG9rZW5zICh0YWlsIHQpICgrIHN0YXJ0ICgrIChzdHJMZW4gaCkgKHN0ckxlbiAoaGVhZCB0KSkpKVxcbiAgICAgICAgY29ucyAodG9rZW4gaCBzdGFydCkgbmV4dFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbmV4dDtcblxuTF9uZXh0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlVG9rZW5zKShMX3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKExfc3RhcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX2gpfSkpfSkpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJNYXRjaGVzKShMX2gpKExfZW1wdHlUb2tlbil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF90KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90KX0pKShsYXp5KFwiXFxuXCIpKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VUb2tlbnMpKExfdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykoTF9zdGFydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKExfaCl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdGFydHNXaXRoKShMX2gpKGxhenkoXCIgXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKExfaCkobGF6eShcIiNcIikpfSkpKExfbmV4dCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3RhcnRzV2l0aCkoTF9oKShsYXp5KFwiXFxuXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90KX0pKShsYXp5KFwiI1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlVG9rZW5zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykoTF9zdGFydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90KX0pKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKExfaCkoTF9zdGFydCl9KSkoTF9uZXh0KX0pKX0pKX0pKX0pKCl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic3BsaXRUb2tlbnNcIikpKGxhenkoMikpKGxhenkoXCJzcGxpdFRva2VucyBzdHIgcGF0ID0gZmlsdGVyIChcXFxccyAuIG5vdCAoZXEgcyAnJykpIChiYXNpY1NwbGl0VG9rZW5zIHN0ciBwYXQgdHJ1ZSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcyl7cmV0dXJuIHJlc29sdmUoTF9ub3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKExfcykobGF6eShcIlwiKSl9KSl9fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmFzaWNTcGxpdFRva2VucykoTF9zdHIpKExfcGF0KShMX3RydWUpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibnVtYmVyUGF0XCIpKShsYXp5KDApKShsYXp5KFwibnVtYmVyUGF0ID0gcmVnZXhwICctPyhbMC05XSsoXFxcXFxcXFwuWzAtOV0rKT98XFxcXFxcXFwuWzAtOV0rKSdcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVnZXhwKShsYXp5KFwiLT8oWzAtOV0rKFxcXFwuWzAtOV0rKT98XFxcXC5bMC05XSspXCIpKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYXRjaE9mZnNldFwiKSkobGF6eSgyKSkobGF6eShcIm1hdGNoT2Zmc2V0IHN0ciBtYXRjaCA9IGlzTmlsIG1hdGNoXFxuICBzdHJMZW4gc3RyXFxuICBoZWFkICh0YWlsICh0YWlsIG1hdGNoKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfbWF0Y2gpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfbWF0Y2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX3N0cil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9tYXRjaCl9KSl9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJiYXNpY1NwbGl0VG9rZW5zXCIpKShsYXp5KDMpKShsYXp5KFwiYmFzaWNTcGxpdFRva2VucyBzdHIgcGF0IHByZXZJc0RlbCA9ID09IHN0ciAnJ1xcbiAgbmlsXFxuICBcXFxcXFxcXFxcbiAgICBudW0gPSBzdHJNYXRjaCBzdHIgbnVtYmVyUGF0XFxuICAgIGRlbCA9IHN0ck1hdGNoIHN0ciBwYXRcXG4gICAgbnVtT2Zmc2V0ID0gbWF0Y2hPZmZzZXQgc3RyIG51bVxcbiAgICBkZWxPZmZzZXQgPSBtYXRjaE9mZnNldCBzdHIgZGVsXFxuICAgIHNlbGVjdCA9IGFuZCAoPT0gbnVtT2Zmc2V0IDApIHByZXZJc0RlbFxcbiAgICAgIFxcXFxkZWwgbnVtIGZpcnN0IC4gbnVtXFxuICAgICAgPT0gZGVsT2Zmc2V0IDBcXG4gICAgICAgIFxcXFxkZWwgbnVtIGZpcnN0IC4gZGVsXFxuICAgICAgICBcXFxcZGVsIG51bSBmaXJzdCAuIGZpcnN0XFxuICAgIGZpcnN0ID0gc2VsZWN0IChoZWFkIGRlbCkgKGhlYWQgbnVtKSAoc3RyU3Vic3RyaW5nIHN0ciAwIGRlbE9mZnNldClcXG4gICAgLlxcbiAgICBjb25zXFxuICAgICAgZmlyc3RcXG4gICAgICBiYXNpY1NwbGl0VG9rZW5zXFxuICAgICAgICBzdHJTdWJzdHJpbmcgc3RyIChzdHJMZW4gZmlyc3QpIDBcXG4gICAgICAgIHBhdFxcbiAgICAgICAgc2VsZWN0IHRydWUgZmFsc2UgZmFsc2VcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gZnVuY3Rpb24oTF9wcmV2SXNEZWwpe3JldHVybiByZXNvbHZlKExfJHAkcCkoTF9zdHIpKGxhenkoXCJcIikpKExfbmlsKShmdW5jdGlvbigpe1xudmFyIExfZmlyc3QsIExfc2VsZWN0LCBMX2RlbE9mZnNldCwgTF9udW1PZmZzZXQsIExfZGVsLCBMX251bTtcblxuTF9maXJzdCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2VsZWN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfZGVsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbnVtKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN1YnN0cmluZykoTF9zdHIpKGxhenkoMCkpKExfZGVsT2Zmc2V0KX0pKX0pO1xuXG5MX3NlbGVjdCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKExfbnVtT2Zmc2V0KShsYXp5KDApKX0pKShMX3ByZXZJc0RlbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVsXzApe3JldHVybiBmdW5jdGlvbihMX251bV8xKXtyZXR1cm4gZnVuY3Rpb24oTF9maXJzdCl7cmV0dXJuIHJlc29sdmUoTF9udW1fMSl9fX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kcCRwKShMX2RlbE9mZnNldCkobGF6eSgwKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVsXzApe3JldHVybiBmdW5jdGlvbihMX251bV8xKXtyZXR1cm4gZnVuY3Rpb24oTF9maXJzdCl7cmV0dXJuIHJlc29sdmUoTF9kZWxfMCl9fX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVsXzApe3JldHVybiBmdW5jdGlvbihMX251bV8xKXtyZXR1cm4gZnVuY3Rpb24oTF9maXJzdCl7cmV0dXJuIHJlc29sdmUoTF9maXJzdCl9fX19KSl9KSl9KTtcblxuTF9kZWxPZmZzZXQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hdGNoT2Zmc2V0KShMX3N0cikoTF9kZWwpfSk7XG5cbkxfbnVtT2Zmc2V0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYXRjaE9mZnNldCkoTF9zdHIpKExfbnVtKX0pO1xuXG5MX2RlbCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTWF0Y2gpKExfc3RyKShMX3BhdCl9KTtcblxuTF9udW0gPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ck1hdGNoKShMX3N0cikoTF9udW1iZXJQYXQpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfZmlyc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmFzaWNTcGxpdFRva2VucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdWJzdHJpbmcpKExfc3RyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoTF9maXJzdCl9KSkobGF6eSgwKSl9KSkoTF9wYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2VsZWN0KShMX3RydWUpKExfZmFsc2UpKExfZmFsc2UpfSkpfSkpfSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidG9rZW5zXCIpKShsYXp5KDIpKShsYXp5KFwidG9rZW5zIHN0ciBwYXQgPSBtYWtlVG9rZW5zIChzcGxpdFRva2VucyBzdHIgcGF0KSAwXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlVG9rZW5zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NwbGl0VG9rZW5zKShMX3N0cikoTF9wYXQpfSkpKGxhenkoMCkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNTdHJpbmdcIikpKGxhenkoMSkpKGxhenkoXCJpc1N0cmluZyBzID0gPT0gKGdldFR5cGUgcykgJypzdHJpbmcnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zKXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VHlwZSkoTF9zKX0pKShsYXp5KFwiKnN0cmluZ1wiKSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzTnVtYmVyXCIpKShsYXp5KDEpKShsYXp5KFwiaXNOdW1iZXIgcyA9ID09IChnZXRUeXBlIHMpICcqbnVtYmVyJ1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcyl7cmV0dXJuIHJlc29sdmUoTF8kcCRwKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFR5cGUpKExfcyl9KSkobGF6eShcIipudW1iZXJcIikpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc1Rva2VuU3RyaW5nXCIpKShsYXp5KDIpKShsYXp5KFwiaXNUb2tlblN0cmluZyB0b2sgc3RyID0gb3JcXG4gIGFuZCAoaXNUb2tlbiB0b2spIChlcSAodG9rZW5TdHJpbmcgdG9rKSBzdHIpXFxuICBhbmQgKGlzU3RyaW5nIHRvaykgKGVxIHRvayBzdHIpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF90b2spfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfdG9rKX0pKShMX3N0cil9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNTdHJpbmcpKExfdG9rKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX3RvaykoTF9zdHIpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXNUb2tlblN0YXJ0XCIpKShsYXp5KDIpKShsYXp5KFwiaXNUb2tlblN0YXJ0IHRvayBzdHIgPSBvclxcbiAgYW5kIChpc1Rva2VuIHRvaykgKHN0clN0YXJ0c1dpdGggKHRva2VuU3RyaW5nIHRvaykgc3RyKVxcbiAgYW5kIChpc1N0cmluZyB0b2spIChzdHJTdGFydHNXaXRoIHRvayBzdHIpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF90b2spfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3RhcnRzV2l0aCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF90b2spfSkpKExfc3RyKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1N0cmluZykoTF90b2spfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3RhcnRzV2l0aCkoTF90b2spKExfc3RyKX0pKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInN0clRva2VuU3RyaW5nXCIpKShsYXp5KDEpKShsYXp5KFwic3RyVG9rZW5TdHJpbmcgdG9rID0gd2l0aFRva2VuIHRvayBuaWwgXFxcXHN0ciBwb3MgLiBzdHJcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIHJlc29sdmUoTF93aXRoVG9rZW4pKExfdG9rKShMX25pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiByZXNvbHZlKExfc3RyKX19fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ3aXRoVG9rZW5cIikpKGxhenkoMykpKGxhenkoXCJ3aXRoVG9rZW4gdG9rIG5vblRva0Nhc2UgdG9rQ2FzZSA9IGlzVG9rZW4gdG9rXFxuICB0b2sgdG9rQ2FzZVxcbiAgaXNTdHJpbmcgdG9rXFxuICAgIHRva0Nhc2UgdG9rIC0xXFxuICAgIG5vblRva0Nhc2VcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIGZ1bmN0aW9uKExfbm9uVG9rQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rQ2FzZSl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3RvaykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKExfdG9rQ2FzZSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1N0cmluZykoTF90b2spKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rQ2FzZSkoTF90b2spKGxhenkoLTEpKX0pKShMX25vblRva0Nhc2UpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIndpdGhDb25zXCIpKShsYXp5KDMpKShsYXp5KFwid2l0aENvbnMgbCBuaWxDYXNlIGNvbnQgPSBpc0NvbnMgbCAobCAoXFxcXGggdCBEIC4gY29udCBoIHQpIG5pbENhc2UpIG5pbENhc2VcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBmdW5jdGlvbihMX25pbENhc2Upe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2wpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX2gpKExfdCl9fX19KSkoTF9uaWxDYXNlKX0pKShMX25pbENhc2UpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlmTm90RXJyXCIpKShsYXp5KDIpKShsYXp5KFwiaWZOb3RFcnIgdGhpbmcgY29udCA9IGhhc1R5cGUgdGhpbmcgcGFyc2VFcnIgdGhpbmcgKGNvbnQgdGhpbmcpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90aGluZyl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX3RoaW5nKShMX3BhcnNlRXJyKShMX3RoaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfdGhpbmcpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VUb2tzXCIpKShsYXp5KDIpKShsYXp5KFwicGFyc2VUb2tzIHRva3MgZ3JvdXBzID1cXG4gIGlzTmlsIHRva3MgbmlsXFxuICAgIGlmTm90RXJyIChwYXJzZVRvayB0b2tzIGdyb3VwcykgXFxcXGxpc3QgLiBsaXN0IFxcXFxoIHQgLlxcbiAgICAgIGlmTm90RXJyIChwYXJzZVRva3MgdCBncm91cHMpIFxcXFxyZXMgLlxcbiAgICAgICAgY29ucyBoXFxuICAgICAgICAgIGFuZCAoaXNDb25zIHJlcykgKGlzQmxvY2tTdGFydCAoaGVhZCByZXMpKVxcbiAgICAgICAgICAgIGNvbnMgcmVzIG5pbFxcbiAgICAgICAgICAgIHJlc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX3Rva3MpKExfbmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlVG9rKShMX3Rva3MpKExfZ3JvdXBzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VUb2tzKShMX3QpKExfZ3JvdXBzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXMpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfcmVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQmxvY2tTdGFydCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3Jlcyl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3JlcykoTF9uaWwpfSkpKExfcmVzKX0pKX19KSl9fX0pKX19KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZVRva1wiKSkobGF6eSgyKSkobGF6eShcInBhcnNlVG9rIHRva3MgZ3JvdXBzID0gd2l0aENvbnMgdG9rcyBuaWwgXFxcXGggdCAuXFxuICB3aXRoVG9rZW4gaCB0b2tzIFxcXFx0eHQgcG9zIC5cXG4gICAgYXNzb2MgdHh0IGdyb3Vwc1xcbiAgICAgIFxcXFxjbG9zZSAuIHBhcnNlR3JvdXAgaCB0IG5pbCBjbG9zZSBncm91cHNcXG4gICAgICBpc1Rva2VuU3RhcnQgaCAnXFxcXG4nIChwYXJzZUluZGVudCBoIHQgbmlsIGdyb3VwcylcXG4gICAgICAgIHRva3NcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF90b2tzKShMX25pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF93aXRoVG9rZW4pKExfaCkoTF90b2tzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90eHQpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIHJlc29sdmUoTF9hc3NvYykoTF90eHQpKExfZ3JvdXBzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZSl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUdyb3VwKShMX2gpKExfdCkoTF9uaWwpKExfY2xvc2UpKExfZ3JvdXBzKX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RhcnQpKExfaCkobGF6eShcIlxcblwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUluZGVudCkoTF9oKShMX3QpKExfbmlsKShMX2dyb3Vwcyl9KSkoTF90b2tzKX0pKX19fSkpfX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZUdyb3VwXCIpKShsYXp5KDUpKShsYXp5KFwicGFyc2VHcm91cCBsZWZ0IHRva3MgZ3IgY2xvc2UgZ3JvdXBzID0gd2l0aENvbnMgdG9rcyAocGFyc2VFcnIgJ1VudGVybWluYXRlZCBncm91cCBzdGFydGluZyAnIChsb2MgbGVmdCkpXFxuICBcXFxcaCB0IC4gaXNUb2tlblN0cmluZyBoIGNsb3NlXFxuICAgIGVxIGNsb3NlICcpJ1xcbiAgICAgIGNvbnMgKHBhcmVuc0Zyb21Ub2tzIGxlZnQgaCAocmV2ZXJzZSBncikpIHRcXG4gICAgICBjb25zIChjb25zIGxlZnQgKGNvbnMgKHJldmVyc2UgZ3IpIChjb25zIGggbmlsKSkpIHRcXG4gICAgd2l0aFRva2VuIGhcXG4gICAgICBpZk5vdEVyciAocGFyc2VUb2sgdG9rcyBncm91cHMpIFxcXFxsaXN0IC4gbGlzdCBcXFxccmVzdEggcmVzdFQgLlxcbiAgICAgICAgcGFyc2VHcm91cCBsZWZ0IHJlc3RUIChjb25zIHJlc3RIIGdyKSBjbG9zZSBncm91cHNcXG4gICAgICBcXFxcdHh0IHBvcyAuXFxuICAgICAgICByYXNzb2MgdHh0IGdyb3Vwc1xcbiAgICAgICAgICBcXFxcb3BlbiAuIHBhcnNlRXJyIChzdHJDYXQgKGNvbnMgJ01pc21hdGNoZWQgZ3JvdXA6ICcgKGNvbnMgKHRva2VuU3RyaW5nIGxlZnQpIChjb25zIHR4dCAoY29ucyAnICcgbmlsKSkpKSkgKGxvYyBsZWZ0KVxcbiAgICAgICAgICBpZk5vdEVyciAocGFyc2VUb2sgdG9rcyBncm91cHMpIFxcXFxsaXN0IC4gbGlzdCBcXFxccmVzdEggcmVzdFQgLiBwYXJzZUdyb3VwIGxlZnQgcmVzdFQgKGNvbnMgcmVzdEggZ3IpIGNsb3NlIGdyb3Vwc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGVmdCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfZ3Ipe3JldHVybiBmdW5jdGlvbihMX2Nsb3NlKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfdG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIlVudGVybWluYXRlZCBncm91cCBzdGFydGluZyBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX2xlZnQpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShMX2Nsb3NlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX2Nsb3NlKShsYXp5KFwiKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVuc0Zyb21Ub2tzKShMX2xlZnQpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZXZlcnNlKShMX2dyKX0pKX0pKShMX3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2xlZnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZXZlcnNlKShMX2dyKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoTF9uaWwpfSkpfSkpfSkpKExfdCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF93aXRoVG9rZW4pKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZVRvaykoTF90b2tzKShMX2dyb3Vwcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0SCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdFQpe3JldHVybiByZXNvbHZlKExfcGFyc2VHcm91cCkoTF9sZWZ0KShMX3Jlc3RUKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfcmVzdEgpKExfZ3IpfSkpKExfY2xvc2UpKExfZ3JvdXBzKX19fSkpfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90eHQpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIHJlc29sdmUoTF9yYXNzb2MpKExfdHh0KShMX2dyb3VwcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3Blbil7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIk1pc21hdGNoZWQgZ3JvdXA6IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX2xlZnQpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF90eHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIiBcIikpKExfbmlsKX0pKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9sZWZ0KX0pKX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZVRvaykoTF90b2tzKShMX2dyb3Vwcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0SCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdFQpe3JldHVybiByZXNvbHZlKExfcGFyc2VHcm91cCkoTF9sZWZ0KShMX3Jlc3RUKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfcmVzdEgpKExfZ3IpfSkpKExfY2xvc2UpKExfZ3JvdXBzKX19fSkpfX0pKX0pKX19fSkpfSkpfX19KSl9fX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZUluZGVudFwiKSkobGF6eSg0KSkobGF6eShcInBhcnNlSW5kZW50IGluZGVudCB0b2tzIGdyIGdyb3VwcyA9XFxuICB3aXRoQ29ucyB0b2tzIChjb25zIChtYWtlUGFyZW5zICh0b2tlblBvcyBpbmRlbnQpIChsZXhFbmQgKGhlYWQgZ3IpKSAocmV2ZXJzZSBncikpIG5pbClcXG4gICAgXFxcXGggdCAuIG9yICh3aXRoVG9rZW4gaCBmYWxzZSAoXFxcXHR4dCBwb3MgLiByYXNzb2MgdHh0IGdyb3VwcyAoXFxcXG9wZW4gLiB0cnVlKSBmYWxzZSkpXFxuICAgICAgYW5kIChpc1Rva2VuU3RhcnQgaCAnXFxcXG4nKSAoPD0gKHN0ckxlbiAodG9rZW5TdHJpbmcgaCkpIChzdHJMZW4gKHRva2VuU3RyaW5nIGluZGVudCkpKVxcbiAgICAgIGNvbnMgKG1ha2VQYXJlbnMgKHRva2VuUG9zIGluZGVudCkgKHRva2VuUG9zIGgpIChyZXZlcnNlIGdyKSkgdG9rc1xcbiAgICAgIGlmTm90RXJyIChwYXJzZVRvayB0b2tzIGdyb3VwcykgXFxcXGxpc3QgLiBsaXN0IFxcXFxyZXN0SCByZXN0VCAuIHBhcnNlSW5kZW50IGluZGVudCByZXN0VCAoY29ucyByZXN0SCBncikgZ3JvdXBzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9pbmRlbnQpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX2dyKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfdG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21ha2VQYXJlbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5Qb3MpKExfaW5kZW50KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xleEVuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2dyKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JldmVyc2UpKExfZ3IpfSkpfSkpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhUb2tlbikoTF9oKShMX2ZhbHNlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90eHQpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIHJlc29sdmUoTF9yYXNzb2MpKExfdHh0KShMX2dyb3VwcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3Blbil7cmV0dXJuIHJlc29sdmUoTF90cnVlKX19KSkoTF9mYWxzZSl9fX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RhcnQpKExfaCkobGF6eShcIlxcblwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8keSRwKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9oKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9pbmRlbnQpfSkpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWtlUGFyZW5zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuUG9zKShMX2luZGVudCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblBvcykoTF9oKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JldmVyc2UpKExfZ3IpfSkpfSkpKExfdG9rcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZVRvaykoTF90b2tzKShMX2dyb3Vwcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0SCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdFQpe3JldHVybiByZXNvbHZlKExfcGFyc2VJbmRlbnQpKExfaW5kZW50KShMX3Jlc3RUKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfcmVzdEgpKExfZ3IpfSkpKExfZ3JvdXBzKX19fSkpfX0pKX0pKX19fSkpfX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsaXRcIikpKGxhenkoMSkpKGxhenkoXCJsaXQgdmFsdWUgPSBcXFxcZiAuIGYgdmFsdWVcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF92YWx1ZSl9LCAnbGl0Jyl9LCAnbGl0Jyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmVmXCIpKShsYXp5KDEpKShsYXp5KFwicmVmIG5hbWUgPSBcXFxcZiAuIGYgbmFtZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHNldERhdGFUeXBlKGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfbmFtZSl9LCAncmVmJyl9LCAncmVmJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGFtYmRhXCIpKShsYXp5KDIpKShsYXp5KFwibGFtYmRhIG5hbWUgYm9keSA9IFxcXFxmIC4gZiBuYW1lIGJvZHlcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKShMX25hbWUpKExfYm9keSl9LCAnbGFtYmRhJyl9fSwgJ2xhbWJkYScpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImFwcGx5XCIpKShsYXp5KDIpKShsYXp5KFwiYXBwbHkgZnVuYyBhcmcgPSBcXFxcZiAuIGYgZnVuYyBhcmdcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfZnVuYykoTF9hcmcpfSwgJ2FwcGx5Jyl9fSwgJ2FwcGx5Jyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGV0XCIpKShsYXp5KDMpKShsYXp5KFwibGV0IG5hbWUgdmFsdWUgYm9keSA9IFxcXFxmIC4gZiBuYW1lIHZhbHVlIGJvZHlcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiByZXNvbHZlKExfZikoTF9uYW1lKShMX3ZhbHVlKShMX2JvZHkpfSwgJ2xldCcpfX19LCAnbGV0Jyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYW5ub1wiKSkobGF6eSgzKSkobGF6eShcImFubm8gbmFtZSBkYXRhIGJvZHkgPSBcXFxcZiAuIGYgbmFtZSBkYXRhIGJvZHlcIikpKChmdW5jdGlvbigpe3JldHVybiBzZXREYXRhVHlwZShmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX2RhdGEpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIHJlc29sdmUoTF9mKShMX25hbWUpKExfZGF0YSkoTF9ib2R5KX0sICdhbm5vJyl9fX0sICdhbm5vJyl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwid2l0aFBhcmVuc1wiKSkobGF6eSgzKSkobGF6eShcIndpdGhQYXJlbnMgcCBlcnIgY29udCA9IGlzUGFyZW5zIHAgKHAgY29udCkgZXJyXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfaXNQYXJlbnMpKExfcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wKShMX2NvbnQpfSkpKExfZXJyKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzZXRQYXJlbnNcIikpKGxhenkoMikpKGxhenkoXCJzZXRQYXJlbnMgcCBmdW5jID0gaXNQYXJlbnMgcFxcbiAgcCBcXFxcc3RhcnQgZW5kIGNvbnRlbnQgLiBwYXJlbnMgc3RhcnQgZW5kIChmdW5jIGNvbnRlbnQpXFxuICBmdW5jIHBcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiByZXNvbHZlKExfaXNQYXJlbnMpKExfcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfZW5kKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250ZW50KXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVucykoTF9zdGFydCkoTF9lbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZnVuYykoTF9jb250ZW50KX0pKX19fX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Z1bmMpKExfcCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ3aXRoU3RyaXBwZWRcIikpKGxhenkoMikpKGxhenkoXCJ3aXRoU3RyaXBwZWQgbGlzdCBjb250ID0gd2l0aFBhcmVucyBsaXN0IChjb250IGxpc3QpIFxcXFxzdGFydCBlbmQgY29udGVudCAuIHdpdGhTdHJpcHBlZCBjb250ZW50IGNvbnRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfd2l0aFBhcmVucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfbGlzdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIHJlc29sdmUoTF93aXRoU3RyaXBwZWQpKExfY29udGVudCkoTF9jb250KX19fX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBvc2l0aW9uXCIpKShsYXp5KDEpKShsYXp5KFwicG9zaXRpb24gdGhpbmcgPSBpc1Rva2VuIHRoaW5nICh0b2tlblBvcyB0aGluZylcXG4gIGlzUGFyZW5zIHRoaW5nIChwYXJlbnNTdGFydCB0aGluZylcXG4gICAgaXNDb25zIHRoaW5nIChwb3NpdGlvbiAoaGVhZCB0aGluZykpXFxuICAgICAgLTFcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3RoaW5nKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfdGhpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5Qb3MpKExfdGhpbmcpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNQYXJlbnMpKExfdGhpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyZW5zU3RhcnQpKExfdGhpbmcpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX3RoaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdGhpbmcpfSkpfSkpKGxhenkoLTEpKX0pKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGV4RW5kXCIpKShsYXp5KDEpKShsYXp5KFwibGV4RW5kIHRoaW5nID0gaXNUb2tlbiB0aGluZyAoKyAodG9rZW5Qb3MgdGhpbmcpIChzdHJMZW4gKHRva2VuU3RyaW5nIHRoaW5nKSkpXFxuICBpc1BhcmVucyB0aGluZyAocGFyZW5zRW5kIHRoaW5nKVxcbiAgICBpc0NvbnMgdGhpbmcgKGxleEVuZCAobGFzdCB0aGluZykpXFxuICAgICAgLTFcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3RoaW5nKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfdGhpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5Qb3MpKExfdGhpbmcpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX3RoaW5nKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX3RoaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVuc0VuZCkoTF90aGluZyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfdGhpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGV4RW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xhc3QpKExfdGhpbmcpfSkpfSkpKGxhenkoLTEpKX0pKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibG9jXCIpKShsYXp5KDEpKShsYXp5KFwibG9jIHRoaW5nID0gXFxcXFxcXFxcXG4gIHAgPSBwb3NpdGlvbiB0aGluZ1xcbiAgbCA9IGVxIHAgLTEgJ2FuIHVua25vd24gbG9jYXRpb24nIHBcXG4gIC5cXG4gIHN0ckNhdCAoY29ucyAnYXQgJyAoY29ucyBsIG5pbCkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90aGluZyl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9sLCBMX3A7XG5cbkxfbCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKExfcCkobGF6eSgtMSkpKGxhenkoXCJhbiB1bmtub3duIGxvY2F0aW9uXCIpKShMX3ApfSk7XG5cbkxfcCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zaXRpb24pKExfdGhpbmcpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiYXQgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbCkoTF9uaWwpfSkpfSkpfSkoKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2NydWJcIikpKGxhenkoMSkpKGxhenkoXCJzY3J1YiBzdHIgPSBzdHJGcm9tTGlzdCAoc2NydWJMaXN0IChzdHJUb0xpc3Qgc3RyKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9zdHJGcm9tTGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zY3J1Ykxpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyVG9MaXN0KShMX3N0cil9KSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNjcnViTGlzdFwiKSkobGF6eSgxKSkobGF6eShcInNjcnViTGlzdCBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gXFxcXFxcXFxcXG4gICAgbmV4dCA9IHNjcnViTGlzdCB0XFxuICAgIC5cXG4gICAgZXEgaCAnXFxcXFxcXFwnIChjb25zIGggKGNvbnMgKGhlYWQgdCkgKHNjcnViTGlzdCAodGFpbCB0KSkpKVxcbiAgICAgIGVxIGggJ1xcXFxcXFwiJyAoY29ucyAnXFxcXFxcXFwnIChjb25zICdcXFxcXFxcIicgbmV4dCkpXFxuICAgICAgICBjb25zIGggbmV4dFxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbmV4dDtcblxuTF9uZXh0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zY3J1Ykxpc3QpKExfdCl9KTtcbnJldHVybiByZXNvbHZlKExfZXEpKExfaCkobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NjcnViTGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3QpfSkpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKExfaCkobGF6eShcIlxcXCJcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXCJcIikpKExfbmV4dCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKExfbmV4dCl9KSl9KSl9KSgpfX19fSkpKExfbmlsKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY3JlYXRlQXN0XCIpKShsYXp5KDIpKShsYXp5KFwiY3JlYXRlQXN0IGluTGlzdCBuYW1lcyA9IHdpdGhTdHJpcHBlZCBpbkxpc3QgXFxcXGxpc3QgLlxcbiAgaXNUb2tlbiBsaXN0IChjcmVhdGVMaXRPclJlZiAodG9rZW5TdHJpbmcgbGlzdCkgbmFtZXMpXFxuICAgIGxpc3RcXG4gICAgICBcXFxcaCB0IEQgLlxcbiAgICAgICAgaXNUb2tlblN0cmluZyBoICdcXFxcXFxcXFxcXFxcXFxcJyAoY3JlYXRlTGV0IGggdCBuYW1lcylcXG4gICAgICAgICAgaXNUb2tlblN0cmluZyBoICdcXFxcXFxcXEAnIChjcmVhdGVBbm5vIGggdCBuYW1lcylcXG4gICAgICAgICAgICBpc1Rva2VuU3RyaW5nIGggJ1xcXFxcXFxcJyAoY3JlYXRlTGFtYmRhIGggdCBuYW1lcylcXG4gICAgICAgICAgICAgIGNyZWF0ZUFwcGx5IGxpc3QgbmFtZXNcXG4gICAgICBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2luTGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiByZXNvbHZlKExfd2l0aFN0cmlwcGVkKShMX2luTGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlTGl0T3JSZWYpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfbGlzdCl9KSkoTF9uYW1lcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIlxcXFxcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUxldCkoTF9oKShMX3QpKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiXFxcXEBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQW5ubykoTF9oKShMX3QpKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVMYW1iZGEpKExfaCkoTF90KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFwcGx5KShMX2xpc3QpKExfbmFtZXMpfSkpfSkpfSkpfX19fSkpKExfbmlsKX0pKX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzdHJNYXRjaGVzXCIpKShsYXp5KDIpKShsYXp5KFwic3RyTWF0Y2hlcyBzdHIgcGF0ID0gaXNDb25zIChzdHJNYXRjaCBzdHIgcGF0KVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiByZXNvbHZlKExfaXNDb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ck1hdGNoKShMX3N0cikoTF9wYXQpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZGlnaXRcIikpKGxhenkoMCkpKGxhenkoXCJkaWdpdCA9IHJlZ2V4cCAnXlswLTldKyQnXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIl5bMC05XSskXCIpKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJiYWNrc2xhc2hDb2Rlc1wiKSkobGF6eSgwKSkobGF6eShcImJhY2tzbGFzaENvZGVzID0gJ2JmbnJ0J1wiKSkobGF6eShcImJmbnJ0XCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJiYWNrc2xhc2hWYWx1ZXNcIikpKGxhenkoMCkpKGxhenkoXCJiYWNrc2xhc2hWYWx1ZXMgPSAnXFxcXGJcXFxcZlxcXFxuXFxcXHJcXFxcdCdcIikpKGxhenkoXCJcXGJcXGZcXG5cXHJcXHRcIikpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvbnZlcnRTdHJpbmdFc2NhcGVcIikpKGxhenkoMykpKGxhenkoXCJjb252ZXJ0U3RyaW5nRXNjYXBlIGNoYXIgY29kZXMgdmFsdWVzID1cXG4gIGVxIGNvZGVzICcnXFxuICAgIGNoYXJcXG4gICAgZXEgY2hhciAoc3RyQXQgY29kZXMgMClcXG4gICAgICBzdHJBdCB2YWx1ZXMgMFxcbiAgICAgIGNvbnZlcnRTdHJpbmdFc2NhcGUgY2hhciAoc3RyU3Vic3RyaW5nIGNvZGVzIDEgMCkgKHN0clN1YnN0cmluZyB2YWx1ZXMgMSAwKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY2hhcil7cmV0dXJuIGZ1bmN0aW9uKExfY29kZXMpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlcyl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9jb2RlcykobGF6eShcIlwiKSkoTF9jaGFyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX2NoYXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQXQpKExfY29kZXMpKGxhenkoMCkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQXQpKExfdmFsdWVzKShsYXp5KDApKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnZlcnRTdHJpbmdFc2NhcGUpKExfY2hhcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdWJzdHJpbmcpKExfY29kZXMpKGxhenkoMSkpKGxhenkoMCkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3Vic3RyaW5nKShMX3ZhbHVlcykobGF6eSgxKSkobGF6eSgwKSl9KSl9KSl9KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY29udmVydFN0cmluZ0VzY2FwZXNcIikpKGxhenkoMykpKGxhenkoXCJjb252ZXJ0U3RyaW5nRXNjYXBlcyBvcmlnIHN0ciBjb250ID1cXG4gIGVxIHN0ciAnJ1xcbiAgICBjb250IHN0clxcbiAgICBlcSAoc3RyQXQgc3RyIDApICdcXFxcXFxcXCdcXG4gICAgICBlcSAoc3RyTGVuIHN0cikgMSAocGFyc2VFcnIgXFxcIkVycm9yLCBiYWNrc2xhc2ggd2l0aG91dCBjaGFyYWN0ZXIgaW4gc3RyaW5nOiBcXFwiIG9yaWcpXFxuICAgICAgICBjb252ZXJ0U3RyaW5nRXNjYXBlcyBvcmlnIChzdHJTdWJzdHJpbmcgc3RyIDIgMCkgXFxcXHJlc3QgLiBjb250XFxuICAgICAgICAgIHN0ckFkZFxcbiAgICAgICAgICAgIGNvbnZlcnRTdHJpbmdFc2NhcGUgKHN0ckF0IHN0ciAxKSBiYWNrc2xhc2hDb2RlcyBiYWNrc2xhc2hWYWx1ZXNcXG4gICAgICAgICAgICByZXN0XFxuICAgICAgY29udmVydFN0cmluZ0VzY2FwZXMgb3JpZyAoc3RyU3Vic3RyaW5nIHN0ciAxIDApIFxcXFxyZXN0IC4gY29udFxcbiAgICAgICAgc3RyQWRkXFxuICAgICAgICAgIHN0ckF0IHN0ciAwXFxuICAgICAgICAgIHJlc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29yaWcpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9zdHIpKGxhenkoXCJcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoTF9zdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQXQpKExfc3RyKShsYXp5KDApKX0pKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJMZW4pKExfc3RyKX0pKShsYXp5KDEpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiRXJyb3IsIGJhY2tzbGFzaCB3aXRob3V0IGNoYXJhY3RlciBpbiBzdHJpbmc6IFwiKSkoTF9vcmlnKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnZlcnRTdHJpbmdFc2NhcGVzKShMX29yaWcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3Vic3RyaW5nKShMX3N0cikobGF6eSgyKSkobGF6eSgwKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckFkZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb252ZXJ0U3RyaW5nRXNjYXBlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX3N0cikobGF6eSgxKSl9KSkoTF9iYWNrc2xhc2hDb2RlcykoTF9iYWNrc2xhc2hWYWx1ZXMpfSkpKExfcmVzdCl9KSl9fSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udmVydFN0cmluZ0VzY2FwZXMpKExfb3JpZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdWJzdHJpbmcpKExfc3RyKShsYXp5KDEpKShsYXp5KDApKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQWRkKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX3N0cikobGF6eSgwKSl9KSkoTF9yZXN0KX0pKX19KSl9KSl9KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VTdHJpbmdcIikpKGxhenkoMikpKGxhenkoXCJwYXJzZVN0cmluZyBzdHIgY29udCA9XFxuICBuZXEgKHN0ckF0IHN0ciAwKSAoc3RyQXQgc3RyIC0xKSAocGFyc2VFcnIgXFxcIkJhZGx5IHRlcm1pbmF0ZWQgc3RyaW5nOiBcXFwiIHN0cilcXG4gICAgY29udmVydFN0cmluZ0VzY2FwZXMgc3RyIChzdHJTdWJzdHJpbmcgc3RyIDEgLTEpIGNvbnRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF9uZXEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQXQpKExfc3RyKShsYXp5KDApKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX3N0cikobGF6eSgtMSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJCYWRseSB0ZXJtaW5hdGVkIHN0cmluZzogXCIpKShMX3N0cil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb252ZXJ0U3RyaW5nRXNjYXBlcykoTF9zdHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3Vic3RyaW5nKShMX3N0cikobGF6eSgxKSkobGF6eSgtMSkpfSkpKExfY29udCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjcmVhdGVMaXRPclJlZlwiKSkobGF6eSgyKSkobGF6eShcImNyZWF0ZUxpdE9yUmVmIHRvayBuYW1lcyA9XFxuICBjb250YWlucyBuYW1lcyB0b2tcXG4gICAgcmVmIHRva1xcbiAgICBvciAoc3RyU3RhcnRzV2l0aCB0b2sgJ1xcXFxcXFwiJykgKHN0clN0YXJ0c1dpdGggdG9rIFxcXCInXFxcIilcXG4gICAgICBwYXJzZVN0cmluZyB0b2sgXFxcXHN0ciAuIGxpdCBzdHJcXG4gICAgICBzdHJTdGFydHNXaXRoIHRvayAnLidcXG4gICAgICAgIGpzb25QYXJzZSAoc3RyQ2F0IChjb25zICcwJyAoY29ucyB0b2sgbmlsKSkpIChcXFxcZXJyIC4gcmVmIHRvaykgKFxcXFxpdGVtIC4gbGl0IGl0ZW0pXFxuICAgICAgICBvciAoYW5kICg+PSAoc3RyQXQgdG9rIDApICcwJykgKDw9IChzdHJBdCB0b2sgMCkgJzknKSkgKHN0clN0YXJ0c1dpdGggdG9rICctJylcXG4gICAgICAgICAganNvblBhcnNlIHRvayAoXFxcXGVyciAuIHJlZiB0b2spIChcXFxcaXRlbSAuIGxpdCBpdGVtKVxcbiAgICAgICAgICByZWYgdG9rXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX25hbWVzKShMX3RvaykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZWYpKExfdG9rKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKExfdG9rKShsYXp5KFwiXFxcIlwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJTdGFydHNXaXRoKShMX3RvaykobGF6eShcIidcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VTdHJpbmcpKExfdG9rKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfbGl0KShMX3N0cil9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3RhcnRzV2l0aCkoTF90b2spKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2pzb25QYXJzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIjBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF90b2spKExfbmlsKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiByZXNvbHZlKExfcmVmKShMX3Rvayl9fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiByZXNvbHZlKExfbGl0KShMX2l0ZW0pfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8keiRwKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckF0KShMX3RvaykobGF6eSgwKSl9KSkobGF6eShcIjBcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHkkcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJBdCkoTF90b2spKGxhenkoMCkpfSkpKGxhenkoXCI5XCIpKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0YXJ0c1dpdGgpKExfdG9rKShsYXp5KFwiLVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9qc29uUGFyc2UpKExfdG9rKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiByZXNvbHZlKExfcmVmKShMX3Rvayl9fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiByZXNvbHZlKExfbGl0KShMX2l0ZW0pfX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZikoTF90b2spfSkpfSkpfSkpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY3JlYXRlTGFtYmRhXCIpKShsYXp5KDMpKShsYXp5KFwiY3JlYXRlTGFtYmRhIHN0YXJ0IGxpc3QgbmFtZXMgPSBcXFxcXFxcXFxcbiAgZXJyID0gcGFyc2VFcnIgXFxcIkxhbWJkYSBuZWVkcyBhIHZhcmlhYmxlIG5hbWUsIGEgZG90LCBhbmQgYSBib2R5IFxcXCIgKGxvYyBzdGFydClcXG4gIC5cXG4gIHdpdGhDb25zIGxpc3QgZXJyIFxcXFxuYW1lIHJlc3QgLlxcbiAgICB3aXRoVG9rZW4gbmFtZSBlcnIgXFxcXG4gcCAuXFxuICAgICAgd2l0aENvbnMgcmVzdCBlcnIgXFxcXGRvdCBib2R5IC5cXG4gICAgICAgICMgYXJlIHRoZXNlIHBhcnRpYWwgYXBwbGljYXRpb25zIHRvbyBoYXJkIHRvIHJlYWQ/XFxuICAgICAgICBpc1Rva2VuU3RyaW5nIGRvdCAnLidcXG4gICAgICAgICAgaWZOb3RFcnIgKGNyZWF0ZUFzdCBib2R5IChjb25zIG4gbmFtZXMpKSBcXFxcYm9keUFzdCAuIGxhbWJkYSBuIGJvZHlBc3RcXG4gICAgICAgICAgaWZOb3RFcnIgKGNyZWF0ZUxhbWJkYSBzdGFydCByZXN0IChjb25zIG4gbmFtZXMpKSBcXFxcYm9keUFzdCAuIGxhbWJkYSBuIGJvZHlBc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9lcnI7XG5cbkxfZXJyID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkxhbWJkYSBuZWVkcyBhIHZhcmlhYmxlIG5hbWUsIGEgZG90LCBhbmQgYSBib2R5IFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfc3RhcnQpfSkpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX2xpc3QpKExfZXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhUb2tlbikoTF9uYW1lKShMX2VycikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfcCl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9yZXN0KShMX2VycikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZG90KXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfZG90KShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBc3QpKExfYm9keSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX24pKExfbmFtZXMpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2JvZHlBc3Qpe3JldHVybiByZXNvbHZlKExfbGFtYmRhKShMX24pKExfYm9keUFzdCl9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlTGFtYmRhKShMX3N0YXJ0KShMX3Jlc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9uKShMX25hbWVzKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5QXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xhbWJkYSkoTF9uKShMX2JvZHlBc3QpfX0pKX0pKX19fSkpfX19KSl9fX0pKX0pKCl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY3JlYXRlQW5ub1wiKSkobGF6eSgzKSkobGF6eShcImNyZWF0ZUFubm8gc3RhcnQgbGlzdCBuYW1lcyA9XFxuICB3aXRoQ29ucyBsaXN0IChwYXJzZUVyciBcXFwiTm8gYW5ub3RhdGlvbiBuYW1lIG9yIGRhdGEgaW4gYW5ub3RhdGlvbiBcXFwiIChsb2Mgc3RhcnQpKSBcXFxcbmFtZSByZXN0IC5cXG4gICAgd2l0aENvbnMgcmVzdCAocGFyc2VFcnIgXFxcIk5vIGRhdGEgZm9yIGFubm90YXRpb24gXFxcIiAobG9jIHN0YXJ0KSkgXFxcXGRhdGEgcmVzdCAuIFxcXFxcXFxcXFxuICAgICAgZmluaXNoIGRhdGEgYm9keSA9IGlmTm90RXJyIChjcmVhdGVBc3QgYm9keSBuYW1lcykgXFxcXGJvZHlBc3QgLlxcbiAgICAgICAgY2xlYW5Ub2tlbnMgc3RhcnQgbmFtZSBcXFxcbmFtZSAuXFxuICAgICAgICAgIGNsZWFuVG9rZW5zIHN0YXJ0IGRhdGEgXFxcXGRhdGEgLlxcbiAgICAgICAgICAgIGFubm8gbmFtZSBkYXRhIGJvZHlBc3RcXG4gICAgICAuXFxuICAgICAgaXNUb2tlblN0cmluZyBkYXRhICcuJ1xcbiAgICAgICAgZmluaXNoIG5pbCByZXN0XFxuICAgICAgICB3aXRoU3RyaXBwZWQgZGF0YSBcXFxcZGF0YSAuXFxuICAgICAgICAgIHdpdGhDb25zIHJlc3QgKHBhcnNlRXJyIFxcXCJObyBib2R5IGZvciBhbm5vdGF0aW9uIFxcXCIgKGxvYyBzdGFydCkpIFxcXFxkb3QgYm9keSAuXFxuICAgICAgICAgICAgaXNUb2tlblN0cmluZyBkb3QgJy4nXFxuICAgICAgICAgICAgICBmaW5pc2ggZGF0YSBib2R5XFxuICAgICAgICAgICAgICBwYXJzZUVyciBcXFwiQW5ub3RhdGlvbiBleHBlY3RzIGRvdCBhZnRlciBuYW1lIGFuZCBkYXRhIFxcXCIgKGxvYyBzdGFydClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTm8gYW5ub3RhdGlvbiBuYW1lIG9yIGRhdGEgaW4gYW5ub3RhdGlvbiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX3N0YXJ0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX3Jlc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJObyBkYXRhIGZvciBhbm5vdGF0aW9uIFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfc3RhcnQpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RhdGEpe3JldHVybiBmdW5jdGlvbihMX3Jlc3RfMCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9maW5pc2g7XG5cbkxfZmluaXNoID0gKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGF0YV8xKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9ib2R5KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5QXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NsZWFuVG9rZW5zKShMX3N0YXJ0KShMX25hbWUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWVfMil7cmV0dXJuIHJlc29sdmUoTF9jbGVhblRva2VucykoTF9zdGFydCkoTF9kYXRhXzEpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RhdGFfMyl7cmV0dXJuIHJlc29sdmUoTF9hbm5vKShMX25hbWVfMikoTF9kYXRhXzMpKExfYm9keUFzdCl9fSkpfX0pKX19KSl9fX0pO1xucmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2RhdGEpKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbmlzaCkoTF9uaWwpKExfcmVzdF8wKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhTdHJpcHBlZCkoTF9kYXRhKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kYXRhXzEpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfcmVzdF8wKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTm8gYm9keSBmb3IgYW5ub3RhdGlvbiBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX3N0YXJ0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kb3Qpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9kb3QpKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbmlzaCkoTF9kYXRhXzEpKExfYm9keSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkFubm90YXRpb24gZXhwZWN0cyBkb3QgYWZ0ZXIgbmFtZSBhbmQgZGF0YSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX3N0YXJ0KX0pKX0pKX19fSkpfX0pKX0pKX0pKCl9fX0pKX19fSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImJvZHlTdHJ1Y3RQYXRcIikpKGxhenkoMCkpKGxhenkoXCJib2R5U3RydWN0UGF0ID0gcmVnZXhwICdcXFxcXFxcXHxcXFxcXFxcXFxcXFxcXFxcfFxcXFxcXFxcQCdcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVnZXhwKShsYXp5KFwiXFxcXHxcXFxcXFxcXHxcXFxcQFwiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY3JlYXRlQXBwbHlcIikpKGxhenkoMikpKGxhenkoXCJjcmVhdGVBcHBseSBpbkxpc3QgbmFtZXMgPSB3aXRoU3RyaXBwZWQgaW5MaXN0IFxcXFxsaXN0IC5cXG4gIHdpdGhDb25zIGxpc3QgKHBhcnNlRXJyIFxcXCJGdW5jaW9uIGFwcGx5IGV4cGVjdGluZyBhIG5vbi1lbXB0eSBsaXN0IFxcXCIgKGxvYyBpbkxpc3QpKSBcXFxcaCB0IC5cXG4gICAgaWZOb3RFcnIgKGNyZWF0ZUFzdCBoIG5hbWVzKSBcXFxcZnVuYyAuIGNoYWluQXBwbHkgZnVuYyB0IG5hbWVzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9pbkxpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhTdHJpcHBlZCkoTF9pbkxpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkZ1bmNpb24gYXBwbHkgZXhwZWN0aW5nIGEgbm9uLWVtcHR5IGxpc3QgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9pbkxpc3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KShMX2gpKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiByZXNvbHZlKExfY2hhaW5BcHBseSkoTF9mdW5jKShMX3QpKExfbmFtZXMpfX0pKX19fSkpfX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImJsb2NrU3RhcnRzXCIpKShsYXp5KDApKShsYXp5KFwiYmxvY2tTdGFydHMgPSBjb25zICdcXFxcXFxcXCcgKGNvbnMgJ1xcXFxcXFxcXFxcXFxcXFwnIChjb25zICdcXFxcXFxcXEAnIG5pbCkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFxcXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiXFxcXEBcIikpKExfbmlsKX0pKX0pKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjaGFpbkFwcGx5XCIpKShsYXp5KDMpKShsYXp5KFwiY2hhaW5BcHBseSBmdW5jIGxpc3QgbmFtZXMgPSB3aXRoQ29ucyBsaXN0IGZ1bmMgXFxcXGFyZ0l0ZW0gcmVzdCAuXFxuICBhbmQgKGlzVG9rZW4gYXJnSXRlbSkgKGNvbnRhaW5zIGJsb2NrU3RhcnRzICh0b2tlblN0cmluZyBhcmdJdGVtKSlcXG4gICAgaWZOb3RFcnIgKGNyZWF0ZUFzdCBsaXN0IG5hbWVzKSBcXFxcYXJnIC4gYXBwbHkgZnVuYyBhcmdcXG4gICAgaWZOb3RFcnIgKGNyZWF0ZUFzdCBhcmdJdGVtIG5hbWVzKSBcXFxcYXJnIC4gY2hhaW5BcHBseSAoYXBwbHkgZnVuYyBhcmcpIHJlc3QgbmFtZXNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX2xpc3QpKExfZnVuYykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYXJnSXRlbSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF9hcmdJdGVtKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX2Jsb2NrU3RhcnRzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX2FyZ0l0ZW0pfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KShMX2xpc3QpKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIHJlc29sdmUoTF9hcHBseSkoTF9mdW5jKShMX2FyZyl9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KShMX2FyZ0l0ZW0pKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIHJlc29sdmUoTF9jaGFpbkFwcGx5KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FwcGx5KShMX2Z1bmMpKExfYXJnKX0pKShMX3Jlc3QpKExfbmFtZXMpfX0pKX0pKX19fSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNsZWFuVG9rZW5zXCIpKShsYXp5KDMpKShsYXp5KFwiY2xlYW5Ub2tlbnMgc3RhcnQgdG9rcyBjb250ID0gaXNUb2tlbiB0b2tzXFxuICBjb250ICh0b2tlblN0cmluZyB0b2tzKVxcbiAgd2l0aENvbnMgdG9rcyAoY29udCB0b2tzKSBcXFxcaGVhZCB0YWlsIC5cXG4gICAgY2xlYW5Ub2tlbnMgc3RhcnQgaGVhZCBcXFxcaGVhZCAuXFxuICAgICAgY2xlYW5Ub2tlbnMgc3RhcnQgdGFpbCBcXFxcdGFpbCAuXFxuICAgICAgICBjb250IChjb25zIGhlYWQgdGFpbClcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfdG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX3Rva3MpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfd2l0aENvbnMpKExfdG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX3Rva3MpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2hlYWQpe3JldHVybiBmdW5jdGlvbihMX3RhaWwpe3JldHVybiByZXNvbHZlKExfY2xlYW5Ub2tlbnMpKExfc3RhcnQpKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaGVhZF8wKXtyZXR1cm4gcmVzb2x2ZShMX2NsZWFuVG9rZW5zKShMX3N0YXJ0KShMX3RhaWwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3RhaWxfMSl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaGVhZF8wKShMX3RhaWxfMSl9KSl9fSkpfX0pKX19fSkpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNyZWF0ZUxldFwiKSkobGF6eSgzKSkobGF6eShcImNyZWF0ZUxldCBzdGFydCBsaXN0IG5hbWVzID0gd2l0aENvbnMgbGlzdFxcbiAgcGFyc2VFcnIgXFxcIk5vIHZhcmlhYmxlIG9yIGJvZHkgZm9yIGxldCBcXFwiIChsb2Mgc3RhcnQpXFxuICBcXFxcYmluZGluZyBib2R5IC4gZXEgYm9keSBuaWwgKGNyZWF0ZUFzdCBiaW5kaW5nIG5hbWUpXFxuICAgIGdldExldE5hbWVzIHN0YXJ0IGxpc3QgbmFtZXMgXFxcXG5ld05hbWVzIC5cXG4gICAgICBjcmVhdGVTdWJsZXRzIHN0YXJ0IGJpbmRpbmcgYm9keSBuZXdOYW1lcyBpZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJObyB2YXJpYWJsZSBvciBib2R5IGZvciBsZXQgXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xvYykoTF9zdGFydCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYmluZGluZyl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9ib2R5KShMX25pbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBc3QpKExfYmluZGluZykoTF9uYW1lKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldExldE5hbWVzKShMX3N0YXJ0KShMX2xpc3QpKExfbmFtZXMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25ld05hbWVzKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZVN1YmxldHMpKExfc3RhcnQpKExfYmluZGluZykoTF9ib2R5KShMX25ld05hbWVzKShMX2lkKX19KSl9KSl9fX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJnZXRMZXROYW1lc1wiKSkobGF6eSg0KSkobGF6eShcImdldExldE5hbWVzIHN0YXJ0IGxpc3QgbmFtZXMgY29udCA9IFxcXFxcXFxcXFxuICBlcnIgPSBwYXJzZUVyciBcXFwiTGV0IGV4cGVjdGVkIGJpbmRpbmcgXFxcIiAobG9jIHN0YXJ0KVxcbiAgLlxcbiAgd2l0aENvbnMgbGlzdCAoY29udCBuYW1lcykgXFxcXGJpbmRpbmcgYm9keSAuXFxuICAgIGlzVG9rZW5TdHJpbmcgYmluZGluZyAnLicgKGNvbnQgbmFtZXMpXFxuICAgICAgd2l0aFBhcmVucyBiaW5kaW5nIGVyciBcXFxcc3RhcnQgZW5kIGRlZiAuXFxuICAgICAgICB3aXRoQ29ucyBkZWYgZXJyIFxcXFxuYW1lIHJlc3QgLlxcbiAgICAgICAgICB3aXRoVG9rZW4gbmFtZSBlcnIgXFxcXHN0ciBwb3MgLlxcbiAgICAgICAgICAgIGdldExldE5hbWVzIHN0YXJ0IGJvZHkgKGNvbnMgc3RyIG5hbWVzKSBjb250XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZXJyO1xuXG5MX2VyciA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX3N0YXJ0KX0pKX0pO1xucmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2JpbmRpbmcpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9iaW5kaW5nKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhQYXJlbnMpKExfYmluZGluZykoTF9lcnIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0XzApe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX2RlZikoTF9lcnIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfd2l0aFRva2VuKShMX25hbWUpKExfZXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIHJlc29sdmUoTF9nZXRMZXROYW1lcykoTF9zdGFydF8wKShMX2JvZHkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9zdHIpKExfbmFtZXMpfSkpKExfY29udCl9fX0pKX19fSkpfX19fSkpfSkpfX19KSl9KSgpfX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjcmVhdGVTdWJsZXRzXCIpKShsYXp5KDUpKShsYXp5KFwiY3JlYXRlU3VibGV0cyBzdGFydCBiaW5kaW5nIGJvZHkgbmFtZXMgY29udCA9XFxuICBpc1Rva2VuU3RyaW5nIGJpbmRpbmcgJy4nIChpZk5vdEVyciAoY3JlYXRlQXN0IGJvZHkgbmFtZXMpIGNvbnQpXFxuICAgIHdpdGhDb25zIGJvZHkgKHBhcnNlRXJyIFxcXCJMZXQgZXhwZWN0ZWQgYSBib2R5IFxcXCIgKGxvYyBzdGFydCkpIFxcXFxib2R5SCBib2R5VCAuXFxuICAgICAgZ2V0TmFtZUFuZERlZiAocGFyZW5zU3RhcnQgYmluZGluZykgKHBhcmVuc0NvbnRlbnQgYmluZGluZykgbmFtZXMgXFxcXG5hbWUgZGVmIC5cXG4gICAgICAgIGNyZWF0ZVN1YmxldHMgc3RhcnQgYm9keUggYm9keVQgbmFtZXMgXFxcXGJvZHlBc3QgLlxcbiAgICAgICAgICBjb250IChsZXQgKHRva2VuU3RyaW5nIG5hbWUpIGRlZiBib2R5QXN0KVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2JpbmRpbmcpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfYmluZGluZykobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KShMX2JvZHkpKExfbmFtZXMpfSkpKExfY29udCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9ib2R5KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTGV0IGV4cGVjdGVkIGEgYm9keSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbG9jKShMX3N0YXJ0KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5SCl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keVQpe3JldHVybiByZXNvbHZlKExfZ2V0TmFtZUFuZERlZikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnNTdGFydCkoTF9iaW5kaW5nKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcmVuc0NvbnRlbnQpKExfYmluZGluZyl9KSkoTF9uYW1lcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZVN1YmxldHMpKExfc3RhcnQpKExfYm9keUgpKExfYm9keVQpKExfbmFtZXMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2JvZHlBc3Qpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sZXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfbmFtZSl9KSkoTF9kZWYpKExfYm9keUFzdCl9KSl9fSkpfX19KSl9fX0pKX0pKX19fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImdldE5hbWVBbmREZWZcIikpKGxhenkoNCkpKGxhenkoXCJnZXROYW1lQW5kRGVmIHBvcyBiaW5kaW5nIG5hbWVzIGNvbnQgPVxcbiAgd2l0aENvbnMgKHRhaWwgYmluZGluZykgKHBhcnNlRXJyIFxcXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBhdCBcXFwiIHBvcykgXFxcXHNuZCBzbmRUIC5cXG4gICAgaXNUb2tlblN0cmluZyBzbmQgJz0nIChpZk5vdEVyciAoY3JlYXRlQXN0IHNuZFQgbmFtZXMpIFxcXFxkZWYgLiBjb250IChoZWFkIGJpbmRpbmcpIGRlZilcXG4gICAgICBnZXRMZXRMYW1iZGEgcG9zICh0YWlsIGJpbmRpbmcpIG5pbCBuYW1lcyBcXFxcbGFtYiAuIGNvbnQgKGhlYWQgYmluZGluZykgbGFtYlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gZnVuY3Rpb24oTF9iaW5kaW5nKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2JpbmRpbmcpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBhdCBcIikpKExfcG9zKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zbmQpe3JldHVybiBmdW5jdGlvbihMX3NuZFQpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9zbmQpKGxhenkoXCI9XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9zbmRUKShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWYpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2JpbmRpbmcpfSkpKExfZGVmKX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRMZXRMYW1iZGEpKExfcG9zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfYmluZGluZyl9KSkoTF9uaWwpKExfbmFtZXMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xhbWIpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2JpbmRpbmcpfSkpKExfbGFtYil9fSkpfSkpfX19KSl9fX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImdldExldExhbWJkYVwiKSkobGF6eSg1KSkobGF6eShcImdldExldExhbWJkYSBwb3MgZGVmIGFyZ3MgbmFtZXMgY29udCA9XFxuICB3aXRoQ29ucyBkZWYgKHBhcnNlRXJyIFxcXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBhdCBcXFwiIHBvcykgXFxcXGFyZyByZXN0IC5cXG4gICAgbm90IChpc1Rva2VuIGFyZykgKHBhcnNlRXJyIFxcXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBhdCBcXFwiIHBvcylcXG4gICAgICBpc1Rva2VuU3RyaW5nIGFyZyAnPSdcXG4gICAgICAgIGlmTm90RXJyIChjcmVhdGVBc3QgKGNvbnMgKHRva2VuICdcXFxcXFxcXCcgcG9zKSAoYXBwZW5kIChyZXZlcnNlIGFyZ3MpIChjb25zICh0b2tlbiAnLicgKHBvc2l0aW9uIGFyZykpIHJlc3QpKSkgbmFtZXMpIGNvbnRcXG4gICAgICAgIGdldExldExhbWJkYSBwb3MgcmVzdCAoY29ucyBhcmcgYXJncykgbmFtZXMgY29udFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWYpe3JldHVybiBmdW5jdGlvbihMX2FyZ3Mpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX2RlZikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkxldCBleHBlY3RlZCBiaW5kaW5nIGF0IFwiKSkoTF9wb3MpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9ub3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF9hcmcpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBhdCBcIikpKExfcG9zKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfYXJnKShsYXp5KFwiPVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbikobGF6eShcIlxcXFxcIikpKExfcG9zKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FwcGVuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZXZlcnNlKShMX2FyZ3MpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbikobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zaXRpb24pKExfYXJnKX0pKX0pKShMX3Jlc3QpfSkpfSkpfSkpKExfbmFtZXMpfSkpKExfY29udCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRMZXRMYW1iZGEpKExfcG9zKShMX3Jlc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9hcmcpKExfYXJncyl9KSkoTF9uYW1lcykoTF9jb250KX0pKX0pKX19fSkpfX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2NhbkxpbmVHXCIpKShsYXp5KDUpKShsYXp5KFwic2NhbkxpbmVHIHN0ciBwYXQgZ3JvdXBzIG9uRGVmIG9uRXhwciA9IFxcXFxcXFxcXFxuICB0b2tzID0gdG9rZW5zIHN0ciBwYXRcXG4gIGdyb3VwVG9rcyA9IGZvbGRyIChcXFxcZWwgdmFsdWUgLiBlbCBcXFxcaCB0IC4gY29ucyBoIChjb25zIHQgdmFsdWUpKSAoY29ucyAnPScgYmxvY2tTdGFydHMpIGdyb3Vwc1xcbiAgLlxcbiAgIyBjaGVjayBpZiBpdCdzIGEgZGVmaW5pdGlvblxcbiAgZmluZCAoXFxcXHRvayAuIG9yIChjb250YWlucyBncm91cFRva3MgKHRva2VuU3RyaW5nIHRvaykpIChpc0NvbnMgKHN0ck1hdGNoICh0b2tlblN0cmluZyB0b2spICdeXFxcXG4nKSkpIHRva3MgKFxcXFxpdGVtIC4gaXNUb2tlblN0cmluZyBpdGVtICc9JykgZmFsc2VcXG4gICAgdG9rcyBcXFxcbmFtZSByZXN0IC4gXFxcXFxcXFxcXG4gICAgICBwYXJzZUl0IGZ1bmMgPSBcXFxcXFxcXFxcbiAgICAgICAgcGFyc2VkID0gcGFyc2VUb2tzIChjaGVja1NldERhdGFUeXBlIGZ1bmMgcmVzdCBuYW1lKSBncm91cHNcXG4gICAgICAgIC5cXG4gICAgICAgIG9uRGVmIChpZk5vdEVyciBwYXJzZWQgXFxcXGxpc3QgLiBjcmVhdGVEZWYgbGlzdCBuYW1lIChhcml0eSByZXN0IDApIHN0cilcXG4gICAgICAuXFxuICAgICAgaXNUb2tlblN0cmluZyAoaGVhZCByZXN0KSAnPSdcXG4gICAgICAgIGlzVG9rZW5TdHJpbmcgKGhlYWQgKHRhaWwgcmVzdCkpICdcXFxcXFxcXCdcXG4gICAgICAgICAgcGFyc2VJdCAoc2V0VHlwZUFubm8gKHRhaWwgcmVzdCkgKHRva2VuU3RyaW5nIG5hbWUpKVxcbiAgICAgICAgICBwYXJzZUl0ICh0YWlsIHJlc3QpXFxuICAgICAgICB0cmFuc2Zvcm1EZWYgbmFtZSByZXN0IFxcXFxkZWYgLlxcbiAgICAgICAgICBwYXJzZUl0IChjb25zICh0b2tlbiAnXFxcXFxcXFwnICgtIChwb3NpdGlvbiAoaGVhZCByZXN0KSkgMSkpIGRlZilcXG4gICAgaWZOb3RFcnIgKHBhcnNlVG9rcyB0b2tzIGdyb3VwcykgXFxcXGxpc3QgLiBvbkV4cHIgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIGZ1bmN0aW9uKExfb25EZWYpe3JldHVybiBmdW5jdGlvbihMX29uRXhwcil7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9ncm91cFRva3MsIExfdG9rcztcblxuTF9ncm91cFRva3MgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZvbGRyKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiByZXNvbHZlKExfZWwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdCkoTF92YWx1ZSl9KSl9fX0pKX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIj1cIikpKExfYmxvY2tTdGFydHMpfSkpKExfZ3JvdXBzKX0pO1xuXG5MX3Rva3MgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VucykoTF9zdHIpKExfcGF0KX0pO1xucmV0dXJuIHJlc29sdmUoTF9maW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udGFpbnMpKExfZ3JvdXBUb2tzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX3Rvayl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTWF0Y2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfdG9rKX0pKShsYXp5KFwiXlxcblwiKSl9KSl9KSl9fSkpKExfdG9rcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2l0ZW0pKGxhenkoXCI9XCIpKX19KSkoTF9mYWxzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tzKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3BhcnNlSXQ7XG5cbkxfcGFyc2VJdCA9IChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfcGFyc2VkO1xuXG5MX3BhcnNlZCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VUb2tzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NoZWNrU2V0RGF0YVR5cGUpKExfZnVuYykoTF9yZXN0KShMX25hbWUpfSkpKExfZ3JvdXBzKX0pO1xucmV0dXJuIHJlc29sdmUoTF9vbkRlZikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoTF9wYXJzZWQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfY3JlYXRlRGVmKShMX2xpc3QpKExfbmFtZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcml0eSkoTF9yZXN0KShsYXp5KDApKX0pKShMX3N0cil9fSkpfSkpfSkoKX19KTtcbnJldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3Jlc3QpfSkpKGxhenkoXCI9XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3Jlc3QpfSkpfSkpKGxhenkoXCJcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlSXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VHlwZUFubm8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9yZXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuU3RyaW5nKShMX25hbWUpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VJdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3Jlc3QpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdHJhbnNmb3JtRGVmKShMX25hbWUpKExfcmVzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlSXQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbikobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJF8pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zaXRpb24pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9yZXN0KX0pKX0pKShsYXp5KDEpKX0pKX0pKShMX2RlZil9KSl9fSkpfSkpfSkoKX19fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VUb2tzKShMX3Rva3MpKExfZ3JvdXBzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX29uRXhwcikoTF9saXN0KX19KSl9KSl9KSgpfX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VMaW5lR1wiKSkobGF6eSg2KSkobGF6eShcInBhcnNlTGluZUcgc3RyIHBhdCBuYW1lcyBncm91cHMgb25EZWYgb25FeHByID0gXFxcXFxcXFxcXG4gIGFzdENhbGxiYWNrIGNiID0gXFxcXGxpc3QgLiBpZk5vdEVyciAoY3JlYXRlQXN0IGxpc3QgbmFtZXMpIFxcXFxhc3QgLiBjYiBhc3RcXG4gIC5cXG4gIHNjYW5MaW5lRyBzdHIgcGF0IGdyb3VwcyAoYXN0Q2FsbGJhY2sgb25EZWYpIChhc3RDYWxsYmFjayBvbkV4cHIpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIGZ1bmN0aW9uKExfb25EZWYpe3JldHVybiBmdW5jdGlvbihMX29uRXhwcil7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9hc3RDYWxsYmFjaztcblxuTF9hc3RDYWxsYmFjayA9IChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NiKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2lmTm90RXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NyZWF0ZUFzdCkoTF9saXN0KShMX25hbWVzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hc3Qpe3JldHVybiByZXNvbHZlKExfY2IpKExfYXN0KX19KSl9fX0pO1xucmV0dXJuIHJlc29sdmUoTF9zY2FuTGluZUcpKExfc3RyKShMX3BhdCkoTF9ncm91cHMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXN0Q2FsbGJhY2spKExfb25EZWYpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXN0Q2FsbGJhY2spKExfb25FeHByKX0pKX0pKCl9fX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidHJhbnNmb3JtRGVmXCIpKShsYXp5KDMpKShsYXp5KFwidHJhbnNmb3JtRGVmIG5hbWUgdG9rcyBjb250ID0gd2l0aENvbnMgdG9rcyAocGFyc2VFcnIgXFxcIkJhZCBkZWZpbml0aW9uLCBleHBlY3RpbmcgdG9rZW5zXFxcIiAobG9jIG5hbWUpKSBcXFxcaCB0IC5cXG4gIGlzVG9rZW5TdHJpbmcgaCAnPSdcXG4gICAgaXNUb2tlblN0cmluZyAoaGVhZCB0KSAnXFxcXFxcXFwnXFxuICAgICAgY29udCAoY29ucyAodG9rZW4gJy4nIChwb3NpdGlvbiBoKSkgKHNldFR5cGVBbm5vIHQgKHRva2VuU3RyaW5nIG5hbWUpKSlcXG4gICAgICBjb250IChjb25zICh0b2tlbiAnLicgKHBvc2l0aW9uIGgpKSB0KVxcbiAgICB0cmFuc2Zvcm1EZWYgbmFtZSB0IFxcXFxsaXN0IC4gY29udCAoY29ucyBoIGxpc3QpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX3Rva3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJCYWQgZGVmaW5pdGlvbiwgZXhwZWN0aW5nIHRva2Vuc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfbmFtZSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCI9XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90KX0pKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX2gpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VHlwZUFubm8pKExfdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9uYW1lKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbikobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zaXRpb24pKExfaCl9KSl9KSkoTF90KX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RyYW5zZm9ybURlZikoTF9uYW1lKShMX3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfY29udCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKExfbGlzdCl9KSl9fSkpfSkpfX19KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2V0VHlwZUFubm9cIikpKGxhenkoMikpKGxhenkoXCJzZXRUeXBlQW5ubyB0b2tzIG5hbWUgPSBcXFxcXFxcXFxcbiAgdG9rID0gXFxcXHN0ciAuIHRva2VuIHN0ciAocG9zaXRpb24gdG9rcylcXG4gIC5cXG4gIGNvbnMgKHRvayAnXFxcXFxcXFxAJykgKGNvbnMgKHRvayAndHlwZScpIChjb25zICh0b2sgbmFtZSkgKGNvbnMgKHRvayAnLicpIHRva3MpKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfdG9rO1xuXG5MX3RvayA9IChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF90b2tlbikoTF9zdHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zaXRpb24pKExfdG9rcyl9KSl9fSk7XG5yZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiXFxcXEBcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKGxhenkoXCJ0eXBlXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShMX25hbWUpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKGxhenkoXCIuXCIpKX0pKShMX3Rva3MpfSkpfSkpfSkpfSkoKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNldERhdGFUeXBlQW5ub1wiKSkobGF6eSgyKSkobGF6eShcInNldERhdGFUeXBlQW5ubyB0b2tzIG5hbWUgPSBcXFxcXFxcXFxcbiAgdG9rID0gXFxcXHN0ciAuIHRva2VuIHN0ciAocG9zaXRpb24gdG9rcylcXG4gIC5cXG4gIGNvbnMgKHRvayAnXFxcXFxcXFxAJykgKGNvbnMgKHRvayAnZGF0YVR5cGUnKSAoY29ucyAodG9rICh0b2tlblN0cmluZyBuYW1lKSkgKGNvbnMgKHRvayAnLicpIHRva3MpKSlcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfdG9rO1xuXG5MX3RvayA9IChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF90b2tlbikoTF9zdHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zaXRpb24pKExfdG9rcyl9KSl9fSk7XG5yZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiXFxcXEBcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKGxhenkoXCJkYXRhVHlwZVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9uYW1lKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiLlwiKSl9KSkoTF90b2tzKX0pKX0pKX0pKX0pKCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjcmVhdGVEZWZcIikpKGxhenkoNCkpKGxhenkoXCJjcmVhdGVEZWYgZGVmIG5hbWUgYXJpdHkgc3JjID0gXFxcXFxcXFxcXG4gIHRvayBzdHIgPSB0b2tlbiBzdHIgKHBvc2l0aW9uIGRlZilcXG4gIC5cXG4gIGpzb25TdHJpbmdpZnkgKHRva2VuU3RyaW5nIG5hbWUpIChcXFxcZXJyIC4gcGFyc2VFcnIgKHN0ckNhdCAoY29ucyBcXFwiQmFkIGZ1bmN0aW9uIG5hbWUgXFxcIiAoY29ucyAobG9jIG5hbWUpIG5pbCkpKSBlcnIpIFxcXFxuYW1lU3RyIC5cXG4gICAganNvblN0cmluZ2lmeSBzcmMgKFxcXFxlcnIgLiBwYXJzZUVyciAoc3RyQ2F0IChjb25zIFxcXCJCYWQgc291cmNlIFxcXCIgKGNvbnMgKGxvYyBuYW1lKSBuaWwpKSkgZXJyKSBcXFxcc3JjU3RyIC5cXG4gICAgICAjY29ucyAodG9rICdkZWZpbmUnKSAoY29ucyAodG9rIG5hbWVTdHIpIChjb25zICh0b2sgKHN0clN0cmluZyBhcml0eSkpIChjb25zICh0b2sgc3JjU3RyKSAoY29ucyBkZWYgbmlsKSkpKVxcbiAgICAgIGNvbnMgKHRvayAnXFxcXFxcXFxAJykgKGNvbnMgKGNvbnMgKHRvayAnZGVmaW5pdGlvbicpIChjb25zICh0b2sgbmFtZSkgbmlsKSkgKGNvbnMgKHRvayAnLicpIChjb25zICh0b2sgJ2RlZmluZScpIChjb25zICh0b2sgbmFtZVN0cikgKGNvbnMgKHRvayAoc3RyU3RyaW5nIGFyaXR5KSkgKGNvbnMgKHRvayBzcmNTdHIpIChjb25zIGRlZiBuaWwpKSkpKSkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWYpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX2FyaXR5KXtyZXR1cm4gZnVuY3Rpb24oTF9zcmMpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfdG9rO1xuXG5MX3RvayA9IChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF90b2tlbikoTF9zdHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zaXRpb24pKExfZGVmKX0pKX19KTtcbnJldHVybiByZXNvbHZlKExfanNvblN0cmluZ2lmeSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9uYW1lKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJCYWQgZnVuY3Rpb24gbmFtZSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfbmFtZSl9KSkoTF9uaWwpfSkpfSkpfSkpKExfZXJyKX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZVN0cil7cmV0dXJuIHJlc29sdmUoTF9qc29uU3RyaW5naWZ5KShMX3NyYykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiQmFkIHNvdXJjZSBcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2MpKExfbmFtZSl9KSkoTF9uaWwpfSkpfSkpfSkpKExfZXJyKX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3JjU3RyKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiXFxcXEBcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RvaykobGF6eShcImRlZmluaXRpb25cIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKExfbmFtZSl9KSkoTF9uaWwpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKGxhenkoXCIuXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShsYXp5KFwiZGVmaW5lXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShMX25hbWVTdHIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2spKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyU3RyaW5nKShMX2FyaXR5KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rKShMX3NyY1N0cil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2RlZikoTF9uaWwpfSkpfSkpfSkpfSkpfSkpfSkpfSkpfX0pKX19KSl9KSgpfX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJjaGVja1NldERhdGFUeXBlXCIpKShsYXp5KDMpKShsYXp5KFwiY2hlY2tTZXREYXRhVHlwZSB0b2tzIGN1clRva3MgbmFtZSA9IHdpdGhDb25zIGN1clRva3MgdG9rcyBcXFxcaCB0IC5cXG4gIGlzVG9rZW5TdHJpbmcgaCAnPSdcXG4gICAgaXNUb2tlblN0cmluZyAoaGVhZCB0KSAnXFxcXFxcXFwnXFxuICAgICAgc2V0RGF0YVR5cGVBbm5vIHRva3MgbmFtZVxcbiAgICAgIHRva3NcXG4gICAgY2hlY2tTZXREYXRhVHlwZSB0b2tzIHQgbmFtZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfY3VyVG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIHJlc29sdmUoTF93aXRoQ29ucykoTF9jdXJUb2tzKShMX3Rva3MpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiPVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdCl9KSkobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0RGF0YVR5cGVBbm5vKShMX3Rva3MpKExfbmFtZSl9KSkoTF90b2tzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NoZWNrU2V0RGF0YVR5cGUpKExfdG9rcykoTF90KShMX25hbWUpfSkpfX19KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYXJpdHlcIikpKGxhenkoMikpKGxhenkoXCJhcml0eSB0b2tzIG4gPSBpc1Rva2VuU3RyaW5nIChoZWFkIHRva3MpICc9JyBuIChhcml0eSAodGFpbCB0b2tzKSAoKyBuIDEpKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfbil7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfdG9rcyl9KSkobGF6eShcIj1cIikpKExfbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcml0eSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3Rva3MpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJG8pKExfbikobGF6eSgxKSl9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ0b2tMaXN0U3RyXCIpKShsYXp5KDEpKShsYXp5KFwidG9rTGlzdFN0ciB0b2tzID0ganNvblN0cmluZ2lmeSAoam9pbiAobWFwIChcXFxcdCAuIHRva2VuU3RyaW5nIHQpIHRva3MpICcgJylcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiByZXNvbHZlKExfanNvblN0cmluZ2lmeSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9qb2luKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF90KX19KSkoTF90b2tzKX0pKShsYXp5KFwiIFwiKSl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImxpbmVQYXRcIikpKGxhenkoMCkpKGxhenkoXCJsaW5lUGF0ID0gcmVnZXhwICdcXFxcXFxcXHI/XFxcXFxcXFxuKD89W14gXXwkKSdcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVnZXhwKShsYXp5KFwiXFxcXHI/XFxcXG4oPz1bXiBdfCQpXCIpKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJlbXB0eUxpbmVQYXRcIikpKGxhenkoMCkpKGxhenkoXCJlbXB0eUxpbmVQYXQgPSByZWdleHAgJyheWyBcXFxcXFxcXGldKlxcXFxcXFxcIy4qfF5bIFxcXFxcXFxcaV0qJHxeXFxcXFxcXFxyP1xcXFxcXFxcblsgXFxcXFxcXFxpXSokKSdcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVnZXhwKShsYXp5KFwiKF5bIFxcXFxpXSpcXFxcIy4qfF5bIFxcXFxpXSokfF5cXFxccj9cXFxcblsgXFxcXGldKiQpXCIpKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsaW5lU2NydWJcIikpKGxhenkoMCkpKGxhenkoXCJsaW5lU2NydWIgPSByZWdleHBGbGFncyAnXFxcXFxcXFxyXFxcXFxcXFxuJyAnZydcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVnZXhwRmxhZ3MpKGxhenkoXCJcXFxcclxcXFxuXCIpKShsYXp5KFwiZ1wiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGluZXNGb3JGaWxlXCIpKShsYXp5KDEpKShsYXp5KFwibGluZXNGb3JGaWxlIHRleHQgPSBmaWx0ZXJcXG4gIFxcXFxsaW5lIC4gaXNOaWwgKHN0ck1hdGNoIGxpbmUgZW1wdHlMaW5lUGF0KVxcbiAgc3RyU3BsaXQgKHN0clJlcGxhY2UgdGV4dCBsaW5lU2NydWIgJ1xcXFxuJykgbGluZVBhdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdGV4dCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpbmUpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTWF0Y2gpKExfbGluZSkoTF9lbXB0eUxpbmVQYXQpfSkpfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clNwbGl0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clJlcGxhY2UpKExfdGV4dCkoTF9saW5lU2NydWIpKGxhenkoXCJcXG5cIikpfSkpKExfbGluZVBhdCl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRlZlBhdFwiKSkobGF6eSgwKSkobGF6eShcImRlZlBhdCA9IHJlZ2V4cCAnXlteID1dKy4qID0oIHwkKSdcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVnZXhwKShsYXp5KFwiXlteID1dKy4qID0oIHwkKVwiKSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidW5hbmNob3JlZERlZlBhdFwiKSkobGF6eSgwKSkobGF6eShcInVuYW5jaG9yZWREZWZQYXQgPSByZWdleHAgJ14oKD86XFxcXFxcXFxzKlxcXFxcXFxcbnwjW15cXFxcXFxcXG5dKlxcXFxcXFxcbikqKShbXj1cXFxcXFxcXG5dKikoPVxcXFxcXFxcKFtePV0rPXw9KT8nXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlZ2V4cCkobGF6eShcIl4oKD86XFxcXHMqXFxcXG58I1teXFxcXG5dKlxcXFxuKSopKFtePVxcXFxuXSopKD1cXFxcKFtePV0rPXw9KT9cIikpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcIm5hbWVzRm9yTGluZXNcIikpKGxhenkoMSkpKGxhenkoXCJuYW1lc0ZvckxpbmVzIGxpbmVzID0gZm9sZGxcXG4gIFxcXFxyZXN1bHQgbGluZSAuIFxcXFxcXFxcXFxuICAgIG0gPSBzdHJNYXRjaCBsaW5lIGRlZlBhdFxcbiAgICAuXFxuICAgIGlzTmlsIG0gcmVzdWx0IChjb25zIChoZWFkICh0YWlsIG0pKSByZXN1bHQpXFxuICBuaWxcXG4gIGxpbmVzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lcyl7cmV0dXJuIHJlc29sdmUoTF9mb2xkbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX207XG5cbkxfbSA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTWF0Y2gpKExfbGluZSkoTF9kZWZQYXQpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX20pKExfcmVzdWx0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX20pfSkpfSkpKExfcmVzdWx0KX0pKX0pKCl9fX0pKShMX25pbCkoTF9saW5lcyl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJ1blBhcnNlRmlsdGVyc1wiKSkobGF6eSgyKSkobGF6eShcInJ1blBhcnNlRmlsdGVycyBmaWx0ZXJzIGxpbmUgPSBmaWx0ZXJzXFxuICBcXFxcaCB0IEQgLiBiaW5kIChoIGxpbmUpIFxcXFxmaWx0ZXJlZCAuIHJ1blBhcnNlRmlsdGVycyB0IGZpbHRlcmVkXFxuICBsaW5lXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWx0ZXJzKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlcnMpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oKShMX2xpbmUpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbHRlcmVkKXtyZXR1cm4gcmVzb2x2ZShMX3J1blBhcnNlRmlsdGVycykoTF90KShMX2ZpbHRlcmVkKX19KSl9fX19KSkoTF9saW5lKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlzQmxvY2tTdGFydFwiKSkobGF6eSgxKSkobGF6eShcImlzQmxvY2tTdGFydCB0b2sgPSBhbmRcXG4gIG9yIChpc1Rva2VuIHRvaykgKGlzU3RyaW5nIHRvaylcXG4gIGNvbnRhaW5zIGJsb2NrU3RhcnRzIChzdHJUb2tlblN0cmluZyB0b2spXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2spe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfdG9rKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzU3RyaW5nKShMX3Rvayl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9ibG9ja1N0YXJ0cykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJUb2tlblN0cmluZykoTF90b2spfSkpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWNyb1N1YlwiKSkobGF6eSgyKSkobGF6eShcIm1hY3JvU3ViIG1hY3MgZXhwciA9IHBvc3RQcm9jZXNzTWFjcm8gLTEgLTEgKGJhc2VNYWNyb1N1YiBtYWNzIGV4cHIpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9tYWNzKXtyZXR1cm4gZnVuY3Rpb24oTF9leHByKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc3RQcm9jZXNzTWFjcm8pKGxhenkoLTEpKShsYXp5KC0xKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcykoTF9leHByKX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvbnNpZnlNYWNyb1ZhbHVlXCIpKShsYXp5KDEpKShsYXp5KFwiY29uc2lmeU1hY3JvVmFsdWUgdmFsdWUgPSBpc0NvbnMgdmFsdWUgdmFsdWUgKGNvbnMgdmFsdWUgbmlsKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX3ZhbHVlKShMX3ZhbHVlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfdmFsdWUpKExfbmlsKX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYmFzZU1hY3JvU3ViXCIpKShsYXp5KDIpKShsYXp5KFwiYmFzZU1hY3JvU3ViIG1hY3MgZXhwciA9IGlzVG9rZW4gZXhwclxcbiAgZXhwclxcbiAgaXNQYXJlbnMgZXhwclxcbiAgICBleHByIFxcXFxzdGFydCBlbmQgY29udGVudCAuIFxcXFxcXFxcXFxuICAgICAgcmVzdWx0ID0gYmFzZU1hY3JvU3ViIG1hY3MgY29udGVudFxcbiAgICAgIC5cXG4gICAgICBpc1Rva2VuIHJlc3VsdCByZXN1bHQgKHBhcmVucyBzdGFydCBlbmQgcmVzdWx0KVxcbiAgICB3aXRoQ29ucyBleHByIGV4cHIgXFxcXGggdCAuXFxuICAgICAgaXNCbG9ja1N0YXJ0IGhcXG4gICAgICAgIGNvbnMgaFxcbiAgICAgICAgICBpc1Rva2VuU3RyaW5nIGggJ1xcXFxcXFxcXFxcXFxcXFwnXFxuICAgICAgICAgICAgbWFjcm9TdWJMZXQgbWFjcyB0XFxuICAgICAgICAgICAgbWFjcm9TdWJCb2R5ICcuJyBtYWNzIHRcXG4gICAgICAgIHdpdGhUb2tlbiBoXFxuICAgICAgICAgIFxcXFxcXFxcXFxuICAgICAgICAgICAgc3ViSCA9IGJhc2VNYWNyb1N1YiBtYWNzIGhcXG4gICAgICAgICAgICAuXFxuICAgICAgICAgICAgd2l0aFRva2VuIHN1YkhcXG4gICAgICAgICAgICAgIGNvbnMgc3ViSCAobWFwIChiYXNlTWFjcm9TdWIgbWFjcykgdClcXG4gICAgICAgICAgICAgIFxcXFx0b2sgcG9zIC4gYmFzZU1hY3JvU3ViIG1hY3MgKGNvbnMgc3ViSCB0KVxcbiAgICAgICAgICBcXFxcdG9rIHBvcyAuIGFzc29jIHRvayBtYWNzXFxuICAgICAgICAgICAgXFxcXGRlZiAuIGJhc2VNYWNyb1N1YiBtYWNzIChkZWYgdClcXG4gICAgICAgICAgICBjb25zIGggKG1hcCAoYmFzZU1hY3JvU3ViIG1hY3MpIHQpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9tYWNzKXtyZXR1cm4gZnVuY3Rpb24oTF9leHByKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfZXhwcikoTF9leHByKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9yZXN1bHQ7XG5cbkxfcmVzdWx0ID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcykoTF9jb250ZW50KX0pO1xucmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuKShMX3Jlc3VsdCkoTF9yZXN1bHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyZW5zKShMX3N0YXJ0KShMX2VuZCkoTF9yZXN1bHQpfSkpfSkoKX19fX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhDb25zKShMX2V4cHIpKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9pc0Jsb2NrU3RhcnQpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiXFxcXFxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFjcm9TdWJMZXQpKExfbWFjcykoTF90KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hY3JvU3ViQm9keSkobGF6eShcIi5cIikpKExfbWFjcykoTF90KX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3dpdGhUb2tlbikoTF9oKShmdW5jdGlvbigpe1xudmFyIExfc3ViSDtcblxuTF9zdWJIID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcykoTF9oKX0pO1xucmV0dXJuIHJlc29sdmUoTF93aXRoVG9rZW4pKExfc3ViSCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3N1YkgpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFwKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Jhc2VNYWNyb1N1YikoTF9tYWNzKX0pKShMX3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gcmVzb2x2ZShMX2Jhc2VNYWNyb1N1YikoTF9tYWNzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfc3ViSCkoTF90KX0pKX19fSkpfSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiByZXNvbHZlKExfYXNzb2MpKExfdG9rKShMX21hY3MpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWYpKExfdCl9KSl9fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTWFjcm9TdWIpKExfbWFjcyl9KSkoTF90KX0pKX0pKX19fSkpfSkpfX19KSl9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWNyb1N1YkxldFwiKSkobGF6eSgyKSkobGF6eShcIm1hY3JvU3ViTGV0IG1hY3MgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGlzVG9rZW5TdHJpbmcgaCAnLidcXG4gICAgY29ucyBoIChiYXNlTWFjcm9TdWIgbWFjcyB0KVxcbiAgICBjb25zIChzZXRQYXJlbnMgaCBcXFxcY29udGVudCAuIG1hY3JvU3ViQm9keSAnPScgbWFjcyBjb250ZW50KSAobWFjcm9TdWJMZXQgbWFjcyB0KVxcbiAgIyBEb24ndCBib3RoZXIgd2l0aCBwYXJzZSBlcnJvcnMgYXQgdGhpcyBwb2ludCAtLSBhc3QgZ2VuZXJhdG9yIHdpbGwgZGV0ZWN0IHRoZW1cXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Jhc2VNYWNyb1N1YikoTF9tYWNzKShMX3QpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRQYXJlbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIHJlc29sdmUoTF9tYWNyb1N1YkJvZHkpKGxhenkoXCI9XCIpKShMX21hY3MpKExfY29udGVudCl9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFjcm9TdWJMZXQpKExfbWFjcykoTF90KX0pKX0pKX19fX0pKShMX25pbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWNyb1N1YkJvZHlcIikpKGxhenkoMykpKGxhenkoXCJtYWNyb1N1YkJvZHkgY2hhciBtYWNzIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBjb25zIGhcXG4gICAgaXNUb2tlblN0cmluZyBoIGNoYXIgYmFzZU1hY3JvU3ViIChtYWNyb1N1YkJvZHkgY2hhcilcXG4gICAgICBtYWNzXFxuICAgICAgdFxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jaGFyKXtyZXR1cm4gZnVuY3Rpb24oTF9tYWNzKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkoTF9jaGFyKShMX2Jhc2VNYWNyb1N1YikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9tYWNyb1N1YkJvZHkpKExfY2hhcil9KSkoTF9tYWNzKShMX3QpfSkpfX19fSkpKExfbmlsKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwb3N0UHJvY2Vzc01hY3JvXCIpKShsYXp5KDMpKShsYXp5KFwicG9zdFByb2Nlc3NNYWNybyBiZWZvcmUgYWZ0ZXIgZXhwciA9IGlzU3RyaW5nIGV4cHJcXG4gIHRva2VuIGV4cHIgKGVxIGFmdGVyIC0xIGJlZm9yZSBhZnRlcilcXG4gIGlzUGFyZW5zIGV4cHJcXG4gICAgZXhwciBcXFxcc3RhcnQgZW5kIGNvbnRlbnRzIC4gcGFyZW5zIHN0YXJ0IGVuZCAocG9zdFByb2Nlc3NNYWNybyBzdGFydCBlbmQgY29udGVudHMpXFxuICAgIGlzQ29ucyBleHByXFxuICAgICAgZXhwciBcXFxcaCB0IC5cXG4gICAgICAgIGlzVG9rZW4gaFxcbiAgICAgICAgICBjb25zIGggKHBvc3RQcm9jZXNzTWFjcm8gKCsgMSAoKyAodG9rZW5Qb3MgaCkgKHN0ckxlbiAodG9rZW5TdHJpbmcgaCkpKSkgLTEgdClcXG4gICAgICAgICAgXFxcXFxcXFxcXG4gICAgICAgICAgICBwb3NTdGFydCA9IHBvc2l0aW9uIGhcXG4gICAgICAgICAgICBwb3NFbmQgPSBwb3NpdGlvbiB0XFxuICAgICAgICAgICAgdDIgPSBwb3N0UHJvY2Vzc01hY3JvIC0xIGFmdGVyIHRcXG4gICAgICAgICAgICBoMiA9IHBvc3RQcm9jZXNzTWFjcm8gYmVmb3JlIC0xIGhcXG4gICAgICAgICAgICAuXFxuICAgICAgICAgICAgZXEgcG9zU3RhcnQgLTFcXG4gICAgICAgICAgICAgIGNvbnMgKHBvc3RQcm9jZXNzTWFjcm8gYmVmb3JlIChwb3NpdGlvbiB0MikgaCkgdDJcXG4gICAgICAgICAgICAgIGNvbnMgaDIgKHBvc3RQcm9jZXNzTWFjcm8gKCsgMSAobGV4RW5kIGgyKSkgYWZ0ZXIgdClcXG4gICAgICBpc051bWJlciBleHByXFxuICAgICAgICB0b2tlbiAoc3RyU3RyaW5nIGV4cHIpIChlcSBhZnRlciAtMSBiZWZvcmUgYWZ0ZXIpXFxuICAgICAgICBleHByXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9iZWZvcmUpe3JldHVybiBmdW5jdGlvbihMX2FmdGVyKXtyZXR1cm4gZnVuY3Rpb24oTF9leHByKXtyZXR1cm4gcmVzb2x2ZShMX2lzU3RyaW5nKShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW4pKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoTF9hZnRlcikobGF6eSgtMSkpKExfYmVmb3JlKShMX2FmdGVyKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX2V4cHIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudHMpe3JldHVybiByZXNvbHZlKExfcGFyZW5zKShMX3N0YXJ0KShMX2VuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3N0UHJvY2Vzc01hY3JvKShMX3N0YXJ0KShMX2VuZCkoTF9jb250ZW50cyl9KSl9fX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfZXhwcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9leHByKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zdFByb2Nlc3NNYWNybykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykobGF6eSgxKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kbykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblBvcykoTF9oKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0ckxlbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9oKX0pKX0pKX0pKX0pKShsYXp5KC0xKSkoTF90KX0pKX0pKShmdW5jdGlvbigpe1xudmFyIExfaDIsIExfdDIsIExfcG9zRW5kLCBMX3Bvc1N0YXJ0O1xuXG5MX2gyID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3N0UHJvY2Vzc01hY3JvKShMX2JlZm9yZSkobGF6eSgtMSkpKExfaCl9KTtcblxuTF90MiA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcG9zdFByb2Nlc3NNYWNybykobGF6eSgtMSkpKExfYWZ0ZXIpKExfdCl9KTtcblxuTF9wb3NFbmQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX3QpfSk7XG5cbkxfcG9zU3RhcnQgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX2gpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2VxKShMX3Bvc1N0YXJ0KShsYXp5KC0xKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc3RQcm9jZXNzTWFjcm8pKExfYmVmb3JlKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aW9uKShMX3QyKX0pKShMX2gpfSkpKExfdDIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oMikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wb3N0UHJvY2Vzc01hY3JvKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyRvKShsYXp5KDEpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xleEVuZCkoTF9oMil9KSl9KSkoTF9hZnRlcikoTF90KX0pKX0pKX0pfX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc051bWJlcikoTF9leHByKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Rva2VuKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clN0cmluZykoTF9leHByKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX2FmdGVyKShsYXp5KC0xKSkoTF9iZWZvcmUpKExfYWZ0ZXIpfSkpfSkpKExfZXhwcil9KSl9KSl9KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZGVmTWFjcm9cIikpKGxhenkoMikpKGxhenkoXCJkZWZNYWNybyBuYW1lIGRlZiA9IGJpbmQgKGdldFZhbHVlICdtYWNyb0RlZnMnKSBcXFxcbWFjcyAuIHNldFZhbHVlICdtYWNyb0RlZnMnIChhY29ucyBuYW1lIGRlZiBtYWNzKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJtYWNyb0RlZnNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX21hY3Mpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJtYWNyb0RlZnNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnMpKExfbmFtZSkoTF9kZWYpKExfbWFjcyl9KSl9fSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZGVsaW1pdGVyTGlzdFByZWZpeFwiKSkobGF6eSgwKSkobGF6eShcImRlbGltaXRlckxpc3RQcmVmaXggPSBcXFwiXFxcXFxcXCIoPzpcXFxcXFxcXFxcXFxcXFxcLnxbXlxcXFxcXFwiXSkqXFxcXFxcXCJ8Jyg/OlxcXFxcXFxcXFxcXFxcXFwufFteJ10pKid8XFxcXFxcXFxuICp8Iy4qfCArXFxcIlwiKSkobGF6eShcIlxcXCIoPzpcXFxcXFxcXC58W15cXFwiXSkqXFxcInwnKD86XFxcXFxcXFwufFteJ10pKid8XFxcXG4gKnwjLip8ICtcIikpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlZ2V4cEVzY2FwZVBhdFwiKSkobGF6eSgwKSkobGF6eShcInJlZ2V4cEVzY2FwZVBhdCA9IHJlZ2V4cEZsYWdzICdbXFxcXFxcXFwtXFxcXFxcXFxbXFxcXFxcXFxdL1xcXFxcXFxce1xcXFxcXFxcfVxcXFxcXFxcKFxcXFxcXFxcKVxcXFxcXFxcKlxcXFxcXFxcK1xcXFxcXFxcP1xcXFxcXFxcLlxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXF5cXFxcXFxcXCRcXFxcXFxcXHxdJyAnZydcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVnZXhwRmxhZ3MpKGxhenkoXCJbXFxcXC1cXFxcW1xcXFxdL1xcXFx7XFxcXH1cXFxcKFxcXFwpXFxcXCpcXFxcK1xcXFw/XFxcXC5cXFxcXFxcXFxcXFxeXFxcXCRcXFxcfF1cIikpKGxhenkoXCJnXCIpKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhZGRUb2tlblwiKSkobGF6eSgxKSkobGF6eShcImFkZFRva2VuIGRlbCA9IGJpbmQgKGdldFZhbHVlICd0b2tlbkxpc3QnKVxcbiAgXFxcXGRlbHMgLiBjb250YWlucyBkZWxzIGRlbFxcbiAgICBmYWxzZVxcbiAgICBcXFxcXFxcXFxcbiAgICAgIG5ld0RlbHMgPSBpbnNlcnRTb3J0ZWQgKFxcXFxhIGIgLiA+IChzdHJMZW4gYSkgKHN0ckxlbiBiKSkgZGVsIGRlbHNcXG4gICAgICAuXFxuICAgICAgYmluZCAoc2V0VmFsdWUgJ3Rva2VuTGlzdCcgbmV3RGVscylcXG4gICAgICAgIFxcXFxfIC4gY29tcHV0ZVRva2VuUGF0IG5ld0RlbHNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RlbCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5MaXN0XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWxzKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX2RlbHMpKExfZGVsKShMX2ZhbHNlKShmdW5jdGlvbigpe1xudmFyIExfbmV3RGVscztcblxuTF9uZXdEZWxzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pbnNlcnRTb3J0ZWQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiByZXNvbHZlKExfJHopKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX2EpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX2IpfSkpfX19KSkoTF9kZWwpKExfZGVscyl9KTtcbnJldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInRva2VuTGlzdFwiKSkoTF9uZXdEZWxzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fKXtyZXR1cm4gcmVzb2x2ZShMX2NvbXB1dGVUb2tlblBhdCkoTF9uZXdEZWxzKX19KSl9KX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvbXB1dGVUb2tlblBhdFwiKSkobGF6eSgxKSkobGF6eShcImNvbXB1dGVUb2tlblBhdCBkZWxzID0gXFxcXFxcXFxcXG4gIGRlbFBhdHMgPSBtYXAgKFxcXFxpdGVtIC4gc3RyUmVwbGFjZSBpdGVtIHJlZ2V4cEVzY2FwZVBhdCBcXFwiXFxcXFxcXFwkJlxcXCIpIGRlbHNcXG4gIG5ld1BhdCA9IHN0ckNhdCAoY29ucyAnKCcgKGNvbnMgKGpvaW4gKGNvbnMgZGVsaW1pdGVyTGlzdFByZWZpeCBkZWxQYXRzKSAnfCcpIChjb25zICcpJyBuaWwpKSlcXG4gIC5cXG4gIHNldFZhbHVlICd0b2tlblBhdCcgbmV3UGF0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9kZWxzKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX25ld1BhdCwgTF9kZWxQYXRzO1xuXG5MX25ld1BhdCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIoXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfam9pbikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2RlbGltaXRlckxpc3RQcmVmaXgpKExfZGVsUGF0cyl9KSkobGF6eShcInxcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIilcIikpKExfbmlsKX0pKX0pKX0pKX0pO1xuXG5MX2RlbFBhdHMgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIHJlc29sdmUoTF9zdHJSZXBsYWNlKShMX2l0ZW0pKExfcmVnZXhwRXNjYXBlUGF0KShsYXp5KFwiXFxcXCQmXCIpKX19KSkoTF9kZWxzKX0pO1xucmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInRva2VuUGF0XCIpKShMX25ld1BhdCl9KSgpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhZGRUb2tlbkdyb3VwXCIpKShsYXp5KDIpKShsYXp5KFwiYWRkVG9rZW5Hcm91cCBvcGVuIGNsb3NlID0gYmluZCAoYWRkVG9rZW4gb3BlbilcXG4gIFxcXFxfIC4gYmluZCAoYWRkVG9rZW4gY2xvc2UpXFxuICAgIFxcXFxfIC4gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuR3JvdXBzJylcXG4gICAgICBcXFxcZ3IgLiBzZXRWYWx1ZSAndG9rZW5Hcm91cHMnIChhY29ucyBvcGVuIGNsb3NlIGdyKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3Blbil7cmV0dXJuIGZ1bmN0aW9uKExfY2xvc2Upe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbikoTF9vcGVuKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW4pKExfY2xvc2UpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX19fMCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5Hcm91cHNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2dyKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwidG9rZW5Hcm91cHNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnMpKExfb3BlbikoTF9jbG9zZSkoTF9ncil9KSl9fSkpfX0pKX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJlbkdyb3Vwc1wiKSkobGF6eSgwKSkobGF6eShcInBhcmVuR3JvdXBzID0gYWNvbnMgJygnICcpJyBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnMpKGxhenkoXCIoXCIpKShsYXp5KFwiKVwiKSkoTF9uaWwpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlXCIpKShsYXp5KDIpKShsYXp5KFwicGFyc2Ugc3RyIHBhdCA9IGlmTm90RXJyIChwYXJzZUluZGVudCAodG9rZW4gJ1xcXFxuJyAwKSAodG9rZW5zIHN0ciBwYXQpIG5pbCBwYXJlbkdyb3VwcykgXFxcXGxpc3QgLiBsaXN0IFxcXFxoIHQgLiBzdHJpcFBhcmVucyBoXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUluZGVudCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbikobGF6eShcIlxcblwiKSkobGF6eSgwKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbnMpKExfc3RyKShMX3BhdCl9KSkoTF9uaWwpKExfcGFyZW5Hcm91cHMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9zdHJpcFBhcmVucykoTF9oKX19fSkpfX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlR1wiKSkobGF6eSgzKSkobGF6eShcInBhcnNlRyBzdHIgcGF0IGdyb3VwcyA9IGlmTm90RXJyIChwYXJzZUluZGVudCAodG9rZW4gJ1xcXFxuJyAwKSAodG9rZW5zIHN0ciBwYXQpIG5pbCBncm91cHMpIFxcXFxsaXN0IC4gbGlzdCBcXFxcaCB0IC4gc3RyaXBQYXJlbnMgaFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIHJlc29sdmUoTF9pZk5vdEVycikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUluZGVudCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbikobGF6eShcIlxcblwiKSkobGF6eSgwKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbnMpKExfc3RyKShMX3BhdCl9KSkoTF9uaWwpKExfZ3JvdXBzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfc3RyaXBQYXJlbnMpKExfaCl9fX0pKX19KSl9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VUb0FzdFwiKSkobGF6eSgyKSkobGF6eShcInBhcnNlVG9Bc3Qgc3RyIHBhdCA9IGNyZWF0ZUFzdCAocGFyc2Ugc3RyIHBhdCkgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIHJlc29sdmUoTF9jcmVhdGVBc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2UpKExfc3RyKShMX3BhdCl9KSkoTF9uaWwpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicGFyc2VNXCIpKShsYXp5KDEpKShsYXp5KFwicGFyc2VNIHN0ciA9XFxuICBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYXQnKVxcbiAgICBcXFxcdG9rUGF0IC4gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuR3JvdXBzJylcXG4gICAgICBcXFxcZ3JvdXBzIC4gcGFyc2VHIHN0ciB0b2tQYXQgZ3JvdXBzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuUGF0XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tQYXQpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfcGFyc2VHKShMX3N0cikoTF90b2tQYXQpKExfZ3JvdXBzKX19KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzY2FuTGluZVwiKSkobGF6eSg0KSkobGF6eShcInNjYW5MaW5lIHN0ciBwYXQgb25EZWYgb25FeHByID0gc2NhbkxpbmVHIHN0ciBwYXQgcGFyZW5Hcm91cHMgb25EZWYgb25FeHByXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIGZ1bmN0aW9uKExfb25EZWYpe3JldHVybiBmdW5jdGlvbihMX29uRXhwcil7cmV0dXJuIHJlc29sdmUoTF9zY2FuTGluZUcpKExfc3RyKShMX3BhdCkoTF9wYXJlbkdyb3VwcykoTF9vbkRlZikoTF9vbkV4cHIpfX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZUxpbmVcIikpKGxhenkoNSkpKGxhenkoXCJwYXJzZUxpbmUgc3RyIHBhdCBuYW1lcyBvbkRlZiBvbkV4cHIgPSBwYXJzZUxpbmVHIHN0ciBwYXQgbmFtZXMgcGFyZW5Hcm91cHMgb25EZWYgb25FeHByXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX29uRGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9vbkV4cHIpe3JldHVybiByZXNvbHZlKExfcGFyc2VMaW5lRykoTF9zdHIpKExfcGF0KShMX25hbWVzKShMX3BhcmVuR3JvdXBzKShMX29uRGVmKShMX29uRXhwcil9fX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZUxpbmVNXCIpKShsYXp5KDEpKShsYXp5KFwicGFyc2VMaW5lTSBzdHIgPSBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYXQnKVxcbiAgXFxcXHRva1BhdCAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkdyb3VwcycpXFxuICAgIFxcXFxncm91cHMgLiBwYXJzZUxpbmVHIHN0ciB0b2tQYXQgbmlsIGdyb3VwcyBpZCBpZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlblBhdFwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rUGF0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlbkdyb3Vwc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlTGluZUcpKExfc3RyKShMX3Rva1BhdCkoTF9uaWwpKExfZ3JvdXBzKShMX2lkKShMX2lkKX19KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWNyb1N1Yk1cIikpKGxhenkoMSkpKGxhenkoXCJtYWNyb1N1Yk0gZXhwciA9XFxuICBiaW5kIChnZXRWYWx1ZSAnbWFjcm9EZWZzJylcXG4gICAgXFxcXG1hY3MgLiBtYWNyb1N1YiBtYWNzIGV4cHJcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2V4cHIpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcIm1hY3JvRGVmc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIHJlc29sdmUoTF9tYWNyb1N1YikoTF9tYWNzKShMX2V4cHIpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFjcm9QYXJzZVwiKSkobGF6eSgxKSkobGF6eShcIm1hY3JvUGFyc2Ugc3RyID1cXG4gIGJpbmQgKHBhcnNlTSBzdHIpXFxuICAgIFxcXFxleCAuIG1hY3JvU3ViTSBleFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VNKShMX3N0cil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZXgpe3JldHVybiByZXNvbHZlKExfbWFjcm9TdWJNKShMX2V4KX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInRva2Vuc01cIikpKGxhenkoMSkpKGxhenkoXCJ0b2tlbnNNIHN0ciA9XFxuICBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYXQnKVxcbiAgICBcXFxcZGVsaW1pdGVyUGF0IC4gdG9rZW5zIHN0ciBkZWxpbWl0ZXJQYXRcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3N0cil7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5QYXRcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2RlbGltaXRlclBhdCl7cmV0dXJuIHJlc29sdmUoTF90b2tlbnMpKExfc3RyKShMX2RlbGltaXRlclBhdCl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJwYXJzZUxpbmVzXCIpKShsYXp5KDIpKShsYXp5KFwicGFyc2VMaW5lcyBsaW5lcyByZXN1bHQgPSBsaW5lc1xcbiAgXFxcXGggdCBEIC4gYmluZCAocGFyc2VMaW5lTSBoKVxcbiAgICBcXFxcYXN0IC4gcGFyc2VMaW5lcyB0IChjb25zIGFzdCByZXN1bHQpXFxuICByZXZlcnNlIHJlc3VsdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZXMpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIHJlc29sdmUoTF9saW5lcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlTGluZU0pKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYXN0KXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlTGluZXMpKExfdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2FzdCkoTF9yZXN1bHQpfSkpfX0pKX19fX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JldmVyc2UpKExfcmVzdWx0KX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInBhcnNlRmlsZVwiKSkobGF6eSgxKSkobGF6eShcInBhcnNlRmlsZSB0ZXh0ID0gcGFyc2VMaW5lcyAobGluZXNGb3JGaWxlIHRleHQpIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdGV4dCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUxpbmVzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xpbmVzRm9yRmlsZSkoTF90ZXh0KX0pKShMX25pbCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNpbXBsZVNjYW5MaW5lXCIpKShsYXp5KDEpKShsYXp5KFwic2ltcGxlU2NhbkxpbmUgbGluZSA9IGJpbmQgKGdldFZhbHVlICd0b2tlblBhdCcpXFxuICBcXFxcdG9rZW5QYXQgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICBcXFxcZ3JvdXBzIC4gc2NhbkxpbmVHIGxpbmUgdG9rZW5QYXQgZ3JvdXBzIGlkIGlkXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlblBhdFwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rZW5QYXQpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfc2NhbkxpbmVHKShMX2xpbmUpKExfdG9rZW5QYXQpKExfZ3JvdXBzKShMX2lkKShMX2lkKX19KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzY2FuTGluZU1cIikpKGxhenkoMSkpKGxhenkoXCJzY2FuTGluZU0gbGluZSA9IGJpbmQgKGdldFZhbHVlICd0b2tlblBhdCcpXFxuICBcXFxcdG9rZW5QYXQgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICBcXFxcZ3JvdXBzIC4gYmluZCAoZ2V0VmFsdWUgJ3BhcnNlRmlsdGVycycpXFxuICAgICAgXFxcXGZpbHRlcnMgLiBiaW5kIChnZXRWYWx1ZSAnbWFjcm9EZWZzJylcXG4gICAgICAgIFxcXFxtYWNyb3MgLiBiaW5kIChydW5QYXJzZUZpbHRlcnMgZmlsdGVycyAoc2NhbkxpbmVHIGxpbmUgdG9rZW5QYXQgZ3JvdXBzIGlkIGlkKSlcXG4gICAgICAgICAgXFxcXHNjYW5uZWQgLiBtYWNyb1N1YiBtYWNyb3Mgc2Nhbm5lZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5QYXRcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Rva2VuUGF0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlbkdyb3Vwc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJwYXJzZUZpbHRlcnNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbHRlcnMpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcIm1hY3JvRGVmc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbWFjcm9zKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcnVuUGFyc2VGaWx0ZXJzKShMX2ZpbHRlcnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2NhbkxpbmVHKShMX2xpbmUpKExfdG9rZW5QYXQpKExfZ3JvdXBzKShMX2lkKShMX2lkKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zY2FubmVkKXtyZXR1cm4gcmVzb2x2ZShMX21hY3JvU3ViKShMX21hY3JvcykoTF9zY2FubmVkKX19KSl9fSkpfX0pKX19KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJuZXdQYXJzZUxpbmVcIikpKGxhenkoMikpKGxhenkoXCJuZXdQYXJzZUxpbmUgbmFtZXMgbGluZSA9IGJpbmQgKHNjYW5MaW5lTSBsaW5lKVxcbiAgXFxcXHNjYW5uZWQgLiBpZk5vdEVyciAoY3JlYXRlQXN0IHNjYW5uZWQgbmFtZXMpIFxcXFxhc3QgLiBhc3RcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2NhbkxpbmVNKShMX2xpbmUpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3NjYW5uZWQpe3JldHVybiByZXNvbHZlKExfaWZOb3RFcnIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY3JlYXRlQXN0KShMX3NjYW5uZWQpKExfbmFtZXMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FzdCl7cmV0dXJuIHJlc29sdmUoTF9hc3QpfX0pKX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJydW5MaW5lXCIpKShsYXp5KDIpKShsYXp5KFwicnVuTGluZSBuYW1lcyBsaW5lID0gYmluZCAobmV3UGFyc2VMaW5lIG5hbWVzIGxpbmUpXFxuICBcXFxcYXN0IC4gYmluZCAocnVuQXN0IGFzdClcXG4gICAgXFxcXHJlc3VsdCAuIGNvbnNcXG4gICAgICBhc3RcXG4gICAgICBpc1BhcnNlRXJyIHJlc3VsdFxcbiAgICAgICAgbGVmdCAocGFyc2VFcnJNc2cgcmVzdWx0KVxcbiAgICAgICAgcmlnaHQgcmVzdWx0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX25ld1BhcnNlTGluZSkoTF9uYW1lcykoTF9saW5lKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9hc3Qpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9ydW5Bc3QpKExfYXN0KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9hc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNQYXJzZUVycikoTF9yZXN1bHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGVmdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9wYXJzZUVyck1zZykoTF9yZXN1bHQpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmlnaHQpKExfcmVzdWx0KX0pKX0pKX19KSl9fSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicnVuTGluZXNcIikpKGxhenkoMikpKGxhenkoXCJydW5MaW5lcyBuYW1lcyBsaW5lcyA9IGxpbmVzXFxuICBcXFxcaCB0IEQgLiBiaW5kIChydW5MaW5lIG5hbWVzIGgpXFxuICAgIFxcXFxsaW5lIC4gYmluZCAocnVuTGluZXMgbmFtZXMgdClcXG4gICAgICBcXFxccmVzdCAuIGNvbnMgbGluZSByZXN0XFxuICBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lcyl7cmV0dXJuIHJlc29sdmUoTF9saW5lcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3J1bkxpbmUpKExfbmFtZXMpKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3J1bkxpbmVzKShMX25hbWVzKShMX3QpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9saW5lKShMX3Jlc3QpfX0pKX19KSl9fX19KSkoTF9uaWwpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicnVuRmlsZVwiKSkobGF6eSgxKSkobGF6eShcInJ1bkZpbGUgdGV4dCA9IFxcXFxcXFxcXFxuICBsaW5lcyA9IGxpbmVzRm9yRmlsZSB0ZXh0XFxuICBuYW1lcyA9IG5hbWVzRm9yTGluZXMgbGluZXNcXG4gIC5cXG4gIHJ1bkxpbmVzIG5hbWVzIGxpbmVzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90ZXh0KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX25hbWVzLCBMX2xpbmVzO1xuXG5MX25hbWVzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9uYW1lc0ZvckxpbmVzKShMX2xpbmVzKX0pO1xuXG5MX2xpbmVzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9saW5lc0ZvckZpbGUpKExfdGV4dCl9KTtcbnJldHVybiByZXNvbHZlKExfcnVuTGluZXMpKExfbmFtZXMpKExfbGluZXMpfSkoKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYmFzZUxvYWRcIikpKGxhenkoMSkpKGxhenkoXCJiYXNlTG9hZCBmaWxlID0gYmluZCAocmVhZEZpbGUgZmlsZSlcXG4gIFxcXFxyZXN1bHQgLiByZXN1bHRcXG4gICAgXFxcXGVyciAuIGVyclxcbiAgICBcXFxcY29udGVudHMgLiBiaW5kIChnZXRWYWx1ZSAnYWN0aXZlVG9rZW5QYWNrcycpXFxuICAgICAgXFxcXGFjdGl2ZVBhY2tzIC4gYmluZCByZXNldFN0ZFRva2VuUGFja3NcXG4gICAgICAgIFxcXFxfIC4gYmluZCAocnVuRmlsZSBjb250ZW50cylcXG4gICAgICAgICAgXFxcXHJlc3VsdCAuIGlzTmlsIGFjdGl2ZVBhY2tzXFxuICAgICAgICAgICAgYmluZCByZXNldFN0ZFRva2VuUGFja3NcXG4gICAgICAgICAgICAgIFxcXFxfIC4gcmVzdWx0XFxuICAgICAgICAgICAgYmluZCAocmVzZXRUb2tlblBhY2tzIGFjdGl2ZVBhY2tzKVxcbiAgICAgICAgICAgICAgICBcXFxcXyAuIHJlc3VsdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfZmlsZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JlYWRGaWxlKShMX2ZpbGUpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIHJlc29sdmUoTF9yZXN1bHQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Vycil7cmV0dXJuIHJlc29sdmUoTF9lcnIpfX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250ZW50cyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwiYWN0aXZlVG9rZW5QYWNrc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfYWN0aXZlUGFja3Mpe3JldHVybiByZXNvbHZlKExfYmluZCkoTF9yZXNldFN0ZFRva2VuUGFja3MpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9ydW5GaWxlKShMX2NvbnRlbnRzKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHRfMCl7cmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9hY3RpdmVQYWNrcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKShMX3Jlc2V0U3RkVG9rZW5QYWNrcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18xKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc3VsdF8wKX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc2V0VG9rZW5QYWNrcykoTF9hY3RpdmVQYWNrcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18xKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc3VsdF8wKX19KSl9KSl9fSkpfX0pKX19KSl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibG9hZFwiKSkobGF6eSgxKSkobGF6eShcImxvYWQgZmlsZSA9IGJpbmQgKGJhc2VMb2FkIGZpbGUpXFxuICBcXFxccmVzdWx0IC4gXFxcXFxcXFxcXG4gICAgZXJycyA9IGZvbGRyIChcXFxcbGluZSByZXN1bHRzIC4gdGFpbCBsaW5lIChcXFxcZXIgLiBjb25zIGVyIHJlc3VsdHMpIChcXFxceCAuIHJlc3VsdHMpKSBuaWwgcmVzdWx0XFxuICAgIC5cXG4gICAgaXNOaWwgZXJyc1xcbiAgICAgIHJpZ2h0IHRydWVcXG4gICAgICBsZWZ0IGVycnNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbGUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iYXNlTG9hZCkoTF9maWxlKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZXJycztcblxuTF9lcnJzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mb2xkcikoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0cyl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpbmUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2VyKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfZXIpKExfcmVzdWx0cyl9fSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfcmVzdWx0cyl9fSkpfX19KSkoTF9uaWwpKExfcmVzdWx0KX0pO1xucmV0dXJuIHJlc29sdmUoTF9pc05pbCkoTF9lcnJzKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3JpZ2h0KShMX3RydWUpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGVmdCkoTF9lcnJzKX0pKX0pKCl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZXF1aXJlXCIpKShsYXp5KDEpKShsYXp5KFwicmVxdWlyZSBmaWxlID0gYmluZCAoZ2V0VmFsdWUgJ3JlcXVpcmVkRmlsZXMnKVxcbiAgXFxcXGZpbGVzIC4gY29udGFpbnMgZmlsZXMgZmlsZVxcbiAgICBmYWxzZVxcbiAgICBiaW5kIChsb2FkIGZpbGUpXFxuICAgICAgXFxcXHJlc3VsdCAuIHJlc3VsdFxcbiAgICAgICAgXFxcXHggLiBsZWZ0IHhcXG4gICAgICAgIFxcXFxfIC4gYmluZCAoc2V0VmFsdWUgJ3JlcXVpcmVkRmlsZXMnIChjb25zIGZpbGUgZmlsZXMpKVxcbiAgICAgICAgICBcXFxcXyAuIHJpZ2h0IHRydWVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbGUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInJlcXVpcmVkRmlsZXNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbGVzKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX2ZpbGVzKShMX2ZpbGUpKExfZmFsc2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sb2FkKShMX2ZpbGUpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIHJlc29sdmUoTF9yZXN1bHQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfbGVmdCkoTF94KX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwicmVxdWlyZWRGaWxlc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2ZpbGUpKExfZmlsZXMpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX19fMCl7cmV0dXJuIHJlc29sdmUoTF9yaWdodCkoTF90cnVlKX19KSl9fSkpfX0pKX0pKX19KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRlZlRva2VuUGFja1wiKSkobGF6eSgyKSkobGF6eShcImRlZlRva2VuUGFjayBuYW1lIHBhY2sgPSBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYWNrcycpXFxuICBcXFxccGFja3MgLiBzZXRWYWx1ZSAndG9rZW5QYWNrcycgKGFjb25zIG5hbWUgcGFjayBwYWNrcylcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX3BhY2spe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuUGFja3NcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3BhY2tzKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwidG9rZW5QYWNrc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hY29ucykoTF9uYW1lKShMX3BhY2spKExfcGFja3MpfSkpfX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInVzZVRva2VuUGFja1wiKSkobGF6eSgxKSkobGF6eShcInVzZVRva2VuUGFjayBuYW1lID0gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuUGFja3MnKVxcbiAgXFxcXHBhY2tzIC4gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuR3JvdXBzJylcXG4gICAgXFxcXGdyb3VwcyAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkxpc3QnKVxcbiAgICAgIFxcXFx0b2tlbnMgLiBiaW5kIChnZXRWYWx1ZSAnYWN0aXZlVG9rZW5QYWNrcycpXFxuICAgICAgICBcXFxcYWN0aXZlUGFja3MgLiBiaW5kIChnZXRWYWx1ZSAncGFyc2VGaWx0ZXJzJylcXG4gICAgICAgICAgXFxcXGZpbHRlcnMgLiBhc3NvYyBuYW1lIHBhY2tzXFxuICAgICAgICAgICAgXFxcXHBhY2sgLiBcXFxcXFxcXFxcbiAgICAgICAgICAgICAgZ3JvdXBUb2tzID0gZm9sZGwgKFxcXFx2YWx1ZSBlbCAuIGVsIFxcXFxoIHQgLiBjb25zIGggKGNvbnMgdCB2YWx1ZSkpIG5pbCAoaGVhZCAodGFpbCBwYWNrKSlcXG4gICAgICAgICAgICAgIG5ld1Rva3MgPSBxdWlja3NvcnQgKFxcXFxhIGIgLiA+IChzdHJMZW4gYSkgKHN0ckxlbiBiKSkgKGFwcGVuZCAoaGVhZCBwYWNrKSAoYXBwZW5kIGdyb3VwVG9rcyB0b2tlbnMpKVxcbiAgICAgICAgICAgICAgLlxcbiAgICAgICAgICAgICAgYmluZCAoc2V0VmFsdWUgJ3Rva2VuTGlzdCcgbmV3VG9rcylcXG4gICAgICAgICAgICAgICAgXFxcXF8gLiBiaW5kIChzZXRWYWx1ZSAndG9rZW5Hcm91cHMnIChhcHBlbmRBbGlzdCAoaGVhZCAodGFpbCBwYWNrKSkgZ3JvdXBzKSlcXG4gICAgICAgICAgICAgICAgICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICdwYXJzZUZpbHRlcnMnIChhcHBlbmQgZmlsdGVycyAoaGVhZCAodGFpbCAodGFpbCBwYWNrKSkpKSlcXG4gICAgICAgICAgICAgICAgICAgIFxcXFxfIC4gYmluZCAoY29tcHV0ZVRva2VuUGF0IG5ld1Rva3MpXFxuICAgICAgICAgICAgICAgICAgICAgIFxcXFxfIC4gc2V0VmFsdWUgJ2FjdGl2ZVRva2VuUGFja3MnIChjb25zIG5hbWUgYWN0aXZlUGFja3MpXFxuICAgICAgICAgICAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJ0b2tlblBhY2tzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wYWNrcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5Hcm91cHNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwidG9rZW5MaXN0XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tlbnMpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcImFjdGl2ZVRva2VuUGFja3NcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2FjdGl2ZVBhY2tzKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJwYXJzZUZpbHRlcnNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbHRlcnMpe3JldHVybiByZXNvbHZlKExfYXNzb2MpKExfbmFtZSkoTF9wYWNrcykoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcGFjayl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9uZXdUb2tzLCBMX2dyb3VwVG9rcztcblxuTF9uZXdUb2tzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9xdWlja3NvcnQpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiByZXNvbHZlKExfJHopKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX2EpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyTGVuKShMX2IpfSkpfX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9wYWNrKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FwcGVuZCkoTF9ncm91cFRva3MpKExfdG9rZW5zKX0pKX0pKX0pO1xuXG5MX2dyb3VwVG9rcyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZm9sZGwpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIHJlc29sdmUoTF9lbCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF90KShMX3ZhbHVlKX0pKX19fSkpfX19KSkoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3BhY2spfSkpfSkpfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJ0b2tlbkxpc3RcIikpKExfbmV3VG9rcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwidG9rZW5Hcm91cHNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXBwZW5kQWxpc3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3BhY2spfSkpfSkpKExfZ3JvdXBzKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fXzApe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInBhcnNlRmlsdGVyc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmQpKExfZmlsdGVycykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9wYWNrKX0pKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fXzEpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb21wdXRlVG9rZW5QYXQpKExfbmV3VG9rcyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18yKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwiYWN0aXZlVG9rZW5QYWNrc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX25hbWUpKExfYWN0aXZlUGFja3MpfSkpfX0pKX19KSl9fSkpfX0pKX0pKCl9fSkpKExfbmlsKX19KSl9fSkpfX0pKX19KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZXNldFRva2VuUGFja3NcIikpKGxhenkoMSkpKGxhenkoXCJyZXNldFRva2VuUGFja3MgcGFja3MgPSBiaW5kIChzZXRWYWx1ZSAndG9rZW5Hcm91cHMnIG5pbClcXG4gIFxcXFxfIC4gYmluZCAoc2V0VmFsdWUgJ3Rva2VuTGlzdCcgbmlsKVxcbiAgICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICdhY3RpdmVUb2tlblBhY2tzJyBuaWwpXFxuICAgICAgXFxcXF8gLiBiaW5kIChzZXRWYWx1ZSAncGFyc2VGaWx0ZXJzJyBuaWwpXFxuICAgICAgICBcXFxcXyAuIGZvbGRyMVxcbiAgICAgICAgICBcXFxccGFja0NtZCByZXN1bHQgLiBiaW5kIHBhY2tDbWQgXFxcXF8gLiByZXN1bHRcXG4gICAgICAgICAgbWFwIHVzZVRva2VuUGFjayBwYWNrc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcGFja3Mpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwidG9rZW5MaXN0XCIpKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18wKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJhY3RpdmVUb2tlblBhY2tzXCIpKShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfX18xKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJwYXJzZUZpbHRlcnNcIikpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fXzIpe3JldHVybiByZXNvbHZlKExfZm9sZHIxKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9wYWNrQ21kKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfYmluZCkoTF9wYWNrQ21kKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9fXzMpe3JldHVybiByZXNvbHZlKExfcmVzdWx0KX19KSl9fX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX21hcCkoTF91c2VUb2tlblBhY2spKExfcGFja3MpfSkpfX0pKX19KSl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmVzZXRTdGRUb2tlblBhY2tzXCIpKShsYXp5KDApKShsYXp5KFwicmVzZXRTdGRUb2tlblBhY2tzID0gYmluZCAoZ2V0VmFsdWUgJ3N0ZFRva2VuUGFja3MnKVxcbiAgXFxcXHN0ZHMgLiBiaW5kIChyZXNldFRva2VuUGFja3Mgc3RkcylcXG4gICAgXFxcXF8gLiBzZXRWYWx1ZSAnYWN0aXZlVG9rZW5QYWNrcycgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJzdGRUb2tlblBhY2tzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGRzKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVzZXRUb2tlblBhY2tzKShMX3N0ZHMpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJhY3RpdmVUb2tlblBhY2tzXCIpKShMX25pbCl9fSkpfX0pKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhZGRTdGRUb2tlblBhY2tzXCIpKShsYXp5KDEpKShsYXp5KFwiYWRkU3RkVG9rZW5QYWNrcyBtb3JlUGFja3MgPSBiaW5kIChnZXRWYWx1ZSAnc3RkVG9rZW5QYWNrcycpXFxuICBcXFxcc3RkcyAuIHNldFZhbHVlICdzdGRUb2tlblBhY2tzJyAoYXBwZW5kIHN0ZHMgbW9yZVBhY2tzKVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbW9yZVBhY2tzKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJzdGRUb2tlblBhY2tzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGRzKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwic3RkVG9rZW5QYWNrc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hcHBlbmQpKExfc3RkcykoTF9tb3JlUGFja3MpfSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWRkUGFyc2VGaWx0ZXJcIikpKGxhenkoMSkpKGxhenkoXCJhZGRQYXJzZUZpbHRlciBmaWx0ID0gYmluZCAoZ2V0VmFsdWUgJ3BhcnNlRmlsdGVycycpXFxuICBcXFxcZmlsdGVycyAuIHNldFZhbHVlICdwYXJzZUZpbHRlcnMnIChhcHBlbmQgZmlsdGVycyAoY29ucyBmaWx0IG5pbCkpXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9maWx0KXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJwYXJzZUZpbHRlcnNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2ZpbHRlcnMpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJwYXJzZUZpbHRlcnNcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYXBwZW5kKShMX2ZpbHRlcnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9maWx0KShMX25pbCl9KSl9KSl9fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkXCIpKShsYXp5KDMpKShsYXp5KFwiZCBsYWJlbCB2YWx1ZSBleHByID0gbG9nIChzdHJDYXQgKGNvbnMgbGFiZWwgKGNvbnMgdmFsdWUgbmlsKSkpIGV4cHJcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xhYmVsKXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfZXhwcil7cmV0dXJuIHJlc29sdmUoTF9sb2cpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbGFiZWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF92YWx1ZSkoTF9uaWwpfSkpfSkpfSkpKExfZXhwcil9fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZGRcIikpKGxhenkoMikpKGxhenkoXCJkZCBsYWJlbCBhcmcgPSBkIGxhYmVsIGFyZyBhcmdcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xhYmVsKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmcpe3JldHVybiByZXNvbHZlKExfZCkoTF9sYWJlbCkoTF9hcmcpKExfYXJnKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwibWFjcm9EZWZzXCIpKShMX25pbCl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJyZXF1aXJlZEZpbGVzXCIpKShMX25pbCl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJ0b2tlblBhY2tzXCIpKShMX25pbCl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJhY3RpdmVUb2tlblBhY2tzXCIpKShMX25pbCl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJzdGRUb2tlblBhY2tzXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzdGRcIikpKExfbmlsKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZUb2tlblBhY2spKGxhenkoXCJzdGRcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiXFxcXFxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxAXCIpKShMX25pbCl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zKShsYXp5KFwiKFwiKSkobGF6eShcIilcIikpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbmlsKShMX25pbCl9KSl9KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVzZXRTdGRUb2tlblBhY2tzKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbkdyb3VwKShsYXp5KFwiW1wiKSkobGF6eShcIl1cIikpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFRva2VuKShsYXp5KFwifFwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGlzdGlmeU9wXCIpKShsYXp5KDIpKShsYXp5KFwibGlzdGlmeU9wIG9wIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBpc1Rva2VuU3RyaW5nIGggJ3wnXFxuICAgIGNvbnMgdCBuaWxcXG4gICAgY29ucyAoY29ucyBvcCAoY29ucyBoIChsaXN0aWZ5T3Agb3AgdCkpKSBuaWxcXG4gIGNvbnMgJ25pbCcgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vcCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcInxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF90KShMX25pbCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfb3ApKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RpZnlPcCkoTF9vcCkoTF90KX0pKX0pKX0pKShMX25pbCl9KSl9fX19KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwibmlsXCIpKShMX25pbCl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsaXN0aWZ5XCIpKShsYXp5KDEpKShsYXp5KFwibGlzdGlmeSBsaXN0ID0gbGlzdGlmeU9wICdjb25zJyBsaXN0XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RpZnlPcCkobGF6eShcImNvbnNcIikpKExfbGlzdCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZk1hY3JvKShsYXp5KFwiW1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RpZnkpKExfaCl9fX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGlzdEZpbHRlclwiKSkobGF6eSgxKSkobGF6eShcImxpc3RGaWx0ZXIgY29kZSA9IGJpbmQgKGdldFZhbHVlICdsaXN0TWFjcm9zJylcXG4gIFxcXFxsaXN0TWFjcm9zIC4gZmlsdGVyQXBwbGllcyBjb2RlIFxcXFxsaXN0IC4gbGlzdCBcXFxcaCB0IC5cXG4gICAgYW5kIChpc1Rva2VuIGgpIChjb250YWlucyBsaXN0TWFjcm9zICh0b2tlblN0cmluZyBoKSlcXG4gICAgICBsaXN0RmlsdGVyVGFpbCBsaXN0XFxuICAgICAgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29kZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwibGlzdE1hY3Jvc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdE1hY3Jvcyl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJBcHBsaWVzKShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF9oKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX2xpc3RNYWNyb3MpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfaCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9saXN0RmlsdGVyVGFpbCkoTF9saXN0KX0pKShMX2xpc3QpfX19KSl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibGlzdEZpbHRlclRhaWxcIikpKGxhenkoMSkpKGxhenkoXCJsaXN0RmlsdGVyVGFpbCBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gaXNUb2tlblN0cmluZyBoICd8J1xcbiAgICA+IChsZW5ndGggdCkgMlxcbiAgICAgIGNvbnMgaCAoY29ucyAocmVtb3ZlTGFzdCB0KSAoY29ucyAobGFzdCB0KSBuaWwpKVxcbiAgICAgIGxpc3RcXG4gICAgY29ucyBoIChsaXN0RmlsdGVyVGFpbCB0KVxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwifFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8keikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sZW5ndGgpKExfdCl9KSkobGF6eSgyKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9yZW1vdmVMYXN0KShMX3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9sYXN0KShMX3QpfSkpKExfbmlsKX0pKX0pKX0pKShMX2xpc3QpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RGaWx0ZXJUYWlsKShMX3QpfSkpfSkpfX19fSkpKExfbmlsKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmlsdGVyQXBwbGllc1wiKSkobGF6eSgyKSkobGF6eShcImZpbHRlckFwcGxpZXMgY29kZSBmdW5jID0gaXNQYXJlbnMgY29kZVxcbiAgY29kZSBcXFxcc3RhcnQgZW5kIGNvbnRlbnRzIC4gcGFyZW5zIHN0YXJ0IGVuZCAoZmlsdGVyQXBwbGllcyBjb250ZW50cyBmdW5jKVxcbiAgaXNDb25zIGNvZGVcXG4gICAgXFxcXFxcXFxcXG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlckFwcGx5RWxlbWVudHMgY29kZSBmdW5jXFxuICAgICAgLlxcbiAgICAgIGFuZCAoaXNDb25zIGZpbHRlcmVkKSAoaXNCbG9ja1N0YXJ0IChoZWFkIGZpbHRlcmVkKSlcXG4gICAgICAgIGZpbHRlcmVkXFxuICAgICAgICBmdW5jIGZpbHRlcmVkXFxuICAgIGNvZGVcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NvZGUpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiByZXNvbHZlKExfaXNQYXJlbnMpKExfY29kZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfZW5kKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250ZW50cyl7cmV0dXJuIHJlc29sdmUoTF9wYXJlbnMpKExfc3RhcnQpKExfZW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckFwcGxpZXMpKExfY29udGVudHMpKExfZnVuYyl9KSl9fX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfY29kZSkoZnVuY3Rpb24oKXtcbnZhciBMX2ZpbHRlcmVkO1xuXG5MX2ZpbHRlcmVkID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJBcHBseUVsZW1lbnRzKShMX2NvZGUpKExfZnVuYyl9KTtcbnJldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9maWx0ZXJlZCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0Jsb2NrU3RhcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9maWx0ZXJlZCl9KSl9KSkoTF9maWx0ZXJlZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9mdW5jKShMX2ZpbHRlcmVkKX0pKX0pKExfY29kZSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmaWx0ZXJBcHBseUVsZW1lbnRzXCIpKShsYXp5KDIpKShsYXp5KFwiZmlsdGVyQXBwbHlFbGVtZW50cyBjb2RlIGZ1bmMgPSBjb2RlXFxuICBcXFxcaCB0IEQgLiBpc0Jsb2NrU3RhcnQgaFxcbiAgICBjb25zIGggKGZpbHRlckJsb2NrIGggdCBmdW5jKVxcbiAgICBjb25zIChmaWx0ZXJBcHBsaWVzIGggZnVuYylcXG4gICAgICBhbmQgKGlzQ29ucyB0KSAoaXNCbG9ja1N0YXJ0IChoZWFkIHQpKVxcbiAgICAgICAgY29ucyAoZmlsdGVyQXBwbHlFbGVtZW50cyB0IGZ1bmMpIG5pbFxcbiAgICAgICAgZmlsdGVyQXBwbHlFbGVtZW50cyB0IGZ1bmNcXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY29kZSl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIHJlc29sdmUoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzQmxvY2tTdGFydCkoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJCbG9jaykoTF9oKShMX3QpKExfZnVuYyl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckFwcGxpZXMpKExfaCkoTF9mdW5jKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfdCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0Jsb2NrU3RhcnQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90KX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQXBwbHlFbGVtZW50cykoTF90KShMX2Z1bmMpfSkpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckFwcGx5RWxlbWVudHMpKExfdCkoTF9mdW5jKX0pKX0pKX0pKX19fX0pKShMX25pbCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmaWx0ZXJCbG9ja1wiKSkobGF6eSgzKSkobGF6eShcImZpbHRlckJsb2NrIHR5cGUgY29kZSBmdW5jID0gaXNUb2tlblN0cmluZyB0eXBlICdcXFxcXFxcXCdcXG4gIGZpbHRlckxhbWJkYSBjb2RlIGZ1bmNcXG4gIGZpbHRlckxldCBjb2RlIGZ1bmNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3R5cGUpe3JldHVybiBmdW5jdGlvbihMX2NvZGUpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF90eXBlKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJMYW1iZGEpKExfY29kZSkoTF9mdW5jKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckxldCkoTF9jb2RlKShMX2Z1bmMpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImZpbHRlckxldFwiKSkobGF6eSgyKSkobGF6eShcImZpbHRlckxldCBjb2RlIGZ1bmMgPSBjb2RlIFxcXFxoIHQgLiBpc1Rva2VuU3RyaW5nIGggJy4nXFxuICBjb25zIGggKGZpbHRlckFwcGxpZXMgdCBmdW5jKVxcbiAgY29ucyAoZmlsdGVyTGV0QmluZGluZyBoIGZ1bmMpXFxuICAgIGZpbHRlckxldCB0IGZ1bmNcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NvZGUpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiByZXNvbHZlKExfY29kZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJBcHBsaWVzKShMX3QpKExfZnVuYyl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckxldEJpbmRpbmcpKExfaCkoTF9mdW5jKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckxldCkoTF90KShMX2Z1bmMpfSkpfSkpfX19KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmaWx0ZXJMZXRCaW5kaW5nXCIpKShsYXp5KDIpKShsYXp5KFwiZmlsdGVyTGV0QmluZGluZyBjb2RlIGZ1bmMgPSBpc1BhcmVucyBjb2RlXFxuICBzZXRQYXJlbnMgY29kZSBcXFxcY29udGVudHMgLiBmaWx0ZXJMZXRCaW5kaW5nIGNvbnRlbnRzIGZ1bmNcXG4gIGlzQ29ucyBjb2RlXFxuICAgIGNvZGUgXFxcXGggdCAuIGNvbnMgaFxcbiAgICAgIGlzVG9rZW5TdHJpbmcgaCAnPSdcXG4gICAgICAgIGZpbHRlckFwcGxpZXMgdCBmdW5jXFxuICAgICAgICBmaWx0ZXJMZXRCaW5kaW5nIHQgZnVuY1xcbiAgICBjb2RlXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfc2V0UGFyZW5zKShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnRzKXtyZXR1cm4gcmVzb2x2ZShMX2ZpbHRlckxldEJpbmRpbmcpKExfY29udGVudHMpKExfZnVuYyl9fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29kZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwiPVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJBcHBsaWVzKShMX3QpKExfZnVuYyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXJMZXRCaW5kaW5nKShMX3QpKExfZnVuYyl9KSl9KSl9fX0pKX0pKShMX2NvZGUpfSkpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZmlsdGVyTGFtYmRhXCIpKShsYXp5KDIpKShsYXp5KFwiZmlsdGVyTGFtYmRhIGNvZGUgZnVuYyA9IGNvZGUgXFxcXGggdCAuIGNvbnMgaFxcbiAgaXNUb2tlblN0cmluZyBoICcuJ1xcbiAgICBmaWx0ZXJBcHBsaWVzIHQgZnVuY1xcbiAgICBmaWx0ZXJMYW1iZGEgdCBmdW5jXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gcmVzb2x2ZShMX2NvZGUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQXBwbGllcykoTF90KShMX2Z1bmMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmlsdGVyTGFtYmRhKShMX3QpKExfZnVuYyl9KSl9KSl9fX0pKX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwibGlzdE1hY3Jvc1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiW1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwie1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiaGFtdHtcIikpKExfbmlsKX0pKX0pKX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRQYXJzZUZpbHRlcikoTF9saXN0RmlsdGVyKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbkdyb3VwKShsYXp5KFwie1wiKSkobGF6eShcIn1cIikpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZk1hY3JvKShsYXp5KFwie1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RpZnlPcCkobGF6eShcImFjb25zUGFpclwiKSkoTF9oKX19fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbkdyb3VwKShsYXp5KFwiaGFtdHtcIikpKGxhenkoXCJ9XCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcImhhbXR7XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaGFtdGlmeSkoTF9oKX19fSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJoYW10V2l0aFBhaXJcIikpKGxhenkoMikpKGxhenkoXCJoYW10V2l0aFBhaXIgcGFpciB0ID0gaGFtdFdpdGggKGhlYWQgcGFpcikgKHRhaWwgcGFpcikgdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcGFpcil7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9oYW10V2l0aCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3BhaXIpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9wYWlyKX0pKShMX3QpfX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaGFtdGlmeVwiKSkobGF6eSgxKSkobGF6eShcImhhbXRpZnkgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGlzVG9rZW5TdHJpbmcgaCAnfCdcXG4gICAgY29ucyB0IG5pbFxcbiAgICBhbmQgKGlzQ29ucyBoKSAob3IgKGlzVG9rZW5TdHJpbmcgKGhlYWQgaCkgJ2NvbnMnKSAoaXNUb2tlblN0cmluZyAoaGVhZCBoKSAnOicpKVxcbiAgICAgIFtbJ2hhbXRXaXRoJyAoaGVhZCAodGFpbCBoKSkgKGhlYWQgKHRhaWwgKHRhaWwgaCkpKSB8IGhhbXRpZnkgdF1dXFxuICAgICAgW1snaGFtdFdpdGhQYWlyJyBoIHwgaGFtdGlmeSB0XV1cXG4gIFsnaGFtdCddXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oKShsYXp5KFwifFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3QpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfaCl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9vcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfaCl9KSkobGF6eShcImNvbnNcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNUb2tlblN0cmluZykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2gpfSkpKGxhenkoXCI6XCIpKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImhhbXRXaXRoXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2gpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF9oKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hhbXRpZnkpKExfdCl9KSl9KSl9KSl9KSkoTF9uaWwpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiaGFtdFdpdGhQYWlyXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oYW10aWZ5KShMX3QpfSkpfSkpfSkpKExfbmlsKX0pKX0pKX19fX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJoYW10XCIpKShMX25pbCl9KSl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZlRva2VuUGFjaykobGF6eShcImxpc3RcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwifFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiPVwiKSkoTF9uaWwpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hY29uc1BhaXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIntcIikpKGxhenkoXCJ9XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zUGFpcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiaGFtdHtcIikpKGxhenkoXCJ9XCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zUGFpcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiW1wiKSkobGF6eShcIl1cIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnNQYWlyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJvcltcIikpKGxhenkoXCJdXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zUGFpcikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiYW5kW1wiKSkobGF6eShcIl1cIikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWNvbnNQYWlyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJjb25jYXRbXCIpKShsYXp5KFwiXVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hY29uc1BhaXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImNvbmNhdEZsYXRbXCIpKShsYXp5KFwiXVwiKSl9KSkoTF9uaWwpfSkpfSkpfSkpfSkpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2xpc3RGaWx0ZXIpKExfbmlsKX0pKShMX25pbCl9KSl9KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW5Hcm91cCkobGF6eShcIm9yW1wiKSkobGF6eShcIl1cIikpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FkZFRva2VuR3JvdXApKGxhenkoXCJhbmRbXCIpKShsYXp5KFwiXVwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW5Hcm91cCkobGF6eShcImNvbmNhdFtcIikpKGxhenkoXCJdXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbkdyb3VwKShsYXp5KFwiY29uY2F0RmxhdFtcIikpKGxhenkoXCJdXCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJsaXN0TWFjcm9Gb2xkT3BcIikpKGxhenkoMykpKGxhenkoXCJsaXN0TWFjcm9Gb2xkT3Agb3AgZW1wdHlDYXNlIGxpc3QgPSBsaXN0IFxcXFxoIHQgLiBmb2xkclxcbiAgICBcXFxcY2FzZSByZXN1bHQgLiBbb3AgY2FzZSByZXN1bHRdXFxuICAgIGVtcHR5Q2FzZVxcbiAgICBoXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9vcCl7cmV0dXJuIGZ1bmN0aW9uKExfZW1wdHlDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfZm9sZHIpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2Nhc2Upe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX29wKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfY2FzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX3Jlc3VsdCkoTF9uaWwpfSkpfSkpfX19KSkoTF9lbXB0eUNhc2UpKExfaCl9fX0pKX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcIm9yW1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0TWFjcm9Gb2xkT3ApKGxhenkoXCJvclwiKSkobGF6eShcImZhbHNlXCIpKShMX2xpc3QpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcImFuZFtcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdE1hY3JvRm9sZE9wKShsYXp5KFwiYW5kXCIpKShsYXp5KFwidHJ1ZVwiKSkoTF9saXN0KX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJjb25jYXRbXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzdHJDYXRcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xpc3RpZnkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF9saXN0KX0pKX0pKShMX25pbCl9KSkoTF9uaWwpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcImNvbmNhdEZsYXRbXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzdHJDYXRcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiZmxhdHRlblwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbGlzdGlmeSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX2xpc3QpfSkpfSkpKExfbmlsKX0pKShMX25pbCl9KSl9KSkoTF9uaWwpfSkpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFZhbHVlKShsYXp5KFwibGlzdE1hY3Jvc1wiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfbG0pe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImNvbmNhdFtcIikpKExfbG0pfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpbmZpeFwiKSkobGF6eSgxKSkobGF6eShcImluZml4IGNvZGUgPSBiaW5kIChnZXRWYWx1ZSAnaW5maXhQcmVjZWRlbmNlJylcXG4gIFxcXFxwcmVjIC4gYmluZCAoZ2V0VmFsdWUgJ2luZml4UmlnaHRBc3NvY2lhdGl2ZScpXFxuICAgIFxcXFxyaWdodCAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkdyb3VwcycpXFxuICAgICAgXFxcXGdyb3VwcyAuIGZpbHRlckFwcGxpZXNcXG4gICAgICAgIGNvZGVcXG4gICAgICAgIFxcXFxleHByIC4gaW5maXhSZWFycmFuZ2UgcHJlYyByaWdodCAobWFwIChcXFxcY2VsbCAuIHRhaWwgY2VsbCkgZ3JvdXBzKSBleHByXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gcmVzb2x2ZShMX2JpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJpbmZpeFByZWNlZGVuY2VcIikpfSkpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3ByZWMpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcImluZml4UmlnaHRBc3NvY2lhdGl2ZVwiKSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmlnaHQpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9nZXRWYWx1ZSkobGF6eShcInRva2VuR3JvdXBzXCIpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiByZXNvbHZlKExfZmlsdGVyQXBwbGllcykoTF9jb2RlKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9leHByKXtyZXR1cm4gcmVzb2x2ZShMX2luZml4UmVhcnJhbmdlKShMX3ByZWMpKExfcmlnaHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFwKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9jZWxsKXtyZXR1cm4gcmVzb2x2ZShMX3RhaWwpKExfY2VsbCl9fSkpKExfZ3JvdXBzKX0pKShMX2V4cHIpfX0pKX19KSl9fSkpfX0pKX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaW5maXhSZWFycmFuZ2VcIikpKGxhenkoNCkpKGxhenkoXCJpbmZpeFJlYXJyYW5nZSBwcmVjIHJpZ2h0IGNsb3NlcyBsaXN0ID0gXFxcXFxcXFxcXG4gIGxlbiA9IGxlbmd0aCBsaXN0XFxuICBoZWFkMSA9IGhlYWQgbGlzdFxcbiAgdGFpbDEgPSB0YWlsIGxpc3RcXG4gIGhlYWQyID0gaGVhZCB0YWlsMVxcbiAgdGFpbDIgPSB0YWlsIHRhaWwxXFxuICBoZWFkMyA9IGhlYWQgdGFpbDJcXG4gIG9wUHJlYyA9IGdldFByZWMgcHJlYyBoZWFkMlxcbiAgLlxcbiAgPCBsZW4gMlxcbiAgICBsaXN0XFxuICAgIGlzSW5maXggb3BQcmVjIGhlYWQxIGhlYWQyIGxlblxcbiAgICAgIG9yICg9PSBsZW4gMikgKG5vdCAoaXNJbmZpeEFyZyBjbG9zZXMgaGVhZDMpKVxcbiAgICAgICAgW1toZWFkMiBoZWFkMV0gfCB0YWlsMl1cXG4gICAgICAgIGluZml4UmVhcnJhbmdlIHByZWMgcmlnaHQgY2xvc2VzIChhYnNvcmJBcmd1bWVudCBvcFByZWMgcHJlYyByaWdodCBjbG9zZXMgaGVhZDEgaGVhZDIgdGFpbDIgaGVhZDMgKC0gbGVuIDIpKVxcbiAgICAgIFtoZWFkMSB8IGluZml4UmVhcnJhbmdlIHByZWMgcmlnaHQgY2xvc2VzIHRhaWwxXVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfcmlnaHQpe3JldHVybiBmdW5jdGlvbihMX2Nsb3Nlcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9vcFByZWMsIExfaGVhZDMsIExfdGFpbDIsIExfaGVhZDIsIExfdGFpbDEsIExfaGVhZDEsIExfbGVuO1xuXG5MX29wUHJlYyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZ2V0UHJlYykoTF9wcmVjKShMX2hlYWQyKX0pO1xuXG5MX2hlYWQzID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3RhaWwyKX0pO1xuXG5MX3RhaWwyID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX3RhaWwxKX0pO1xuXG5MX2hlYWQyID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3RhaWwxKX0pO1xuXG5MX3RhaWwxID0gKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90YWlsKShMX2xpc3QpfSk7XG5cbkxfaGVhZDEgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCl9KTtcblxuTF9sZW4gPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2xlbmd0aCkoTF9saXN0KX0pO1xucmV0dXJuIHJlc29sdmUoTF8keSkoTF9sZW4pKGxhenkoMikpKExfbGlzdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0luZml4KShMX29wUHJlYykoTF9oZWFkMSkoTF9oZWFkMikoTF9sZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHAkcCkoTF9sZW4pKGxhenkoMikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzSW5maXhBcmcpKExfY2xvc2VzKShMX2hlYWQzKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oZWFkMikoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2hlYWQxKShMX25pbCl9KSl9KSkoTF90YWlsMil9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pbmZpeFJlYXJyYW5nZSkoTF9wcmVjKShMX3JpZ2h0KShMX2Nsb3NlcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hYnNvcmJBcmd1bWVudCkoTF9vcFByZWMpKExfcHJlYykoTF9yaWdodCkoTF9jbG9zZXMpKExfaGVhZDEpKExfaGVhZDIpKExfdGFpbDIpKExfaGVhZDMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJF8pKExfbGVuKShsYXp5KDIpKX0pKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaGVhZDEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaW5maXhSZWFycmFuZ2UpKExfcHJlYykoTF9yaWdodCkoTF9jbG9zZXMpKExfdGFpbDEpfSkpfSkpfSkpfSkoKX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWJzb3JiQXJndW1lbnRcIikpKGxhenkoOSkpKGxhenkoXCJhYnNvcmJBcmd1bWVudCBvcFByZWMgcHJlYyByaWdodCBjbG9zZXMgaGVhZDEgaGVhZDIgdGFpbDIgaGVhZDMgbGVuID0gXFxcXFxcXFxcXG4gIHRhaWwzID0gdGFpbCB0YWlsMlxcbiAgaGVhZDQgPSBoZWFkIHRhaWwzXFxuICB0YWlsNCA9IHRhaWwgdGFpbDNcXG4gIGhlYWQ1ID0gaGVhZCB0YWlsNFxcbiAgLlxcbiAgaW5maXhTaG91bGRFYXROZXh0IG9wUHJlYyBwcmVjIChjb250YWlucyByaWdodCAoc3RyVG9rZW5TdHJpbmcgaGVhZDIpKSBoZWFkMyBoZWFkNCBoZWFkNSBjbG9zZXMgbGVuXFxuICAgIFtoZWFkMSBoZWFkMiB8IGFic29yYkFyZ3VtZW50IChnZXRQcmVjIHByZWMgaGVhZDQpIHByZWMgcmlnaHQgY2xvc2VzIGhlYWQzIGhlYWQ0IHRhaWw0IGhlYWQ1ICgtIGxlbiAyKV1cXG4gICAgW1toZWFkMiBoZWFkMSBoZWFkM10gfCB0YWlsM11cIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX29wUHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfcmlnaHQpe3JldHVybiBmdW5jdGlvbihMX2Nsb3Nlcyl7cmV0dXJuIGZ1bmN0aW9uKExfaGVhZDEpe3JldHVybiBmdW5jdGlvbihMX2hlYWQyKXtyZXR1cm4gZnVuY3Rpb24oTF90YWlsMil7cmV0dXJuIGZ1bmN0aW9uKExfaGVhZDMpe3JldHVybiBmdW5jdGlvbihMX2xlbil7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9oZWFkNSwgTF90YWlsNCwgTF9oZWFkNCwgTF90YWlsMztcblxuTF9oZWFkNSA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90YWlsNCl9KTtcblxuTF90YWlsNCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF90YWlsMyl9KTtcblxuTF9oZWFkNCA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaGVhZCkoTF90YWlsMyl9KTtcblxuTF90YWlsMyA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdGFpbCkoTF90YWlsMil9KTtcbnJldHVybiByZXNvbHZlKExfaW5maXhTaG91bGRFYXROZXh0KShMX29wUHJlYykoTF9wcmVjKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX3JpZ2h0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3N0clRva2VuU3RyaW5nKShMX2hlYWQyKX0pKX0pKShMX2hlYWQzKShMX2hlYWQ0KShMX2hlYWQ1KShMX2Nsb3NlcykoTF9sZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oZWFkMSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2hlYWQyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2Fic29yYkFyZ3VtZW50KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFByZWMpKExfcHJlYykoTF9oZWFkNCl9KSkoTF9wcmVjKShMX3JpZ2h0KShMX2Nsb3NlcykoTF9oZWFkMykoTF9oZWFkNCkoTF90YWlsNCkoTF9oZWFkNSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8kXykoTF9sZW4pKGxhenkoMikpfSkpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2hlYWQyKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaGVhZDEpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oZWFkMykoTF9uaWwpfSkpfSkpfSkpKExfdGFpbDMpfSkpfSkoKX19fX19fX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc0luZml4QXJnXCIpKShsYXp5KDIpKShsYXp5KFwiaXNJbmZpeEFyZyBjbG9zZXMgaXRlbSA9IG9yW1xcbiAgaXNQYXJlbnMgaXRlbVxcbiAgaXNDb25zIGl0ZW1cXG4gIGFuZFtcXG4gICAgaXNUb2tlbiBpdGVtXFxuICAgIG5vdCAoY29udGFpbnMgY2xvc2VzICh0b2tlblN0cmluZyBpdGVtKSlcXG4gICAgbm90IChpc0Jsb2NrU3RhcnQgaXRlbSldXVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfY2xvc2VzKXtyZXR1cm4gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzUGFyZW5zKShMX2l0ZW0pfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNDb25zKShMX2l0ZW0pfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfaXRlbSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbm90KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnRhaW5zKShMX2Nsb3NlcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF90b2tlblN0cmluZykoTF9pdGVtKX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9ub3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNCbG9ja1N0YXJ0KShMX2l0ZW0pfSkpfSkpKExfdHJ1ZSl9KSl9KSl9KSkoTF9mYWxzZSl9KSl9KSl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpc0luZml4XCIpKShsYXp5KDQpKShsYXp5KFwiaXNJbmZpeCBvcFByZWMgaGVhZDEgaGVhZDIgbGVuID0gYW5kW1xcbiAgPiBsZW4gMVxcbiAgPiBvcFByZWMgLTFcXG4gIGlzSW5maXhBcmcgbmlsIGhlYWQxXVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3BQcmVjKXtyZXR1cm4gZnVuY3Rpb24oTF9oZWFkMSl7cmV0dXJuIGZ1bmN0aW9uKExfaGVhZDIpe3JldHVybiBmdW5jdGlvbihMX2xlbil7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHopKExfbGVuKShsYXp5KDEpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8keikoTF9vcFByZWMpKGxhenkoLTEpKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9pc0luZml4QXJnKShMX25pbCkoTF9oZWFkMSl9KSkoTF90cnVlKX0pKX0pKX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZ2V0UHJlY1wiKSkobGF6eSgyKSkobGF6eShcImdldFByZWMgcHJlYyB0b2tlbiA9IFxcXFxcXFxcXFxuICBzdHIgPSB0b2tlblN0cmluZyB0b2tlblxcbiAgLlxcbiAgaXNUb2tlbiB0b2tlblxcbiAgICBmaW5kSW5kZXggKFxcXFxsZXZlbCAuIGNvbnRhaW5zIGxldmVsIHN0cikgcHJlY1xcbiAgICAtMVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rZW4pe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfc3RyO1xuXG5MX3N0ciA9IChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfdG9rZW4pfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW4pKExfdG9rZW4pKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZmluZEluZGV4KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9sZXZlbCl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9sZXZlbCkoTF9zdHIpfX0pKShMX3ByZWMpfSkpKGxhenkoLTEpKX0pKCl9fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJpbmZpeFNob3VsZEVhdE5leHRcIikpKGxhenkoOCkpKGxhenkoXCJpbmZpeFNob3VsZEVhdE5leHQgb3BQcmVjIHByZWMgaXNSaWdodCBjdXJBcmcgbmV4dE9wIG5leHRBcmcgY2xvc2VzIGxlbiA9IFxcXFxcXFxcXFxuICBuZXh0UHJlYyA9IGdldFByZWMgcHJlYyBuZXh0T3BcXG4gIC5cXG4gIGFuZFtcXG4gICAgPiBsZW4gMlxcbiAgICBpc0luZml4IG5leHRQcmVjIGN1ckFyZyBuZXh0T3AgbGVuXFxuICAgIG9yICg+IG9wUHJlYyBuZXh0UHJlYykgKGFuZCAoPT0gb3BQcmVjIG5leHRQcmVjKSBpc1JpZ2h0KVxcbiAgICBpc0luZml4QXJnIGNsb3NlcyBuZXh0QXJnXVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfb3BQcmVjKXtyZXR1cm4gZnVuY3Rpb24oTF9wcmVjKXtyZXR1cm4gZnVuY3Rpb24oTF9pc1JpZ2h0KXtyZXR1cm4gZnVuY3Rpb24oTF9jdXJBcmcpe3JldHVybiBmdW5jdGlvbihMX25leHRPcCl7cmV0dXJuIGZ1bmN0aW9uKExfbmV4dEFyZyl7cmV0dXJuIGZ1bmN0aW9uKExfY2xvc2VzKXtyZXR1cm4gZnVuY3Rpb24oTF9sZW4pe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbmV4dFByZWM7XG5cbkxfbmV4dFByZWMgPSAoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2dldFByZWMpKExfcHJlYykoTF9uZXh0T3ApfSk7XG5yZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF8keikoTF9sZW4pKGxhenkoMikpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzSW5maXgpKExfbmV4dFByZWMpKExfY3VyQXJnKShMX25leHRPcCkoTF9sZW4pfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMXyR6KShMX29wUHJlYykoTF9uZXh0UHJlYyl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfJHAkcCkoTF9vcFByZWMpKExfbmV4dFByZWMpfSkpKExfaXNSaWdodCl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNJbmZpeEFyZykoTF9jbG9zZXMpKExfbmV4dEFyZyl9KSkoTF90cnVlKX0pKX0pKX0pKX0pKCl9fX19fX19fX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcIjpcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImNvbnNcIikpKExfbGlzdCl9fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlwcmVjXCIpKShsYXp5KDApKShsYXp5KFwiaXByZWMgPSBbWycqJyAnLycgJyUnXSBbJysnICctJ10gWyc6J10gWyc8JyAnPicgJzw9JyAnPj0nXSBbJz09JyAnIT0nXV1cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiKlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiL1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiJVwiKSkoTF9uaWwpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiK1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLVwiKSkoTF9uaWwpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOlwiKSkoTF9uaWwpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiPFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiPlwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiPD1cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIj49XCIpKShMX25pbCl9KSl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI9PVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiIT1cIikpKExfbmlsKX0pKX0pKShMX25pbCl9KSl9KSl9KSl9KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmlnaHRBc3NvY1wiKSkobGF6eSgwKSkobGF6eShcInJpZ2h0QXNzb2MgPSBbJzonXVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiOlwiKSkoTF9uaWwpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3NldFZhbHVlKShsYXp5KFwiaW5maXhQcmVjZWRlbmNlXCIpKShMX2lwcmVjKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zZXRWYWx1ZSkobGF6eShcImluZml4UmlnaHRBc3NvY2lhdGl2ZVwiKSkoTF9yaWdodEFzc29jKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZUb2tlblBhY2spKGxhenkoXCJpbmZpeFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2ZsYXR0ZW4pKExfaXByZWMpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9uaWwpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2luZml4KShMX25pbCl9KSkoTF9uaWwpfSkpfSkpfSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3VzZVRva2VuUGFjaykobGF6eShcImluZml4XCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcImRvXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2hhbmRsZURvKShMX2xpc3QpKExfZmFsc2UpKExfaWQpfX0pKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJoYW5kbGVEb1wiKSkobGF6eSgzKSkobGF6eShcImhhbmRsZURvIGxpc3QgaW5MZXQgY29udCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGlzTmlsIHRcXG4gICAgY29udCAoaW5MZXQgWycuJyBoXSBbaF0pXFxuICAgIGRvQ2xhdXNlIChzdHJpcFBhcmVucyBoKSBoIG5pbCBpbkxldCBcXFxcbmV3SW5MZXQgY2hhaW4gLlxcbiAgICAgIGhhbmRsZURvIHQgbmV3SW5MZXQgXFxcXHJlc3QgLiBjb250IChjaGFpbiByZXN0KVxcbiAgY29udCBuaWxcIikpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2luTGV0KXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX2xpc3QpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfdCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2luTGV0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIuXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoTF9uaWwpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKShMX25pbCl9KSl9KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kb0NsYXVzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdHJpcFBhcmVucykoTF9oKX0pKShMX2gpKExfbmlsKShMX2luTGV0KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9uZXdJbkxldCl7cmV0dXJuIGZ1bmN0aW9uKExfY2hhaW4pe3JldHVybiByZXNvbHZlKExfaGFuZGxlRG8pKExfdCkoTF9uZXdJbkxldCkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NoYWluKShMX3Jlc3QpfSkpfX0pKX19fSkpfSkpfX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29udCkoTF9uaWwpfSkpfX19fSkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImRvQ2xhdXNlXCIpKShsYXp5KDUpKShsYXp5KFwiZG9DbGF1c2Ugc3RlcHBpbmdDbGF1c2UgY2xhdXNlIHByZWZpeCBpbkxldCBjb250ID0gXFxcXFxcXFxcXG4gIG1ha2VCaW5kIHZhciBtb25hZCA9IGNvbnQgZmFsc2UgXFxcXHJlc3QgLiBpbkxldCAoY29ucyAnLicpIGlkXFxuICAgIFsnYmluZCcgbW9uYWQgWydcXFxcXFxcXCcgdmFyICcuJyB8IHJlc3RdXVxcbiAgLlxcbiAgaXNDb25zIHN0ZXBwaW5nQ2xhdXNlXFxuICAgIHN0ZXBwaW5nQ2xhdXNlIFxcXFxoIHQgLiBpc1Rva2VuU3RyaW5nIGggJz0nXFxuICAgICAgaW5MZXRcXG4gICAgICAgIGNvbnQgdHJ1ZSBcXFxccmVzdCAuIFtjbGF1c2UgfCByZXN0XVxcbiAgICAgICAgY29udCB0cnVlIFxcXFxyZXN0IC4gWydcXFxcXFxcXFxcXFxcXFxcJyBjbGF1c2UgfCByZXN0XVxcbiAgICAgIGlzVG9rZW5TdHJpbmcgaCAnPC0nXFxuICAgICAgICBpc05pbCB0XFxuICAgICAgICAgIHBhcnNlRXJyIFxcXCJObyBtb25hZCBpbiBkby1jbGF1c2U6IFxcXCIgY2xhdXNlXFxuICAgICAgICAgIHByZWZpeFxcbiAgICAgICAgICAgIFxcXFxwaCBwdCBEIC4gaXNOaWwgcHRcXG4gICAgICAgICAgICAgIG1ha2VCaW5kIChpc05pbCBwcmVmaXggJ18nIChoZWFkIHByZWZpeCkpIHRcXG4gICAgICAgICAgICAgIHBhcnNlRXJyIFxcXCJNb3JlIHRoYW4gb25lIHZhcmlhYmxlIGluIGRvLWNsYXVzZTogXFxcIiBjbGF1c2VcXG4gICAgICAgICAgICBtYWtlQmluZCAnXycgdFxcbiAgICAgICAgZG9DbGF1c2UgdCBjbGF1c2UgW2ggfCBwcmVmaXhdIGluTGV0IGNvbnRcXG4gICAgbWFrZUJpbmQgJ18nIGNsYXVzZVwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfc3RlcHBpbmdDbGF1c2Upe3JldHVybiBmdW5jdGlvbihMX2NsYXVzZSl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlZml4KXtyZXR1cm4gZnVuY3Rpb24oTF9pbkxldCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9tYWtlQmluZDtcblxuTF9tYWtlQmluZCA9IChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Zhcil7cmV0dXJuIGZ1bmN0aW9uKExfbW9uYWQpe3JldHVybiByZXNvbHZlKExfY29udCkoTF9mYWxzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9pbkxldCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiLlwiKSl9KSkoTF9pZCkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiYmluZFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX21vbmFkKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF92YXIpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIi5cIikpKExfcmVzdCl9KSl9KSl9KSkoTF9uaWwpfSkpfSkpfSkpfX0pKX19fSk7XG5yZXR1cm4gcmVzb2x2ZShMX2lzQ29ucykoTF9zdGVwcGluZ0NsYXVzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9zdGVwcGluZ0NsYXVzZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCI9XCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2luTGV0KSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnQpKExfdHJ1ZSkoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2NsYXVzZSkoTF9yZXN0KX19KSl9KSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX3RydWUpKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxcXFxcXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfY2xhdXNlKShMX3Jlc3QpfSkpfX0pKX0pKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcIjwtXCIpKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX3QpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJObyBtb25hZCBpbiBkby1jbGF1c2U6IFwiKSkoTF9jbGF1c2UpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcHJlZml4KSgoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oTF9waCl7cmV0dXJuIGZ1bmN0aW9uKExfcHQpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfcHQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZUJpbmQpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfaXNOaWwpKExfcHJlZml4KShsYXp5KFwiX1wiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9oZWFkKShMX3ByZWZpeCl9KSl9KSkoTF90KX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX3BhcnNlRXJyKShsYXp5KFwiTW9yZSB0aGFuIG9uZSB2YXJpYWJsZSBpbiBkby1jbGF1c2U6IFwiKSkoTF9jbGF1c2UpfSkpfX19fSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZUJpbmQpKGxhenkoXCJfXCIpKShMX3QpfSkpfSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZG9DbGF1c2UpKExfdCkoTF9jbGF1c2UpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9oKShMX3ByZWZpeCl9KSkoTF9pbkxldCkoTF9jb250KX0pKX0pKX19fSkpfSkpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfbWFrZUJpbmQpKGxhenkoXCJfXCIpKShMX2NsYXVzZSl9KSl9KSgpfX19fX19KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmVG9rZW5QYWNrKShsYXp5KFwiZG9cIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiPC1cIikpKExfbmlsKX0pKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbmlsKSgoZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfbmlsKShMX25pbCl9KSl9KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkU3RkVG9rZW5QYWNrcykoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwibGlzdFwiKSkoKGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwiaW5maXhcIikpKChmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfY29ucykobGF6eShcImRvXCIpKShMX25pbCl9KSl9KSl9KSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfcmVzZXRTdGRUb2tlblBhY2tzKX1dKTtcbiIsIihmdW5jdGlvbihnbG9iYWwpey8qIVxuIExvLURhc2ggMC43LjAgbG9kYXNoLmNvbS9saWNlbnNlXG4gVW5kZXJzY29yZS5qcyAxLjMuMyBnaXRodWIuY29tL2RvY3VtZW50Y2xvdWQvdW5kZXJzY29yZS9ibG9iL21hc3Rlci9MSUNFTlNFXG4qL1xuOyhmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHMoZSl7cmV0dXJuIG5ldyBvKGUpfWZ1bmN0aW9uIG8oZSl7aWYoZSYmZS5fX3dyYXBwZWRfXylyZXR1cm4gZTt0aGlzLl9fd3JhcHBlZF9fPWV9ZnVuY3Rpb24gdShlLHQpe3JldHVybiBmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGUuY2FsbCh0LG4scixpKX19ZnVuY3Rpb24gYShlLHQsbil7dHx8KHQ9MCk7dmFyIHI9ZS5sZW5ndGgsaT1yLXQ+PShufHxXKSxzPWk/e306ZTtpZihpKWZvcih2YXIgbz10LTE7KytvPHI7KW49ZVtvXStcIlwiLChhdC5jYWxsKHMsbik/c1tuXTpzW25dPVtdKS5wdXNoKGVbb10pO3JldHVybiBmdW5jdGlvbihlKXtpZihpKXt2YXIgbj1lK1wiXCI7cmV0dXJuIGF0LmNhbGwocyxuKSYmLTE8TChzW25dLGUpfXJldHVybi0xPEwocyxlLHQpfX1mdW5jdGlvbiBmKGUsbil7dmFyIHI9ZS5iLGk9bi5iLGU9ZS5hLG49bi5hO2lmKGUhPT1uKXtpZihlPm58fGU9PT10KXJldHVybiAxO2lmKGU8bnx8bj09PXQpcmV0dXJuLTF9cmV0dXJuIHI8XG5pPy0xOjF9ZnVuY3Rpb24gbChlLHQsbil7ZnVuY3Rpb24gcigpe3ZhciB1PWFyZ3VtZW50cyxhPXM/dGhpczp0O3JldHVybiBpfHwoZT10W29dKSxuLmxlbmd0aCYmKHU9dS5sZW5ndGg/bi5jb25jYXQoY3QuY2FsbCh1KSk6biksdGhpcyBpbnN0YW5jZW9mIHI/KHYucHJvdG90eXBlPWUucHJvdG90eXBlLGE9bmV3IHYsKHU9ZS5hcHBseShhLHUpKSYmJHRbdHlwZW9mIHVdP3U6YSk6ZS5hcHBseShhLHUpfXZhciBpPUUoZSkscz0hbixvPWU7cmV0dXJuIHMmJihuPXQpLHJ9ZnVuY3Rpb24gYygpe2Zvcih2YXIgZSx0LG4scz0tMSxvPWFyZ3VtZW50cy5sZW5ndGgsYT17ZTpcIlwiLGY6XCJcIixqOlwiXCIscTpcIlwiLGM6e2Q6XCJcIn0sbTp7ZDpcIlwifX07KytzPG87KWZvcih0IGluIGU9YXJndW1lbnRzW3NdLGUpbj0obj1lW3RdKT09cj9cIlwiOm4sL2R8aS8udGVzdCh0KT8oXCJzdHJpbmdcIj09dHlwZW9mIG4mJihuPXtiOm4sbDpufSksYS5jW3RdPW4uYnx8XCJcIixhLm1bdF09bi5sfHxcIlwiKTphW3RdPW47ZT1cbmEuYSx0PS9eW14sXSsvLmV4ZWMoZSlbMF0sbj1hLnMsYS5nPXQsYS5oPU10LGEuaz1SdCxhLm49UHQsYS5wPXJ0LGEucj1hLnIhPT1pLGEucz1uPT1yP1V0Om4sYS5vPT1yJiYoYS5vPWp0KSxhLmZ8fChhLmY9XCJpZighXCIrdCtcIilyZXR1cm4gdVwiKTtpZihcImVcIiE9dHx8IWEuYy5pKWEuYz1yO3Q9XCJcIixhLnMmJih0Kz1cIid1c2Ugc3RyaWN0JztcIiksdCs9XCJ2YXIgaixBLGs9XCIrYS5nK1wiLHVcIixhLmomJih0Kz1cIj1cIithLmopLHQrPVwiO1wiK2EuZitcIjtcIithLnErXCI7XCIsYS5jJiYodCs9XCJ2YXIgbD1rLmxlbmd0aDtqPS0xO1wiLGEubSYmKHQrPVwiaWYobD09PStsKXtcIiksYS5vJiYodCs9XCJpZih6LmNhbGwoayk9PXgpe2s9ay5zcGxpdCgnJyl9XCIpLHQrPWEuYy5kK1wiO3doaWxlKCsrajxsKXtBPWtbal07XCIrYS5jLmkrXCJ9XCIsYS5tJiYodCs9XCJ9XCIpKTtpZihhLm0pe2EuYz90Kz1cImVsc2V7XCI6YS5uJiYodCs9XCJ2YXIgbD1rLmxlbmd0aDtqPS0xO2lmKGwmJk8oaykpe3doaWxlKCsrajxsKXtBPWtbais9JyddO1wiK1xuYS5tLmkrXCJ9fWVsc2V7XCIpLGEuaHx8KHQrPVwidmFyIHY9dHlwZW9mIGs9PSdmdW5jdGlvbicmJnIuY2FsbChrLCdwcm90b3R5cGUnKTtcIik7aWYoYS5rJiZhLnIpdCs9XCJ2YXIgbz0tMSxwPVhbdHlwZW9mIGtdP20oayk6W10sbD1wLmxlbmd0aDtcIithLm0uZCtcIjt3aGlsZSgrK288bCl7aj1wW29dO1wiLGEuaHx8KHQrPVwiaWYoISh2JiZqPT0ncHJvdG90eXBlJykpe1wiKSx0Kz1cIkE9a1tqXTtcIithLm0uaStcIlwiLGEuaHx8KHQrPVwifVwiKTtlbHNle3QrPWEubS5kK1wiO2ZvcihqIGluIGspe1wiO2lmKCFhLmh8fGEucil0Kz1cImlmKFwiLGEuaHx8KHQrPVwiISh2JiZqPT0ncHJvdG90eXBlJylcIiksIWEuaCYmYS5yJiYodCs9XCImJlwiKSxhLnImJih0Kz1cImguY2FsbChrLGopXCIpLHQrPVwiKXtcIjt0Kz1cIkE9a1tqXTtcIithLm0uaStcIjtcIjtpZighYS5ofHxhLnIpdCs9XCJ9XCJ9dCs9XCJ9XCI7aWYoYS5oKXt0Kz1cInZhciBnPWsuY29uc3RydWN0b3I7XCI7Zm9yKG49MDs3Pm47bisrKXQrPVwiaj0nXCIrYS5wW25dK1wiJztpZihcIlxuLFwiY29uc3RydWN0b3JcIj09YS5wW25dJiYodCs9XCIhKGcmJmcucHJvdG90eXBlPT09aykmJlwiKSx0Kz1cImguY2FsbChrLGopKXtBPWtbal07XCIrYS5tLmkrXCJ9XCJ9aWYoYS5jfHxhLm4pdCs9XCJ9XCJ9cmV0dXJuIHQrPWEuZStcIjtyZXR1cm4gdVwiLEZ1bmN0aW9uKFwiRCxFLEYsYyxJLGYsSixoLGksTSxPLFEsUyxULFcsWCxtLHIsdyx4LHpcIixcInZhciBHPWZ1bmN0aW9uKFwiK2UrXCIpe1wiK3QrXCJ9O3JldHVybiBHXCIpKHp0LFIsRCx1LGYsdXQsbG4sYXQsUCxMLHcsc24sRSxvbixDdCwkdCxndCxsdCxjdCxMdCxodCl9ZnVuY3Rpb24gaChlLHQpe3JldHVybiBvdFt0XX1mdW5jdGlvbiBwKGUpe3JldHVyblwiXFxcXFwiK0p0W2VdfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIFh0W2VdfWZ1bmN0aW9uIHYoKXt9ZnVuY3Rpb24gbShlLHQpe2lmKGUmJlYudGVzdCh0KSlyZXR1cm5cIjxlJS1cIit0K1wiJT5cIjt2YXIgbj1vdC5sZW5ndGg7cmV0dXJuIG90W25dPVwiJytfX2UoXCIrdCtcIikrJ1wiLGl0K24rc3R9ZnVuY3Rpb24gZ1xuKGUsdCxuLGkpe3JldHVybiBpPyhlPW90Lmxlbmd0aCxvdFtlXT1cIic7XCIraStcIjtfX3ArPSdcIixpdCtlK3N0KTp0P20ocix0KTp5KHIsbil9ZnVuY3Rpb24geShlLHQpe2lmKGUmJlYudGVzdCh0KSlyZXR1cm5cIjxlJT1cIit0K1wiJT5cIjt2YXIgbj1vdC5sZW5ndGg7cmV0dXJuIG90W25dPVwiJysoKF9fdD0oXCIrdCtcIikpPT1udWxsPycnOl9fdCkrJ1wiLGl0K24rc3R9ZnVuY3Rpb24gYihlKXtyZXR1cm4gVnRbZV19ZnVuY3Rpb24gdyhlKXtyZXR1cm4gaHQuY2FsbChlKT09RXR9ZnVuY3Rpb24gRShlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIFMoZSx0KXt2YXIgbj1pO2lmKCFlfHxcIm9iamVjdFwiIT10eXBlb2YgZXx8IXQmJncoZSkpcmV0dXJuIG47dmFyIHI9ZS5jb25zdHJ1Y3RvcjtyZXR1cm4oIUZ0fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRvU3RyaW5nfHxcInN0cmluZ1wiIT10eXBlb2YgKGUrXCJcIikpJiYoIUUocil8fHIgaW5zdGFuY2VvZiByKT9EdD8obG4oZSxmdW5jdGlvbihcbmUsdCxyKXtyZXR1cm4gbj0hYXQuY2FsbChyLHQpLGl9KSxuPT09aSk6KGxuKGUsZnVuY3Rpb24oZSx0KXtuPXR9KSxuPT09aXx8YXQuY2FsbChlLG4pKTpufWZ1bmN0aW9uIHgoZSx0LHMsbyx1KXtpZihlPT1yKXJldHVybiBlO3MmJih0PWkpO2lmKHM9JHRbdHlwZW9mIGVdKXt2YXIgYT1odC5jYWxsKGUpO2lmKCFXdFthXXx8SHQmJncoZSkpcmV0dXJuIGU7dmFyIGY9YT09U3Qscz1mfHwoYT09Q3Q/b24oZSxuKTpzKX1pZighc3x8IXQpcmV0dXJuIHM/Zj9jdC5jYWxsKGUpOmZuKHt9LGUpOmU7cz1lLmNvbnN0cnVjdG9yO3N3aXRjaChhKXtjYXNlIHh0OnJldHVybiBuZXcgcyhlPT1uKTtjYXNlIFR0OnJldHVybiBuZXcgcygrZSk7Y2FzZSBOdDpjYXNlIEx0OnJldHVybiBuZXcgcyhlKTtjYXNlIGt0OnJldHVybiBzKGUuc291cmNlLEcuZXhlYyhlKSl9b3x8KG89W10pLHV8fCh1PVtdKTtmb3IoYT1vLmxlbmd0aDthLS07KWlmKG9bYV09PWUpcmV0dXJuIHVbYV07dmFyIGw9Zj9zKFxuYT1lLmxlbmd0aCk6e307by5wdXNoKGUpLHUucHVzaChsKTtpZihmKWZvcihmPS0xOysrZjxhOylsW2ZdPXgoZVtmXSx0LHIsbyx1KTtlbHNlIGNuKGUsZnVuY3Rpb24oZSxuKXtsW25dPXgoZSx0LHIsbyx1KX0pO3JldHVybiBsfWZ1bmN0aW9uIFQoZSx0LHMsbyl7aWYoZT09cnx8dD09cilyZXR1cm4gZT09PXQ7aWYoZT09PXQpcmV0dXJuIDAhPT1lfHwxL2U9PTEvdDtpZigkdFt0eXBlb2YgZV18fCR0W3R5cGVvZiB0XSllPWUuX193cmFwcGVkX198fGUsdD10Ll9fd3JhcHBlZF9ffHx0O3ZhciB1PWh0LmNhbGwoZSk7aWYodSE9aHQuY2FsbCh0KSlyZXR1cm4gaTtzd2l0Y2godSl7Y2FzZSB4dDpjYXNlIFR0OnJldHVybitlPT0rdDtjYXNlIE50OnJldHVybiBlIT0rZT90IT0rdDowPT1lPzEvZT09MS90OmU9PSt0O2Nhc2Uga3Q6Y2FzZSBMdDpyZXR1cm4gZT09dCtcIlwifXZhciBhPXp0W3VdO2lmKEh0JiYhYSYmKGE9dyhlKSkmJiF3KHQpfHwhYSYmKHUhPUN0fHxGdCYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFxuZS50b1N0cmluZyYmXCJzdHJpbmdcIj09dHlwZW9mIChlK1wiXCIpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnRvU3RyaW5nJiZcInN0cmluZ1wiPT10eXBlb2YgKHQrXCJcIikpKSlyZXR1cm4gaTtzfHwocz1bXSksb3x8KG89W10pO2Zvcih1PXMubGVuZ3RoO3UtLTspaWYoc1t1XT09ZSlyZXR1cm4gb1t1XT09dDt2YXIgdT0tMSxmPW4sbD0wO3MucHVzaChlKSxvLnB1c2godCk7aWYoYSl7bD1lLmxlbmd0aDtpZihmPWw9PXQubGVuZ3RoKWZvcig7bC0tJiYoZj1UKGVbbF0sdFtsXSxzLG8pKTspO3JldHVybiBmfWE9ZS5jb25zdHJ1Y3RvcixmPXQuY29uc3RydWN0b3I7aWYoYSE9ZiYmKCFFKGEpfHwhKGEgaW5zdGFuY2VvZiBhJiZFKGYpJiZmIGluc3RhbmNlb2YgZikpKXJldHVybiBpO2Zvcih2YXIgYyBpbiBlKWlmKGF0LmNhbGwoZSxjKSYmKGwrKywhYXQuY2FsbCh0LGMpfHwhVChlW2NdLHRbY10scyxvKSkpcmV0dXJuIGk7Zm9yKGMgaW4gdClpZihhdC5jYWxsKHQsYykmJiEobC0tKSlyZXR1cm4gaVxuO2lmKE10KWZvcig7Nz4rK3U7KWlmKGM9cnRbdV0sYXQuY2FsbChlLGMpJiYoIWF0LmNhbGwodCxjKXx8IVQoZVtjXSx0W2NdLHMsbykpKXJldHVybiBpO3JldHVybiBufWZ1bmN0aW9uIE4oZSx0LG4scil7aWYoIWUpcmV0dXJuIG47dmFyIGk9ZS5sZW5ndGgscz0zPmFyZ3VtZW50cy5sZW5ndGg7ciYmKHQ9dSh0LHIpKTtpZihpPT09K2kpe3ZhciBvPWp0JiZodC5jYWxsKGUpPT1MdD9lLnNwbGl0KFwiXCIpOmU7Zm9yKGkmJnMmJihuPW9bLS1pXSk7aS0tOyluPXQobixvW2ldLGksZSk7cmV0dXJuIG59bz12bihlKTtmb3IoKGk9by5sZW5ndGgpJiZzJiYobj1lW29bLS1pXV0pO2ktLTspcz1vW2ldLG49dChuLGVbc10scyxlKTtyZXR1cm4gbn1mdW5jdGlvbiBDKGUsdCxuKXtpZihlKXJldHVybiB0PT1yfHxuP2VbMF06Y3QuY2FsbChlLDAsdCl9ZnVuY3Rpb24gayhlLHQpe3ZhciBuPVtdO2lmKCFlKXJldHVybiBuO2Zvcih2YXIgcixpPS0xLHM9ZS5sZW5ndGg7KytpPHM7KXI9ZVtpXSxcbnNuKHIpP2Z0LmFwcGx5KG4sdD9yOmsocikpOm4ucHVzaChyKTtyZXR1cm4gbn1mdW5jdGlvbiBMKGUsdCxuKXtpZighZSlyZXR1cm4tMTt2YXIgcj0tMSxpPWUubGVuZ3RoO2lmKG4pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBuKXJldHVybiByPU0oZSx0KSxlW3JdPT09dD9yOi0xO3I9KDA+bj95dCgwLGkrbik6biktMX1mb3IoOysrcjxpOylpZihlW3JdPT09dClyZXR1cm4gcjtyZXR1cm4tMX1mdW5jdGlvbiBBKGUsdCxuKXt2YXIgcj0tSW5maW5pdHksaT1yO2lmKCFlKXJldHVybiBpO3ZhciBzPS0xLG89ZS5sZW5ndGg7aWYoIXQpe2Zvcig7KytzPG87KWVbc10+aSYmKGk9ZVtzXSk7cmV0dXJuIGl9Zm9yKG4mJih0PXUodCxuKSk7KytzPG87KW49dChlW3NdLHMsZSksbj5yJiYocj1uLGk9ZVtzXSk7cmV0dXJuIGl9ZnVuY3Rpb24gTyhlLHQsbil7cmV0dXJuIGU/Y3QuY2FsbChlLHQ9PXJ8fG4/MTp0KTpbXX1mdW5jdGlvbiBNKGUsdCxuLHIpe2lmKCFlKXJldHVybiAwO3ZhciBpPTAsXG5zPWUubGVuZ3RoO2lmKG4pe3ImJihuPUQobixyKSk7Zm9yKHQ9bih0KTtpPHM7KXI9aStzPj4+MSxuKGVbcl0pPHQ/aT1yKzE6cz1yfWVsc2UgZm9yKDtpPHM7KXI9aStzPj4+MSxlW3JdPHQ/aT1yKzE6cz1yO3JldHVybiBpfWZ1bmN0aW9uIF8oZSx0LG4scil7dmFyIHM9W107aWYoIWUpcmV0dXJuIHM7dmFyIG89LTEsYT1lLmxlbmd0aCxmPVtdO1wiZnVuY3Rpb25cIj09dHlwZW9mIHQmJihyPW4sbj10LHQ9aSk7Zm9yKG4/ciYmKG49dShuLHIpKTpuPVA7KytvPGE7KWlmKHI9bihlW29dLG8sZSksdD8hb3x8ZltmLmxlbmd0aC0xXSE9PXI6MD5MKGYscikpZi5wdXNoKHIpLHMucHVzaChlW29dKTtyZXR1cm4gc31mdW5jdGlvbiBEKGUsdCl7cmV0dXJuIHF0fHxwdCYmMjxhcmd1bWVudHMubGVuZ3RoP3B0LmNhbGwuYXBwbHkocHQsYXJndW1lbnRzKTpsKGUsdCxjdC5jYWxsKGFyZ3VtZW50cywyKSl9ZnVuY3Rpb24gUChlKXtyZXR1cm4gZX1mdW5jdGlvbiBIKGUpe0NuKGhuKGUpLGZ1bmN0aW9uKFxudCl7dmFyIHI9c1t0XT1lW3RdO28ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIGU9W3RoaXMuX193cmFwcGVkX19dO3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiZmdC5hcHBseShlLGFyZ3VtZW50cyksZT1yLmFwcGx5KHMsZSksdGhpcy5fX2NoYWluX18mJihlPW5ldyBvKGUpLGUuX19jaGFpbl9fPW4pLGV9fSl9dmFyIG49ITAscj1udWxsLGk9ITEsQixqLEYsSSxxPVwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZleHBvcnRzJiYoXCJvYmplY3RcIj09dHlwZW9mIGdsb2JhbCYmZ2xvYmFsJiZnbG9iYWw9PWdsb2JhbC5nbG9iYWwmJihlPWdsb2JhbCksZXhwb3J0cyksUj1BcnJheS5wcm90b3R5cGUsVT1PYmplY3QucHJvdG90eXBlLHo9MCxXPTMwLFg9ZS5fLFY9L1stPys9IX4qJSZePD58eyhcXC9dfFxcW1xcRHxcXGIoPzpkZWxldGV8aW58aW5zdGFuY2VvZnxuZXd8dHlwZW9mfHZvaWQpXFxiLywkPS8mKD86YW1wfGx0fGd0fHF1b3R8I3gyNyk7L2csSj0vXFxiX19wXFwrPScnOy9nLEs9L1xcYihfX3BcXCs9KScnXFwrL2dcbixRPS8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSlcXCsnJzsvZyxHPS9cXHcqJC8sWT0vKD86X19lfF9fdD0pXFwoXFxzKig/IVtcXGRcXHNcIiddfHRoaXNcXC4pL2csWj1SZWdFeHAoXCJeXCIrKFUudmFsdWVPZitcIlwiKS5yZXBsYWNlKC9bLiorP149IToke30oKXxbXFxdXFwvXFxcXF0vZyxcIlxcXFwkJlwiKS5yZXBsYWNlKC92YWx1ZU9mfGZvciBbXlxcXV0rL2csXCIuKz9cIikrXCIkXCIpLGV0PS9fX3Rva2VuKFxcZCspX18vZyx0dD0vWyY8PlwiJ10vZyxudD0vWydcXG5cXHJcXHRcXHUyMDI4XFx1MjAyOVxcXFxdL2cscnQ9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIiksaXQ9XCJfX3Rva2VuXCIsc3Q9XCJfX1wiLG90PVtdLHV0PVIuY29uY2F0LGF0PVUuaGFzT3duUHJvcGVydHksZnQ9Ui5wdXNoLGx0PVUucHJvcGVydHlJc0VudW1lcmFibGUsY3Q9Ui5zbGljZSxodD1VLnRvU3RyaW5nLHB0PVoudGVzdChcbnB0PWN0LmJpbmQpJiZwdCxkdD1NYXRoLmZsb29yLHZ0PVoudGVzdCh2dD1BcnJheS5pc0FycmF5KSYmdnQsbXQ9ZS5pc0Zpbml0ZSxndD1aLnRlc3QoZ3Q9T2JqZWN0LmtleXMpJiZndCx5dD1NYXRoLm1heCxidD1NYXRoLm1pbix3dD1NYXRoLnJhbmRvbSxFdD1cIltvYmplY3QgQXJndW1lbnRzXVwiLFN0PVwiW29iamVjdCBBcnJheV1cIix4dD1cIltvYmplY3QgQm9vbGVhbl1cIixUdD1cIltvYmplY3QgRGF0ZV1cIixOdD1cIltvYmplY3QgTnVtYmVyXVwiLEN0PVwiW29iamVjdCBPYmplY3RdXCIsa3Q9XCJbb2JqZWN0IFJlZ0V4cF1cIixMdD1cIltvYmplY3QgU3RyaW5nXVwiLEF0PWUuY2xlYXJUaW1lb3V0LE90PWUuc2V0VGltZW91dCxNdCxfdCxEdCxQdD1uOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLng9MX12YXIgdD17MDoxLGxlbmd0aDoxfSxuPVtdO2UucHJvdG90eXBlPXt2YWx1ZU9mOjEseToxfTtmb3IodmFyIHIgaW4gbmV3IGUpbi5wdXNoKHIpO2ZvcihyIGluIGFyZ3VtZW50cylQdD0hcjtNdD00PlxuKG4rXCJcIikubGVuZ3RoLER0PVwieFwiIT1uWzBdLF90PShuLnNwbGljZS5jYWxsKHQsMCwxKSx0WzBdKX0pKDEpO3ZhciBIdD0hdyhhcmd1bWVudHMpLEJ0PVwieFwiIT1jdC5jYWxsKFwieFwiKVswXSxqdD1cInh4XCIhPVwieFwiWzBdK09iamVjdChcInhcIilbMF07dHJ5e3ZhciBGdD0oXCJbb2JqZWN0IE9iamVjdF1cIixodC5jYWxsKGUuZG9jdW1lbnR8fDApPT1DdCl9Y2F0Y2goSXQpe312YXIgcXQ9cHQmJi9cXG58T3BlcmEvLnRlc3QocHQraHQuY2FsbChlLm9wZXJhKSksUnQ9Z3QmJi9eLiskfHRydWUvLnRlc3QoZ3QrISFlLmF0dGFjaEV2ZW50KSxVdD0hcXQsenQ9e307enRbeHRdPXp0W1R0XT16dFtcIltvYmplY3QgRnVuY3Rpb25dXCJdPXp0W050XT16dFtDdF09enRba3RdPWksenRbRXRdPXp0W1N0XT16dFtMdF09bjt2YXIgV3Q9e307V3RbRXRdPVd0W1wiW29iamVjdCBGdW5jdGlvbl1cIl09aSxXdFtTdF09V3RbeHRdPVd0W1R0XT1XdFtOdF09V3RbQ3RdPVd0W2t0XT1XdFtMdF09bjt2YXIgWHQ9e1wiJlwiXG46XCImYW1wO1wiLFwiPFwiOlwiJmx0O1wiLFwiPlwiOlwiJmd0O1wiLCdcIic6XCImcXVvdDtcIixcIidcIjpcIiYjeDI3O1wifSxWdD17XCImYW1wO1wiOlwiJlwiLFwiJmx0O1wiOlwiPFwiLFwiJmd0O1wiOlwiPlwiLFwiJnF1b3Q7XCI6J1wiJyxcIiYjeDI3O1wiOlwiJ1wifSwkdD17XCJib29sZWFuXCI6aSxcImZ1bmN0aW9uXCI6bixvYmplY3Q6bixudW1iZXI6aSxzdHJpbmc6aSxcInVuZGVmaW5lZFwiOmksdW5rbm93bjpufSxKdD17XCJcXFxcXCI6XCJcXFxcXCIsXCInXCI6XCInXCIsXCJcXG5cIjpcIm5cIixcIlxcclwiOlwiclwiLFwiXHRcIjpcInRcIixcIlxcdTIwMjhcIjpcInUyMDI4XCIsXCJcXHUyMDI5XCI6XCJ1MjAyOVwifTtzLnRlbXBsYXRlU2V0dGluZ3M9e2VzY2FwZTovPCUtKFtcXHNcXFNdKz8pJT4vZyxldmFsdWF0ZTovPCUoW1xcc1xcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xcc1xcU10rPyklPi9nLHZhcmlhYmxlOlwiXCJ9O3ZhciBLdD17YTpcImUsZCx5XCIsajpcImVcIixxOlwiaWYoIWQpZD1pO2Vsc2UgaWYoeSlkPWMoZCx5KVwiLGk6XCJpZihkKEEsaixlKT09PWZhbHNlKXJldHVybiB1XCJ9LFF0PXtqOlwie31cIlxuLHE6XCJ2YXIgcTtpZih0eXBlb2YgZCE9J2Z1bmN0aW9uJyl7dmFyIGhoPWQ7ZD1mdW5jdGlvbihBKXtyZXR1cm4gQVtoaF19fWVsc2UgaWYoeSlkPWMoZCx5KVwiLGk6XCJxPWQoQSxqLGUpOyhoLmNhbGwodSxxKT91W3FdKys6dVtxXT0xKVwifSxHdD17ajpcInRydWVcIixpOlwiaWYoIWQoQSxqLGUpKXJldHVybiF1XCJ9LFl0PXtyOmksczppLGE6XCJuXCIsajpcIm5cIixxOlwiZm9yKHZhciBhPTEsYj1hcmd1bWVudHMubGVuZ3RoO2E8YjthKyspe2lmKGs9YXJndW1lbnRzW2FdKXtcIixpOlwidVtqXT1BXCIsZTpcIn19XCJ9LFp0PXtqOlwiW11cIixpOlwiZChBLGosZSkmJnUucHVzaChBKVwifSxlbj17cTpcImlmKHkpZD1jKGQseSlcIn0sdG49e2k6e2w6S3QuaX19LG5uPXtqOlwiXCIsZjpcImlmKCFlKXJldHVybltdXCIsZDp7YjpcInU9QXJyYXkobClcIixsOlwidT1cIisoUnQ/XCJBcnJheShsKVwiOlwiW11cIil9LGk6e2I6XCJ1W2pdPWQoQSxqLGUpXCIsbDpcInVcIisoUnQ/XCJbb109XCI6XCIucHVzaFwiKStcIihkKEEsaixlKSlcIn19LHJuPXtyOlxuaSxhOlwibixkLHlcIixqOlwie31cIixxOlwidmFyIFI9dHlwZW9mIGQ9PSdmdW5jdGlvbic7aWYoIVIpe3ZhciB0PWYuYXBwbHkoRSxhcmd1bWVudHMpfWVsc2UgaWYoeSlkPWMoZCx5KVwiLGk6XCJpZihSPyFkKEEsaixuKTpNKHQsaik8MCl1W2pdPUFcIn07SHQmJih3PWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmISFhdC5jYWxsKGUsXCJjYWxsZWVcIil9KTt2YXIgc249dnR8fGZ1bmN0aW9uKGUpe3JldHVybiBodC5jYWxsKGUpPT1TdH07RSgveC8pJiYoRT1mdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgRnVuY3Rpb25dXCI9PWh0LmNhbGwoZSl9KTt2YXIgb249JHQuX19wcm90b19fIT1VP1M6ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4gaTt2YXIgbj1lLnZhbHVlT2Yscj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYocj1uLl9fcHJvdG9fXykmJnIuX19wcm90b19fO3JldHVybiByP2U9PXJ8fGUuX19wcm90b19fPT1yJiYodHx8IXcoZSkpOlMoZSl9LHVuPWMoe2E6XCJuXCIsajpcIltdXCIsaTpcInUucHVzaChqKVwiXG59KSxhbj1jKFl0LHtpOlwiaWYodVtqXT09bnVsbClcIitZdC5pfSksZm49YyhZdCksbG49YyhLdCxlbix0bix7cjppfSksY249YyhLdCxlbix0biksaG49Yyh7cjppLGE6XCJuXCIsajpcIltdXCIsaTpcImlmKFMoQSkpdS5wdXNoKGopXCIsZTpcInUuc29ydCgpXCJ9KSxwbj1jKHthOlwiblwiLGo6XCJ7fVwiLGk6XCJ1W0FdPWpcIn0pLGRuPWMoe2E6XCJBXCIsajpcInRydWVcIixxOlwidmFyIEg9ei5jYWxsKEEpLGw9QS5sZW5ndGg7aWYoRFtIXVwiKyhIdD9cInx8TyhBKVwiOlwiXCIpK1wifHwoSD09VyYmbD09PStsJiZTKEEuc3BsaWNlKSkpcmV0dXJuIWxcIixpOntsOlwicmV0dXJuIGZhbHNlXCJ9fSksdm49Z3Q/ZnVuY3Rpb24oZSl7dmFyIHQ9dHlwZW9mIGU7cmV0dXJuXCJmdW5jdGlvblwiPT10JiZsdC5jYWxsKGUsXCJwcm90b3R5cGVcIik/dW4oZSk6ZSYmJHRbdF0/Z3QoZSk6W119OnVuLG1uPWMoWXQse2E6XCJuLGNjLE5cIixxOlwidmFyIGIsUCxkZCxlZSxDPWFyZ3VtZW50cyxhPTA7aWYoTj09VCl7Yj0yO2RkPUNbM107ZWU9Q1s0XX1lbHNle2I9Qy5sZW5ndGg7ZGQ9W107ZWU9W119d2hpbGUoKythPGIpe2lmKGs9Q1thXSl7XCJcbixpOlwiaWYoKGNjPUEpJiYoKFA9UShjYykpfHxUKGNjKSkpe3ZhciBLPWZhbHNlLGZmPWRkLmxlbmd0aDt3aGlsZShmZi0tKWlmKEs9ZGRbZmZdPT1jYylicmVhaztpZihLKXt1W2pdPWVlW2ZmXX1lbHNle2RkLnB1c2goY2MpO2VlLnB1c2goQT0oQT11W2pdKSYmUD8oUShBKT9BOltdKTooVChBKT9BOnt9KSk7dVtqXT1HKEEsY2MsVCxkZCxlZSl9fWVsc2UgaWYoY2MhPW51bGwpdVtqXT1jY1wifSksZ249YyhybikseW49Yyh7YTpcIm5cIixqOlwiW11cIixpOlwidVwiKyhSdD9cIltvXT1cIjpcIi5wdXNoXCIpK1wiKFtqLEFdKVwifSksYm49Yyhybix7cTpcImlmKHR5cGVvZiBkIT0nZnVuY3Rpb24nKXt2YXIgcSx0PWYuYXBwbHkoRSxhcmd1bWVudHMpLGw9dC5sZW5ndGg7Zm9yKGo9MTtqPGw7aisrKXtxPXRbal07aWYocSBpbiBuKXVbcV09bltxXX19ZWxzZXtpZih5KWQ9YyhkLHkpXCIsaTpcImlmKGQoQSxqLG4pKXVbal09QVwiLGU6XCJ9XCJ9KSx3bj1jKHthOlwiblwiLGo6XCJbXVwiLGk6XCJ1LnB1c2goQSlcIn0pLEVuPVxuYyh7YTpcImUsZ2dcIixqOlwiZmFsc2VcIixvOmksZDp7YjpcImlmKHouY2FsbChlKT09eClyZXR1cm4gZS5pbmRleE9mKGdnKT4tMVwifSxpOlwiaWYoQT09PWdnKXJldHVybiB0cnVlXCJ9KSxTbj1jKEt0LFF0KSx4bj1jKEt0LEd0KSxUbj1jKEt0LFp0KSxObj1jKEt0LGVuLHtqOlwiXCIsaTpcImlmKGQoQSxqLGUpKXJldHVybiBBXCJ9KSxDbj1jKEt0LGVuKSxrbj1jKEt0LFF0LHtpOlwicT1kKEEsaixlKTsoaC5jYWxsKHUscSk/dVtxXTp1W3FdPVtdKS5wdXNoKEEpXCJ9KSxMbj1jKG5uLHthOlwiZSxVXCIscTpcInZhciBDPXcuY2FsbChhcmd1bWVudHMsMiksUj10eXBlb2YgVT09J2Z1bmN0aW9uJ1wiLGk6e2I6XCJ1W2pdPShSP1U6QVtVXSkuYXBwbHkoQSxDKVwiLGw6XCJ1XCIrKFJ0P1wiW29dPVwiOlwiLnB1c2hcIikrXCIoKFI/VTpBW1VdKS5hcHBseShBLEMpKVwifX0pLEFuPWMoS3Qsbm4pLE9uPWMobm4se2E6XCJlLGFhXCIsaTp7YjpcInVbal09QVthYV1cIixsOlwidVwiKyhSdD9cIltvXT1cIjpcIi5wdXNoXCIpK1wiKEFbYWFdKVwifVxufSksTW49Yyh7YTpcImUsZCxCLHlcIixqOlwiQlwiLHE6XCJ2YXIgVj1hcmd1bWVudHMubGVuZ3RoPDM7aWYoeSlkPWMoZCx5KVwiLGQ6e2I6XCJpZihWKXU9a1srK2pdXCJ9LGk6e2I6XCJ1PWQodSxBLGosZSlcIixsOlwidT1WPyhWPWZhbHNlLEEpOmQodSxBLGosZSlcIn19KSxfbj1jKEt0LFp0LHtpOlwiIVwiK1p0Lml9KSxEbj1jKEt0LEd0LHtqOlwiZmFsc2VcIixpOkd0LmkucmVwbGFjZShcIiFcIixcIlwiKX0pLFBuPWMoS3QsUXQsbm4se2k6e2I6XCJ1W2pdPXthOmQoQSxqLGUpLGI6aixjOkF9XCIsbDpcInVcIisoUnQ/XCJbb109XCI6XCIucHVzaFwiKStcIih7YTpkKEEsaixlKSxiOmosYzpBfSlcIn0sZTpcInUuc29ydChJKTtsPXUubGVuZ3RoO3doaWxlKGwtLSl1W2xdPXVbbF0uY1wifSksSG49YyhadCx7YTpcImUsWlwiLHE6XCJ2YXIgdD1bXTtKKFosZnVuY3Rpb24oQSxxKXt0LnB1c2gocSl9KTt2YXIgYmI9dC5sZW5ndGhcIixpOlwiZm9yKHZhciBxLFk9dHJ1ZSxzPTA7czxiYjtzKyspe3E9dFtzXTtpZighKFk9QVtxXT09PVpbcV0pKWJyZWFrfVkmJnUucHVzaChBKVwiXG59KSxCbj1jKHtyOmksczppLGE6XCJuXCIsajpcIm5cIixxOlwidmFyIEw9YXJndW1lbnRzLGw9TC5sZW5ndGg7aWYobD4xKXtmb3IodmFyIGo9MTtqPGw7aisrKXVbTFtqXV09Rih1W0xbal1dLHUpO3JldHVybiB1fVwiLGk6XCJpZihTKHVbal0pKXVbal09Rih1W2pdLHUpXCJ9KTtzLlZFUlNJT049XCIwLjcuMFwiLHMuYWZ0ZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMT5lP3QoKTpmdW5jdGlvbigpe2lmKDE+LS1lKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHMuYmluZD1ELHMuYmluZEFsbD1CbixzLmNoYWluPWZ1bmN0aW9uKGUpe3JldHVybiBlPW5ldyBvKGUpLGUuX19jaGFpbl9fPW4sZX0scy5jbG9uZT14LHMuY29tcGFjdD1mdW5jdGlvbihlKXt2YXIgdD1bXTtpZighZSlyZXR1cm4gdDtmb3IodmFyIG49LTEscj1lLmxlbmd0aDsrK248cjspZVtuXSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fSxzLmNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIGZ1bmN0aW9uKFxuKXtmb3IodmFyIHQ9YXJndW1lbnRzLG49ZS5sZW5ndGg7bi0tOyl0PVtlW25dLmFwcGx5KHRoaXMsdCldO3JldHVybiB0WzBdfX0scy5jb250YWlucz1FbixzLmNvdW50Qnk9U24scy5kZWJvdW5jZT1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaSgpe2E9cixufHwobz1lLmFwcGx5KHUscykpfXZhciBzLG8sdSxhO3JldHVybiBmdW5jdGlvbigpe3ZhciByPW4mJiFhO3JldHVybiBzPWFyZ3VtZW50cyx1PXRoaXMsQXQoYSksYT1PdChpLHQpLHImJihvPWUuYXBwbHkodSxzKSksb319LHMuZGVmYXVsdHM9YW4scy5kZWZlcj1mdW5jdGlvbihlKXt2YXIgbj1jdC5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gT3QoZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LG4pfSwxKX0scy5kZWxheT1mdW5jdGlvbihlLG4pe3ZhciByPWN0LmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBPdChmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQscil9LG4pfSxzLmRpZmZlcmVuY2U9ZnVuY3Rpb24oZSl7XG52YXIgdD1bXTtpZighZSlyZXR1cm4gdDtmb3IodmFyIG49LTEscj1lLmxlbmd0aCxpPXV0LmFwcGx5KHQsYXJndW1lbnRzKSxpPWEoaSxyKTsrK248cjspaShlW25dKXx8dC5wdXNoKGVbbl0pO3JldHVybiB0fSxzLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4gZT09cj9cIlwiOihlK1wiXCIpLnJlcGxhY2UodHQsZCl9LHMuZXZlcnk9eG4scy5leHRlbmQ9Zm4scy5maWx0ZXI9VG4scy5maW5kPU5uLHMuZmlyc3Q9QyxzLmZsYXR0ZW49ayxzLmZvckVhY2g9Q24scy5mb3JJbj1sbixzLmZvck93bj1jbixzLmZ1bmN0aW9ucz1obixzLmdyb3VwQnk9a24scy5oYXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9hdC5jYWxsKGUsdCk6aX0scy5pZGVudGl0eT1QLHMuaW5kZXhPZj1MLHMuaW5pdGlhbD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU/Y3QuY2FsbChlLDAsLSh0PT1yfHxuPzE6dCkpOltdfSxzLmludGVyc2VjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1bXTtpZighZSlyZXR1cm4gdDt2YXIgblxuLHI9YXJndW1lbnRzLmxlbmd0aCxpPVtdLHM9LTEsbz1lLmxlbmd0aDtlOmZvcig7KytzPG87KWlmKG49ZVtzXSwwPkwodCxuKSl7Zm9yKHZhciB1PTE7dTxyO3UrKylpZighKGlbdV18fChpW3VdPWEoYXJndW1lbnRzW3VdKSkpKG4pKWNvbnRpbnVlIGU7dC5wdXNoKG4pfXJldHVybiB0fSxzLmludmVydD1wbixzLmludm9rZT1MbixzLmlzQXJndW1lbnRzPXcscy5pc0FycmF5PXNuLHMuaXNCb29sZWFuPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09bnx8ZT09PWl8fGh0LmNhbGwoZSk9PXh0fSxzLmlzRWxlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZT8xPT09ZS5ub2RlVHlwZTppfSxzLmlzRW1wdHk9ZG4scy5pc0VxdWFsPVQscy5pc0Zpbml0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbXQoZSkmJmh0LmNhbGwoZSk9PU50fSxzLmlzRnVuY3Rpb249RSxzLmlzTmFOPWZ1bmN0aW9uKGUpe3JldHVybiBodC5jYWxsKGUpPT1OdCYmZSE9K2V9LHMuaXNOdWxsPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09XG5yfSxzLmlzT2JqZWN0PWZ1bmN0aW9uKGUpe3JldHVybiBlPyR0W3R5cGVvZiBlXTppfSxzLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0scy5rZXlzPXZuLHMubGFzdD1mdW5jdGlvbihlLHQsbil7aWYoZSl7dmFyIGk9ZS5sZW5ndGg7cmV0dXJuIHQ9PXJ8fG4/ZVtpLTFdOmN0LmNhbGwoZSwtdHx8aSl9fSxzLmxhc3RJbmRleE9mPWZ1bmN0aW9uKGUsdCxuKXtpZighZSlyZXR1cm4tMTt2YXIgcj1lLmxlbmd0aDtmb3IobiYmXCJudW1iZXJcIj09dHlwZW9mIG4mJihyPSgwPm4/eXQoMCxyK24pOmJ0KG4sci0xKSkrMSk7ci0tOylpZihlW3JdPT09dClyZXR1cm4gcjtyZXR1cm4tMX0scy5sYXRlQmluZD1mdW5jdGlvbihlLHQpe3JldHVybiBsKHQsZSxjdC5jYWxsKGFyZ3VtZW50cywyKSl9LHMubWFwPUFuLHMubWF4PUEscy5tZW1vaXplPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9dD90LmFwcGx5KHRoaXMsYXJndW1lbnRzKVxuOmFyZ3VtZW50c1swXTtyZXR1cm4gYXQuY2FsbChuLHIpP25bcl06bltyXT1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHMubWVyZ2U9bW4scy5taW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPUluZmluaXR5LGk9cjtpZighZSlyZXR1cm4gaTt2YXIgcz0tMSxvPWUubGVuZ3RoO2lmKCF0KXtmb3IoOysrczxvOyllW3NdPGkmJihpPWVbc10pO3JldHVybiBpfWZvcihuJiYodD11KHQsbikpOysrczxvOyluPXQoZVtzXSxzLGUpLG48ciYmKHI9bixpPWVbc10pO3JldHVybiBpfSxzLm1peGluPUgscy5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGUuXz1YLHRoaXN9LHMub2JqZWN0PWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJue307Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGgsaT17fTsrK248cjspdD9pW2Vbbl1dPXRbbl06aVtlW25dWzBdXT1lW25dWzFdO3JldHVybiBpfSxzLm9taXQ9Z24scy5vbmNlPWZ1bmN0aW9uKGUpe3ZhciB0LHM9aTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gcz9cbnQ6KHM9bix0PWUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGU9cix0KX19LHMucGFpcnM9eW4scy5wYXJ0aWFsPWZ1bmN0aW9uKGUpe3JldHVybiBsKGUsY3QuY2FsbChhcmd1bWVudHMsMSkpfSxzLnBpY2s9Ym4scy5wbHVjaz1PbixzLnJhbmRvbT1mdW5jdGlvbihlLHQpe3JldHVybiBlPT1yJiZ0PT1yP3d0KCk6KGU9K2V8fDAsdD09ciYmKHQ9ZSxlPTApLGUrZHQod3QoKSooKCt0fHwwKS1lKzEpKSl9LHMucmFuZ2U9ZnVuY3Rpb24oZSx0LG4pe2U9K2V8fDAsbj0rbnx8MSx0PT1yJiYodD1lLGU9MCk7Zm9yKHZhciBpPS0xLHQ9eXQoMCxNYXRoLmNlaWwoKHQtZSkvbikpLHM9QXJyYXkodCk7KytpPHQ7KXNbaV09ZSxlKz1uO3JldHVybiBzfSxzLnJlZHVjZT1NbixzLnJlZHVjZVJpZ2h0PU4scy5yZWplY3Q9X24scy5yZXN0PU8scy5yZXN1bHQ9ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4gcjt2YXIgbj1lW3RdO3JldHVybiBFKG4pP2VbdF0oKTpufSxzLnNodWZmbGU9ZnVuY3Rpb24oXG5lKXtpZighZSlyZXR1cm5bXTtmb3IodmFyIHQsbj0tMSxyPWUubGVuZ3RoLGk9QXJyYXkocik7KytuPHI7KXQ9ZHQod3QoKSoobisxKSksaVtuXT1pW3RdLGlbdF09ZVtuXTtyZXR1cm4gaX0scy5zaXplPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiAwO3ZhciB0PWUubGVuZ3RoO3JldHVybiB0PT09K3Q/dDp2bihlKS5sZW5ndGh9LHMuc29tZT1EbixzLnNvcnRCeT1QbixzLnNvcnRlZEluZGV4PU0scy50YXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdChlKSxlfSxzLnRlbXBsYXRlPWZ1bmN0aW9uKGUsdCxuKXtufHwobj17fSk7dmFyIGU9ZStcIlwiLG8sdTtvPW4uZXNjYXBlO3ZhciBhPW4uZXZhbHVhdGUsZj1uLmludGVycG9sYXRlLGw9cy50ZW1wbGF0ZVNldHRpbmdzLGM9bj1uLnZhcmlhYmxlfHxsLnZhcmlhYmxlO289PXImJihvPWwuZXNjYXBlKSxhPT1yJiYoYT1sLmV2YWx1YXRlfHxpKSxmPT1yJiYoZj1sLmludGVycG9sYXRlKSxvJiYoZT1lLnJlcGxhY2UobyxtKSksZiYmKGU9ZVxuLnJlcGxhY2UoZix5KSksYSE9QiYmKEI9YSxJPVJlZ0V4cChcIjxlJS0oW1xcXFxzXFxcXFNdKz8pJT58PGUlPShbXFxcXHNcXFxcU10rPyklPlwiKyhhP1wifFwiK2Euc291cmNlOlwiXCIpLFwiZ1wiKSksbz1vdC5sZW5ndGgsZT1lLnJlcGxhY2UoSSxnKSxvPW8hPW90Lmxlbmd0aCxlPVwiX19wICs9ICdcIitlLnJlcGxhY2UobnQscCkucmVwbGFjZShldCxoKStcIic7XCIsb3QubGVuZ3RoPTAsY3x8KG49anx8XCJvYmpcIixvP2U9XCJ3aXRoKFwiK24rXCIpe1wiK2UrXCJ9XCI6KG4hPWomJihqPW4sRj1SZWdFeHAoXCIoXFxcXChcXFxccyopXCIrbitcIlxcXFwuXCIrbitcIlxcXFxiXCIsXCJnXCIpKSxlPWUucmVwbGFjZShZLFwiJCZcIituK1wiLlwiKS5yZXBsYWNlKEYsXCIkMV9fZFwiKSkpLGU9KG8/ZS5yZXBsYWNlKEosXCJcIik6ZSkucmVwbGFjZShLLFwiJDFcIikucmVwbGFjZShRLFwiJDE7XCIpLGU9XCJmdW5jdGlvbihcIituK1wiKXtcIisoYz9cIlwiOm4rXCJ8fChcIituK1wiPXt9KTtcIikrXCJ2YXIgX190LF9fcD0nJyxfX2U9Xy5lc2NhcGVcIisobz9cIixfX2o9QXJyYXkucHJvdG90eXBlLmpvaW47ZnVuY3Rpb24gcHJpbnQoKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyl9XCJcbjooYz9cIlwiOlwiLF9fZD1cIituK1wiLlwiK24rXCJ8fFwiK24pK1wiO1wiKStlK1wicmV0dXJuIF9fcH1cIjt0cnl7dT1GdW5jdGlvbihcIl9cIixcInJldHVybiBcIitlKShzKX1jYXRjaChkKXt0aHJvdyBkLnNvdXJjZT1lLGR9cmV0dXJuIHQ/dSh0KToodS5zb3VyY2U9ZSx1KX0scy50aHJvdHRsZT1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXthPW5ldyBEYXRlLHU9cixzPWUuYXBwbHkobyxpKX12YXIgaSxzLG8sdSxhPTA7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9bmV3IERhdGUsZj10LShyLWEpO3JldHVybiBpPWFyZ3VtZW50cyxvPXRoaXMsMD49Zj8oYT1yLHM9ZS5hcHBseShvLGkpKTp1fHwodT1PdChuLGYpKSxzfX0scy50aW1lcz1mdW5jdGlvbihlLHQsbil7dmFyIHI9LTE7aWYobilmb3IoOysrcjxlOyl0LmNhbGwobixyKTtlbHNlIGZvcig7KytyPGU7KXQocil9LHMudG9BcnJheT1mdW5jdGlvbihlKXtpZighZSlyZXR1cm5bXTt2YXIgdD1lLmxlbmd0aDtyZXR1cm4gdD09PSt0PyhCdD9odC5cbmNhbGwoZSk9PUx0Olwic3RyaW5nXCI9PXR5cGVvZiBlKT9lLnNwbGl0KFwiXCIpOmN0LmNhbGwoZSk6d24oZSl9LHMudW5lc2NhcGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXI/XCJcIjooZStcIlwiKS5yZXBsYWNlKCQsYil9LHMudW5pb249ZnVuY3Rpb24oKXtmb3IodmFyIGU9LTEsdD1bXSxuPXV0LmFwcGx5KHQsYXJndW1lbnRzKSxyPW4ubGVuZ3RoOysrZTxyOykwPkwodCxuW2VdKSYmdC5wdXNoKG5bZV0pO3JldHVybiB0fSxzLnVuaXE9XyxzLnVuaXF1ZUlkPWZ1bmN0aW9uKGUpe3ZhciB0PXorKztyZXR1cm4gZT9lK3Q6dH0scy52YWx1ZXM9d24scy53aGVyZT1IbixzLndpdGhvdXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9W107aWYoIWUpcmV0dXJuIHQ7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGgsaT1hKGFyZ3VtZW50cywxLDIwKTsrK248cjspaShlW25dKXx8dC5wdXNoKGVbbl0pO3JldHVybiB0fSxzLndyYXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj1bZV07cmV0dXJuIGFyZ3VtZW50c1xuLmxlbmd0aCYmZnQuYXBwbHkobixhcmd1bWVudHMpLHQuYXBwbHkodGhpcyxuKX19LHMuemlwPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybltdO2Zvcih2YXIgdD0tMSxuPUEoT24oYXJndW1lbnRzLFwibGVuZ3RoXCIpKSxyPUFycmF5KG4pOysrdDxuOylyW3RdPU9uKGFyZ3VtZW50cyx0KTtyZXR1cm4gcn0scy5hbGw9eG4scy5hbnk9RG4scy5jb2xsZWN0PUFuLHMuZGV0ZWN0PU5uLHMuZHJvcD1PLHMuZWFjaD1DbixzLmZvbGRsPU1uLHMuZm9sZHI9TixzLmhlYWQ9QyxzLmluY2x1ZGU9RW4scy5pbmplY3Q9TW4scy5tZXRob2RzPWhuLHMuc2VsZWN0PVRuLHMudGFpbD1PLHMudGFrZT1DLHMudW5pcXVlPV8sQ24oe0RhdGU6VHQsTnVtYmVyOk50LFJlZ0V4cDprdCxTdHJpbmc6THR9LGZ1bmN0aW9uKGUsdCl7c1tcImlzXCIrdF09ZnVuY3Rpb24odCl7cmV0dXJuIGh0LmNhbGwodCk9PWV9fSksby5wcm90b3R5cGU9cy5wcm90b3R5cGUsSChzKSxvLnByb3RvdHlwZS5jaGFpbj1mdW5jdGlvbihcbil7cmV0dXJuIHRoaXMuX19jaGFpbl9fPW4sdGhpc30sby5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX3dyYXBwZWRfX30sQ24oXCJwb3AgcHVzaCByZXZlcnNlIHNoaWZ0IHNvcnQgc3BsaWNlIHVuc2hpZnRcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSl7dmFyIHQ9UltlXTtvLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX193cmFwcGVkX187cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpLF90JiZlLmxlbmd0aD09PTAmJmRlbGV0ZSBlWzBdLHRoaXMuX19jaGFpbl9fJiYoZT1uZXcgbyhlKSxlLl9fY2hhaW5fXz1uKSxlfX0pLENuKFtcImNvbmNhdFwiLFwiam9pblwiLFwic2xpY2VcIl0sZnVuY3Rpb24oZSl7dmFyIHQ9UltlXTtvLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPXQuYXBwbHkodGhpcy5fX3dyYXBwZWRfXyxhcmd1bWVudHMpO3JldHVybiB0aGlzLl9fY2hhaW5fXyYmKGU9bmV3IG8oZSksZS5fX2NoYWluX189biksZX19KSx0eXBlb2YgXG5kZWZpbmU9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIGRlZmluZS5hbWQ9PVwib2JqZWN0XCImJmRlZmluZS5hbWQ/KGUuXz1zLGRlZmluZShmdW5jdGlvbigpe3JldHVybiBzfSkpOnE/XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz09cT8obW9kdWxlLmV4cG9ydHM9cykuXz1zOnEuXz1zOmUuXz1zfSkodGhpcyk7XG59KShzZWxmKSIsIihmdW5jdGlvbihnbG9iYWwpey8qKlxuICogbWFya2VkIC0gQSBtYXJrZG93biBwYXJzZXIgKGh0dHBzOi8vZ2l0aHViLmNvbS9jaGpqL21hcmtlZClcbiAqIENvcHlyaWdodCAoYykgMjAxMS0yMDEyLCBDaHJpc3RvcGhlciBKZWZmcmV5LiAoTUlUIExpY2Vuc2VkKVxuICovXG5cbjsoZnVuY3Rpb24oKSB7XG5cbi8qKlxuICogQmxvY2stTGV2ZWwgR3JhbW1hclxuICovXG5cbnZhciBibG9jayA9IHtcbiAgbmV3bGluZTogL15cXG4rLyxcbiAgY29kZTogL14oIHs0fVteXFxuXStcXG4qKSsvLFxuICBmZW5jZXM6IG5vb3AsXG4gIGhyOiAvXiggKlstKl9dKXszLH0gKig/Olxcbit8JCkvLFxuICBoZWFkaW5nOiAvXiAqKCN7MSw2fSkgKihbXlxcbl0rPykgKiMqICooPzpcXG4rfCQpLyxcbiAgbGhlYWRpbmc6IC9eKFteXFxuXSspXFxuICooPXwtKXszLH0gKlxcbiovLFxuICBibG9ja3F1b3RlOiAvXiggKj5bXlxcbl0rKFxcblteXFxuXSspKlxcbiopKy8sXG4gIGxpc3Q6IC9eKCAqKShidWxsKSBbXlxcMF0rPyg/OmhyfFxcbnsyLH0oPyEgKSg/IVxcMWJ1bGwgKVxcbip8XFxzKiQpLyxcbiAgaHRtbDogL14gKig/OmNvbW1lbnR8Y2xvc2VkfGNsb3NpbmcpICooPzpcXG57Mix9fFxccyokKS8sXG4gIGRlZjogL14gKlxcWyhbXlxcXV0rKVxcXTogKihbXlxcc10rKSg/OiArW1wiKF0oW15cXG5dKylbXCIpXSk/ICooPzpcXG4rfCQpLyxcbiAgcGFyYWdyYXBoOiAvXihbXlxcbl0rXFxuPyg/IWhyfGhlYWRpbmd8bGhlYWRpbmd8YmxvY2txdW90ZXx0YWd8ZGVmKSkrXFxuKi8sXG4gIHRleHQ6IC9eW15cXG5dKy9cbn07XG5cbmJsb2NrLmJ1bGxldCA9IC8oPzpbKistXXxcXGQrXFwuKS87XG5ibG9jay5pdGVtID0gL14oICopKGJ1bGwpIFteXFxuXSooPzpcXG4oPyFcXDFidWxsIClbXlxcbl0qKSovO1xuYmxvY2suaXRlbSA9IHJlcGxhY2UoYmxvY2suaXRlbSwgJ2dtJylcbiAgKC9idWxsL2csIGJsb2NrLmJ1bGxldClcbiAgKCk7XG5cbmJsb2NrLmxpc3QgPSByZXBsYWNlKGJsb2NrLmxpc3QpXG4gICgvYnVsbC9nLCBibG9jay5idWxsZXQpXG4gICgnaHInLCAvXFxuKyg/PSg/OiAqWy0qX10pezMsfSAqKD86XFxuK3wkKSkvKVxuICAoKTtcblxuYmxvY2suaHRtbCA9IHJlcGxhY2UoYmxvY2suaHRtbClcbiAgKCdjb21tZW50JywgLzwhLS1bXlxcMF0qPy0tPi8pXG4gICgnY2xvc2VkJywgLzwodGFnKVteXFwwXSs/PFxcL1xcMT4vKVxuICAoJ2Nsb3NpbmcnLCAvPHRhZyg/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXidcIj5dKSo/Pi8pXG4gICgvdGFnL2csIHRhZygpKVxuICAoKTtcblxuYmxvY2sucGFyYWdyYXBoID0gcmVwbGFjZShibG9jay5wYXJhZ3JhcGgpXG4gICgnaHInLCBibG9jay5ocilcbiAgKCdoZWFkaW5nJywgYmxvY2suaGVhZGluZylcbiAgKCdsaGVhZGluZycsIGJsb2NrLmxoZWFkaW5nKVxuICAoJ2Jsb2NrcXVvdGUnLCBibG9jay5ibG9ja3F1b3RlKVxuICAoJ3RhZycsICc8JyArIHRhZygpKVxuICAoJ2RlZicsIGJsb2NrLmRlZilcbiAgKCk7XG5cbmJsb2NrLm5vcm1hbCA9IHtcbiAgZmVuY2VzOiBibG9jay5mZW5jZXMsXG4gIHBhcmFncmFwaDogYmxvY2sucGFyYWdyYXBoXG59O1xuXG5ibG9jay5nZm0gPSB7XG4gIGZlbmNlczogL14gKihgYGB8fn5+KSAqKFxcdyspPyAqXFxuKFteXFwwXSs/KVxccypcXDEgKig/Olxcbit8JCkvLFxuICBwYXJhZ3JhcGg6IC9eL1xufTtcblxuYmxvY2suZ2ZtLnBhcmFncmFwaCA9IHJlcGxhY2UoYmxvY2sucGFyYWdyYXBoKVxuICAoJyg/IScsICcoPyEnICsgYmxvY2suZ2ZtLmZlbmNlcy5zb3VyY2UucmVwbGFjZSgnXFxcXDEnLCAnXFxcXDInKSArICd8JylcbiAgKCk7XG5cbi8qKlxuICogQmxvY2sgTGV4ZXJcbiAqL1xuXG5ibG9jay5sZXhlciA9IGZ1bmN0aW9uKHNyYykge1xuICB2YXIgdG9rZW5zID0gW107XG5cbiAgdG9rZW5zLmxpbmtzID0ge307XG5cbiAgc3JjID0gc3JjXG4gICAgLnJlcGxhY2UoL1xcclxcbnxcXHIvZywgJ1xcbicpXG4gICAgLnJlcGxhY2UoL1xcdC9nLCAnICAgICcpO1xuXG4gIHJldHVybiBibG9jay50b2tlbihzcmMsIHRva2VucywgdHJ1ZSk7XG59O1xuXG5ibG9jay50b2tlbiA9IGZ1bmN0aW9uKHNyYywgdG9rZW5zLCB0b3ApIHtcbiAgdmFyIHNyYyA9IHNyYy5yZXBsYWNlKC9eICskL2dtLCAnJylcbiAgICAsIG5leHRcbiAgICAsIGxvb3NlXG4gICAgLCBjYXBcbiAgICAsIGl0ZW1cbiAgICAsIHNwYWNlXG4gICAgLCBpXG4gICAgLCBsXG4gICAgLCBzdGFydDtcblxuICB3aGlsZSAoc3JjKSB7XG4gICAgc3RhcnQgPSBzcmMubGVuZ3RoO1xuICAgIC8vIG5ld2xpbmVcbiAgICBpZiAoY2FwID0gYmxvY2submV3bGluZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBpZiAoY2FwWzBdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdzcGFjZSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY29kZVxuICAgIGlmIChjYXAgPSBibG9jay5jb2RlLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIGNhcCA9IGNhcFswXS5yZXBsYWNlKC9eIHs0fS9nbSwgJycpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgIHRleHQ6ICFvcHRpb25zLnBlZGFudGljXG4gICAgICAgICAgPyBjYXAucmVwbGFjZSgvXFxuKyQvLCAnJylcbiAgICAgICAgICA6IGNhcCxcbiAgICAgICAgdGV4dExlbjogc3RhcnQgLSBzcmMubGVuZ3RoLFxuICAgICAgICByZW1haW46IHNyYy5sZW5ndGhcbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gZmVuY2VzIChnZm0pXG4gICAgaWYgKGNhcCA9IGJsb2NrLmZlbmNlcy5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgICAgbGFuZzogY2FwWzJdLFxuICAgICAgICB0ZXh0OiBjYXBbM10sXG4gICAgICAgIHRleHRMZW46IHN0YXJ0IC0gc3JjLmxlbmd0aCxcbiAgICAgICAgcmVtYWluOiBzcmMubGVuZ3RoXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGhlYWRpbmdcbiAgICBpZiAoY2FwID0gYmxvY2suaGVhZGluZy5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgZGVwdGg6IGNhcFsxXS5sZW5ndGgsXG4gICAgICAgIHRleHQ6IGNhcFsyXVxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBsaGVhZGluZ1xuICAgIGlmIChjYXAgPSBibG9jay5saGVhZGluZy5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgZGVwdGg6IGNhcFsyXSA9PT0gJz0nID8gMSA6IDIsXG4gICAgICAgIHRleHQ6IGNhcFsxXVxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBoclxuICAgIGlmIChjYXAgPSBibG9jay5oci5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdocidcbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gYmxvY2txdW90ZVxuICAgIGlmIChjYXAgPSBibG9jay5ibG9ja3F1b3RlLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcblxuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnYmxvY2txdW90ZV9zdGFydCdcbiAgICAgIH0pO1xuXG4gICAgICBjYXAgPSBjYXBbMF0ucmVwbGFjZSgvXiAqPiA/L2dtLCAnJyk7XG5cbiAgICAgIC8vIFBhc3MgYHRvcGAgdG8ga2VlcCB0aGUgY3VycmVudFxuICAgICAgLy8gXCJ0b3BsZXZlbFwiIHN0YXRlLiBUaGlzIGlzIGV4YWN0bHlcbiAgICAgIC8vIGhvdyBtYXJrZG93bi5wbCB3b3Jrcy5cbiAgICAgIGJsb2NrLnRva2VuKGNhcCwgdG9rZW5zLCB0b3ApO1xuXG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdibG9ja3F1b3RlX2VuZCdcbiAgICAgIH0pO1xuXG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBsaXN0XG4gICAgaWYgKGNhcCA9IGJsb2NrLmxpc3QuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuXG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdsaXN0X3N0YXJ0JyxcbiAgICAgICAgb3JkZXJlZDogaXNGaW5pdGUoY2FwWzJdKVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEdldCBlYWNoIHRvcC1sZXZlbCBpdGVtLlxuICAgICAgY2FwID0gY2FwWzBdLm1hdGNoKGJsb2NrLml0ZW0pO1xuXG4gICAgICBuZXh0ID0gZmFsc2U7XG4gICAgICBsID0gY2FwLmxlbmd0aDtcbiAgICAgIGkgPSAwO1xuXG4gICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpdGVtID0gY2FwW2ldO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbGlzdCBpdGVtJ3MgYnVsbGV0XG4gICAgICAgIC8vIHNvIGl0IGlzIHNlZW4gYXMgdGhlIG5leHQgdG9rZW4uXG4gICAgICAgIHNwYWNlID0gaXRlbS5sZW5ndGg7XG4gICAgICAgIGl0ZW0gPSBpdGVtLnJlcGxhY2UoL14gKihbKistXXxcXGQrXFwuKSArLywgJycpO1xuXG4gICAgICAgIC8vIE91dGRlbnQgd2hhdGV2ZXIgdGhlXG4gICAgICAgIC8vIGxpc3QgaXRlbSBjb250YWlucy4gSGFja3kuXG4gICAgICAgIGlmICh+aXRlbS5pbmRleE9mKCdcXG4gJykpIHtcbiAgICAgICAgICBzcGFjZSAtPSBpdGVtLmxlbmd0aDtcbiAgICAgICAgICBpdGVtID0gIW9wdGlvbnMucGVkYW50aWNcbiAgICAgICAgICAgID8gaXRlbS5yZXBsYWNlKG5ldyBSZWdFeHAoJ14gezEsJyArIHNwYWNlICsgJ30nLCAnZ20nKSwgJycpXG4gICAgICAgICAgICA6IGl0ZW0ucmVwbGFjZSgvXiB7MSw0fS9nbSwgJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgaXRlbSBpcyBsb29zZSBvciBub3QuXG4gICAgICAgIC8vIFVzZTogLyhefFxcbikoPyEgKVteXFxuXStcXG5cXG4oPyFcXHMqJCkvXG4gICAgICAgIC8vIGZvciBkaXNjb3VudCBiZWhhdmlvci5cbiAgICAgICAgbG9vc2UgPSBuZXh0IHx8IC9cXG5cXG4oPyFcXHMqJCkvLnRlc3QoaXRlbSk7XG4gICAgICAgIGlmIChpICE9PSBsIC0gMSkge1xuICAgICAgICAgIG5leHQgPSBpdGVtW2l0ZW0ubGVuZ3RoLTFdID09PSAnXFxuJztcbiAgICAgICAgICBpZiAoIWxvb3NlKSBsb29zZSA9IG5leHQ7XG4gICAgICAgIH1cblxuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogbG9vc2VcbiAgICAgICAgICAgID8gJ2xvb3NlX2l0ZW1fc3RhcnQnXG4gICAgICAgICAgICA6ICdsaXN0X2l0ZW1fc3RhcnQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJlY3Vyc2UuXG4gICAgICAgIGJsb2NrLnRva2VuKGl0ZW0sIHRva2Vucyk7XG5cbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdsaXN0X2l0ZW1fZW5kJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnbGlzdF9lbmQnXG4gICAgICB9KTtcblxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gaHRtbFxuICAgIGlmIChjYXAgPSBibG9jay5odG1sLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogb3B0aW9ucy5zYW5pdGl6ZVxuICAgICAgICAgID8gJ3BhcmFncmFwaCdcbiAgICAgICAgICA6ICdodG1sJyxcbiAgICAgICAgcHJlOiBjYXBbMV0gPT09ICdwcmUnLFxuICAgICAgICB0ZXh0OiBjYXBbMF1cbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gZGVmXG4gICAgaWYgKHRvcCAmJiAoY2FwID0gYmxvY2suZGVmLmV4ZWMoc3JjKSkpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMubGlua3NbY2FwWzFdLnRvTG93ZXJDYXNlKCldID0ge1xuICAgICAgICBocmVmOiBjYXBbMl0sXG4gICAgICAgIHRpdGxlOiBjYXBbM11cbiAgICAgIH07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB0b3AtbGV2ZWwgcGFyYWdyYXBoXG4gICAgaWYgKHRvcCAmJiAoY2FwID0gYmxvY2sucGFyYWdyYXBoLmV4ZWMoc3JjKSkpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICB0ZXh0OiBjYXBbMF1cbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdGV4dFxuICAgIGlmIChjYXAgPSBibG9jay50ZXh0LmV4ZWMoc3JjKSkge1xuICAgICAgLy8gVG9wLWxldmVsIHNob3VsZCBuZXZlciByZWFjaCBoZXJlLlxuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICB0ZXh0OiBjYXBbMF1cbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRva2Vucztcbn07XG5cbi8qKlxuICogSW5saW5lIFByb2Nlc3NpbmdcbiAqL1xuXG52YXIgaW5saW5lID0ge1xuICBlc2NhcGU6IC9eXFxcXChbXFxcXGAqe31cXFtcXF0oKSMrXFwtLiFfPl0pLyxcbiAgYXV0b2xpbms6IC9ePChbXiA+XSsoQHw6XFwvKVteID5dKyk+LyxcbiAgdXJsOiBub29wLFxuICB0YWc6IC9ePCEtLVteXFwwXSo/LS0+fF48XFwvP1xcdysoPzpcIlteXCJdKlwifCdbXiddKid8W14nXCI+XSkqPz4vLFxuICBsaW5rOiAvXiE/XFxbKGluc2lkZSlcXF1cXChocmVmXFwpLyxcbiAgcmVmbGluazogL14hP1xcWyhpbnNpZGUpXFxdXFxzKlxcWyhbXlxcXV0qKVxcXS8sXG4gIG5vbGluazogL14hP1xcWygoPzpcXFtbXlxcXV0qXFxdfFteXFxbXFxdXSkqKVxcXS8sXG4gIHN0cm9uZzogL15fXyhbXlxcMF0rPylfXyg/IV8pfF5cXCpcXCooW15cXDBdKz8pXFwqXFwqKD8hXFwqKS8sXG4gIGVtOiAvXlxcYl8oKD86X198W15cXDBdKSs/KV9cXGJ8XlxcKigoPzpcXCpcXCp8W15cXDBdKSs/KVxcKig/IVxcKikvLFxuICBjb2RlOiAvXihgKykoW15cXDBdKj9bXmBdKVxcMSg/IWApLyxcbiAgYnI6IC9eIHsyLH1cXG4oPyFcXHMqJCkvLFxuICB0ZXh0OiAvXlteXFwwXSs/KD89W1xcXFw8IVxcW18qYF18IHsyLH1cXG58JCkvXG59O1xuXG5pbmxpbmUuX2xpbmtJbnNpZGUgPSAvKD86XFxbW15cXF1dKlxcXXxbXlxcXV18XFxdKD89W15cXFtdKlxcXSkpKi87XG5pbmxpbmUuX2xpbmtIcmVmID0gL1xccyo8PyhbXlxcc10qPyk+Pyg/OlxccytbJ1wiXShbXlxcMF0qPylbJ1wiXSk/XFxzKi87XG5cbmlubGluZS5saW5rID0gcmVwbGFjZShpbmxpbmUubGluaylcbiAgKCdpbnNpZGUnLCBpbmxpbmUuX2xpbmtJbnNpZGUpXG4gICgnaHJlZicsIGlubGluZS5fbGlua0hyZWYpXG4gICgpO1xuXG5pbmxpbmUucmVmbGluayA9IHJlcGxhY2UoaW5saW5lLnJlZmxpbmspXG4gICgnaW5zaWRlJywgaW5saW5lLl9saW5rSW5zaWRlKVxuICAoKTtcblxuaW5saW5lLm5vcm1hbCA9IHtcbiAgdXJsOiBpbmxpbmUudXJsLFxuICBzdHJvbmc6IGlubGluZS5zdHJvbmcsXG4gIGVtOiBpbmxpbmUuZW0sXG4gIHRleHQ6IGlubGluZS50ZXh0XG59O1xuXG5pbmxpbmUucGVkYW50aWMgPSB7XG4gIHN0cm9uZzogL15fXyg/PVxcUykoW15cXDBdKj9cXFMpX18oPyFfKXxeXFwqXFwqKD89XFxTKShbXlxcMF0qP1xcUylcXCpcXCooPyFcXCopLyxcbiAgZW06IC9eXyg/PVxcUykoW15cXDBdKj9cXFMpXyg/IV8pfF5cXCooPz1cXFMpKFteXFwwXSo/XFxTKVxcKig/IVxcKikvXG59O1xuXG5pbmxpbmUuZ2ZtID0ge1xuICB1cmw6IC9eKGh0dHBzPzpcXC9cXC9bXlxcc10rW14uLDo7XCInKVxcXVxcc10pLyxcbiAgdGV4dDogL15bXlxcMF0rPyg/PVtcXFxcPCFcXFtfKmBdfGh0dHBzPzpcXC9cXC98IHsyLH1cXG58JCkvXG59O1xuXG4vKipcbiAqIElubGluZSBMZXhlclxuICovXG5cbmlubGluZS5sZXhlciA9IGZ1bmN0aW9uKHNyYykge1xuICB2YXIgb3V0ID0gJydcbiAgICAsIGxpbmtzID0gdG9rZW5zLmxpbmtzXG4gICAgLCBsaW5rXG4gICAgLCB0ZXh0XG4gICAgLCBocmVmXG4gICAgLCBjYXA7XG5cbiAgd2hpbGUgKHNyYykge1xuICAgIC8vIGVzY2FwZVxuICAgIGlmIChjYXAgPSBpbmxpbmUuZXNjYXBlLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIG91dCArPSBjYXBbMV07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBhdXRvbGlua1xuICAgIGlmIChjYXAgPSBpbmxpbmUuYXV0b2xpbmsuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgaWYgKGNhcFsyXSA9PT0gJ0AnKSB7XG4gICAgICAgIHRleHQgPSBjYXBbMV1bNl0gPT09ICc6J1xuICAgICAgICAgID8gbWFuZ2xlKGNhcFsxXS5zdWJzdHJpbmcoNykpXG4gICAgICAgICAgOiBtYW5nbGUoY2FwWzFdKTtcbiAgICAgICAgaHJlZiA9IG1hbmdsZSgnbWFpbHRvOicpICsgdGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRleHQgPSBlc2NhcGUoY2FwWzFdKTtcbiAgICAgICAgaHJlZiA9IHRleHQ7XG4gICAgICB9XG4gICAgICBvdXQgKz0gJzxhIGhyZWY9XCInXG4gICAgICAgICsgaHJlZlxuICAgICAgICArICdcIj4nXG4gICAgICAgICsgdGV4dFxuICAgICAgICArICc8L2E+JztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHVybCAoZ2ZtKVxuICAgIGlmIChjYXAgPSBpbmxpbmUudXJsLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIHRleHQgPSBlc2NhcGUoY2FwWzFdKTtcbiAgICAgIGhyZWYgPSB0ZXh0O1xuICAgICAgb3V0ICs9ICc8YSBocmVmPVwiJ1xuICAgICAgICArIGhyZWZcbiAgICAgICAgKyAnXCI+J1xuICAgICAgICArIHRleHRcbiAgICAgICAgKyAnPC9hPic7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB0YWdcbiAgICBpZiAoY2FwID0gaW5saW5lLnRhZy5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gb3B0aW9ucy5zYW5pdGl6ZVxuICAgICAgICA/IGVzY2FwZShjYXBbMF0pXG4gICAgICAgIDogY2FwWzBdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gbGlua1xuICAgIGlmIChjYXAgPSBpbmxpbmUubGluay5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gb3V0cHV0TGluayhjYXAsIHtcbiAgICAgICAgaHJlZjogY2FwWzJdLFxuICAgICAgICB0aXRsZTogY2FwWzNdXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHJlZmxpbmssIG5vbGlua1xuICAgIGlmICgoY2FwID0gaW5saW5lLnJlZmxpbmsuZXhlYyhzcmMpKVxuICAgICAgICB8fCAoY2FwID0gaW5saW5lLm5vbGluay5leGVjKHNyYykpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgbGluayA9IChjYXBbMl0gfHwgY2FwWzFdKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICBsaW5rID0gbGlua3NbbGluay50b0xvd2VyQ2FzZSgpXTtcbiAgICAgIGlmICghbGluayB8fCAhbGluay5ocmVmKSB7XG4gICAgICAgIG91dCArPSBjYXBbMF1bMF07XG4gICAgICAgIHNyYyA9IGNhcFswXS5zdWJzdHJpbmcoMSkgKyBzcmM7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgb3V0ICs9IG91dHB1dExpbmsoY2FwLCBsaW5rKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHN0cm9uZ1xuICAgIGlmIChjYXAgPSBpbmxpbmUuc3Ryb25nLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIG91dCArPSAnPHN0cm9uZz4nXG4gICAgICAgICsgaW5saW5lLmxleGVyKGNhcFsyXSB8fCBjYXBbMV0pXG4gICAgICAgICsgJzwvc3Ryb25nPic7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBlbVxuICAgIGlmIChjYXAgPSBpbmxpbmUuZW0uZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgb3V0ICs9ICc8ZW0+J1xuICAgICAgICArIGlubGluZS5sZXhlcihjYXBbMl0gfHwgY2FwWzFdKVxuICAgICAgICArICc8L2VtPic7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBjb2RlXG4gICAgaWYgKGNhcCA9IGlubGluZS5jb2RlLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIG91dCArPSAnPGNvZGU+J1xuICAgICAgICArIGVzY2FwZShjYXBbMl0sIHRydWUpXG4gICAgICAgICsgJzwvY29kZT4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gYnJcbiAgICBpZiAoY2FwID0gaW5saW5lLmJyLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIG91dCArPSAnPGJyPic7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB0ZXh0XG4gICAgaWYgKGNhcCA9IGlubGluZS50ZXh0LmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIG91dCArPSBlc2NhcGUoY2FwWzBdKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59O1xuXG5mdW5jdGlvbiBvdXRwdXRMaW5rKGNhcCwgbGluaykge1xuICBpZiAoY2FwWzBdWzBdICE9PSAnIScpIHtcbiAgICByZXR1cm4gJzxhIGhyZWY9XCInXG4gICAgICArIGVzY2FwZShsaW5rLmhyZWYpXG4gICAgICArICdcIidcbiAgICAgICsgKGxpbmsudGl0bGVcbiAgICAgID8gJyB0aXRsZT1cIidcbiAgICAgICsgZXNjYXBlKGxpbmsudGl0bGUpXG4gICAgICArICdcIidcbiAgICAgIDogJycpXG4gICAgICArICc+J1xuICAgICAgKyBpbmxpbmUubGV4ZXIoY2FwWzFdKVxuICAgICAgKyAnPC9hPic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICc8aW1nIHNyYz1cIidcbiAgICAgICsgZXNjYXBlKGxpbmsuaHJlZilcbiAgICAgICsgJ1wiIGFsdD1cIidcbiAgICAgICsgZXNjYXBlKGNhcFsxXSlcbiAgICAgICsgJ1wiJ1xuICAgICAgKyAobGluay50aXRsZVxuICAgICAgPyAnIHRpdGxlPVwiJ1xuICAgICAgKyBlc2NhcGUobGluay50aXRsZSlcbiAgICAgICsgJ1wiJ1xuICAgICAgOiAnJylcbiAgICAgICsgJz4nO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2luZ1xuICovXG5cbnZhciB0b2tlbnNcbiAgLCB0b2tlbjtcblxuZnVuY3Rpb24gbmV4dCgpIHtcbiAgcmV0dXJuIHRva2VuID0gdG9rZW5zLnBvcCgpO1xufVxuXG5mdW5jdGlvbiB0b2soKSB7XG4gIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgIGNhc2UgJ3NwYWNlJzoge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBjYXNlICdocic6IHtcbiAgICAgIHJldHVybiAnPGhyPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ2hlYWRpbmcnOiB7XG4gICAgICByZXR1cm4gJzxoJ1xuICAgICAgICArIHRva2VuLmRlcHRoXG4gICAgICAgICsgJz4nXG4gICAgICAgICsgaW5saW5lLmxleGVyKHRva2VuLnRleHQpXG4gICAgICAgICsgJzwvaCdcbiAgICAgICAgKyB0b2tlbi5kZXB0aFxuICAgICAgICArICc+XFxuJztcbiAgICB9XG4gICAgY2FzZSAnY29kZSc6IHtcbiAgICAgIGlmIChvcHRpb25zLmhpZ2hsaWdodCkge1xuICAgICAgICB0b2tlbi5jb2RlID0gb3B0aW9ucy5oaWdobGlnaHQodG9rZW4udGV4dCwgdG9rZW4ubGFuZyk7XG4gICAgICAgIGlmICh0b2tlbi5jb2RlICE9IG51bGwgJiYgdG9rZW4uY29kZSAhPT0gdG9rZW4udGV4dCkge1xuICAgICAgICAgIHRva2VuLmVzY2FwZWQgPSB0cnVlO1xuICAgICAgICAgIHRva2VuLnRleHQgPSB0b2tlbi5jb2RlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdG9rZW4uZXNjYXBlZCkge1xuICAgICAgICB0b2tlbi50ZXh0ID0gZXNjYXBlKHRva2VuLnRleHQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxwcmU+PGNvZGUnXG4gICAgICAgICsgKHRva2VuLmxhbmdcbiAgICAgICAgPyAnIGNsYXNzPVwibGFuZy0nXG4gICAgICAgICsgdG9rZW4ubGFuZ1xuICAgICAgICArICdcIidcbiAgICAgICAgOiAnJylcbiAgICAgICAgKyAnPidcbiAgICAgICAgKyB0b2tlbi50ZXh0XG4gICAgICAgICsgJzwvY29kZT48L3ByZT5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdibG9ja3F1b3RlX3N0YXJ0Jzoge1xuICAgICAgdmFyIGJvZHkgPSAnJztcblxuICAgICAgd2hpbGUgKG5leHQoKS50eXBlICE9PSAnYmxvY2txdW90ZV9lbmQnKSB7XG4gICAgICAgIGJvZHkgKz0gdG9rKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAnPGJsb2NrcXVvdGU+XFxuJ1xuICAgICAgICArIGJvZHlcbiAgICAgICAgKyAnPC9ibG9ja3F1b3RlPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ2xpc3Rfc3RhcnQnOiB7XG4gICAgICB2YXIgdHlwZSA9IHRva2VuLm9yZGVyZWQgPyAnb2wnIDogJ3VsJ1xuICAgICAgICAsIGJvZHkgPSAnJztcblxuICAgICAgd2hpbGUgKG5leHQoKS50eXBlICE9PSAnbGlzdF9lbmQnKSB7XG4gICAgICAgIGJvZHkgKz0gdG9rKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAnPCdcbiAgICAgICAgKyB0eXBlXG4gICAgICAgICsgJz5cXG4nXG4gICAgICAgICsgYm9keVxuICAgICAgICArICc8LydcbiAgICAgICAgKyB0eXBlXG4gICAgICAgICsgJz5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdsaXN0X2l0ZW1fc3RhcnQnOiB7XG4gICAgICB2YXIgYm9keSA9ICcnO1xuXG4gICAgICB3aGlsZSAobmV4dCgpLnR5cGUgIT09ICdsaXN0X2l0ZW1fZW5kJykge1xuICAgICAgICBib2R5ICs9IHRva2VuLnR5cGUgPT09ICd0ZXh0J1xuICAgICAgICAgID8gcGFyc2VUZXh0KClcbiAgICAgICAgICA6IHRvaygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxsaT4nXG4gICAgICAgICsgYm9keVxuICAgICAgICArICc8L2xpPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ2xvb3NlX2l0ZW1fc3RhcnQnOiB7XG4gICAgICB2YXIgYm9keSA9ICcnO1xuXG4gICAgICB3aGlsZSAobmV4dCgpLnR5cGUgIT09ICdsaXN0X2l0ZW1fZW5kJykge1xuICAgICAgICBib2R5ICs9IHRvaygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxsaT4nXG4gICAgICAgICsgYm9keVxuICAgICAgICArICc8L2xpPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ2h0bWwnOiB7XG4gICAgICByZXR1cm4gIXRva2VuLnByZSAmJiAhb3B0aW9ucy5wZWRhbnRpY1xuICAgICAgICA/IGlubGluZS5sZXhlcih0b2tlbi50ZXh0KVxuICAgICAgICA6IHRva2VuLnRleHQ7XG4gICAgfVxuICAgIGNhc2UgJ3BhcmFncmFwaCc6IHtcbiAgICAgIHJldHVybiAnPHA+J1xuICAgICAgICArIGlubGluZS5sZXhlcih0b2tlbi50ZXh0KVxuICAgICAgICArICc8L3A+XFxuJztcbiAgICB9XG4gICAgY2FzZSAndGV4dCc6IHtcbiAgICAgIHJldHVybiAnPHA+J1xuICAgICAgICArIHBhcnNlVGV4dCgpXG4gICAgICAgICsgJzwvcD5cXG4nO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZVRleHQoKSB7XG4gIHZhciBib2R5ID0gdG9rZW4udGV4dFxuICAgICwgdG9wO1xuXG4gIHdoaWxlICgodG9wID0gdG9rZW5zW3Rva2Vucy5sZW5ndGgtMV0pXG4gICAgICAgICAmJiB0b3AudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgYm9keSArPSAnXFxuJyArIG5leHQoKS50ZXh0O1xuICB9XG5cbiAgcmV0dXJuIGlubGluZS5sZXhlcihib2R5KTtcbn1cblxuZnVuY3Rpb24gcGFyc2Uoc3JjKSB7XG4gIHRva2VucyA9IHNyYy5yZXZlcnNlKCk7XG5cbiAgdmFyIG91dCA9ICcnO1xuICB3aGlsZSAobmV4dCgpKSB7XG4gICAgb3V0ICs9IHRvaygpO1xuICB9XG5cbiAgdG9rZW5zID0gbnVsbDtcbiAgdG9rZW4gPSBudWxsO1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbi8qKlxuICogSGVscGVyc1xuICovXG5cbmZ1bmN0aW9uIGVzY2FwZShodG1sLCBlbmNvZGUpIHtcbiAgcmV0dXJuIGh0bWxcbiAgICAucmVwbGFjZSghZW5jb2RlID8gLyYoPyEjP1xcdys7KS9nIDogLyYvZywgJyZhbXA7JylcbiAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxuICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAucmVwbGFjZSgvJy9nLCAnJiMzOTsnKTtcbn1cblxuZnVuY3Rpb24gbWFuZ2xlKHRleHQpIHtcbiAgdmFyIG91dCA9ICcnXG4gICAgLCBsID0gdGV4dC5sZW5ndGhcbiAgICAsIGkgPSAwXG4gICAgLCBjaDtcblxuICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgIGNoID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICBjaCA9ICd4JyArIGNoLnRvU3RyaW5nKDE2KTtcbiAgICB9XG4gICAgb3V0ICs9ICcmIycgKyBjaCArICc7JztcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHRhZygpIHtcbiAgdmFyIHRhZyA9ICcoPyEoPzonXG4gICAgKyAnYXxlbXxzdHJvbmd8c21hbGx8c3xjaXRlfHF8ZGZufGFiYnJ8ZGF0YXx0aW1lfGNvZGUnXG4gICAgKyAnfHZhcnxzYW1wfGtiZHxzdWJ8c3VwfGl8Ynx1fG1hcmt8cnVieXxydHxycHxiZGl8YmRvJ1xuICAgICsgJ3xzcGFufGJyfHdicnxpbnN8ZGVsfGltZylcXFxcYilcXFxcdysoPyE6L3xAKVxcXFxiJztcblxuICByZXR1cm4gdGFnO1xufVxuXG5mdW5jdGlvbiByZXBsYWNlKHJlZ2V4LCBvcHQpIHtcbiAgcmVnZXggPSByZWdleC5zb3VyY2U7XG4gIG9wdCA9IG9wdCB8fCAnJztcbiAgcmV0dXJuIGZ1bmN0aW9uIHNlbGYobmFtZSwgdmFsKSB7XG4gICAgaWYgKCFuYW1lKSByZXR1cm4gbmV3IFJlZ0V4cChyZWdleCwgb3B0KTtcbiAgICB2YWwgPSB2YWwuc291cmNlIHx8IHZhbDtcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgvKF58W15cXFtdKVxcXi9nLCAnJDEnKTtcbiAgICByZWdleCA9IHJlZ2V4LnJlcGxhY2UobmFtZSwgdmFsKTtcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5ub29wLmV4ZWMgPSBub29wO1xuXG4vKipcbiAqIE1hcmtlZFxuICovXG5cbmZ1bmN0aW9uIG1hcmtlZChzcmMsIG9wdCkge1xuICBzZXRPcHRpb25zKG9wdCk7XG4gIGlmIChvcHQgJiYgb3B0LnNhdmVMZXgpIHtcbiAgICByZXR1cm4gW3BhcnNlKGJsb2NrLmxleGVyKHNyYykpLCBibG9jay5sZXhlcihzcmMpXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2UoYmxvY2subGV4ZXIoc3JjKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBPcHRpb25zXG4gKi9cblxudmFyIG9wdGlvbnNcbiAgLCBkZWZhdWx0cztcblxuZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHQpIHtcbiAgaWYgKCFvcHQpIG9wdCA9IGRlZmF1bHRzO1xuICBpZiAob3B0aW9ucyA9PT0gb3B0KSByZXR1cm47XG4gIG9wdGlvbnMgPSBvcHQ7XG5cbiAgaWYgKG9wdGlvbnMuZ2ZtKSB7XG4gICAgYmxvY2suZmVuY2VzID0gYmxvY2suZ2ZtLmZlbmNlcztcbiAgICBibG9jay5wYXJhZ3JhcGggPSBibG9jay5nZm0ucGFyYWdyYXBoO1xuICAgIGlubGluZS50ZXh0ID0gaW5saW5lLmdmbS50ZXh0O1xuICAgIGlubGluZS51cmwgPSBpbmxpbmUuZ2ZtLnVybDtcbiAgfSBlbHNlIHtcbiAgICBibG9jay5mZW5jZXMgPSBibG9jay5ub3JtYWwuZmVuY2VzO1xuICAgIGJsb2NrLnBhcmFncmFwaCA9IGJsb2NrLm5vcm1hbC5wYXJhZ3JhcGg7XG4gICAgaW5saW5lLnRleHQgPSBpbmxpbmUubm9ybWFsLnRleHQ7XG4gICAgaW5saW5lLnVybCA9IGlubGluZS5ub3JtYWwudXJsO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMucGVkYW50aWMpIHtcbiAgICBpbmxpbmUuZW0gPSBpbmxpbmUucGVkYW50aWMuZW07XG4gICAgaW5saW5lLnN0cm9uZyA9IGlubGluZS5wZWRhbnRpYy5zdHJvbmc7XG4gIH0gZWxzZSB7XG4gICAgaW5saW5lLmVtID0gaW5saW5lLm5vcm1hbC5lbTtcbiAgICBpbmxpbmUuc3Ryb25nID0gaW5saW5lLm5vcm1hbC5zdHJvbmc7XG4gIH1cbn1cblxubWFya2VkLm9wdGlvbnMgPVxubWFya2VkLnNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHQpIHtcbiAgZGVmYXVsdHMgPSBvcHQ7XG4gIHNldE9wdGlvbnMob3B0KTtcbiAgcmV0dXJuIG1hcmtlZDtcbn07XG5cbm1hcmtlZC5zZXRPcHRpb25zKHtcbiAgZ2ZtOiB0cnVlLFxuICBwZWRhbnRpYzogZmFsc2UsXG4gIHNhbml0aXplOiBmYWxzZSxcbiAgaGlnaGxpZ2h0OiBudWxsXG59KTtcblxuLyoqXG4gKiBFeHBvc2VcbiAqL1xuXG5tYXJrZWQucGFyc2VyID0gZnVuY3Rpb24oc3JjLCBvcHQpIHtcbiAgc2V0T3B0aW9ucyhvcHQpO1xuICByZXR1cm4gcGFyc2Uoc3JjKTtcbn07XG5cbm1hcmtlZC5sZXhlciA9IGZ1bmN0aW9uKHNyYywgb3B0KSB7XG4gIHNldE9wdGlvbnMob3B0KTtcbiAgcmV0dXJuIGJsb2NrLmxleGVyKHNyYyk7XG59O1xuXG5tYXJrZWQucGFyc2UgPSBtYXJrZWQ7XG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IG1hcmtlZDtcbn0gZWxzZSB7XG4gIHRoaXMubWFya2VkID0gbWFya2VkO1xufVxuXG59KS5jYWxsKGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcyB8fCAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBnbG9iYWwpO1xufSgpKTtcblxufSkoc2VsZikiLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBET1dOX0FSUk9XLCBFTkQsIEVOVEVSLCBFU0MsIEhPTUUsIExFRlRfQVJST1csIE5vdGVib29rLCBQQUdFX0RPV04sIFBBR0VfVVAsIFEsIFJJR0hUX0FSUk9XLCBVUF9BUlJPVywgYXJyb3dzLCBiaW5kTWFya3VwRGl2LCBiaW5kU2xpZGVyLCBjaG9vc2VTbGlkZSwgY2xlYW5FbXB0eU5vZGVzLCBjbG9zZVdpbmRvdywgY291bnRTbGlkZSwgY3JlYXRlTm9kZSwgZGVsYXksIGVkaXRpbmdFbmFibGVkLCBlbmFibGVFZGl0aW5nLCBlbmFibGVTbGlkZUNvbnRyb2xzLCBmaXJzdFNsaWRlLCBnZXRFbGVtZW50Q29kZSwgaGFuZGxlSW50ZXJuYWxTZWN0aW9ucywgaGlkZVNsaWRlLCBpbnNlcnRDb250cm9scywgaXNMZWlzdXJlQ29kZSwgalF1ZXJ5LCBsYXN0U2xpZGUsIG1ha2VNYXJrdXBEaXYsIG1ha2VTZWN0aW9uLCBtYWtlU2xpZGVEaXYsIG1hcmt1cEJ1dHRvbnMsIG1hcmt1cEVsZW1lbnQsIG1hcmt1cFNsaWRlQ29udGVudCwgbWFya3VwU2xpZGVzLCBtZXJnZUxlaXN1cmVDb2RlLCBtZXJnZVVwLCBuZXh0U2libGluZywgbmV4dFNsaWRlLCBudGhTbGlkZSwgb2xkU2xpZGUsIHBhZFNsaWRlLCBwcmVzZW50TGVpc3VyZUNvZGUsIHByZXNlbnRTbGlkZSwgcHJldlNsaWRlLCBwcmV2aW91c1NpYmxpbmcsIHJlbW92ZSwgc2hvd1NsaWRlLCBzbGlkZUNvbnRyb2xzLCBzbGlkZUNvbnRyb2xzRW5hYmxlZCwgc2xpZGVLZXlMaXN0ZW5lciwgc2xpZGVOYW1lLCBzbGlkZVBhdCwgc2xpZGVzLCBzbGlkaW5nLCB0ZXh0Tm9kZSwgdW53cmFwLCB1bndyYXBDb250ZW50LCBfLCBfcmVmLFxuICAgIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xuXG4gIGpRdWVyeSA9IHdpbmRvdy5qUXVlcnksICQgPSB3aW5kb3cuJCwgXyA9IHdpbmRvdy5fO1xuXG4gIF9yZWYgPSBOb3RlYm9vayA9IHJlcXVpcmUoJy4vbm90ZWJvb2snKSwgRU5URVIgPSBfcmVmLkVOVEVSLCBkZWxheSA9IF9yZWYuZGVsYXksIHRleHROb2RlID0gX3JlZi50ZXh0Tm9kZSwgY3JlYXRlTm9kZSA9IF9yZWYuY3JlYXRlTm9kZSwgcmVtb3ZlID0gX3JlZi5yZW1vdmUsIHVud3JhcCA9IF9yZWYudW53cmFwLCBpbnNlcnRDb250cm9scyA9IF9yZWYuaW5zZXJ0Q29udHJvbHMsIGNsZWFuRW1wdHlOb2RlcyA9IF9yZWYuY2xlYW5FbXB0eU5vZGVzLCBpc0xlaXN1cmVDb2RlID0gX3JlZi5pc0xlaXN1cmVDb2RlLCBnZXRFbGVtZW50Q29kZSA9IF9yZWYuZ2V0RWxlbWVudENvZGUsIHByZXZpb3VzU2libGluZyA9IF9yZWYucHJldmlvdXNTaWJsaW5nLCBuZXh0U2libGluZyA9IF9yZWYubmV4dFNpYmxpbmcsIHByZXNlbnRMZWlzdXJlQ29kZSA9IF9yZWYucHJlc2VudExlaXN1cmVDb2RlLCBtZXJnZUxlaXN1cmVDb2RlID0gX3JlZi5tZXJnZUxlaXN1cmVDb2RlLCBjbG9zZVdpbmRvdyA9IF9yZWYuY2xvc2VXaW5kb3csIG1hcmt1cEJ1dHRvbnMgPSBfcmVmLm1hcmt1cEJ1dHRvbnMsIEVTQyA9IF9yZWYuRVNDLCBIT01FID0gX3JlZi5IT01FLCBFTkQgPSBfcmVmLkVORCwgUEFHRV9VUCA9IF9yZWYuUEFHRV9VUCwgUEFHRV9ET1dOID0gX3JlZi5QQUdFX0RPV04sIExFRlRfQVJST1cgPSBfcmVmLkxFRlRfQVJST1csIFJJR0hUX0FSUk9XID0gX3JlZi5SSUdIVF9BUlJPVywgVVBfQVJST1cgPSBfcmVmLlVQX0FSUk9XLCBET1dOX0FSUk9XID0gX3JlZi5ET1dOX0FSUk9XLCBhcnJvd3MgPSBfcmVmLmFycm93cztcblxuICBRID0gODE7XG5cbiAgd2luZG93Lm1hcmt1cCA9IGZ1bmN0aW9uKG1kKSB7XG4gICAgdmFyIG1haW5kb2MsIG5vZGVzLCBfcmVmMTtcblxuICAgIG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW21haW5kb2NdJyk7XG4gICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbWFpbmRvYyA9IGNyZWF0ZU5vZGUoXCI8ZGl2IG1haW5kb2M+PC9kaXY+XCIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUobWFpbmRvYywgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICAgIG5vZGVzID0gW21haW5kb2NdO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYWluZG9jID0gbm9kZXNbMF07XG4gICAgfVxuICAgIG1kID0gKChfcmVmMSA9IG1kICE9IG51bGwgPyBtZC5yZXBsYWNlKC9cXHJcXG4vbWcsICdcXG4nKSA6IHZvaWQgMCkgIT0gbnVsbCA/IF9yZWYxIDogbWFpbmRvYy5pbm5lckhUTUwucmVwbGFjZSgvXlxccyo8IS0tKi8sICcnKS5yZXBsYWNlKC8tLT5cXHMqXFxuKi9tLCAnJykpLnRyaW0oKTtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGVDb250cm9scycpO1xuICAgIG1hcmt1cFNsaWRlcyhtYWluZG9jLCBtZCk7XG4gICAgcmV0dXJuIGluc2VydENvbnRyb2xzKG1haW5kb2MpO1xuICB9O1xuXG4gIGxhc3RTbGlkZSA9IG51bGw7XG5cbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY29uc29sZS5lcnJvcihuZXcgRXJyb3IoXCJSRU1JTkRFUjogSW5jb21wYXRpYmlsaXR5OiB1c2luZyAtd2Via2l0LWNhbGNcIikuc3RhY2spO1xuICAgIH1cbiAgfVxuXG4gIHNsaWRlUGF0ID0gL14oXFwqXFwqXFwqW15cXG5dKlxcbig/Oi0tP1xcbik/KS9tO1xuXG4gIHNsaWRlTmFtZSA9IC9eXFwqXFwqXFwqKFteXFxuXSopXFxuKD86LS0/XFxuKT8vbTtcblxuICBzbGlkaW5nID0gZmFsc2U7XG5cbiAgbWFya3VwU2xpZGVzID0gZnVuY3Rpb24oZWwsIG1kKSB7XG4gICAgdmFyIGRpdiwgaGFzQ29kZSwgc2xpZGVzO1xuXG4gICAgaGFzQ29kZSA9IG1hcmt1cFNsaWRlQ29udGVudChlbCwgbWQpO1xuICAgIHNsaWRlcyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsZWlzdXJlU2VjdGlvbl0nKTtcbiAgICBpZiAoc2xpZGVzLmxlbmd0aCA8PSAoZWwucXVlcnlTZWxlY3RvcignW2xlaXN1cmVTZWN0aW9uPVwiTGVpc3VyZSBDb250cm9sc1wiXScpID8gMiA6IDEpKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJvbmVTbGlkZVwiKTtcbiAgICB9XG4gICAgZGl2ID0gY3JlYXRlTm9kZShcIjxkaXYgY2xhc3M9J3NsaWRlLWNvbnRyb2xzJz5cXG4gIDxkaXYgaWQ9J3NsaWRlLWtpbGxidXR0b24nIG9uY2xpY2s9J3RvZ2dsZVNsaWRlU2hvdygpJyBzdHlsZT0nZmxvYXQ6IHJpZ2h0Jz48YnV0dG9uPlNsaWRlczwvYnV0dG9uPjwvZGl2PlxcbiAgPGRpdiBpZD0nc2xpZGUtbnVtJyBzdHlsZT0nZmxvYXQ6IHJpZ2h0OyBtYXJnaW4tcmlnaHQ6IDEwcHgnPjwvZGl2PlxcbjwvZGl2PlwiKTtcbiAgICBtYXJrdXBCdXR0b25zKGRpdik7XG4gICAgZWwuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBpZiAobG9jYXRpb24uc2VhcmNoICYmIF8uZmluZChsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkuc3BsaXQoJyYnKSwgKGZ1bmN0aW9uKHApIHtcbiAgICAgIHJldHVybiBwLm1hdGNoKC9ec2xpZGVzPS8pO1xuICAgIH0pKSkge1xuICAgICAgc2xpZGluZyA9IHRydWU7XG4gICAgICBzaG93U2xpZGUoJChjaG9vc2VTbGlkZSgpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnc2Nyb2xsJyk7XG4gICAgfVxuICAgIHJldHVybiBoYXNDb2RlO1xuICB9O1xuXG4gIG1hcmt1cFNsaWRlQ29udGVudCA9IGZ1bmN0aW9uKGVsLCBtZCwgbm9NYWluKSB7XG4gICAgdmFyIGNvbnRlbnQsIGhhc0NvZGUsIGksIG0sIHAsIHBhZ2VUeXBlLCBwYWdlcywgX2ksIF9yZWYxLCBfcmVmMjtcblxuICAgIHBhZ2VzID0gbWQuc3BsaXQoc2xpZGVQYXQpO1xuICAgIGhhc0NvZGUgPSBmYWxzZTtcbiAgICBpZiAocGFnZXMubGVuZ3RoID4gMSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdzbGlkZS1jb250YWluZXInKTtcbiAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgYmluZFNsaWRlcigpO1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkb2MnKTtcbiAgICAgIGlmIChwYWdlcy5sZW5ndGggPT09IDMgJiYgIXBhZ2VzWzBdICYmICFwYWdlc1syXSkge1xuICAgICAgICBwYWdlc1syXSA9ICdcXG4nO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gX2kgPSAwLCBfcmVmMSA9IHBhZ2VzLmxlbmd0aDsgX2kgPCBfcmVmMTsgaSA9IF9pICs9IDIpIHtcbiAgICAgICAgcCA9IHBhZ2VzW2ldO1xuICAgICAgICBpZiAocCkge1xuICAgICAgICAgIHBhZ2VUeXBlID0gaSA+IDAgPyAobSA9IChfcmVmMiA9IHBhZ2VzW2kgLSAxXS5tYXRjaChzbGlkZVBhdCkpICE9IG51bGwgPyBfcmVmMlsxXSA6IHZvaWQgMCwgbS5tYXRjaCgvXFxuLVxcbi8pID8gWydjb250aW51YXRpb24nLCAnaGlkZGVuUGFnZSddIDogbS5tYXRjaCgvXFxuLS1cXG4vKSA/IFsnaGlkZGVuUGFnZScsICdzZWNyZXRQYWdlJ10gOiBbXSkgOiBbXTtcbiAgICAgICAgICBjb250ZW50ID0gbWFrZVNsaWRlRGl2KGVsLCBwYWdlVHlwZSwgKGkgPiAwID8gcGFnZXNbaSAtIDFdLm1hdGNoKHNsaWRlTmFtZSlbMV0udHJpbSgpIDogJ01haW4nKSk7XG4gICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICBoYXNDb2RlID0gKG1hcmt1cEVsZW1lbnQoY29udGVudCwgcGFnZXNbaSAtIDFdICsgcCkpIHx8IGhhc0NvZGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhc0NvZGUgPSAobWFya3VwRWxlbWVudChjb250ZW50LCAnKioqXFxuJyArIHApKSB8fCBoYXNDb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYWRTbGlkZShjb250ZW50LCAoaSA+IDAgPyBwYWdlc1tpIC0gMV0gOiAnKioqXFxuJykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRlbnQgPSBtYWtlU2xpZGVEaXYoZWwsIFsncGFnZSddLCAnTWFpbicpO1xuICAgICAgd2hpbGUgKGVsLmZpcnN0Q2hpbGQgIT09IGNvbnRlbnQucGFyZW50Tm9kZSkge1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgICAgaGFzQ29kZSA9IG1hcmt1cEVsZW1lbnQoY29udGVudCwgbWQpO1xuICAgICAgcGFkU2xpZGUoY29udGVudCwgJyoqKlxcbicpO1xuICAgICAgaWYgKG5vTWFpbikge1xuICAgICAgICB1bndyYXBDb250ZW50KGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGFzQ29kZTtcbiAgfTtcblxuICBwYWRTbGlkZSA9IGZ1bmN0aW9uKGNvbnRlbnQsIGhlYWRlcikge1xuICAgIHZhciBkaXYsIHJhbmdlO1xuXG4gICAgaWYgKCFjb250ZW50LmZpcnN0Q2hpbGQgfHwgaXNMZWlzdXJlQ29kZShjb250ZW50LmZpcnN0Q2hpbGQpKSB7XG4gICAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICByYW5nZS5zZXRTdGFydChjb250ZW50LCAwKTtcbiAgICAgIHJhbmdlLnNldEVuZChjb250ZW50LCAwKTtcbiAgICAgIGRpdiA9IG1ha2VNYXJrdXBEaXYocmFuZ2UsIGhlYWRlcik7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoY3JlYXRlTm9kZSgnPGJyPicpKTtcbiAgICB9XG4gICAgaWYgKGlzTGVpc3VyZUNvZGUoY29udGVudC5sYXN0Q2hpbGQpKSB7XG4gICAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICByYW5nZS5zZXRTdGFydEFmdGVyKGNvbnRlbnQubGFzdENoaWxkKTtcbiAgICAgIHJhbmdlLnNldEVuZEFmdGVyKGNvbnRlbnQubGFzdENoaWxkKTtcbiAgICAgIGRpdiA9IG1ha2VNYXJrdXBEaXYocmFuZ2UsICdcXG4nKTtcbiAgICAgIHJldHVybiBkaXYuYXBwZW5kQ2hpbGQoY3JlYXRlTm9kZSgnPGJyPicpKTtcbiAgICB9XG4gIH07XG5cbiAgdW53cmFwQ29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICB2YXIgZWwsIHNlY3Rpb247XG5cbiAgICBzZWN0aW9uID0gY29udGVudC5wYXJlbnROb2RlO1xuICAgIGVsID0gc2VjdGlvbi5wYXJlbnROb2RlO1xuICAgIGVsLmluc2VydEJlZm9yZShjb250ZW50LCBzZWN0aW9uKTtcbiAgICByZW1vdmUoc2VjdGlvbik7XG4gICAgcmV0dXJuIHVud3JhcChjb250ZW50KTtcbiAgfTtcblxuICBtYWtlU2xpZGVEaXYgPSBmdW5jdGlvbihlbCwgcGFnZVR5cGVzLCB0aXRsZSkge1xuICAgIHZhciBjb250ZW50LCBkaXYsIHBhZ2VUeXBlLCBzZWN0aW9uVGl0bGUsIF9pLCBfbGVuO1xuXG4gICAgbGFzdFNsaWRlID0gZGl2ID0gY3JlYXRlTm9kZShcIjxkaXYgY2xhc3M9J2xlaXN1cmVfcGFnZSc+PC9kaXY+XCIpO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVTZWN0aW9uJywgdGl0bGUpO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2RvYycsICcnKTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdzbGlkZScsICcnKTtcbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgnc2xpZGUnKTtcbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgndWktY29ybmVyLWFsbCcpO1xuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCd1aS13aWRnZXQnKTtcbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgndWktd2lkZ2V0LWNvbnRlbnQnKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IHBhZ2VUeXBlcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgcGFnZVR5cGUgPSBwYWdlVHlwZXNbX2ldO1xuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQocGFnZVR5cGUpO1xuICAgIH1cbiAgICBlbC5hcHBlbmRDaGlsZChkaXYpO1xuICAgIHNlY3Rpb25UaXRsZSA9IGNyZWF0ZU5vZGUoXCI8ZGl2IGNsYXNzPSdwYWdlVGl0bGUnPlwiICsgdGl0bGUgKyBcIjwvZGl2PlwiKTtcbiAgICBzZWN0aW9uVGl0bGUuc2V0QXR0cmlidXRlKCdsZWlzdXJlb3V0cHV0JywgJycpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChzZWN0aW9uVGl0bGUpO1xuICAgIGNvbnRlbnQgPSBjcmVhdGVOb2RlKFwiPGRpdiBjbGFzcz0ncGFnZUNvbnRlbnQnPjwvZGl2PlwiKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH07XG5cbiAgY2hvb3NlU2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFyYW07XG5cbiAgICBwYXJhbSA9IF8uZmluZChsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkuc3BsaXQoJyYnKSwgKGZ1bmN0aW9uKHApIHtcbiAgICAgIHJldHVybiBwLm1hdGNoKC9ec2xpZGU9LiovKTtcbiAgICB9KSk7XG4gICAgY29uc29sZS5sb2cocGFyYW0pO1xuICAgIGlmIChwYXJhbSkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbc2xpZGU9J1wiICsgKHBhcmFtLnNwbGl0KCc9JylbMV0pICsgXCInXVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1ttYWluZG9jXScpLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cbiAgfTtcblxuICBvbGRTbGlkZSA9IDA7XG5cbiAgd2luZG93LnRvZ2dsZVNsaWRlU2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgIHNsaWRpbmcgPSAkKGRvY3VtZW50LmJvZHkpLmlzKCcuc2Nyb2xsJyk7XG4gICAgZW5hYmxlU2xpZGVDb250cm9scyh0cnVlKTtcbiAgICBlbmFibGVFZGl0aW5nKHRydWUpO1xuICAgIGlmIChzbGlkaW5nKSB7XG4gICAgICAkKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKCdzY3JvbGwnKTtcbiAgICAgIHJldHVybiBzaG93U2xpZGUobnRoU2xpZGUob2xkU2xpZGUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2xkU2xpZGUgPSAkKCcuc2xpZGUuc2hvd2luZycpLmF0dHIoJ3NsaWRlJyk7XG4gICAgICBoaWRlU2xpZGUoJCgnLnNsaWRlLnNob3dpbmcnKSk7XG4gICAgICAkKGRvY3VtZW50LmJvZHkpLmFkZENsYXNzKCdzY3JvbGwnKTtcbiAgICAgIHJldHVybiAkKCcjc2xpZGUtbnVtJykuaHRtbCgnJyk7XG4gICAgfVxuICB9O1xuXG4gIGJpbmRTbGlkZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgc2xpZGVLZXlMaXN0ZW5lcik7XG4gIH07XG5cbiAgc2xpZGVDb250cm9scyA9IFtRLCBFU0MsIExFRlRfQVJST1csIFJJR0hUX0FSUk9XLCBIT01FLCBFTkQsIFBBR0VfVVAsIFBBR0VfRE9XTl07XG5cbiAgc2xpZGVDb250cm9sc0VuYWJsZWQgPSB0cnVlO1xuXG4gIGVuYWJsZVNsaWRlQ29udHJvbHMgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgIHJldHVybiBzbGlkZUNvbnRyb2xzRW5hYmxlZCA9IHN0YXRlO1xuICB9O1xuXG4gIHByZXNlbnRTbGlkZSA9IGZ1bmN0aW9uKHMpIHtcbiAgICBoaWRlU2xpZGUoJCgnLnNsaWRlLnNob3dpbmcnKSk7XG4gICAgcmV0dXJuIHNob3dTbGlkZShzKTtcbiAgfTtcblxuICBmaXJzdFNsaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNsaWRlcygpO1xuICB9O1xuXG4gIGxhc3RTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzbGlkZXMoKS5sYXN0KCk7XG4gIH07XG5cbiAgcHJldlNsaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG47XG5cbiAgICBuID0gJCgnLnNsaWRlLnNob3dpbmcnKS5wcmV2QWxsKCdbc2xpZGVdJykubm90KCdbbGVpc3VyZVNlY3Rpb249XCJMZWlzdXJlIENvbnRyb2xzXCJdJykubm90KCcuaGlkZGVuUGFnZScpLm5vdCgnLnNlY3JldFBhZ2UnKTtcbiAgICBpZiAobi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBuO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2xpZGVzKCk7XG4gICAgfVxuICB9O1xuXG4gIG5leHRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuO1xuXG4gICAgbiA9ICQoJy5zbGlkZS5zaG93aW5nJykubmV4dEFsbCgnW3NsaWRlXScpLm5vdCgnW2xlaXN1cmVTZWN0aW9uPVwiTGVpc3VyZSBDb250cm9sc1wiXScpLm5vdCgnLmhpZGRlblBhZ2UnKS5ub3QoJy5zZWNyZXRQYWdlJyk7XG4gICAgaWYgKG4ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICQoJy5zbGlkZS5zaG93aW5nJyk7XG4gICAgfVxuICB9O1xuXG4gIHNsaWRlS2V5TGlzdGVuZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGM7XG5cbiAgICBpZiAoc2xpZGluZykge1xuICAgICAgd2luZG93LmV2dCA9IGU7XG4gICAgICBjID0gZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaDtcbiAgICAgIGlmICgoX19pbmRleE9mLmNhbGwoc2xpZGVDb250cm9scywgYykgPj0gMCkgJiYgISQoZS50YXJnZXQpLmlzKCdbbGVpc3VyZW5vZGU9Y29kZV0sW2xlaXN1cmVub2RlPWNvZGVdIConKSAmJiBzbGlkZUNvbnRyb2xzRW5hYmxlZCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChjID09PSBFU0MpIHtcbiAgICAgICAgICByZXR1cm4gdG9nZ2xlU2xpZGVTaG93KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gUSkge1xuICAgICAgICAgIHJldHVybiBjbG9zZVdpbmRvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBwcmVzZW50U2xpZGUoKChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgICAgICBjYXNlIEhPTUU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0U2xpZGUoKTtcbiAgICAgICAgICAgICAgY2FzZSBFTkQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RTbGlkZSgpO1xuICAgICAgICAgICAgICBjYXNlIExFRlRfQVJST1c6XG4gICAgICAgICAgICAgIGNhc2UgUEFHRV9VUDpcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldlNsaWRlKCk7XG4gICAgICAgICAgICAgIGNhc2UgUklHSFRfQVJST1c6XG4gICAgICAgICAgICAgIGNhc2UgUEFHRV9ET1dOOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0U2xpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgc2xpZGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICQoJ1tzbGlkZV0nKS5ub3QoJ1tsZWlzdXJlU2VjdGlvbj1cIkxlaXN1cmUgQ29udHJvbHNcIl0nKS5ub3QoJy5oaWRkZW5QYWdlJykubm90KCcuc2VjcmV0UGFnZScpO1xuICB9O1xuXG4gIG50aFNsaWRlID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBzbGlkZXMoKS5zbGljZShuKTtcbiAgfTtcblxuICBjb3VudFNsaWRlID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgY291bnQsIG4sIHNsaWRlLCBfaSwgX2xlbiwgX3JlZjE7XG5cbiAgICBuID0gLTE7XG4gICAgY291bnQgPSAwO1xuICAgIF9yZWYxID0gc2xpZGVzKCk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgc2xpZGUgPSBfcmVmMVtfaV07XG4gICAgICBjb3VudCsrO1xuICAgICAgaWYgKHNsaWRlID09PSBlbCkge1xuICAgICAgICBuID0gY291bnQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbbiwgY291bnRdO1xuICB9O1xuXG4gIHNob3dTbGlkZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGNvdW50LCBuLCBfcmVmMTtcblxuICAgIF9yZWYxID0gY291bnRTbGlkZShlbFswXSksIG4gPSBfcmVmMVswXSwgY291bnQgPSBfcmVmMVsxXTtcbiAgICBvbGRTbGlkZSA9IG47XG4gICAgJCgnI3NsaWRlLW51bScpLmh0bWwoXCJcIiArIG4gKyBcIiAvIFwiICsgY291bnQpO1xuICAgIHJldHVybiAkKGVsKS5maXJzdCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnc2hvd2luZycpO1xuICB9O1xuXG4gIGhpZGVTbGlkZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgcmV0dXJuICQoZWwpLmZpcnN0KCkuYWRkQ2xhc3MoJ2hpZGRlbicpLnJlbW92ZUNsYXNzKCdzaG93aW5nJyk7XG4gIH07XG5cbiAgbWFya3VwRWxlbWVudCA9IGZ1bmN0aW9uKGVsLCBtZCkge1xuICAgIHZhciBjb2RlLCBjb2RlUG9zLCBsZW4sIGxleCwgbWFya3VwLCBub2RlLCBwcmV2LCBwcmV2Q29kZVBvcywgcmFuZ2UsIHNsaWRlLCBfaSwgX2xlbiwgX3JlZjEsIF9yZWYyLCBfcmVmMztcblxuICAgIGxlbiA9IG1kLmxlbmd0aDtcbiAgICBzbGlkZSA9IChfcmVmMSA9IG1kLm1hdGNoKHNsaWRlUGF0KSkgIT0gbnVsbCA/IF9yZWYxIDogJyc7XG4gICAgX3JlZjIgPSB3aW5kb3cubWFya2VkKChzbGlkZSA/IG1kLnNsaWNlKHNsaWRlWzBdLmxlbmd0aCkgOiBtZCksIHtcbiAgICAgIHNhdmVMZXg6IHRydWUsXG4gICAgICBnZm06IHRydWVcbiAgICB9KSwgbWFya3VwID0gX3JlZjJbMF0sIGxleCA9IF9yZWYyWzFdO1xuICAgIGVsLmlubmVySFRNTCA9IG1hcmt1cC50cmltKCkgfHwgJzxicj4nO1xuICAgIHByZXYgPSBudWxsO1xuICAgIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICBwcmV2Q29kZVBvcyA9IC0xO1xuICAgIGNvZGVQb3MgPSAwO1xuICAgIF9yZWYzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnY29kZScpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmM1tfaV07XG4gICAgICB3aGlsZSAobGV4W2NvZGVQb3NdLnR5cGUgIT09ICdjb2RlJykge1xuICAgICAgICBjb2RlUG9zKys7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5wYXJlbnROb2RlLnRhZ05hbWUgIT09ICdQUkUnKSB7XG4gICAgICAgIGNvZGUgPSBub2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgY29kZS5pbm5lckhUTUwgPSBub2RlLmlubmVySFRNTDtcbiAgICAgIH1cbiAgICAgIGNvZGUuc2V0QXR0cmlidXRlKCdub0xlaXN1cmVCYXInLCAnJyk7XG4gICAgICBjb2RlLnNldEF0dHJpYnV0ZSgnbGVpc3VyZU5vZGUnLCAnY29kZScpO1xuICAgICAgY29kZS5tZCA9IGxleFtjb2RlUG9zXS50ZXh0O1xuICAgICAgaWYgKGNvZGUucGFyZW50Tm9kZS5maXJzdENoaWxkICE9PSBjb2RlKSB7XG4gICAgICAgIGlmIChwcmV2ID09PSBudWxsIHx8IHByZXYucGFyZW50Tm9kZSAhPT0gY29kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQoY29kZS5wYXJlbnROb2RlLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYW5nZS5zZXRTdGFydEFmdGVyKHByZXYpO1xuICAgICAgICB9XG4gICAgICAgIHJhbmdlLnNldEVuZEJlZm9yZShjb2RlKTtcbiAgICAgICAgbWFrZU1hcmt1cERpdihyYW5nZSwgbWQuc3Vic3RyaW5nKChwcmV2Q29kZVBvcyA9PT0gLTEgPyAwIDogbGVuIC0gbGV4W3ByZXZDb2RlUG9zXS5yZW1haW4pLCBsZW4gLSBsZXhbY29kZVBvc10ucmVtYWluIC0gbGV4W2NvZGVQb3NdLnRleHRMZW4pKTtcbiAgICAgIH1cbiAgICAgIHByZXZDb2RlUG9zID0gY29kZVBvcztcbiAgICAgIGNvZGVQb3MrKztcbiAgICAgIHByZXYgPSBjb2RlO1xuICAgIH1cbiAgICBpZiAocHJldkNvZGVQb3MgPiAtMSkge1xuICAgICAgaWYgKGxleFtwcmV2Q29kZVBvc10ucmVtYWluID4gMCkge1xuICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHMocHJldi5wYXJlbnROb2RlKTtcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihwcmV2KTtcbiAgICAgICAgbWFrZU1hcmt1cERpdihyYW5nZSwgbWQuc3Vic3RyaW5nKGxlbiAtIGxleFtwcmV2Q29kZVBvc10ucmVtYWluKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbCk7XG4gICAgICBtYWtlTWFya3VwRGl2KHJhbmdlLCBtZCk7XG4gICAgfVxuICAgIHJldHVybiBwcmV2Q29kZVBvcyA+IC0xO1xuICB9O1xuXG4gIGhhbmRsZUludGVybmFsU2VjdGlvbnMgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIGJlZm9yZSwgaW5uZXJTZWN0aW9ucywgbWFya2VyLCBub2RlLCBub2RlQ29udGVudCwgbm9kZVRpdGxlLCBwcmV2LCBzZWN0aW9uLCBzZWN0aW9uSG9sZGVyLCB0aXRsZSwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjE7XG5cbiAgICBzZWN0aW9uID0gY29udGVudC5wYXJlbnROb2RlO1xuICAgIHNlY3Rpb25Ib2xkZXIgPSBzZWN0aW9uLnBhcmVudE5vZGU7XG4gICAgaW5uZXJTZWN0aW9ucyA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnW2xlaXN1cmVTZWN0aW9uXScpO1xuICAgIGlmIChpbm5lclNlY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKCEoKF9yZWYxID0gY29udGVudC5maXJzdENoaWxkLm1kKSAhPSBudWxsID8gX3JlZjEubWF0Y2goL15cXCpcXCpcXCovKSA6IHZvaWQgMCkpIHtcbiAgICAgICAgaWYgKCFzZWN0aW9uLnByZXZpb3VzU2libGluZykge1xuICAgICAgICAgIHJldHVybiBzZWN0aW9uLnNldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nLCAnTWFpbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByZXYgPSBzZWN0aW9uLnByZXZpb3VzU2libGluZy5xdWVyeVNlbGVjdG9yKCcucGFnZUNvbnRlbnQnKTtcbiAgICAgICAgICB3aGlsZSAoY29udGVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBtZXJnZVVwKGNvbnRlbnQuZmlyc3RDaGlsZCwgcHJldik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZW1vdmUoc2VjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGl0bGUgPSBzZWN0aW9uLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKTtcbiAgICAgIGJlZm9yZSA9IGZhbHNlO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBpbm5lclNlY3Rpb25zLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG5vZGUgPSBpbm5lclNlY3Rpb25zW19pXTtcbiAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKCdsZWlzdXJlU2VjdGlvbicpID09PSB0aXRsZSkge1xuICAgICAgICAgIGJlZm9yZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJlZm9yZSA9IGJlZm9yZSB8fCAoIWlubmVyU2VjdGlvbnNbMF0ucHJldmlvdXNTaWJsaW5nKTtcbiAgICAgIG1hcmtlciA9IHNlY3Rpb247XG4gICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBpbm5lclNlY3Rpb25zLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICBub2RlID0gaW5uZXJTZWN0aW9uc1tfal07XG4gICAgICAgIG5vZGVUaXRsZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCdsZWlzdXJlU2VjdGlvbicpO1xuICAgICAgICBub2RlQ29udGVudCA9IG5vZGUucXVlcnlTZWxlY3RvcignLnBhZ2VDb250ZW50Jyk7XG4gICAgICAgIGlmIChub2RlVGl0bGUgPT09IHRpdGxlIHx8IChub2RlLnByZXZpb3VzU2libGluZyAmJiBub2RlVGl0bGUgPT09ICdNYWluJykpIHtcbiAgICAgICAgICBpZiAobm9kZVRpdGxlID09PSB0aXRsZSkge1xuICAgICAgICAgICAgYmVmb3JlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdoaWxlIChub2RlQ29udGVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBjb250ZW50Lmluc2VydEJlZm9yZShub2RlQ29udGVudC5maXJzdENoaWxkLCBub2RlKTtcbiAgICAgICAgICAgIG1lcmdlTGVpc3VyZUNvZGUobm9kZS5wcmV2aW91c1NpYmxpbmcsIG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZW1vdmUobm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2hpbGUgKG5vZGUubmV4dFNpYmxpbmcgJiYgIW5vZGUubmV4dFNpYmxpbmcuZ2V0QXR0cmlidXRlKCdsZWlzdXJlU2VjdGlvbicpKSB7XG4gICAgICAgICAgICBtZXJnZVVwKG5vZGUubmV4dFNpYmxpbmcsIG5vZGVDb250ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFkU2xpZGUobm9kZUNvbnRlbnQsIFwiKioqXCIgKyBub2RlVGl0bGUgKyBcIlxcblwiKTtcbiAgICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgICBzZWN0aW9uLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHNlY3Rpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWN0aW9uLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIG1hcmtlci5uZXh0U2libGluZyk7XG4gICAgICAgICAgICBtYXJrZXIgPSBub2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFjb250ZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZShzZWN0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwYWRTbGlkZShjb250ZW50LCBcIioqKlwiICsgdGl0bGUgKyBcIlxcblwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgbWVyZ2VVcCA9IGZ1bmN0aW9uKGVsLCBuZXdQYXJlbnQpIHtcbiAgICBuZXdQYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIHJldHVybiBtZXJnZUxlaXN1cmVDb2RlKG5ld1BhcmVudC5sYXN0Q2hpbGQucHJldmlvdXNTaWJsaW5nLCBuZXdQYXJlbnQubGFzdENoaWxkKTtcbiAgfTtcblxuICBtYWtlU2VjdGlvbiA9IGZ1bmN0aW9uKHRpdGxlLCBub2RlLCBuZXh0KSB7XG4gICAgdmFyIGRpdjtcblxuICAgIGRpdiA9IGNyZWF0ZU5vZGUoXCI8ZGl2IGxlaXN1cmVTZWN0aW9uPSdcIiArIHRpdGxlICsgXCInPjwvZGl2PlwiKTtcbiAgICBub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRpdiwgbm9kZSk7XG4gICAgd2hpbGUgKGRpdi5uZXh0U2libGluZyAmJiBkaXYubmV4dFNpYmxpbmcgIT09IG5leHQpIHtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChkaXYubmV4dFNpYmxpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gZGl2O1xuICB9O1xuXG4gIG1ha2VNYXJrdXBEaXYgPSBmdW5jdGlvbihyYW5nZSwgbWQpIHtcbiAgICB2YXIgZGl2O1xuXG4gICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmFuZ2Uuc3Vycm91bmRDb250ZW50cyhkaXYpO1xuICAgIGRpdi5tZCA9IG1kO1xuICAgIGJpbmRNYXJrdXBEaXYoZGl2KTtcbiAgICByZXR1cm4gZGl2O1xuICB9O1xuXG4gIGVkaXRpbmdFbmFibGVkID0gdHJ1ZTtcblxuICBlbmFibGVFZGl0aW5nID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICByZXR1cm4gZWRpdGluZ0VuYWJsZWQgPSBzdGF0ZTtcbiAgfTtcblxuICBiaW5kTWFya3VwRGl2ID0gZnVuY3Rpb24oZGl2KSB7XG4gICAgdmFyIGVkaXRpbmc7XG5cbiAgICBkaXYuYm91bmQgPSB0cnVlO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJywgJ21hcmtkb3duJyk7XG4gICAgZGl2LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ2ZhbHNlJyk7XG4gICAgZWRpdGluZyA9IGZhbHNlO1xuICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghZWRpdGluZyAmJiBlZGl0aW5nRW5hYmxlZCkge1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZCh0ZXh0Tm9kZShkaXYubWQpKTtcbiAgICAgICAgZGl2LnN0eWxlLndoaXRlU3BhY2UgPSAncHJlLXdyYXAnO1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCAndHJ1ZScpO1xuICAgICAgICBlZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgZGl2LnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdlZGl0aW5nJywgJ3RydWUnKTtcbiAgICAgICAgcmV0dXJuIGRpdi5mb2N1cygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBiciwgciwgcztcblxuICAgICAgaWYgKGVkaXRpbmcpIHtcbiAgICAgICAgcyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgciA9IHMuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgaWYgKChlLmNoYXJDb2RlIHx8IGUua2V5Q29kZSB8fCBlLndoaWNoKSA9PT0gRU5URVIpIHtcbiAgICAgICAgICBiciA9IHRleHROb2RlKCdcXG4nKTtcbiAgICAgICAgICByLmluc2VydE5vZGUoYnIpO1xuICAgICAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgIHIuc2V0U3RhcnQoYnIsIDEpO1xuICAgICAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgcy5hZGRSYW5nZShyKTtcbiAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRpdi5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGZpcnN0LCBmcmFnLCBsYXN0LCBub2RlLCBwYXJlbnQsIHByZXZTZWN0aW9uLCByLCBzY3JvbGwsIF9pLCBfbGVuLCBfcmVmMSwgX3JlZjI7XG5cbiAgICAgIGlmIChlZGl0aW5nKSB7XG4gICAgICAgIHNjcm9sbCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgICAgICBkaXYuc3R5bGUud2hpdGVTcGFjZSA9ICcnO1xuICAgICAgICBlZGl0aW5nID0gZmFsc2U7XG4gICAgICAgIGRpdi5wYXJlbnROb2RlLnJlbW92ZUF0dHJpYnV0ZSgnZWRpdGluZycpO1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCAnZmFsc2UnKTtcbiAgICAgICAgcHJldlNlY3Rpb24gPSAoX3JlZjEgPSBkaXYucGFyZW50Tm9kZS5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZykgIT0gbnVsbCA/IF9yZWYxLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKSA6IHZvaWQgMDtcbiAgICAgICAgcGFyZW50ID0gZGl2LnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChtYXJrdXBTbGlkZUNvbnRlbnQoZGl2LCBkaXYudGV4dENvbnRlbnQsIHByZXZTZWN0aW9uICYmIHByZXZTZWN0aW9uICE9PSAnTGVpc3VyZSBDb250cm9scycpKSB7XG4gICAgICAgICAgX3JlZjIgPSBkaXYucXVlcnlTZWxlY3RvckFsbChcIltsZWlzdXJlbm9kZT0nY29kZSddXCIpO1xuICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIG5vZGUgPSBfcmVmMltfaV07XG4gICAgICAgICAgICBwcmVzZW50TGVpc3VyZUNvZGUobm9kZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpdi50ZXh0Q29udGVudC50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgY2xlYW5FbXB0eU5vZGVzKGRpdik7XG4gICAgICAgIH1cbiAgICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIHIuc2VsZWN0Tm9kZUNvbnRlbnRzKGRpdik7XG4gICAgICAgIGZyYWcgPSByLmV4dHJhY3RDb250ZW50cygpO1xuICAgICAgICBmaXJzdCA9IGZyYWcuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgbGFzdCA9IGZyYWcuY2hpbGROb2Rlc1tmcmFnLmNoaWxkTm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZnJhZywgZGl2KTtcbiAgICAgICAgbWVyZ2VMZWlzdXJlQ29kZShwcmV2aW91c1NpYmxpbmcoZmlyc3QpLCBmaXJzdCk7XG4gICAgICAgIG1lcmdlTGVpc3VyZUNvZGUobGFzdCwgbmV4dFNpYmxpbmcobGFzdCkpO1xuICAgICAgICBoYW5kbGVJbnRlcm5hbFNlY3Rpb25zKHBhcmVudCk7XG4gICAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBzY3JvbGw7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIE5vdGVib29rLm1hcmt1cEVsZW1lbnQgPSBtYXJrdXBFbGVtZW50O1xuXG4gIE5vdGVib29rLmVuYWJsZVNsaWRlQ29udHJvbHMgPSBlbmFibGVTbGlkZUNvbnRyb2xzO1xuXG4gIE5vdGVib29rLmVuYWJsZUVkaXRpbmcgPSBlbmFibGVFZGl0aW5nO1xuXG4gIE5vdGVib29rLnByZXNlbnRTbGlkZSA9IHByZXNlbnRTbGlkZTtcblxuICBOb3RlYm9vay5maXJzdFNsaWRlID0gZmlyc3RTbGlkZTtcblxuICBOb3RlYm9vay5sYXN0U2xpZGUgPSBsYXN0U2xpZGU7XG5cbiAgTm90ZWJvb2sucHJldlNsaWRlID0gcHJldlNsaWRlO1xuXG4gIE5vdGVib29rLm5leHRTbGlkZSA9IG5leHRTbGlkZTtcblxufSkuY2FsbCh0aGlzKTtcblxuLypcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPW1kLm1hcFxuKi9cbiIsIihmdW5jdGlvbihnbG9iYWwpey8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbi8qXG4jIHVzZSBhbiBlbGVtZW50IGFzIGEgTGVpc3VyZSBub3RlYm9va1xuIyBPbmx5IHJ1bnMgaW4gdGhlIGNvbnRleHQgb2YgYSBicm93c2VyXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyICQsIEJTLCBERUwsIERPV05fQVJST1csIEVORCwgRU5URVIsIEVTQywgSE9NRSwgTEVGVF9BUlJPVywgTGVpc3VyZV9hbm5vLCBOaWwsIFBBR0VfRE9XTiwgUEFHRV9VUCwgUklHSFRfQVJST1csIFRBQiwgVVBfQVJST1csIFVSSSwgWHVzLCBhY2NlcHRDb2RlLCBhZGRCb3hDbGFzc2VzLCBhZGREZWZDb250cm9scywgYWRkc0xpbmUsIGFsbG93RXZlbnRzLCBhcnJvd3MsIGF1dG9SdW4sIGJhc2VFbGVtZW50cywgYmFzZVN0cm9rZVdpZHRoLCBiYXNpY0NhbGwsIGJpbmRBbGwsIGJpbmROb3RlYm9vaywgYm9vdE5vdGVib29rLCBib3gsIGJveENsYXNzZXMsIGJ1dHRvbkNsYXNzZXMsIGMsIGNoYWluRXZhbE5vZGVzLCBjaGFuZ2VUaGVtZSwgY2hhbmdlVmlldywgY2hlY2tEZWxldGVFeHByLCBjaGVja0hpZGVTb3VyY2UsIGNoZWNrTXV0YXRlRnJvbU1vZGlmaWNhdGlvbiwgY2xlYW5FbXB0eU5vZGVzLCBjbGVhbk91dHB1dCwgY2xlYXJBc3QsIGNsZWFyT3V0cHV0Qm94LCBjbGVhclVwZGF0ZXMsIGNsaWNrVGVzdCwgY2xvc2VXaW5kb3csIGNvZGVCb3gsIGNvZGVGb2N1cywgY29kZVNwYW4sIGNvbmZpZ3VyZVNhdmVMaW5rLCBjb250aW51ZVJhbmdlUG9zaXRpb24sIGNyZWF0ZUZyYWdtZW50LCBjcmVhdGVOb2RlLCBjcmVhdGVQZWVyLCBjcmVhdGVTbGlkZXIsIGRlYnVnLCBkZWZhdWx0RW52LCBkZWZpbmUsIGRlbGF5LCBkb2NGb2N1cywgZW52Rm9yLCBlcnJTdHJpbmcsIGVzY2FwZUh0bWwsIGV2YWxCb3gsIGV2YWxEb2MsIGV2YWxEb2NDb2RlLCBldmFsTm9kZXMsIGV2YWxPdXRwdXQsIGV2YWx1YXRpbmcsIGV2YWx1YXRpb25RdWV1ZSwgZXZlbnQsIGZpbGVuYW1lLCBmaW5kQ3VycmVudENvZGVIb2xkZXIsIGZpbmREZWZzLCBmaW5kVXBkYXRlU2VsZWN0b3IsIGZvY3VzQm94LCBmb2xkTGVmdCwgZ2VuLCBnZXRBbm5vQm9keSwgZ2V0QW5ub0RhdGEsIGdldEFubm9OYW1lLCBnZXRBc3QsIGdldEJveCwgZ2V0RGVmTmFtZSwgZ2V0RWxlbWVudENvZGUsIGdldEVsZW1lbnRzLCBnZXRFeHByU291cmNlLCBnZXRIdG1sLCBnZXRNRERvY3VtZW50LCBnZXRNYXhTdHJva2VXaWR0aCwgZ2V0UGFyc2VFcnIsIGdldFJhbmdlUG9zaXRpb24sIGdldFJhbmdlVGV4dCwgZ2V0UmFuZ2VzLCBnZXRSZWZOYW1lLCBnZXRTdmdFbGVtZW50LCBnZXRUeXBlLCBncnAsIGhhbmRsZUtleSwgaGFzRnVuYywgaGFzTW9uYWRPdXRwdXQsIGhlYWQsIGhpZGRlblBhdCwgaGlkZUNvbnRyb2xTZWN0aW9uLCBoaWRlT3V0cHV0U291cmNlLCBoaWRlU2xpZGVyLCBoaWdobGlnaHROb3RlYm9va0Z1bmN0aW9uLCBoaWdobGlnaHRQb3NpdGlvbiwgaWQsIGlkZW50aXR5LCBpZ25vcmVEZWxldGVPdXRwdXRCb3gsIGluaXQsIGluaXROb3RlYm9vaywgaW5zZXJ0Q29udHJvbHMsIGlzRGVmLCBpc0xlaXN1cmVDb2RlLCBpc01vbmFkLCBpc091dHB1dCwgaXNTbGlkZXIsIGxhenksIGxlaXN1cmVDb250ZXh0U3RyaW5nLCBsaW5lUGF0LCBsaW5rU291cmNlLCBsb2FkUHJvZ3JhbSwgbG9hZGVkLCBseiwgbWFrZUlkLCBtYWtlTGFiZWwsIG1ha2VNb25hZCwgbWFrZU9wdGlvbiwgbWFrZU91dHB1dEJveCwgbWFrZU91dHB1dENvbnRyb2xzLCBtYWtlUmFuZ2UsIG1ha2VTeW5jTW9uYWQsIG1ha2VUZXN0Qm94LCBtYWtlVGVzdENhc2UsIG1hcmtQYXJ0aWFsQXBwbGllcywgbWFya3VwQnV0dG9uLCBtYXJrdXBCdXR0b25zLCBtYXJrdXBEZWZzLCBtZXJnZUxlaXN1cmVDb2RlLCBuYW1lU3ViLCBuZXh0SWQsIG5leHRTaWJsaW5nLCBub2RlRW5kLCBub2RlRm9yLCBub25wcmludGFibGUsIG51bWJlckVuZCwgbnVtYmVyU3RhcnQsIG9sZEJyYWNrZXRzLCBvd25lciwgcGF0Y2hGdW5jQXN0LCBwZWVyLCBwZWVyR2V0RG9jdW1lbnQsIHBlZXJHZXRGdW5jdGlvbnMsIHBlZXJOb3RpZnlTZWxlY3Rpb24sIHBvc3RMb2FkUXVldWUsIHByZXBFeHByLCBwcmVzZW50TGVpc3VyZUNvZGUsIHByZXNlbnRWYWx1ZSwgcHJldmlvdXNCb3hSYW5nZUludGVybmFsLCBwcmV2aW91c0JveFJhbmdlU3RhcnQsIHByZXZpb3VzU2libGluZywgcHJpbVN2Z01lYXN1cmUsIHByaW1jb25jYXROb2RlcywgcHJpbnRhYmxlLCBwcmludGFibGVDb250cm9sQ2hhcmFjdGVycywgcHJvY2Vzc0xpbmUsIHBzZ24sIHF1ZXVlQWZ0ZXJMb2FkLCByZW1vdmUsIHJlbW92ZUJveENsYXNzZXMsIHJlbW92ZU9sZERlZnMsIHJlcGxhY2VDb250ZW50cywgcmVwbGFjZVJhbmdlLCByZXBsaWNhdGUsIHJlcSwgcmVzb2x2ZSwgcm9vdCwgcnVuQXV0bywgcnVuTW9uYWQsIHJ1blRlc3QsIHJ1blRlc3RzLCByeiwgc2F2ZVByb2dyYW0sIHNldEFzdCwgc2V0RmlsZW5hbWUsIHNldE1pbk1heCwgc2V0U25hcHBlciwgc2V0VXBkYXRlLCBzaG93QXN0LCBzaG93RXJyb3IsIHNob3dGaWxlbmFtZSwgc2hvd0ZpbGVuYW1lcywgc2hvd091dHB1dFNvdXJjZSwgc2hvd1Jlc3VsdCwgc2hvd1NsaWRlckJ1dHRvbiwgc2hvd1NvdXJjZSwgc2tpcExlZnRPdmVyT3V0cHV0Qm94LCBzbGlkZXIsIHNuYXBzaG90LCBzdmdCZXR0ZXJNZWFzdXJlLCBzdmdNZWFzdXJlLCBzdmdNZWFzdXJlVGV4dCwgdGFpbCwgdGVzdFBhdCwgdGV4dE5vZGUsIHRvRGVmQm94LCB0b0V4cHJCb3gsIHRvZ2dsZUVkaXQsIHRyYW5zZm9ybVN0cm9rZVdpZHRoLCB0cmFuc2Zvcm1lZFBvaW50LCB1bndyYXAsIHVwZGF0ZSwgdXBkYXRlUGF0LCB3cmFwUmFuZ2UsIHh1c0VudiwgXywgX3JlZiwgX3JlZjEsIF9yZWYyLFxuICAgIF9fc2xpY2UgPSBbXS5zbGljZSxcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxuICBjb25zb2xlLmxvZyhcIkxPQURJTkcgTk9URUJPT0tcIik7XG5cbiAgX3JlZiA9IHJvb3QgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vYmFzZScpLCByZXNvbHZlID0gX3JlZi5yZXNvbHZlLCBsYXp5ID0gX3JlZi5sYXp5O1xuXG4gIHJ6ID0gcmVzb2x2ZTtcblxuICBseiA9IGxhenk7XG5cbiAgX3JlZjEgPSByb290ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2FzdCcpLCBuYW1lU3ViID0gX3JlZjEubmFtZVN1YiwgZ2V0UmVmTmFtZSA9IF9yZWYxLmdldFJlZk5hbWUsIGRlZmluZSA9IF9yZWYxLmRlZmluZSwgZm9sZExlZnQgPSBfcmVmMS5mb2xkTGVmdCwgTmlsID0gX3JlZjEuTmlsLCBnZXRUeXBlID0gX3JlZjEuZ2V0VHlwZSwgZ2V0QW5ub05hbWUgPSBfcmVmMS5nZXRBbm5vTmFtZSwgZ2V0QW5ub0RhdGEgPSBfcmVmMS5nZXRBbm5vRGF0YSwgZ2V0QW5ub0JvZHkgPSBfcmVmMS5nZXRBbm5vQm9keSwgTGVpc3VyZV9hbm5vID0gX3JlZjEuTGVpc3VyZV9hbm5vO1xuXG4gIF9yZWYyID0gcmVxdWlyZSgnLi9ydW50aW1lJyksIGlzTW9uYWQgPSBfcmVmMi5pc01vbmFkLCBydW5Nb25hZCA9IF9yZWYyLnJ1bk1vbmFkLCBtYWtlTW9uYWQgPSBfcmVmMi5tYWtlTW9uYWQsIG1ha2VTeW5jTW9uYWQgPSBfcmVmMi5tYWtlU3luY01vbmFkLCBpZGVudGl0eSA9IF9yZWYyLmlkZW50aXR5LCBkZWZhdWx0RW52ID0gX3JlZjIuZGVmYXVsdEVudiwgYmFzaWNDYWxsID0gX3JlZjIuYmFzaWNDYWxsO1xuXG4gIGdlbiA9IHJlcXVpcmUoJy4vZ2VuJykuZ2VuO1xuXG4gIFVSSSA9IHdpbmRvdy5VUkk7XG5cbiAgWHVzID0gd2luZG93Llh1cztcblxuICAkID0gd2luZG93LiQ7XG5cbiAgXyA9IHJlcXVpcmUoJy4vbG9kYXNoLm1pbicpO1xuXG4gIHdpbmRvdy5nbG9iYWwgPSB3aW5kb3c7XG5cbiAgZGVidWcgPSBmYWxzZTtcblxuICBCUyA9IDg7XG5cbiAgVEFCID0gOTtcblxuICBFTlRFUiA9IDEzO1xuXG4gIEVTQyA9IDI3O1xuXG4gIFBBR0VfVVAgPSAzMztcblxuICBQQUdFX0RPV04gPSAzNDtcblxuICBFTkQgPSAzNTtcblxuICBIT01FID0gMzY7XG5cbiAgTEVGVF9BUlJPVyA9IDM3O1xuXG4gIFVQX0FSUk9XID0gMzg7XG5cbiAgUklHSFRfQVJST1cgPSAzOTtcblxuICBET1dOX0FSUk9XID0gNDA7XG5cbiAgREVMID0gNDY7XG5cbiAgYXJyb3dzID0gWzM3LCAzOCwgMzksIDQwXTtcblxuICB1cGRhdGVQYXQgPSAvKF58XFxuKSgjQHVwZGF0ZSApKFteXFxuXSspKD86XnxcXG4pLztcblxuICBwZWVyID0gbnVsbDtcblxuICBuZXh0SWQgPSAwO1xuXG4gIGZpbGVuYW1lID0gbnVsbDtcblxuICBldmVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzLCB3aWRnZXQ7XG5cbiAgICB3aWRnZXQgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIHJldHVybiBiYXNpY0NhbGwoYXJncywgZW52Rm9yKHdpZGdldCksIGlkZW50aXR5KTtcbiAgfTtcblxuICBkZWZhdWx0RW52LnJlYWRGaWxlID0gZnVuY3Rpb24oZmlsZU5hbWUsIGNvbnQpIHtcbiAgICB2YXIgdXJpO1xuXG4gICAgdXJpID0gbmV3IFVSSShkb2N1bWVudC5sb2NhdGlvbi5ocmVmLCBmaWxlTmFtZSk7XG4gICAgY29uc29sZS5sb2coXCJcXG5cXG5AQEBAUkVBRCBGSUxFOiBcIiArIHVyaSArIFwiXFxuXFxuXCIpO1xuICAgIHJldHVybiAkLmdldChTdHJpbmcodXJpKSkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gY29udChudWxsLCBkYXRhKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGVycikge1xuICAgICAgcmV0dXJuIGNvbnQoZXJyLCBudWxsKTtcbiAgICB9KTtcbiAgfTtcblxuICBkZWZhdWx0RW52LndyaXRlRmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBkYXRhLCBjb250KSB7fTtcblxuICBzbmFwc2hvdCA9IGZ1bmN0aW9uKGVsLCBwZ20pIHt9O1xuXG4gIHNldFNuYXBwZXIgPSBmdW5jdGlvbihzbmFwRnVuYykge1xuICAgIHJldHVybiBzbmFwc2hvdCA9IHNuYXBGdW5jO1xuICB9O1xuXG4gIGRlbGF5ID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChmdW5jLCAxKTtcbiAgfTtcblxuICBnZXRQYXJzZUVyciA9IGdldEh0bWwgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHgobHooZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiByeih2YWx1ZSk7XG4gICAgfSkpO1xuICB9O1xuXG4gIGVzY2FwZUh0bWwgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvWzw+XS9nLCBmdW5jdGlvbihjKSB7XG4gICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgICAgcmV0dXJuICcmbHQ7JztcbiAgICAgICAgICBjYXNlICc+JzpcbiAgICAgICAgICAgIHJldHVybiAnJmd0Oyc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgfTtcblxuICBwcmVzZW50VmFsdWUgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIGNvbnRlbnQ7XG5cbiAgICBpZiAoKGdldFR5cGUodikpID09PSAnc3ZnTm9kZScpIHtcbiAgICAgIGNvbnRlbnQgPSB2KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBfc3ZnUHJlc2VudCgpKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKChnZXRUeXBlKHYpKSA9PT0gJ2h0bWwnKSB7XG4gICAgICByZXR1cm4gZ2V0SHRtbCh2KTtcbiAgICB9IGVsc2UgaWYgKChnZXRUeXBlKHYpKSA9PT0gJ3BhcnNlRXJyJykge1xuICAgICAgcmV0dXJuIFwiUEFSU0UgRVJST1I6IFwiICsgKGdldFBhcnNlRXJyKHYpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVzY2FwZUh0bWwoU3RyaW5nKHYpKTtcbiAgICB9XG4gIH07XG5cbiAgYm9vdE5vdGVib29rID0gZnVuY3Rpb24oZWwpIHtcbiAgICBpZiAoKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFubmVsTGlzdCcpKSA9PSBudWxsKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNyZWF0ZU5vZGUoXCI8ZGF0YWxpc3QgaWQ9J2NoYW5uZWxMaXN0Jz5cXG4gICA8b3B0aW9uIHZhbHVlPScnPjwvb3B0aW9uPlxcbiAgIDxvcHRpb24gdmFsdWU9J2FwcCc+YXBwPC9vcHRpb24+XFxuICAgPG9wdGlvbiB2YWx1ZT0nY29tcGlsZSc+Y29tcGlsZTwvb3B0aW9uPlxcbiAgIDxvcHRpb24gdmFsdWU9J2VkaXRvckZvY3VzJz5lZGl0b3JGb2N1czwvb3B0aW9uPlxcbjwvZGF0YWxpc3Q+XCIpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZVBlZXIoKTtcbiAgfTtcblxuICBjbG9zZVdpbmRvdyA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKFwiQ0xPU0lORyBXSU5ET1dcIik7XG4gICAgd2luZG93Lm9wZW4oJycsICdfc2VsZicsICcnKTtcbiAgICByZXR1cm4gd2luZG93LmNsb3NlKCk7XG4gIH07XG5cbiAgY3JlYXRlUGVlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBrLCBwYXJhbSwgcGFyYW1zLCBzZXJ2ZXIsIHYsIF9pLCBfbGVuLCBfcmVmMywgX3JlZjQ7XG5cbiAgICByb290Lnh1c1NlcnZlciA9IHNlcnZlciA9IG5ldyBYdXMuU2VydmVyKCk7XG4gICAgc2VydmVyLmV4aXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBjbG9zZVdpbmRvdygpO1xuICAgIH07XG4gICAgcGVlciA9IHJvb3QucGVlciA9IFh1cy5jcmVhdGVEaXJlY3RQZWVyKHNlcnZlcik7XG4gICAgcGVlci5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgcGVlci5saXN0ZW4oJ2xlaXN1cmUvc2VsZWN0aW9uL2NvbnRlbnRzJywgdHJ1ZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGUsIHIsIHM7XG5cbiAgICAgIGlmIChrZXkgPT09ICdsZWlzdXJlL3NlbGVjdGlvbi9jb250ZW50cycpIHtcbiAgICAgICAgcyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHMucmFuZ2VDb3VudCAmJiBzLnRvU3RyaW5nKCkgIT09IHZhbHVlKSB7XG4gICAgICAgICAgciA9IHMuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgICByLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgICAgICAgbm9kZSA9IHRleHROb2RlKHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIHIuaW5zZXJ0Tm9kZShub2RlKTtcbiAgICAgICAgICBzLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgIHIuc2VsZWN0Tm9kZShub2RlKTtcbiAgICAgICAgICByZXR1cm4gcy5hZGRSYW5nZShyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHBlZXIuc2V0KCdsZWlzdXJlL2V2YWxFeHByJywgbnVsbCwgJ3RyYW5zaWVudCcpO1xuICAgIHBlZXIubGlzdGVuKCdsZWlzdXJlL2V2YWxFeHByJywgZmFsc2UsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBlbnYsIGV4cHIsIHJlc3VsdDtcblxuICAgICAgaWYgKGtleSA9PT0gJ2xlaXN1cmUvZXZhbEV4cHInICYmICh2YWx1ZSAhPSBudWxsKSkge1xuICAgICAgICBleHByID0gdmFsdWVbMF0sIHJlc3VsdCA9IHZhbHVlWzFdO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVWQUw6IFwiICsgZXhwciArIFwiLCBSRVNVTFQ6IFwiICsgcmVzdWx0KTtcbiAgICAgICAgZW52ID0geHVzRW52KHJlc3VsdCwgZXhwcik7XG4gICAgICAgIHJldHVybiBwcm9jZXNzTGluZShleHByLCBlbnYsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0eXBlb2YgZW52LmNsZWFudXAgPT09IFwiZnVuY3Rpb25cIiA/IGVudi5jbGVhbnVwKCkgOiB2b2lkIDA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBlZXIuc2V0KCdsZWlzdXJlL2RvY3VtZW50JywgcGVlckdldERvY3VtZW50KTtcbiAgICBwZWVyLnNldCgnbGVpc3VyZS9mdW5jdGlvbnMnLCBwZWVyR2V0RnVuY3Rpb25zKTtcbiAgICBwZWVyLnNldCgnbGVpc3VyZS9zdG9yYWdlJywgW10pO1xuICAgIGlmIChCb290LmRvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgICAgX3JlZjMgPSBCb290LmRvY3VtZW50RnJhZ21lbnQuc3Vic3RyaW5nKDEpLnNwbGl0KCcmJyk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHBhcmFtID0gX3JlZjNbX2ldO1xuICAgICAgICBfcmVmNCA9IHBhcmFtLnNwbGl0KCc9JyksIGsgPSBfcmVmNFswXSwgdiA9IF9yZWY0WzFdO1xuICAgICAgICBwYXJhbXNbay50b0xvd2VyQ2FzZSgpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMueHVzcHJveHkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gWHVzLnh1c1RvUHJveHkoc2VydmVyLCBwYXJhbXMueHVzcHJveHkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXBsYWNlQ29udGVudHMgPSBmdW5jdGlvbih1cmksIGNvbnRlbnRzKSB7XG4gICAgaWYgKCFjb250ZW50cykge1xuICAgICAgY29udGVudHMgPSB1cmk7XG4gICAgICB1cmkgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodXJpKSB7XG4gICAgICBzZXRGaWxlbmFtZSh1cmkudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdkb2MnLCAnJyk7XG4gICAgd2luZG93LmxlaXN1cmVBdXRvUnVuQWxsID0gdHJ1ZTtcbiAgICB3aW5kb3cubWFya3VwKGNvbnRlbnRzKTtcbiAgICByZXR1cm4gYmluZEFsbCgpO1xuICB9O1xuXG4gIGJpbmRBbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbm9kZSwgX2ksIF9sZW4sIF9yZWYzO1xuXG4gICAgX3JlZjMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2xlaXN1cmVub2RlPSdjb2RlJ11cIik7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgbm9kZSA9IF9yZWYzW19pXTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb250ZW50RWRpdGFibGUnLCAndHJ1ZScpO1xuICAgICAgYmluZE5vdGVib29rKG5vZGUpO1xuICAgICAgY2hhbmdlVGhlbWUobm9kZSwgJ3RoaW4nKTtcbiAgICAgIGV2YWxEb2Mobm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBzaG93RmlsZW5hbWVzKCk7XG4gIH07XG5cbiAgeHVzRW52ID0gZnVuY3Rpb24ocmVzdWx0VmFyLCBleHByKSB7XG4gICAgdmFyIGVudiwgcmVzdWx0O1xuXG4gICAgcmVzdWx0ID0gJyc7XG4gICAgZW52ID0ge1xuICAgICAgZGVidWc6IGRlYnVnLFxuICAgICAgZmluaXNoZWRFdmVudDogZnVuY3Rpb24oKSB7fSxcbiAgICAgIG93bmVyOiBudWxsLFxuICAgICAgcmVxdWlyZTogcmVxLFxuICAgICAgd3JpdGU6IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICs9IFwiXCIgKyBtc2cgKyBcIlxcblwiO1xuICAgICAgfSxcbiAgICAgIHByb21wdDogZnVuY3Rpb24obXNnLCBjb250KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKz0gXCJBdHRlbXB0IHRvIHByb21wdCB3aXRoIFwiICsgbXNnO1xuICAgICAgfSxcbiAgICAgIHByb2Nlc3NSZXN1bHQ6IGZ1bmN0aW9uKHJlcywgYXN0KSB7XG4gICAgICAgIHJlc3VsdCArPSByZXM7XG4gICAgICAgIHJldHVybiBwZWVyLnNldChyZXN1bHRWYXIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgICAgfSxcbiAgICAgIHByZXNlbnRWYWx1ZTogZnVuY3Rpb24oeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH0sXG4gICAgICBmaWxlU2V0dGluZ3M6IHtcbiAgICAgICAgdXJpOiBuZXcgVVJJKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpXG4gICAgICB9LFxuICAgICAgZXJyOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgcmVzdWx0ICs9IGVyci5sZWlzdXJlQ29udGV4dCA/IFwiRVJST1I6IFwiICsgZXJyICsgXCI6XFxuXCIgKyAobGVpc3VyZUNvbnRleHRTdHJpbmcoZXJyKSkgKyBcIlxcblwiICsgZXJyLnN0YWNrIDogXCJDb3VsZG4ndCBwYXJzZTogXCIgKyBleHByO1xuICAgICAgICByZXR1cm4gcGVlci5zZXQocmVzdWx0VmFyLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH07XG4gICAgZW52Ll9fcHJvdG9fXyA9IHJvb3QuZGVmYXVsdEVudjtcbiAgICByZXR1cm4gZW52O1xuICB9O1xuXG4gIHBlZXJHZXREb2N1bWVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub2RlcztcblxuICAgIG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltsZWlzdXJlbm9kZT0nY29kZSddXCIpO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPiAxIHx8IE5vdGVib29rLm1kKSB7XG4gICAgICByZXR1cm4gZ2V0TUREb2N1bWVudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0U2ltcGxlRG9jdW1lbnQoKTtcbiAgICB9XG4gIH07XG5cbiAgcGVlckdldEZ1bmN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXy51bmlxKHdpbmRvdy5sZWlzdXJlRnVuY05hbWVzLnRvQXJyYXkoKS5zb3J0KCksIHRydWUpKS5zb3J0KCk7XG4gIH07XG5cbiAgZ2V0TUREb2N1bWVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtZCwgbm9kZSwgX2ksIF9sZW4sIF9yZWYzLCBfcmVmNDtcblxuICAgIG1kID0gJyc7XG4gICAgX3JlZjMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZG9jXSBbbGVpc3VyZU5vZGVdJyk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgbm9kZSA9IF9yZWYzW19pXTtcbiAgICAgIG1kICs9IGlzTGVpc3VyZUNvZGUobm9kZSkgPyBcImBgYFxcblwiICsgKGdldEVsZW1lbnRDb2RlKG5vZGUpKSArIFwiXFxuYGBgXFxuXCIgOiAoX3JlZjQgPSBub2RlLm1kKSAhPSBudWxsID8gX3JlZjQgOiAnJztcbiAgICB9XG4gICAgcmV0dXJuIG1kO1xuICB9O1xuXG4gIG1ha2VJZCA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgaWYgKCFlbC5pZCkge1xuICAgICAgcmV0dXJuIGVsLmlkID0gXCJMZWlzdXJlLVwiICsgKG5leHRJZCsrKTtcbiAgICB9XG4gIH07XG5cbiAgYWxsb3dFdmVudHMgPSB0cnVlO1xuXG4gIGluaXQgPSBmYWxzZTtcblxuICBiaW5kTm90ZWJvb2sgPSBmdW5jdGlvbihlbCkge1xuICAgIGlmICghaW5pdCkge1xuICAgICAgaW5pdCA9IHRydWU7XG4gICAgICBkZWZhdWx0RW52LnByZXNlbnRWYWx1ZSA9IHByZXNlbnRWYWx1ZTtcbiAgICAgIGRlZmF1bHRFbnYud3JpdGUgPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKG1zZyk7XG4gICAgICB9O1xuICAgICAgZGVmYXVsdEVudi5vd25lciA9IGRvY3VtZW50LmJvZHk7XG4gICAgICBkZWZhdWx0RW52LmZpbmlzaGVkRXZlbnQgPSBmdW5jdGlvbihldnQsIGNoYW5uZWwpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZShjaGFubmVsICE9IG51bGwgPyBjaGFubmVsIDogJ2FwcCcsIGRlZmF1bHRFbnYpO1xuICAgICAgfTtcbiAgICAgIGRlZmF1bHRFbnYuZGVidWcgPSBkZWJ1ZztcbiAgICB9XG4gICAgaWYgKGVsLmJvdW5kID09IG51bGwpIHtcbiAgICAgIG1ha2VJZChlbCk7XG4gICAgICBlbC5ib3VuZCA9IHRydWU7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQnLCAoZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGlmIChhbGxvd0V2ZW50cyAmJiAhZWwucmVwbGFjaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrTXV0YXRlRnJvbU1vZGlmaWNhdGlvbihldnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSwgdHJ1ZSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdET01TdWJ0cmVlTW9kaWZpZWQnLCAoZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGlmIChhbGxvd0V2ZW50cyAmJiAhZWwucmVwbGFjaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrTXV0YXRlRnJvbU1vZGlmaWNhdGlvbihldnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSwgdHJ1ZSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIWlzU2xpZGVyKGUuc3JjRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaGlnaGxpZ2h0UG9zaXRpb24oZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLCB0cnVlKTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghaXNTbGlkZXIoZS5zcmNFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBoaWdobGlnaHRQb3NpdGlvbihlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksIHRydWUpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghaXNTbGlkZXIoZS5zcmNFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBoaWdobGlnaHRQb3NpdGlvbihlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksIHRydWUpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGMsIHIsIHM7XG5cbiAgICAgICAgYyA9IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlIHx8IGUud2hpY2g7XG4gICAgICAgIGlmIChjID09PSBERUwgfHwgYyA9PT0gQlMpIHtcbiAgICAgICAgICBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgIHIgPSBzLmdldFJhbmdlQXQoMCk7XG4gICAgICAgICAgaWYgKGMgPT09IEJTKSB7XG4gICAgICAgICAgICBjaGVja0RlbGV0ZUV4cHIoZ2V0Qm94KHIuc3RhcnRDb250YWluZXIpKTtcbiAgICAgICAgICAgIGlmIChza2lwTGVmdE92ZXJPdXRwdXRCb3goZWwsIHIpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSBERUwpIHtcbiAgICAgICAgICAgIGNoZWNrRGVsZXRlRXhwcihnZXRCb3goci5zdGFydENvbnRhaW5lcikpO1xuICAgICAgICAgICAgaWYgKGlnbm9yZURlbGV0ZU91dHB1dEJveChlbCwgcikpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByaW50YWJsZShjKSkge1xuICAgICAgICAgIGNsZWFyQXN0KGdldEJveCh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfX2luZGV4T2YuY2FsbChhcnJvd3MsIGMpID49IDApIHx8IHByaW50YWJsZShjKSkge1xuICAgICAgICAgIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhpZ2hsaWdodFBvc2l0aW9uKGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmN0cmxLZXkgJiYgYyA9PT0gRU5URVIpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlS2V5KFwiQy1FTlRFUlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmFsdEtleSAmJiBjID09PSBFTlRFUikge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVLZXkoXCJNLUVOVEVSXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGMgPT09IFRBQikge1xuICAgICAgICAgIGhhbmRsZUtleShcIlRBQlwiKTtcbiAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgYnIsIGJ4LCByLCBzLCBzcDtcblxuICAgICAgICBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgICByID0gcy5nZXRSYW5nZUF0KDApO1xuICAgICAgICBpZiAoKGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlIHx8IGUud2hpY2gpID09PSBFTlRFUikge1xuICAgICAgICAgIGJyID0gdGV4dE5vZGUoJ1xcbicpO1xuICAgICAgICAgIHIuaW5zZXJ0Tm9kZShicik7XG4gICAgICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgci5zZXRTdGFydChiciwgMSk7XG4gICAgICAgICAgcy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICBzLmFkZFJhbmdlKHIpO1xuICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoci5zdGFydENvbnRhaW5lci5wYXJlbnROb2RlID09PSBlbCkge1xuICAgICAgICAgIHNwID0gY29kZVNwYW4oJ1xcbicsICdjb2RlRXhwcicpO1xuICAgICAgICAgIHNwLnNldEF0dHJpYnV0ZSgnZ2VuZXJhdGVkTkwnLCAnJyk7XG4gICAgICAgICAgYnggPSBib3gocy5nZXRSYW5nZUF0KDApLCAnY29kZU1haW5FeHByJywgdHJ1ZSk7XG4gICAgICAgICAgYnguYXBwZW5kQ2hpbGQoc3ApO1xuICAgICAgICAgIG1ha2VPdXRwdXRCb3goYngpO1xuICAgICAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgIHIuc2V0U3RhcnQoc3AsIDApO1xuICAgICAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgcmV0dXJuIHMuYWRkUmFuZ2Uocik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChhbGxvd0V2ZW50cykge1xuICAgICAgICAgIHJldHVybiBmaW5kQ3VycmVudENvZGVIb2xkZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSksIHRydWUpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGFsbG93RXZlbnRzKSB7XG4gICAgICAgICAgcmV0dXJuIGZpbmRDdXJyZW50Q29kZUhvbGRlcigpO1xuICAgICAgICB9XG4gICAgICB9KSwgdHJ1ZSk7XG4gICAgICBpZiAod2luZG93LmxlaXN1cmVBdXRvUnVuQWxsKSB7XG4gICAgICAgIGF1dG9SdW4oZWwsIHRydWUpO1xuICAgICAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBydW5UZXN0cyhlbCk7XG4gICAgICAgIH0pLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlbC5hdXRvcnVuU3RhdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY2hlY2tEZWxldGVFeHByID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHZhciBvdXQ7XG5cbiAgICBpZiAoaXNPdXRwdXQobm9kZSAmJiBub2RlLm91dHB1dCkpIHtcbiAgICAgIG91dCA9IG5vZGUub3V0cHV0O1xuICAgICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFub2RlLnRleHRDb250ZW50LnRyaW0oKSkge1xuICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG5vZGUucGFyZW50Tm9kZSA9PSBudWxsKSAmJiAoKG91dCAhPSBudWxsID8gb3V0LnBhcmVudE5vZGUgOiB2b2lkIDApICE9IG51bGwpKSB7XG4gICAgICAgICAgcmV0dXJuIG91dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG91dCk7XG4gICAgICAgIH1cbiAgICAgIH0pLCAxKTtcbiAgICB9XG4gIH07XG5cbiAgc2tpcExlZnRPdmVyT3V0cHV0Qm94ID0gZnVuY3Rpb24oZWwsIHIpIHtcbiAgICB2YXIgYm94LCBzO1xuXG4gICAgZWwubm9ybWFsaXplKCk7XG4gICAgYm94ID0gcHJldmlvdXNCb3hSYW5nZUludGVybmFsKHIpIHx8IHByZXZpb3VzQm94UmFuZ2VTdGFydChyKTtcbiAgICBpZiAoaXNPdXRwdXQoYm94KSkge1xuICAgICAgcyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHIuc2VsZWN0Tm9kZShib3gpO1xuICAgICAgci5jb2xsYXBzZSh0cnVlKTtcbiAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICBzLmFkZFJhbmdlKHIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgcHJldmlvdXNCb3hSYW5nZUludGVybmFsID0gZnVuY3Rpb24ocikge1xuICAgIHJldHVybiByLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlID09PSAxICYmIHIuc3RhcnRPZmZzZXQgPiAwICYmIHIuc3RhcnRDb250YWluZXIuY2hpbGROb2Rlc1tyLnN0YXJ0T2Zmc2V0IC0gMV07XG4gIH07XG5cbiAgcHJldmlvdXNCb3hSYW5nZVN0YXJ0ID0gZnVuY3Rpb24ocikge1xuICAgIHJldHVybiByLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlID09PSAzICYmIHIuc3RhcnRPZmZzZXQgPT09IDAgJiYgcHJldmlvdXNTaWJsaW5nKHIuc3RhcnRDb250YWluZXIpO1xuICB9O1xuXG4gIGlnbm9yZURlbGV0ZU91dHB1dEJveCA9IGZ1bmN0aW9uKGVsLCByKSB7XG4gICAgdmFyIG47XG5cbiAgICBlbC5ub3JtYWxpemUoKTtcbiAgICBpZiAoci5zdGFydENvbnRhaW5lci5ub2RlVHlwZSA9PT0gMyAmJiByLnN0YXJ0T2Zmc2V0ID09PSByLnN0YXJ0Q29udGFpbmVyLmxlbmd0aCkge1xuICAgICAgbiA9IHIuc3RhcnRDb250YWluZXI7XG4gICAgICB3aGlsZSAobiAmJiBuLm5leHRTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICAgIG4gPSBuLnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNPdXRwdXQobiAhPSBudWxsID8gbi5uZXh0U2libGluZyA6IHZvaWQgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgaXNPdXRwdXQgPSBmdW5jdGlvbihlbCkge1xuICAgIHJldHVybiAoZWwgIT0gbnVsbCA/IGVsLm5vZGVUeXBlIDogdm9pZCAwKSA9PT0gMSAmJiBlbC5oYXNBdHRyaWJ1dGUoJ0xlaXN1cmVPdXRwdXQnKTtcbiAgfTtcblxuICBpc0xlaXN1cmVDb2RlID0gZnVuY3Rpb24oZWwpIHtcbiAgICByZXR1cm4gKGVsICE9IG51bGwgPyBlbC5ub2RlVHlwZSA6IHZvaWQgMCkgPT09IDEgJiYgZWwuZ2V0QXR0cmlidXRlKCdsZWlzdXJlTm9kZScpID09PSAnY29kZSc7XG4gIH07XG5cbiAgcGVlck5vdGlmeVNlbGVjdGlvbiA9IGZ1bmN0aW9uKGVsLCBzdHIpIHt9O1xuXG4gIHByaW50YWJsZUNvbnRyb2xDaGFyYWN0ZXJzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBfaSwgX2xlbiwgX3JlZjMsIF9yZXN1bHRzO1xuXG4gICAgX3JlZjMgPSBcIlxcclxcaVxcblxcYlwiO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgYyA9IF9yZWYzW19pXTtcbiAgICAgIF9yZXN1bHRzLnB1c2goYy5jaGFyQ29kZUF0KDApKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9KSgpO1xuXG4gIHByaW50YWJsZSA9IGZ1bmN0aW9uKGNvZGUpIHtcbiAgICByZXR1cm4gKGNvZGUgPiAweGYgJiYgY29kZSA8IDM3KSB8fCBjb2RlID4gNDAgfHwgX19pbmRleE9mLmNhbGwocHJpbnRhYmxlQ29udHJvbENoYXJhY3RlcnMsIGNvZGUpID49IDA7XG4gIH07XG5cbiAgbm9ucHJpbnRhYmxlID0gbnVsbDtcblxuICAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGksIHMsIF9pO1xuXG4gICAgcyA9ICcnO1xuICAgIGZvciAoaSA9IF9pID0gMDsgMCA8PSAweGYgPyBfaSA8PSAweGYgOiBfaSA+PSAweGY7IGkgPSAwIDw9IDB4ZiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICBzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7XG4gICAgfVxuICAgIHMucmVwbGFjZSgvW1xcaVxcclxcZl0vZywgJycpO1xuICAgIHJldHVybiBub25wcmludGFibGUgPSBuZXcgUmVnRXhwKFwiW1wiICsgcyArIFwiXVwiKTtcbiAgfSkoKTtcblxuICBoYW5kbGVLZXkgPSBmdW5jdGlvbihrZXkpIHtcbiAgICB2YXIgYm94O1xuXG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgXCJDLUVOVEVSXCI6XG4gICAgICBjYXNlIFwiVEFCXCI6XG4gICAgICAgIGJveCA9IGdldEJveCh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlKTtcbiAgICAgICAgaWYgKChib3guZ2V0QXR0cmlidXRlKCdjb2RlTWFpbkV4cHInKSkgIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBldmFsT3V0cHV0KGJveC5vdXRwdXQpO1xuICAgICAgICB9IGVsc2UgaWYgKChib3guZ2V0QXR0cmlidXRlKCdjb2RlTWFpbicpKSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGFjY2VwdENvZGUoYm94KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJNLUVOVEVSXCI6XG4gICAgICAgIGJveCA9IGdldEJveCh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlKTtcbiAgICAgICAgaWYgKChib3guZ2V0QXR0cmlidXRlKCdjb2RlTWFpbkV4cHInKSkgIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBjbGVhck91dHB1dEJveChib3gub3V0cHV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjbGVhckFzdCA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBjYm94O1xuXG4gICAgY2JveCA9IGdldEJveChib3gpO1xuICAgIHJldHVybiBjYm94ICE9IG51bGwgPyBjYm94LmFzdCA9IG51bGwgOiB2b2lkIDA7XG4gIH07XG5cbiAgb2xkQnJhY2tldHMgPSBbbnVsbCwgTmlsXTtcblxuICBjbGVhbkVtcHR5Tm9kZXMgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBuZXh0LCBwcmV2LCBfcmVmMztcblxuICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMyAmJiAoZWwucGFyZW50Tm9kZSAhPSBudWxsKSkge1xuICAgICAgcmV0dXJuIGNsZWFuRW1wdHlOb2RlcyhlbC5wYXJlbnROb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJldiA9IGVsLnByZXZpb3VzU2libGluZztcbiAgICAgIG5leHQgPSBlbC5uZXh0U2libGluZztcbiAgICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBlbC50ZXh0Q29udGVudC50cmltKCkgPT09ICcnICYmICgoX3JlZjMgPSBlbC5wYXJlbnROb2RlKSAhPSBudWxsID8gX3JlZjMuaGFzQXR0cmlidXRlKCdkb2MnKSA6IHZvaWQgMCkpIHtcbiAgICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICB9XG4gICAgICBpZiAobmV4dCA9PT0gbmV4dFNpYmxpbmcocHJldikpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlTGVpc3VyZUNvZGUocHJldiwgbmV4dCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHByZXNlbnRMZWlzdXJlQ29kZSA9IGZ1bmN0aW9uKG5vZGUsIGRvRXZhbCkge1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb250ZW50RWRpdGFibGUnLCAndHJ1ZScpO1xuICAgIE5vdGVib29rLmJpbmROb3RlYm9vayhub2RlKTtcbiAgICBOb3RlYm9vay5jaGFuZ2VUaGVtZShub2RlLCAndGhpbicpO1xuICAgIGlmIChkb0V2YWwpIHtcbiAgICAgIHJldHVybiBldmFsRG9jKG5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaW5pdE5vdGVib29rKG5vZGUpO1xuICAgIH1cbiAgfTtcblxuICBtZXJnZUxlaXN1cmVDb2RlID0gZnVuY3Rpb24oZWwxLCBlbDIpIHtcbiAgICB2YXIgbmV3Q29kZSwgcjtcblxuICAgIGlmIChlbDEgJiYgZWwyKSB7XG4gICAgICBpZiAoZWwxLm5vZGVUeXBlID09PSAxICYmIGVsMi5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgICBlbDEuYXBwZW5kQ2hpbGQoZWwyKTtcbiAgICAgICAgcmV0dXJuIGVsMS5ub3JtYWxpemUoKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwxLm5vZGVUeXBlID09PSAzICYmIGVsMi5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICBlbDIuaW5zZXJ0QmVmb3JlKGVsMSwgZWwyLmZpcnN0Q2hpbGQpO1xuICAgICAgICByZXR1cm4gZWwyLm5vcm1hbGl6ZSgpO1xuICAgICAgfSBlbHNlIGlmIChlbDEuaGFzQXR0cmlidXRlKCdsZWlzdXJlTm9kZScpICYmIGVsMS5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJykgPT09IGVsMi5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJykpIHtcbiAgICAgICAgbmV3Q29kZSA9IHRleHROb2RlKGVsMS5tZCA9IGVsMS5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJykgPT09ICdjb2RlJyA/IFwiXCIgKyAoZ2V0RWxlbWVudENvZGUoZWwxKSkgKyBcIlxcblwiICsgKGdldEVsZW1lbnRDb2RlKGVsMikpIDogXCJcIiArIGVsMS5tZCArIFwiXFxuXCIgKyBlbDIubWQpO1xuICAgICAgICByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgci5zZWxlY3ROb2RlQ29udGVudHMoZWwyKTtcbiAgICAgICAgZWwxLmFwcGVuZENoaWxkKHRleHROb2RlKCdcXG4nKSk7XG4gICAgICAgIGVsMS5hcHBlbmRDaGlsZChyLmV4dHJhY3RDb250ZW50cygpKTtcbiAgICAgICAgcmV0dXJuIGVsMi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsMik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGhpZ2hsaWdodFBvc2l0aW9uID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBhc3QsIGIsIGJyYWNrZXRzLCBjaGFuZ2VkLCBpLCBub2RlLCBwYXJlbnQsIHBvcywgciwgcmFuZ2VzLCBzLCBzcGFuLCBfaSwgX2osIF9rLCBfbGVuLCBfbGVuMSwgX2xlbjIsIF9yZWYzLCBfcmVmNCwgX3JlZjU7XG5cbiAgICBwYXJlbnQgPSBudWxsO1xuICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKHMucmFuZ2VDb3VudCkge1xuICAgICAgaWYgKGNsZWFuRW1wdHlOb2RlcyhzLmdldFJhbmdlQXQoMCkuc3RhcnRDb250YWluZXIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvY3VzQm94KHMuZm9jdXNOb2RlKTtcbiAgICAgIHBhcmVudCA9IGdldEJveChzLmZvY3VzTm9kZSk7XG4gICAgICBpZiAoKF9yZWYzID0gcy5nZXRSYW5nZUF0KDApKSAhPSBudWxsID8gX3JlZjMuY29sbGFwc2VkIDogdm9pZCAwKSB7XG4gICAgICAgIGlmICghcGFyZW50IHx8IGlzT3V0cHV0KHBhcmVudCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudC5wYXJlbnROb2RlICYmIChhc3QgPSBnZXRBc3QocGFyZW50KSkpIHtcbiAgICAgICAgICByID0gcy5nZXRSYW5nZUF0KDApO1xuICAgICAgICAgIHIuc2V0U3RhcnQocGFyZW50LCAwKTtcbiAgICAgICAgICBwb3MgPSBnZXRSYW5nZVRleHQocikubGVuZ3RoO1xuICAgICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoZmFsc2UpIHtcbiAgICAgICAgICAgIGJyYWNrZXRzID0gTGVpc3VyZS5icmFja2V0KGFzdC5sZWlzdXJlQmFzZSwgcG9zKTtcbiAgICAgICAgICAgIGlmIChvbGRCcmFja2V0c1swXSAhPT0gcGFyZW50IHx8ICFvbGRCcmFja2V0c1sxXS5lcXVhbHMoYnJhY2tldHMpKSB7XG4gICAgICAgICAgICAgIG9sZEJyYWNrZXRzID0gW3BhcmVudCwgYnJhY2tldHNdO1xuICAgICAgICAgICAgICBfcmVmNCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbTGVpc3VyZUJyYWNrZXRzXVwiKTtcbiAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmNC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBfcmVmNFtfaV07XG4gICAgICAgICAgICAgICAgdW53cmFwKG5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF9yZWY1ID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFydGlhbEFwcGx5XCIpO1xuICAgICAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmNS5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICAgICAgICBub2RlID0gX3JlZjVbX2pdO1xuICAgICAgICAgICAgICAgIHVud3JhcChub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYXJlbnQubm9ybWFsaXplKCk7XG4gICAgICAgICAgICAgIG1hcmtQYXJ0aWFsQXBwbGllcyhwYXJlbnQpO1xuICAgICAgICAgICAgICBiID0gYnJhY2tldHM7XG4gICAgICAgICAgICAgIHJhbmdlcyA9IFtdO1xuICAgICAgICAgICAgICB3aGlsZSAoYiAhPT0gTmlsKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2gobWFrZVJhbmdlKHBhcmVudCwgYi5oZWFkKCkuaGVhZCgpLCBiLmhlYWQoKS50YWlsKCkuaGVhZCgpKSk7XG4gICAgICAgICAgICAgICAgYiA9IGIudGFpbCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGZvciAoaSA9IF9rID0gMCwgX2xlbjIgPSByYW5nZXMubGVuZ3RoOyBfayA8IF9sZW4yOyBpID0gKytfaykge1xuICAgICAgICAgICAgICAgIHIgPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnTGVpc3VyZUJyYWNrZXRzJywgJycpO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdjbGFzcycsIGkgPT09IDAgPyAnTGVpc3VyZUZ1bmMnIDogJ0xlaXN1cmVBcmcnKTtcbiAgICAgICAgICAgICAgICB3cmFwUmFuZ2Uociwgc3Bhbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICAgICAgaWYgKGhpZGVTbGlkZXIoKSkge1xuICAgICAgICAgICAgICBwb3MgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICYmIGUudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgKGUudGFyZ2V0ID09PSBwYXJlbnQgfHwgcGFyZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkgJiYgc2hvd1NsaWRlckJ1dHRvbihwYXJlbnQsIHBvcywgZSkpIHtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgcG9zICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB3aW5kb3cuRVZUID0gZTtcbiAgICAgICAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICBzLmFkZFJhbmdlKG1ha2VSYW5nZShwYXJlbnQsIHBvcykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHBlZXJOb3RpZnlTZWxlY3Rpb24ocGFyZW50LCBzLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfTtcblxuICBudW1iZXJFbmQgPSAvKD86XnwuKlteMC05Ll0pKFswLTldK1xcLj9bMC05XSp8XFwuWzAtOV0qKSQvO1xuXG4gIG51bWJlclN0YXJ0ID0gL14oWzAtOV0rXFwuWzAtOV0rfFswLTldK3xcXC5bMC05XSspLztcblxuICBzbGlkZXIgPSBbXTtcblxuICBzaG93U2xpZGVyQnV0dG9uID0gZnVuY3Rpb24ocGFyZW50LCBwb3MsIGUpIHtcbiAgICB2YXIgY2hhbmdlZCwgbGVuLCBtLCBvbGRQb3MsIHIsIHNQYXJlbnQsIHNQb3MsIHNWYWx1ZSwgc3BhbiwgdGV4dDtcblxuICAgIGlmIChzbGlkZXIubGVuZ3RoKSB7XG4gICAgICBoaWRlU2xpZGVyKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRleHQgPSBwYXJlbnQudGV4dENvbnRlbnQ7XG4gICAgICBvbGRQb3MgPSBwb3M7XG4gICAgICBjaGFuZ2VkID0gMDtcbiAgICAgIGlmIChtID0gdGV4dC5zdWJzdHJpbmcoMCwgcG9zKS5tYXRjaChudW1iZXJFbmQpKSB7XG4gICAgICAgIHBvcyAtPSBtWzFdLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChtID0gdGV4dC5zdWJzdHJpbmcocG9zKS5tYXRjaChudW1iZXJTdGFydCkpIHtcbiAgICAgICAgbGVuID0gbVsxXS5sZW5ndGg7XG4gICAgICAgIGlmIChvbGRQb3MgPD0gcG9zICsgbGVuKSB7XG4gICAgICAgICAgc1BhcmVudCA9IHNsaWRlclswXSwgc1BvcyA9IHNsaWRlclsxXSwgc1ZhbHVlID0gc2xpZGVyWzJdO1xuICAgICAgICAgIGlmIChwYXJlbnQgIT09IHNQYXJlbnQgfHwgcG9zICE9PSBzUG9zIHx8IG1bMV0gIT09IHNWYWx1ZSkge1xuICAgICAgICAgICAgaGlkZVNsaWRlcigpO1xuICAgICAgICAgICAgciA9IG1ha2VSYW5nZShwYXJlbnQsIHBvcywgcG9zICsgbVsxXS5sZW5ndGgpO1xuICAgICAgICAgICAgc3BhbiA9IGNyZWF0ZU5vZGUoXCI8c3BhbiBjbGFzcz0nbGVpc3VyZVJhbmdlTnVtYmVyIHVpLXdpZGdldC1jb250ZW50Jz48L3NwYW4+XCIpO1xuICAgICAgICAgICAgd3JhcFJhbmdlKHIsIHNwYW4pO1xuICAgICAgICAgICAgY2hhbmdlZCA9IDE7XG4gICAgICAgICAgICBzcGFuLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgc2xpZGVyID0gW3BhcmVudCwgcG9zLCBtWzFdLCBzcGFuXTtcbiAgICAgICAgICAgIGNyZWF0ZVNsaWRlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBoaWRlU2xpZGVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGlzU2xpZGVyID0gZnVuY3Rpb24oZWwpIHtcbiAgICB3aGlsZSAoZWwgIT09IGRvY3VtZW50KSB7XG4gICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdzbGlkZXInKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNyZWF0ZVNsaWRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkLCBkaXYsIGluc2lkZSwgbWF4LCBtaW4sIHBhcmVudCwgcG9zLCBzbCwgc2xpZGluZywgc3BhbiwgdmFsdWU7XG5cbiAgICBwYXJlbnQgPSBzbGlkZXJbMF0sIHBvcyA9IHNsaWRlclsxXSwgdmFsdWUgPSBzbGlkZXJbMl0sIHNwYW4gPSBzbGlkZXJbM10sIGRpdiA9IHNsaWRlcls0XTtcbiAgICBpZiAoZGl2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGluc2lkZSA9IGZhbHNlO1xuICAgIHNsaWRpbmcgPSBmYWxzZTtcbiAgICBkID0gY3JlYXRlTm9kZShcIjxkaXYgc3R5bGU9J3otaW5kZXg6IDE7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDIwMHB4OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyOiBzb2xpZCBncmVlbiAxcHgnIHNsaWRlciBjb250ZW50RWRpdGFibGU9J2ZhbHNlJz48L2Rpdj5cIik7XG4gICAgc2xpZGVyLnB1c2goZCk7XG4gICAgZC5zdHlsZS50b3AgPSBcIlwiICsgKHNwYW4ub2Zmc2V0VG9wICsgc3Bhbi5vZmZzZXRIZWlnaHQgKyA1KSArIFwicHhcIjtcbiAgICBkLnN0eWxlLm1pblRvcCA9ICcwcHgnO1xuICAgIGQuc3R5bGUubGVmdCA9IFwiXCIgKyAoTWF0aC5tYXgoMCwgKHNwYW4ub2Zmc2V0TGVmdCArIHNwYW4ub2Zmc2V0V2lkdGgpIC8gMiAtIDEwMCkpICsgXCJweFwiO1xuICAgIGQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKCFpbnNpZGUpIHtcbiAgICAgICAgcmV0dXJuIGluc2lkZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLnRvRWxlbWVudCAhPT0gZCAmJiAhZC5jb250YWlucyhlLnRvRWxlbWVudCkpIHtcbiAgICAgICAgaW5zaWRlID0gZmFsc2U7XG4gICAgICAgIGlmICghc2xpZGluZykge1xuICAgICAgICAgIHJldHVybiBoaWRlU2xpZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XG4gICAgbWluID0gdmFsdWUgPCAwID8gdmFsdWUgKiAyIDogdmFsdWUgLyAyO1xuICAgIG1heCA9IHZhbHVlID09PSAwID8gMTAgOiB2YWx1ZSAqIDI7XG4gICAgc2wgPSAkKGQpLnNsaWRlcih7XG4gICAgICBhbmltYXRlOiAnZmFzdCcsXG4gICAgICBzdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHNsaWRpbmcgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFsbG93RXZlbnRzID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHN0b3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICBzZXRNaW5NYXgoc2wpO1xuICAgICAgICBhbGxvd0V2ZW50cyA9IHRydWU7XG4gICAgICAgIHNsaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFpbnNpZGUpIHtcbiAgICAgICAgICByZXR1cm4gaGlkZVNsaWRlcigpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICB2YXIgYXN0LCBfcmVmMztcblxuICAgICAgICBpZiAoc3Bhbi5maXJzdENoaWxkKSB7XG4gICAgICAgICAgc3Bhbi5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IFN0cmluZyh1aS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRGVmKHBhcmVudCkpIHtcbiAgICAgICAgICBwYXJlbnQuYXN0ID0gbnVsbDtcbiAgICAgICAgICBhY2NlcHRDb2RlKHBhcmVudCk7XG4gICAgICAgICAgYXN0ID0gZ2V0QXN0KHBhcmVudCk7XG4gICAgICAgICAgaWYgKChfcmVmMyA9IHBhcmVudC5hc3QpICE9IG51bGwgPyBfcmVmMy5sZWlzdXJlTmFtZSA6IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZShcInNlbC1cIiArIHBhcmVudC5hc3QubGVpc3VyZU5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYWtlSWQocGFyZW50KTtcbiAgICAgICAgICBpZiAoIXBhcmVudC5nZXRBdHRyaWJ1dGUocGFyZW50Lm91dHB1dCwgJ2xlaXN1cmVVcGRhdGUnKSkge1xuICAgICAgICAgICAgc2V0VXBkYXRlKHBhcmVudC5vdXRwdXQsIFwiaWQtXCIgKyBwYXJlbnQuaWQgKyBcIiBjb21waWxlXCIsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGUoXCJpZC1cIiArIHBhcmVudC5pZCk7XG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZShcImNvbXBpbGVcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2YWx1ZTogdmFsdWVcbiAgICB9KTtcbiAgICBzZXRNaW5NYXgoc2wsIHZhbHVlKTtcbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGQsIHBhcmVudC5maXJzdENoaWxkKTtcbiAgICByZXR1cm4gZC5mb2N1cygpO1xuICB9O1xuXG4gIHBzZ24gPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPCAwKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgfTtcblxuICBzZXRNaW5NYXggPSBmdW5jdGlvbihzbCwgdmFsdWUpIHtcbiAgICB2YXIgbWF4LCBtaW4sIHN0ZXAsIF9yZWYzO1xuXG4gICAgdmFsdWUgPSB2YWx1ZSB8fCBzbC5zbGlkZXIoXCJ2YWx1ZVwiKTtcbiAgICBtaW4gPSAwO1xuICAgIG1heCA9ICgxIDw9IChfcmVmMyA9IE1hdGguYWJzKHZhbHVlKSkgJiYgX3JlZjMgPCA1MCkgfHwgdmFsdWUgPT09IDAgPyAxMDAgKiBwc2duKHZhbHVlKSA6IHZhbHVlICogMjtcbiAgICBpZiAoTWF0aC5yb3VuZCh2YWx1ZSkgPT09IHZhbHVlKSB7XG4gICAgICBzdGVwID0gTWF0aC5yb3VuZCgobWF4IC0gbWluKSAvIDEwMCk7XG4gICAgICBzdGVwID0gc3RlcCAtIHN0ZXAgJSAobWF4IC0gbWluKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RlcCA9IChtYXggLSBtaW4pIC8gMTAwO1xuICAgIH1cbiAgICBzbC5zbGlkZXIoXCJvcHRpb25cIiwgXCJtaW5cIiwgbWluKTtcbiAgICBzbC5zbGlkZXIoXCJvcHRpb25cIiwgXCJtYXhcIiwgbWF4KTtcbiAgICByZXR1cm4gc2wuc2xpZGVyKFwib3B0aW9uXCIsIFwic3RlcFwiLCBzdGVwKTtcbiAgfTtcblxuICBoaWRlU2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRpdiwgcGFyZW50LCBzUG9zLCBzVmFsdWUsIHNwYW47XG5cbiAgICBpZiAoc2xpZGVyLmxlbmd0aCkge1xuICAgICAgcGFyZW50ID0gc2xpZGVyWzBdLCBzUG9zID0gc2xpZGVyWzFdLCBzVmFsdWUgPSBzbGlkZXJbMl0sIHNwYW4gPSBzbGlkZXJbM10sIGRpdiA9IHNsaWRlcls0XTtcbiAgICAgIHVud3JhcChzcGFuKTtcbiAgICAgIGlmIChkaXYpIHtcbiAgICAgICAgcmVtb3ZlKGRpdik7XG4gICAgICB9XG4gICAgICBwYXJlbnQubm9ybWFsaXplKCk7XG4gICAgICBzbGlkZXIgPSBbXTtcbiAgICAgIHJldHVybiAyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH07XG5cbiAgd3JhcFJhbmdlID0gZnVuY3Rpb24ocmFuZ2UsIG5vZGUpIHtcbiAgICB2YXIgY29udGVudHMsIGVycjtcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gcmFuZ2Uuc3Vycm91bmRDb250ZW50cyhub2RlKTtcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgIGNvbnRlbnRzID0gcmFuZ2UuY2xvbmVDb250ZW50cygpO1xuICAgICAgcmVwbGFjZVJhbmdlKHJhbmdlLCBub2RlKTtcbiAgICAgIHJldHVybiBub2RlLmFwcGVuZENoaWxkKGNvbnRlbnRzKTtcbiAgICB9XG4gIH07XG5cbiAgcmVwbGFjZVJhbmdlID0gZnVuY3Rpb24ocmFuZ2UsIG5vZGUpIHtcbiAgICByYW5nZS5kZWxldGVDb250ZW50cygpO1xuICAgIHJldHVybiByYW5nZS5pbnNlcnROb2RlKG5vZGUpO1xuICB9O1xuXG4gIGdldFJhbmdlVGV4dCA9IGZ1bmN0aW9uKHIpIHtcbiAgICByZXR1cm4gci5jbG9uZUNvbnRlbnRzKCkudGV4dENvbnRlbnQ7XG4gIH07XG5cbiAgZ2V0Qm94ID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHdoaWxlICgobm9kZSAhPSBudWxsKSAmJiAoKHR5cGVvZiBub2RlLmdldEF0dHJpYnV0ZSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5nZXRBdHRyaWJ1dGUoJ0xlaXN1cmVCb3gnKSA6IHZvaWQgMCkgPT0gbnVsbCkpIHtcbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9O1xuXG4gIGNoZWNrTXV0YXRlRnJvbU1vZGlmaWNhdGlvbiA9IGZ1bmN0aW9uKGV2dCkge1xuICAgIHZhciBiLCBiMjtcblxuICAgIGIgPSBnZXRCb3goZXZ0LnRhcmdldCk7XG4gICAgYjIgPSBnZXRCb3god2luZG93LmdldFNlbGVjdGlvbigpLmZvY3VzTm9kZSk7XG4gICAgaWYgKGIgJiYgYiA9PT0gYjIpIHtcbiAgICAgIGlmICgoaXNEZWYoYikpICYmIGIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2RlTWFpbkV4cHInKSkge1xuICAgICAgICB0b0RlZkJveChiKTtcbiAgICAgIH0gZWxzZSBpZiAoIShpc0RlZihiKSkgJiYgYi5jbGFzc0xpc3QuY29udGFpbnMoJ2NvZGVNYWluJykpIHtcbiAgICAgICAgdG9FeHByQm94KGIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcGxpY2F0ZShiKTtcbiAgICB9XG4gIH07XG5cbiAgcmVwbGljYXRlID0gZnVuY3Rpb24oYikge1xuICAgIGlmIChiLnJlcGxpY2F0b3IpIHtcbiAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGIucmVwbGljYXRvci5yZXBsaWNhdGUoYik7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgYnV0dG9uQ2xhc3NlcyA9ICd1aS1idXR0b24gdWktd2lkZ2V0IHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCB1aS1idXR0b24tdGV4dC1vbmx5Jy5zcGxpdCgnICcpO1xuXG4gIGJveENsYXNzZXMgPSB7XG4gICAgY29kZU1haW5FeHByOiBbJ2NvZGVNYWluRXhwcicsICd1aS13aWRnZXQnLCAndWktd2lkZ2V0LWNvbnRlbnQnLCAndWktY29ybmVyLWFsbCddLFxuICAgIGNvZGVNYWluOiBbJ2NvZGVNYWluJywgJ3VpLXdpZGdldCcsICd1aS13aWRnZXQtY29udGVudCcsICd1aS1jb3JuZXItYWxsJ10sXG4gICAgY29kZU1haW5UZXN0OiBbJ2NvZGVNYWluVGVzdCddLFxuICAgIG91dHB1dDogWydvdXRwdXQnLCAndWktY29ybmVyLWFsbCddXG4gIH07XG5cbiAgYWRkQm94Q2xhc3NlcyA9IGZ1bmN0aW9uKGJveCwgdHlwZSkge1xuICAgIHZhciBjbCwgX2ksIF9sZW4sIF9yZWYzLCBfcmVzdWx0cztcblxuICAgIGJveC5zZXRBdHRyaWJ1dGUodHlwZSwgJycpO1xuICAgIF9yZWYzID0gYm94Q2xhc3Nlc1t0eXBlXTtcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGNsID0gX3JlZjNbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChib3guY2xhc3NMaXN0LmFkZChjbCkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG5cbiAgcmVtb3ZlQm94Q2xhc3NlcyA9IGZ1bmN0aW9uKGJveCwgdHlwZSkge1xuICAgIHZhciBjbCwgX2ksIF9sZW4sIF9yZWYzLCBfcmVzdWx0cztcblxuICAgIGJveC5yZW1vdmVBdHRyaWJ1dGUodHlwZSk7XG4gICAgX3JlZjMgPSBib3hDbGFzc2VzW3R5cGVdO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgY2wgPSBfcmVmM1tfaV07XG4gICAgICBfcmVzdWx0cy5wdXNoKGJveC5jbGFzc0xpc3QucmVtb3ZlKGNsKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICB0b0V4cHJCb3ggPSBmdW5jdGlvbihiKSB7XG4gICAgdmFyIG5vZGUsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYzLCBfcmVmNDtcblxuICAgIHJlbW92ZUJveENsYXNzZXMoYiwgJ2NvZGVNYWluJyk7XG4gICAgYWRkQm94Q2xhc3NlcyhiLCAnY29kZU1haW5FeHByJyk7XG4gICAgX3JlZjMgPSBiLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb2RlbmFtZV0nKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjNbX2ldO1xuICAgICAgdW53cmFwKG5vZGUpO1xuICAgIH1cbiAgICBfcmVmNCA9IGIucXVlcnlTZWxlY3RvckFsbCgnLmFzdGJ1dHRvbicpO1xuICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWY0Lmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgbm9kZSA9IF9yZWY0W19qXTtcbiAgICAgIHJlbW92ZShub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIG1ha2VPdXRwdXRCb3goYik7XG4gIH07XG5cbiAgdG9EZWZCb3ggPSBmdW5jdGlvbihiKSB7XG4gICAgaWYgKGIub3V0cHV0KSB7XG4gICAgICByZW1vdmUoYi5vdXRwdXQpO1xuICAgIH1cbiAgICByZW1vdmVCb3hDbGFzc2VzKGIsICdjb2RlTWFpbkV4cHInKTtcbiAgICBhZGRCb3hDbGFzc2VzKGIsICdjb2RlTWFpbicpO1xuICAgIHJldHVybiBhZGREZWZDb250cm9scyhiKTtcbiAgfTtcblxuICBhZGREZWZDb250cm9scyA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBidG47XG5cbiAgICBidG4gPSBjcmVhdGVOb2RlKFwiPGJ1dHRvbiBvbmNsaWNrPSdOb3RlYm9vay5zaG93QXN0KHRoaXMucGFyZW50Tm9kZSknIGNsYXNzPSdhc3RidXR0b24nIHRpdGxlPSdTaG93IEFTVCc+PC9idXR0b24+XCIpO1xuICAgIG1hcmt1cEJ1dHRvbihidG4pO1xuICAgIHJldHVybiBib3guYXBwZW5kQ2hpbGQoYnRuKTtcbiAgfTtcblxuICByZW1vdmUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgdmFyIF9yZWYzO1xuXG4gICAgcmV0dXJuIChfcmVmMyA9IG5vZGUucGFyZW50Tm9kZSkgIT0gbnVsbCA/IF9yZWYzLnJlbW92ZUNoaWxkKG5vZGUpIDogdm9pZCAwO1xuICB9O1xuXG4gIHNob3dBc3QgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgbmFtZSwgbm9kZSwgb3V0cHV0O1xuXG4gICAgbmFtZSA9IChnZXRBc3QoYm94KSkubGVpc3VyZU5hbWU7XG4gICAgaWYgKGJveC5hc3RPdXQgIT0gbnVsbCkge1xuICAgICAgcmVtb3ZlKGJveC5hc3RPdXQub3V0cHV0KTtcbiAgICAgIHJlbW92ZShib3guYXN0T3V0KTtcbiAgICAgIHJldHVybiBib3guYXN0T3V0ID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgbm9kZSA9IGNvZGVCb3goJ2NvZGVNYWluRXhwcicpO1xuICAgICAgYm94LmFzdE91dCA9IG5vZGU7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnbGVpc3VyZU91dHB1dCcsICcnKTtcbiAgICAgIGJveC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBib3gubmV4dFNpYmxpbmcpO1xuICAgICAgbm9kZS50ZXh0Q29udGVudCA9IFwiI0B1cGRhdGUgc2VsLVwiICsgbmFtZSArIFwiXFxudHJlZUZvck5vdGVib29rIFwiICsgbmFtZTtcbiAgICAgIG91dHB1dCA9IG1ha2VPdXRwdXRCb3gobm9kZSk7XG4gICAgICB0b2dnbGVFZGl0KG91dHB1dCk7XG4gICAgICByZXR1cm4gZXZhbE91dHB1dChvdXRwdXQsIHRydWUpO1xuICAgIH1cbiAgfTtcblxuICBoaWdobGlnaHROb3RlYm9va0Z1bmN0aW9uID0gZnVuY3Rpb24oZnVuY05hbWUsIHN0YXJ0LCBzdG9wKSB7XG4gICAgdmFyIGJveCwgb2Zmc2V0LCBzZWw7XG5cbiAgICBib3ggPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCJbbGVpc3VyZWZ1bmM9XCIgKyBmdW5jTmFtZSArIFwiXVwiKTtcbiAgICBvZmZzZXQgPSAwO1xuICAgIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgcmV0dXJuIHNlbC5hZGRSYW5nZShtYWtlUmFuZ2UoYm94LCBzdGFydCArIG9mZnNldCwgc3RvcCArIG9mZnNldCkpO1xuICB9O1xuXG4gIGlzRGVmID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIGRlZlR5cGUsIGxlYWRpbmcsIG0sIG1hdGNoZWQsIG5hbWUsIHR4dDtcblxuICAgIHR4dCA9IGJveC50ZXh0Q29udGVudDtcbiAgICBpZiAoKG0gPSB0eHQubWF0Y2goTF9kZWZQYXQoKSkpKSB7XG4gICAgICBtYXRjaGVkID0gbVswXSwgbGVhZGluZyA9IG1bMV0sIG5hbWUgPSBtWzJdLCBkZWZUeXBlID0gbVszXTtcbiAgICAgIHJldHVybiAoZGVmVHlwZSAhPSBudWxsID8gZGVmVHlwZS5sZW5ndGggOiB2b2lkIDApID4gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGluaXROb3RlYm9vayA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIHBnbTtcblxuICAgIGVsLnJlcGxhY2luZyA9IHRydWU7XG4gICAgcmVtb3ZlT2xkRGVmcyhlbCk7XG4gICAgcGdtID0gbWFya3VwRGVmcyhlbCwgZmluZERlZnMoZWwpKTtcbiAgICBlbC5ub3JtYWxpemUoKTtcbiAgICBlbC5yZXBsYWNpbmcgPSBmYWxzZTtcbiAgICBpZiAoIWVsLmhhc0F0dHJpYnV0ZSgnbm9MZWlzdXJlQmFyJykpIHtcbiAgICAgIGluc2VydENvbnRyb2xzKGVsKTtcbiAgICAgIGVsLnRlc3RSZXN1bHRzLmlubmVySFRNTCA9IHBnbVsyXTtcbiAgICB9XG4gICAgc25hcHNob3QoZWwsIHBnbSk7XG4gICAgcmV0dXJuIHBnbTtcbiAgfTtcblxuICBtYWtlTGFiZWwgPSBmdW5jdGlvbih0ZXh0LCBjKSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpO1xuICAgIG5vZGUuaW5uZXJIVE1MID0gdGV4dDtcbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBtYWtlT3B0aW9uID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBvcHQ7XG5cbiAgICBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdPUFRJT04nKTtcbiAgICBvcHQudGV4dCA9IG5hbWU7XG4gICAgcmV0dXJuIG9wdDtcbiAgfTtcblxuICBjcmVhdGVOb2RlID0gZnVuY3Rpb24odHh0KSB7XG4gICAgdmFyIHNjcmF0Y2g7XG5cbiAgICBzY3JhdGNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgc2NyYXRjaC5pbm5lckhUTUwgPSB0eHQ7XG4gICAgcmV0dXJuIHNjcmF0Y2guZmlyc3RDaGlsZDtcbiAgfTtcblxuICBjcmVhdGVGcmFnbWVudCA9IGZ1bmN0aW9uKHR4dCkge1xuICAgIHZhciBmcmFnLCBzY3JhdGNoO1xuXG4gICAgc2NyYXRjaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHNjcmF0Y2guaW5uZXJIVE1MID0gdHh0O1xuICAgIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgd2hpbGUgKHNjcmF0Y2guZmlyc3RDaGlsZCkge1xuICAgICAgZnJhZy5hcHBlbmRDaGlsZChzY3JhdGNoLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICByZXR1cm4gZnJhZztcbiAgfTtcblxuICBpbnNlcnRDb250cm9scyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGNvbnRyb2xEaXYsIHNhdmVCdXR0b24sIHNwYWNlciwgdGVzdEJ1dHRvbiwgdGhlbWVTZWxlY3QsIHZpZXdTZWxlY3QsIF9yZWYzLCBfcmVmNDtcblxuICAgIGNvbnRyb2xEaXYgPSBjcmVhdGVOb2RlKFwiPGRpdiBMZWlzdXJlT3V0cHV0IGNvbnRlbnRFZGl0YWJsZT0nZmFsc2UnIGNsYXNzPSdsZWlzdXJlX2Jhcic+PGRpdiBjbGFzcz1cXFwibGVpc3VyZV9iYXJfY29udGVudHNcXFwiPlxcbiAgPGJ1dHRvbiBsZWlzdXJlSWQ9J3NhdmVCdXR0b24nIGNsYXNzPVxcXCJsZWlzdXJlX3N0YXJ0XFxcIj5TYXZlPC9idXR0b24+XFxuICA8YnV0dG9uIGxlaXN1cmVJZD0ndGVzdEJ1dHRvbic+UnVuIFRlc3RzPC9idXR0b24+IDxzcGFuIGxlaXN1cmVJZD0ndGVzdFJlc3VsdHMnIGNsYXNzPVxcXCJub3RydW5cXFwiPjwvc3Bhbj5cXG4gIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbGVpc3VyZUlkPSdhdXRvcnVuVGVzdHMnPjxiPkF1dG88L2I+PC9pbnB1dD5cXG4gIDxzcGFuIGNsYXNzPVxcXCJsZWlzdXJlX3RoZW1lXFxcIj5UaGVtZTogPC9zcGFuPlxcbiAgPHNlbGVjdCBsZWlzdXJlSWQ9J3RoZW1lU2VsZWN0Jz5cXG4gICAgPG9wdGlvbiB2YWx1ZT10aGluPlRoaW48L29wdGlvbj5cXG4gICAgPG9wdGlvbiB2YWx1ZT1nYXVkeT5HYXVkeTwvb3B0aW9uPlxcbiAgICA8b3B0aW9uIHZhbHVlPWN0aHVsaHU+Q3RodWxodTwvb3B0aW9uPlxcbiAgPC9zZWxlY3Q+XFxuICA8c3Bhbj5WaWV3OiA8L3NwYW4+XFxuICA8c2VsZWN0IGxlaXN1cmVJZD0ndmlld1NlbGVjdCc+XFxuICAgIDxvcHRpb24gdmFsdWU9Y29kaW5nPkNvZGluZzwvb3B0aW9uPlxcbiAgICA8b3B0aW9uIHZhbHVlPWRlYnVnZ2luZz5EZWJ1Z2dpbmc8L29wdGlvbj5cXG4gICAgPG9wdGlvbiB2YWx1ZT10ZXN0aW5nPlRlc3Rpbmc8L29wdGlvbj5cXG4gICAgPG9wdGlvbiB2YWx1ZT1ydW5uaW5nPlJ1bm5pbmc8L29wdGlvbj5cXG4gIDwvc2VsZWN0PlxcbjwvZGl2PlwiKTtcbiAgICBzcGFjZXIgPSBjcmVhdGVOb2RlKFwiPGRpdiBMZWlzdXJlT3V0cHV0ICBjb250ZW50RWRpdGFibGU9J2ZhbHNlJyBjbGFzcz0nbGVpc3VyZV9zcGFjZSc+PC9kaXY+XCIpO1xuICAgIGVsLmluc2VydEJlZm9yZShzcGFjZXIsIGVsLmZpcnN0Q2hpbGQpO1xuICAgIGVsLmluc2VydEJlZm9yZShjb250cm9sRGl2LCBlbC5maXJzdENoaWxkKTtcbiAgICBfcmVmMyA9IGdldEVsZW1lbnRzKGVsLCBbJ2Rvd25sb2FkTGluaycsICd2aWV3TGluaycsICdzYXZlQnV0dG9uJywgJ3Rlc3RCdXR0b24nLCAndGVzdFJlc3VsdHMnLCAnYXV0b3J1blRlc3RzJywgJ3RoZW1lU2VsZWN0JywgJ3ZpZXdTZWxlY3QnXSksIGVsLmxlaXN1cmVEb3dubG9hZExpbmsgPSBfcmVmM1swXSwgZWwubGVpc3VyZVZpZXdMaW5rID0gX3JlZjNbMV0sIHNhdmVCdXR0b24gPSBfcmVmM1syXSwgdGVzdEJ1dHRvbiA9IF9yZWYzWzNdLCBlbC50ZXN0UmVzdWx0cyA9IF9yZWYzWzRdLCBlbC5hdXRvcnVuID0gX3JlZjNbNV0sIHRoZW1lU2VsZWN0ID0gX3JlZjNbNl0sIHZpZXdTZWxlY3QgPSBfcmVmM1s3XTtcbiAgICBjb250cm9sRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGVDb250cm9scycpKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVDb250cm9scycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaGlkZUNvbnRyb2xzJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgcmV0dXJuIHNhdmVQcm9ncmFtKGVsKTtcbiAgICB9KTtcbiAgICB0ZXN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcnVuVGVzdHMoZWwpO1xuICAgIH0pO1xuICAgIHRoZW1lU2VsZWN0LnZhbHVlID0gKF9yZWY0ID0gZWwubGVpc3VyZVRoZW1lKSAhPSBudWxsID8gX3JlZjQgOiAndGhpbic7XG4gICAgdGhlbWVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICByZXR1cm4gY2hhbmdlVGhlbWUoZWwsIGV2dC50YXJnZXQudmFsdWUpO1xuICAgIH0pO1xuICAgIHZpZXdTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICByZXR1cm4gY2hhbmdlVmlldyhlbCwgZXZ0LnRhcmdldC52YWx1ZSk7XG4gICAgfSk7XG4gICAgZWwuYXV0b3J1bi5jaGVja2VkID0gZWwuYXV0b3J1blN0YXRlO1xuICAgIGVsLmF1dG9ydW4uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBlbC5hdXRvcnVuU3RhdGUgPSBlbC5hdXRvcnVuLmNoZWNrZWQ7XG4gICAgICBpZiAoZWwuYXV0b3J1blN0YXRlKSB7XG4gICAgICAgIHJldHVybiBydW5UZXN0cyhlbCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcmt1cEJ1dHRvbnMoY29udHJvbERpdik7XG4gIH07XG5cbiAgc2F2ZVByb2dyYW0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd3JpdGUoZmlsZW5hbWUsIGdldE1ERG9jdW1lbnQoKSwgKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGFsZXJ0KFwiU2F2aW5nIFwiICsgZmlsZW5hbWUpO1xuICAgIH0pLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICBhbGVydChlcnIuc3RhY2spO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH0pO1xuICB9O1xuXG4gIHNob3dGaWxlbmFtZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgaWYgKGVsICYmIGZpbGVuYW1lKSB7XG4gICAgICBlbC5pbm5lckhUTUwgPSBcIlNhdmU6IFwiICsgKGZpbGVuYW1lLnBhdGhOYW1lKCkpO1xuICAgICAgcmV0dXJuIGVsLnRpdGxlID0gZmlsZW5hbWUudG9TdHJpbmcoKTtcbiAgICB9XG4gIH07XG5cbiAgc2hvd0ZpbGVuYW1lcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjMsIF9yZXN1bHRzO1xuXG4gICAgX3JlZjMgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsZWlzdXJlSWQ9c2F2ZUJ1dHRvbl0nKTtcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmM1tfaV07XG4gICAgICBfcmVzdWx0cy5wdXNoKHNob3dGaWxlbmFtZShub2RlKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBzZXRGaWxlbmFtZSA9IGZ1bmN0aW9uKG5ld05hbWUpIHtcbiAgICBjb25zb2xlLmxvZyhcIlNFVCBGSUxFTkFNRTogXCIgKyBuZXdOYW1lKTtcbiAgICBmaWxlbmFtZSA9IG5ld05hbWUgaW5zdGFuY2VvZiBVUkkgPyBuZXdOYW1lIDogbmV3IFVSSShkb2N1bWVudC5sb2NhdGlvbi5ocmVmLCBuZXdOYW1lKTtcbiAgICByZXR1cm4gc2hvd0ZpbGVuYW1lcygpO1xuICB9O1xuXG4gIG1hcmt1cEJ1dHRvbnMgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBidG4sIF9pLCBfbGVuLCBfcmVmMywgX3Jlc3VsdHM7XG5cbiAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgYnRuID0gX3JlZjNbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChtYXJrdXBCdXR0b24oYnRuKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBtYXJrdXBCdXR0b24gPSBmdW5jdGlvbihidG4pIHtcbiAgICB2YXIgY2wsIF9pLCBfbGVuLCBfcmVzdWx0cztcblxuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBidXR0b25DbGFzc2VzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBjbCA9IGJ1dHRvbkNsYXNzZXNbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChidG4uY2xhc3NMaXN0LmFkZChjbCkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG5cbiAgZ2V0RWxlbWVudHMgPSBmdW5jdGlvbihlbCwgaWRzKSB7XG4gICAgdmFyIGVscywgaWQsIG5vZGUsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYzLCBfcmVzdWx0cztcblxuICAgIGVscyA9IHt9O1xuICAgIF9yZWYzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnW2xlaXN1cmVJZF0nKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjNbX2ldO1xuICAgICAgZWxzW25vZGUuZ2V0QXR0cmlidXRlKCdsZWlzdXJlSWQnKV0gPSBub2RlO1xuICAgIH1cbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IGlkcy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgIGlkID0gaWRzW19qXTtcbiAgICAgIF9yZXN1bHRzLnB1c2goZWxzW2lkXSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBlc2NhcGVIdG1sID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1s8Pl0vZywgZnVuY3Rpb24oYykge1xuICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICBjYXNlICc8JzpcbiAgICAgICAgICAgIHJldHVybiAnJmx0Oyc7XG4gICAgICAgICAgY2FzZSAnPic6XG4gICAgICAgICAgICByZXR1cm4gJyZndDsnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH07XG5cbiAgbG9hZFByb2dyYW0gPSBmdW5jdGlvbihlbCwgZmlsZXMpIHtcbiAgICB2YXIgZnI7XG5cbiAgICBlbCA9IGdldEJveDtcbiAgICBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgZnIub25sb2FkZW5kID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBlbC5pbm5lckhUTUwgPSBlc2NhcGVIdG1sKGZyLnJlc3VsdCk7XG4gICAgICByZXR1cm4gaW5pdE5vdGVib29rKGVsKTtcbiAgICB9O1xuICAgIHJldHVybiBmci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZXMuaXRlbSgwKSk7XG4gIH07XG5cbiAgY29uZmlndXJlU2F2ZUxpbmsgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBibG9iLCBidWlsZGVyO1xuXG4gICAgd2luZG93LlVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDtcbiAgICBidWlsZGVyID0gbmV3IFdlYktpdEJsb2JCdWlsZGVyKCk7XG4gICAgYnVpbGRlci5hcHBlbmQoZ2V0RWxlbWVudENvZGUoZWwpKTtcbiAgICBibG9iID0gYnVpbGRlci5nZXRCbG9iKCd0ZXh0L3BsYWluJyk7XG4gICAgZWwubGVpc3VyZURvd25sb2FkTGluay5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgcmV0dXJuIGVsLmxlaXN1cmVWaWV3TGluay5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gIH07XG5cbiAgZ2V0RWxlbWVudENvZGUgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciByO1xuXG4gICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgci5zZWxlY3ROb2RlKGVsKTtcbiAgICBjID0gci5jbG9uZUNvbnRlbnRzKCkuZmlyc3RDaGlsZDtcbiAgICByZW1vdmVPbGREZWZzKGMpO1xuICAgIHJldHVybiBjLnRleHRDb250ZW50O1xuICB9O1xuXG4gIHJ1blRlc3RzID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgZmFpbGVkLCBwYXNzZWQsIHJlc3VsdHNDbGFzcywgdGVzdCwgX2ksIF9sZW4sIF9yZWYzO1xuXG4gICAgcGFzc2VkID0gMDtcbiAgICBmYWlsZWQgPSAwO1xuICAgIF9yZWYzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmNvZGVNYWluVGVzdCcpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIHRlc3QgPSBfcmVmM1tfaV07XG4gICAgICBpZiAocnVuVGVzdCh0ZXN0KSkge1xuICAgICAgICBwYXNzZWQrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhaWxlZCsrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZWwudGVzdFJlc3VsdHMpIHtcbiAgICAgIHJlc3VsdHNDbGFzcyA9IGVsLnRlc3RSZXN1bHRzLmNsYXNzTGlzdDtcbiAgICAgIHJlc3VsdHNDbGFzcy5yZW1vdmUoJ25vdHJ1bicpO1xuICAgICAgaWYgKCFmYWlsZWQpIHtcbiAgICAgICAgcmVzdWx0c0NsYXNzLnJlbW92ZSgnZmFpbGVkJyk7XG4gICAgICAgIHJlc3VsdHNDbGFzcy5hZGQoJ3Bhc3NlZCcpO1xuICAgICAgICByZXR1cm4gZWwudGVzdFJlc3VsdHMuaW5uZXJIVE1MID0gcGFzc2VkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0c0NsYXNzLnJlbW92ZSgncGFzc2VkJyk7XG4gICAgICAgIHJlc3VsdHNDbGFzcy5hZGQoJ2ZhaWxlZCcpO1xuICAgICAgICByZXR1cm4gZWwudGVzdFJlc3VsdHMuaW5uZXJIVE1MID0gXCJcIiArIHBhc3NlZCArIFwiL1wiICsgZmFpbGVkO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjaGFuZ2VUaGVtZSA9IGZ1bmN0aW9uKGVsLCB2YWx1ZSkge1xuICAgIHZhciB0aGVtZTtcblxuICAgIHRoZW1lID0gdmFsdWU7XG4gICAgZWwubGVpc3VyZVRoZW1lID0gdGhlbWU7XG4gICAgcmV0dXJuIGVsLmNsYXNzTmFtZSA9IHRoZW1lO1xuICB9O1xuXG4gIGNoYW5nZVZpZXcgPSBmdW5jdGlvbihlbCwgdmFsdWUpIHtcbiAgICBkZWJ1ZyA9IHZhbHVlID09PSAnZGVidWdnaW5nJztcbiAgICByZXR1cm4gYWxlcnQoJ25ldyB2aWV3OiAnICsgdmFsdWUgKyBcIiwgZGVidWc6IFwiICsgZGVidWcpO1xuICB9O1xuXG4gIHVud3JhcCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB2YXIgcGFyZW50O1xuXG4gICAgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQgIT0gbnVsbCkge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUuZmlyc3RDaGlsZCwgbm9kZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH1cbiAgfTtcblxuICByZW1vdmVPbGREZWZzID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgZXh0cmFjdGVkLCBtLCBub2RlLCB0eHQsIF9pLCBfaiwgX2ssIF9sLCBfbGVuLCBfbGVuMSwgX2xlbjIsIF9sZW4zLCBfcmVmMywgX3JlZjQsIF9yZWY1O1xuXG4gICAgZWwubGVpc3VyZURvd25sb2FkTGluayA9IG51bGw7XG4gICAgZWwubGVpc3VyZVZpZXdMaW5rID0gbnVsbDtcbiAgICBleHRyYWN0ZWQgPSBbXTtcbiAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbTGVpc3VyZU91dHB1dF1cIik7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgbm9kZSA9IF9yZWYzW19pXTtcbiAgICAgIHJlbW92ZShub2RlKTtcbiAgICB9XG4gICAgX3JlZjQgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW2dlbmVyYXRlZG5sXVwiKTtcbiAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmNC5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmNFtfal07XG4gICAgICB0eHQgPSBub2RlLmxhc3RDaGlsZDtcbiAgICAgIGlmICh0eHQubm9kZVR5cGUgPT09IDMgJiYgdHh0LmRhdGFbdHh0LmRhdGEubGVuZ3RoIC0gMV0gPT09ICdcXG4nKSB7XG4gICAgICAgIHR4dC5kYXRhID0gdHh0LmRhdGEuc3Vic3RyaW5nKDAsIHR4dC5kYXRhLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBfcmVmNSA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbTGVpc3VyZV1cIik7XG4gICAgZm9yIChfayA9IDAsIF9sZW4yID0gX3JlZjUubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XG4gICAgICBub2RlID0gX3JlZjVbX2tdO1xuICAgICAgaWYgKGFkZHNMaW5lKG5vZGUpICYmIChub2RlLmZpcnN0Q2hpbGQgIT0gbnVsbCkpIHtcbiAgICAgICAgZXh0cmFjdGVkLnB1c2gobm9kZS5maXJzdENoaWxkKTtcbiAgICAgIH1cbiAgICAgIHVud3JhcChub2RlKTtcbiAgICB9XG4gICAgZm9yIChfbCA9IDAsIF9sZW4zID0gZXh0cmFjdGVkLmxlbmd0aDsgX2wgPCBfbGVuMzsgX2wrKykge1xuICAgICAgbm9kZSA9IGV4dHJhY3RlZFtfbF07XG4gICAgICBpZiAoKG5vZGUucGFyZW50Tm9kZSAhPSBudWxsKSAmJiAhYWRkc0xpbmUobm9kZSkgJiYgKG5vZGUucHJldmlvdXNTaWJsaW5nICE9IG51bGwpICYmICFhZGRzTGluZShub2RlLnByZXZpb3VzU2libGluZykpIHtcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ZXh0KCdcXG4nKSwgbm9kZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsLnRleHRDb250ZW50ID0gZWwudGV4dENvbnRlbnQucmVwbGFjZSgvXFx1RkVGRi9nLCAnJyk7XG4gICAgdHh0ID0gZWwubGFzdENoaWxkO1xuICAgIGlmICgodHh0ICE9IG51bGwgPyB0eHQubm9kZVR5cGUgOiB2b2lkIDApID09PSAzICYmIChtID0gdHh0LmRhdGEubWF0Y2goLyhefFteXFxuXSkoXFxuKykkLykpKSB7XG4gICAgICByZXR1cm4gdHh0LmRhdGEgPSB0eHQuZGF0YS5zdWJzdHJpbmcoMCwgdHh0LmRhdGEubGVuZ3RoIC0gbVsyXS5sZW5ndGgpO1xuICAgIH1cbiAgfTtcblxuICBtYXJrdXBEZWZzID0gZnVuY3Rpb24oZWwsIGRlZnMpIHtcbiAgICB2YXIgYXV0bywgYm9kLCBib2R5LCBieCwgZGVmLCBpLCBtYWluLCBuYW1lLCBub3RlYm9va0F1dG9Ob2RlcywgcGdtLCBzLCB0ZXN0LCB0ZXN0cywgdG90YWxUZXN0cywgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjMsIF9yZWY0O1xuXG4gICAgcGdtID0gJyc7XG4gICAgYXV0byA9ICcnO1xuICAgIHRvdGFsVGVzdHMgPSAwO1xuICAgIG5vdGVib29rQXV0b05vZGVzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBkZWZzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBpID0gZGVmc1tfaV07XG4gICAgICBtYWluID0gaS5tYWluLCBuYW1lID0gaS5uYW1lLCBkZWYgPSBpLmRlZiwgYm9keSA9IGkuYm9keSwgdGVzdHMgPSBpLnRlc3RzO1xuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgYnggPSBib3gobWFpbiwgJ2NvZGVNYWluJywgdHJ1ZSk7XG4gICAgICAgIGJ4LmFwcGVuZENoaWxkKGNvZGVTcGFuKG5hbWUsICdjb2RlTmFtZScpKTtcbiAgICAgICAgYnguYXBwZW5kQ2hpbGQodGV4dE5vZGUoZGVmKSk7XG4gICAgICAgIGJvZCA9IGNvZGVTcGFuKHRleHROb2RlKGJvZHkpLCAnY29kZUJvZHknKTtcbiAgICAgICAgYm9kLmFwcGVuZENoaWxkKHRleHROb2RlKCdcXG4nKSk7XG4gICAgICAgIGJvZC5zZXRBdHRyaWJ1dGUoJ2dlbmVyYXRlZE5MJywgJycpO1xuICAgICAgICBieC5hcHBlbmRDaGlsZChib2QpO1xuICAgICAgICBieC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBldmFsRG9jKGVsKTtcbiAgICAgICAgfSksIHRydWUpO1xuICAgICAgICBtYXJrUGFydGlhbEFwcGxpZXMoYngpO1xuICAgICAgICBhZGREZWZDb250cm9scyhieCk7XG4gICAgICAgIHBnbSArPSBcIlwiICsgbmFtZSArIFwiIFwiICsgZGVmICsgXCIgXCIgKyBib2R5ICsgXCJcXG5cIjtcbiAgICAgIH0gZWxzZSBpZiAobWFpbiAhPSBudWxsKSB7XG4gICAgICAgIGJ4ID0gYm94KG1haW4sICdjb2RlTWFpbkV4cHInLCB0cnVlKTtcbiAgICAgICAgcyA9IGNvZGVTcGFuKHRleHROb2RlKGJvZHkpLCAnY29kZUV4cHInKTtcbiAgICAgICAgcy5zZXRBdHRyaWJ1dGUoJ2dlbmVyYXRlZE5MJywgJycpO1xuICAgICAgICBzLmFwcGVuZENoaWxkKHRleHROb2RlKCdcXG4nKSk7XG4gICAgICAgIGJ4LmFwcGVuZENoaWxkKHMpO1xuICAgICAgICBtYXJrUGFydGlhbEFwcGxpZXMoYngpO1xuICAgICAgICBpZiAoKChfcmVmMyA9IG1haW4ubGVpc3VyZUF1dG8pICE9IG51bGwgPyBfcmVmMy5tb2RlIDogdm9pZCAwKSA9PT0gJ3NpbGVudCcpIHtcbiAgICAgICAgICBhdXRvICs9IFwiXCIgKyBib2R5ICsgXCJcXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoKChfcmVmNCA9IG1haW4ubGVpc3VyZUF1dG8pICE9IG51bGwgPyBfcmVmNC5tb2RlIDogdm9pZCAwKSA9PT0gJ25vdGVib29rJykge1xuICAgICAgICAgICAgbm90ZWJvb2tBdXRvTm9kZXMucHVzaChieCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1ha2VPdXRwdXRCb3goYngpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSB0ZXN0cy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgdGVzdCA9IHRlc3RzW19qXTtcbiAgICAgICAgcmVwbGFjZVJhbmdlKHRlc3QsIG1ha2VUZXN0Qm94KHRlc3QubGVpc3VyZVRlc3QpKTtcbiAgICAgICAgdG90YWxUZXN0cysrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW3BnbSwgYXV0bywgdG90YWxUZXN0cywgbm90ZWJvb2tBdXRvTm9kZXNdO1xuICB9O1xuXG4gIGdldERlZk5hbWUgPSBmdW5jdGlvbihhc3QpIHtcbiAgICBpZiAoYXN0IGluc3RhbmNlb2YgTGVpc3VyZV9hbm5vICYmIGdldEFubm9OYW1lKGFzdCkgPT09ICdkZWZpbml0aW9uJykge1xuICAgICAgcmV0dXJuIGdldEFubm9EYXRhKGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICBnZXRBc3QgPSBmdW5jdGlvbihieCwgZGVmKSB7XG4gICAgdmFyIGRlZk5hbWUsIF9yZWYzO1xuXG4gICAgaWYgKGJ4LmFzdCAhPSBudWxsKSB7XG4gICAgICBwYXRjaEZ1bmNBc3QoYnguYXN0KTtcbiAgICAgIGJ4LnNldEF0dHJpYnV0ZSgnbGVpc3VyZUZ1bmMnLCAoX3JlZjMgPSBieC5hc3QubGVpc3VyZU5hbWUpICE9IG51bGwgPyBfcmVmMyA6ICcnKTtcbiAgICAgIHJldHVybiBieC5hc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZiA9IGRlZiB8fCBieC50ZXh0Q29udGVudDtcbiAgICAgIGRlZk5hbWUgPSBnZXREZWZOYW1lKHJ1bk1vbmFkKHJ6KExfbmV3UGFyc2VMaW5lKShseihOaWwpKShseihkZWYpKSkpO1xuICAgICAgc2V0QXN0KGJ4LCAoZGVmTmFtZSA/IHtcbiAgICAgICAgbGVpc3VyZU5hbWU6IGRlZk5hbWUsXG4gICAgICAgIGxlaXN1cmVTb3VyY2U6IGRlZlxuICAgICAgfSA6IHt9KSk7XG4gICAgICByZXR1cm4gYnguYXN0O1xuICAgIH1cbiAgfTtcblxuICBzZXRBc3QgPSBmdW5jdGlvbihieCwgYXN0KSB7XG4gICAgYnguYXN0ID0gYXN0O1xuICAgIHJldHVybiBwYXRjaEZ1bmNBc3QoYXN0KTtcbiAgfTtcblxuICBwYXRjaEZ1bmNBc3QgPSBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgcGFyZW50O1xuXG4gICAgaWYgKChhc3QgIT0gbnVsbCA/IGFzdC5sZWlzdXJlTmFtZSA6IHZvaWQgMCkgIT0gbnVsbCkge1xuICAgICAgcGFyZW50ID0gd2luZG93W25hbWVTdWIoYXN0LmxlaXN1cmVOYW1lKV07XG4gICAgICBpZiAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50LmFzdCA9IGFzdDtcbiAgICAgICAgcGFyZW50LnNyYyA9IGFzdC5sZWlzdXJlU291cmNlO1xuICAgICAgICByZXR1cm4gdXBkYXRlKFwiYXN0LVwiICsgYXN0LmxlaXN1cmVOYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgbWFya1BhcnRpYWxBcHBsaWVzID0gZnVuY3Rpb24oYngsIGRlZikge307XG5cbiAgdGV4dE5vZGUgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xuICB9O1xuXG4gIG5vZGVGb3IgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiB0ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHRleHROb2RlKHRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gIH07XG5cbiAgZXZhbE91dHB1dCA9IGZ1bmN0aW9uKGV4Qm94LCBub2ZvY3VzLCBjb250KSB7XG4gICAgdmFyIHNlbGVjdG9yLCBzdG9wVXBkYXRlcywgdXBkYXRlU2VsZWN0b3IsIF9yZWYzO1xuXG4gICAgZXhCb3ggPSBnZXRCb3goZXhCb3gpO1xuICAgIGlmICghbm9mb2N1cykge1xuICAgICAgZm9jdXNCb3goZXhCb3gpO1xuICAgIH1cbiAgICBjbGVhbk91dHB1dChleEJveCwgdHJ1ZSk7XG4gICAgc2VsZWN0b3IgPSBmaW5kVXBkYXRlU2VsZWN0b3IoZXhCb3guc291cmNlKTtcbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIGV4Qm94LnNldEF0dHJpYnV0ZSgnbGVpc3VyZVVwZGF0ZScsIHNlbGVjdG9yKTtcbiAgICB9XG4gICAgbWFrZU91dHB1dENvbnRyb2xzKGV4Qm94KTtcbiAgICBfcmVmMyA9IGdldEVsZW1lbnRzKGV4Qm94LmZpcnN0Q2hpbGQsIFsnY2hvb3NlVXBkYXRlJywgJ3N0b3BVcGRhdGVzJ10pLCB1cGRhdGVTZWxlY3RvciA9IF9yZWYzWzBdLCBzdG9wVXBkYXRlcyA9IF9yZWYzWzFdO1xuICAgIHVwZGF0ZVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgcmV0dXJuIHNldFVwZGF0ZShleEJveCwgZXZ0LnRhcmdldC52YWx1ZSwgdHJ1ZSk7XG4gICAgfSk7XG4gICAgdXBkYXRlU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGMgPSBlLmNoYXJDb2RlIHx8IGUua2V5Q29kZSB8fCBlLndoaWNoO1xuICAgICAgaWYgKGMgPT09IEVOVEVSKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZVNlbGVjdG9yLmJsdXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB1cGRhdGVTZWxlY3Rvci52YWx1ZSA9IChleEJveC5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVVcGRhdGUnKSkgfHwgJyc7XG4gICAgZXhCb3gudXBkYXRlU2VsZWN0b3IgPSB1cGRhdGVTZWxlY3RvcjtcbiAgICByZXR1cm4gZXZhbEJveChleEJveC5zb3VyY2UsIGV4Qm94LCBjb250KTtcbiAgfTtcblxuICBmaW5kVXBkYXRlU2VsZWN0b3IgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgZGVmLCBkZWZUeXBlLCBsZWFkaW5nLCBtYXRjaGVkLCBuYW1lLCB1O1xuXG4gICAgaWYgKGRlZiA9IGJveC50ZXh0Q29udGVudC5tYXRjaChyeihMX2RlZlBhdCkpKSB7XG4gICAgICBtYXRjaGVkID0gZGVmWzBdLCBsZWFkaW5nID0gZGVmWzFdLCBuYW1lID0gZGVmWzJdLCBkZWZUeXBlID0gZGVmWzNdO1xuICAgICAgaWYgKHUgPSBsZWFkaW5nLm1hdGNoKHVwZGF0ZVBhdCkpIHtcbiAgICAgICAgcmV0dXJuIHVbM107XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGdldEV4cHJTb3VyY2UgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgYiwgcztcblxuICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgYiA9IGdldEJveChzLmZvY3VzTm9kZSk7XG4gICAgaWYgKGIgIT09IGJveCB8fCAhcy5yYW5nZUNvdW50IHx8IHMuZ2V0UmFuZ2VBdCgwKS5jb2xsYXBzZWQpIHtcbiAgICAgIHJldHVybiBib3gudGV4dENvbnRlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXRSYW5nZVRleHQocy5nZXRSYW5nZUF0KDApKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0VXBkYXRlID0gZnVuY3Rpb24oZWwsIGNoYW5uZWwsIHByZXNlcnZlU291cmNlKSB7XG4gICAgdmFyIGFzdCwgZGVmLCBkZWZUeXBlLCBpbmRleCwgbGVhZGluZywgbWF0Y2hlZCwgbmFtZSwgciwgdHh0LCB1O1xuXG4gICAgZWwuc2V0QXR0cmlidXRlKCdsZWlzdXJlVXBkYXRlJywgY2hhbm5lbCk7XG4gICAgaWYgKGNoYW5uZWwpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3VpLXN0YXRlLWhpZ2hsaWdodCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCd1aS1zdGF0ZS1oaWdobGlnaHQnKTtcbiAgICB9XG4gICAgYXN0ID0gZ2V0QXN0KGVsLnNvdXJjZSk7XG4gICAgdHh0ID0gZWwuc291cmNlLnRleHRDb250ZW50O1xuICAgIGlmICghcHJlc2VydmVTb3VyY2UgJiYgKGRlZiA9IHR4dC5tYXRjaChyeihMX2RlZlBhdCkpKSkge1xuICAgICAgbWF0Y2hlZCA9IGRlZlswXSwgbGVhZGluZyA9IGRlZlsxXSwgbmFtZSA9IGRlZlsyXSwgZGVmVHlwZSA9IGRlZlszXTtcbiAgICAgIGluZGV4ID0gZGVmLmluZGV4O1xuICAgICAgaWYgKHUgPSBsZWFkaW5nLm1hdGNoKHVwZGF0ZVBhdCkpIHtcbiAgICAgICAgaW5kZXggKz0gdS5pbmRleCArIHVbMV0ubGVuZ3RoICsgdVsyXS5sZW5ndGg7XG4gICAgICAgIHIgPSBtYWtlUmFuZ2UoZWwuc291cmNlLCBpbmRleCwgaW5kZXggKyB1WzNdLmxlbmd0aCk7XG4gICAgICAgIHIuZGVsZXRlQ29udGVudHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHIgPSBtYWtlUmFuZ2UoZWwuc291cmNlLCBpbmRleCArIGxlYWRpbmcubGVuZ3RoLCBpbmRleCArIGxlYWRpbmcubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHIuaW5zZXJ0Tm9kZSh0ZXh0Tm9kZShjaGFubmVsKSk7XG4gICAgICByZXR1cm4gZWwuc291cmNlLm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfTtcblxuICBoYXNNb25hZE91dHB1dCA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBfcmVmMywgX3JlZjQ7XG5cbiAgICByZXR1cm4gKChfcmVmMyA9IGJveC5maXJzdEVsZW1lbnRDaGlsZCkgIT0gbnVsbCA/IChfcmVmNCA9IF9yZWYzLm5leHRFbGVtZW50U2libGluZykgIT0gbnVsbCA/IF9yZWY0Lm5leHRFbGVtZW50U2libGluZyA6IHZvaWQgMCA6IHZvaWQgMCkgIT0gbnVsbDtcbiAgfTtcblxuICBjaGVja0hpZGVTb3VyY2UgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgaHM7XG5cbiAgICBpZiAoIWJveC5oaWRlT3V0cHV0U291cmNlICYmIGhhc01vbmFkT3V0cHV0KGJveCkpIHtcbiAgICAgIGJveC5oaWRlT3V0cHV0U291cmNlID0gdHJ1ZTtcbiAgICAgIGhzID0gY3JlYXRlTm9kZShcIjxidXR0b24gY2xhc3M9J2VkaXRUb2dnbGUnIHN0eWxlPSdmbG9hdDpyaWdodCc+PC9idXR0b24+XCIpO1xuICAgICAgbWFya3VwQnV0dG9uKGhzKTtcbiAgICAgIGhzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0b2dnbGVFZGl0KGhzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJveC5maXJzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZChocyk7XG4gICAgfVxuICB9O1xuXG4gIG1ha2VPdXRwdXRDb250cm9scyA9IGZ1bmN0aW9uKGV4Qm94KSB7XG4gICAgaWYgKGV4Qm94LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCA9PT0gZXhCb3guZmlyc3RDaGlsZC5sYXN0Q2hpbGQpIHtcbiAgICAgIGV4Qm94LmZpcnN0Q2hpbGQuaW5zZXJ0QmVmb3JlKGNyZWF0ZUZyYWdtZW50KFwiPGJ1dHRvbiBvbmNsaWNrPSdOb3RlYm9vay5jbGVhck91dHB1dEJveCh0aGlzKSc+WDwvYnV0dG9uPlwiKSwgZXhCb3guZmlyc3RDaGlsZC5maXJzdENoaWxkKTtcbiAgICAgIGV4Qm94LmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoY3JlYXRlRnJhZ21lbnQoXCI8YnV0dG9uIG9uY2xpY2s9J05vdGVib29rLm1ha2VUZXN0Q2FzZSh0aGlzKScgbGVpc3VyZUlkPSdtYWtlVGVzdENhc2UnPk1ha2UgdGVzdFxcbmNhc2U8L2J1dHRvbj48Yj5VcGRhdGU6IDwvYj48aW5wdXQgdHlwZT0ndGV4dCdcXG5wbGFjZWhvbGRlcj0nQ2xpY2sgZm9yIHVwZGF0aW5nJyBsaXN0PSdjaGFubmVsTGlzdCcgbGVpc3VyZUlkPSdjaG9vc2VVcGRhdGUnPjwvaW5wdXQ+PGJ1dHRvblxcbm9uY2xpY2s9J05vdGVib29rLmNsZWFyVXBkYXRlcyh0aGlzKScgbGVpc3VyZUlkPSdzdG9wVXBkYXRlcyc+U3RvcCBVcGRhdGVzPC9idXR0b24+XCIpKTtcbiAgICAgIG1hcmt1cEJ1dHRvbnMoZXhCb3gpO1xuICAgICAgcmV0dXJuIGV4Qm94LmNsYXNzTGlzdC5hZGQoJ2ZhdENvbnRyb2xzJyk7XG4gICAgfVxuICB9O1xuXG4gIHNob3dPdXRwdXRTb3VyY2UgPSBmdW5jdGlvbihvdXRwdXQpIHtcbiAgICBvdXRwdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkaW5nU291cmNlJyk7XG4gICAgcmV0dXJuIG91dHB1dC5zb3VyY2Uuc3R5bGUuZGlzcGxheSA9ICcnO1xuICB9O1xuXG4gIGhpZGVPdXRwdXRTb3VyY2UgPSBmdW5jdGlvbihvdXRwdXQpIHtcbiAgICBjb25zb2xlLmxvZyhcIkhJREU6IFwiICsgb3V0cHV0KTtcbiAgICBvdXRwdXQuY2xhc3NMaXN0LmFkZCgnaGlkaW5nU291cmNlJyk7XG4gICAgcmV0dXJuIG91dHB1dC5zb3VyY2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfTtcblxuICB0b2dnbGVFZGl0ID0gZnVuY3Rpb24odG9nZ2xlQnV0dG9uKSB7XG4gICAgdmFyIG91dHB1dDtcblxuICAgIG91dHB1dCA9IGdldEJveCh0b2dnbGVCdXR0b24pO1xuICAgIGlmIChvdXRwdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRpbmdTb3VyY2UnKSkge1xuICAgICAgcmV0dXJuIHNob3dPdXRwdXRTb3VyY2Uob3V0cHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhpZGVPdXRwdXRTb3VyY2Uob3V0cHV0KTtcbiAgICB9XG4gIH07XG5cbiAgY2xlYXJVcGRhdGVzID0gZnVuY3Rpb24od2lkZ2V0LCBwcmVzZXJ2ZVNvdXJjZSkge1xuICAgIHZhciBleEJveDtcblxuICAgIGV4Qm94ID0gZ2V0Qm94KHdpZGdldCk7XG4gICAgZXhCb3gudXBkYXRlU2VsZWN0b3IudmFsdWUgPSAnJztcbiAgICByZXR1cm4gc2V0VXBkYXRlKGV4Qm94LCAnJywgcHJlc2VydmVTb3VyY2UpO1xuICB9O1xuXG4gIHVwZGF0ZSA9IGZ1bmN0aW9uKHR5cGUsIGVudikge1xuICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjMsIF9yZXN1bHRzO1xuXG4gICAgZW52ID0gZW52ICE9IG51bGwgPyBlbnYgOiBkZWZhdWx0RW52O1xuICAgIF9yZWYzID0gZW52Lm93bmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbGVpc3VyZVVwZGF0ZX49J1wiICsgdHlwZSArIFwiJ11cIik7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjNbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChldmFsT3V0cHV0KG5vZGUsIHRydWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIGNsZWFyT3V0cHV0Qm94ID0gZnVuY3Rpb24oZXhCb3gpIHtcbiAgICBjbGVhclVwZGF0ZXMoZXhCb3gsIHRydWUpO1xuICAgIHJldHVybiBjbGVhbk91dHB1dChleEJveCk7XG4gIH07XG5cbiAgY2xlYW5PdXRwdXQgPSBmdW5jdGlvbihleEJveCwgcHJlc2VydmVDb250cm9scykge1xuICAgIHZhciBmYywgX3Jlc3VsdHM7XG5cbiAgICBleEJveCA9IGdldEJveChleEJveCk7XG4gICAgZXhCb3guY2xhc3NMaXN0LnJlbW92ZSgnZmF0Q29udHJvbHMnKTtcbiAgICBpZiAoIXByZXNlcnZlQ29udHJvbHMpIHtcbiAgICAgIGV4Qm94LmhpZGVPdXRwdXRTb3VyY2UgPSBudWxsO1xuICAgICAgZmMgPSBleEJveC5maXJzdENoaWxkO1xuICAgICAgZmMucmVtb3ZlQ2hpbGQoZmMuZmlyc3RDaGlsZCk7XG4gICAgICB3aGlsZSAoZmMuZmlyc3RDaGlsZCAhPT0gZmMubGFzdENoaWxkKSB7XG4gICAgICAgIGZjLnJlbW92ZUNoaWxkKGZjLmxhc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICAgIF9yZXN1bHRzID0gW107XG4gICAgd2hpbGUgKGV4Qm94LmZpcnN0Q2hpbGQgIT09IGV4Qm94Lmxhc3RDaGlsZCkge1xuICAgICAgX3Jlc3VsdHMucHVzaChleEJveC5yZW1vdmVDaGlsZChleEJveC5sYXN0Q2hpbGQpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIG1ha2VUZXN0Q2FzZSA9IGZ1bmN0aW9uKGV4Qm94KSB7XG4gICAgdmFyIGJveCwgb3V0cHV0LCBzb3VyY2UsIHRlc3Q7XG5cbiAgICBvdXRwdXQgPSBnZXRCb3goZXhCb3gpO1xuICAgIHNvdXJjZSA9IG91dHB1dC5zb3VyY2U7XG4gICAgdGVzdCA9IHtcbiAgICAgIGV4cHI6IHNvdXJjZS50ZXh0Q29udGVudC50cmltKCksXG4gICAgICBleHBlY3RlZDogZXNjYXBlSHRtbChQYXJzZS5wcmludChvdXRwdXQucmVzdWx0KSlcbiAgICB9O1xuICAgIGJveCA9IG1ha2VUZXN0Qm94KHRlc3QsIG93bmVyKGV4Qm94KSk7XG4gICAgc291cmNlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJveCwgc291cmNlKTtcbiAgICByZW1vdmUoc291cmNlKTtcbiAgICByZW1vdmUob3V0cHV0KTtcbiAgICBib3gucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGV4dE5vZGUoJ1xcdUZFRkYnKSwgYm94KTtcbiAgICBib3gucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGV4dE5vZGUoJ1xcdUZFRkYnKSwgYm94Lm5leHRTaWJsaW5nKTtcbiAgICBpZiAob3duZXIoYm94KS5hdXRvcnVuU3RhdGUpIHtcbiAgICAgIHJldHVybiBjbGlja1Rlc3QoYm94KTtcbiAgICB9XG4gIH07XG5cbiAgbWFrZVRlc3RCb3ggPSBmdW5jdGlvbih0ZXN0LCBvd25lciwgc3JjKSB7XG4gICAgdmFyIGJ4LCBzO1xuXG4gICAgc3JjID0gc3JjICE9IG51bGwgPyBzcmMgOiBcIiNAdGVzdCBcIiArIChKU09OLnN0cmluZ2lmeSh0ZXN0LmV4cHIpKSArIFwiXFxuI0BleHBlY3RlZCBcIiArIChKU09OLnN0cmluZ2lmeSh0ZXN0LmV4cGVjdGVkKSk7XG4gICAgcyA9IGNvZGVTcGFuKHNyYywgJ2NvZGVUZXN0Jyk7XG4gICAgcy5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSgnXFxuJykpO1xuICAgIHMuc2V0QXR0cmlidXRlKCdnZW5lcmF0ZWROTCcsICcnKTtcbiAgICBieCA9IGNvZGVCb3goJ2NvZGVNYWluVGVzdCcpO1xuICAgIGJ4LnRlc3RTcmMgPSBzO1xuICAgIGJ4LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29kZU1haW5UZXN0IG5vdHJ1bicpO1xuICAgIGJ4LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ2ZhbHNlJyk7XG4gICAgYnguYXBwZW5kQ2hpbGQocyk7XG4gICAgYnguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY2xpY2tUZXN0KGJ4KTtcbiAgICB9KSwgdHJ1ZSk7XG4gICAgYngudGVzdCA9IHRlc3Q7XG4gICAgcmV0dXJuIGJ4O1xuICB9O1xuXG4gIGNsaWNrVGVzdCA9IGZ1bmN0aW9uKGJ4KSB7XG4gICAgdmFyIGV4cHJCb3gsIHIsIHNwO1xuXG4gICAgaWYgKGJ4LmNsYXNzTGlzdC5jb250YWlucygnbm90cnVuJykpIHtcbiAgICAgIHJldHVybiBydW5UZXN0KGJ4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICByLnNldFN0YXJ0QmVmb3JlKGJ4KTtcbiAgICAgIHIuc2V0RW5kQWZ0ZXIoYngpO1xuICAgICAgci5kZWxldGVDb250ZW50cygpO1xuICAgICAgc3AgPSBjb2RlU3BhbihieC50ZXN0LmV4cHIsICdjb2RlRXhwcicpO1xuICAgICAgc3Auc2V0QXR0cmlidXRlKCdnZW5lcmF0ZWROTCcsICcnKTtcbiAgICAgIGV4cHJCb3ggPSBib3gociwgJ2NvZGVNYWluRXhwcicsIHRydWUpO1xuICAgICAgZXhwckJveC5hcHBlbmRDaGlsZChzcCk7XG4gICAgICByZXR1cm4gbWFrZU91dHB1dEJveChleHByQm94KTtcbiAgICB9XG4gIH07XG5cbiAgcnVuVGVzdCA9IGZ1bmN0aW9uKGJ4KSB7XG4gICAgdmFyIHBhc3NlZCwgdGVzdDtcblxuICAgIHRlc3QgPSBieC50ZXN0O1xuICAgIHBhc3NlZCA9IHRydWU7XG4gICAgcHJvY2Vzc0xpbmUocHJlcEV4cHIodGVzdC5leHByKSwge1xuICAgICAgdmFsdWVzOiB7fSxcbiAgICAgIHJlcXVpcmU6IHJlcSxcbiAgICAgIHdyaXRlOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKHN0cik7XG4gICAgICB9LFxuICAgICAgZGVidWc6IGRlYnVnLFxuICAgICAgcHJvbXB0OiBmdW5jdGlvbihtc2csIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQobnVsbCk7XG4gICAgICB9LFxuICAgICAgcHJvY2Vzc1Jlc3VsdDogZnVuY3Rpb24ocmVzdWx0LCBhc3QpIHtcbiAgICAgICAgcmV0dXJuIHBhc3NlZCA9IHNob3dSZXN1bHQoYngsIGVzY2FwZUh0bWwoU3RyaW5nKHJlc3VsdCkpLCBlc2NhcGVIdG1sKHRlc3QuZXhwZWN0ZWQpKTtcbiAgICAgIH0sXG4gICAgICBlcnI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFzc2VkID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgcHJlc2VudFZhbHVlOiBmdW5jdGlvbih4KSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgICAgfVxuICAgIH0sIGlkZW50aXR5KTtcbiAgICByZXR1cm4gcGFzc2VkO1xuICB9O1xuXG4gIHNob3dSZXN1bHQgPSBmdW5jdGlvbihieCwgYWN0dWFsLCBleHBlY3RlZCkge1xuICAgIHZhciBjbDtcblxuICAgIGNsID0gYnguY2xhc3NMaXN0O1xuICAgIGNsLnJlbW92ZSgnbm90cnVuJyk7XG4gICAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICAgIGNsLnJlbW92ZSgnZmFpbGVkJyk7XG4gICAgICBjbC5hZGQoJ3Bhc3NlZCcpO1xuICAgICAgYngudGVzdFNyYy5pbm5lckhUTUwgPSBcIiNAdGVzdCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cHIpKSArIFwiXFxuI0BleHBlY3RlZCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cGVjdGVkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsLnJlbW92ZSgncGFzc2VkJyk7XG4gICAgICBjbC5hZGQoJ2ZhaWxlZCcpO1xuICAgICAgYngudGVzdFNyYy5pbm5lckhUTUwgPSBcIiNAdGVzdCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cHIpKSArIFwiXFxuI0BleHBlY3RlZCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cGVjdGVkKSkgKyBcIlxcbiNAcmVzdWx0IFwiICsgKEpTT04uc3RyaW5naWZ5KGFjdHVhbCkpO1xuICAgICAgY29uc29sZS5sb2coXCJleHBlY3RlZCA8XCIgKyBleHBlY3RlZCArIFwiPiBidXQgZ290IDxcIiArIGFjdHVhbCArIFwiPlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdHVhbCA9PT0gZXhwZWN0ZWQ7XG4gIH07XG5cbiAgcHJlcEV4cHIgPSBmdW5jdGlvbih0eHQpIHtcbiAgICByZXR1cm4gdHh0O1xuICB9O1xuXG4gIGVudkZvciA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBlbnYsIGV4Qm94LCB3aWRnZXQ7XG5cbiAgICBleEJveCA9IGdldEJveChib3gpO1xuICAgIHdpZGdldCA9IG51bGw7XG4gICAgZW52ID0ge1xuICAgICAgZmlsZVNldHRpbmdzOiB7fSxcbiAgICAgIGRlYnVnOiBkZWJ1ZyxcbiAgICAgIGZpbmlzaGVkRXZlbnQ6IGZ1bmN0aW9uKGV2dCwgY2hhbm5lbCkge1xuICAgICAgICByZXR1cm4gdXBkYXRlKGNoYW5uZWwgIT0gbnVsbCA/IGNoYW5uZWwgOiAnYXBwJywgdGhpcyk7XG4gICAgICB9LFxuICAgICAgb3duZXI6IG93bmVyKGJveCksXG4gICAgICBib3g6IGJveCxcbiAgICAgIHJlcXVpcmU6IHJlcSxcbiAgICAgIHdyaXRlOiBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgdmFyIGRpdjtcblxuICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ291dHB1dERpdicpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gXCJcIiArIG1zZyArIFwiXFxuXCI7XG4gICAgICAgIGV4Qm94LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIGNoZWNrSGlkZVNvdXJjZShleEJveCk7XG4gICAgICAgIHJldHVybiBtYXJrdXBCdXR0b25zKGV4Qm94KTtcbiAgICAgIH0sXG4gICAgICBnZXRXaWRnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXdpZGdldCkge1xuICAgICAgICAgIHdpZGdldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7XG4gICAgICAgICAgZXhCb3guYXBwZW5kQ2hpbGQod2lkZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2lkZ2V0O1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3lXaWRnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAod2lkZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlbW92ZSh3aWRnZXQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvbXB0OiBmdW5jdGlvbihtc2csIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQod2luZG93LnByb21wdChtc2cpKTtcbiAgICAgIH0sXG4gICAgICBwcm9jZXNzUmVzdWx0OiBmdW5jdGlvbihyZXN1bHQsIGFzdCkge1xuICAgICAgICBib3gucmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm4gc2V0QXN0KGJveCwgYXN0KTtcbiAgICAgIH0sXG4gICAgICBwcmVzZW50VmFsdWU6IHByZXNlbnRWYWx1ZSxcbiAgICAgIGVycjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIHZhciBidG4sIF9yZWYzO1xuXG4gICAgICAgIGJ0biA9IGJveC5xdWVyeVNlbGVjdG9yKCdbbGVpc3VyZUlkPVwibWFrZVRlc3RDYXNlXCJdJyk7XG4gICAgICAgIGlmIChidG4pIHtcbiAgICAgICAgICByZW1vdmUoYnRuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy53cml0ZShcIjxkaXYgY2xhc3M9J2Vycm9yRGl2Jz5cIiArIGVzY2FwZUh0bWwoXCJFUlJPUjogXCIgKyAoZXJyLmxlaXN1cmVDb250ZXh0ID8gXCJcIiArIGVyciArIFwiOlxcblwiICsgKGxlaXN1cmVDb250ZXh0U3RyaW5nKGVycikpICsgXCJcXG5cIiA6ICcnKSArICgoX3JlZjMgPSBlcnIuc3RhY2spICE9IG51bGwgPyBfcmVmMyA6IGVycikpICsgXCI8L2Rpdj5cIik7XG4gICAgICB9LFxuICAgICAgY2xlYW51cDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveVdpZGdldCgpO1xuICAgICAgICBpZiAocm9vdC5sYXN0RW52ID09PSBlbnYpIHtcbiAgICAgICAgICByZXR1cm4gcm9vdC5sYXN0RW52ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZW52Ll9fcHJvdG9fXyA9IGRlZmF1bHRFbnY7XG4gICAgZW52LmZpbGVTZXR0aW5ncy51cmkgPSBuZXcgVVJJKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xuICAgIHJvb3QubGFzdEVudiA9IGVudjtcbiAgICByZXR1cm4gZW52O1xuICB9O1xuXG4gIGxlaXN1cmVDb250ZXh0U3RyaW5nID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgdmFyIGZ1bmMsIG9mZnNldDtcblxuICAgIHJldHVybiAoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmMywgX3JlZjQsIF9yZXN1bHRzO1xuXG4gICAgICBfcmVmMyA9IGVyci5sZWlzdXJlQ29udGV4dC50b0FycmF5KCk7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBfcmVmNCA9IF9yZWYzW19pXSwgZnVuYyA9IF9yZWY0WzBdLCBvZmZzZXQgPSBfcmVmNFsxXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChsaW5rU291cmNlKGZ1bmMsIG9mZnNldCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH0pKCkpLmpvaW4oJ1xcbicpO1xuICB9O1xuXG4gIGxpbmtTb3VyY2UgPSBmdW5jdGlvbihmdW5jTmFtZSwgb2Zmc2V0KSB7fTtcblxuICBzaG93U291cmNlID0gZnVuY3Rpb24oZnVuY05hbWUsIG9mZnNldCkge307XG5cbiAgbWFrZU91dHB1dEJveCA9IGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgIHZhciBjbCwgbm9kZSwgX2ksIF9sZW4sIF9yZWYzO1xuXG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlT3V0cHV0JywgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlJywgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlQm94JywgJycpO1xuICAgIF9yZWYzID0gYm94Q2xhc3Nlcy5vdXRwdXQ7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgY2wgPSBfcmVmM1tfaV07XG4gICAgICBub2RlLmNsYXNzTGlzdC5hZGQoY2wpO1xuICAgIH1cbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29udGVudEVkaXRhYmxlJywgJ2ZhbHNlJyk7XG4gICAgbm9kZS5zb3VyY2UgPSBzb3VyY2U7XG4gICAgc291cmNlLm91dHB1dCA9IG5vZGU7XG4gICAgbm9kZS5pbm5lckhUTUwgPSBcIjxkaXYgY2xhc3M9J2NvbnRyb2xzJz48YnV0dG9uIG9uY2xpY2s9J05vdGVib29rLmV2YWxPdXRwdXQodGhpcyknPi0mZ3Q7PC9idXR0b24+PC9kaXY+XCI7XG4gICAgbWFya3VwQnV0dG9ucyhub2RlKTtcbiAgICBzb3VyY2UucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgc291cmNlLm5leHRTaWJsaW5nKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBjb2RlU3BhbiA9IGZ1bmN0aW9uKHRleHQsIGJveFR5cGUpIHtcbiAgICB2YXIgbm9kZTtcblxuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoYm94VHlwZSwgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlJywgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjbGFzcycsIGJveFR5cGUpO1xuICAgIGlmICh0ZXh0KSB7XG4gICAgICBub2RlLmFwcGVuZENoaWxkKG5vZGVGb3IodGV4dCkpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBjb2RlQm94ID0gZnVuY3Rpb24oYm94VHlwZSkge1xuICAgIHZhciBub2RlO1xuXG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFkZEJveENsYXNzZXMobm9kZSwgYm94VHlwZSk7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ0xlaXN1cmVCb3gnLCAnJyk7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ0xlaXN1cmUnLCAnJyk7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24oZSkge1xuICAgICAgcmV0dXJuIGNoZWNrTXV0YXRlRnJvbU1vZGlmaWNhdGlvbihlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBib3ggPSBmdW5jdGlvbihyYW5nZSwgYm94VHlwZSwgZW1wdHkpIHtcbiAgICB2YXIgbm9kZTtcblxuICAgIG5vZGUgPSBjb2RlQm94KGJveFR5cGUpO1xuICAgIGlmIChlbXB0eSkge1xuICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5hcHBlbmRDaGlsZChyYW5nZS5leHRyYWN0Q29udGVudHMoKSk7XG4gICAgfVxuICAgIHJhbmdlLmluc2VydE5vZGUobm9kZSk7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgbGluZVBhdCA9IG5ldyBSZWdFeHAoXCIoXCIgKyAocnooTF9saW5lUGF0KS5zb3VyY2UpICsgXCIpXCIpO1xuXG4gIGZpbmREZWZzID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgZGVmLCByYW5nZXMsIHJlc3QsIHJuZywgdHh0O1xuXG4gICAgdHh0ID0gZWwudGV4dENvbnRlbnQ7XG4gICAgcmVzdCA9IHR4dDtcbiAgICByYW5nZXMgPSBbXTtcbiAgICB3aGlsZSAoKGRlZiA9IHJlc3QubWF0Y2gocnooTF91bmFuY2hvcmVkRGVmUGF0KSkpICYmIGRlZlsxXS5sZW5ndGggIT09IHJlc3QubGVuZ3RoKSB7XG4gICAgICBybmcgPSBnZXRSYW5nZXMoZWwsIHR4dCwgcmVzdCwgZGVmLCB0eHQubGVuZ3RoIC0gcmVzdC5sZW5ndGgpO1xuICAgICAgaWYgKHJuZykge1xuICAgICAgICByZXN0ID0gcm5nLm5leHQ7XG4gICAgICAgIGlmIChybmcpIHtcbiAgICAgICAgICByYW5nZXMucHVzaChybmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlcztcbiAgfTtcblxuICB0ZXN0UGF0ID0gLygjQHRlc3QoW15cXG5dKilcXG4jQGV4cGVjdGVkKFteXFxuXSopKVxcbi9tO1xuXG4gIGdldFJhbmdlcyA9IGZ1bmN0aW9uKGVsLCB0eHQsIHJlc3QsIGRlZiwgcmVzdE9mZikge1xuICAgIHZhciBib2R5LCBib2R5U3RhcnQsIGRlZlR5cGUsIGVuZFBhdCwgZXgsIGV4RW5kLCBsZWFkT2ZmLCBsZWFkaW5nLCBsZWFkaW5nU3BhY2VzLCBsbSwgbSwgbTIsIG1haW5FbmQsIG1haW5TdGFydCwgbWF0Y2hTdGFydCwgbWF0Y2hlZCwgbmFtZSwgbmFtZUVuZCwgbmFtZVJhdywgbmV4dCwgb3V0ZXJSYW5nZSwgciwgcmVzdDEsIHQsIHRPZmYsIHRlc3RzLCB0ZXh0U3RhcnQsIF9yZWYzLCBfcmVmNCwgX3JlZjUsIF9yZWY2O1xuXG4gICAgX3JlZjMgPSBtID0gZGVmLCBtYXRjaGVkID0gX3JlZjNbMF0sIGxlYWRpbmcgPSBfcmVmM1sxXSwgbmFtZVJhdyA9IF9yZWYzWzJdLCBkZWZUeXBlID0gX3JlZjNbM107XG4gICAgaWYgKCFyZXN0LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChtID09IG51bGwpIHtcbiAgICAgIHJldHVybiBbbWFrZVJhbmdlKGVsLCByZXN0T2ZmLCB0eHQubGVuZ3RoKSwgbnVsbCwgbnVsbCwgW10sICcnXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGVzdHMgPSBbXTtcbiAgICAgIG1hdGNoU3RhcnQgPSByZXN0T2ZmICsgbS5pbmRleDtcbiAgICAgIGlmIChkZWZUeXBlID09IG51bGwpIHtcbiAgICAgICAgbmFtZSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKG5hbWVSYXdbMF0gPT09ICcgJykge1xuICAgICAgICBuYW1lID0gbnVsbDtcbiAgICAgICAgZGVmVHlwZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuYW1lID0gbmFtZVJhdy50cmltKCkgfHwgbnVsbDtcbiAgICAgIH1cbiAgICAgIHJlc3QxID0gcmVzdC5zdWJzdHJpbmcoKGRlZlR5cGUgPyBtYXRjaGVkIDogbGVhZGluZykubGVuZ3RoKTtcbiAgICAgIGVuZFBhdCA9IHJlc3QxLm1hdGNoKC9cXG4rW15cXHNdfFxcbj8kLyk7XG4gICAgICBuZXh0ID0gZW5kUGF0ID8gcmVzdDEuc3Vic3RyaW5nKGVuZFBhdC5pbmRleCkgOiByZXN0MTtcbiAgICAgIG1haW5FbmQgPSB0eHQubGVuZ3RoIC0gbmV4dC5sZW5ndGg7XG4gICAgICB0ID0gbGVhZGluZztcbiAgICAgIGxlYWRPZmYgPSB0T2ZmID0gcmVzdE9mZjtcbiAgICAgIHdoaWxlIChtMiA9IHQubWF0Y2godGVzdFBhdCkpIHtcbiAgICAgICAgciA9IG1ha2VSYW5nZShlbCwgdE9mZiArIG0yLmluZGV4LCB0T2ZmICsgbTIuaW5kZXggKyBtMlsxXS5sZW5ndGgpO1xuICAgICAgICByLmxlaXN1cmVUZXN0ID0ge1xuICAgICAgICAgIGV4cHI6IEpTT04ucGFyc2UobTJbMl0pLFxuICAgICAgICAgIGV4cGVjdGVkOiBKU09OLnBhcnNlKG0yWzNdKVxuICAgICAgICB9O1xuICAgICAgICB0ZXN0cy5wdXNoKHIpO1xuICAgICAgICB0T2ZmICs9IG0yLmluZGV4ICsgbTJbMV0ubGVuZ3RoO1xuICAgICAgICB0ID0gbGVhZGluZy5zdWJzdHJpbmcodE9mZiAtIGxlYWRPZmYpO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgbWFpblN0YXJ0ID0gbWF0Y2hTdGFydCArICgoX3JlZjQgPSBsZWFkaW5nICE9IG51bGwgPyBsZWFkaW5nLmxlbmd0aCA6IHZvaWQgMCkgIT0gbnVsbCA/IF9yZWY0IDogMCk7XG4gICAgICAgIG5hbWVFbmQgPSBtYWluU3RhcnQgKyBuYW1lLmxlbmd0aDtcbiAgICAgICAgbGVhZGluZ1NwYWNlcyA9IChyZXN0MS5tYXRjaCgvXlxccyovKSlbMF0ubGVuZ3RoO1xuICAgICAgICBib2R5U3RhcnQgPSB0eHQubGVuZ3RoIC0gKHJlc3QxLmxlbmd0aCAtIGxlYWRpbmdTcGFjZXMpO1xuICAgICAgICBvdXRlclJhbmdlID0gbWFrZVJhbmdlKGVsLCBtYWluU3RhcnQsIG1haW5FbmQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1haW46IG91dGVyUmFuZ2UsXG4gICAgICAgICAgbmFtZTogdHh0LnN1YnN0cmluZyhtYWluU3RhcnQsIG5hbWVFbmQpLFxuICAgICAgICAgIGRlZjogZGVmVHlwZSxcbiAgICAgICAgICBib2R5OiB0eHQuc3Vic3RyaW5nKGJvZHlTdGFydCwgbWFpbkVuZCksXG4gICAgICAgICAgdGVzdHM6IHRlc3RzLFxuICAgICAgICAgIG5leHQ6IG5leHRcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1haW5TdGFydCA9IGRlZlR5cGUgPT09ICc9JyA/IHJlc3RPZmYgKyBtLmluZGV4ICsgbVswXS5sZW5ndGggOiBtYXRjaFN0YXJ0ICsgKChfcmVmNSA9IGxlYWRpbmcgIT0gbnVsbCA/IGxlYWRpbmcubGVuZ3RoIDogdm9pZCAwKSAhPSBudWxsID8gX3JlZjUgOiAwKTtcbiAgICAgICAgZXggPSB0eHQuc3Vic3RyaW5nKG1haW5TdGFydCwgbWFpbkVuZCkubWF0Y2goL14oLipbXiBcXG5dKVsgXFxuXSokLyk7XG4gICAgICAgIGV4RW5kID0gZXggPyBtYWluU3RhcnQgKyBleFsxXS5sZW5ndGggOiBtYWluRW5kO1xuICAgICAgICBib2R5ID0gdHh0LnN1YnN0cmluZyhtYWluU3RhcnQsIGV4RW5kKTtcbiAgICAgICAgaWYgKGJvZHkudHJpbSgpKSB7XG4gICAgICAgICAgdGV4dFN0YXJ0ID0gcmVzdE9mZiArIG0uaW5kZXggKyAodCA/IGxlYWRpbmcubGVuZ3RoIC0gdC5sZW5ndGggOiAwKTtcbiAgICAgICAgICBpZiAoKHQgIT0gbnVsbCkgJiYgKGxtID0gdC5tYXRjaCgvXlsgXFxuXSsvKSkpIHtcbiAgICAgICAgICAgIHRleHRTdGFydCArPSBsbVswXS5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtID0gdC5tYXRjaCgvKD86XnxcXG4pI0BhdXRvKCArW15cXG5dKik/KFxcbnwkKS8pKSB7XG4gICAgICAgICAgICBvdXRlclJhbmdlID0gbWFrZVJhbmdlKGVsLCB0ZXh0U3RhcnQsIGV4RW5kKTtcbiAgICAgICAgICAgIG91dGVyUmFuZ2UubGVpc3VyZUF1dG8gPSBKU09OLnBhcnNlKFwie1wiICsgKChfcmVmNiA9IG1bMV0pICE9IG51bGwgPyBfcmVmNiA6ICcnKSArIFwifVwiKTtcbiAgICAgICAgICAgIGlmIChvdXRlclJhbmdlLmxlaXN1cmVBdXRvLm1vZGUgPT09ICdub3RlYm9vaycpIHtcbiAgICAgICAgICAgICAgb3V0ZXJSYW5nZS5sZWlzdXJlTm9kZSA9IGVsO1xuICAgICAgICAgICAgICBvdXRlclJhbmdlLmxlaXN1cmVTdGFydCA9IHRleHRTdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIG1haW46IG91dGVyUmFuZ2UsXG4gICAgICAgICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgICAgICAgIGRlZjogbnVsbCxcbiAgICAgICAgICAgICAgYm9keTogdHh0LnN1YnN0cmluZyh0ZXh0U3RhcnQsIGV4RW5kKSxcbiAgICAgICAgICAgICAgdGVzdHM6IHRlc3RzLFxuICAgICAgICAgICAgICBmdWxsVGV4dDogdHh0LnN1YnN0cmluZyh0ZXh0U3RhcnQsIGV4RW5kKSxcbiAgICAgICAgICAgICAgbmV4dDogbmV4dFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3V0ZXJSYW5nZSA9IG1ha2VSYW5nZShlbCwgdGV4dFN0YXJ0LCBleEVuZCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBtYWluOiBvdXRlclJhbmdlLFxuICAgICAgICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICAgICAgICBkZWY6IG51bGwsXG4gICAgICAgICAgICAgIGJvZHk6IHR4dC5zdWJzdHJpbmcodGV4dFN0YXJ0LCBleEVuZCksXG4gICAgICAgICAgICAgIHRlc3RzOiB0ZXN0cyxcbiAgICAgICAgICAgICAgbmV4dDogbmV4dFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1haW46IG51bGwsXG4gICAgICAgICAgICBuYW1lOiBudWxsLFxuICAgICAgICAgICAgZGVmOiBudWxsLFxuICAgICAgICAgICAgYm9keTogbnVsbCxcbiAgICAgICAgICAgIHRlc3RzOiB0ZXN0cyxcbiAgICAgICAgICAgIG5leHQ6IG5leHRcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG1ha2VSYW5nZSA9IGZ1bmN0aW9uKGVsLCBvZmYxLCBvZmYyKSB7XG4gICAgdmFyIG5vZGUsIG9mZnNldCwgcmFuZ2UsIF9yZWYzLCBfcmVmNDtcblxuICAgIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICBfcmVmMyA9IGdycChlbCwgb2ZmMSwgZmFsc2UpLCBub2RlID0gX3JlZjNbMF0sIG9mZnNldCA9IF9yZWYzWzFdO1xuICAgIGlmICgob2Zmc2V0ICE9IG51bGwpICYmIG9mZnNldCA+IDApIHtcbiAgICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIG9mZnNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlLnNldFN0YXJ0QmVmb3JlKG5vZGUpO1xuICAgIH1cbiAgICBpZiAob2ZmMiAhPSBudWxsKSB7XG4gICAgICBfcmVmNCA9IGdycChlbCwgb2ZmMiwgdHJ1ZSksIG5vZGUgPSBfcmVmNFswXSwgb2Zmc2V0ID0gX3JlZjRbMV07XG4gICAgICBpZiAob2Zmc2V0ICE9IG51bGwpIHtcbiAgICAgICAgcmFuZ2Uuc2V0RW5kKG5vZGUsIG9mZnNldCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYW5nZS5zZXRFbmRBZnRlcihub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlO1xuICB9O1xuXG4gIGdycCA9IGZ1bmN0aW9uKG5vZGUsIGNoYXJPZmZzZXQsIGVuZCkge1xuICAgIHZhciBjaGlsZCwgb2Zmc2V0LCByZXQsIF9yZWYzO1xuXG4gICAgX3JlZjMgPSByZXQgPSBnZXRSYW5nZVBvc2l0aW9uKG5vZGUuZmlyc3RDaGlsZCwgY2hhck9mZnNldCwgZW5kKSwgY2hpbGQgPSBfcmVmM1swXSwgb2Zmc2V0ID0gX3JlZjNbMV07XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0gZWxzZSBpZiAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICAgIHJldHVybiBub2RlRW5kKG5vZGUubGFzdENoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtub2RlLCBlbmQgPyAxIDogMF07XG4gICAgfVxuICB9O1xuXG4gIGdldFJhbmdlUG9zaXRpb24gPSBmdW5jdGlvbihub2RlLCBjaGFyT2Zmc2V0LCBlbmQpIHtcbiAgICB2YXIgbmV3Tm9kZSwgbmV3T2ZmLCByZXQsIF9yZWYzO1xuXG4gICAgaWYgKCFub2RlKSB7XG4gICAgICByZXR1cm4gW251bGwsIGNoYXJPZmZzZXRdO1xuICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgaWYgKG5vZGUubGVuZ3RoID4gKGVuZCA/IGNoYXJPZmZzZXQgLSAxIDogY2hhck9mZnNldCkpIHtcbiAgICAgICAgcmV0dXJuIFtub2RlLCBjaGFyT2Zmc2V0XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldCA9IGNvbnRpbnVlUmFuZ2VQb3NpdGlvbihub2RlLCBjaGFyT2Zmc2V0IC0gbm9kZS5sZW5ndGgsIGVuZCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChub2RlLm5vZGVOYW1lID09PSAnQlInKSB7XG4gICAgICBpZiAoY2hhck9mZnNldCA9PT0gKGVuZCA/IDEgOiAwKSkge1xuICAgICAgICByZXR1cm4gW25vZGVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnRpbnVlUmFuZ2VQb3NpdGlvbihub2RlLCBjaGFyT2Zmc2V0LCBlbmQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobm9kZS5maXJzdENoaWxkICE9IG51bGwpIHtcbiAgICAgIF9yZWYzID0gZ2V0UmFuZ2VQb3NpdGlvbihub2RlLmZpcnN0Q2hpbGQsIGNoYXJPZmZzZXQsIGVuZCksIG5ld05vZGUgPSBfcmVmM1swXSwgbmV3T2ZmID0gX3JlZjNbMV07XG4gICAgICBpZiAobmV3Tm9kZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbbmV3Tm9kZSwgbmV3T2ZmXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb250aW51ZVJhbmdlUG9zaXRpb24obm9kZSwgbmV3T2ZmLCBlbmQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29udGludWVSYW5nZVBvc2l0aW9uKG5vZGUsIGNoYXJPZmZzZXQsIGVuZCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnRpbnVlUmFuZ2VQb3NpdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIGNoYXJPZmZzZXQsIGVuZCkge1xuICAgIHZhciBuZXdPZmY7XG5cbiAgICBuZXdPZmYgPSBjaGFyT2Zmc2V0IC0gKChhZGRzTGluZShub2RlKSkgfHwgKChub2RlLm5leHRTaWJsaW5nICE9IG51bGwpICYmIChhZGRzTGluZShub2RlLm5leHRTaWJsaW5nKSkpID8gMSA6IDApO1xuICAgIGlmIChlbmQgJiYgKG5ld09mZiA9PT0gMSB8fCBjaGFyT2Zmc2V0ID09PSAxKSkge1xuICAgICAgcmV0dXJuIG5vZGVFbmQobm9kZSk7XG4gICAgfSBlbHNlIGlmIChub2RlLm5leHRTaWJsaW5nICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBnZXRSYW5nZVBvc2l0aW9uKG5vZGUubmV4dFNpYmxpbmcsIG5ld09mZiwgZW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnRpbnVlUmFuZ2VQb3NpdGlvbihub2RlLnBhcmVudE5vZGUsIG5ld09mZiwgZW5kKTtcbiAgICB9XG4gIH07XG5cbiAgbm9kZUVuZCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gW25vZGUsIG5vZGUubm9kZVR5cGUgPT09IDMgPyBub2RlLmxlbmd0aCA6IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggLSAxXTtcbiAgfTtcblxuICBhZGRzTGluZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gKG5vZGUgIT0gbnVsbCA/IG5vZGUubm9kZVR5cGUgOiB2b2lkIDApID09PSAxICYmIChub2RlLm5vZGVOYW1lID09PSAnQlInIHx8IChnZXRDb21wdXRlZFN0eWxlKG5vZGUsIG51bGwpLmRpc3BsYXkgPT09ICdibG9jaycgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApKTtcbiAgfTtcblxuICByZXEgPSBmdW5jdGlvbihmaWxlLCBjb250KSB7XG4gICAgdmFyIG5hbWUsIHM7XG5cbiAgICBpZiAoIShmaWxlLm1hdGNoKC9cXC5qcyQvKSkpIHtcbiAgICAgIGZpbGUgPSBcIlwiICsgZmlsZSArIFwiLmpzXCI7XG4gICAgfVxuICAgIG5hbWUgPSBmaWxlLnN1YnN0cmluZygwLCBmaWxlLmxlbmd0aCAtIDMpO1xuICAgIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBzLnNldEF0dHJpYnV0ZSgnc3JjJywgZmlsZSk7XG4gICAgcy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICBMZWlzdXJlLnByb2Nlc3NEZWZzKGdsb2JhbFtuYW1lXSwgZ2xvYmFsKTtcbiAgICAgIGlmIChjb250KSB7XG4gICAgICAgIHJldHVybiBjb250KHJ6KExfZmFsc2UpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzKTtcbiAgfTtcblxuICBwb3N0TG9hZFF1ZXVlID0gW107XG5cbiAgbG9hZGVkID0gZmFsc2U7XG5cbiAgcXVldWVBZnRlckxvYWQgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgaWYgKGxvYWRlZCkge1xuICAgICAgcmV0dXJuIGZ1bmMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBvc3RMb2FkUXVldWUucHVzaChmdW5jKTtcbiAgICB9XG4gIH07XG5cbiAgLypcbiAgIyBoYW5kbGUgZm9jdXMgbWFudWFsbHksIGJlY2F1c2UgZ3JhYmJpbmcgZm9jdXMgYW5kIGJsdXIgZXZlbnRzIGRvZXNuJ3Qgc2VlbSB0byB3b3JrIGZvciB0aGUgcGFyZW50XG4gICovXG5cblxuICBkb2NGb2N1cyA9IG51bGw7XG5cbiAgY29kZUZvY3VzID0gbnVsbDtcblxuICBmaW5kQ3VycmVudENvZGVIb2xkZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3JlZjM7XG5cbiAgICByZXR1cm4gZm9jdXNCb3goKF9yZWYzID0gd2luZG93LmdldFNlbGVjdGlvbigpKSAhPSBudWxsID8gX3JlZjMuZm9jdXNOb2RlIDogdm9pZCAwKTtcbiAgfTtcblxuICBmb2N1c0JveCA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBuZXdDb2RlLCBvbGQsIF9yZWYzO1xuXG4gICAgbmV3Q29kZSA9IG51bGw7XG4gICAgd2hpbGUgKGJveCAmJiAoYm94Lm5vZGVUeXBlICE9PSAxIHx8ICFpc0xlaXN1cmVDb2RlKGJveCkpKSB7XG4gICAgICBpZiAoYm94Lm5vZGVUeXBlID09PSAxICYmICgoYm94LmdldEF0dHJpYnV0ZSgnTGVpc3VyZUJveCcpKSAhPSBudWxsKSkge1xuICAgICAgICBuZXdDb2RlID0gYm94O1xuICAgICAgfVxuICAgICAgYm94ID0gYm94LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIGlmIChib3ggIT09IGRvY0ZvY3VzKSB7XG4gICAgICBpZiAoZG9jRm9jdXMgIT0gbnVsbCkge1xuICAgICAgICBkb2NGb2N1cy5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1c2VkJyk7XG4gICAgICB9XG4gICAgICBkb2NGb2N1cyA9IGJveDtcbiAgICAgIGlmIChib3ggIT0gbnVsbCkge1xuICAgICAgICBpZiAoKF9yZWYzID0gYm94LmNsYXNzTGlzdCkgIT0gbnVsbCkge1xuICAgICAgICAgIF9yZWYzLmFkZCgnZm9jdXNlZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChuZXdDb2RlICE9PSBjb2RlRm9jdXMpIHtcbiAgICAgIG9sZCA9IGNvZGVGb2N1cztcbiAgICAgIGNvZGVGb2N1cyA9IG5ld0NvZGU7XG4gICAgICBpZiAob2xkKSB7XG4gICAgICAgIHJldHVybiBhY2NlcHRDb2RlKG9sZCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG93bmVyID0gZnVuY3Rpb24oYm94KSB7XG4gICAgd2hpbGUgKGJveCAmJiAoYm94Lm5vZGVUeXBlICE9PSAxIHx8ICFpc0xlaXN1cmVDb2RlKGJveCkpKSB7XG4gICAgICBib3ggPSBib3gucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGJveDtcbiAgfTtcblxuICBoaWRkZW5QYXQgPSAvKF58XFxuKSNAaGlkZGVuICooXFxufCQpLztcblxuICBldmFsQm94ID0gZnVuY3Rpb24oYm94LCBlbnZCb3gsIGNvbnQpIHtcbiAgICB2YXIgZW52O1xuXG4gICAgZW52ID0gZW52Qm94ICE9IG51bGwgPyBlbnZGb3IoZW52Qm94KSA6IG51bGw7XG4gICAgcHJvY2Vzc0xpbmUoYm94LnRleHRDb250ZW50LCBlbnYsIGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgaWYgKGVudiAhPSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZW52LmNsZWFudXAgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGVudi5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAoY29udCAhPSBudWxsID8gY29udCA6IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgICB9KShyZXN1bHQpO1xuICAgIH0pO1xuICAgIGdldEFzdChib3gpO1xuICAgIGlmIChib3gub3V0cHV0ICYmIGhhc01vbmFkT3V0cHV0KGJveC5vdXRwdXQpICYmIGJveC50ZXh0Q29udGVudC5tYXRjaChoaWRkZW5QYXQpKSB7XG4gICAgICByZXR1cm4gaGlkZU91dHB1dFNvdXJjZShib3gub3V0cHV0KTtcbiAgICB9IGVsc2UgaWYgKGJveC50ZXh0Q29udGVudC5tYXRjaChoaWRkZW5QYXQpKSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coXCJOTyBNT05BRCwgQlVUIE1BVENIRVMgSElEREVOXCIpO1xuICAgIH1cbiAgfTtcblxuICBhY2NlcHRDb2RlID0gZnVuY3Rpb24oYm94KSB7XG4gICAgaWYgKChib3guZ2V0QXR0cmlidXRlKCdjb2RlbWFpbicpKSAhPSBudWxsKSB7XG4gICAgICBldmFsQm94KGJveCk7XG4gICAgICB1cGRhdGUoJ2NvbXBpbGUnKTtcbiAgICAgIGlmIChvd25lcihib3gpLmF1dG9ydW5TdGF0ZSkge1xuICAgICAgICByZXR1cm4gcnVuVGVzdHMob3duZXIoYm94KSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGVyclN0cmluZyA9IGZ1bmN0aW9uKGVycikge1xuICAgIHJldHVybiBlcnIuc3RhY2s7XG4gIH07XG5cbiAgZXZhbHVhdGluZyA9IGZhbHNlO1xuXG4gIGV2YWx1YXRpb25RdWV1ZSA9IFtdO1xuXG4gIGV2YWxOb2RlcyA9IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgaWYgKGV2YWx1YXRpbmcpIHtcbiAgICAgIHJldHVybiBldmFsdWF0aW9uUXVldWUucHVzaChub2Rlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjaGFpbkV2YWxOb2Rlcyhub2Rlcyk7XG4gICAgfVxuICB9O1xuXG4gIGNoYWluRXZhbE5vZGVzID0gZnVuY3Rpb24obm9kZXMpIHtcbiAgICBldmFsdWF0aW5nID0gdHJ1ZTtcbiAgICByZXR1cm4gcnVuQXV0byhub2RlcywgMCwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZXZhbHVhdGlvblF1ZXVlLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY2hhaW5FdmFsTm9kZXMoZXZhbHVhdGlvblF1ZXVlLnNoaWZ0KCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGV2YWx1YXRpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBldmFsRG9jID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgYXV0bywgYXV0b05vZGVzLCBlLCBlcnIsIHBnbSwgeCwgX3JlZjM7XG5cbiAgICBfcmVmMyA9IGluaXROb3RlYm9vayhlbCksIHBnbSA9IF9yZWYzWzBdLCBhdXRvID0gX3JlZjNbMV0sIHggPSBfcmVmM1syXSwgYXV0b05vZGVzID0gX3JlZjNbM107XG4gICAgdHJ5IHtcbiAgICAgIGlmIChhdXRvIHx8IGF1dG9Ob2Rlcykge1xuICAgICAgICBhdXRvID0gXCJkb1xcbiAgXCIgKyAoKGF1dG8gIT0gbnVsbCA/IGF1dG8gOiAnIycpLnRyaW0oKS5yZXBsYWNlKC9cXG4vZywgJ1xcbiAgJykpICsgXCJcXG4gIGRlbGF5XFxuICBmaW5pc2hMb2FkaW5nXCI7XG4gICAgICAgIGdsb2JhbC5ub3JlZGVmcyA9IGZhbHNlO1xuICAgICAgICBOb3RlYm9vay5xdWV1ZUFmdGVyTG9hZChmdW5jdGlvbigpIHtcbiAgICAgICAgICBldmFsRG9jQ29kZShlbCwgcGdtKTtcbiAgICAgICAgICBpZiAoZWwuYXV0b3J1blN0YXRlKSB7XG4gICAgICAgICAgICBydW5UZXN0cyhlbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBldmFsTm9kZXMoYXV0b05vZGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGUgPSBlbnZGb3IoZWwpO1xuICAgICAgICBlLndyaXRlID0gZnVuY3Rpb24oKSB7fTtcbiAgICAgICAgZS5lcnIgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICByZXR1cm4gYWxlcnQoJ2J1YmJhICcgKyBlcnJTdHJpbmcoZXJyKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwcm9jZXNzTGluZShhdXRvLCBlLCBpZGVudGl0eSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZXZhbERvY0NvZGUoZWwsIHBnbSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICByZXR1cm4gc2hvd0Vycm9yKGVyciwgXCJFcnJvciBjb21waWxpbmcgXCIgKyBwZ20pO1xuICAgIH1cbiAgfTtcblxuICBydW5BdXRvID0gZnVuY3Rpb24obm9kZXMsIGluZGV4LCBjb250KSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICBpZiAoaW5kZXggPCBub2Rlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUlVOTklORyBBVVRPOiBcIiArIGluZGV4KTtcbiAgICAgIG5vZGUgPSBub2Rlc1tpbmRleF07XG4gICAgICBjb25zb2xlLmxvZyhcImV2YWxPdXRwdXRcIiwgbm9kZSwgbm9kZS5vdXRwdXQpO1xuICAgICAgcmV0dXJuIGV2YWxPdXRwdXQobm9kZS5vdXRwdXQsIGZhbHNlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHJ1bkF1dG8obm9kZXMsIGluZGV4ICsgMSwgY29udCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChjb250ICE9IG51bGwgPyBjb250IDogZnVuY3Rpb24oKSB7fSkoKTtcbiAgICB9XG4gIH07XG5cbiAgcHJvY2Vzc0xpbmUgPSBmdW5jdGlvbih0ZXh0LCBlbnYsIGNvbnQpIHtcbiAgICB2YXIgZXJyO1xuXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBydW5Nb25hZChyeihMX25ld1BhcnNlTGluZSkobHooTmlsKSkobHoodGV4dCkpLCBlbnYsIGZ1bmN0aW9uKGFzdCkge1xuICAgICAgICAgIHZhciBlcnIsIHJlc3VsdDtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZ2V0VHlwZShhc3QpID09PSAncGFyc2VFcnInKSB7XG4gICAgICAgICAgICAgIGVudi53cml0ZShlbnYucHJlc2VudFZhbHVlKGFzdCkpO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGVudi5wcm9jZXNzUmVzdWx0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBlbnYucHJvY2Vzc1Jlc3VsdChhc3QpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBjb250KGFzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXN1bHQgPSBldmFsKFwiKFwiICsgKGdlbihhc3QpKSArIFwiKVwiKTtcbiAgICAgICAgICAgICAgZW52LndyaXRlKGVudi5wcmVzZW50VmFsdWUocmVzdWx0KSk7XG4gICAgICAgICAgICAgIGlmIChpc01vbmFkKHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVuTW9uYWQocmVzdWx0LCBlbnYsIGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjb250KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnYucHJvY2Vzc1Jlc3VsdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICBlbnYucHJvY2Vzc1Jlc3VsdChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udChyZXN1bHQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBcIiArIGVyci5zdGFjayk7XG4gICAgICAgICAgICBlbnYud3JpdGUoZW52LnByZXNlbnRWYWx1ZShlcnIuc3RhY2spKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW52LnByb2Nlc3NSZXN1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICBlbnYucHJvY2Vzc1Jlc3VsdChlcnIuc3RhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnQoZXJyLnN0YWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUjogXCIgKyBlcnIuc3RhY2spO1xuICAgICAgICBlbnYud3JpdGUoZW52LnByZXNlbnRWYWx1ZShlcnIuc3RhY2spKTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnYucHJvY2Vzc1Jlc3VsdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQoZXJyLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udChlcnIuc3RhY2spO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29udCgnJyk7XG4gICAgfVxuICB9O1xuXG4gIHNob3dFcnJvciA9IGZ1bmN0aW9uKGUsIG1zZykge1xuICAgIGNvbnNvbGUubG9nKG1zZyk7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgY29uc29sZS5sb2coZS5zdGFjayk7XG4gICAgcmV0dXJuIGFsZXJ0KGUuc3RhY2spO1xuICB9O1xuXG4gIGV2YWxEb2NDb2RlID0gZnVuY3Rpb24oZWwsIHBnbSkge1xuICAgIHJldHVybiBydW5Nb25hZChyeihMX3J1bkZpbGUpKGx6KHBnbSkpLCBkZWZhdWx0RW52LCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjMsIF9yZXN1bHRzO1xuXG4gICAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb2RlTWFpbl0nKTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG5vZGUgPSBfcmVmM1tfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2goZ2V0QXN0KG5vZGUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KTtcbiAgfTtcblxuICBkZWZpbmUoJ2dldERvY3VtZW50JywgbHoobWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICByZXR1cm4gY29udChwZWVyR2V0RG9jdW1lbnQoKSk7XG4gIH0pKSk7XG5cbiAgZGVmaW5lKCdnZXRMaW5rJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0pO1xuXG4gIGRlZmluZSgncmVwbGFjZURvY3VtZW50JywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXBsYWNlQ29udGVudHMocnooc3RyKSk7XG4gICAgICByZXR1cm4gY29udChyeihMX3RydWUpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZ2RyaXZlT3BlbicsIGx6KG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICByZXR1cm4gR2RyaXZlU3RvcmFnZS5ydW5PcGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIHZhciBfcmVmMztcblxuICAgICAgaWYgKChqc29uICE9IG51bGwgPyBqc29uLmFjdGlvbiA6IHZvaWQgMCkgPT09ICdwaWNrZWQnICYmICgoX3JlZjMgPSBqc29uLmRvY3MpICE9IG51bGwgPyBfcmVmMy5sZW5ndGggOiB2b2lkIDApID4gMCkge1xuICAgICAgICByZXR1cm4gR2RyaXZlU3RvcmFnZS5sb2FkRmlsZShqc29uLmRvY3NbMF0uaWQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBjb250KHJ6KF9zb21lKShseihqc29uLmRvY3NbMF0udGl0bGUpKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnQocnooX25vbmUpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSkpKTtcblxuICBkZWZpbmUoJ2dldEZpbGVuYW1lJywgbHoobWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICB2YXIgX3JlZjM7XG5cbiAgICByZXR1cm4gY29udCgoX3JlZjMgPSBmaWxlbmFtZSAhPSBudWxsID8gZmlsZW5hbWUucGF0aE5hbWUoKSA6IHZvaWQgMCkgIT0gbnVsbCA/IF9yZWYzIDogJycpO1xuICB9KSkpO1xuXG4gIGRlZmluZSgnc2V0VVJJJywgbHooZnVuY3Rpb24odXJpKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICBzZXRGaWxlbmFtZShyeih1cmkpKTtcbiAgICAgIHJldHVybiBjb250KHJ6KExfdHJ1ZSkpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdnZXRVUkknLCBseihtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgIHZhciBfcmVmMztcblxuICAgIHJldHVybiBjb250KChfcmVmMyA9IGZpbGVuYW1lICE9IG51bGwgPyBmaWxlbmFtZS50b1N0cmluZygpIDogdm9pZCAwKSAhPSBudWxsID8gX3JlZjMgOiAnJyk7XG4gIH0pKSk7XG5cbiAgZGVmaW5lKCdmaW5pc2hMb2FkaW5nJywgbHoobWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgIHZhciBpLCBfaSwgX2xlbjtcblxuICAgIGxvYWRlZCA9IHRydWU7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBwb3N0TG9hZFF1ZXVlLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBpID0gcG9zdExvYWRRdWV1ZVtfaV07XG4gICAgICByeihpKTtcbiAgICB9XG4gICAgcG9zdExvYWRRdWV1ZSA9IFtdO1xuICAgIHJldHVybiBjb250KHJ6KExfZmFsc2UpKTtcbiAgfSkpKTtcblxuICBkZWZpbmUoJ21hcmt1cEJ1dHRvbnMnLCBseihtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgIGlmIChlbnYuYm94KSB7XG4gICAgICBtYXJrdXBCdXR0b25zKGVudi5ib3gpO1xuICAgIH1cbiAgICByZXR1cm4gY29udChyeihMX2ZhbHNlKSk7XG4gIH0pKSk7XG5cbiAgZGVmaW5lKCdhbGVydCcsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgd2luZG93LmFsZXJ0KHJ6KHN0cikpO1xuICAgICAgcmV0dXJuIGNvbnQocnooTF9mYWxzZSkpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdiaW5kRXZlbnQnLCBseihmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihmdW5jKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICAgIHZhciBub2RlO1xuXG4gICAgICAgICAgbm9kZSA9IGVudi5ib3gucXVlcnlTZWxlY3RvcihyeihzZWxlY3RvcikpO1xuICAgICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgbm9kZSA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihyeihzZWxlY3RvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkFERElORyBFVkVOVDogXCIgKyAocnooc2VsZWN0b3IpKSArIFwiIFwiICsgKHJ6KGV2ZW50TmFtZSkpICsgXCIgTk9ERTogXCIgKyBub2RlKTtcbiAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSgpLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVZFTlQ6IFwiICsgKHJ6KHNlbGVjdG9yKSkgKyBcIiBcIiArIChyeihldmVudE5hbWUpKSArIFwiIFwiICsgKHJ6KGZ1bmMpKSk7XG4gICAgICAgICAgICAgIHJldHVybiBydW5Nb25hZChyeihmdW5jKShseihlKSksIGVudkZvcihlLnRhcmdldCksIGZ1bmN0aW9uKCkge30pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb250KHJ6KExfZmFsc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ3F1aXQnLCBseih3aW5kb3cuY2xvc2UoKSkpO1xuXG4gIGRlZmluZSgnY29uZmlnJywgbHooZnVuY3Rpb24oZXhwcikge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgc3dpdGNoIChyeihleHByKSkge1xuICAgICAgICBjYXNlICdhdXRvVGVzdCc6XG4gICAgICAgICAgYXV0b1J1bihlbnYub3duZXIsIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnQocnooTF9mYWxzZSkpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdub3RlYm9va1NlbGVjdGlvbicsIGx6KGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHZhciBieCwgb2Zmc2V0LCBwMSwgcDIsIHIsIHIyLCBzZWw7XG5cbiAgICAgIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGJ4ID0gZ2V0Qm94KHNlbC5mb2N1c05vZGUpO1xuICAgICAgaWYgKChieCAhPSBudWxsKSAmJiBoYXNGdW5jKGJ4LCBmdW5jKSkge1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICByID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgICAgIHdpbmRvdy5yID0gcjtcbiAgICAgICAgcjIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByMi5zZXRTdGFydChieCwgMCk7XG4gICAgICAgIHIyLnNldEVuZChyLnN0YXJ0Q29udGFpbmVyLCByLnN0YXJ0T2Zmc2V0KTtcbiAgICAgICAgcDEgPSByMi5jbG9uZUNvbnRlbnRzKCkudGV4dENvbnRlbnQubGVuZ3RoIC0gb2Zmc2V0O1xuICAgICAgICBpZiAoIXIuY29sbGFwc2VkKSB7XG4gICAgICAgICAgcjIuc2V0RW5kKHIuZW5kQ29udGFpbmVyLCByLmVuZE9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgcDIgPSByMi5jbG9uZUNvbnRlbnRzKCkudGV4dENvbnRlbnQubGVuZ3RoIC0gb2Zmc2V0O1xuICAgICAgICByZXR1cm4gY29udChyeihfc29tZTIpKGx6KHAxKSkobHoocDIpKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29udChyeihfbm9uZSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KSk7XG5cbiAgaGFzRnVuYyA9IGZ1bmN0aW9uKGJ4LCBmdW5jKSB7XG4gICAgdmFyIGFzdDtcblxuICAgIGFzdCA9IGdldEFzdChieCk7XG4gICAgcmV0dXJuIGFzdCA9PT0gZnVuYygpLmFzdCB8fCBhc3QgPT09IGZ1bmMuYXN0O1xuICB9O1xuXG4gIGRlZmluZSgnbm90ZWJvb2tBc3QnLCBseihmdW5jdGlvbihmdW5jKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICB2YXIgYXN0LCBub2RlO1xuXG4gICAgICBpZiAoZnVuYy5sZWlzdXJlTmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW0xlaXN1cmVGdW5jPVwiICsgZnVuYy5sZWlzdXJlTmFtZSArIFwiXVwiKTtcbiAgICAgICAgaWYgKG5vZGUgIT0gbnVsbCkge1xuICAgICAgICAgIGFzdCA9IGdldEFzdChub2RlKTtcbiAgICAgICAgICByZXR1cm4gY29udChyeihfc29tZSkobHooYXN0KSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udChyeihfbm9uZSkpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgYXV0b1J1biA9IGZ1bmN0aW9uKGVsLCBzdGF0ZSkge1xuICAgIHZhciBfcmVmMztcblxuICAgIGVsLmF1dG9ydW5TdGF0ZSA9IHN0YXRlO1xuICAgIHJldHVybiAoX3JlZjMgPSBlbC5hdXRvcnVuKSAhPSBudWxsID8gX3JlZjMuY2hlY2tlZCA9IHN0YXRlIDogdm9pZCAwO1xuICB9O1xuXG4gIGhlYWQgPSBmdW5jdGlvbihsKSB7XG4gICAgcmV0dXJuIGwobHooZnVuY3Rpb24oaGgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih0dCkge1xuICAgICAgICByZXR1cm4gcnooaGgpO1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgdGFpbCA9IGZ1bmN0aW9uKGwpIHtcbiAgICByZXR1cm4gbChseihmdW5jdGlvbihoaCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHR0KSB7XG4gICAgICAgIHJldHVybiByeih0dCk7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBpZCA9IGZ1bmN0aW9uKHYpIHtcbiAgICByZXR1cm4gcnoodik7XG4gIH07XG5cbiAgZ2V0U3ZnRWxlbWVudCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIGVsLCBzdmc7XG5cbiAgICBpZiAoKGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKSkge1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmcgPSBjcmVhdGVOb2RlKFwiPHN2ZyBpZD0nSElEREVOX1NWRycgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2ZXJzaW9uPScxLjEnIHN0eWxlPSd0b3A6IC0xMDAwMDA7IHBvc2l0aW9uOiBhYnNvbHV0ZSc+PHRleHQgaWQ9J0hJRERFTl9URVhUJz5idWJiYTwvdGV4dD48L3N2Zz5cIik7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN2Zyk7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIH1cbiAgfTtcblxuICBzdmdNZWFzdXJlVGV4dCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihmKSB7XG4gICAgICAgIHZhciBieCwgdHh0O1xuXG4gICAgICAgIHR4dCA9IGdldFN2Z0VsZW1lbnQoJ0hJRERFTl9URVhUJyk7XG4gICAgICAgIGlmIChyeihzdHlsZSkpIHtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKCdzdHlsZScsIHJ6KHN0eWxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgdHh0Lmxhc3RDaGlsZC50ZXh0Q29udGVudCA9IHJ6KHRleHQpO1xuICAgICAgICBieCA9IHR4dC5nZXRCQm94KCk7XG4gICAgICAgIHJldHVybiByeihmKShseihieC53aWR0aCkpKGx6KGJ4LmhlaWdodCkpO1xuICAgICAgfTtcbiAgICB9O1xuICB9O1xuXG4gIHByaW1jb25jYXROb2RlcyA9IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgaWYgKG5vZGVzID09PSByeihfbmlsKSkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoaGVhZChub2RlcykpKGlkKSArIGNvbmNhdE5vZGVzKHRhaWwobm9kZXMpKTtcbiAgICB9XG4gIH07XG5cbiAgdHJhbnNmb3JtZWRQb2ludCA9IGZ1bmN0aW9uKHB0LCB4LCB5LCBjdG0sIGljdG0pIHtcbiAgICBwdC54ID0geDtcbiAgICBwdC55ID0geTtcbiAgICByZXR1cm4gcHQubWF0cml4VHJhbnNmb3JtKGN0bSkubWF0cml4VHJhbnNmb3JtKGljdG0pO1xuICB9O1xuXG4gIHN2Z01lYXN1cmUgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgcmV0dXJuIHByaW1TdmdNZWFzdXJlKGNvbnRlbnQsIGJhc2VTdHJva2VXaWR0aCk7XG4gIH07XG5cbiAgc3ZnQmV0dGVyTWVhc3VyZSA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICByZXR1cm4gcHJpbVN2Z01lYXN1cmUoY29udGVudCwgdHJhbnNmb3JtU3Ryb2tlV2lkdGgpO1xuICB9O1xuXG4gIHByaW1TdmdNZWFzdXJlID0gZnVuY3Rpb24oY29udGVudCwgdHJhbnNmb3JtRnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbihmKSB7XG4gICAgICB2YXIgYmJveCwgZywgcGFkLCBzdmc7XG5cbiAgICAgIHN2ZyA9IGNyZWF0ZU5vZGUoXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgdmVyc2lvbj0nMS4xJyBzdHlsZT0ndG9wOiAtMTAwMDAwJz48Zz5cIiArIChjb250ZW50KCkpICsgXCI8L2c+PC9zdmc+XCIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdmcpO1xuICAgICAgZyA9IHN2Zy5maXJzdENoaWxkO1xuICAgICAgYmJveCA9IGcuZ2V0QkJveCgpO1xuICAgICAgcGFkID0gZ2V0TWF4U3Ryb2tlV2lkdGgoZywgZywgc3ZnLCB0cmFuc2Zvcm1GdW5jKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc3ZnKTtcbiAgICAgIHJldHVybiByeihmKShseihiYm94LnggLSBNYXRoLmNlaWwocGFkIC8gMikpKShseihiYm94LnkgLSBNYXRoLmNlaWwocGFkIC8gMikpKShseihiYm94LndpZHRoICsgcGFkKSkobHooYmJveC5oZWlnaHQgKyBwYWQpKTtcbiAgICB9O1xuICB9O1xuXG4gIGJhc2VFbGVtZW50cyA9IFsncGF0aCcsICdyZWN0JywgJ2NpcmNsZScsICdlbGxpcHNlJywgJ2xpbmUnLCAncG9seWxpbmUnLCAncG9seWdvbiddO1xuXG4gIGdldE1heFN0cm9rZVdpZHRoID0gZnVuY3Rpb24oZWwsIGJhc2UsIHN2ZywgdHJhbnNmb3JtRnVuYykge1xuICAgIHZhciBfcmVmMywgX3JlZjQ7XG5cbiAgICBpZiAoX3JlZjMgPSBiYXNlLm5vZGVOYW1lLCBfX2luZGV4T2YuY2FsbChiYXNlRWxlbWVudHMsIF9yZWYzKSA+PSAwKSB7XG4gICAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIChfcmVmNCA9IGdldENvbXB1dGVkU3R5bGUoYmFzZSkuc3Ryb2tlV2lkdGgpICE9IG51bGwgPyBfcmVmNCA6ICcwJywgc3ZnKTtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKGVsLCBzdmcud2lkdGguYmFzZVZhbC52YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChiYXNlLm5vZGVOYW1lID09PSAndXNlJykge1xuICAgICAgcmV0dXJuIGdldE1heFN0cm9rZVdpZHRoKGJhc2UsIGJhc2UuaW5zdGFuY2VSb290LmNvcnJlc3BvbmRpbmdFbGVtZW50LCBzdmcsIHRyYW5zZm9ybUZ1bmMpO1xuICAgIH0gZWxzZSBpZiAoYmFzZS5ub2RlTmFtZSA9PT0gJ2cnKSB7XG4gICAgICByZXR1cm4gZm9sZExlZnQoKGZ1bmN0aW9uKHYsIG4pIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHYsIGdldE1heFN0cm9rZVdpZHRoKG4sIG4sIHN2ZywgdHJhbnNmb3JtRnVuYykpO1xuICAgICAgfSksIDAsIGVsLmNoaWxkTm9kZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH07XG5cbiAgYmFzZVN0cm9rZVdpZHRoID0gZnVuY3Rpb24oZWwsIHcpIHtcbiAgICByZXR1cm4gdztcbiAgfTtcblxuICB0cmFuc2Zvcm1TdHJva2VXaWR0aCA9IGZ1bmN0aW9uKGVsLCB3KSB7XG4gICAgdmFyIGN0bSwgdHAxLCB0cDIsIHgsIHk7XG5cbiAgICBpZiAodyA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0bSA9IGVsLmdldFNjcmVlbkNUTSgpO1xuICAgICAgdHAxID0gdHJhbnNmb3JtZWRQb2ludChwdCwgYngueCAtIE1hdGguY2VpbCh3KSwgYngueSAtIE1hdGguY2VpbCh3KSwgY3RtLCBpc2N0bSk7XG4gICAgICB0cDIgPSB0cmFuc2Zvcm1lZFBvaW50KHB0LCBieC54ICsgYngud2lkdGggKyBNYXRoLmNlaWwodyksIGJ4LnkgKyBieC5oZWlnaHQgKyBNYXRoLmNlaWwodyksIGN0bSwgaXNjdG0pO1xuICAgICAgeCA9IHRwMi54IC0gdHAxLng7XG4gICAgICB5ID0gdHAyLnkgLSB0cDEueTtcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgfVxuICB9O1xuXG4gIHByZXZpb3VzU2libGluZyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB3aGlsZSAoKG5vZGUgIT0gbnVsbCA/IG5vZGUucGFyZW50Tm9kZSA6IHZvaWQgMCkgJiYgIW5vZGUucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gbm9kZS5wcmV2aW91c1NpYmxpbmcgOiB2b2lkIDA7XG4gIH07XG5cbiAgbmV4dFNpYmxpbmcgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgd2hpbGUgKChub2RlICE9IG51bGwgPyBub2RlLnBhcmVudE5vZGUgOiB2b2lkIDApICYmICFub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gbm9kZS5uZXh0U2libGluZyA6IHZvaWQgMDtcbiAgfTtcblxuICBoaWRlQ29udHJvbFNlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udHJvbFNlY3Rpb247XG5cbiAgICBjb250cm9sU2VjdGlvbiA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignW2xlaXN1cmVTZWN0aW9uPVwiTGVpc3VyZSBDb250cm9sc1wiXScpO1xuICAgIGlmICghY29udHJvbFNlY3Rpb24pIHtcbiAgICAgIGNvbnRyb2xTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShjb250cm9sU2VjdGlvbiwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICAgIHJvb3QubWFya3VwRWxlbWVudChjb250cm9sU2VjdGlvbiwgXCIjIExlaXN1cmUgQ29udHJvbHNcXG5cXG4jIyBGaWxlIFNhdmUgYW5kIExvYWRcXG5gYGBcXG5zYXZlRmlsZVxcblxcbnNhdmVBcyAnZmlsZW5hbWUnXFxuXFxuc2F2ZUFzIHBpY2tGaWxlXFxuXFxubG9hZEZpbGVcXG5cXG5lbXB0eUZpbGVcXG5gYGBcIik7XG4gICAgICB1bndyYXAoY29udHJvbFNlY3Rpb24pO1xuICAgIH1cbiAgICBjb250cm9sU2VjdGlvbi5jbGFzc0xpc3QuYWRkKGxlaXN1cmVfY29udHJvbHMpO1xuICAgIHJldHVybiBjb250cm9sU2VjdGlvbi5jbGFzc0xpc3QuYWRkKGhpZGRlbik7XG4gIH07XG5cbiAgZGVmaW5lKCdwcmludFZhbHVlJywgbHooZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgaWYgKHJ6KHZhbHVlKSAhPT0gcnooTF9uaWwpKSB7XG4gICAgICAgIGVudi53cml0ZShcIlwiICsgKGVudi5wcmVzZW50VmFsdWUocnoodmFsdWUpKSkgKyBcIlxcblwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250KExfZmFsc2UoKSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZhdWx0RW52LnJlcXVpcmUgPSByZXE7XG5cbiAgcm9vdC5zdmdNZWFzdXJlVGV4dCA9IHN2Z01lYXN1cmVUZXh0O1xuXG4gIHJvb3Quc3ZnTWVhc3VyZSA9IHN2Z01lYXN1cmU7XG5cbiAgcm9vdC5pbml0Tm90ZWJvb2sgPSBpbml0Tm90ZWJvb2s7XG5cbiAgcm9vdC5iaW5kTm90ZWJvb2sgPSBiaW5kTm90ZWJvb2s7XG5cbiAgcm9vdC5iaW5kQWxsID0gYmluZEFsbDtcblxuICByb290LmV2YWxPdXRwdXQgPSBldmFsT3V0cHV0O1xuXG4gIHJvb3QubWFrZVRlc3RDYXNlID0gbWFrZVRlc3RDYXNlO1xuXG4gIHJvb3QuY2xlYW5PdXRwdXQgPSBjbGVhbk91dHB1dDtcblxuICByb290LmNsZWFyT3V0cHV0Qm94ID0gY2xlYXJPdXRwdXRCb3g7XG5cbiAgcm9vdC5lbnZGb3IgPSBlbnZGb3I7XG5cbiAgcm9vdC5xdWV1ZUFmdGVyTG9hZCA9IHF1ZXVlQWZ0ZXJMb2FkO1xuXG4gIHJvb3QuZXZhbERvYyA9IGV2YWxEb2M7XG5cbiAgcm9vdC5nZXRCb3ggPSBnZXRCb3g7XG5cbiAgcm9vdC5tYWtlUmFuZ2UgPSBtYWtlUmFuZ2U7XG5cbiAgcm9vdC5ncnAgPSBncnA7XG5cbiAgcm9vdC5jaGFuZ2VUaGVtZSA9IGNoYW5nZVRoZW1lO1xuXG4gIHJvb3Quc2V0U25hcHBlciA9IHNldFNuYXBwZXI7XG5cbiAgcm9vdC51cGRhdGUgPSB1cGRhdGU7XG5cbiAgcm9vdC5jbGVhclVwZGF0ZXMgPSBjbGVhclVwZGF0ZXM7XG5cbiAgcm9vdC5zaG93QXN0ID0gc2hvd0FzdDtcblxuICByb290LnRvZ2dsZUVkaXQgPSB0b2dnbGVFZGl0O1xuXG4gIHJvb3Quc2hvd1NvdXJjZSA9IHNob3dTb3VyY2U7XG5cbiAgcm9vdC5ib290Tm90ZWJvb2sgPSBib290Tm90ZWJvb2s7XG5cbiAgcm9vdC5jcmVhdGVOb2RlID0gY3JlYXRlTm9kZTtcblxuICByb290LkVOVEVSID0gRU5URVI7XG5cbiAgcm9vdC50ZXh0Tm9kZSA9IHRleHROb2RlO1xuXG4gIHJvb3QuY2xlYW5FbXB0eU5vZGVzID0gY2xlYW5FbXB0eU5vZGVzO1xuXG4gIHJvb3QuaXNMZWlzdXJlQ29kZSA9IGlzTGVpc3VyZUNvZGU7XG5cbiAgcm9vdC5nZXRFbGVtZW50Q29kZSA9IGdldEVsZW1lbnRDb2RlO1xuXG4gIHJvb3QucnVuVGVzdHMgPSBydW5UZXN0cztcblxuICByb290LnByZXZpb3VzU2libGluZyA9IHByZXZpb3VzU2libGluZztcblxuICByb290Lm5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmc7XG5cbiAgcm9vdC5wcmVzZW50TGVpc3VyZUNvZGUgPSBwcmVzZW50TGVpc3VyZUNvZGU7XG5cbiAgcm9vdC5tZXJnZUxlaXN1cmVDb2RlID0gbWVyZ2VMZWlzdXJlQ29kZTtcblxuICByb290LmhpZ2hsaWdodE5vdGVib29rRnVuY3Rpb24gPSBoaWdobGlnaHROb3RlYm9va0Z1bmN0aW9uO1xuXG4gIHJvb3QuRVNDID0gRVNDO1xuXG4gIHJvb3QuSE9NRSA9IEhPTUU7XG5cbiAgcm9vdC5FTkQgPSBFTkQ7XG5cbiAgcm9vdC5QQUdFX1VQID0gUEFHRV9VUDtcblxuICByb290LlBBR0VfRE9XTiA9IFBBR0VfRE9XTjtcblxuICByb290LkxFRlRfQVJST1cgPSBMRUZUX0FSUk9XO1xuXG4gIHJvb3QuVVBfQVJST1cgPSBVUF9BUlJPVztcblxuICByb290LlJJR0hUX0FSUk9XID0gUklHSFRfQVJST1c7XG5cbiAgcm9vdC5ET1dOX0FSUk9XID0gRE9XTl9BUlJPVztcblxuICByb290LmFycm93cyA9IGFycm93cztcblxuICByb290LmNsb3NlV2luZG93ID0gY2xvc2VXaW5kb3c7XG5cbiAgcm9vdC5tYXJrdXBCdXR0b24gPSBtYXJrdXBCdXR0b247XG5cbiAgcm9vdC5tYXJrdXBCdXR0b25zID0gbWFya3VwQnV0dG9ucztcblxuICByb290LmdldEFzdCA9IGdldEFzdDtcblxuICByb290Lmluc2VydENvbnRyb2xzID0gaW5zZXJ0Q29udHJvbHM7XG5cbiAgcm9vdC5kZWxheSA9IGRlbGF5O1xuXG4gIHJvb3Quc2V0RmlsZW5hbWUgPSBzZXRGaWxlbmFtZTtcblxuICByb290LnVud3JhcCA9IHVud3JhcDtcblxuICByb290LnJlbW92ZSA9IHJlbW92ZTtcblxuICByb290LndyYXBSYW5nZSA9IHdyYXBSYW5nZTtcblxuICByb290LnJlcGxhY2VDb250ZW50cyA9IHJlcGxhY2VDb250ZW50cztcblxuICByb290LmV2ZW50ID0gZXZlbnQ7XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1ub3RlYm9vay5tYXBcbiovXG5cbn0pKHNlbGYpIiwiKGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsKXsvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4vKlxuQ29weXJpZ2h0IChDKSAyMDEzLCBCaWxsIEJ1cmRpY2ssIFRpbnkgQ29uY2VwdHM6IGh0dHBzOi8vZ2l0aHViLmNvbS96b3QvTGVpc3VyZVxuXG4obGljZW5zZWQgd2l0aCBaTElCIGxpY2Vuc2UpXG5cblRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG53YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbmFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG5cblBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuXG4xLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbmluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cblxuMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbm1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cblxuMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgTW9uYWQsIE5pbCwgU2ltcHlDb25zLCBhY3RvcnMsIGFtdCwgYXN0Mkpzb24sIGFzeW5jTW9uYWQsIGJhc2ljQ2FsbCwgYm9vbGVhbkZvciwgY2FsbCwgY2FsbE1vbmFkLCBjb25zLCBjb25zRnJvbSwgY29udGludWVNb25hZHMsIGN1cnJ5LCBkZWZhdWx0RW52LCBkZWZpbmUsIGVuc3VyZUxlaXN1cmVDbGFzcywgZnVuY3Rpb25JbmZvLCBnZXREYXRhVHlwZSwgZ2V0TW9uYWRTeW5jTW9kZSwgZ2V0VHlwZSwgZ2V0VmFsdWUsIGhhbXQsIGhlYWQsIGlkZW50aXR5LCBpc01vbmFkLCBsYXp5LCBsZWZ0LCBseiwgbWFrZUhhbXQsIG1ha2VNb25hZCwgbWFrZVN5bmNNb25hZCwgbWVtbywgbW9uYWRNb2RlU3luYywgbmFtZVN1YiwgbmV3UnVuTW9uYWQsIG5leHRNb25hZCwgbmV4dE5vZGUsIG5vbmUsIHBhcmVuc0NvbnRlbnQsIHBhcmVuc0VuZCwgcGFyZW5zU3RhcnQsIHJlYWREaXIsIHJlYWRGaWxlLCByZXBsYWNlRXJyLCByZXNvbHZlLCByaWdodCwgcm9vdCwgcnVuTW9uYWQsIHJ6LCBzZXREYXRhVHlwZSwgc2V0VHlwZSwgc2V0VmFsdWUsIHNldFdhcm5Bc3luYywgc2ltcHlDb25zLCBzb21lLCBzdGF0RmlsZSwgc3RyQ29vcmQsIHN0ckZyb21MaXN0LCBzdHJUb0xpc3QsIHN1YmN1cnJ5LCB0YWlsLCB0b2tlblBvcywgdG9rZW5TdHJpbmcsIHRyYW1wQ3VycnksIHZhbHVlcywgd2FybkFzeW5jLCB3aXRoU3luY01vZGVEbywgd3JpdGVGaWxlLCBfLCBfZmFsc2UsIF9pZGVudGl0eSwgX3JlZiwgX3JlZjEsIF90cnVlLFxuICAgIF9fc2xpY2UgPSBbXS5zbGljZTtcblxuICBfcmVmID0gcm9vdCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9iYXNlJyksIHJlYWRGaWxlID0gX3JlZi5yZWFkRmlsZSwgc3RhdEZpbGUgPSBfcmVmLnN0YXRGaWxlLCByZWFkRGlyID0gX3JlZi5yZWFkRGlyLCB3cml0ZUZpbGUgPSBfcmVmLndyaXRlRmlsZSwgZGVmYXVsdEVudiA9IF9yZWYuZGVmYXVsdEVudiwgU2ltcHlDb25zID0gX3JlZi5TaW1weUNvbnMsIHNpbXB5Q29ucyA9IF9yZWYuc2ltcHlDb25zLCByZXNvbHZlID0gX3JlZi5yZXNvbHZlLCBsYXp5ID0gX3JlZi5sYXp5O1xuXG4gIF9yZWYxID0gcmVxdWlyZSgnLi9hc3QnKSwgZGVmaW5lID0gX3JlZjEuZGVmaW5lLCBjb25zID0gX3JlZjEuY29ucywgTmlsID0gX3JlZjEuTmlsLCBoZWFkID0gX3JlZjEuaGVhZCwgdGFpbCA9IF9yZWYxLnRhaWwsIGdldFR5cGUgPSBfcmVmMS5nZXRUeXBlLCBnZXREYXRhVHlwZSA9IF9yZWYxLmdldERhdGFUeXBlLCBhc3QySnNvbiA9IF9yZWYxLmFzdDJKc29uLCBlbnN1cmVMZWlzdXJlQ2xhc3MgPSBfcmVmMS5lbnN1cmVMZWlzdXJlQ2xhc3MsIHNldFR5cGUgPSBfcmVmMS5zZXRUeXBlLCBzZXREYXRhVHlwZSA9IF9yZWYxLnNldERhdGFUeXBlLCBmdW5jdGlvbkluZm8gPSBfcmVmMS5mdW5jdGlvbkluZm8sIG5hbWVTdWIgPSBfcmVmMS5uYW1lU3ViO1xuXG4gIF8gPSByZXF1aXJlKCcuL2xvZGFzaC5taW4nKTtcblxuICBhbXQgPSByZXF1aXJlKCdwZXJzaXN0ZW50LWhhc2gtdHJpZScpO1xuXG4gIHJ6ID0gcmVzb2x2ZTtcblxuICBseiA9IGxhenk7XG5cbiAgY2FsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzO1xuXG4gICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgcmV0dXJuIGJhc2ljQ2FsbChhcmdzLCBkZWZhdWx0RW52LCBpZGVudGl0eSk7XG4gIH07XG5cbiAgY2FsbE1vbmFkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MsIGNvbnQsIGVudiwgX2k7XG5cbiAgICBhcmdzID0gMyA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgX2kgPSBhcmd1bWVudHMubGVuZ3RoIC0gMikgOiAoX2kgPSAwLCBbXSksIGVudiA9IGFyZ3VtZW50c1tfaSsrXSwgY29udCA9IGFyZ3VtZW50c1tfaSsrXTtcbiAgICByZXR1cm4gYmFzaWNDYWxsKGFyZ3MsIGVudiwgY29udCk7XG4gIH07XG5cbiAgYmFzaWNDYWxsID0gZnVuY3Rpb24oYXJncywgZW52LCBjb250KSB7XG4gICAgdmFyIGFyZywgcmVzLCBfaSwgX2xlbiwgX3JlZjI7XG5cbiAgICByZXMgPSBnbG9iYWxbXCJMX1wiICsgYXJnc1swXV0oKTtcbiAgICBfcmVmMiA9IGFyZ3Muc2xpY2UoMSk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgYXJnID0gX3JlZjJbX2ldO1xuICAgICAgcmVzID0gKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gcmVzKGx6KGFyZykpO1xuICAgICAgfSkoYXJnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bk1vbmFkKHJlcywgZW52LCBjb250KTtcbiAgfTtcblxuICBjb25zRnJvbSA9IGZ1bmN0aW9uKGFycmF5LCBpKSB7XG4gICAgaSA9IGkgfHwgMDtcbiAgICBpZiAoaSA8IGFycmF5Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGNvbnMoYXJyYXlbaV0sIGNvbnNGcm9tKGFycmF5LCBpICsgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTF9uaWwoKTtcbiAgICB9XG4gIH07XG5cbiAgaWRlbnRpdHkgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG5cbiAgX2lkZW50aXR5ID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiByeih4KTtcbiAgfTtcblxuICBfdHJ1ZSA9IHNldFR5cGUoKGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgcmV0dXJuIHJ6KGEpO1xuICAgIH07XG4gIH0pLCAndHJ1ZScpO1xuXG4gIF9mYWxzZSA9IHNldFR5cGUoKGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgcmV0dXJuIHJ6KGIpO1xuICAgIH07XG4gIH0pLCAnZmFsc2UnKTtcblxuICBsZWZ0ID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihsQ2FzZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJDYXNlKSB7XG4gICAgICAgIHJldHVybiByeihsQ2FzZSkobHooeCkpO1xuICAgICAgfTtcbiAgICB9KSwgJ2xlZnQnKTtcbiAgfTtcblxuICByaWdodCA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gc2V0VHlwZSgoZnVuY3Rpb24obENhc2UpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyQ2FzZSkge1xuICAgICAgICByZXR1cm4gcnoockNhc2UpKGx6KHgpKTtcbiAgICAgIH07XG4gICAgfSksICdyaWdodCcpO1xuICB9O1xuXG4gIHNvbWUgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKHNvbWVDYXNlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24obm9uZUNhc2UpIHtcbiAgICAgICAgcmV0dXJuIHJ6KHNvbWVDYXNlKShseih4KSk7XG4gICAgICB9O1xuICAgIH0pLCAnc29tZScpO1xuICB9O1xuXG4gIG5vbmUgPSBzZXRUeXBlKChmdW5jdGlvbihzb21lQ2FzZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihub25lQ2FzZSkge1xuICAgICAgcmV0dXJuIHJ6KG5vbmVDYXNlKTtcbiAgICB9O1xuICB9KSwgJ25vbmUnKTtcblxuICBib29sZWFuRm9yID0gZnVuY3Rpb24oYm9vbCkge1xuICAgIGlmIChib29sKSB7XG4gICAgICByZXR1cm4gcnooTF90cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJ6KExfZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ2VxJywgbHooZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICByZXR1cm4gYm9vbGVhbkZvcihyeihhKSA9PT0gcnooYikpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJz09JywgbHooZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICByZXR1cm4gYm9vbGVhbkZvcihyeihhKSA9PT0gcnooYikpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2hhc1R5cGUnLCBseihmdW5jdGlvbihkYXRhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIGlmICh0eXBlb2YgcnooZnVuYykgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBib29sZWFuRm9yKGdldFR5cGUocnooZGF0YSkpID09PSByeihmdW5jKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYm9vbGVhbkZvcihnZXRUeXBlKHJ6KGRhdGEpKSA9PT0gZ2V0RGF0YVR5cGUocnooZnVuYykpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdnZXREYXRhVHlwZScsIGx6KGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICBpZiAodHlwZW9mIHJ6KGZ1bmMpID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHJ6KGZ1bmMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0RGF0YVR5cGUocnooZnVuYykpO1xuICAgIH1cbiAgfSkpO1xuXG4gIGRlZmluZSgnYXNzZXJ0JywgbHooZnVuY3Rpb24oYm9vbCkge1xuICAgIHJldHVybiBmdW5jdGlvbihtc2cpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIHJldHVybiByeihib29sKShleHByKShmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocnoobXNnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdhc3NlcnRMb2cnLCBseihmdW5jdGlvbihib29sKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG1zZykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgcmV0dXJuIHJ6KGJvb2wpKGV4cHIpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKG5ldyBFcnJvcihyeihtc2cpKS5zdGFjayk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJMT0dHRUQgRVJST1IgLS0gUkVTVU1JTkcgRVhFQ1VUSU9OLi4uXCIpO1xuICAgICAgICAgIHJldHVybiByeihleHByKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJysnLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiByeih4KSArIHJ6KHkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJy0nLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiByeih4KSAtIHJ6KHkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJyonLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiByeih4KSAqIHJ6KHkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJy8nLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiByeih4KSAvIHJ6KHkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJyUnLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiByeih4KSAlIHJ6KHkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJzwnLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiBib29sZWFuRm9yKHJ6KHgpIDwgcnooeSkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJzw9JywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gYm9vbGVhbkZvcihyeih4KSA8PSByeih5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnPicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIGJvb2xlYW5Gb3IocnooeCkgPiByeih5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnPj0nLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgIHJldHVybiBib29sZWFuRm9yKHJ6KHgpID49IHJ6KHkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdmbG9vcicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihyeih4KSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2NlaWwnLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChyeih4KSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ21pbicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIE1hdGgubWluKHJ6KHgpLCByeih5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnbWF4JywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gTWF0aC5tYXgocnooeCksIHJ6KHkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdyb3VuZCcsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChyeih4KSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ2FicycsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdzcXJ0JywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdhY29zJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLmFjb3MocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdhc2luJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLmFzaW4ocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdhdGFuJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLmF0YW4ocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdhdGFuMicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIE1hdGguYXRhbjIocnooeCksIHJ6KHkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdjb3MnLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGguY29zKHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnbG9nJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBNYXRoLmxvZyhyeih4KSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ3NpbicsIGx6KGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gTWF0aC5zaW4ocnooeCkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCd0YW4nLCBseihmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGgudGFuKHJ6KHgpKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgncmFuZCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIGNvbnQoTWF0aC5yYW5kb20oKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlZmluZSgncmFuZEludCcsIGx6KGZ1bmN0aW9uKGxvdykge1xuICAgIHJldHVybiBmdW5jdGlvbihoaWdoKSB7XG4gICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQoTWF0aC5mbG9vcihyeihsb3cpICsgTWF0aC5yYW5kb20oKSAqIHJ6KGhpZ2gpKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdeJywgbHooZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4gTWF0aC5wb3cocnooeCksIHJ6KHkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc2hvdycsIGx6KGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICBpZiAoKF9yZWYyID0gdHlwZW9mIHJ6KGRhdGEpKSA9PT0gJ3N0cmluZycgfHwgX3JlZjIgPT09ICdudW1iZXInIHx8IF9yZWYyID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShyeihkYXRhKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBTdHJpbmcocnooZGF0YSkpO1xuICAgIH1cbiAgfSkpO1xuXG4gIGRlZmluZSgnc3RyU3RyaW5nJywgbHooZnVuY3Rpb24oZGF0YSkge1xuICAgIHJldHVybiBTdHJpbmcocnooZGF0YSkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyQXNjJywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHJ6KHN0cikuY2hhckNvZGVBdCgwKTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX3N0ckNocicsIGx6KGZ1bmN0aW9uKGkpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShyeihpKSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJBdCcsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHJ6KHN0cilbc3RyQ29vcmQocnooc3RyKSwgcnooaW5kZXgpKV07XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX3N0clN0YXJ0c1dpdGgnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgICByZXR1cm4gYm9vbGVhbkZvcihyeihzdHIpLnN1YnN0cmluZygwLCByeihwcmVmaXgpLmxlbmd0aCkgPT09IHJ6KHByZWZpeCkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJMZW4nLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gcnooc3RyKS5sZW5ndGg7XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJUb0xvd2VyQ2FzZScsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiByeihzdHIpLnRvTG93ZXJDYXNlKCk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJUb1VwcGVyQ2FzZScsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiByeihzdHIpLnRvVXBwZXJDYXNlKCk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJSZXBsYWNlJywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHBhdCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlcGwpIHtcbiAgICAgICAgcmV0dXJuIHJ6KHN0cikucmVwbGFjZShyeihwYXQpLCByeihyZXBsKSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBzdHJDb29yZCA9IGZ1bmN0aW9uKHN0ciwgY29vcmQpIHtcbiAgICBpZiAoY29vcmQgPCAwKSB7XG4gICAgICByZXR1cm4gc3RyLmxlbmd0aCArIGNvb3JkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29vcmQ7XG4gICAgfVxuICB9O1xuXG4gIGRlZmluZSgnX3N0clN1YnN0cmluZycsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBmdW5jdGlvbihzdGFydCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVuZCkge1xuICAgICAgICB2YXIgYSwgYjtcblxuICAgICAgICBhID0gc3RyQ29vcmQocnooc3RyKSwgcnooc3RhcnQpKTtcbiAgICAgICAgYiA9IHN0ckNvb3JkKHJ6KHN0ciksIHJ6KGVuZCkpO1xuICAgICAgICBpZiAoYiA8IGEgJiYgcnooZW5kKSA9PT0gMCkge1xuICAgICAgICAgIGIgPSByeihzdHIpLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnooc3RyKS5zdWJzdHJpbmcoYSwgYik7XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJTcGxpdCcsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBmdW5jdGlvbihwYXQpIHtcbiAgICAgIHJldHVybiBjb25zRnJvbShyeihzdHIpLnNwbGl0KHJ6KHBhdCkgaW5zdGFuY2VvZiBSZWdFeHAgPyByeihwYXQpIDogbmV3IFJlZ0V4cChyeihwYXQpKSkpO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJDYXQnLCBseihmdW5jdGlvbihsaXN0KSB7XG4gICAgcmV0dXJuIF8ubWFwKHJ6KGxpc3QpLnRvQXJyYXkoKSwgZnVuY3Rpb24oZWwpIHtcbiAgICAgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBlbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByeihMX3Nob3cpKGx6KGVsKSk7XG4gICAgICB9XG4gICAgfSkuam9pbignJyk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ19zdHJBZGQnLCBseihmdW5jdGlvbihzMSkge1xuICAgIHJldHVybiBmdW5jdGlvbihzMikge1xuICAgICAgcmV0dXJuIHJ6KHMxKSArIHJ6KHMyKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyTWF0Y2gnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ocGF0KSB7XG4gICAgICB2YXIgZ3JvdXBzLCBtLCBwb3M7XG5cbiAgICAgIG0gPSByeihzdHIpLm1hdGNoKChyeihwYXQpIGluc3RhbmNlb2YgUmVnRXhwID8gcnoocGF0KSA6IG5ldyBSZWdFeHAocnoocGF0KSkpKTtcbiAgICAgIGlmIChtKSB7XG4gICAgICAgIGdyb3VwcyA9IFtdO1xuICAgICAgICBwb3MgPSAxO1xuICAgICAgICB3aGlsZSAobVtwb3NdKSB7XG4gICAgICAgICAgZ3JvdXBzLnB1c2gobVtwb3MrK10pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbS5pbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gY29uc0Zyb20oW21bMF0sIGNvbnNGcm9tKGdyb3VwcyksIG0uaW5kZXgsIG0uaW5wdXRdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY29uc0Zyb20oW21bMF0sIGNvbnNGcm9tKGdyb3VwcyldKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE5pbDtcbiAgICAgIH1cbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfc3RyVG9MaXN0JywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0clRvTGlzdChyeihzdHIpKTtcbiAgfSkpO1xuXG4gIHN0clRvTGlzdCA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmIChzdHIgPT09ICcnKSB7XG4gICAgICByZXR1cm4gTmlsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29ucyhzdHJbMF0sIHN0clRvTGlzdChzdHIuc3Vic3RyaW5nKDEpKSk7XG4gICAgfVxuICB9O1xuXG4gIGRlZmluZSgnX3N0ckZyb21MaXN0JywgbHooZnVuY3Rpb24obGlzdCkge1xuICAgIHJldHVybiBzdHJGcm9tTGlzdChyeihsaXN0KSk7XG4gIH0pKTtcblxuICBzdHJGcm9tTGlzdCA9IGZ1bmN0aW9uKGxpc3QpIHtcbiAgICBpZiAobGlzdCBpbnN0YW5jZW9mIExlaXN1cmVfbmlsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBoZWFkKGxpc3QpICsgc3RyRnJvbUxpc3QodGFpbChsaXN0KSk7XG4gICAgfVxuICB9O1xuXG4gIGRlZmluZSgnX3JlZ2V4cCcsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKHJ6KHN0cikpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdfcmVnZXhwRmxhZ3MnLCBseihmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZmxhZ3MpIHtcbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHJ6KHN0ciksIHJ6KGZsYWdzKSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnX2pzb25QYXJzZScsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBmdW5jdGlvbihmYWlsQ29udCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHN1Y2Nlc3NDb250KSB7XG4gICAgICAgIHZhciBlcnIsIHA7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBwID0gSlNPTi5wYXJzZShyeihzdHIpKTtcbiAgICAgICAgICByZXR1cm4gcnooc3VjY2Vzc0NvbnQpKGx6KHApKTtcbiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgICAgIHJldHVybiByeihmYWlsQ29udCkobHooZXJyKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnanNvblN0cmluZ2lmeScsIGx6KGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBmdW5jdGlvbihmYWlsQ29udCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHN1Y2Nlc3NDb250KSB7XG4gICAgICAgIHZhciBlcnIsIHM7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzID0gSlNPTi5zdHJpbmdpZnkocnoob2JqKSk7XG4gICAgICAgICAgcmV0dXJuIHJ6KHN1Y2Nlc3NDb250KShseihzKSk7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgICByZXR1cm4gcnooZmFpbENvbnQpKGx6KGVycikpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2dldFByb3BlcnRpZXMnLCBseihmdW5jdGlvbihmdW5jKSB7XG4gICAgdmFyIF9yZWYyO1xuXG4gICAgaWYgKChfcmVmMiA9IHJ6KGZ1bmMpKSAhPSBudWxsID8gX3JlZjIucHJvcGVydGllcyA6IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIHJ6KExfc29tZSkobHoocnooZnVuYykucHJvcGVydGllcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcnooTF9ub25lKTtcbiAgICB9XG4gIH0pKTtcblxuICBkZWZpbmUoJ2xvZycsIGx6KGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBmdW5jdGlvbihyZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKFN0cmluZyhyeihzdHIpKSk7XG4gICAgICByZXR1cm4gcnoocmVzKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgbWFrZU1vbmFkID0gZnVuY3Rpb24oZ3V0cykge1xuICAgIHZhciBtO1xuXG4gICAgbSA9IGZ1bmN0aW9uKCkge307XG4gICAgbS5fX3Byb3RvX18gPSBNb25hZC5wcm90b3R5cGU7XG4gICAgbS5jbWQgPSBndXRzO1xuICAgIG0udHlwZSA9ICdtb25hZCc7XG4gICAgcmV0dXJuIG07XG4gIH07XG5cbiAgbWFrZVN5bmNNb25hZCA9IGZ1bmN0aW9uKGd1dHMpIHtcbiAgICB2YXIgbTtcblxuICAgIG0gPSBtYWtlTW9uYWQoZ3V0cyk7XG4gICAgbS5zeW5jID0gdHJ1ZTtcbiAgICByZXR1cm4gbTtcbiAgfTtcblxuICBuZXh0TW9uYWQgPSBmdW5jdGlvbihjb250KSB7XG4gICAgcmV0dXJuIGNvbnQ7XG4gIH07XG5cbiAgcmVwbGFjZUVyciA9IGZ1bmN0aW9uKGVyciwgbXNnKSB7XG4gICAgZXJyLm1lc3NhZ2UgPSBtc2c7XG4gICAgcmV0dXJuIGVycjtcbiAgfTtcblxuICBkZWZhdWx0RW52LndyaXRlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHByb2Nlc3Muc3Rkb3V0LndyaXRlKHN0cik7XG4gIH07XG5cbiAgZGVmYXVsdEVudi5lcnIgPSBmdW5jdGlvbihlcnIpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICByZXR1cm4gdGhpcy53cml0ZShcIkVOViBFcnJvcjogXCIgKyAoKF9yZWYyID0gZXJyLnN0YWNrKSAhPSBudWxsID8gX3JlZjIgOiBlcnIpKTtcbiAgfTtcblxuICBkZWZhdWx0RW52LnByb21wdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgcHJvbXB0aW5nIVwiKTtcbiAgfTtcblxuICBtb25hZE1vZGVTeW5jID0gZmFsc2U7XG5cbiAgZ2V0TW9uYWRTeW5jTW9kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtb25hZE1vZGVTeW5jO1xuICB9O1xuXG4gIHdpdGhTeW5jTW9kZURvID0gZnVuY3Rpb24obmV3TW9kZSwgYmxvY2spIHtcbiAgICB2YXIgZXJyLCBvbGRNb2RlO1xuXG4gICAgb2xkTW9kZSA9IG1vbmFkTW9kZVN5bmM7XG4gICAgbW9uYWRNb2RlU3luYyA9IG5ld01vZGU7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBibG9jaygpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiRVJSOiBcIiArIGVyci5zdGFjayk7XG4gICAgfSBmaW5hbGx5IHtcblxuICAgIH1cbiAgfTtcblxuICBydW5Nb25hZCA9IGZ1bmN0aW9uKG1vbmFkLCBlbnYsIGNvbnQpIHtcbiAgICBlbnYgPSBlbnYgIT0gbnVsbCA/IGVudiA6IHJvb3QuZGVmYXVsdEVudjtcbiAgICByZXR1cm4gd2l0aFN5bmNNb2RlRG8odHJ1ZSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3UnVuTW9uYWQobW9uYWQsIGVudiwgY29udCwgW10pO1xuICAgIH0pO1xuICB9O1xuXG4gIGlzTW9uYWQgPSBmdW5jdGlvbihtKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtID09PSAnZnVuY3Rpb24nICYmIChtLmNtZCAhPSBudWxsKTtcbiAgfTtcblxuICBjb250aW51ZU1vbmFkcyA9IGZ1bmN0aW9uKGNvbnRTdGFjaywgZW52KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHdpdGhTeW5jTW9kZURvKGZhbHNlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ld1J1bk1vbmFkKHJlc3VsdCwgZW52LCBudWxsLCBjb250U3RhY2spO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICBhc3luY01vbmFkID0ge1xuICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIjxhc3luY01vbmFkUmVzdWx0PlwiO1xuICAgIH1cbiAgfTtcblxuICB3YXJuQXN5bmMgPSBmYWxzZTtcblxuICBzZXRXYXJuQXN5bmMgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgIHJldHVybiB3YXJuQXN5bmMgPSBzdGF0ZTtcbiAgfTtcblxuICBuZXdSdW5Nb25hZCA9IGZ1bmN0aW9uKG1vbmFkLCBlbnYsIGNvbnQsIGNvbnRTdGFjaykge1xuICAgIHZhciBlcnIsIHJlc3VsdDtcblxuICAgIGlmIChjb250KSB7XG4gICAgICBjb250U3RhY2sucHVzaChjb250KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmIChpc01vbmFkKG1vbmFkKSkge1xuICAgICAgICAgIGlmIChtb25hZC5iaW5kaW5nKSB7XG4gICAgICAgICAgICBjb250U3RhY2sucHVzaCgoZnVuY3Rpb24oYm5kKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJuZChseih4KSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KShyeihtb25hZC5iaW5kaW5nKSkpO1xuICAgICAgICAgICAgbW9uYWQgPSByeihtb25hZC5tb25hZCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFtb25hZC5zeW5jKSB7XG4gICAgICAgICAgICBtb25hZE1vZGVTeW5jID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAod2FybkFzeW5jKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYXN5bmMgbW9uYWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb25hZC5jbWQoZW52LCBjb250aW51ZU1vbmFkcyhjb250U3RhY2ssIGVudikpO1xuICAgICAgICAgICAgcmV0dXJuIGFzeW5jTW9uYWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdCA9IG1vbmFkLmNtZChlbnYsIGlkZW50aXR5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb25hZE1vZGVTeW5jID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQgPSBtb25hZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbnRTdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIG1vbmFkID0gY29udFN0YWNrLnBvcCgpKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICBlcnIgPSByZXBsYWNlRXJyKGVyciwgXCJcXG5FUlJPUiBSVU5OSU5HIE1PTkFELCBNT05BRDogXCIgKyBtb25hZCArIFwiLCBFTlY6IFwiICsgZW52ICsgXCIuLi5cXG5cIiArIGVyci5tZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUubG9nKGVyci5zdGFjayk7XG4gICAgICBpZiAoZW52LmVycm9ySGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBlbnYuZXJyb3JIYW5kbGVycy5wb3AoKShlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBNb25hZCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBNb25hZCgpIHt9XG5cbiAgICBNb25hZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIk1vbmFkOiBcIiArICh0aGlzLmNtZC50b1N0cmluZygpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1vbmFkO1xuXG4gIH0pKCk7XG5cbiAgZ2xvYmFsLkxfcnVuTW9uYWRzID0gZnVuY3Rpb24obW9uYWRBcnJheSkge1xuICAgIG1vbmFkQXJyYXkucmV2ZXJzZSgpO1xuICAgIHJldHVybiBuZXdSdW5Nb25hZCgwLCBkZWZhdWx0RW52LCBudWxsLCBtb25hZEFycmF5KTtcbiAgfTtcblxuICBkZWZpbmUoJ2RlZmluZScsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJpdHkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzcmMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRlZikge1xuICAgICAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICAgICAgZGVmaW5lKHJ6KG5hbWUpLCBkZWYsIHJ6KGFyaXR5KSwgcnooc3JjKSk7XG4gICAgICAgICAgICByZXR1cm4gY29udCgodHlwZW9mIExfdHJ1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBMX3RydWUgIT09IG51bGwgPyByeihMX3RydWUpIDogX3RydWUpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYmluZCcsIGx6KGZ1bmN0aW9uKG0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYmluZGluZykge1xuICAgICAgdmFyIGJpbmRNb25hZDtcblxuICAgICAgYmluZE1vbmFkID0gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge30pO1xuICAgICAgYmluZE1vbmFkLm1vbmFkID0gbTtcbiAgICAgIGJpbmRNb25hZC5iaW5kaW5nID0gYmluZGluZztcbiAgICAgIHJldHVybiBiaW5kTW9uYWQ7XG4gICAgfTtcbiAgfSkpO1xuXG4gIHZhbHVlcyA9IHt9O1xuXG4gIGRlZmluZSgncHJvdGVjdCcsIGx6KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHZhciBobmQ7XG5cbiAgICAgIGhuZCA9IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlBST1RFQ1RFRCBFUlJPUjogXCIgKyBlcnIuc3RhY2spO1xuICAgICAgICByZXR1cm4gY29udChsZWZ0KGVyci5zdGFjaykpO1xuICAgICAgfTtcbiAgICAgIGVudi5lcnJvckhhbmRsZXJzLnB1c2goaG5kKTtcbiAgICAgIHJldHVybiBydW5Nb25hZChyeih2YWx1ZSksIGVudiwgKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICBpZiAoZW52LmVycm9ySGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGVudi5lcnJvckhhbmRsZXJzW2Vudi5lcnJvckhhbmRsZXJzLmxlbmd0aCAtIDFdID09PSBobmQpIHtcbiAgICAgICAgICAgIGVudi5lcnJvckhhbmRsZXJzLnBvcCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXy5jb250YWlucyhlbnYuZXJyb3JIYW5kbGVycywgaG5kKSkge1xuICAgICAgICAgICAgd2hpbGUgKGVudi5lcnJvckhhbmRsZXJzW2Vudi5lcnJvckhhbmRsZXJzLmxlbmd0aCAtIDFdICE9PSBobmQpIHtcbiAgICAgICAgICAgICAgZW52LmVycm9ySGFuZGxlcnMucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250KHJpZ2h0KHJlc3VsdCkpO1xuICAgICAgfSksIFtdKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGFjdG9ycyA9IHt9O1xuXG4gIGRlZmluZSgnYWN0b3InLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIGFjdG9yc1tuYW1lXSA9IGZ1bmM7XG4gICAgICBmdW5jLmVudiA9IHtcbiAgICAgICAgdmFsdWVzOiB7fVxuICAgICAgfTtcbiAgICAgIHJldHVybiBmdW5jLmVudi5fX3Byb3RvX18gPSBkZWZhdWx0RW52O1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ3NlbmQnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG1zZykge1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcnVuTW9uYWQocnooYWN0b3JzW25hbWVdKShtc2cpLCByeihhY3RvcnNbbmFtZV0pLmVudik7XG4gICAgICB9KSwgMSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnaGFzVmFsdWUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gY29udChib29sZWFuRm9yKHZhbHVlc1tyeihuYW1lKV0gIT0gbnVsbCkpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdnZXRWYWx1ZU9yJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICB2YXIgX3JlZjI7XG5cbiAgICAgICAgcmV0dXJuIGNvbnQoKF9yZWYyID0gdmFsdWVzW3J6KG5hbWUpXSkgIT0gbnVsbCA/IF9yZWYyIDogcnooZGVmYXVsdFZhbHVlKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdnZXRWYWx1ZScsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIGlmICghKHJ6KG5hbWUpIGluIHZhbHVlcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsdWUgbmFtZWQgJ1wiICsgKHJ6KG5hbWUpKSArIFwiJ1wiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250KHZhbHVlc1tyeihuYW1lKV0pO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdzZXRWYWx1ZScsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICB2YWx1ZXNbcnoobmFtZSldID0gcnoodmFsdWUpO1xuICAgICAgICByZXR1cm4gY29udChfdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdkZWxldGVWYWx1ZScsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIGRlbGV0ZSB2YWx1ZXNbcnoobmFtZSldO1xuICAgICAgcmV0dXJuIGNvbnQoX3RydWUpO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgc2V0VmFsdWUgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlc1trZXldID0gdmFsdWU7XG4gIH07XG5cbiAgZ2V0VmFsdWUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gdmFsdWVzW2tleV07XG4gIH07XG5cbiAgZGVmaW5lKCdlbnZIYXMnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gY29udChib29sZWFuRm9yKGVudi52YWx1ZXNbcnoobmFtZSldICE9IG51bGwpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZW52R2V0T3InLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHZhciBfcmVmMjtcblxuICAgICAgICByZXR1cm4gY29udCgoX3JlZjIgPSBlbnYudmFsdWVzW3J6KG5hbWUpXSkgIT0gbnVsbCA/IF9yZWYyIDogcnooZGVmYXVsdFZhbHVlKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdlbnZHZXQnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICBpZiAoIShyeihuYW1lKSBpbiBlbnYudmFsdWVzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB2YWx1ZSBuYW1lZCAnXCIgKyAocnoobmFtZSkpICsgXCInXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnQoZW52LnZhbHVlc1tyeihuYW1lKV0pO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdlbnZTZXQnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgZW52LnZhbHVlc1tyeihuYW1lKV0gPSByeih2YWx1ZSk7XG4gICAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ2VudkRlbGV0ZScsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIGRlbGV0ZSBlbnYudmFsdWVzW3J6KG5hbWUpXTtcbiAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIHNldFZhbHVlKCdtYWNyb3MnLCBOaWwpO1xuXG4gIGRlZmluZSgnZGVmTWFjcm8nLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRlZikge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHZhbHVlcy5tYWNyb3MgPSBjb25zKGNvbnMocnoobmFtZSksIHJ6KGRlZikpLCB2YWx1ZXMubWFjcm9zKTtcbiAgICAgICAgcmV0dXJuIGNvbnQoX3RydWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZnVuY3MnLCBseihtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgIGNvbnNvbGUubG9nKFwiTGVpc3VyZSBmdW5jdGlvbnM6XFxuXCIgKyAoXyhnbG9iYWwubGVpc3VyZUZ1bmNOYW1lcy50b0FycmF5KCkpLnNvcnQoKS5qb2luKCdcXG4nKSkpO1xuICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgfSkpKTtcblxuICBkZWZpbmUoJ2Z1bmNTcmMnLCBseihmdW5jdGlvbihmdW5jKSB7XG4gICAgaWYgKHR5cGVvZiByeihmdW5jKSA9PT0gJ2Z1bmN0aW9uJyAmJiByeihmdW5jKS5zcmMpIHtcbiAgICAgIHJldHVybiBzb21lKHJ6KGZ1bmMpLnNyYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub25lO1xuICAgIH1cbiAgfSkpO1xuXG4gIGRlZmluZSgnYXN0Mkpzb24nLCBseihmdW5jdGlvbihhc3QpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXN0Mkpzb24ocnooYXN0KSkpO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdvdmVycmlkZScsIGx6KGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmV3RnVuYykge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHZhciBuLCBvbGREZWY7XG5cbiAgICAgICAgbiA9IFwiTF9cIiArIChuYW1lU3ViKHJ6KG5hbWUpKSk7XG4gICAgICAgIG9sZERlZiA9IGdsb2JhbFtuXTtcbiAgICAgICAgaWYgKCFvbGREZWYpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBkZWZpbml0aW9uIGZvciBcIiArIChyeihuYW1lKSkpO1xuICAgICAgICB9XG4gICAgICAgIGdsb2JhbFtuXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiByeihuZXdGdW5jKShvbGREZWYpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY29udChfdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdwcmludCcsIGx6KGZ1bmN0aW9uKG1zZykge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgdmFyIG07XG5cbiAgICAgIG0gPSByeihtc2cpO1xuICAgICAgZW52LndyaXRlKFwiXCIgKyAoZW52LnByZXNlbnRWYWx1ZShtKSkgKyBcIlxcblwiKTtcbiAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnd3JpdGUnLCBseihmdW5jdGlvbihtc2cpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIGVudi53cml0ZShlbnYucHJlc2VudFZhbHVlKHJ6KG1zZykpKTtcbiAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgncmVhZEZpbGUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHJldHVybiByZWFkRmlsZShyeihuYW1lKSwgZnVuY3Rpb24oZXJyLCBjb250ZW50cykge1xuICAgICAgICByZXR1cm4gY29udCgoZXJyID8gbGVmdChlcnIuc3RhY2spIDogcmlnaHQoY29udGVudHMpKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgncmVhZERpcicsIGx6KGZ1bmN0aW9uKGRpcikge1xuICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gcmVhZERpcihyeihkaXIpLCBmdW5jdGlvbihlcnIsIGZpbGVzKSB7XG4gICAgICAgIHJldHVybiBjb250KChlcnIgPyBsZWZ0KGVyci5zdGFjaykgOiByaWdodChmaWxlcykpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCd3cml0ZUZpbGUnLCBseihmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHJldHVybiB3cml0ZUZpbGUocnoobmFtZSksIHJ6KGRhdGEpLCBmdW5jdGlvbihlcnIsIGNvbnRlbnRzKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnQoKGVyciA/IGxlZnQoZXJyLnN0YWNrKSA6IHJpZ2h0KGNvbnRlbnRzKSkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pKTtcblxuICBkZWZpbmUoJ3N0YXRGaWxlJywgbHooZnVuY3Rpb24oZmlsZSkge1xuICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gc3RhdEZpbGUocnooZmlsZSksIGZ1bmN0aW9uKGVyciwgc3RhdHMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQoKGVyciA/IGxlZnQoZXJyLnN0YWNrKSA6IHJpZ2h0KHN0YXRzKSkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pKTtcblxuICBkZWZpbmUoJ3Byb21wdCcsIGx6KGZ1bmN0aW9uKG1zZykge1xuICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gZW52LnByb21wdChTdHJpbmcocnoobXNnKSksIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBjb250KGlucHV0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KSk7XG5cbiAgZGVmaW5lKCdyYW5kJywgbHoobWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICByZXR1cm4gY29udChNYXRoLnJhbmRvbSgpKTtcbiAgfSkpKTtcblxuICBkZWZpbmUoJ2pzJywgbHooZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICB2YXIgZXJyLCByZXN1bHQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGV2YWwocnooc3RyKSk7XG4gICAgICAgIHJldHVybiBjb250KHJpZ2h0KHJlc3VsdCkpO1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgcmV0dXJuIGNvbnQobGVmdChlcnIpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnZGVsYXknLCBseihmdW5jdGlvbih0aW1lb3V0KSB7XG4gICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQoX3RydWUpO1xuICAgICAgfSksIHJ6KHRpbWVvdXQpKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnYWx0RGVmJywgbHooZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihhbHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihhcml0eSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZGVmKSB7XG4gICAgICAgICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgICAgIHZhciBhbHRzLCBpLCBpbmZvLCBuZXdEZWYsIG5tO1xuXG4gICAgICAgICAgICBpbmZvID0gZnVuY3Rpb25JbmZvW3J6KG5hbWUpXTtcbiAgICAgICAgICAgIGlmICghaW5mbykge1xuICAgICAgICAgICAgICBpbmZvID0gZnVuY3Rpb25JbmZvW3J6KG5hbWUpXSA9IHtcbiAgICAgICAgICAgICAgICBzcmM6ICcnLFxuICAgICAgICAgICAgICAgIGFyaXR5OiAtMSxcbiAgICAgICAgICAgICAgICBhbHRzOiB7fSxcbiAgICAgICAgICAgICAgICBhbHRMaXN0OiBbXVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpbmZvLmFsdHNbcnooYWx0KV0pIHtcbiAgICAgICAgICAgICAgaW5mby5hbHRMaXN0LnB1c2gocnooYWx0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmZvLmFsdHNbcnooYWx0KV0gPSBkZWY7XG4gICAgICAgICAgICBhbHRzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYyLCBfcmVzdWx0cztcblxuICAgICAgICAgICAgICBfcmVmMiA9IGluZm8uYWx0TGlzdDtcbiAgICAgICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgIGkgPSBfcmVmMltfaV07XG4gICAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChpbmZvLmFsdHNbaV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICBuZXdEZWYgPSBjdXJyeShyeihhcml0eSksIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgICAgdmFyIGFyZywgb3B0LCByZXMsIF9pLCBfaiwgX2ssIF9sZW4sIF9sZW4xLCBfbGVuMjtcblxuICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGFsdHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhbHQgPSBhbHRzW19pXTtcbiAgICAgICAgICAgICAgICBvcHQgPSByeihhbHQpO1xuICAgICAgICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IGFyZ3MubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgICAgICAgICBhcmcgPSBhcmdzW19qXTtcbiAgICAgICAgICAgICAgICAgIG9wdCA9IG9wdChhcmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2V0VHlwZShvcHQpID09PSAnc29tZScpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQobHooZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnooeCk7XG4gICAgICAgICAgICAgICAgICB9KSkobHooX2ZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChpbmZvLm1haW5EZWYpIHtcbiAgICAgICAgICAgICAgICByZXMgPSByeihpbmZvLm1haW5EZWYpO1xuICAgICAgICAgICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IGFyZ3MubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XG4gICAgICAgICAgICAgICAgICBhcmcgPSBhcmdzW19rXTtcbiAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcyhhcmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGRlZmF1bHQgZGVmaW5pdGlvbiBmb3IgXCIgKyAocnoobmFtZSkpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbm0gPSBcIkxfXCIgKyAobmFtZVN1YihyeihuYW1lKSkpO1xuICAgICAgICAgICAgZ2xvYmFsW25tXSA9IGdsb2JhbC5sZWlzdXJlRnVuY05hbWVzW25tXSA9IG5ld0RlZjtcbiAgICAgICAgICAgIHJldHVybiBjb250KGRlZik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0pKTtcblxuICBjdXJyeSA9IGZ1bmN0aW9uKGFyaXR5LCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHN1YmN1cnJ5KGFyaXR5LCBmdW5jLCBbXSk7XG4gICAgfTtcbiAgfTtcblxuICBzdWJjdXJyeSA9IGZ1bmN0aW9uKGFyaXR5LCBmdW5jLCBhcmdzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgICAgYXJncyA9IGFyZ3MgIT0gbnVsbCA/IGFyZ3MgOiBbXTtcbiAgICAgIGFyZ3MucHVzaChhcmcpO1xuICAgICAgaWYgKGFyaXR5ID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jKGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN1YmN1cnJ5KGFyaXR5IC0gMSwgZnVuYywgYXJncyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBtYWtlSGFtdCA9IGZ1bmN0aW9uKGhhbXQpIHtcbiAgICB2YXIgdDtcblxuICAgIHQgPSBzZXREYXRhVHlwZSgoZnVuY3Rpb24oKSB7fSksICdoYW10Jyk7XG4gICAgdC5oYW10ID0gaGFtdDtcbiAgICB0LnR5cGUgPSAnaGFtdCc7XG4gICAgcmV0dXJuIHQ7XG4gIH07XG5cbiAgaGFtdCA9IG1ha2VIYW10KGFtdC5UcmllKCkpO1xuXG4gIGRlZmluZSgnaGFtdCcsIGx6KGhhbXQpKTtcblxuICBkZWZpbmUoJ2hhbXRXaXRoJywgbHooZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oaGFtdCkge1xuICAgICAgICByZXR1cm4gbWFrZUhhbXQoYW10LmFzc29jKHJ6KGhhbXQpLmhhbXQsIHJ6KGtleSksIHJ6KHZhbHVlKSkpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdoYW10RmV0Y2gnLCBseihmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaGFtdCkge1xuICAgICAgcmV0dXJuIGFtdC5nZXQocnooaGFtdCkuaGFtdCwgcnooa2V5KSk7XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnaGFtdEdldCcsIGx6KGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihoYW10KSB7XG4gICAgICB2YXIgdjtcblxuICAgICAgdiA9IGFtdC5nZXQocnooaGFtdCkuaGFtdCwgcnooa2V5KSk7XG4gICAgICBpZiAodiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiBzb21lKHYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICB9XG4gICAgfTtcbiAgfSkpO1xuXG4gIGRlZmluZSgnaGFtdFdpdGhvdXQnLCBseihmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaGFtdCkge1xuICAgICAgcmV0dXJuIG1ha2VIYW10KGFtdC5kaXNzb2MocnooaGFtdCkuaGFtdCwgcnooa2V5KSkpO1xuICAgIH07XG4gIH0pKTtcblxuICBtZW1vID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLm1lbW8gfHwgKGZ1bmMubWVtbyA9IGZ1bmMoKSk7XG4gICAgfTtcbiAgfTtcblxuICBkZWZpbmUoJ2hhbXRQYWlycycsIGx6KGZ1bmN0aW9uKGhhbXQpIHtcbiAgICByZXR1cm4gbmV4dE5vZGUoc2ltcHlDb25zKHJ6KGhhbXQpLmhhbXQsIG51bGwpKTtcbiAgfSkpO1xuXG4gIG5leHROb2RlID0gZnVuY3Rpb24oc3RhY2spIHtcbiAgICB2YXIgY2hpbGQsIGssIGtleSwgbm9kZSwgdmFsdWUsIF9yZWYyLCBfcmVmMztcblxuICAgIGlmIChzdGFjayA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJ6KExfbmlsKTtcbiAgICB9XG4gICAgbm9kZSA9IHN0YWNrLmhlYWQ7XG4gICAgc3RhY2sgPSBzdGFjay50YWlsO1xuICAgIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgICBjYXNlICd0cmllJzpcbiAgICAgICAgX3JlZjIgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGsgaW4gX3JlZjIpIHtcbiAgICAgICAgICBjaGlsZCA9IF9yZWYyW2tdO1xuICAgICAgICAgIHN0YWNrID0gc2ltcHlDb25zKGNoaWxkLCBzdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHROb2RlKHN0YWNrKTtcbiAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgcmV0dXJuIHJ6KExfYWNvbnMpKGx6KG5vZGUua2V5KSkobHoobm9kZS52YWx1ZSkpKG1lbW8oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHROb2RlKHN0YWNrKTtcbiAgICAgICAgfSkpO1xuICAgICAgY2FzZSAnaGFzaG1hcCc6XG4gICAgICAgIF9yZWYzID0gbm9kZS52YWx1ZXM7XG4gICAgICAgIGZvciAoa2V5IGluIF9yZWYzKSB7XG4gICAgICAgICAgdmFsdWUgPSBfcmVmM1trZXldO1xuICAgICAgICAgIHN0YWNrID0gc2ltcHlDb25zKHZhbHVlLCBzdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHROb2RlKHN0YWNrKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhcIlVOS05PV04gSEFNVCBOT0RFIFRZUEU6IFwiICsgbm9kZS50eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgZGVmaW5lKCd0cmFtcG9saW5lQ2FsbCcsIGx6KGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICB2YXIgcmV0O1xuXG4gICAgcmV0ID0gcnooZnVuYyk7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGlmICh0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nICYmIHJldC50cmFtcG9saW5lKSB7XG4gICAgICAgIHJldCA9IHJldCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cbiAgICB9XG4gIH0pKTtcblxuICBkZWZpbmUoJ3RyYW1wb2xpbmUnLCBseihmdW5jdGlvbihmdW5jKSB7XG4gICAgdmFyIGFyaXR5LCBmO1xuXG4gICAgZiA9IHJ6KGZ1bmMpO1xuICAgIGFyaXR5ID0gZnVuY3Rpb25JbmZvW2YubGVpc3VyZU5hbWVdLmFyaXR5O1xuICAgIHJldHVybiB0cmFtcEN1cnJ5KGYsIGFyaXR5KTtcbiAgfSkpO1xuXG4gIHRyYW1wQ3VycnkgPSBmdW5jdGlvbihmdW5jLCBhcml0eSkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICAgIHZhciBhLCByZXN1bHQ7XG5cbiAgICAgIGEgPSByeihhcmcpO1xuICAgICAgaWYgKGFyaXR5ID4gMSkge1xuICAgICAgICByZXR1cm4gdHJhbXBDdXJyeShmdW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICB9KSwgYXJpdHkgLSAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBmdW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJlc3VsdC50cmFtcG9saW5lID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygndG9rZW4nKTtcblxuICBMZWlzdXJlX3Rva2VuLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIlRva2VuKFwiICsgKEpTT04uc3RyaW5naWZ5KHRva2VuU3RyaW5nKHRoaXMpKSkgKyBcIiwgXCIgKyAodG9rZW5Qb3ModGhpcykpICsgXCIpXCI7XG4gIH07XG5cbiAgdG9rZW5TdHJpbmcgPSBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIHQobHooZnVuY3Rpb24odHh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgIHJldHVybiByeih0eHQpO1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgdG9rZW5Qb3MgPSBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIHQobHooZnVuY3Rpb24odHh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgIHJldHVybiByeihwb3MpO1xuICAgICAgfTtcbiAgICB9KSk7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdwYXJlbnMnKTtcblxuICBMZWlzdXJlX3BhcmVucy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJQYXJlbnMoXCIgKyAocGFyZW5zU3RhcnQodGhpcykpICsgXCIsIFwiICsgKHBhcmVuc0VuZCh0aGlzKSkgKyBcIiwgXCIgKyAocGFyZW5zQ29udGVudCh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBwYXJlbnNTdGFydCA9IGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gcChseihmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkge1xuICAgICAgICAgIHJldHVybiByeihzKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIHBhcmVuc0VuZCA9IGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gcChseihmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkge1xuICAgICAgICAgIHJldHVybiByeihlKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSkpO1xuICB9O1xuXG4gIHBhcmVuc0NvbnRlbnQgPSBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuIHAobHooZnVuY3Rpb24ocykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICByZXR1cm4gcnoobCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3RydWUnKTtcblxuICBMZWlzdXJlX3RydWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwidHJ1ZVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnZmFsc2UnKTtcblxuICBMZWlzdXJlX2ZhbHNlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcImZhbHNlXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdsZWZ0Jyk7XG5cbiAgTGVpc3VyZV9sZWZ0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIkxlZnQoXCIgKyAodGhpcyhseihfaWRlbnRpdHkpKShseihfaWRlbnRpdHkpKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3JpZ2h0Jyk7XG5cbiAgTGVpc3VyZV9yaWdodC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJSaWdodChcIiArICh0aGlzKGx6KF9pZGVudGl0eSkpKGx6KF9pZGVudGl0eSkpKSArIFwiKVwiO1xuICB9O1xuXG4gIHJvb3QuX3RydWUgPSBfdHJ1ZTtcblxuICByb290Ll9mYWxzZSA9IF9mYWxzZTtcblxuICByb290LnN0YXRlVmFsdWVzID0gdmFsdWVzO1xuXG4gIHJvb3QucnVuTW9uYWQgPSBydW5Nb25hZDtcblxuICByb290Lm5ld1J1bk1vbmFkID0gbmV3UnVuTW9uYWQ7XG5cbiAgcm9vdC5pc01vbmFkID0gaXNNb25hZDtcblxuICByb290LmlkZW50aXR5ID0gaWRlbnRpdHk7XG5cbiAgcm9vdC5zZXRWYWx1ZSA9IHNldFZhbHVlO1xuXG4gIHJvb3QuZ2V0VmFsdWUgPSBnZXRWYWx1ZTtcblxuICByb290Lm1ha2VNb25hZCA9IG1ha2VNb25hZDtcblxuICByb290Lm1ha2VTeW5jTW9uYWQgPSBtYWtlU3luY01vbmFkO1xuXG4gIHJvb3QucmVwbGFjZUVyciA9IHJlcGxhY2VFcnI7XG5cbiAgcm9vdC5sZWZ0ID0gbGVmdDtcblxuICByb290LnJpZ2h0ID0gcmlnaHQ7XG5cbiAgcm9vdC5nZXRNb25hZFN5bmNNb2RlID0gZ2V0TW9uYWRTeW5jTW9kZTtcblxuICByb290LmFzeW5jTW9uYWQgPSBhc3luY01vbmFkO1xuXG4gIHJvb3Quc2V0V2FybkFzeW5jID0gc2V0V2FybkFzeW5jO1xuXG4gIHJvb3QuY2FsbCA9IGNhbGw7XG5cbiAgcm9vdC5jYWxsTW9uYWQgPSBjYWxsTW9uYWQ7XG5cbiAgcm9vdC5iYXNpY0NhbGwgPSBiYXNpY0NhbGw7XG5cbiAgcm9vdC5ib29sZWFuRm9yID0gYm9vbGVhbkZvcjtcblxuICByb290Lm5ld0NvbnNGcm9tID0gY29uc0Zyb207XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93ICE9PSBudWxsKSB7XG4gICAgd2luZG93LnJ1bk1vbmFkID0gcnVuTW9uYWQ7XG4gICAgd2luZG93LnNldFR5cGUgPSBzZXRUeXBlO1xuICAgIHdpbmRvdy5zZXREYXRhVHlwZSA9IHNldERhdGFUeXBlO1xuICAgIHdpbmRvdy5kZWZhdWx0RW52ID0gZGVmYXVsdEVudjtcbiAgICB3aW5kb3cuaWRlbnRpdHkgPSBpZGVudGl0eTtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9cnVudGltZS5tYXBcbiovXG5cbn0pKHJlcXVpcmUoXCJfX2Jyb3dzZXJpZnlfcHJvY2Vzc1wiKSxzZWxmKSIsIkxfcnVuTW9uYWRzKFtcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImlmXCIpKShsYXp5KDApKShsYXp5KFwiaWYgPSBpZFwiKSkoTF9pZCl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWZldGNoXCIpKShsYXp5KDIpKShsYXp5KFwiYWZldGNoIGsgYWxpc3QgID0gYWxpc3QgKFxcXFxoIHQgRCAuIGggXFxcXGtleSB2YWx1ZSAuIGVxIGtleSBrIHZhbHVlIChhZmV0Y2ggayB0KSkgbmlsXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2spe3JldHVybiBmdW5jdGlvbihMX2FsaXN0KXtyZXR1cm4gcmVzb2x2ZShMX2FsaXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9rZXkpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gcmVzb2x2ZShMX2VxKShMX2tleSkoTF9rKShMX3ZhbHVlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfYWZldGNoKShMX2spKExfdCkpfX0pKCkpfX0pfX0pKCkpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYWNvbnNmXCIpKShsYXp5KDMpKShsYXp5KFwiYWNvbnNmIGtleSB2YWx1ZSBsaXN0ID0gYWNvbnMga2V5IHZhbHVlIChhcmVtb3ZlIGtleSBsaXN0KVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9rZXkpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2Fjb25zKShMX2tleSkoTF92YWx1ZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2FyZW1vdmUpKExfa2V5KShMX2xpc3QpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiYXJlbW92ZVwiKSkobGF6eSgyKSkobGF6eShcImFyZW1vdmUga2V5IGxpc3QgPSBpc05pbCBsaXN0XFxuICBuaWxcXG4gIGVxIChoZWFkIChoZWFkIGxpc3QpKSBrZXlcXG4gICAgYXJlbW92ZSBrZXkgKHRhaWwgbGlzdClcXG4gICAgYWNvbnNQYWlyIChoZWFkIGxpc3QpIChhcmVtb3ZlIGtleSAodGFpbCBsaXN0KSlcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfa2V5KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX2lzTmlsKShMX2xpc3QpKExfbmlsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfZXEpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaGVhZCkoTF9saXN0KSl9fSkoKSkpfX0pKCkpKExfa2V5KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfYXJlbW92ZSkoTF9rZXkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF90YWlsKShMX2xpc3QpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2Fjb25zUGFpcikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9hcmVtb3ZlKShMX2tleSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3RhaWwpKExfbGlzdCkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZk1hY3JvKShsYXp5KFwid2hlblwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gcmVzb2x2ZShMX2xpbmUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY29uZCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2NvbmQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcImRvXCIpKShMX3Jlc3QpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIm5pbFwiKSkoTF9uaWwpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbkdyb3VwKShsYXp5KFwianNbXCIpKShsYXp5KFwiXVwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJqc1tcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShsYXp5KFwianNcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcInN0ckNhdFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiZmxhdHRlblwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfbGlzdGlmeSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCkpfX0pKCkpKX19KSgpKShMX25pbCkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKExfbmlsKSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJodG1sXCIpKShsYXp5KDEpKShsYXp5KFwiaHRtbCB4ID0gXFxcXGYgLiBmIHhcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfeCl9LCAnaHRtbCcpfSwgJ2h0bWwnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiaXN6ZXJvXCIpKShsYXp5KDApKShsYXp5KFwiaXN6ZXJvID0gZXEgMFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2VxKShsYXp5KDApKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicG9zaXRpdmVcIikpKGxhenkoMCkpKGxhenkoXCJwb3NpdGl2ZSA9IDAgPFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMXyR5KShsYXp5KDApKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW4pKGxhenkoXCItLVwiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkVG9rZW4pKGxhenkoXCIrK1wiKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiLS1cIikpKGxhenkoMCkpKGxhenkoXCItLSA9IChmbGlwICgtKSkgMVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2ZsaXApKExfJF8pKGxhenkoMSkpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCIrK1wiKSkobGF6eSgwKSkobGF6eShcIisrID0gKDEgKylcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF8kbykobGF6eSgxKSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImludGVyY2FsYXRlXCIpKShsYXp5KDIpKShsYXp5KFwiaW50ZXJjYWxhdGUgeCBsID0gY29uY2F0IChpbnRlcnNwZXJzZSB4IGwpXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfY29uY2F0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaW50ZXJzcGVyc2UpKExfeCkoTF9sKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidmlzaXRcIikpKGxhenkoMikpKGxhenkoXCJ2aXNpdCBmdW5jIGwgPSBcXFxcXFxcXFxcbiAgcmVzdWx0ID0gZnVuYyBmdW5jIGxcXG4gIC5cXG4gIGlzQ29ucyByZXN1bHRcXG4gICAgcmVzdWx0IFxcXFxoIHQgLiBjb25zICh2aXNpdCBmdW5jIGgpICh2aXNpdCBmdW5jIHQpXFxuICAgIHJlc3VsdFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3Jlc3VsdDtcblxuTF9yZXN1bHQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfZnVuYykoTF9mdW5jKShMX2wpKX19KSgpO1xucmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfcmVzdWx0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfcmVzdWx0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3Zpc2l0KShMX2Z1bmMpKExfaCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF92aXNpdCkoTF9mdW5jKShMX3QpKX19KSgpKX19KX19KSgpKSl9fSkoKSkoTF9yZXN1bHQpfSkoKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzaW1wbGlmeVwiKSkobGF6eSgxKSkobGF6eShcInNpbXBsaWZ5IGV4cHJTdHJpbmcgPSBkb1xcbiAgbGlzdCA8LSBzY2FuTGluZU0gZXhwclN0cmluZ1xcbiAgdmlzaXQgKFxcXFxmdW5jIHggLiBpc1Rva2VuIHggKHRva2VuU3RyaW5nIHgpICgoaXNQYXJlbnMgeCkgKHZpc2l0IGZ1bmMgKHBhcmVuc0NvbnRlbnQgeCkpIHgpKSBsaXN0XCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2V4cHJTdHJpbmcpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3NjYW5MaW5lTSkoTF9leHByU3RyaW5nKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX3Zpc2l0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfaXNUb2tlbikoTF94KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfeCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9pc1BhcmVucykoTF94KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfdmlzaXQpKExfZnVuYykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3BhcmVuc0NvbnRlbnQpKExfeCkpfX0pKCkpKX19KSgpKShMX3gpKX19KSgpKX19KX19KSgpKShMX2xpc3QpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkb2FsbFwiKSkobGF6eSgwKSkobGF6eShcImRvYWxsID0gZm9sZHIxIChcXFxcZWwgcmVzIC4gYmluZCBlbCBcXFxcXyAuIHJlcylcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9mb2xkcjEpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZWwpe3JldHVybiBmdW5jdGlvbihMX3Jlcyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKShMX2VsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfcmVzKX0pfX0pKCkpfX0pfX0pKCkpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJyZXF1aXJlSlNcIikpKGxhenkoMSkpKGxhenkoXCJyZXF1aXJlSlMgZmlsZSA9IGJpbmQgKGdldFZhbHVlICdyZXF1aXJlZEZpbGVzJylcXG4gIFxcXFxmaWxlcyAuIGNvbnRhaW5zIGZpbGVzIGZpbGVcXG4gICAgZmFsc2VcXG4gICAgYmluZCAobG9hZEpTIGZpbGUpXFxuICAgICAgXFxcXHJlc3VsdCAuIHJlc3VsdFxcbiAgICAgICAgXFxcXHggLiBsZWZ0IHhcXG4gICAgICAgIFxcXFxfIC4gYmluZCAoc2V0VmFsdWUgJ3JlcXVpcmVkRmlsZXMnIChjb25zIGZpbGUgZmlsZXMpKVxcbiAgICAgICAgICBcXFxcXyAuIHJpZ2h0IHRydWVcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZmlsZSl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfZ2V0VmFsdWUpKGxhenkoXCJyZXF1aXJlZEZpbGVzXCIpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9maWxlcyl7cmV0dXJuIHJlc29sdmUoTF9jb250YWlucykoTF9maWxlcykoTF9maWxlKShMX2ZhbHNlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2xvYWRKUykoTF9maWxlKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiByZXNvbHZlKExfcmVzdWx0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfbGVmdCkoTF94KX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfXyl7cmV0dXJuIHJlc29sdmUoTF9iaW5kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc2V0VmFsdWUpKGxhenkoXCJyZXF1aXJlZEZpbGVzXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoTF9maWxlKShMX2ZpbGVzKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfX18wKXtyZXR1cm4gcmVzb2x2ZShMX3JpZ2h0KShMX3RydWUpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpKX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibG9hZEpTXCIpKShsYXp5KDEpKShsYXp5KFwibG9hZEpTIGZpbGUgPSBiaW5kIChyZWFkRmlsZSBmaWxlKVxcbiAgXFxcXHJlc3VsdCAuIHJlc3VsdFxcbiAgICBcXFxcZXJyIC4gZXJyXFxuICAgIFxcXFxjb250ZW50cyAuIGpzIGNvbnRlbnRzXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2ZpbGUpe3JldHVybiByZXNvbHZlKExfYmluZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3JlYWRGaWxlKShMX2ZpbGUpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIHJlc29sdmUoTF9yZXN1bHQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gcmVzb2x2ZShMX2Vycil9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2NvbnRlbnRzKXtyZXR1cm4gcmVzb2x2ZShMX2pzKShMX2NvbnRlbnRzKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmaW5kT3B0aW9uXCIpKShsYXp5KDIpKShsYXp5KFwiZmluZE9wdGlvbiBmdW5jIGxpc3QgPSBkb1xcbiAgcmVzdWx0ID0gZnVuYyAoaGVhZCBsaXN0KVxcbiAgaXNOaWwgbGlzdFxcbiAgICBub25lXFxuICAgIGlzTm9uZSByZXN1bHRcXG4gICAgICBmaW5kT3B0aW9uIGZ1bmMgKHRhaWwgbGlzdClcXG4gICAgICByZXN1bHRcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9yZXN1bHQ7XG5cbkxfcmVzdWx0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2Z1bmMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX2xpc3QpKX19KSgpKSl9fSkoKTtcbnJldHVybiByZXNvbHZlKExfaXNOaWwpKExfbGlzdCkoTF9ub25lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaXNOb25lKShMX3Jlc3VsdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2ZpbmRPcHRpb24pKExfZnVuYykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3RhaWwpKExfbGlzdCkpfX0pKCkpKX19KSgpKShMX3Jlc3VsdCkpfX0pKCkpfSkoKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkbGVtcHR5XCIpKShsYXp5KDApKShsYXp5KFwiZGxlbXB0eSA9IGlkXCIpKShMX2lkKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkbFwiKSkobGF6eSgxKSkobGF6eShcImRsIGl0ZW0gPSBcXFxccmVzdCAuIGl0ZW06cmVzdFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfY29ucykoTF9pdGVtKShMX3Jlc3QpfSwgJ2RsJyl9LCAnZGwnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZGxQdXNoXCIpKShsYXp5KDIpKShsYXp5KFwiZGxQdXNoIGxpc3QgaXRlbSA9IGRsQXBwZW5kIGxpc3QgKGRsIGl0ZW0pXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiByZXNvbHZlKExfZGxBcHBlbmQpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2RsKShMX2l0ZW0pKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkbEFwcGVuZFwiKSkobGF6eSgyKSkobGF6eShcImRsQXBwZW5kIGEgYiA9IFxcXFxyZXN0IC4gYSAoYiByZXN0KVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiByZXNvbHZlKExfYSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2IpKExfcmVzdCkpfX0pKCkpfSwgJ2RsQXBwZW5kJyl9fSwgJ2RsQXBwZW5kJykpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInJlbW92ZVwiKSkobGF6eSgyKSkobGF6eShcInJlbW92ZSB4IGwgPSByZW1vdmVJZiAoZXEgeCkgbFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF94KXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX3JlbW92ZUlmKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfZXEpKExfeCkpfX0pKCkpKExfbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwicmVtb3ZlSWZcIikpKGxhenkoMikpKGxhenkoXCJyZW1vdmVJZiBmIGwgPSBmaWx0ZXIgKGNvbXBvc2Ugbm90IGYpIGxcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZil7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIHJlc29sdmUoTF9maWx0ZXIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb21wb3NlKShMX25vdCkoTF9mKSl9fSkoKSkoTF9sKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhbnlcIikpKGxhenkoMikpKGxhenkoXCJhbnkgZiBsID0gZmluZCBmIGwgKFxcXFxlbCAuIHRydWUpIGZhbHNlXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfZmluZCkoTF9mKShMX2wpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZWwpe3JldHVybiByZXNvbHZlKExfdHJ1ZSl9KX19KSgpKShMX2ZhbHNlKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJhbGxcIikpKGxhenkoMikpKGxhenkoXCJhbGwgZiBsID0gbm90IGFueSAoY29tcG9zZSBub3QgZikgbFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX25vdCkoTF9hbnkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb21wb3NlKShMX25vdCkoTF9mKSl9fSkoKSkoTF9sKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJ0YWtlXCIpKShsYXp5KDIpKShsYXp5KFwidGFrZSBuIGxpc3QgPSBwb3NpdGl2ZSBuXFxuICBsaXN0XFxuICAgIFxcXFxoIHQgRCAuIGNvbnMgaCAodGFrZSAoLS0gbikgdClcXG4gICAgbmlsXFxuICBuaWxcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9wb3NpdGl2ZSkoTF9uKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3Rha2UpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF8kXyRfKShMX24pKX19KSgpKShMX3QpKX19KSgpKX19fSl9fSkoKSkoTF9uaWwpKX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwidGFrZVdoaWxlXCIpKShsYXp5KDIpKShsYXp5KFwidGFrZVdoaWxlIHByZWRpY2F0ZSBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gcHJlZGljYXRlIChoZWFkIGxpc3QpXFxuICAgIGNvbnMgaCAodGFrZVdoaWxlIHByZWRpY2F0ZSB0KVxcbiAgICBuaWxcXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wcmVkaWNhdGUpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX3ByZWRpY2F0ZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF90YWtlV2hpbGUpKExfcHJlZGljYXRlKShMX3QpKX19KSgpKSl9fSkoKSkoTF9uaWwpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZHJvcFwiKSkobGF6eSgyKSkobGF6eShcImRyb3AgeCBsaXN0ID0gcG9zaXRpdmUgeFxcbiAgbGlzdFxcbiAgICBcXFxcaCB0IEQgLiBkcm9wICgtLSB4KSB0XFxuICAgIG5pbFxcbiAgbGlzdFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF94KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMX3Bvc2l0aXZlKShMX3gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfZHJvcCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMXyRfJF8pKExfeCkpfX0pKCkpKExfdCl9fX0pfX0pKCkpKExfbmlsKSl9fSkoKSkoTF9saXN0KX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJkcm9wV2hpbGVcIikpKGxhenkoMikpKGxhenkoXCJkcm9wV2hpbGUgcHJlZGljYXRlIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBwcmVkaWNhdGUgaFxcbiAgICBkcm9wV2hpbGUgcHJlZGljYXRlIHRcXG4gICAgbGlzdFxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3ByZWRpY2F0ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiByZXNvbHZlKExfcHJlZGljYXRlKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9kcm9wV2hpbGUpKExfcHJlZGljYXRlKShMX3QpKX19KSgpKShMX2xpc3QpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZHJvcExhc3RcIikpKGxhenkoMikpKGxhenkoXCJkcm9wTGFzdCBuIGxpc3QgPSByZXZlcnNlIChkcm9wIG4gKHJldmVyc2UgbGlzdCkpXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX24pe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfcmV2ZXJzZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2Ryb3ApKExfbikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3JldmVyc2UpKExfbGlzdCkpfX0pKCkpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJib3hcIikpKGxhenkoMikpKGxhenkoXCJib3ggbiBsaXN0ID0gbGlzdCA9PSBuaWxcXG4gIG5pbFxcbiAgWyh0YWtlIG4gbGlzdCkgfCBib3ggbiAoZHJvcCBuIGxpc3QpXVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gcmVzb2x2ZShMXyRwJHApKExfbGlzdCkoTF9uaWwpKExfbmlsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3Rha2UpKExfbikoTF9saXN0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2JveCkoTF9uKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfZHJvcCkoTF9uKShMX2xpc3QpKX19KSgpKSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImF0XCIpKShsYXp5KDIpKShsYXp5KFwiYXQgbCB4ID0gKHggPT0gMCkgKGhlYWQgbCkgKGF0ICh0YWlsIGwpICgtLSAoeCkgKSApXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2wpe3JldHVybiBmdW5jdGlvbihMX3gpe3JldHVybiByZXNvbHZlKExfJHAkcCkoTF94KShsYXp5KDApKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaGVhZCkoTF9sKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2F0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfdGFpbCkoTF9sKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMXyRfJF8pKExfeCkpfX0pKCkpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzZXJpZXNcIikpKGxhenkoMikpKGxhenkoXCJzZXJpZXMgZnVuYyBuID0gbjooc2VyaWVzIGZ1bmMgKGZ1bmMgbikpXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX24pe3JldHVybiByZXNvbHZlKExfY29ucykoTF9uKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc2VyaWVzKShMX2Z1bmMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9mdW5jKShMX24pKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZnJvbVwiKSkobGF6eSgxKSkobGF6eShcImZyb20gbiA9IHNlcmllcyArKyBuXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX24pe3JldHVybiByZXNvbHZlKExfc2VyaWVzKShMXyRvJG8pKExfbil9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmcm9tQnlcIikpKGxhenkoMikpKGxhenkoXCJmcm9tQnkgbiBpbmMgPSBzZXJpZXMgKCgrKSBpbmMpIG5cIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfaW5jKXtyZXR1cm4gcmVzb2x2ZShMX3NlcmllcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMXyRvKShMX2luYykpfX0pKCkpKExfbil9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiZnJvbVRvXCIpKShsYXp5KDIpKShsYXp5KFwiZnJvbVRvIG4gbSA9IHRha2VXaGlsZSAoKD4pIG0pIChmcm9tIG4pXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX24pe3JldHVybiBmdW5jdGlvbihMX20pe3JldHVybiByZXNvbHZlKExfdGFrZVdoaWxlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfJHopKExfbSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9mcm9tKShMX24pKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJmcm9tVG9CeVwiKSkobGF6eSgzKSkobGF6eShcImZyb21Ub0J5IG4gbSBpbmMgPSB0YWtlV2hpbGUgKCg+KSBtKSAoZnJvbUJ5IG4gaW5jKVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uKXtyZXR1cm4gZnVuY3Rpb24oTF9tKXtyZXR1cm4gZnVuY3Rpb24oTF9pbmMpe3JldHVybiByZXNvbHZlKExfdGFrZVdoaWxlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfJHopKExfbSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9mcm9tQnkpKExfbikoTF9pbmMpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY291bnRcIikpKGxhenkoMikpKGxhenkoXCJjb3VudCB4IGwgPSBjb3VudElmIChlcSB4KSBsXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfY291bnRJZikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2VxKShMX3gpKX19KSgpKShMX2wpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNvdW50SWZcIikpKGxhenkoMikpKGxhenkoXCJjb3VudElmIGYgbCA9IChlcSBsIG5pbCkgMFxcbiAgKyAoZiAoaGVhZCBsKSAxIDApIChjb3VudElmIGYgKHRhaWwgbCkpXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfZXEpKExfbCkoTF9uaWwpKGxhenkoMCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF8kbykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2YpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX2wpKX19KSgpKShsYXp5KDEpKShsYXp5KDApKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvdW50SWYpKExfZikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3RhaWwpKExfbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwiY291bnRJZk5vdFwiKSkobGF6eSgyKSkobGF6eShcImNvdW50SWZOb3QgZiBsID0gY291bnRJZiAoXFxcXHguIG5vdCAoZiB4KSkgbFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2NvdW50SWYpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfeCl7cmV0dXJuIHJlc29sdmUoTF9ub3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9mKShMX3gpKX19KSgpKX0pfX0pKCkpKExfbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwib2Rkc1wiKSkobGF6eSgxKSkobGF6eShcIm9kZHMgbCA9IGxcXG4gIFxcXFxoIHQgRCAuIFtoIHwgZXZlbnMgdF1cXG4gIG5pbFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9ldmVucykoTF90KSl9fSkoKSl9fX0pfX0pKCkpKExfbmlsKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImV2ZW5zXCIpKShsYXp5KDEpKShsYXp5KFwiZXZlbnMgbCA9IGxcXG4gIFxcXFxoIHQgRCAuIG9kZHMgdFxcbiAgbmlsXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX29kZHMpKExfdCl9fX0pfX0pKCkpKExfbmlsKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcImNsZWF2ZVwiKSkobGF6eSgxKSkobGF6eShcImNsZWF2ZSBsID0gWyhldmVucyBsKSB8IChvZGRzIGwpXVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9ldmVucykoTF9sKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX29kZHMpKExfbCkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWVyZ2VcIikpKGxhenkoMykpKGxhenkoXCJtZXJnZSBjbXAgYSBiID0gYVxcbiAgXFxcXGFoIGF0IEQgLiBiXFxuICAgIFxcXFxiaCBidCBEIC4gY21wIGFoIGJoXFxuICAgICAgW2FoIHwgKG1lcmdlIGNtcCBhdCBiKV1cXG4gICAgICBbYmggfCAobWVyZ2UgY21wIGEgYnQpXVxcbiAgICBhXFxuICBiXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2NtcCl7cmV0dXJuIGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9hKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2FoKXtyZXR1cm4gZnVuY3Rpb24oTF9hdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9iKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2JoKXtyZXR1cm4gZnVuY3Rpb24oTF9idCl7cmV0dXJuIGZ1bmN0aW9uKExfRF8wKXtyZXR1cm4gcmVzb2x2ZShMX2NtcCkoTF9haCkoTF9iaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKExfYWgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9tZXJnZSkoTF9jbXApKExfYXQpKExfYikpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoTF9iaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX21lcmdlKShMX2NtcCkoTF9hKShMX2J0KSl9fSkoKSkpfX0pKCkpfX19KX19KSgpKShMX2EpfX19KX19KSgpKShMX2IpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtZXJnZVNvcnRcIikpKGxhenkoMikpKGxhenkoXCJtZXJnZVNvcnQgY21wIGwgPSBsXFxuICBcXFxcaCB0IEQgLiBlcSAodGFpbCBsKSBuaWxcXG4gICAgbFxcbiAgICBkb1xcbiAgICAgIGNsID0gY2xlYXZlIGxcXG4gICAgICBlID0gaGVhZCBjbFxcbiAgICAgIG8gPSB0YWlsIGNsXFxuICAgICAgbWVyZ2UgY21wIChtZXJnZVNvcnQgY21wIGUpIChtZXJnZVNvcnQgY21wIG8pXFxuICBuaWxcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY21wKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gcmVzb2x2ZShMX2wpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9lcSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3RhaWwpKExfbCkpfX0pKCkpKExfbmlsKShMX2wpKGZ1bmN0aW9uKCl7XG52YXIgTF9vLCBMX2UsIExfY2w7XG5cbkxfbyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF90YWlsKShMX2NsKSl9fSkoKTtcblxuTF9lID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hlYWQpKExfY2wpKX19KSgpO1xuXG5MX2NsID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NsZWF2ZSkoTF9sKSl9fSkoKTtcbnJldHVybiByZXNvbHZlKExfbWVyZ2UpKExfY21wKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfbWVyZ2VTb3J0KShMX2NtcCkoTF9lKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX21lcmdlU29ydCkoTF9jbXApKExfbykpfX0pKCkpfSl9fX0pfX0pKCkpKExfbmlsKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJzb3J0XCIpKShsYXp5KDEpKShsYXp5KFwic29ydCBsID0gc29ydEJ5IGx0ZSBsXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfc29ydEJ5KShMX2x0ZSkoTF9sKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2RlZmluZSkobGF6eShcInNvcnRCeVwiKSkobGF6eSgyKSkobGF6eShcInNvcnRCeSBjbXAgbCA9IG1lcmdlU29ydCBjbXAgbFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jbXApe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiByZXNvbHZlKExfbWVyZ2VTb3J0KShMX2NtcCkoTF9sKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hZGRUb2tlbikobGF6eShcIi0+XCIpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJta1N0clwiKSkobGF6eSgxKSkobGF6eShcIm1rU3RyIHRvayA9IGNvbmNhdFsnXFxcIicgKHRva2VuU3RyaW5nIHRvaykgJ1xcXCInXVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2spe3JldHVybiByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIlxcXCJcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfdG9rZW5TdHJpbmcpKExfdG9rKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJcXFwiXCIpKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZNYWNybykobGF6eShcImRlZkNhc2VcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF90MywgTF9oMywgTF90MiwgTF9oMiwgTF90MSwgTF9oMTtcblxuTF90MyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF90YWlsKShMX3QyKSl9fSkoKTtcblxuTF9oMyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX3QyKSl9fSkoKTtcblxuTF90MiA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF90YWlsKShMX3QxKSl9fSkoKTtcblxuTF9oMiA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX3QxKSl9fSkoKTtcblxuTF90MSA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF90YWlsKShMX2xpc3QpKX19KSgpO1xuXG5MX2gxID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hlYWQpKExfbGlzdCkpfX0pKCk7XG5yZXR1cm4gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2lzQ29ucykoTF9saXN0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2FuZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2lzQ29ucykoTF90MSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9hbmQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9pc0NvbnMpKExfdDIpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfYW5kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaXNUb2tlblN0cmluZykoTF9oMikobGF6eShcIi5cIikpKX19KSgpKShMX3RydWUpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9tYWtlQ2FzZUFyZ3MpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX21rU3RyKShMX2gxKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX21rU3RyKShMX2gzKSl9fSkoKSkoTF90MykoTF9pZCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXCIpKShMX2xpc3QpKX19KSgpKX0pKCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJtYWtlQ2FzZUFyZ3NcIikpKGxhenkoNSkpKGxhenkoXCJtYWtlQ2FzZUFyZ3Mgb3JpZyBmdW5jTmFtZSBhbHROYW1lIHJlc3QgYXJncyA9IHJlc3RcXG4gIFxcXFxoIHQgRCAuIGlzVG9rZW5TdHJpbmcgaCAnfCdcXG4gICAgbWFrZUNhc2VDb25kaXRpb24gb3JpZyBmdW5jTmFtZSBhbHROYW1lIChhcmdzIG5pbCkgdCBpZFxcbiAgICBtYWtlQ2FzZUFyZ3Mgb3JpZyBmdW5jTmFtZSBhbHROYW1lIHQgKGRsUHVzaCBhcmdzIGgpXFxuICBwYXJzZUVyciBcXFwiRXJyb3IgaW4gY2FzZSBkZWZpbml0aW9uIC0tIGV4cGVjdGVkIGZ1bmMubmFtZSBhcmdzIHwgY29uZGl0aW9uIC0+IGFjdGlvbiwgYnV0IGdvdCBcXFwiIG9yaWdcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb3JpZyl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuY05hbWUpe3JldHVybiBmdW5jdGlvbihMX2FsdE5hbWUpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBmdW5jdGlvbihMX2FyZ3Mpe3JldHVybiByZXNvbHZlKExfcmVzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKExfaCkobGF6eShcInxcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9tYWtlQ2FzZUNvbmRpdGlvbikoTF9vcmlnKShMX2Z1bmNOYW1lKShMX2FsdE5hbWUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9hcmdzKShMX25pbCkpfX0pKCkpKExfdCkoTF9pZCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9tYWtlQ2FzZUFyZ3MpKExfb3JpZykoTF9mdW5jTmFtZSkoTF9hbHROYW1lKShMX3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9kbFB1c2gpKExfYXJncykoTF9oKSl9fSkoKSkpfX0pKCkpfX19KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfcGFyc2VFcnIpKGxhenkoXCJFcnJvciBpbiBjYXNlIGRlZmluaXRpb24gLS0gZXhwZWN0ZWQgZnVuYy5uYW1lIGFyZ3MgfCBjb25kaXRpb24gLT4gYWN0aW9uLCBidXQgZ290IFwiKSkoTF9vcmlnKSl9fSkoKSl9fX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwibWFrZUNhc2VDb25kaXRpb25cIikpKGxhenkoNikpKGxhenkoXCJtYWtlQ2FzZUNvbmRpdGlvbiBvcmlnIGZ1bmNOYW1lIGFsdE5hbWUgYXJncyByZXN0IGNvbmQgPSByZXN0XFxuICBcXFxcaCB0IEQgLiBpc1Rva2VuU3RyaW5nIGggJy0+J1xcbiAgICBmb2xkcjEgYXBwZW5kIFtbJ2FsdERlZicgZnVuY05hbWUgYWx0TmFtZSAobGVuZ3RoIGFyZ3MpICdcXFxcXFxcXCddIGFyZ3MgWycuJyAoY29uZCBuaWwpIFsnc29tZScgdF0gJ25vbmUnXV1cXG4gICAgbWFrZUNhc2VDb25kaXRpb24gb3JpZyBmdW5jTmFtZSBhbHROYW1lIGFyZ3MgdCAoZGxQdXNoIGNvbmQgaClcXG4gcGFyc2VFcnIgXFxcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXFxcIiBvcmlnXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29yaWcpe3JldHVybiBmdW5jdGlvbihMX2Z1bmNOYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9hbHROYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmdzKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9jb25kKXtyZXR1cm4gcmVzb2x2ZShMX3Jlc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIHJlc29sdmUoTF9pc1Rva2VuU3RyaW5nKShMX2gpKGxhenkoXCItPlwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2ZvbGRyMSkoTF9hcHBlbmQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcImFsdERlZlwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKExfZnVuY05hbWUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShMX2FsdE5hbWUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfbGVuZ3RoKShMX2FyZ3MpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIlxcXFxcIikpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShMX2FyZ3MpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIi5cIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29uZCkoTF9uaWwpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJzb21lXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoTF90KShMX25pbCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIm5vbmVcIikpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfbWFrZUNhc2VDb25kaXRpb24pKExfb3JpZykoTF9mdW5jTmFtZSkoTF9hbHROYW1lKShMX2FyZ3MpKExfdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2RsUHVzaCkoTF9jb25kKShMX2gpKX19KSgpKSl9fSkoKSl9fX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9wYXJzZUVycikobGF6eShcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXCIpKShMX29yaWcpKX19KSgpKX19fX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwic2hvd1wiKSkobGF6eShcInNvbWVcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfb2JqKShMX3NvbWUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zb21lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIlNvbWUoXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX29iaikoTF9pZCkoTF9mYWxzZSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiKVwiKSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkoTF9ub25lKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FsdERlZikobGF6eShcInNob3dcIikpKGxhenkoXCJzb21lMlwiKSkobGF6eSgxKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9vYmopKExfc29tZTIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zb21lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc3RyQ2F0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIlNvbWUyKFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9vYmopKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHJlc29sdmUoTF9jb25zKShMX2EpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiLCBcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShMX2IpKExfbmlsKSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpKExfZmFsc2UpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIilcIikpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJzaG93XCIpKShsYXp5KFwibm9uZVwiKSkobGF6eSgxKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9vYmopKExfbm9uZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3NvbWUpKGxhenkoXCJOb25lXCIpKSl9fSkoKSkoTF9ub25lKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FsdERlZikobGF6eShcInNob3dcIikpKGxhenkoXCJsZWZ0XCIpKShsYXp5KDEpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29iail7cmV0dXJuIHJlc29sdmUoTF9oYXNUeXBlKShMX29iaikoTF9sZWZ0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJMZWZ0KFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9vYmopKExfaWQpKExfaWQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIilcIikpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJzaG93XCIpKShsYXp5KFwicmlnaHRcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX2hhc1R5cGUpKExfb2JqKShMX3JpZ2h0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJSaWdodChcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfb2JqKShMX2lkKShMX2lkKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIpXCIpKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX25vbmUpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwic2hvd1wiKSkobGF6eShcIm5pbFwiKSkobGF6eSgxKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9vYmopKExfbmlsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc29tZSkobGF6eShcIm5pbFwiKSkpfX0pKCkpKExfbm9uZSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJzaG93XCIpKShsYXp5KFwiYXNzb2NcIikpKGxhenkoMSkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb2JqKXtyZXR1cm4gcmVzb2x2ZShMX2lzQWxpc3QpKExfb2JqKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3N0ckNhdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2ZsYXR0ZW4pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwie1wiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9pbnRlcnNwZXJzZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX21hcCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zaG93KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaGVhZCkoTF9pdGVtKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiOlwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zaG93KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfdGFpbCkoTF9pdGVtKSl9fSkoKSkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpfSl9fSkoKSkoTF9vYmopKX19KSgpKShsYXp5KFwiIFwiKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwifVwiKSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJzaG93XCIpKShsYXp5KFwiaGFtdFwiKSkobGF6eSgxKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9vYmopKExfaGFtdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3NvbWUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9mbGF0dGVuKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcImhhbXR7XCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2ludGVyc3BlcnNlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfbWFwKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3Nob3cpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX2l0ZW0pKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCI6XCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3Nob3cpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF90YWlsKShMX2l0ZW0pKX19KSgpKSl9fSkoKSkoTF9uaWwpKX19KSgpKSl9fSkoKSl9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaGFtdFBhaXJzKShMX29iaikpfX0pKCkpKX19KSgpKShsYXp5KFwiIFwiKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwifVwiKSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9hbHREZWYpKGxhenkoXCJzaG93XCIpKShsYXp5KFwiY29uc1wiKSkobGF6eSgxKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vYmope3JldHVybiByZXNvbHZlKExfaGFzVHlwZSkoTF9vYmopKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3NvbWUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9mbGF0dGVuKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIltcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc2hvdykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hlYWQpKExfb2JqKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc2hvd0NvbnNFbGVtZW50cykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3RhaWwpKExfb2JqKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiXVwiKSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX25vbmUpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmaW5lKShsYXp5KFwic2hvd0NvbnNFbGVtZW50c1wiKSkobGF6eSgxKSkobGF6eShcInNob3dDb25zRWxlbWVudHMgbGlzdCA9IGlzQ29ucyBsaXN0XFxuICBbJyAnIChzaG93IChoZWFkIGxpc3QpKSAoc2hvd0NvbnNFbGVtZW50cyAodGFpbCBsaXN0KSldXFxuICBpc05pbCBsaXN0XFxuICAgICcnXFxuICAgIFsnIHwgJyAoc2hvdyBsaXN0KV1cIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIHJlc29sdmUoTF9pc0NvbnMpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIgXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3Nob3cpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX2xpc3QpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zaG93Q29uc0VsZW1lbnRzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfdGFpbCkoTF9saXN0KSl9fSkoKSkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaXNOaWwpKExfbGlzdCkobGF6eShcIlwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCIgfCBcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc2hvdykoTF9saXN0KSl9fSkoKSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWx0RGVmKShsYXp5KFwiYmluZFwiKSkobGF6eShcIm9wdGlvblwiKSkobGF6eSgyKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vcHQpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiByZXNvbHZlKExfb3IpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oYXNUeXBlKShMX29wdCkoTF9zb21lKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hhc1R5cGUpKExfb3B0KShMX25vbmUpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfc29tZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX29wdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIHJlc29sdmUoTF9jb250KShMX3ZhbHVlKX0pfX0pKCkpKExfbm9uZSkpfX0pKCkpKX19KSgpKShMX25vbmUpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gcmVzb2x2ZShMX2FsdERlZikobGF6eShcImJpbmRcIikpKGxhenkoXCJlaXRoZXJcIikpKGxhenkoMikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZWl0aGVyKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX29yKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfaGFzVHlwZSkoTF9laXRoZXIpKExfbGVmdCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oYXNUeXBlKShMX2VpdGhlcikoTF9yaWdodCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zb21lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfZWl0aGVyKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX18pe3JldHVybiByZXNvbHZlKExfZWl0aGVyKX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiByZXNvbHZlKExfY29udCkoTF92YWx1ZSl9KX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmTWFjcm8pKGxhenkoXCJkZWZXcmFwcGVyXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfZ3JhYkxlZnRPZkFycm93KShMX2xpc3QpKExfbmlsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xlZnQpe3JldHVybiBmdW5jdGlvbihMX3JpZ2h0KXtyZXR1cm4gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJvdmVycmlkZVwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zdHJDYXQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiJ1wiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9zdHJUb2tlblN0cmluZykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2hlYWQpKExfbGVmdCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIidcIikpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9hcHBlbmQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiXFxcXFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3RhaWwpKExfbGVmdCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykobGF6eShcIi5cIikpKExfcmlnaHQpKX19KSgpKSl9fSkoKSkoTF9uaWwpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJncmFiTGVmdE9mQXJyb3dcIikpKGxhenkoMykpKGxhenkoXCJncmFiTGVmdE9mQXJyb3cgbGlzdCBsZWZ0IGNvbnQgPSBpc1Rva2VuU3RyaW5nIChoZWFkIGxpc3QpICctPidcXG4gIGNvbnQgKHJldmVyc2UgbGVmdCkgKHRhaWwgbGlzdClcXG4gIGdyYWJMZWZ0T2ZBcnJvdyAodGFpbCBsaXN0KSAoaGVhZCBsaXN0KSA6IGxlZnQgY29udFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9sZWZ0KXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gcmVzb2x2ZShMX2lzVG9rZW5TdHJpbmcpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX2xpc3QpKX19KSgpKShsYXp5KFwiLT5cIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb250KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfcmV2ZXJzZSkoTF9sZWZ0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX3RhaWwpKExfbGlzdCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfZ3JhYkxlZnRPZkFycm93KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfdGFpbCkoTF9saXN0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9oZWFkKShMX2xpc3QpKX19KSgpKShMX2xlZnQpKX19KSgpKShMX2NvbnQpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3ZlcnJpZGUpKGxhenkoXCJoZWFkXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29sZEhlYWQpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcImhlYWQgYXJndW1lbnRcIikpKExfY29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfaCl9fSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3ZlcnJpZGUpKGxhenkoXCJ0YWlsXCIpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29sZFRhaWwpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiByZXNvbHZlKExfYXNzZXJ0VHlwZSkobGF6eShcInRhaWwgYXJndW1lbnRcIikpKExfY29ucykoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiByZXNvbHZlKExfdCl9fSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfb3ZlcnJpZGUpKGxhenkoXCJoYW10V2l0aFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vbGRIYW10V2l0aCl7cmV0dXJuIGZ1bmN0aW9uKExfa2V5KXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfaGFtdCl7cmV0dXJuIHJlc29sdmUoTF9vbGRIYW10V2l0aCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2Fzc2VydFR5cGUpKGxhenkoXCJoYW10V2l0aCBrZXlcIikpKGxhenkoXCIqc3RyaW5nXCIpKShMX2tleSkpfX0pKCkpKExfdmFsdWUpKExfaGFtdCl9fX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIHJlc29sdmUoTF9kZWZpbmUpKGxhenkoXCJodG1sXCIpKShsYXp5KDEpKShsYXp5KFwiaHRtbCB4ID0gXFxcXGYgLiBmIHhcIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gcmVzb2x2ZShMX2YpKExfeCl9LCAnaHRtbCcpfSwgJ2h0bWwnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfZGVmVG9rZW5QYWNrKShsYXp5KFwidXRpbFwiKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiLT5cIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiLS1cIikpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwiKytcIikpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSByZXNvbHZlKExfY29ucykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHJlc29sdmUoTF9jb25zKShsYXp5KFwianNbXCIpKShsYXp5KFwiXVwiKSkpfX0pKCkpKExfbmlsKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKExfbmlsKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiByZXNvbHZlKExfYWRkU3RkVG9rZW5QYWNrcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gcmVzb2x2ZShMX2NvbnMpKGxhenkoXCJ1dGlsXCIpKShMX25pbCkpfX0pKCkpfV0pO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxucHJvY2Vzcy5uZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhblNldEltbWVkaWF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93LnNldEltbWVkaWF0ZTtcbiAgICB2YXIgY2FuUG9zdCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93LnBvc3RNZXNzYWdlICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyXG4gICAgO1xuXG4gICAgaWYgKGNhblNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHdpbmRvdy5zZXRJbW1lZGlhdGUoZikgfTtcbiAgICB9XG5cbiAgICBpZiAoY2FuUG9zdCkge1xuICAgICAgICB2YXIgcXVldWUgPSBbXTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIGlmIChldi5zb3VyY2UgPT09IHdpbmRvdyAmJiBldi5kYXRhID09PSAncHJvY2Vzcy10aWNrJykge1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZm4pO1xuICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKCdwcm9jZXNzLXRpY2snLCAnKicpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9O1xufSkoKTtcblxucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufVxuXG4vLyBUT0RPKHNodHlsbWFuKVxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHN0cikge1xuICB2YXIgaGFzaCA9IDUzODEsXG4gICAgICBpICAgID0gc3RyLmxlbmd0aFxuXG4gIHdoaWxlKGkpXG4gICAgaGFzaCA9IChoYXNoICogMzMpIF4gc3RyLmNoYXJDb2RlQXQoLS1pKVxuXG4gIC8qIEphdmFTY3JpcHQgZG9lcyBiaXR3aXNlIG9wZXJhdGlvbnMgKGxpa2UgWE9SLCBhYm92ZSkgb24gMzItYml0IHNpZ25lZFxuICAgKiBpbnRlZ2Vycy4gU2luY2Ugd2Ugd2FudCB0aGUgcmVzdWx0cyB0byBiZSBhbHdheXMgcG9zaXRpdmUsIGlmIHRoZSBoaWdoIGJpdFxuICAgKiBpcyBzZXQsIHVuc2V0IGl0IGFuZCBhZGQgaXQgYmFjayBpbiB0aHJvdWdoICg2NC1iaXQgSUVFRSkgYWRkaXRpb24uICovXG4gIHJldHVybiBoYXNoID49IDAgPyBoYXNoIDogKGhhc2ggJiAweDdGRkZGRkZGKSArIDB4ODAwMDAwMDBcbn1cbiIsIi8vIyBIYXNoaW5nIGZ1bmN0aW9uc1xuXG4vLyBJbnQsIEludCAtPiBJbnRcbi8vIGdldHMgYSA8PSA1IGJpdCBzZWN0aW9uIG9mIGEgaGFzaCwgc2hpZnRlZCBmcm9tIHRoZSBsZWZ0IHBvc2l0aW9uXG4vLyBpbiBwcmFjdGljZSwgYSAzMiBiaXQgc3BsaXRzIGludG8gNyBjaHVua3MgLSA2IG9mIDUgYml0cywgb25lIG9mIDJcbnZhciBtYXNrID0gZnVuY3Rpb24oaGFzaCwgZnJvbSl7IHJldHVybiAoaGFzaCA+Pj4gZnJvbSkgJiAweDAxZiB9XG5cbi8vIFN0cmluZywgSW50LCBGdW5jdGlvbiAtPiBJbnRcbi8vIGdldHMgYSBjaHVuayBvZiBhIGhhc2gsIGdpdmVuIGEgc3RyaW5nIGFuZCBhIGhhc2hpbmcgZnVuY3Rpb25cbi8vIHRoZSBoYXNoaW5nIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSAzMiBiaXQgaGFzaC5cbnZhciBoYXNoTWFzayA9IGZ1bmN0aW9uKHN0ciwgZnJvbSwgaGFzaCl7XG4gICAgcmV0dXJuIG1hc2soaGFzaChzdHIpLCBmcm9tKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0aGFzaDogcmVxdWlyZSgnc3RyaW5nLWhhc2gnKSxcblx0bWFzazogaGFzaE1hc2tcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKVxudmFyIGhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKVxudmFyIGxpYiA9IG1vZHVsZS5leHBvcnRzXG5cbi8vIyBwZXJzaXN0ZW50IEhhc2ggVHJpZVxuXG4vLyBBIFRyaWUgaXMgYSBzcGVjaWFsaXNlZCB2ZXJzaW9uIG9mIGEgVHJlZSwgaW4gd2hpY2ggbm9kZXMgY2FuIGJlIGZvdW5kIGJ5IG5hdmlnYXRpbmcgYSAncGF0aCcuXG4vLyBGb3IgaW5zdGFuY2UsIGEgZGljdGlvbmFyeSBUcmllIG1heSBzdGFydCB3aXRoIGEgcm9vdCBub2RlLCBoYXZlIEEtWiBhcyB0aGUgY2hpbGQgbm9kZXMuXG4vLyBUaG9zZSBjaGlsZCBub2RlcyBtYXkgYWxzbyBiZSBUcmllcyAoY29tbW9ubHkgcmVmZXJyZWQgdG8gYXMgc3ViLVRyaWVzKS4gIFRoZXJlZm9yZSwgaWZcbi8vIHlvdSB3YW50IHRvIGxvb2sgdXAgJ0FOVCcsIHlvdSBjYW4gc2VlIGlmIGl0J3MgaW4gdGhlIFRyaWUgYnkgbmF2aWdhdGluZyB0byBub2RlIEEsIHRoZW4gdG9cbi8vIG5vZGUgQSdzIGNoaWxkIG5vZGUgTiwgdGhlbiB0byB0aGF0IG5vZGUncyBjaGlsZCBub2RlIFQuICBpLmUuIHRoZSBwYXRoIGZvciBBTlQgaXMgQS0+Ti0+VFxuXG4vLyBBIEhhc2ggVHJpZSBmb3JtcyBpdHMgcGF0aCBieSB0YWtpbmcgYSBoYXNoIG9mIHRoZSBzdHJpbmcgdGhhdCBpcyBiZWluZyBsb29rZWQgdXAsIGFuZFxuLy8gc3BsaXR0aW5nIHRoYXQgaW50byBwYXJ0czpcbi8vIEFOVCA9IDAxMTAxMTAxMTAxMTEwMTExMDEwMTExMDExMDAwMDExID0gMDExMDEtPjEwMTEwLT4xMTEwMS0+MTEwMTAtPjExMTAxLT4xMDAwMC0+MTFcbi8vIEluIHRoaXMgc2NoZW1lLCBhIDMyLWJpdCBoYXNoIGlzIHRha2VuLCBhbmQgc3BsaXQgaW50byBwYXRoIHBhcnRzIHRoYXQgYXJlIG1heGltYWxseVxuLy8gNSBiaXRzIGxvbmcuICBFYWNoIFRyaWUgdGhlcmVmb3JlIGhhcyBjaGlsZHJlbiBmcm9tIDAwMDAwLTExMTExIChvciAwLTMxIGluIGRlY2ltYWwpLlxuXG4vLyBIYXNoIFRyaWVzIGFsbG93IHVzIHRvIHN0b3JlIG5vZGVzIGF0IGEgc2hhbGxvdyBkZXB0aC4gIEZvciBpbnN0YW5jZSwgaWYgdGhlcmUgaXMgb25seVxuLy8gb25lIG1lbWJlciBvZiB0aGUgVHJpZSB3aG9zZSBrZXkncyBmaXJzdCBwYXRoIHBhcnQgaXMgMDExMDEsIHRoZW4gd2UgY2FuIHN0b3JlIHRoZSB2YWx1ZVxuLy8gZGlyZWN0bHkgYXMgdGhlIHJvb3QgVHJpZSdzIDAxMTAxIGNoaWxkIG5vZGUuICBXaHkgZ28gZGVlcGVyPyAgSXQganVzdCBjb3N0cyBtb3JlIHRvIHJldHJpZXZlLlxuXG4vLyBJdCBhbHNvIGFsbG93cyB1cyB0byBrZWVwIHRoZSBUcmllIGZhaXJseSBiYWxhbmNlZDsgc2luY2UgYSBoYXNoIGZ1bmN0aW9uIHNob3VsZCBiZVxuLy8gaGF2ZSBhbiBldmVuIGRpc3RyaWJ1dGlvbiBvZiBoYXNoZXMsIGV2ZW4gaWYgdGhlIGlucHV0cyBzaGFyZSBjb21tb24gcHJlZml4ZXMuXG4vLyBJZiB3ZSB1c2VkIHRoZSBmaXJzdCAyIGxldHRlcnMgb2YgYSB3b3JkLCBmb3IgaW5zdGFuY2UsIHdlJ2QgZW5kIHVwIHdpdGggbG90cyBvZlxuLy8gbm9kZXMgaW4gdGhlICd1bicgYW5kICd0aCcgcGF0aHMsIGFuZCBub3QgbWFueSBpbiB0aGUgJ3R4JyBwYXRoLlxuXG4vLyBBbiBwZXJzaXN0ZW50IEhhc2ggVHJpZSBpcyBhIEhhc2ggVHJpZSBpbiB3aGljaCBhbnkgY29tbW9ubHkgdXBkYXRpbmcgYWN0aW9ucyAtIHJlbW92aW5nLFxuLy8gc2V0dGluZyBvciBhZGRpbmcgdmFsdWVzIC0gcHJvZHVjZSBhbiBlbnRpcmVseSBuZXcgSGFzaCBUcmllLCBhbmQgKmRvbid0KiBhZmZlY3QgdGhlXG4vLyBvcmlnaW5hbCBpbiBhbnkgd2F5LiAgVGhpcyBtZWFucyB0aGF0IHRoZSBIYXNoIFRyaWVzIGNhbiBiZSBzaGFyZWQgc2FmZWx5OyB3aXRob3V0IGZlYXJcbi8vIHRoYXQgdXBkYXRpbmcgdGhlbSB3aWxsIHJlc3VsdCBpbiBhIHZhbHVlIGNoYW5naW5nIGluIG11bHRpcGxlIHBsYWNlcyBpbiBhIHByb2dyYW0uXG5cbi8vIFRvIG1ha2UgdGhpcyBkaXN0aW5jdGlvbiBjbGVhcmVyLCB0aGUgdmVyYnMgJ3NldCcgYW5kICdyZW1vdmUvZGVsZXRlJyBoYXZlIGJlZW4gcmVwbGFjZWRcbi8vIHdpdGggYXNzb2MgKGFzc29jaWF0ZSBhIG5ldyB2YWx1ZSB3aXRoIGFuIHBlcnNpc3RlbnQgSGFzaCBUcmllKSwgYW5kIGRpc3NvYyAoZGlzc29jaWF0ZVxuLy8gYW4gZXhpc3RpbmcgdmFsdWUgd2l0aCBhbiBwZXJzaXN0ZW50IEhhc2ggVHJpZSkuXG5cblxuXG4vLyB0byBhbGxvdyBob29rcyBmb3Igb3RoZXIgaW1wbGVtZW50YXRpb25zL3Rlc3RzIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0XG4vLyBoYXNoIGFuZCBlcXVhbGl0eSBmdW5jdGlvbnMgKHdoaWNoIGFyZSB0aGUgbmVjZXNzYXJ5IG9uZXMgZm9yIGNyZWF0aW5nXG4vLyBoYXNoLXRhYmxlLWxpa2UgYmVoYXZpb3VyLCBhcyB0aGUgaGFzaC10cmllIGhhcyksIHRoZXkgY2FuIGJlIHBhc3NlZCBpblxuLy8gYXMgb3B0cyB0byBhc3NvYy9kaXNzb2MvZ2V0L2hhcy5cblxuLy8gVGhlc2UgZGVmYXVsdHMgY292ZXIgdGhlIH44MCUgdXNlIGNhc2Ugb2YgdW5vcmRlcmVkIHN0cmluZzp2YWwgcGFpcnMuXG52YXIgZGVmYXVsdE9wdHMgPSB7XG4gICAgZXEgICA6IGZ1bmN0aW9uKGEsIGIpeyByZXR1cm4gYSA9PT0gYiB9LFxuICAgIGhhc2ggOiBoYXNoLmhhc2hcbn1cblxuLy8jIE5vZGUgVHlwZXNcblxuLy8gT2JqZWN0IC0+IFRyaWVcbi8vIGEgVHJpZSBpcyBhIHN0b3JlIG9mIGNoaWxkcmVuIHZhbHVlczsgdGhlIG1vc3QgYmFzaWMgdHlwZSBvZiBub24tbGVhZiBub2RlLlxudmFyIFRyaWUgPSBsaWIuVHJpZSA9IGZ1bmN0aW9uKGNoaWxkcmVuKXtcbiAgICByZXR1cm4geyB0eXBlOiAndHJpZScsIGNoaWxkcmVuOiBjaGlsZHJlbiB8fCB7fSB9XG59XG5cbi8vIFN0cmluZywgSlNWYWx1ZSAtPiBWYWx1ZVxuLy8gTm9kZSB0aGF0IHJlcHJlc2VudHMgYSBzcGVjaWZpYyB2YWx1ZVxudmFyIFZhbHVlID0gbGliLlZhbHVlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgcmV0dXJuIHsgdHlwZTogJ3ZhbHVlJywga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9XG59XG5cbi8vIHsgSlNWYWx1ZSB9IC0+IEhhc2htYXBcbi8vIGEgVHJpZSB3aWxsIGhhdmUgYSBtYXggZGVwdGggb2YgNyAoNiwgaWYgMCBpbmRleGVkKS4gIEFmdGVyIHRoYXQsIGFkZGl0aW9uYWxcbi8vIHZhbHVlcyB3aWxsIGp1c3Qgc2x1bmcgaW50byBhIGhhc2htYXAgbm9kZVxudmFyIEhhc2htYXAgPSBsaWIuSGFzaG1hcCA9IGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgcmV0dXJuIHsgdHlwZTogJ2hhc2htYXAnLCB2YWx1ZXM6IHZhbHVlcyB9XG59XG5cblxuLy8jIEJhc2ljIG1hbmlwdWxhdGlvbiBmdW5jdGlvbnMgLSBoYXMvZ2V0L2Fzc29jL2Rpc3NvY1xuXG4vLyBPYmplY3QsIFN0cmluZywgSlNWYWx1ZSAtPiBPYmplY3RcblxuLy8gY3JlYXRlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYW4gb2JqZWN0LCBhZGRpbmcgb3IgcmVwbGFjaW5nIGEga2V5OnZhbCBwYWlyXG4vLyB3aXRoIHRoZSBvbmUgcHJvdmlkZWRcblxuLy8gbmVjZXNzYXJ5IGZvciB1cGRhdGluZyBub2RlcyBpbiBgYXNzb2NgXG52YXIgY29weUFkZCA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWwpe1xuICAgIG9iaiA9IHV0aWwuY2xvbmUob2JqKVxuICAgIG9ialtrZXldID0gdmFsXG4gICAgcmV0dXJuIG9ialxufVxuXG5cbi8vICBOb2RlLCBTdHJpbmcsIEpTVmFsdWUsIChJbnQpIC0+IFRyaWVcblxuLy8gYXNzb2MgJ2Fzc29jaWF0ZXMnIGEgbmV3IHZhbHVlIHdpdGggYSBUcmllLiAgSXQgZG9lcyBzbyBieSBmaW5kaW5nIHRoZVxuLy8gYXBwcm9wcmlhdGUgcGxhY2UgZm9yIHRoZSBuZXcgbm9kZSwgdGhlbiBjcmVhdGluZyBhIGNvcHkgb2YgdGhlIHBhcmVudFxuLy8gbm9kZXMsIGFkZGluZyBpbiBhIHJlZmVyZW5jZSB0byB0aGUgbmV3bHkgY3JlYXRlZCBjaGlsZCBub2RlIGVhY2ggdGltZS5cblxuLy8gVGhpcyBpcyBjYWxsZWQgcGF0aC1jb3B5aW5nLCBzaW5jZSB0aGUgcGF0aCBmcm9tIHRoZSByb290IG5vZGUgdG8gdGhlIG5ld1xuLy8gbm9kZSBpcyBjb3BpZWQgZm9ybSBvbmUgZGF0YXN0cnVjdHVyZSB0byB0aGUgb3RoZXIuICBTaW5jZSB0aGUgdmFzdCBtYWpvcml0eVxuLy8gb2YgZGF0YSB3aWxsIGxpZSBpbiBub2RlcyBiZW5lYXRoZSB0aGVzZSBpbiBzaXphYmxlIGRhdGFzdHJ1Y3R1cmVzLCB0aGlzIHNoYXJpbmdcbi8vIG9mIGRhdGEgYWxsb3dzIGZvciBwZXJzaXN0ZW50IHZhbHVlcyB0byBiZSB1cGRhdGVkIHJlbGF0aXZlbHkgZWZmZWNpZW50bHkgYXQgbGFyZ2Vcbi8vIHNpemUuXG5cbi8vIFRoZSBhbGdvcml0aG0gaXMgYWxzbyBhd2FyZSBvZiAnc3BlY2lmaWNpdHknOyBpLmUuIHRoYXQgYSB2YWx1ZSBuZWVkIG9ubHkgYmUgc3RvcmVkXG4vLyBhdCBhIGRlcHRoIHdoZXJlIGl0IGNhbiBiZSBkaXN0aW5ndWlzaGVkIHVuaXF1ZWx5IGZyb20gb3RoZXIgdmFsdWVzIGJ5IHZpcnR1ZSBvZiBpdHNcbi8vIHBhdGguICBJZiBib3RoICdmb28nIGFuZCAnYmFyJ3MgZmlyc3QgNSBiaXRzIGFyZSAwMTEwMTEsIGFuZCBib3RoIGFyZSBwcmVzZW50IGluIHRoZVxuLy8gVHJpZSwgdGhlbiB0aGV5IG1vc3QgYmUgc3RvcmVkIGluIGEgc3ViLVRyaWUsIGFuZCB1c2UgdGhlIGZvbGxvd2luZyA1IGJpdHMgdG8gZGlmZmVyZW5jaWF0ZVxuLy8gdGhlbXNlbHZlcy4gIElmIHRoZSBUcmllIGdldHMgZGVlcGVyIHRoYW4gdGhlcmUgYXJlIGJpdHMgaW4gdGhlIGhhc2ggKGkuZS4gYSB0b3RhbCBoYXNoIGNvbGxpc2lvbilcbi8vIHRoZW4gaXQgc2ltcGx5IHN0b3JlcyB0aGUgb2JqZWN0cyBpbiBhIEhhc2htYXAgbm9kZS5cbmxpYi5hc3NvYyA9IGZ1bmN0aW9uKG5vZGUsIGtleSwgdmFsLCBvcHRzKXtcbiAgICByZXR1cm4gYXNzb2Mobm9kZSwga2V5LCB2YWwsIG9wdHMgfHwgZGVmYXVsdE9wdHMsIDApXG59XG5cbnZhciBhc3NvYyA9IGZ1bmN0aW9uKG5vZGUsIGtleSwgdmFsLCBvcHRzLCBkZXB0aCl7XG4gICAgcmV0dXJuIGFzc29jRm5zW25vZGUudHlwZV0obm9kZSwga2V5LCB2YWwsIG9wdHMsIGRlcHRoKVxufVxuXG52YXIgYXNzb2NGbnMgPSB7XG4gICAgdHJpZTogZnVuY3Rpb24obm9kZSwga2V5LCB2YWwsIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgdmFyIHBhdGggPSBoYXNoLm1hc2soa2V5LCBkZXB0aCwgb3B0cy5oYXNoKVxuICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkcmVuW3BhdGhdXG5cbiAgICAgICAgaWYgKCBjaGlsZCA9PT0gdW5kZWZpbmVkICApIHJldHVybiBUcmllKGNvcHlBZGQobm9kZS5jaGlsZHJlbiwgcGF0aCwgVmFsdWUoa2V5LCB2YWwpKSlcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUcmllKGNvcHlBZGQobm9kZS5jaGlsZHJlbiwgcGF0aCwgYXNzb2MoY2hpbGQsIGtleSwgdmFsLCBvcHRzLCBkZXB0aCArIDEpKSlcbiAgICB9LFxuICAgIHZhbHVlOiBmdW5jdGlvbihub2RlLCBrZXksIHZhbCwgb3B0cywgZGVwdGgpe1xuICAgICAgICB2YXIgbm9kZVBhdGggPSBoYXNoLm1hc2sobm9kZS5rZXksIGRlcHRoLCBvcHRzLmhhc2gpXG4gICAgICAgIHZhciBrZXlQYXRoICA9IGhhc2gubWFzayhrZXksIGRlcHRoLCBvcHRzLmhhc2gpXG5cbiAgICAgICAgdmFyIG1ha2VIYXNobWFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHt9XG4gICAgICAgICAgICBjaGlsZHJlbltrZXldID0gVmFsdWUoa2V5LCB2YWwpXG4gICAgICAgICAgICBjaGlsZHJlbltub2RlLmtleV0gPSBub2RlXG4gICAgICAgICAgICByZXR1cm4gSGFzaG1hcChjaGlsZHJlbilcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXNvbHZlU2hhbGxvd0NvbmZsaWN0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHt9XG4gICAgICAgICAgICBjaGlsZHJlbltub2RlUGF0aF0gPSBub2RlXG4gICAgICAgICAgICBjaGlsZHJlbltrZXlQYXRoXSAgPSBWYWx1ZShrZXksIHZhbClcblxuICAgICAgICAgICAgcmV0dXJuIFRyaWUoY2hpbGRyZW4pXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzb2x2ZURlZXBDb25mbGljdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSB7fVxuICAgICAgICAgICAgY2hpbGRyZW5ba2V5UGF0aF0gPSBhc3NvYyhub2RlLCBrZXksIHZhbCwgb3B0cywgZGVwdGggKyAxKVxuICAgICAgICAgICAgcmV0dXJuIFRyaWUoY2hpbGRyZW4pXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWFrZVRyaWUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYgKCBub2RlUGF0aCAhPT0ga2V5UGF0aCApIHJldHVybiByZXNvbHZlU2hhbGxvd0NvbmZsaWN0KClcbiAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZURlZXBDb25mbGljdCgpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIG9wdHMuZXEobm9kZS5rZXksIGtleSkgKSByZXR1cm4gVmFsdWUoa2V5LCB2YWwpXG4gICAgICAgIGVsc2UgaWYgKCBkZXB0aCA+IDYgKSAgICAgICAgIHJldHVybiBtYWtlSGFzaG1hcCgpXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYWtlVHJpZSgpXG4gICAgfSxcbiAgICBoYXNobWFwOiBmdW5jdGlvbihub2RlLCBrZXksIHZhbCwgb3B0cywgZGVwdGgpe1xuICAgICAgICB2YXIgdiA9IGNvcHlBZGQobm9kZS52YWx1ZXMsIGtleSwgVmFsdWUoa2V5LCB2YWwpKVxuICAgICAgICByZXR1cm4gSGFzaG1hcCh2KVxuICAgIH1cbn1cblxuLy8gT2JqZWN0LCBTdHJpbmcgLT4gT2JqZWN0XG5cbi8vIGNyZWF0ZXMgYSBuZXcgb2JqZWN0LCBidXQgd2l0aG91dCBhIGtleS5cbi8vIFVzZWQgaW4gYGRpc3NvY2BcbnZhciBjb3B5RGlzc29jID0gZnVuY3Rpb24ob2JqLCBrZXkpe1xuICAgIG9iaiA9IHV0aWwuY2xvbmUob2JqKVxuICAgIGRlbGV0ZSBvYmpba2V5XVxuICAgIHJldHVybiBvYmpcbn1cblxuXG4vLyBOb2RlLCBTdHJpbmcsIChJbnQpIC0+IFRyaWVcblxuLy8gZGlzc29jIChkaXNhc3NvY2lhdGUpIHJldHVybnMgYSBuZXcgVHJpZSwgYnV0IHdpdGhvdXQgYSBzcGVjaWZpZWQga2V5XG5cbi8vIEFzIHdpdGggYXNzb2MsIGl0IHJlY3Vyc2VzIGRvd24gdGhlIFRyaWUuICBJZiBpdCBmYWlscyB0byBmaW5kIGEga2V5LCB0aGVuXG4vLyBpdCByZXR1cm5zIHRoZSBvcmlnaW5hbCBUcmllLCBzaW5jZSB0aGF0IGlzIGNvbmNlcHR1YWxseSB0aGUgc2FtZSBhcyByZW1vdmluZ1xuLy8gYSBub24tZXhpc3RhbnQga2V5IGZyb20gYW4gb2JqZWN0LlxuXG4vLyBJZiBpdCBmaW5kcyBhIFZhbHVlIGFzc29jaWF0ZWQgd2l0aCBhIGtleSwgaG93ZXZlciwgaXQgd2lsbCBjcmVhdGVcbi8vIGEgcGFyZW50IG5vZGUgdG8gdGhhdCBWYWx1ZSB0aGF0IGNvcGllcyBhbGwgKm90aGVyKiB2YWx1ZXMsIGJ1dCBvbWl0c1xuLy8gdGhlIHZhbHVlIHdpdGggdGhlIGtleSBpbiBxdWVzdGlvbi4gIEFzIHdpdGggYXNzb2MsIGl0IHdpbGwgYWxzbyBwcm9kdWNlIGFcbi8vIGNvcHkgb2YgKml0cyogcGFyZW50LiAgVGhpcyBvY2N1cnMgcmVjdXJzaXZlbHksIGFuZCBpcyBleGFjdGx5IHRoZSBzYW1lIGNvbmNlcHRcbi8vIGFzIHRoZSAncGF0aCBjb3B5aW5nJyB0ZWNobmlxdWUgdXNlZCBpbiBhc3NvYy5cblxuLy8gSWYgcmVtb3ZpbmcgYSB2YWx1ZSByZW1vdmVzIGEgaGFzaCBjb2xsaXNpb24sIHRoZW4gdGhlIFRyaWUgbm9kZSB0aGF0IGNvbnRhaW5lZFxuLy8gdGhvc2UgdmFsdWVzIGNhbiBiZSByZXBsYWNlZCB3aXRoIGp1c3QgYSBWYWx1ZSBub2RlLCB3aGljaCByZXN1bHRzIGluIGEgc2hhbGxvd2VyXG4vLyBUcmllLlxubGliLmRpc3NvYyA9IGZ1bmN0aW9uKG5vZGUsIGtleSwgb3B0cyl7XG4gICAgcmV0dXJuIGRpc3NvYyhub2RlLCBrZXksIG9wdHMgfHwgZGVmYXVsdE9wdHMsIDApXG59XG5cbnZhciBkaXNzb2MgPSBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICByZXR1cm4gZGlzc29jRm5zW25vZGUudHlwZV0obm9kZSwga2V5LCBvcHRzLCBkZXB0aClcbn1cblxudmFyIGRpc3NvY0ZucyA9IHtcbiAgICB0cmllOiBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgdmFyIHBhdGggPSBoYXNoLm1hc2soa2V5LCBkZXB0aCwgb3B0cy5oYXNoKVxuICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkcmVuW3BhdGhdXG5cbiAgICAgICAgLy8gaGFuZGxlIHRoZSAncHJlc2VudCBrZXknIGNhc2VzLiAgSWYgaXQncyBhIFZhbHVlLCByZW1vdmUgaXQuICBJZiBpdCdzIGEgc3ViLVRyaWUgb3IgSGFzaG1hcFxuICAgICAgICAvLyByZWN1cnNlIHRvIHByZXZlbnQgb3RoZXIgdmFsdWVzIGZyb20gYmVpbmcgbG9zdFxuICAgICAgICB2YXIgZGlzc29jS2V5ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICggY2hpbGQudHlwZSA9PT0gJ3ZhbHVlJyAmJiBvcHRzLmVxKGNoaWxkLmtleSwga2V5KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyaWUoY29weURpc3NvYyhub2RlLmNoaWxkcmVuLCBwYXRoKSlcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJpZShjb3B5RGlzc29jKG5vZGUuY2hpbGRyZW4sIHBhdGgsIGRpc3NvYyhjaGlsZCwga2V5LCBvcHRzLCBkZXB0aCArIDEpKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZXJlJ3Mgb25seSBhIHNpbmdsZSB2YWx1ZSBpbiBhIFRyaWUgbm9kZSBsZWZ0LCB0aGVuIGl0IGNhbiBiZSByZXBsYWNlZCBieSBpdHMgdmFsdWUsXG4gICAgICAgIC8vIGFsbG93aW5nIHVzIHRvIG1ha2UgdGhlIFRyaWUgbW9yZSBzaGFsbG93LCBhbmQgdGhlcmVmb3JlIG1vcmUgZWZmZWNpZW50LlxuICAgICAgICB2YXIgY29sbGFwc2VUcmllID0gZnVuY3Rpb24odHJpZSl7XG4gICAgICAgICAgICB2YXIgbmFtZXMgPSB1dGlsLmtleXModHJpZS5jaGlsZHJlbilcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IHRyaWUuY2hpbGRyZW5bbmFtZXNbMF1dXG5cbiAgICAgICAgICAgIC8vIGRvbid0IGNvbGxhcHNlIGFuIGVtcHR5IHJvb3QgdHJpZVxuICAgICAgICAgICAgaWYgKCBkZXB0aCA9PT0gMCApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyaWVcbiAgICAgICAgICAgIGVsc2UgaWYgKCBjaGlsZCA9PT0gdW5kZWZpbmVkICkgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmllXG4gICAgICAgICAgICBlbHNlIGlmICggbmFtZXMubGVuZ3RoID09PSAxICYmIGNoaWxkLnR5cGUgPT09ICd2YWx1ZScgKSByZXR1cm4gVmFsdWUoY2hpbGQua2V5LCBjaGlsZC52YWx1ZSlcbiAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmllXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlVHJpZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gY29sbGFwc2VUcmllKGRpc3NvY0tleShub2RlKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gY2hpbGQsIHJldHVybiB0aGUgbm9kZVxuICAgICAgICBpZiAoIGNoaWxkID09PSB1bmRlZmluZWQgKSAgcmV0dXJuIG5vZGU7XG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlVHJpZSgpO1xuICAgIH0sXG4gICAgdmFsdWU6IGZ1bmN0aW9uKCl7fSxcbiAgICBoYXNobWFwOiBmdW5jdGlvbihub2RlLCBrZXksIG9wdHMsIGRlcHRoKXtcbiAgICAgICAgdmFyIHJldCA9IGNvcHlEaXNzb2Mobm9kZS52YWx1ZXMsIGtleSlcbiAgICAgICAgdmFyIG5hbWVzID0gdXRpbC5rZXlzKHJldClcbiAgICAgICAgdmFyIGNoaWxkID0gcmV0W25hbWVzWzBdXVxuXG4gICAgICAgIGlmICggbmFtZXMubGVuZ3RoID09PSAxICkgcmV0dXJuIFZhbHVlKGNoaWxkLmtleSwgY2hpbGQudmFsdWUpXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEhhc2htYXAocmV0KVxuICAgIH1cbn1cblxuXG4vLyBOb2RlLCBTdHJpbmcsIChJbnQpLCAoT2JqZWN0KS0+IEJvb2xcblxuLy8gVHJpZS1lcXVpdmFsZW50IG9mIHRoZSAnaW4nIG9wZXJhdG9yLlxuXG4vLyBIYXMgcmVjdXJzZXMgZG93biBhIG5vZGUsIHVzaW5nIGhhc2gubWFzayB0byBuYXZpZ2F0ZSBhICdwYXRoJyBkb3duIGJyYW5jaGVzLlxuLy8gSWYgYSB2YWx1ZSBub2RlIGlzIGZvdW5kLCBpZiBpdHMga2V5IGlzIGVxdWFsIHRvIHRoZSBrZXkgcHJvdmlkZWQsIHRoZW4gdGhlXG4vLyBUcmllIGNvbnRhaW5zIHRoZSBrZXksIGFuZCB0cnVlIGlzIHJldHVybmVkLlxuXG4vLyBIYXNobWFwcyBzdG9yZSB2YWx1ZXMgaW4gdGhlIG91dGVybW9zdCBsZWF2ZXMgd2hlbiBuZWNlc3NhcnkuICBJZiB0aGV5IGNvbnRhaW5cbi8vIGEga2V5LCBpdCBhbHNvIG1lYW5zIHRoYXQgdGhlIGtleSBpcyBpbiB0aGUgdHJpZSwuXG5saWIuaGFzID0gZnVuY3Rpb24odHJpZSwga2V5LCBvcHRzKXtcbiAgICByZXR1cm4gaGFzKHRyaWUsIGtleSwgb3B0cyB8fCBkZWZhdWx0T3B0cywgMClcbn1cblxudmFyIGhhcyA9IGZ1bmN0aW9uKHRyaWUsIGtleSwgb3B0cywgZGVwdGgpe1xuICAgIHJldHVybiBoYXNGbnNbdHJpZS50eXBlXSh0cmllLCBrZXksIG9wdHMsIGRlcHRoKVxufVxuXG52YXIgaGFzRm5zID0ge1xuICAgIHRyaWU6IGZ1bmN0aW9uKG5vZGUsIGtleSwgb3B0cywgZGVwdGgpe1xuICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2hhc2gubWFzayhrZXksIGRlcHRoLCBvcHRzLmhhc2gpXVxuICAgICAgICBpZiAoIGNoaWxkID09PSB1bmRlZmluZWQgKSAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhcyhjaGlsZCwga2V5LCBvcHRzLCBkZXB0aCArIDEpXG4gICAgfSxcbiAgICB2YWx1ZTogZnVuY3Rpb24obm9kZSwga2V5LCBvcHRzKXtcbiAgICAgICAgcmV0dXJuIG9wdHMuZXEobm9kZS5rZXksIGtleSlcbiAgICB9LFxuICAgIGhhc2htYXA6IGZ1bmN0aW9uKG5vZGUsIGtleSwgb3B0cyl7XG4gICAgICAgIHJldHVybiBrZXkgaW4gbm9kZS52YWx1ZXNcbiAgICB9XG59XG5cbi8vIE5vZGUsIFN0cmluZywgKEludCksIChPYmplY3QpIC0+IFZhbHVlXG5cbi8vIFRyaWUtZXF1aXZhbGVudCBvZiBkb3Qgb3IgYnJhY2tldCBzeW50YXggLSByZXRyaWV2ZXMgYSB2YWx1ZSBhc3NvY2FpdGVkIHdpdGggYSBrZXlcbi8vIG9yIHVuZGVmaW5lZC5cblxuLy8gZ2V0IHJlY3Vyc2VzIGRvd24gdGhlIFRyaWUsIHNpbWlsYXJseSB0byBoYXMuICBJZiBpdCBmaW5kcyBhIG1hdGNoaW5nIGtleSwgaW5zdGVhZFxuLy8gb2YgcmV0dXJuaW5nIHRydWUgb3IgZmFsc2UsIGhvd2V2ZXIsIGl0IHVucGFja3MgdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5XG4vLyBhbmQgcmV0dXJucyB0aGF0IGluc3RlYWQuXG5saWIuZ2V0ID0gZnVuY3Rpb24odHJpZSwga2V5LCBvcHRzKXtcbiAgICByZXR1cm4gZ2V0KHRyaWUsIGtleSwgb3B0cyB8fCBkZWZhdWx0T3B0cywgMClcbn1cblxudmFyIGdldCA9IGZ1bmN0aW9uKHRyaWUsIGtleSwgb3B0cywgZGVwdGgpe1xuICAgIHJldHVybiBnZXRGbnNbdHJpZS50eXBlXSh0cmllLCBrZXksIG9wdHMsIGRlcHRoKVxufVxuXG52YXIgZ2V0Rm5zID0ge1xuICAgIHRyaWU6IGZ1bmN0aW9uKG5vZGUsIGtleSwgb3B0cywgZGVwdGgpe1xuICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2hhc2gubWFzayhrZXksIGRlcHRoLCBvcHRzLmhhc2gpXVxuICAgICAgICBpZiAoIGNoaWxkID09PSB1bmRlZmluZWQgKSAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXQoY2hpbGQsIGtleSwgb3B0cywgZGVwdGggKyAxKVxuICAgIH0sXG4gICAgdmFsdWU6IGZ1bmN0aW9uKG5vZGUsIGtleSwgb3B0cywgZGVwdGgpe1xuICAgICAgICBpZiAoIG9wdHMuZXEobm9kZS5rZXksIGtleSkgKSByZXR1cm4gbm9kZS52YWx1ZVxuICAgIH0sXG4gICAgaGFzaG1hcDogZnVuY3Rpb24obm9kZSwga2V5LCBvcHRzLCBkZXB0aCl7XG4gICAgICAgIHZhciB2YWx1ZSA9IG5vZGUudmFsdWVzW2tleV1cbiAgICAgICAgcmV0dXJuICB2YWx1ZSA/IHZhbHVlLnZhbHVlIDogdW5kZWZpbmVkXG5cbiAgICB9XG59XG5cblxuXG4vLyBOb2RlLCAoQW55LCBBbnksIFN0cmluZyksIEFueSAtPiBBbnlcblxuLy8gZ2l2ZW4gYSBub2RlLCBmdW5jdGlvbiBhbmQgc2VlZCwgcmVkdWNlIHRvIHByb2R1Y2UgcmVzdWx0cy5cbmxpYi5yZWR1Y2UgPSBmdW5jdGlvbihub2RlLCBjYWxsYmFjaywgaW5pdGlhbCl7XG4gICAgdmFyIHN0YXRlID0gcmVkdWNlKG5vZGUsIGNhbGxiYWNrLCBpbml0aWFsKVxuICAgIHJldHVybiBzdGF0ZSBpbnN0YW5jZW9mIEJyZWFrID8gc3RhdGUudmFsdWUgOiBzdGF0ZVxufVxuXG52YXIgcmVkdWNlID0gZnVuY3Rpb24obm9kZSwgY2FsbGJhY2ssIGluaXRpYWwpIHtcbiAgICByZXR1cm4gcmVkdWNlRm5zW25vZGUudHlwZV0obm9kZSwgY2FsbGJhY2ssIGluaXRpYWwpXG59XG5cbnZhciByZWR1Y2VGbnMgPSB7XG4gICAgdHJpZTogZnVuY3Rpb24obm9kZSwgY2FsbGJhY2ssIHN0YXRlKSB7XG4gICAgICAgIGZvciAoIHZhciBwYXRoIGluIG5vZGUuY2hpbGRyZW4gKSB7XG4gICAgICAgICAgICBpZiAoIG5vZGUuY2hpbGRyZW4uaGFzT3duUHJvcGVydHkocGF0aCkgKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSByZWR1Y2Uobm9kZS5jaGlsZHJlbltwYXRoXSwgY2FsbGJhY2ssIHN0YXRlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlIGluc3RhbmNlb2YgQnJlYWspIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlXG4gICAgfSxcbiAgICB2YWx1ZTogZnVuY3Rpb24obm9kZSwgY2FsbGJhY2ssIHN0YXRlKXtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHN0YXRlLCBub2RlLnZhbHVlLCBub2RlLmtleSlcbiAgICB9LFxuICAgIGhhc2htYXA6IGZ1bmN0aW9uKG5vZGUsIGNhbGxiYWNrLCBzdGF0ZSl7XG4gICAgICAgIGZvciAoIHZhciBrZXkgaW4gbm9kZS52YWx1ZXMgKSB7XG4gICAgICAgICAgICBpZiAoIG5vZGUudmFsdWVzLmhhc093blByb3BlcnR5KGtleSkgKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSByZWR1Y2Uobm9kZS52YWx1ZXNba2V5XSwgY2FsbGJhY2ssIHN0YXRlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlIGluc3RhbmNlb2YgQnJlYWspIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlXG4gICAgfVxufVxuXG5cbnZhciBCcmVhayA9IGxpYi5yZWR1Y2UuQnJlYWsgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJyZWFrKSkgcmV0dXJuIG5ldyBCcmVhayh2KVxuICAgIHRoaXMudmFsdWUgPSB2XG59XG5cblxuXG4vLyBOb2RlIC0+IE9iamVjdFxuXG4vLyBtdXRhYmxlIHJldHVybnMgYSBtdXRhYmxlIHZlcnNpb24gb2YgYSBUcmllLlxuXG4vLyBJdCBhY2hpZXZlcyB0aGlzIGJ5IHJlY3Vyc2luZyBkb3duIHRoZSBUcmllLCBmaW5kaW5nIGFsbCB0aGUgVmFsdWUgbm9kZXNcbi8vICh3aGV0aGVyIHN0b3JlZCBpbiBhIFRyaWUgZGlyZWN0bHksIG9yIGluIGEgSGFzaG1hcCBub2RlKSwgYW5kIGFkZGluZ1xuLy8gdGhlIHZhbHVlcyB0byBhIHJldHVybiB2YWx1ZS5cblxuLy8gICh5YXkgYWJ1c2luZyBtdXRhYmlsaXR5IGluIHNtYWxsIHBpZWNlcywgYnV0IGtlZXBpbmcgdGhlIGZ1bmN0aW9uXG4vLyBwdXJlIGZyb20gYW4gQVBJIHBlcnNwZWN0aXZlKVxubGliLm11dGFibGUgPSBmdW5jdGlvbihub2RlKXtcbiAgICByZXR1cm4gbGliLnJlZHVjZShub2RlLCBhZGRLZXlWYWwsIHt9KVxufVxuXG52YXIgYWRkS2V5VmFsID0gZnVuY3Rpb24obywgdmFsLCBrZXkpe1xuICAgIG9ba2V5XSA9IHZhbFxuICAgIHJldHVybiBvXG59XG5cbi8vIE5vZGUgLT4gW1N0cmluZ11cblxuLy8ga2V5cyByZXR1cm5zIHRoZSBrZXlzIHN0b3JlZCBpbiB0aGUgYXJyYXksIGxpa2UgT2JqZWN0LmtleXNcbmxpYi5rZXlzID0gZnVuY3Rpb24obm9kZSl7XG4gICAgcmV0dXJuIGxpYi5yZWR1Y2Uobm9kZSwgYWRkS2V5LCBbXSlcbn1cblxudmFyIGFkZEtleSA9IGZ1bmN0aW9uKGFyciwgdmFsLCBrZXkpe1xuICAgIGFyci5wdXNoKGtleSlcbiAgICByZXR1cm4gYXJyXG59XG4iLCIndXNlIHN0cmljdCdcblxuLy8gSW50ZXJuYWxcbnZhciBleHRlbmQgICA9IGZ1bmN0aW9uKHQsIGYpIHsgZm9yICggdmFyIHAgaW4gZiApIHRbcF0gPSBmW3BdOyByZXR1cm4gdCB9XG52YXIgY2xvbmUgICAgPSBmdW5jdGlvbihvKXsgcmV0dXJuIGV4dGVuZCh7fSwgbykgfVxudmFyIHNsaWNlICAgID0gZnVuY3Rpb24oYSwgZiwgbil7IHJldHVybiBbXS5zbGljZS5jYWxsKGEsIGYsIG4pIH1cblxudmFyIG1hcE9iaiA9IGZ1bmN0aW9uKG8sIGZuKXtcbiAgICB2YXIgciA9IHt9XG4gICAgZm9yICggdmFyIHAgaW4gbyApIHJbcF0gPSBmbihvW3BdLCBwLCBvKVxuICAgIHJldHVybiByXG59XG5cbnZhciBtYXAgPSBmdW5jdGlvbihhcnIsIGZuKXtcbiAgICB2YXIgYSA9IFtdXG4gICAgZm9yICggdmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkgKz0gMSApIGEucHVzaChmbihhcnJbaV0sIGksIGFycikpXG4gICAgcmV0dXJuIGFcbn1cblxudmFyIHJlZHVjZSA9IGZ1bmN0aW9uKGFyciwgZm4pe1xuICAgIHZhciBzZWVkID0gYXJyWzBdXG4gICAgYXJyID0gYXJyLnNsaWNlKDEpXG4gICAgZm9yICggdmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkgKz0gMSkgc2VlZCA9IGZuKHNlZWQsIGFycltpXSlcbiAgICByZXR1cm4gc2VlZFxufVxuXG52YXIgcGljayA9IGZ1bmN0aW9uKG8pe1xuICAgIHZhciBuYW1lcyA9IHNsaWNlKGFyZ3VtZW50cywgMSksXG4gICAgICAgIHIgICAgID0ge31cblxuICAgIGZvciAoIHZhciBpID0gMCwgbCA9IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMSApXG4gICAgICAgIHJbbmFtZXNbaV1dID0gb1tuYW1lc1tpXV1cbiAgICByZXR1cm4gclxufVxuXG4vLyBPYmplY3QgLT4gW1N0cmluZ11cblxuLy8gZ2V0IHRoZSBrZXlzIG9mIGFuIG9iamVjdFxudmFyIGtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbihvKXtcbiAgICB2YXIgYSA9IFtdXG4gICAgZm9yICggdmFyIGtleSBpbiBvICkgYS5wdXNoKGtleSlcbiAgICByZXR1cm4gYVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGV4dGVuZCAgICA6IGV4dGVuZCxcbiAgICBjbG9uZSAgICAgOiBjbG9uZSxcbiAgICBzbGljZSAgICAgOiBzbGljZSxcbiAgICBtYXBPYmogICAgOiBtYXBPYmosXG4gICAgcGljayAgICAgIDogcGljayxcbiAgICBtYXAgICAgICAgOiBtYXAsXG4gICAgcmVkdWNlICAgIDogcmVkdWNlLFxuICAgIGtleXMgICAgICA6IGtleXNcbn1cbiJdfQ==
;