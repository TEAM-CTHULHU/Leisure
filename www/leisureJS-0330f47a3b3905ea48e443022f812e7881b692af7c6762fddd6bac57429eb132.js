;(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2012, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var L_anno, L_apply, L_lambda, L_let, L_lit, L_ref, LeisureObject, Leisure_BaseCons, Leisure_cons, Leisure_nil, Nil, anno, apply, ast2Json, ast2JsonEncodings, astString, charCodes, checkType, cons, consEq, consFrom, define, ensureLeisureClass, evalFunc, foldLeft, functionInfo, getAnnoBody, getAnnoData, getAnnoName, getApplyArg, getApplyFunc, getDataType, getLambdaBody, getLambdaVar, getLetBody, getLetName, getLetValue, getLitVal, getRefName, getType, head, jsType, json2Ast, json2AstEncodings, lambda, leisureAddFunc, letStr, lit, llet, makeSuper, mkProto, nameFunc, nameSub, primCons, primFoldLeft, ref, root, save, setDataType, setType, supertypes, tail, throwError, _, _ref, _ref1, _ref2,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  root = module.exports = require('./base');

  _ = require('./lodash.min');

  charCodes = {
    "'": '$a',
    ',': '$b',
    '$': '$$',
    '@': '$d',
    '?': '$e',
    '/': '$f',
    '*': '$g',
    '&': '$h',
    '^': '$i',
    '!': '$k',
    '`': '$l',
    '~': '$m',
    '-': '$_',
    '+': '$o',
    '=': '$p',
    '|': '$q',
    '[': '$r',
    ']': '$s',
    '{': '$t',
    '}': '$u',
    '"': '$v',
    ':': '$w',
    ';': '$x',
    '<': '$y',
    '>': '$z',
    '%': '$A',
    '.': '$B'
  };

  nameSub = function(name) {
    var code, i, s, _i, _ref;

    s = '';
    for (i = _i = 0, _ref = name.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
      code = charCodes[name[i]];
      s += code != null ? code : name[i];
    }
    return s;
  };

  setDataType = function(func, dataType) {
    if (dataType) {
      func.dataType = dataType;
    }
    return func;
  };

  setType = function(func, type) {
    if (type) {
      func.type = type;
    }
    func.__proto__ = (ensureLeisureClass(type)).prototype;
    return func;
  };

  LeisureObject = (function() {
    function LeisureObject() {}

    return LeisureObject;

  })();

  LeisureObject.prototype.className = 'LeisureObject';

  global.Leisure_Object = LeisureObject;

  supertypes = {};

  root.leisureClassChange = 0;

  ensureLeisureClass = function(leisureClass) {
    var cl;

    cl = "Leisure_" + (nameSub(leisureClass));
    if (global[cl] == null) {
      global[cl] = eval("(function " + cl + "(){})");
      supertypes[cl] = 'Leisure_Object';
      root.leisureClassChange++;
    }
    return global[cl];
  };

  makeSuper = function(type, supertype) {
    supertypes["Leisure_" + (nameSub(type))] = "Leisure_" + (nameSub(supertype));
    return root.leisureClassChange++;
  };

  ensureLeisureClass('cons');

  ensureLeisureClass('nil');

  supertypes.Leisure_cons = 'Leisure_Object';

  supertypes.Leisure_nil = 'Leisure_Object';

  ensureLeisureClass('ast');

  ensureLeisureClass('lit');

  Leisure_lit.prototype.toString = function() {
    return "lit(" + (getLitVal(this)) + ")";
  };

  ensureLeisureClass('ref');

  Leisure_ref.prototype.toString = function() {
    return "ref(" + (getRefName(this)) + ")";
  };

  ensureLeisureClass('lambda');

  Leisure_lambda.prototype.toString = function() {
    return "lambda(" + (astString(this)) + ")";
  };

  ensureLeisureClass('apply');

  Leisure_apply.prototype.toString = function() {
    return "apply(" + (astString(this)) + ")";
  };

  ensureLeisureClass('let');

  Leisure_let.prototype.toString = function() {
    return "let(" + (astString(this)) + ")";
  };

  ensureLeisureClass('anno');

  Leisure_anno.prototype.toString = function() {
    return "anno(" + (astString(this)) + ")";
  };

  ensureLeisureClass('doc');

  ensureLeisureClass('srcLocation');

  ensureLeisureClass('pattern');

  makeSuper('lit', 'ast');

  makeSuper('ref', 'ast');

  makeSuper('lambda', 'ast');

  makeSuper('apply', 'ast');

  makeSuper('let', 'ast');

  makeSuper('anno', 'ast');

  astString = function(ast) {
    var argStr, funcStr, _ref;

    switch (getType(ast)) {
      case 'lit':
        return getLitVal(ast);
      case 'ref':
        return getRefName(ast);
      case 'apply':
        funcStr = astString(getApplyFunc(ast));
        if ((_ref = getType(getApplyFunc(ast))) === 'lambda' || _ref === 'let') {
          funcStr = "(" + funcStr + ")";
        }
        argStr = astString(getApplyArg(ast));
        if (getType(getApplyArg(ast)) === 'apply') {
          argStr = "(" + argStr + ")";
        }
        return "" + funcStr + " " + argStr;
      case 'lambda':
        return "\\" + (getLambdaVar(ast)) + " . " + (astString(getLambdaBody(ast)));
      case 'let':
        return "\\\\" + (letStr(ast));
      case 'anno':
        return "\\@" + (getAnnoName(ast)) + " " + (getAnnoData(ast)) + " . " + (astString(getAnnoBody(ast)));
    }
  };

  letStr = function(ast) {
    var binding, body;

    body = getLetBody(ast);
    binding = "(" + (getLetName(ast)) + " = " + (astString(getLetValue(ast))) + ")";
    if (body instanceof Leisure_let) {
      return "" + binding + " " + (letStr(body));
    } else {
      return "" + binding + " . " + (astString(body));
    }
  };

  Leisure_BaseCons = (function(_super) {
    __extends(Leisure_BaseCons, _super);

    function Leisure_BaseCons() {
      _ref = Leisure_BaseCons.__super__.constructor.apply(this, arguments);
      return _ref;
    }

    Leisure_BaseCons.prototype.head = function() {
      throw new Error("Not Implemented");
    };

    Leisure_BaseCons.prototype.tail = function() {
      throw new Error("Not Implemented");
    };

    Leisure_BaseCons.prototype.isNil = function() {
      return false;
    };

    Leisure_BaseCons.prototype.find = function(func) {
      if (func(this.head())) {
        return this.head();
      } else {
        return this.tail().find(func);
      }
    };

    Leisure_BaseCons.prototype.removeAll = function(func) {
      var t;

      t = this.tail().removeAll(func);
      if (func(this.head())) {
        return t;
      } else if (t === this.tail()) {
        return this;
      } else {
        return cons(this.head(), t);
      }
    };

    Leisure_BaseCons.prototype.map = function(func) {
      return cons(func(this.head()), this.tail().map(func));
    };

    Leisure_BaseCons.prototype.foldl = function(func, arg) {
      return this.tail().foldl(func, func(arg, this.head()));
    };

    Leisure_BaseCons.prototype.foldl1 = function(func) {
      return this.tail().foldl(func, this.head());
    };

    Leisure_BaseCons.prototype.foldr = function(func, arg) {
      return func(this.head(), this.tail().foldr(func, arg));
    };

    Leisure_BaseCons.prototype.foldr1 = function(func) {
      if (this.tail() === Nil) {
        return this.head();
      } else {
        return func(this.head(), this.tail().foldr1(func));
      }
    };

    Leisure_BaseCons.prototype.toArray = function() {
      return this.foldl((function(i, el) {
        i.push(el);
        return i;
      }), []);
    };

    Leisure_BaseCons.prototype.join = function(str) {
      return this.toArray().join(str);
    };

    Leisure_BaseCons.prototype.reverse = function() {
      return this.rev(Nil);
    };

    Leisure_BaseCons.prototype.rev = function(result) {
      return this.tail().rev(cons(this.head(), result));
    };

    Leisure_BaseCons.prototype.elementString = function() {
      var _ref1;

      return "" + (((_ref1 = this.head()) != null ? _ref1.constructor : void 0) === this.constructor || this.head() instanceof Leisure_nil ? '[' + this.head().elementString() + ']' : this.head()) + (this.tail() instanceof Leisure_nil ? '' : this.tail() instanceof Leisure_BaseCons ? " " + (this.tail().elementString()) : " | " + (this.tail()));
    };

    Leisure_BaseCons.prototype.equals = function(other) {
      return this === other || (other instanceof Leisure_BaseCons && consEq(this.head(), other.head()) && consEq(this.tail(), other.tail()));
    };

    Leisure_BaseCons.prototype.each = function(block) {
      block(this.head());
      return this.tail().each(block);
    };

    Leisure_BaseCons.prototype.length = function() {
      return this.foldl((function(i, el) {
        return i + 1;
      }), 0);
    };

    Leisure_BaseCons.prototype.last = function() {
      var t;

      t = this.tail();
      if (t === Nil) {
        return this.head();
      } else {
        return t.last();
      }
    };

    Leisure_BaseCons.prototype.append = function(l) {
      return cons(this.head(), this.tail().append(l));
    };

    Leisure_BaseCons.prototype.toString = function() {
      return "" + (this.stringName()) + "[" + (this.elementString()) + "]";
    };

    Leisure_BaseCons.prototype.stringName = function() {
      return "BaseCons";
    };

    return Leisure_BaseCons;

  })(LeisureObject);

  consEq = function(a, b) {
    return a === b || (a instanceof Leisure_BaseCons && a.equals(b));
  };

  Leisure_cons = (function(_super) {
    __extends(Leisure_cons, _super);

    function Leisure_cons() {
      _ref1 = Leisure_cons.__super__.constructor.apply(this, arguments);
      return _ref1;
    }

    Leisure_cons.prototype.head = function() {
      return this(function() {
        return function(a) {
          return function(b) {
            return a();
          };
        };
      });
    };

    Leisure_cons.prototype.tail = function() {
      return this(function() {
        return function(a) {
          return function(b) {
            return b();
          };
        };
      });
    };

    Leisure_cons.prototype.stringName = function() {
      return "Cons";
    };

    return Leisure_cons;

  })(Leisure_BaseCons);

  global.Leisure_cons = Leisure_cons;

  Leisure_nil = (function(_super) {
    __extends(Leisure_nil, _super);

    function Leisure_nil() {
      _ref2 = Leisure_nil.__super__.constructor.apply(this, arguments);
      return _ref2;
    }

    Leisure_nil.prototype.isNil = function() {
      return true;
    };

    Leisure_nil.prototype.find = function() {
      return this;
    };

    Leisure_nil.prototype.removeAll = function() {
      return this;
    };

    Leisure_nil.prototype.map = function(func) {
      return Nil;
    };

    Leisure_nil.prototype.foldl = function(func, arg) {
      return arg;
    };

    Leisure_nil.prototype.foldr = function(func, arg) {
      return arg;
    };

    Leisure_nil.prototype.reverse = function() {
      return this;
    };

    Leisure_nil.prototype.rev = function(result) {
      return result;
    };

    Leisure_nil.prototype.equals = function(other) {
      return other instanceof Leisure_nil;
    };

    Leisure_nil.prototype.each = function() {};

    Leisure_nil.prototype.toArray = function() {
      return [];
    };

    Leisure_nil.prototype.join = function() {
      return '';
    };

    Leisure_nil.prototype.append = function(l) {
      return l;
    };

    Leisure_nil.prototype.toString = function() {
      return "Cons[]";
    };

    Leisure_nil.prototype.elementString = function() {
      return '';
    };

    return Leisure_nil;

  })(LeisureObject);

  global.Leisure_nil = Leisure_nil;

  jsType = function(v) {
    var t;

    t = typeof v;
    if (t === 'object') {
      return v.constructor || t;
    } else {
      return t;
    }
  };

  mkProto = function(protoFunc, value) {
    value.__proto__ = protoFunc.prototype;
    return value;
  };

  throwError = function(msg) {
    throw (msg instanceof Error ? msg : new Error(String(msg)));
  };

  checkType = function(value, type) {
    if (!(value instanceof type)) {
      return throwError("Type error: expected type: " + type + ", but got: " + (jsType(value)));
    }
  };

  primCons = setDataType((function(a) {
    return function(b) {
      return mkProto(Leisure_cons, setType((function(f) {
        return f()(a)(b);
      }), 'cons'));
    };
  }), 'cons');

  Nil = mkProto(Leisure_nil, setDataType(setType((function(a) {
    return function(b) {
      return b();
    };
  }), 'nil'), 'nil'));

  cons = function(a, b) {
    return primCons(function() {
      return a;
    })(function() {
      return b;
    });
  };

  foldLeft = function(func, val, thing) {
    if (thing instanceof Leisure_cons) {
      return thing.foldl(func, val);
    } else {
      return primFoldLeft(func, val, thing, 0);
    }
  };

  primFoldLeft = function(func, val, array, index) {
    if (index < array.length) {
      return primFoldLeft(func, func(val, array[index]), array, index + 1);
    } else {
      return val;
    }
  };

  global.leisureFuncs = {};

  global.leisureFuncNames = Nil;

  leisureAddFunc = global.leisureAddFunc = function(nm) {
    return global.leisureFuncNames = cons(nm, global.leisureFuncNames);
  };

  root.evalFunc = evalFunc = eval;

  root.functionCount = 0;

  functionInfo = {};

  nameFunc = function(func, name) {
    var f;

    f = null;
    return function() {
      if (f === null) {
        f = func();
        if (typeof f === 'function') {
          f.leisureName = name;
        }
        return f;
      } else {
        return f;
      }
    };
  };

  define = function(name, func, arity, src, method) {
    var nm;

    functionInfo[name] = {
      src: src,
      arity: arity,
      leisureName: name,
      alts: {},
      altList: []
    };
    nm = 'L_' + nameSub(name);
    if (!method && global.noredefs && (global[nm] != null)) {
      throwError("[DEF] Attempt to redefine definition: " + name);
    }
    functionInfo[name].mainDef = global[nm] = global.leisureFuncs[nm] = nameFunc(func, name);
    leisureAddFunc(name);
    root.functionCount++;
    return func;
  };

  L_lit = setDataType((function(_x) {
    return setType((function(_f) {
      return _f()(_x);
    }), 'lit');
  }), 'lit');

  L_ref = setDataType((function(_x) {
    return setType((function(_f) {
      return _f()(_x);
    }), 'ref');
  }), 'ref');

  L_lambda = setDataType((function(_v) {
    return function(_f) {
      return setType((function(_g) {
        return _g()(_v)(_f);
      }), 'lambda');
    };
  }), 'lambda');

  L_apply = setDataType((function(_func) {
    return function(_arg) {
      return setType((function(_f) {
        return _f()(_func)(_arg);
      }), 'apply');
    };
  }), 'apply');

  L_let = setDataType((function(_n) {
    return function(_v) {
      return function(_b) {
        return setType((function(_f) {
          return _f()(_n)(_v)(_b);
        }), 'let');
      };
    };
  }), 'let');

  L_anno = setDataType((function(_name) {
    return function(_data) {
      return function(_body) {
        return setType((function(_f) {
          return _f()(_name)(_data)(_body);
        }), 'anno');
      };
    };
  }), 'anno');

  getType = function(f) {
    var t;

    t = typeof f;
    return (t === 'function' && (f != null ? f.type : void 0)) || ("*" + t);
  };

  define('getType', (function() {
    return function(value) {
      return getType(value());
    };
  }), 1);

  getDataType = function(f) {
    return (typeof f === 'function' && f.dataType) || '';
  };

  define('getDataType', (function() {
    return function(value) {
      return getDataType(value());
    };
  }), 1);

  save = {};

  save.lit = lit = function(l) {
    return L_lit(function() {
      return l;
    });
  };

  save.ref = ref = function(r) {
    return L_ref(function() {
      return r;
    });
  };

  save.lambda = lambda = function(v, body) {
    return L_lambda(function() {
      return v;
    })(function() {
      return body;
    });
  };

  save.apply = apply = function(f, a) {
    return L_apply(function() {
      return f;
    })(function() {
      return a;
    });
  };

  save.llet = llet = function(n, v, b) {
    return L_let(function() {
      return n;
    })(function() {
      return v;
    })(function() {
      return b;
    });
  };

  save.anno = anno = function(name, data, body) {
    return L_anno(function() {
      return name;
    })(function() {
      return data;
    })(function() {
      return body;
    });
  };

  save.cons = cons;

  getLitVal = function(lt) {
    return lt(function() {
      return function(v) {
        return v();
      };
    });
  };

  getRefName = function(rf) {
    return rf(function() {
      return function(v) {
        return v();
      };
    });
  };

  getLambdaVar = function(lam) {
    return lam(function() {
      return function(v) {
        return function(b) {
          return v();
        };
      };
    });
  };

  getLambdaBody = function(lam) {
    return lam(function() {
      return function(v) {
        return function(b) {
          return b();
        };
      };
    });
  };

  getApplyFunc = function(apl) {
    return apl(function() {
      return function(a) {
        return function(b) {
          return a();
        };
      };
    });
  };

  getApplyArg = function(apl) {
    return apl(function() {
      return function(a) {
        return function(b) {
          return b();
        };
      };
    });
  };

  getLetName = function(lt) {
    return lt(function() {
      return function(n) {
        return function(v) {
          return function(b) {
            return n();
          };
        };
      };
    });
  };

  getLetValue = function(lt) {
    return lt(function() {
      return function(n) {
        return function(v) {
          return function(b) {
            return v();
          };
        };
      };
    });
  };

  getLetBody = function(lt) {
    return lt(function() {
      return function(n) {
        return function(v) {
          return function(b) {
            return b();
          };
        };
      };
    });
  };

  getAnnoName = function(anno) {
    return anno(function() {
      return function(name) {
        return function(data) {
          return function(body) {
            return name();
          };
        };
      };
    });
  };

  getAnnoData = function(anno) {
    return anno(function() {
      return function(name) {
        return function(data) {
          return function(body) {
            return data();
          };
        };
      };
    });
  };

  getAnnoBody = function(anno) {
    return anno(function() {
      return function(name) {
        return function(data) {
          return function(body) {
            return body();
          };
        };
      };
    });
  };

  json2AstEncodings = {
    lit: function(json) {
      return L_lit(function() {
        return json.value;
      });
    },
    ref: function(json) {
      return L_ref(function() {
        return json.varName;
      });
    },
    lambda: function(json) {
      return L_lambda(function() {
        return json.varName;
      })(function() {
        return json2Ast(json.body);
      });
    },
    apply: function(json) {
      return L_apply(function() {
        return json2Ast(json.func);
      })(function() {
        return json2Ast(json.arg);
      });
    },
    "let": function(json) {
      return L_let(function() {
        return json.varName;
      })(function() {
        return json2Ast(json.value);
      })(function() {
        return json2Ast(json.body);
      });
    },
    anno: function(json) {
      return L_anno(function() {
        return json.name;
      })(function() {
        return json2Ast(json.data);
      })(function() {
        return json2Ast(json.body);
      });
    },
    cons: function(json) {
      return save.cons(json2Ast(json.head), json2Ast(json.tail));
    },
    nil: function(json) {
      return Nil;
    }
  };

  lit = save.lit;

  ref = save.ref;

  lambda = save.lambda;

  apply = save.apply;

  llet = save.llet;

  anno = save.anno;

  cons = save.cons;

  json2Ast = function(json) {
    if (typeof json === 'object') {
      return json2AstEncodings[json._type](json);
    } else {
      return json;
    }
  };

  ast2JsonEncodings = {
    Leisure_lit: function(ast) {
      return {
        _type: 'lit',
        value: getLitVal(ast)
      };
    },
    Leisure_ref: function(ast) {
      return {
        _type: 'ref',
        varName: getRefName(ast)
      };
    },
    Leisure_lambda: function(ast) {
      return {
        _type: 'lambda',
        varName: getLambdaVar(ast),
        body: ast2Json(getLambdaBody(ast))
      };
    },
    Leisure_apply: function(ast) {
      return {
        _type: 'apply',
        func: ast2Json(getApplyFunc(ast)),
        arg: ast2Json(getApplyArg(ast))
      };
    },
    Leisure_let: function(ast) {
      return {
        _type: 'let',
        varName: getLetName(ast),
        value: ast2Json(getLetValue(ast)),
        body: ast2Json(getLetBody(ast))
      };
    },
    Leisure_anno: function(ast) {
      return {
        _type: 'anno',
        name: getAnnoName(ast),
        data: ast2Json(getAnnoData(ast)),
        body: ast2Json(getAnnoBody(ast))
      };
    },
    Leisure_cons: function(ast) {
      return {
        _type: 'cons',
        head: ast2Json(ast.head()),
        tail: ast2Json(ast.tail())
      };
    },
    Leisure_nil: function(ast) {
      return {
        _type: 'nil'
      };
    }
  };

  ast2Json = function(ast) {
    var _ref3;

    if (ast2JsonEncodings[(_ref3 = ast.constructor) != null ? _ref3.name : void 0]) {
      return ast2JsonEncodings[ast.constructor.name](ast);
    } else {
      return ast;
    }
  };

  define('json2Ast', (function() {
    return function(json) {
      return json2Ast(JSON.parse(json()));
    };
  }));

  define('ast2Json', (function() {
    return function(ast) {
      return JSON.stringify(ast2Json(ast()));
    };
  }));

  consFrom = function(array, i) {
    i = i || 0;
    if (i < array.length) {
      return cons(array[i], consFrom(array, i + 1));
    } else {
      return Nil;
    }
  };

  head = function(l) {
    return l.head();
  };

  tail = function(l) {
    return l.tail();
  };

  root.head = head;

  root.tail = tail;

  root.consFrom = consFrom;

  root.nameSub = nameSub;

  root.setDataType = setDataType;

  root.setType = setType;

  root.mkProto = mkProto;

  root.Nil = Nil;

  root.cons = cons;

  root.primCons = primCons;

  root.define = define;

  root.getType = getType;

  root.getDataType = getDataType;

  root.lit = lit;

  root.ref = ref;

  root.lambda = lambda;

  root.apply = apply;

  root.anno = anno;

  root.llet = llet;

  root.getRefName = getRefName;

  root.getLitVal = getLitVal;

  root.getLambdaBody = getLambdaBody;

  root.getLambdaVar = getLambdaVar;

  root.getApplyFunc = getApplyFunc;

  root.getApplyArg = getApplyArg;

  root.getLetName = getLetName;

  root.getLetValue = getLetValue;

  root.getLetBody = getLetBody;

  root.getAnnoName = getAnnoName;

  root.getAnnoData = getAnnoData;

  root.getAnnoBody = getAnnoBody;

  root.throwError = throwError;

  root.foldLeft = foldLeft;

  root.LeisureObject = LeisureObject;

  root.evalFunc = evalFunc;

  root.json2Ast = json2Ast;

  root.ast2Json = ast2Json;

  root.Leisure_lit = Leisure_lit;

  root.Leisure_ref = Leisure_ref;

  root.Leisure_lambda = Leisure_lambda;

  root.Leisure_apply = Leisure_apply;

  root.Leisure_let = Leisure_let;

  root.Leisure_anno = Leisure_anno;

  root.ensureLeisureClass = ensureLeisureClass;

  root.makeSuper = makeSuper;

  root.supertypes = supertypes;

  root.functionInfo = functionInfo;

}).call(this);

/*
*/

})(self)
},{"./base":2,"./lodash.min":6}],2:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var defaultEnv, readDir, readFile, root, statFile, writeFile;

  root = module.exports;

  defaultEnv = {
    presentValue: function(x) {
      return x;
    },
    values: {}
  };

  readFile = function(fileName, cont) {
    return defaultEnv.readFile(fileName, cont);
  };

  writeFile = function(fileName, data, cont) {
    return defaultEnv.writeFile(fileName, data, cont);
  };

  readDir = function(fileName, cont) {
    return defaultEnv.readDir(fileName, cont);
  };

  statFile = function(fileName, cont) {
    return defaultEnv.statFile(fileName, cont);
  };

  root.defaultEnv = defaultEnv;

  root.readFile = readFile;

  root.readDir = readDir;

  root.writeFile = writeFile;

  root.statFile = statFile;

}).call(this);

/*
*/

},{}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
(function() {
  var Leisure, exports, k, nb, v, _ref;

  window.marked = require('./marked');

  Leisure = exports = module.exports = require('./base');

  require('./ast');

  require('./gen');

  require('./runtime');

  require('./generatedPrelude');

  require('./std');

  require('./md');

  window.Notebook = nb = require('./notebook');

  _ref = window.Leisure;
  for (k in _ref) {
    v = _ref[k];
    Leisure[k] = v;
  }

  window.Leisure = Leisure;

}).call(this);

/*
*/

},{"./ast":1,"./base":2,"./gen":4,"./generatedPrelude":5,"./marked":7,"./md":8,"./notebook":9,"./runtime":10,"./std":11}],4:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var Leisure_anno, Leisure_apply, Leisure_lambda, Leisure_let, Leisure_lit, Leisure_ref, Nil, addUniq, cons, consFrom, define, dumpAnno, gen, genApplyArg, genLets, genUniq, getAnnoBody, getAnnoData, getAnnoName, getApplyArg, getApplyFunc, getLambdaBody, getLambdaVar, getLastLetBody, getLetBody, getLetName, getLetValue, getLitVal, getRefName, left, letList, makeSyncMonad, memoize, nameSub, right, root, runMonad, setDataType, setType, uniqName, varNameSub, _, _false, _ref, _ref1;

  _ref = root = module.exports = require('./ast'), nameSub = _ref.nameSub, getLitVal = _ref.getLitVal, getRefName = _ref.getRefName, getLambdaVar = _ref.getLambdaVar, getLambdaBody = _ref.getLambdaBody, getApplyFunc = _ref.getApplyFunc, getApplyArg = _ref.getApplyArg, getAnnoName = _ref.getAnnoName, getAnnoData = _ref.getAnnoData, getAnnoBody = _ref.getAnnoBody, getLetName = _ref.getLetName, getLetValue = _ref.getLetValue, getLetBody = _ref.getLetBody, Leisure_lit = _ref.Leisure_lit, Leisure_ref = _ref.Leisure_ref, Leisure_lambda = _ref.Leisure_lambda, Leisure_apply = _ref.Leisure_apply, Leisure_let = _ref.Leisure_let, Leisure_anno = _ref.Leisure_anno, setType = _ref.setType, setDataType = _ref.setDataType, cons = _ref.cons, Nil = _ref.Nil, consFrom = _ref.consFrom, define = _ref.define;

  _ref1 = require('./runtime'), makeSyncMonad = _ref1.makeSyncMonad, runMonad = _ref1.runMonad, _false = _ref1._false, left = _ref1.left, right = _ref1.right;

  _ = require('./lodash.min');

  varNameSub = function(n) {
    return "L_" + (nameSub(n));
  };

  gen = function(ast) {
    return genUniq(ast, Nil, [Nil, 0]);
  };

  genUniq = function(ast, names, uniq) {
    var arity, data, funcName, genned, n, name, src, u, _ref2;

    switch (ast.constructor) {
      case Leisure_lit:
        return JSON.stringify(getLitVal(ast));
      case Leisure_ref:
        return "" + (uniqName(getRefName(ast), uniq)) + "()";
      case Leisure_lambda:
        name = getLambdaVar(ast);
        u = addUniq(name, names, uniq);
        n = cons(name, names);
        return "function(" + (uniqName(name, u)) + "){return " + (genUniq(getLambdaBody(ast), n, u)) + "}";
      case Leisure_apply:
        return "" + (genUniq(getApplyFunc(ast), names, uniq)) + "(" + (genApplyArg(getApplyArg(ast), names, uniq)) + ")";
      case Leisure_let:
        return "(function(){\n" + (genLets(ast, names, uniq)) + "})()";
      case Leisure_anno:
        name = getAnnoName(ast);
        data = getAnnoData(ast);
        genned = genUniq(getAnnoBody(ast), names, uniq);
        switch (name) {
          case 'type':
            return "setType(" + genned + ", '" + data + "')";
          case 'dataType':
            return "setDataType(" + genned + ", '" + data + "')";
          case 'define':
            _ref2 = data.toArray(), funcName = _ref2[0], arity = _ref2[1], src = _ref2[2];
            return "define('" + funcName + "', (function(){return " + genned + "}), " + arity + ", " + (JSON.stringify(src)) + ")";
          default:
            return genned;
        }
        break;
      default:
        return "DUR? " + ast + ", " + ast.constructor + " " + Leisure_lambda;
    }
  };

  memoize = function(func) {
    return "(function(){var $m; return function(){return $m || ($m = " + func + ")}})()";
  };

  dumpAnno = function(ast) {
    if (ast instanceof Leisure_anno) {
      return dumpAnno(getAnnoBody(ast));
    } else {
      return ast;
    }
  };

  genApplyArg = function(arg, names, uniq) {
    if (dumpAnno(arg) instanceof Leisure_apply) {
      return memoize(genUniq(arg, names, uniq));
    } else if (arg instanceof Leisure_ref) {
      return uniqName(getRefName(arg), uniq);
    } else if (arg instanceof Leisure_let) {
      return "function(){" + (genLets(arg, names, uniq)) + "}";
    } else if (dumpAnno(arg) instanceof Leisure_lambda) {
      return memoize(genUniq(arg, names, uniq));
    } else {
      return "function(){return " + (genUniq(arg, names, uniq)) + "}";
    }
  };

  genLets = function(ast, names, uniq) {
    var assigns, decs, _ref2;

    _ref2 = _.foldl(letList(ast, []), (function(result, l) {
      var code, letName, letNames, n, newU, u;

      n = result[0], u = result[1], letNames = result[2], code = result[3];
      newU = addUniq(getLetName(l), n, u);
      letName = uniqName(getLetName(l), newU);
      return [cons(getLetName(l), n), newU, cons(letName, letNames), cons('\n' + letName + ' = ' + genApplyArg(getLetValue(l), n, u), code)];
    }), [names, uniq, Nil, Nil]), names = _ref2[0], uniq = _ref2[1], decs = _ref2[2], assigns = _ref2[3];
    return "\nvar " + (decs.join(', ')) + ";\n" + (assigns.join(';\n')) + ";\nreturn " + (genUniq(getLastLetBody(ast), names, uniq));
  };

  addUniq = function(name, names, uniq) {
    var num, overrides;

    if ((names.find(function(el) {
      return el === name;
    })) !== Nil) {
      overrides = uniq[0], num = uniq[1];
      return [cons(cons(name, "" + name + "_" + num), overrides), num + 1];
    } else {
      return uniq;
    }
  };

  uniqName = function(name, uniq) {
    var kv;

    uniq = uniq[0];
    kv = uniq.find((function(el) {
      return el.head() === name;
    }), uniq);
    return varNameSub((kv !== Nil ? kv.tail() : name));
  };

  letList = function(ast, buf) {
    if (ast instanceof Leisure_let) {
      buf.push(ast);
      return letList(getLetBody(ast), buf);
    } else {
      return buf;
    }
  };

  getLastLetBody = function(ast) {
    if (ast instanceof Leisure_let) {
      return getLastLetBody(getLetBody(ast));
    } else {
      return ast;
    }
  };

  define('runAst', function() {
    return function(ast) {
      var err;

      try {
        return eval("(" + (gen(ast())) + ")");
      } catch (_error) {
        err = _error;
        return L_parseErr()(function() {
          return "\n\nParse error: " + err.toString() + "\nAST: ";
        })(ast);
      }
    };
  });

  root.gen = gen;

}).call(this);

/*
*/

},{"./ast":1,"./lodash.min":6,"./runtime":10}],5:[function(require,module,exports){
L_runMonads([
  function(){return L_define()(function(){return "true"})(function(){return 0})(function(){return "true = \\a b . a"})((function(){var $m; return function(){return $m || ($m = setDataType(setType(function(L_a){return function(L_b){return L_a()}}, 'true'), 'true'))}})())},
  function(){return L_define()(function(){return "false"})(function(){return 0})(function(){return "false = \\a b . b"})((function(){var $m; return function(){return $m || ($m = setDataType(setType(function(L_a){return function(L_b){return L_b()}}, 'false'), 'false'))}})())},
  function(){return L_define()(function(){return "not"})(function(){return 1})(function(){return "not b = b false true"})((function(){var $m; return function(){return $m || ($m = function(L_b){return L_b()(L_false)(L_true)})}})())},
  function(){return L_define()(function(){return "and"})(function(){return 2})(function(){return "and a b = a b false"})((function(){var $m; return function(){return $m || ($m = function(L_a){return function(L_b){return L_a()(L_b)(L_false)}})}})())},
  function(){return L_define()(function(){return "or"})(function(){return 2})(function(){return "or a b = a true b"})((function(){var $m; return function(){return $m || ($m = function(L_a){return function(L_b){return L_a()(L_true)(L_b)}})}})())},
  function(){return L_define()(function(){return "some"})(function(){return 1})(function(){return "some x = \\someCase noneCase . someCase x"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_x){return setType(function(L_someCase){return function(L_noneCase){return L_someCase()(L_x)}}, 'some')}, 'some'))}})())},
  function(){return L_define()(function(){return "some2"})(function(){return 2})(function(){return "some2 a b = \\someCase noneCase . someCase a b"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_a){return function(L_b){return setType(function(L_someCase){return function(L_noneCase){return L_someCase()(L_a)(L_b)}}, 'some2')}}, 'some2'))}})())},
  function(){return L_define()(function(){return "none"})(function(){return 0})(function(){return "none = \\someCase noneCase . noneCase"})((function(){var $m; return function(){return $m || ($m = setDataType(setType(function(L_someCase){return function(L_noneCase){return L_noneCase()}}, 'none'), 'none'))}})())},
  function(){return L_define()(function(){return "neq"})(function(){return 2})(function(){return "neq a b = not (eq a b)"})((function(){var $m; return function(){return $m || ($m = function(L_a){return function(L_b){return L_not()((function(){var $m; return function(){return $m || ($m = L_eq()(L_a)(L_b))}})())}})}})())},
  function(){return L_define()(function(){return "left"})(function(){return 1})(function(){return "left x = \\lCase rCase . lCase x"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_x){return setType(function(L_lCase){return function(L_rCase){return L_lCase()(L_x)}}, 'left')}, 'left'))}})())},
  function(){return L_define()(function(){return "right"})(function(){return 1})(function(){return "right x = \\lCase rCase . rCase x"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_x){return setType(function(L_lCase){return function(L_rCase){return L_rCase()(L_x)}}, 'right')}, 'right'))}})())},
  function(){return L_define()(function(){return "show"})(function(){return 1})(function(){return "show x = strString x"})((function(){var $m; return function(){return $m || ($m = function(L_x){return L_strString()(L_x)})}})())},
  function(){return L_define()(function(){return "id"})(function(){return 1})(function(){return "id x = x"})((function(){var $m; return function(){return $m || ($m = function(L_x){return L_x()})}})())},
  function(){return L_define()(function(){return "compose"})(function(){return 2})(function(){return "compose f g = \\x . f (g x)"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_f){return function(L_g){return setType(function(L_x){return L_f()((function(){var $m; return function(){return $m || ($m = L_g()(L_x))}})())}, 'compose')}}, 'compose'))}})())},
  function(){return L_define()(function(){return "flip"})(function(){return 1})(function(){return "flip func = \\x y . func y x"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_func){return setType(function(L_x){return function(L_y){return L_func()(L_y)(L_x)}}, 'flip')}, 'flip'))}})())},
  function(){return L_define()(function(){return "cons"})(function(){return 2})(function(){return "cons a b = \\f . f a b"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_a){return function(L_b){return setType(function(L_f){return L_f()(L_a)(L_b)}, 'cons')}}, 'cons'))}})())},
  function(){return L_define()(function(){return "isCons"})(function(){return 1})(function(){return "isCons c = hasType c cons"})((function(){var $m; return function(){return $m || ($m = function(L_c){return L_hasType()(L_c)(L_cons)})}})())},
  function(){return L_define()(function(){return "nil"})(function(){return 0})(function(){return "nil = \\a b . b"})((function(){var $m; return function(){return $m || ($m = setDataType(setType(function(L_a){return function(L_b){return L_b()}}, 'nil'), 'nil'))}})())},
  function(){return L_define()(function(){return "isNil"})(function(){return 1})(function(){return "isNil n = hasType n nil"})((function(){var $m; return function(){return $m || ($m = function(L_n){return L_hasType()(L_n)(L_nil)})}})())},
  function(){return L_define()(function(){return "head"})(function(){return 1})(function(){return "head l = l \\h t . h"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_h()}})}})())})}})())},
  function(){return L_define()(function(){return "tail"})(function(){return 1})(function(){return "tail l = l \\h t . t"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_t()}})}})())})}})())},
  function(){return L_define()(function(){return "last"})(function(){return 1})(function(){return "last l = isCons l\n  l \\h t . isCons t (last t) h\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_isCons()(L_l)((function(){var $m; return function(){return $m || ($m = L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isCons()(L_t)((function(){var $m; return function(){return $m || ($m = L_last()(L_t))}})())(L_h)}})}})()))}})())(L_nil)})}})())},
  function(){return L_define()(function(){return "removeLast"})(function(){return 1})(function(){return "removeLast l = isCons l\n  l \\h t . isCons t (cons h (removeLast t)) nil\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_isCons()(L_l)((function(){var $m; return function(){return $m || ($m = L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isCons()(L_t)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_removeLast()(L_t))}})()))}})())(L_nil)}})}})()))}})())(L_nil)})}})())},
  function(){return L_define()(function(){return "length"})(function(){return 1})(function(){return "length list = list\n  \\h t D . + 1 (length t)\n  0"})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_$o()(function(){return 1})((function(){var $m; return function(){return $m || ($m = L_length()(L_t))}})())}}})}})())(function(){return 0})})}})())},
  function(){return L_define()(function(){return "append"})(function(){return 2})(function(){return "append a b = a (\\h t D . cons h (append t b)) b"})((function(){var $m; return function(){return $m || ($m = function(L_a){return function(L_b){return L_a()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_append()(L_t)(L_b))}})())}}})}})())(L_b)}})}})())},
  function(){return L_define()(function(){return "flatten"})(function(){return 1})(function(){return "flatten list = isCons list\n  subflatten list nil\n  list"})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_isCons()(L_list)((function(){var $m; return function(){return $m || ($m = L_subflatten()(L_list)(L_nil))}})())(L_list)})}})())},
  function(){return L_define()(function(){return "subflatten"})(function(){return 2})(function(){return "subflatten list result = isNil list\n  result\n  isCons list\n    list \\h t . subflatten h (subflatten t result)\n    cons list result"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_result){return L_isNil()(L_list)(L_result)((function(){var $m; return function(){return $m || ($m = L_isCons()(L_list)((function(){var $m; return function(){return $m || ($m = L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_subflatten()(L_h)((function(){var $m; return function(){return $m || ($m = L_subflatten()(L_t)(L_result))}})())}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_list)(L_result))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "reverse"})(function(){return 1})(function(){return "reverse l = rev l nil"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_rev()(L_l)(L_nil)})}})())},
  function(){return L_define()(function(){return "rev"})(function(){return 2})(function(){return "rev l result = l (\\h t D . rev t (cons h result)) result"})((function(){var $m; return function(){return $m || ($m = function(L_l){return function(L_result){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_rev()(L_t)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)(L_result))}})())}}})}})())(L_result)}})}})())},
  function(){return L_define()(function(){return "filter"})(function(){return 2})(function(){return "filter func list = list (\\h t D . func h (cons h) id (filter func t)) nil"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_func()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h))}})())(L_id)((function(){var $m; return function(){return $m || ($m = L_filter()(L_func)(L_t))}})())}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "find"})(function(){return 2})(function(){return "find predicate list = list (\\h t D . predicate h (some h) (find predicate t)) none"})((function(){var $m; return function(){return $m || ($m = function(L_predicate){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_predicate()(L_h)((function(){var $m; return function(){return $m || ($m = L_some()(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_find()(L_predicate)(L_t))}})())}}})}})())(L_none)}})}})())},
  function(){return L_define()(function(){return "contains"})(function(){return 2})(function(){return "contains list item = find (\\el . eq el item) list (\\x . true) false"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_item){return L_find()((function(){var $m; return function(){return $m || ($m = function(L_el){return L_eq()(L_el)(L_item)})}})())(L_list)((function(){var $m; return function(){return $m || ($m = function(L_x){return L_true()})}})())(L_false)}})}})())},
  function(){return L_define()(function(){return "map"})(function(){return 2})(function(){return "map func l = l (\\h t D . cons (func h) (map func t)) nil"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_cons()((function(){var $m; return function(){return $m || ($m = L_func()(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_map()(L_func)(L_t))}})())}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "mapSave"})(function(){return 2})(function(){return "mapSave func l = l\n  \\h t D . \\\\\n    newH = func h\n    newT = mapSave func t\n    .\n    and (eq newH h) (eq newT t)\n      l\n      cons newH newT\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return (function(){

var L_newT, L_newH;

L_newT = (function(){var $m; return function(){return $m || ($m = L_mapSave()(L_func)(L_t))}})();

L_newH = (function(){var $m; return function(){return $m || ($m = L_func()(L_h))}})();
return L_and()((function(){var $m; return function(){return $m || ($m = L_eq()(L_newH)(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_eq()(L_newT)(L_t))}})())(L_l)((function(){var $m; return function(){return $m || ($m = L_cons()(L_newH)(L_newT))}})())})()}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "foldl"})(function(){return 3})(function(){return "foldl func initialValue l = l (\\h t D . foldl func (func initialValue h) t) initialValue"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_initialValue){return function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_foldl()(L_func)((function(){var $m; return function(){return $m || ($m = L_func()(L_initialValue)(L_h))}})())(L_t)}}})}})())(L_initialValue)}}})}})())},
  function(){return L_define()(function(){return "foldl1"})(function(){return 2})(function(){return "foldl1 func l = l \\h t . foldl func h t"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_foldl()(L_func)(L_h)(L_t)}})}})())}})}})())},
  function(){return L_define()(function(){return "foldr"})(function(){return 3})(function(){return "foldr func initialValue list = list\n  \\h t D . func h (foldr func initialValue t)\n  initialValue"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_initialValue){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_func()(L_h)((function(){var $m; return function(){return $m || ($m = L_foldr()(L_func)(L_initialValue)(L_t))}})())}}})}})())(L_initialValue)}}})}})())},
  function(){return L_define()(function(){return "foldr1"})(function(){return 2})(function(){return "foldr1 func list = list \\h t . isNil t\n  h\n  func h (foldr1 func t)"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isNil()(L_t)(L_h)((function(){var $m; return function(){return $m || ($m = L_func()(L_h)((function(){var $m; return function(){return $m || ($m = L_foldr1()(L_func)(L_t))}})()))}})())}})}})())}})}})())},
  function(){return L_define()(function(){return "intersperse"})(function(){return 2})(function(){return "intersperse list element = list (\\h t D .\n  isNil t\n    list\n    cons h (cons element (intersperse t element))) nil"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_element){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isNil()(L_t)(L_list)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_element)((function(){var $m; return function(){return $m || ($m = L_intersperse()(L_t)(L_element))}})()))}})()))}})())}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "join"})(function(){return 2})(function(){return "join list el = strCat (intersperse list el)"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_el){return L_strCat()((function(){var $m; return function(){return $m || ($m = L_intersperse()(L_list)(L_el))}})())}})}})())},
  function(){return L_define()(function(){return "findIndex"})(function(){return 2})(function(){return "findIndex func list = idx list func 0"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_list){return L_idx()(L_list)(L_func)(function(){return 0})}})}})())},
  function(){return L_define()(function(){return "idx"})(function(){return 3})(function(){return "idx list func pos = list\n  \\h t D . func h\n    pos\n    idx t func (+ 1 pos)\n  -1"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_func){return function(L_pos){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_func()(L_h)(L_pos)((function(){var $m; return function(){return $m || ($m = L_idx()(L_t)(L_func)((function(){var $m; return function(){return $m || ($m = L_$o()(function(){return 1})(L_pos))}})()))}})())}}})}})())(function(){return -1})}}})}})())},
  function(){return L_define()(function(){return "index"})(function(){return 2})(function(){return "index list el = find (\\item . == el item) list"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_el){return L_find()((function(){var $m; return function(){return $m || ($m = function(L_item){return L_$p$p()(L_el)(L_item)})}})())(L_list)}})}})())},
  function(){return L_define()(function(){return "acons"})(function(){return 3})(function(){return "acons k v alist = cons (cons k v) alist"})((function(){var $m; return function(){return $m || ($m = function(L_k){return function(L_v){return function(L_alist){return L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(L_k)(L_v))}})())(L_alist)}}})}})())},
  function(){return L_define()(function(){return "assoc"})(function(){return 2})(function(){return "assoc k alist  = find (\\el . eq k (head el)) alist (\\cell . cell \\head tail . some tail) none"})((function(){var $m; return function(){return $m || ($m = function(L_k){return function(L_alist){return L_find()((function(){var $m; return function(){return $m || ($m = function(L_el){return L_eq()(L_k)((function(){var $m; return function(){return $m || ($m = L_head()(L_el))}})())})}})())(L_alist)((function(){var $m; return function(){return $m || ($m = function(L_cell){return L_cell()((function(){var $m; return function(){return $m || ($m = function(L_head){return function(L_tail){return L_some()(L_tail)}})}})())})}})())(L_none)}})}})())},
  function(){return L_define()(function(){return "rassoc"})(function(){return 2})(function(){return "rassoc v alist = find (\\el . eq v (tail el)) alist (\\cell . cell \\head tail . some head) none"})((function(){var $m; return function(){return $m || ($m = function(L_v){return function(L_alist){return L_find()((function(){var $m; return function(){return $m || ($m = function(L_el){return L_eq()(L_v)((function(){var $m; return function(){return $m || ($m = L_tail()(L_el))}})())})}})())(L_alist)((function(){var $m; return function(){return $m || ($m = function(L_cell){return L_cell()((function(){var $m; return function(){return $m || ($m = function(L_head){return function(L_tail){return L_some()(L_head)}})}})())})}})())(L_none)}})}})())},
  function(){return L_define()(function(){return "quicksort"})(function(){return 2})(function(){return "quicksort less list = (qs less list) nil"})((function(){var $m; return function(){return $m || ($m = function(L_less){return function(L_list){return L_qs()(L_less)(L_list)(L_nil)}})}})())},
  function(){return L_define()(function(){return "qs"})(function(){return 2})(function(){return "qs sortedFunc list = list\n  \\h t D . \\\\\n    greater = filter (sortedFunc h) t\n    lesser = filter (compose not (sortedFunc h)) t\n    .\n    \\rest . (qs sortedFunc lesser) (cons h ((qs sortedFunc greater) rest))\n  id"})((function(){var $m; return function(){return $m || ($m = function(L_sortedFunc){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return (function(){

var L_lesser, L_greater;

L_lesser = (function(){var $m; return function(){return $m || ($m = L_filter()((function(){var $m; return function(){return $m || ($m = L_compose()(L_not)((function(){var $m; return function(){return $m || ($m = L_sortedFunc()(L_h))}})()))}})())(L_t))}})();

L_greater = (function(){var $m; return function(){return $m || ($m = L_filter()((function(){var $m; return function(){return $m || ($m = L_sortedFunc()(L_h))}})())(L_t))}})();
return function(L_rest){return L_qs()(L_sortedFunc)(L_lesser)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_qs()(L_sortedFunc)(L_greater)(L_rest))}})()))}})())}})()}}})}})())(L_id)}})}})())},
  function(){return L_define()(function(){return "insertSorted"})(function(){return 3})(function(){return "insertSorted sortFunc item list = list\n  \\h t D . sortFunc item h (cons item list) (cons h (insertSorted sortFunc item t))\n  cons item nil"})((function(){var $m; return function(){return $m || ($m = function(L_sortFunc){return function(L_item){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_sortFunc()(L_item)(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_item)(L_list))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_insertSorted()(L_sortFunc)(L_item)(L_t))}})()))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_item)(L_nil))}})())}}})}})())},
  function(){return L_define()(function(){return "token"})(function(){return 2})(function(){return "token txt pos = \\f . f txt pos"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_txt){return function(L_pos){return setType(function(L_f){return L_f()(L_txt)(L_pos)}, 'token')}}, 'token'))}})())},
  function(){return L_define()(function(){return "tokenString"})(function(){return 1})(function(){return "tokenString tok = tok \\t p . t"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return L_tok()((function(){var $m; return function(){return $m || ($m = function(L_t){return function(L_p){return L_t()}})}})())})}})())},
  function(){return L_define()(function(){return "tokenPos"})(function(){return 1})(function(){return "tokenPos tok = tok \\t p . p"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return L_tok()((function(){var $m; return function(){return $m || ($m = function(L_t){return function(L_p){return L_p()}})}})())})}})())},
  function(){return L_define()(function(){return "isToken"})(function(){return 1})(function(){return "isToken t = hasType t token"})((function(){var $m; return function(){return $m || ($m = function(L_t){return L_hasType()(L_t)(L_token)})}})())},
  function(){return L_define()(function(){return "parens"})(function(){return 3})(function(){return "parens start end content = \\f . f start end content"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_start){return function(L_end){return function(L_content){return setType(function(L_f){return L_f()(L_start)(L_end)(L_content)}, 'parens')}}}, 'parens'))}})())},
  function(){return L_define()(function(){return "parensStart"})(function(){return 1})(function(){return "parensStart p = p \\s e c . s"})((function(){var $m; return function(){return $m || ($m = function(L_p){return L_p()((function(){var $m; return function(){return $m || ($m = function(L_s){return function(L_e){return function(L_c){return L_s()}}})}})())})}})())},
  function(){return L_define()(function(){return "parensEnd"})(function(){return 1})(function(){return "parensEnd p = p \\s e c . e"})((function(){var $m; return function(){return $m || ($m = function(L_p){return L_p()((function(){var $m; return function(){return $m || ($m = function(L_s){return function(L_e){return function(L_c){return L_e()}}})}})())})}})())},
  function(){return L_define()(function(){return "parensContent"})(function(){return 1})(function(){return "parensContent p = p \\s e c . c"})((function(){var $m; return function(){return $m || ($m = function(L_p){return L_p()((function(){var $m; return function(){return $m || ($m = function(L_s){return function(L_e){return function(L_c){return L_c()}}})}})())})}})())},
  function(){return L_define()(function(){return "isParens"})(function(){return 1})(function(){return "isParens p = hasType p parens"})((function(){var $m; return function(){return $m || ($m = function(L_p){return L_hasType()(L_p)(L_parens)})}})())},
  function(){return L_define()(function(){return "makeParens"})(function(){return 3})(function(){return "makeParens start end content =\n  and (isCons content) (isNil (tail content))\n    makeParens start end (head content)\n    or (isToken content) (isParens content)\n      content\n      parens start end content"})((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_end){return function(L_content){return L_and()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_content))}})())((function(){var $m; return function(){return $m || ($m = L_isNil()((function(){var $m; return function(){return $m || ($m = L_tail()(L_content))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_makeParens()(L_start)(L_end)((function(){var $m; return function(){return $m || ($m = L_head()(L_content))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_content))}})())((function(){var $m; return function(){return $m || ($m = L_isParens()(L_content))}})())(L_content)((function(){var $m; return function(){return $m || ($m = L_parens()(L_start)(L_end)(L_content))}})()))}})())}}})}})())},
  function(){return L_define()(function(){return "parensFromToks"})(function(){return 3})(function(){return "parensFromToks left right content = \\\\\n  start = tokenPos left\n  end = + (tokenPos right) (strLen (tokenString right))\n  .\n  parens start end content"})((function(){var $m; return function(){return $m || ($m = function(L_left){return function(L_right){return function(L_content){return (function(){

var L_end, L_start;

L_end = (function(){var $m; return function(){return $m || ($m = L_$o()((function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_right))}})())((function(){var $m; return function(){return $m || ($m = L_strLen()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_right))}})()))}})()))}})();

L_start = (function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_left))}})();
return L_parens()(L_start)(L_end)(L_content)})()}}})}})())},
  function(){return L_define()(function(){return "stripParens"})(function(){return 1})(function(){return "stripParens p = isParens p (parensContent p) p"})((function(){var $m; return function(){return $m || ($m = function(L_p){return L_isParens()(L_p)((function(){var $m; return function(){return $m || ($m = L_parensContent()(L_p))}})())(L_p)})}})())},
  function(){return L_define()(function(){return "parseErr"})(function(){return 2})(function(){return "parseErr msg1 msg2 = \\f . f (strCat (cons msg1 (cons msg2 nil)))"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_msg1){return function(L_msg2){return setType(function(L_f){return L_f()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(L_msg1)((function(){var $m; return function(){return $m || ($m = L_cons()(L_msg2)(L_nil))}})()))}})()))}})())}, 'parseErr')}}, 'parseErr'))}})())},
  function(){return L_define()(function(){return "parseErrMsg"})(function(){return 1})(function(){return "parseErrMsg err = err \\m . m"})((function(){var $m; return function(){return $m || ($m = function(L_err){return L_err()((function(){var $m; return function(){return $m || ($m = function(L_m){return L_m()})}})())})}})())},
  function(){return L_define()(function(){return "isParseErr"})(function(){return 1})(function(){return "isParseErr thing = hasType thing parseErr"})((function(){var $m; return function(){return $m || ($m = function(L_thing){return L_hasType()(L_thing)(L_parseErr)})}})())},
  function(){return L_define()(function(){return "emptyToken"})(function(){return 0})(function(){return "emptyToken = regexp '^\\\\n[ \\\\i]*(#|$)'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "^\\n[ \\i]*(#|$)"}))}})())},
  function(){return L_define()(function(){return "makeTokens"})(function(){return 2})(function(){return "makeTokens strings start = strings (\\h t D . makeMoreTokens h t start) nil"})((function(){var $m; return function(){return $m || ($m = function(L_strings){return function(L_start){return L_strings()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_makeMoreTokens()(L_h)(L_t)(L_start)}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "makeMoreTokens"})(function(){return 3})(function(){return "makeMoreTokens h t start = \\\\\n  next = makeTokens t (+ start (strLen h))\n  .\n  and (strMatches h emptyToken) (or (isNil t) (strStartsWith (head t) '\\n'))\n    makeTokens t (+ start (strLen h))\n    or (strStartsWith h ' ') (strStartsWith h '#')\n      next\n      and (strStartsWith h '\\n') (strStartsWith (head t) '#')\n        makeTokens (tail t) (+ start (+ (strLen h) (strLen (head t))))\n        cons (token h start) next"})((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_start){return (function(){

var L_next;

L_next = (function(){var $m; return function(){return $m || ($m = L_makeTokens()(L_t)((function(){var $m; return function(){return $m || ($m = L_$o()(L_start)((function(){var $m; return function(){return $m || ($m = L_strLen()(L_h))}})()))}})()))}})();
return L_and()((function(){var $m; return function(){return $m || ($m = L_strMatches()(L_h)(L_emptyToken))}})())((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_isNil()(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()((function(){var $m; return function(){return $m || ($m = L_head()(L_t))}})())(function(){return "\n"}))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_makeTokens()(L_t)((function(){var $m; return function(){return $m || ($m = L_$o()(L_start)((function(){var $m; return function(){return $m || ($m = L_strLen()(L_h))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_h)(function(){return " "}))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_h)(function(){return "#"}))}})())(L_next)((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_h)(function(){return "\n"}))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()((function(){var $m; return function(){return $m || ($m = L_head()(L_t))}})())(function(){return "#"}))}})())((function(){var $m; return function(){return $m || ($m = L_makeTokens()((function(){var $m; return function(){return $m || ($m = L_tail()(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_$o()(L_start)((function(){var $m; return function(){return $m || ($m = L_$o()((function(){var $m; return function(){return $m || ($m = L_strLen()(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_strLen()((function(){var $m; return function(){return $m || ($m = L_head()(L_t))}})()))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_token()(L_h)(L_start))}})())(L_next))}})()))}})()))}})())})()}}})}})())},
  function(){return L_define()(function(){return "splitTokens"})(function(){return 2})(function(){return "splitTokens str pat = filter (\\s . not (eq s '')) (basicSplitTokens str pat true)"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return L_filter()((function(){var $m; return function(){return $m || ($m = function(L_s){return L_not()((function(){var $m; return function(){return $m || ($m = L_eq()(L_s)(function(){return ""}))}})())})}})())((function(){var $m; return function(){return $m || ($m = L_basicSplitTokens()(L_str)(L_pat)(L_true))}})())}})}})())},
  function(){return L_define()(function(){return "numberPat"})(function(){return 0})(function(){return "numberPat = regexp '-?([0-9]+(\\\\.[0-9]+)?|\\\\.[0-9]+)'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "-?([0-9]+(\\.[0-9]+)?|\\.[0-9]+)"}))}})())},
  function(){return L_define()(function(){return "matchOffset"})(function(){return 2})(function(){return "matchOffset str match = isNil match\n  strLen str\n  head (tail (tail match))"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_match){return L_isNil()(L_match)((function(){var $m; return function(){return $m || ($m = L_strLen()(L_str))}})())((function(){var $m; return function(){return $m || ($m = L_head()((function(){var $m; return function(){return $m || ($m = L_tail()((function(){var $m; return function(){return $m || ($m = L_tail()(L_match))}})()))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "basicSplitTokens"})(function(){return 3})(function(){return "basicSplitTokens str pat prevIsDel = == str ''\n  nil\n  \\\\\n    num = strMatch str numberPat\n    del = strMatch str pat\n    numOffset = matchOffset str num\n    delOffset = matchOffset str del\n    select = and (== numOffset 0) prevIsDel\n      \\del num first . num\n      == delOffset 0\n        \\del num first . del\n        \\del num first . first\n    first = select (head del) (head num) (strSubstring str 0 delOffset)\n    .\n    cons\n      first\n      basicSplitTokens\n        strSubstring str (strLen first) 0\n        pat\n        select true false false"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return function(L_prevIsDel){return L_$p$p()(L_str)(function(){return ""})(L_nil)(function(){
var L_first, L_select, L_delOffset, L_numOffset, L_del, L_num;

L_first = (function(){var $m; return function(){return $m || ($m = L_select()((function(){var $m; return function(){return $m || ($m = L_head()(L_del))}})())((function(){var $m; return function(){return $m || ($m = L_head()(L_num))}})())((function(){var $m; return function(){return $m || ($m = L_strSubstring()(L_str)(function(){return 0})(L_delOffset))}})()))}})();

L_select = (function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_$p$p()(L_numOffset)(function(){return 0}))}})())(L_prevIsDel)((function(){var $m; return function(){return $m || ($m = function(L_del_0){return function(L_num_1){return function(L_first){return L_num_1()}}})}})())((function(){var $m; return function(){return $m || ($m = L_$p$p()(L_delOffset)(function(){return 0})((function(){var $m; return function(){return $m || ($m = function(L_del_0){return function(L_num_1){return function(L_first){return L_del_0()}}})}})())((function(){var $m; return function(){return $m || ($m = function(L_del_0){return function(L_num_1){return function(L_first){return L_first()}}})}})()))}})()))}})();

L_delOffset = (function(){var $m; return function(){return $m || ($m = L_matchOffset()(L_str)(L_del))}})();

L_numOffset = (function(){var $m; return function(){return $m || ($m = L_matchOffset()(L_str)(L_num))}})();

L_del = (function(){var $m; return function(){return $m || ($m = L_strMatch()(L_str)(L_pat))}})();

L_num = (function(){var $m; return function(){return $m || ($m = L_strMatch()(L_str)(L_numberPat))}})();
return L_cons()(L_first)((function(){var $m; return function(){return $m || ($m = L_basicSplitTokens()((function(){var $m; return function(){return $m || ($m = L_strSubstring()(L_str)((function(){var $m; return function(){return $m || ($m = L_strLen()(L_first))}})())(function(){return 0}))}})())(L_pat)((function(){var $m; return function(){return $m || ($m = L_select()(L_true)(L_false)(L_false))}})()))}})())})}}})}})())},
  function(){return L_define()(function(){return "tokens"})(function(){return 2})(function(){return "tokens str pat = makeTokens (splitTokens str pat) 0"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return L_makeTokens()((function(){var $m; return function(){return $m || ($m = L_splitTokens()(L_str)(L_pat))}})())(function(){return 0})}})}})())},
  function(){return L_define()(function(){return "isString"})(function(){return 1})(function(){return "isString s = == (getType s) '*string'"})((function(){var $m; return function(){return $m || ($m = function(L_s){return L_$p$p()((function(){var $m; return function(){return $m || ($m = L_getType()(L_s))}})())(function(){return "*string"})})}})())},
  function(){return L_define()(function(){return "isNumber"})(function(){return 1})(function(){return "isNumber s = == (getType s) '*number'"})((function(){var $m; return function(){return $m || ($m = function(L_s){return L_$p$p()((function(){var $m; return function(){return $m || ($m = L_getType()(L_s))}})())(function(){return "*number"})})}})())},
  function(){return L_define()(function(){return "isTokenString"})(function(){return 2})(function(){return "isTokenString tok str = or\n  and (isToken tok) (eq (tokenString tok) str)\n  and (isString tok) (eq tok str)"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return function(L_str){return L_or()((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_tok))}})())((function(){var $m; return function(){return $m || ($m = L_eq()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_tok))}})())(L_str))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isString()(L_tok))}})())((function(){var $m; return function(){return $m || ($m = L_eq()(L_tok)(L_str))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "isTokenStart"})(function(){return 2})(function(){return "isTokenStart tok str = or\n  and (isToken tok) (strStartsWith (tokenString tok) str)\n  and (isString tok) (strStartsWith tok str)"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return function(L_str){return L_or()((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_tok))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_tok))}})())(L_str))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isString()(L_tok))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_tok)(L_str))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "strTokenString"})(function(){return 1})(function(){return "strTokenString tok = withToken tok nil \\str pos . str"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return L_withToken()(L_tok)(L_nil)((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pos){return L_str()}})}})())})}})())},
  function(){return L_define()(function(){return "withToken"})(function(){return 3})(function(){return "withToken tok nonTokCase tokCase = isToken tok\n  tok tokCase\n  isString tok\n    tokCase tok -1\n    nonTokCase"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return function(L_nonTokCase){return function(L_tokCase){return L_isToken()(L_tok)((function(){var $m; return function(){return $m || ($m = L_tok()(L_tokCase))}})())((function(){var $m; return function(){return $m || ($m = L_isString()(L_tok)((function(){var $m; return function(){return $m || ($m = L_tokCase()(L_tok)(function(){return -1}))}})())(L_nonTokCase))}})())}}})}})())},
  function(){return L_define()(function(){return "withCons"})(function(){return 3})(function(){return "withCons l nilCase cont = isCons l (l (\\h t D . cont h t) nilCase) nilCase"})((function(){var $m; return function(){return $m || ($m = function(L_l){return function(L_nilCase){return function(L_cont){return L_isCons()(L_l)((function(){var $m; return function(){return $m || ($m = L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_cont()(L_h)(L_t)}}})}})())(L_nilCase))}})())(L_nilCase)}}})}})())},
  function(){return L_define()(function(){return "ifNotErr"})(function(){return 2})(function(){return "ifNotErr thing cont = hasType thing parseErr thing (cont thing)"})((function(){var $m; return function(){return $m || ($m = function(L_thing){return function(L_cont){return L_hasType()(L_thing)(L_parseErr)(L_thing)((function(){var $m; return function(){return $m || ($m = L_cont()(L_thing))}})())}})}})())},
  function(){return L_define()(function(){return "parseToks"})(function(){return 2})(function(){return "parseToks toks groups =\n  isNil toks nil\n    ifNotErr (parseTok toks groups) \\list . list \\h t .\n      ifNotErr (parseToks t groups) \\res .\n        cons h\n          and (isCons res) (isBlockStart (head res))\n            cons res nil\n            res"})((function(){var $m; return function(){return $m || ($m = function(L_toks){return function(L_groups){return L_isNil()(L_toks)(L_nil)((function(){var $m; return function(){return $m || ($m = L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseTok()(L_toks)(L_groups))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseToks()(L_t)(L_groups))}})())((function(){var $m; return function(){return $m || ($m = function(L_res){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_res))}})())((function(){var $m; return function(){return $m || ($m = L_isBlockStart()((function(){var $m; return function(){return $m || ($m = L_head()(L_res))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_res)(L_nil))}})())(L_res))}})())})}})())}})}})())})}})()))}})())}})}})())},
  function(){return L_define()(function(){return "parseTok"})(function(){return 2})(function(){return "parseTok toks groups = withCons toks nil \\h t .\n  withToken h toks \\txt pos .\n    assoc txt groups\n      \\close . parseGroup h t nil close groups\n      isTokenStart h '\\n' (parseIndent h t nil groups)\n        toks"})((function(){var $m; return function(){return $m || ($m = function(L_toks){return function(L_groups){return L_withCons()(L_toks)(L_nil)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_withToken()(L_h)(L_toks)((function(){var $m; return function(){return $m || ($m = function(L_txt){return function(L_pos){return L_assoc()(L_txt)(L_groups)((function(){var $m; return function(){return $m || ($m = function(L_close){return L_parseGroup()(L_h)(L_t)(L_nil)(L_close)(L_groups)})}})())((function(){var $m; return function(){return $m || ($m = L_isTokenStart()(L_h)(function(){return "\n"})((function(){var $m; return function(){return $m || ($m = L_parseIndent()(L_h)(L_t)(L_nil)(L_groups))}})())(L_toks))}})())}})}})())}})}})())}})}})())},
  function(){return L_define()(function(){return "parseGroup"})(function(){return 5})(function(){return "parseGroup left toks gr close groups = withCons toks (parseErr 'Unterminated group starting ' (loc left))\n  \\h t . isTokenString h close\n    eq close ')'\n      cons (parensFromToks left h (reverse gr)) t\n      cons (cons left (cons (reverse gr) (cons h nil))) t\n    withToken h\n      ifNotErr (parseTok toks groups) \\list . list \\restH restT .\n        parseGroup left restT (cons restH gr) close groups\n      \\txt pos .\n        rassoc txt groups\n          \\open . parseErr (strCat (cons 'Mismatched group: ' (cons (tokenString left) (cons txt (cons ' ' nil))))) (loc left)\n          ifNotErr (parseTok toks groups) \\list . list \\restH restT . parseGroup left restT (cons restH gr) close groups"})((function(){var $m; return function(){return $m || ($m = function(L_left){return function(L_toks){return function(L_gr){return function(L_close){return function(L_groups){return L_withCons()(L_toks)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Unterminated group starting "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_left))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isTokenString()(L_h)(L_close)((function(){var $m; return function(){return $m || ($m = L_eq()(L_close)(function(){return ")"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_parensFromToks()(L_left)(L_h)((function(){var $m; return function(){return $m || ($m = L_reverse()(L_gr))}})()))}})())(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(L_left)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_reverse()(L_gr))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)(L_nil))}})()))}})()))}})())(L_t))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_withToken()(L_h)((function(){var $m; return function(){return $m || ($m = L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseTok()(L_toks)(L_groups))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_restH){return function(L_restT){return L_parseGroup()(L_left)(L_restT)((function(){var $m; return function(){return $m || ($m = L_cons()(L_restH)(L_gr))}})())(L_close)(L_groups)}})}})())})}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_txt){return function(L_pos){return L_rassoc()(L_txt)(L_groups)((function(){var $m; return function(){return $m || ($m = function(L_open){return L_parseErr()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "Mismatched group: "})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_left))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_txt)((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return " "})(L_nil))}})()))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_loc()(L_left))}})())})}})())((function(){var $m; return function(){return $m || ($m = L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseTok()(L_toks)(L_groups))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_restH){return function(L_restT){return L_parseGroup()(L_left)(L_restT)((function(){var $m; return function(){return $m || ($m = L_cons()(L_restH)(L_gr))}})())(L_close)(L_groups)}})}})())})}})()))}})())}})}})()))}})())}})}})())}}}}})}})())},
  function(){return L_define()(function(){return "parseIndent"})(function(){return 4})(function(){return "parseIndent indent toks gr groups =\n  withCons toks (cons (makeParens (tokenPos indent) (lexEnd (head gr)) (reverse gr)) nil)\n    \\h t . or (withToken h false (\\txt pos . rassoc txt groups (\\open . true) false))\n      and (isTokenStart h '\\n') (<= (strLen (tokenString h)) (strLen (tokenString indent)))\n      cons (makeParens (tokenPos indent) (tokenPos h) (reverse gr)) toks\n      ifNotErr (parseTok toks groups) \\list . list \\restH restT . parseIndent indent restT (cons restH gr) groups"})((function(){var $m; return function(){return $m || ($m = function(L_indent){return function(L_toks){return function(L_gr){return function(L_groups){return L_withCons()(L_toks)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_makeParens()((function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_indent))}})())((function(){var $m; return function(){return $m || ($m = L_lexEnd()((function(){var $m; return function(){return $m || ($m = L_head()(L_gr))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_reverse()(L_gr))}})()))}})())(L_nil))}})())((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_or()((function(){var $m; return function(){return $m || ($m = L_withToken()(L_h)(L_false)((function(){var $m; return function(){return $m || ($m = function(L_txt){return function(L_pos){return L_rassoc()(L_txt)(L_groups)((function(){var $m; return function(){return $m || ($m = function(L_open){return L_true()})}})())(L_false)}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isTokenStart()(L_h)(function(){return "\n"}))}})())((function(){var $m; return function(){return $m || ($m = L_$y$p()((function(){var $m; return function(){return $m || ($m = L_strLen()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_h))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_strLen()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_indent))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_makeParens()((function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_indent))}})())((function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_reverse()(L_gr))}})()))}})())(L_toks))}})())((function(){var $m; return function(){return $m || ($m = L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseTok()(L_toks)(L_groups))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_restH){return function(L_restT){return L_parseIndent()(L_indent)(L_restT)((function(){var $m; return function(){return $m || ($m = L_cons()(L_restH)(L_gr))}})())(L_groups)}})}})())})}})()))}})())}})}})())}}}})}})())},
  function(){return L_define()(function(){return "lit"})(function(){return 1})(function(){return "lit value = \\f . f value"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_value){return setType(function(L_f){return L_f()(L_value)}, 'lit')}, 'lit'))}})())},
  function(){return L_define()(function(){return "ref"})(function(){return 1})(function(){return "ref name = \\f . f name"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_name){return setType(function(L_f){return L_f()(L_name)}, 'ref')}, 'ref'))}})())},
  function(){return L_define()(function(){return "lambda"})(function(){return 2})(function(){return "lambda name body = \\f . f name body"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_name){return function(L_body){return setType(function(L_f){return L_f()(L_name)(L_body)}, 'lambda')}}, 'lambda'))}})())},
  function(){return L_define()(function(){return "apply"})(function(){return 2})(function(){return "apply func arg = \\f . f func arg"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_func){return function(L_arg){return setType(function(L_f){return L_f()(L_func)(L_arg)}, 'apply')}}, 'apply'))}})())},
  function(){return L_define()(function(){return "let"})(function(){return 3})(function(){return "let name value body = \\f . f name value body"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_name){return function(L_value){return function(L_body){return setType(function(L_f){return L_f()(L_name)(L_value)(L_body)}, 'let')}}}, 'let'))}})())},
  function(){return L_define()(function(){return "anno"})(function(){return 3})(function(){return "anno name data body = \\f . f name data body"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_name){return function(L_data){return function(L_body){return setType(function(L_f){return L_f()(L_name)(L_data)(L_body)}, 'anno')}}}, 'anno'))}})())},
  function(){return L_define()(function(){return "withParens"})(function(){return 3})(function(){return "withParens p err cont = isParens p (p cont) err"})((function(){var $m; return function(){return $m || ($m = function(L_p){return function(L_err){return function(L_cont){return L_isParens()(L_p)((function(){var $m; return function(){return $m || ($m = L_p()(L_cont))}})())(L_err)}}})}})())},
  function(){return L_define()(function(){return "setParens"})(function(){return 2})(function(){return "setParens p func = isParens p\n  p \\start end content . parens start end (func content)\n  func p"})((function(){var $m; return function(){return $m || ($m = function(L_p){return function(L_func){return L_isParens()(L_p)((function(){var $m; return function(){return $m || ($m = L_p()((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_end){return function(L_content){return L_parens()(L_start)(L_end)((function(){var $m; return function(){return $m || ($m = L_func()(L_content))}})())}}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_func()(L_p))}})())}})}})())},
  function(){return L_define()(function(){return "withStripped"})(function(){return 2})(function(){return "withStripped list cont = withParens list (cont list) \\start end content . withStripped content cont"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_cont){return L_withParens()(L_list)((function(){var $m; return function(){return $m || ($m = L_cont()(L_list))}})())((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_end){return function(L_content){return L_withStripped()(L_content)(L_cont)}}})}})())}})}})())},
  function(){return L_define()(function(){return "position"})(function(){return 1})(function(){return "position thing = isToken thing (tokenPos thing)\n  isParens thing (parensStart thing)\n    isCons thing (position (head thing))\n      -1"})((function(){var $m; return function(){return $m || ($m = function(L_thing){return L_isToken()(L_thing)((function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_thing))}})())((function(){var $m; return function(){return $m || ($m = L_isParens()(L_thing)((function(){var $m; return function(){return $m || ($m = L_parensStart()(L_thing))}})())((function(){var $m; return function(){return $m || ($m = L_isCons()(L_thing)((function(){var $m; return function(){return $m || ($m = L_position()((function(){var $m; return function(){return $m || ($m = L_head()(L_thing))}})()))}})())(function(){return -1}))}})()))}})())})}})())},
  function(){return L_define()(function(){return "lexEnd"})(function(){return 1})(function(){return "lexEnd thing = isToken thing (+ (tokenPos thing) (strLen (tokenString thing)))\n  isParens thing (parensEnd thing)\n    isCons thing (lexEnd (last thing))\n      -1"})((function(){var $m; return function(){return $m || ($m = function(L_thing){return L_isToken()(L_thing)((function(){var $m; return function(){return $m || ($m = L_$o()((function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_thing))}})())((function(){var $m; return function(){return $m || ($m = L_strLen()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_thing))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_isParens()(L_thing)((function(){var $m; return function(){return $m || ($m = L_parensEnd()(L_thing))}})())((function(){var $m; return function(){return $m || ($m = L_isCons()(L_thing)((function(){var $m; return function(){return $m || ($m = L_lexEnd()((function(){var $m; return function(){return $m || ($m = L_last()(L_thing))}})()))}})())(function(){return -1}))}})()))}})())})}})())},
  function(){return L_define()(function(){return "loc"})(function(){return 1})(function(){return "loc thing = \\\\\n  p = position thing\n  l = eq p -1 'an unknown location' p\n  .\n  strCat (cons 'at ' (cons l nil))"})((function(){var $m; return function(){return $m || ($m = function(L_thing){return (function(){

var L_l, L_p;

L_l = (function(){var $m; return function(){return $m || ($m = L_eq()(L_p)(function(){return -1})(function(){return "an unknown location"})(L_p))}})();

L_p = (function(){var $m; return function(){return $m || ($m = L_position()(L_thing))}})();
return L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "at "})((function(){var $m; return function(){return $m || ($m = L_cons()(L_l)(L_nil))}})()))}})())})()})}})())},
  function(){return L_define()(function(){return "scrub"})(function(){return 1})(function(){return "scrub str = strFromList (scrubList (strToList str))"})((function(){var $m; return function(){return $m || ($m = function(L_str){return L_strFromList()((function(){var $m; return function(){return $m || ($m = L_scrubList()((function(){var $m; return function(){return $m || ($m = L_strToList()(L_str))}})()))}})())})}})())},
  function(){return L_define()(function(){return "scrubList"})(function(){return 1})(function(){return "scrubList list = list\n  \\h t D . \\\\\n    next = scrubList t\n    .\n    eq h '\\\\' (cons h (cons (head t) (scrubList (tail t))))\n      eq h '\\\"' (cons '\\\\' (cons '\\\"' next))\n        cons h next\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return (function(){

var L_next;

L_next = (function(){var $m; return function(){return $m || ($m = L_scrubList()(L_t))}})();
return L_eq()(L_h)(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_head()(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_scrubList()((function(){var $m; return function(){return $m || ($m = L_tail()(L_t))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_eq()(L_h)(function(){return "\""})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\""})(L_next))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)(L_next))}})()))}})())})()}}})}})())(L_nil)})}})())},
  function(){return L_define()(function(){return "createAst"})(function(){return 3})(function(){return "createAst inList names cont = withStripped inList \\list .\n  isToken list (createLitOrRef (tokenString list) names cont)\n    list\n      \\h t D .\n        isTokenString h '\\\\\\\\' (createLet h t names cont)\n          isTokenString h '\\\\@' (createAnno h t names cont)\n            isTokenString h '\\\\' (createLambda h t names cont)\n              createApply list names cont\n      cont nil"})((function(){var $m; return function(){return $m || ($m = function(L_inList){return function(L_names){return function(L_cont){return L_withStripped()(L_inList)((function(){var $m; return function(){return $m || ($m = function(L_list){return L_isToken()(L_list)((function(){var $m; return function(){return $m || ($m = L_createLitOrRef()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_list))}})())(L_names)(L_cont))}})())((function(){var $m; return function(){return $m || ($m = L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isTokenString()(L_h)(function(){return "\\\\"})((function(){var $m; return function(){return $m || ($m = L_createLet()(L_h)(L_t)(L_names)(L_cont))}})())((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_h)(function(){return "\\@"})((function(){var $m; return function(){return $m || ($m = L_createAnno()(L_h)(L_t)(L_names)(L_cont))}})())((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_h)(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_createLambda()(L_h)(L_t)(L_names)(L_cont))}})())((function(){var $m; return function(){return $m || ($m = L_createApply()(L_list)(L_names)(L_cont))}})()))}})()))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_cont()(L_nil))}})()))}})())})}})())}}})}})())},
  function(){return L_define()(function(){return "strMatches"})(function(){return 2})(function(){return "strMatches str pat = isCons (strMatch str pat)"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return L_isCons()((function(){var $m; return function(){return $m || ($m = L_strMatch()(L_str)(L_pat))}})())}})}})())},
  function(){return L_define()(function(){return "digit"})(function(){return 0})(function(){return "digit = regexp '^[0-9]+$'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "^[0-9]+$"}))}})())},
  function(){return L_define()(function(){return "backslashCodes"})(function(){return 0})(function(){return "backslashCodes = 'bfnrt'"})(function(){return "bfnrt"})},
  function(){return L_define()(function(){return "backslashValues"})(function(){return 0})(function(){return "backslashValues = '\\b\\f\\n\\r\\t'"})(function(){return "\b\f\n\r\t"})},
  function(){return L_define()(function(){return "convertStringEscape"})(function(){return 3})(function(){return "convertStringEscape char codes values =\n  eq codes ''\n    char\n    eq char (strAt codes 0)\n      strAt values 0\n      convertStringEscape char (strSubstring codes 1 0) (strSubstring values 1 0)"})((function(){var $m; return function(){return $m || ($m = function(L_char){return function(L_codes){return function(L_values){return L_eq()(L_codes)(function(){return ""})(L_char)((function(){var $m; return function(){return $m || ($m = L_eq()(L_char)((function(){var $m; return function(){return $m || ($m = L_strAt()(L_codes)(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = L_strAt()(L_values)(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = L_convertStringEscape()(L_char)((function(){var $m; return function(){return $m || ($m = L_strSubstring()(L_codes)(function(){return 1})(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = L_strSubstring()(L_values)(function(){return 1})(function(){return 0}))}})()))}})()))}})())}}})}})())},
  function(){return L_define()(function(){return "convertStringEscapes"})(function(){return 3})(function(){return "convertStringEscapes orig str cont =\n  eq str ''\n    cont str\n    eq (strAt str 0) '\\\\'\n      eq (strLen str) 1 (parseErr \"Error, backslash without character in string: \" orig)\n        convertStringEscapes orig (strSubstring str 2 0) \\rest . cont\n          strAdd\n            convertStringEscape (strAt str 1) backslashCodes backslashValues\n            rest\n      convertStringEscapes orig (strSubstring str 1 0) \\rest . cont\n        strAdd\n          strAt str 0\n          rest"})((function(){var $m; return function(){return $m || ($m = function(L_orig){return function(L_str){return function(L_cont){return L_eq()(L_str)(function(){return ""})((function(){var $m; return function(){return $m || ($m = L_cont()(L_str))}})())((function(){var $m; return function(){return $m || ($m = L_eq()((function(){var $m; return function(){return $m || ($m = L_strAt()(L_str)(function(){return 0}))}})())(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_eq()((function(){var $m; return function(){return $m || ($m = L_strLen()(L_str))}})())(function(){return 1})((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Error, backslash without character in string: "})(L_orig))}})())((function(){var $m; return function(){return $m || ($m = L_convertStringEscapes()(L_orig)((function(){var $m; return function(){return $m || ($m = L_strSubstring()(L_str)(function(){return 2})(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = function(L_rest){return L_cont()((function(){var $m; return function(){return $m || ($m = L_strAdd()((function(){var $m; return function(){return $m || ($m = L_convertStringEscape()((function(){var $m; return function(){return $m || ($m = L_strAt()(L_str)(function(){return 1}))}})())(L_backslashCodes)(L_backslashValues))}})())(L_rest))}})())})}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_convertStringEscapes()(L_orig)((function(){var $m; return function(){return $m || ($m = L_strSubstring()(L_str)(function(){return 1})(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = function(L_rest){return L_cont()((function(){var $m; return function(){return $m || ($m = L_strAdd()((function(){var $m; return function(){return $m || ($m = L_strAt()(L_str)(function(){return 0}))}})())(L_rest))}})())})}})()))}})()))}})())}}})}})())},
  function(){return L_define()(function(){return "parseString"})(function(){return 2})(function(){return "parseString str cont =\n  neq (strAt str 0) (strAt str -1) (parseErr \"Badly terminated string: \" str)\n    convertStringEscapes str (strSubstring str 1 -1) cont"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_cont){return L_neq()((function(){var $m; return function(){return $m || ($m = L_strAt()(L_str)(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = L_strAt()(L_str)(function(){return -1}))}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Badly terminated string: "})(L_str))}})())((function(){var $m; return function(){return $m || ($m = L_convertStringEscapes()(L_str)((function(){var $m; return function(){return $m || ($m = L_strSubstring()(L_str)(function(){return 1})(function(){return -1}))}})())(L_cont))}})())}})}})())},
  function(){return L_define()(function(){return "createLitOrRef"})(function(){return 3})(function(){return "createLitOrRef tok names cont =\n  contains names tok\n    cont (ref tok)\n    or (strStartsWith tok '\\\"') (strStartsWith tok \"'\")\n      parseString tok \\str . cont (lit str)\n      strStartsWith tok '.'\n        jsonParse (strCat (cons '0' (cons tok nil))) (\\err . cont (ref tok)) (\\item . cont (lit item))\n        or (and (>= (strAt tok 0) '0') (<= (strAt tok 0) '9')) (strStartsWith tok '-')\n          jsonParse tok (\\err . cont (ref tok)) (\\item . cont (lit item))\n          cont (ref tok)"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return function(L_names){return function(L_cont){return L_contains()(L_names)(L_tok)((function(){var $m; return function(){return $m || ($m = L_cont()((function(){var $m; return function(){return $m || ($m = L_ref()(L_tok))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_tok)(function(){return "\""}))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_tok)(function(){return "'"}))}})())((function(){var $m; return function(){return $m || ($m = L_parseString()(L_tok)((function(){var $m; return function(){return $m || ($m = function(L_str){return L_cont()((function(){var $m; return function(){return $m || ($m = L_lit()(L_str))}})())})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_tok)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_jsonParse()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "0"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_tok)(L_nil))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_err){return L_cont()((function(){var $m; return function(){return $m || ($m = L_ref()(L_tok))}})())})}})())((function(){var $m; return function(){return $m || ($m = function(L_item){return L_cont()((function(){var $m; return function(){return $m || ($m = L_lit()(L_item))}})())})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_$z$p()((function(){var $m; return function(){return $m || ($m = L_strAt()(L_tok)(function(){return 0}))}})())(function(){return "0"}))}})())((function(){var $m; return function(){return $m || ($m = L_$y$p()((function(){var $m; return function(){return $m || ($m = L_strAt()(L_tok)(function(){return 0}))}})())(function(){return "9"}))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_strStartsWith()(L_tok)(function(){return "-"}))}})())((function(){var $m; return function(){return $m || ($m = L_jsonParse()(L_tok)((function(){var $m; return function(){return $m || ($m = function(L_err){return L_cont()((function(){var $m; return function(){return $m || ($m = L_ref()(L_tok))}})())})}})())((function(){var $m; return function(){return $m || ($m = function(L_item){return L_cont()((function(){var $m; return function(){return $m || ($m = L_lit()(L_item))}})())})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cont()((function(){var $m; return function(){return $m || ($m = L_ref()(L_tok))}})()))}})()))}})()))}})()))}})())}}})}})())},
  function(){return L_define()(function(){return "createLambda"})(function(){return 4})(function(){return "createLambda start list names cont = \\\\\n  err = parseErr \"Lambda needs a variable name, a dot, and a body \" (loc start)\n  .\n  withCons list err \\name rest .\n    withToken name err \\n p .\n      withCons rest err \\dot body .\n        # are these partial applications too hard to read?\n        isTokenString dot '.' (createAst body) (createLambda start rest)\n          cons n names\n          \\bodyAst . cont (lambda n bodyAst)"})((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_list){return function(L_names){return function(L_cont){return (function(){

var L_err;

L_err = (function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Lambda needs a variable name, a dot, and a body "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})();
return L_withCons()(L_list)(L_err)((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_rest){return L_withToken()(L_name)(L_err)((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_p){return L_withCons()(L_rest)(L_err)((function(){var $m; return function(){return $m || ($m = function(L_dot){return function(L_body){return L_isTokenString()(L_dot)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_createAst()(L_body))}})())((function(){var $m; return function(){return $m || ($m = L_createLambda()(L_start)(L_rest))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_n)(L_names))}})())((function(){var $m; return function(){return $m || ($m = function(L_bodyAst){return L_cont()((function(){var $m; return function(){return $m || ($m = L_lambda()(L_n)(L_bodyAst))}})())})}})())}})}})())}})}})())}})}})())})()}}}})}})())},
  function(){return L_define()(function(){return "createAnno"})(function(){return 4})(function(){return "createAnno start list names cont =\n  withCons list (parseErr \"No annotation name or data in annotation \" (loc start)) \\name rest .\n    withCons rest (parseErr \"No data for annotation \" (loc start)) \\data rest . \\\\\n      finish data body = createAst body names \\bodyAst .\n        cleanTokens start name \\name .\n          cleanTokens start data \\data .\n            cont (anno name data bodyAst)\n      .\n      isTokenString data '.'\n        finish nil rest\n        withStripped data \\data .\n          withCons rest (parseErr \"No body for annotation \" (loc start)) \\dot body .\n            isTokenString dot '.'\n              finish data body\n              parseErr \"Annotation expects dot after name and data \" (loc start)"})((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_list){return function(L_names){return function(L_cont){return L_withCons()(L_list)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "No annotation name or data in annotation "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_rest){return L_withCons()(L_rest)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "No data for annotation "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_data){return function(L_rest_0){return (function(){

var L_finish;

L_finish = (function(){var $m; return function(){return $m || ($m = function(L_data_1){return function(L_body){return L_createAst()(L_body)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_bodyAst){return L_cleanTokens()(L_start)(L_name)((function(){var $m; return function(){return $m || ($m = function(L_name_2){return L_cleanTokens()(L_start)(L_data_1)((function(){var $m; return function(){return $m || ($m = function(L_data_3){return L_cont()((function(){var $m; return function(){return $m || ($m = L_anno()(L_name_2)(L_data_3)(L_bodyAst))}})())})}})())})}})())})}})())}})}})();
return L_isTokenString()(L_data)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_finish()(L_nil)(L_rest_0))}})())((function(){var $m; return function(){return $m || ($m = L_withStripped()(L_data)((function(){var $m; return function(){return $m || ($m = function(L_data_1){return L_withCons()(L_rest_0)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "No body for annotation "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_dot){return function(L_body){return L_isTokenString()(L_dot)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_finish()(L_data_1)(L_body))}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Annotation expects dot after name and data "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})())}})}})())})}})()))}})())})()}})}})())}})}})())}}}})}})())},
  function(){return L_define()(function(){return "bodyStructPat"})(function(){return 0})(function(){return "bodyStructPat = regexp '\\\\|\\\\\\\\|\\\\@'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "\\|\\\\|\\@"}))}})())},
  function(){return L_define()(function(){return "createApply"})(function(){return 3})(function(){return "createApply inList names cont = withStripped inList \\list .\n  withCons list (parseErr \"Funcion apply expecting a non-empty list \" (loc inList)) \\h t .\n    createAst h names \\func . chainApply func t names cont"})((function(){var $m; return function(){return $m || ($m = function(L_inList){return function(L_names){return function(L_cont){return L_withStripped()(L_inList)((function(){var $m; return function(){return $m || ($m = function(L_list){return L_withCons()(L_list)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Funcion apply expecting a non-empty list "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_inList))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_createAst()(L_h)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_func){return L_chainApply()(L_func)(L_t)(L_names)(L_cont)})}})())}})}})())})}})())}}})}})())},
  function(){return L_define()(function(){return "blockStarts"})(function(){return 0})(function(){return "blockStarts = cons '\\\\' (cons '\\\\\\\\' (cons '\\\\@' nil))"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\@"})(L_nil))}})()))}})()))}})())},
  function(){return L_define()(function(){return "chainApply"})(function(){return 4})(function(){return "chainApply func list names cont = withCons list (cont func) \\argItem rest .\n  and (isToken argItem) (contains blockStarts (tokenString argItem))\n    createAst list names \\arg . cont (apply func arg)\n    createAst argItem names \\arg . chainApply (apply func arg) rest names cont"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_list){return function(L_names){return function(L_cont){return L_withCons()(L_list)((function(){var $m; return function(){return $m || ($m = L_cont()(L_func))}})())((function(){var $m; return function(){return $m || ($m = function(L_argItem){return function(L_rest){return L_and()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_argItem))}})())((function(){var $m; return function(){return $m || ($m = L_contains()(L_blockStarts)((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_argItem))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_createAst()(L_list)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_arg){return L_cont()((function(){var $m; return function(){return $m || ($m = L_apply()(L_func)(L_arg))}})())})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_createAst()(L_argItem)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_arg){return L_chainApply()((function(){var $m; return function(){return $m || ($m = L_apply()(L_func)(L_arg))}})())(L_rest)(L_names)(L_cont)})}})()))}})())}})}})())}}}})}})())},
  function(){return L_define()(function(){return "cleanTokens"})(function(){return 3})(function(){return "cleanTokens start toks cont = isToken toks\n  cont (tokenString toks)\n  withCons toks (cont toks) \\head tail .\n    cleanTokens start head \\head .\n      cleanTokens start tail \\tail .\n        cont (cons head tail)"})((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_toks){return function(L_cont){return L_isToken()(L_toks)((function(){var $m; return function(){return $m || ($m = L_cont()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_toks))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_withCons()(L_toks)((function(){var $m; return function(){return $m || ($m = L_cont()(L_toks))}})())((function(){var $m; return function(){return $m || ($m = function(L_head){return function(L_tail){return L_cleanTokens()(L_start)(L_head)((function(){var $m; return function(){return $m || ($m = function(L_head_0){return L_cleanTokens()(L_start)(L_tail)((function(){var $m; return function(){return $m || ($m = function(L_tail_1){return L_cont()((function(){var $m; return function(){return $m || ($m = L_cons()(L_head_0)(L_tail_1))}})())})}})())})}})())}})}})()))}})())}}})}})())},
  function(){return L_define()(function(){return "createLet"})(function(){return 4})(function(){return "createLet start list names cont = withCons list\n  parseErr \"No variable or body for let \" (loc start)\n  \\binding body . eq body nil (createAst binding name cont)\n    getLetNames start list names \\newNames .\n      createSublets start binding body newNames cont"})((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_list){return function(L_names){return function(L_cont){return L_withCons()(L_list)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "No variable or body for let "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_binding){return function(L_body){return L_eq()(L_body)(L_nil)((function(){var $m; return function(){return $m || ($m = L_createAst()(L_binding)(L_name)(L_cont))}})())((function(){var $m; return function(){return $m || ($m = L_getLetNames()(L_start)(L_list)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_newNames){return L_createSublets()(L_start)(L_binding)(L_body)(L_newNames)(L_cont)})}})()))}})())}})}})())}}}})}})())},
  function(){return L_define()(function(){return "getLetNames"})(function(){return 4})(function(){return "getLetNames start list names cont = \\\\\n  err = parseErr \"Let expected binding \" (loc start)\n  .\n  withCons list (cont names) \\binding body .\n    isTokenString binding '.' (cont names)\n      withParens binding err \\start end def .\n        withCons def err \\name rest .\n          withToken name err \\str pos .\n            getLetNames start body (cons str names) cont"})((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_list){return function(L_names){return function(L_cont){return (function(){

var L_err;

L_err = (function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Let expected binding "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})();
return L_withCons()(L_list)((function(){var $m; return function(){return $m || ($m = L_cont()(L_names))}})())((function(){var $m; return function(){return $m || ($m = function(L_binding){return function(L_body){return L_isTokenString()(L_binding)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_cont()(L_names))}})())((function(){var $m; return function(){return $m || ($m = L_withParens()(L_binding)(L_err)((function(){var $m; return function(){return $m || ($m = function(L_start_0){return function(L_end){return function(L_def){return L_withCons()(L_def)(L_err)((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_rest){return L_withToken()(L_name)(L_err)((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pos){return L_getLetNames()(L_start_0)(L_body)((function(){var $m; return function(){return $m || ($m = L_cons()(L_str)(L_names))}})())(L_cont)}})}})())}})}})())}}})}})()))}})())}})}})())})()}}}})}})())},
  function(){return L_define()(function(){return "createSublets"})(function(){return 5})(function(){return "createSublets start binding body names cont =\n  isTokenString binding '.' (createAst body names cont)\n    withCons body (parseErr \"Let expected a body \" (loc start)) \\bodyH bodyT .\n      getNameAndDef (parensStart binding) (parensContent binding) names \\name def .\n        createSublets start bodyH bodyT names \\bodyAst .\n          cont (let (tokenString name) def bodyAst)"})((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_binding){return function(L_body){return function(L_names){return function(L_cont){return L_isTokenString()(L_binding)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_createAst()(L_body)(L_names)(L_cont))}})())((function(){var $m; return function(){return $m || ($m = L_withCons()(L_body)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Let expected a body "})((function(){var $m; return function(){return $m || ($m = L_loc()(L_start))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_bodyH){return function(L_bodyT){return L_getNameAndDef()((function(){var $m; return function(){return $m || ($m = L_parensStart()(L_binding))}})())((function(){var $m; return function(){return $m || ($m = L_parensContent()(L_binding))}})())(L_names)((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_def){return L_createSublets()(L_start)(L_bodyH)(L_bodyT)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_bodyAst){return L_cont()((function(){var $m; return function(){return $m || ($m = L_let()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_name))}})())(L_def)(L_bodyAst))}})())})}})())}})}})())}})}})()))}})())}}}}})}})())},
  function(){return L_define()(function(){return "getNameAndDef"})(function(){return 4})(function(){return "getNameAndDef pos binding names cont =\n  withCons (tail binding) (parseErr \"Let expected binding at \" pos) \\snd sndT .\n    isTokenString snd '=' (createAst sndT names \\def . cont (head binding) def)\n      getLetLambda pos (tail binding) nil names \\lamb . cont (head binding) lamb"})((function(){var $m; return function(){return $m || ($m = function(L_pos){return function(L_binding){return function(L_names){return function(L_cont){return L_withCons()((function(){var $m; return function(){return $m || ($m = L_tail()(L_binding))}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Let expected binding at "})(L_pos))}})())((function(){var $m; return function(){return $m || ($m = function(L_snd){return function(L_sndT){return L_isTokenString()(L_snd)(function(){return "="})((function(){var $m; return function(){return $m || ($m = L_createAst()(L_sndT)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_def){return L_cont()((function(){var $m; return function(){return $m || ($m = L_head()(L_binding))}})())(L_def)})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_getLetLambda()(L_pos)((function(){var $m; return function(){return $m || ($m = L_tail()(L_binding))}})())(L_nil)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_lamb){return L_cont()((function(){var $m; return function(){return $m || ($m = L_head()(L_binding))}})())(L_lamb)})}})()))}})())}})}})())}}}})}})())},
  function(){return L_define()(function(){return "getLetLambda"})(function(){return 5})(function(){return "getLetLambda pos def args names cont =\n  withCons def (parseErr \"Let expected binding at \" pos) \\arg rest .\n    not (isToken arg) (parseErr \"Let expected binding at \" pos)\n      isTokenString arg '='\n        createAst (cons (token '\\\\' pos) (append (reverse args) (cons (token '.' (position arg)) rest))) names cont\n        getLetLambda pos rest (cons arg args) names cont"})((function(){var $m; return function(){return $m || ($m = function(L_pos){return function(L_def){return function(L_args){return function(L_names){return function(L_cont){return L_withCons()(L_def)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Let expected binding at "})(L_pos))}})())((function(){var $m; return function(){return $m || ($m = function(L_arg){return function(L_rest){return L_not()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_arg))}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Let expected binding at "})(L_pos))}})())((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_arg)(function(){return "="})((function(){var $m; return function(){return $m || ($m = L_createAst()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_token()(function(){return "\\"})(L_pos))}})())((function(){var $m; return function(){return $m || ($m = L_append()((function(){var $m; return function(){return $m || ($m = L_reverse()(L_args))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_token()(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_position()(L_arg))}})()))}})())(L_rest))}})()))}})()))}})())(L_names)(L_cont))}})())((function(){var $m; return function(){return $m || ($m = L_getLetLambda()(L_pos)(L_rest)((function(){var $m; return function(){return $m || ($m = L_cons()(L_arg)(L_args))}})())(L_names)(L_cont))}})()))}})())}})}})())}}}}})}})())},
  function(){return L_define()(function(){return "parenGroups"})(function(){return 0})(function(){return "parenGroups = cons (cons '(' ')') nil"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "("})(function(){return ")"}))}})())(L_nil))}})())},
  function(){return L_define()(function(){return "scanLineG"})(function(){return 5})(function(){return "scanLineG str pat groups onDef onExpr = \\\\\n  toks = tokens str pat\n  groupToks = foldr (\\el value . el \\h t . cons h (cons t value)) (cons '=' blockStarts) groups\n  .\n  # check if it's a definition\n  find (\\tok . or (contains groupToks (tokenString tok)) (isCons (strMatch (tokenString tok) '^\\n'))) toks (\\item . isTokenString item '=') false\n    toks \\name rest . \\\\\n      parseIt func = \\\\\n        parsed = parseToks (checkSetDataType func rest name) groups\n        .\n        onDef (ifNotErr parsed \\list . createDef list name (arity rest 0) str)\n      .\n      isTokenString (head rest) '='\n        isTokenString (head (tail rest)) '\\\\'\n          parseIt (setTypeAnno (tail rest) (tokenString name))\n          parseIt (tail rest)\n        transformDef name rest \\def .\n          parseIt (cons (token '\\\\' (- (position (head rest)) 1)) def)\n    ifNotErr (parseToks toks groups) \\list . onExpr list"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return function(L_groups){return function(L_onDef){return function(L_onExpr){return (function(){

var L_groupToks, L_toks;

L_groupToks = (function(){var $m; return function(){return $m || ($m = L_foldr()((function(){var $m; return function(){return $m || ($m = function(L_el){return function(L_value){return L_el()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_t)(L_value))}})())}})}})())}})}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "="})(L_blockStarts))}})())(L_groups))}})();

L_toks = (function(){var $m; return function(){return $m || ($m = L_tokens()(L_str)(L_pat))}})();
return L_find()((function(){var $m; return function(){return $m || ($m = function(L_tok){return L_or()((function(){var $m; return function(){return $m || ($m = L_contains()(L_groupToks)((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_tok))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_isCons()((function(){var $m; return function(){return $m || ($m = L_strMatch()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_tok))}})())(function(){return "^\n"}))}})()))}})())})}})())(L_toks)((function(){var $m; return function(){return $m || ($m = function(L_item){return L_isTokenString()(L_item)(function(){return "="})})}})())(L_false)((function(){var $m; return function(){return $m || ($m = L_toks()((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_rest){return (function(){

var L_parseIt;

L_parseIt = (function(){var $m; return function(){return $m || ($m = function(L_func){return (function(){

var L_parsed;

L_parsed = (function(){var $m; return function(){return $m || ($m = L_parseToks()((function(){var $m; return function(){return $m || ($m = L_checkSetDataType()(L_func)(L_rest)(L_name))}})())(L_groups))}})();
return L_onDef()((function(){var $m; return function(){return $m || ($m = L_ifNotErr()(L_parsed)((function(){var $m; return function(){return $m || ($m = function(L_list){return L_createDef()(L_list)(L_name)((function(){var $m; return function(){return $m || ($m = L_arity()(L_rest)(function(){return 0}))}})())(L_str)})}})()))}})())})()})}})();
return L_isTokenString()((function(){var $m; return function(){return $m || ($m = L_head()(L_rest))}})())(function(){return "="})((function(){var $m; return function(){return $m || ($m = L_isTokenString()((function(){var $m; return function(){return $m || ($m = L_head()((function(){var $m; return function(){return $m || ($m = L_tail()(L_rest))}})()))}})())(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_parseIt()((function(){var $m; return function(){return $m || ($m = L_setTypeAnno()((function(){var $m; return function(){return $m || ($m = L_tail()(L_rest))}})())((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_name))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_parseIt()((function(){var $m; return function(){return $m || ($m = L_tail()(L_rest))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_transformDef()(L_name)(L_rest)((function(){var $m; return function(){return $m || ($m = function(L_def){return L_parseIt()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_token()(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_$_()((function(){var $m; return function(){return $m || ($m = L_position()((function(){var $m; return function(){return $m || ($m = L_head()(L_rest))}})()))}})())(function(){return 1}))}})()))}})())(L_def))}})())})}})()))}})())})()}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseToks()(L_toks)(L_groups))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_onExpr()(L_list)})}})()))}})())})()}}}}})}})())},
  function(){return L_define()(function(){return "parseLineG"})(function(){return 6})(function(){return "parseLineG str pat names groups onDef onExpr = \\\\\n  astCallback cb = \\list . createAst list names \\ast . cb ast\n  .\n  scanLineG str pat groups (astCallback onDef) (astCallback onExpr)"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return function(L_names){return function(L_groups){return function(L_onDef){return function(L_onExpr){return (function(){

var L_astCallback;

L_astCallback = (function(){var $m; return function(){return $m || ($m = function(L_cb){return function(L_list){return L_createAst()(L_list)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_ast){return L_cb()(L_ast)})}})())}})}})();
return L_scanLineG()(L_str)(L_pat)(L_groups)((function(){var $m; return function(){return $m || ($m = L_astCallback()(L_onDef))}})())((function(){var $m; return function(){return $m || ($m = L_astCallback()(L_onExpr))}})())})()}}}}}})}})())},
  function(){return L_define()(function(){return "transformDef"})(function(){return 3})(function(){return "transformDef name toks cont = withCons toks (parseErr \"Bad definition, expecting tokens\" (loc name)) \\h t .\n  isTokenString h '='\n    isTokenString (head t) '\\\\'\n      cont (cons (token '.' (position h)) (setTypeAnno t (tokenString name)))\n      cont (cons (token '.' (position h)) t)\n    transformDef name t \\list . cont (cons h list)"})((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_toks){return function(L_cont){return L_withCons()(L_toks)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Bad definition, expecting tokens"})((function(){var $m; return function(){return $m || ($m = L_loc()(L_name))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isTokenString()(L_h)(function(){return "="})((function(){var $m; return function(){return $m || ($m = L_isTokenString()((function(){var $m; return function(){return $m || ($m = L_head()(L_t))}})())(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_cont()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_token()(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_position()(L_h))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_setTypeAnno()(L_t)((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_name))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cont()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_token()(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_position()(L_h))}})()))}})())(L_t))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_transformDef()(L_name)(L_t)((function(){var $m; return function(){return $m || ($m = function(L_list){return L_cont()((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)(L_list))}})())})}})()))}})())}})}})())}}})}})())},
  function(){return L_define()(function(){return "setTypeAnno"})(function(){return 2})(function(){return "setTypeAnno toks name = \\\\\n  tok = \\str . token str (position toks)\n  .\n  cons (tok '\\\\@') (cons (tok 'type') (cons (tok name) (cons (tok '.') toks)))"})((function(){var $m; return function(){return $m || ($m = function(L_toks){return function(L_name){return (function(){

var L_tok;

L_tok = (function(){var $m; return function(){return $m || ($m = function(L_str){return L_token()(L_str)((function(){var $m; return function(){return $m || ($m = L_position()(L_toks))}})())})}})();
return L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "\\@"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "type"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(L_name))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "."}))}})())(L_toks))}})()))}})()))}})())})()}})}})())},
  function(){return L_define()(function(){return "setDataTypeAnno"})(function(){return 2})(function(){return "setDataTypeAnno toks name = \\\\\n  tok = \\str . token str (position toks)\n  .\n  cons (tok '\\\\@') (cons (tok 'dataType') (cons (tok (tokenString name)) (cons (tok '.') toks)))"})((function(){var $m; return function(){return $m || ($m = function(L_toks){return function(L_name){return (function(){

var L_tok;

L_tok = (function(){var $m; return function(){return $m || ($m = function(L_str){return L_token()(L_str)((function(){var $m; return function(){return $m || ($m = L_position()(L_toks))}})())})}})();
return L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "\\@"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "dataType"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_name))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "."}))}})())(L_toks))}})()))}})()))}})())})()}})}})())},
  function(){return L_define()(function(){return "createDef"})(function(){return 4})(function(){return "createDef def name arity src = \\\\\n  tok str = token str (position def)\n  .\n  jsonStringify (tokenString name) (\\err . parseErr (strCat (cons \"Bad function name \" (cons (loc name) nil))) err) \\nameStr .\n    jsonStringify src (\\err . parseErr (strCat (cons \"Bad source \" (cons (loc name) nil))) err) \\srcStr .\n      #cons (tok 'define') (cons (tok nameStr) (cons (tok (strString arity)) (cons (tok srcStr) (cons def nil))))\n      cons (tok '\\\\@') (cons (cons (tok 'definition') (cons (tok name) nil)) (cons (tok '.') (cons (tok 'define') (cons (tok nameStr) (cons (tok (strString arity)) (cons (tok srcStr) (cons def nil)))))))"})((function(){var $m; return function(){return $m || ($m = function(L_def){return function(L_name){return function(L_arity){return function(L_src){return (function(){

var L_tok;

L_tok = (function(){var $m; return function(){return $m || ($m = function(L_str){return L_token()(L_str)((function(){var $m; return function(){return $m || ($m = L_position()(L_def))}})())})}})();
return L_jsonStringify()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_name))}})())((function(){var $m; return function(){return $m || ($m = function(L_err){return L_parseErr()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "Bad function name "})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_loc()(L_name))}})())(L_nil))}})()))}})()))}})())(L_err)})}})())((function(){var $m; return function(){return $m || ($m = function(L_nameStr){return L_jsonStringify()(L_src)((function(){var $m; return function(){return $m || ($m = function(L_err){return L_parseErr()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "Bad source "})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_loc()(L_name))}})())(L_nil))}})()))}})()))}})())(L_err)})}})())((function(){var $m; return function(){return $m || ($m = function(L_srcStr){return L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "\\@"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "definition"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(L_name))}})())(L_nil))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "."}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(function(){return "define"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(L_nameStr))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()((function(){var $m; return function(){return $m || ($m = L_strString()(L_arity))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tok()(L_srcStr))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_def)(L_nil))}})()))}})()))}})()))}})()))}})()))}})()))}})())})}})())})}})())})()}}}})}})())},
  function(){return L_define()(function(){return "checkSetDataType"})(function(){return 3})(function(){return "checkSetDataType toks curToks name = withCons curToks toks \\h t .\n  isTokenString h '='\n    isTokenString (head t) '\\\\'\n      setDataTypeAnno toks name\n      toks\n    checkSetDataType toks t name"})((function(){var $m; return function(){return $m || ($m = function(L_toks){return function(L_curToks){return function(L_name){return L_withCons()(L_curToks)(L_toks)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isTokenString()(L_h)(function(){return "="})((function(){var $m; return function(){return $m || ($m = L_isTokenString()((function(){var $m; return function(){return $m || ($m = L_head()(L_t))}})())(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_setDataTypeAnno()(L_toks)(L_name))}})())(L_toks))}})())((function(){var $m; return function(){return $m || ($m = L_checkSetDataType()(L_toks)(L_t)(L_name))}})())}})}})())}}})}})())},
  function(){return L_define()(function(){return "arity"})(function(){return 2})(function(){return "arity toks n = isTokenString (head toks) '=' n (arity (tail toks) (+ n 1))"})((function(){var $m; return function(){return $m || ($m = function(L_toks){return function(L_n){return L_isTokenString()((function(){var $m; return function(){return $m || ($m = L_head()(L_toks))}})())(function(){return "="})(L_n)((function(){var $m; return function(){return $m || ($m = L_arity()((function(){var $m; return function(){return $m || ($m = L_tail()(L_toks))}})())((function(){var $m; return function(){return $m || ($m = L_$o()(L_n)(function(){return 1}))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "tokListStr"})(function(){return 1})(function(){return "tokListStr toks = jsonStringify (join (map (\\t . tokenString t) toks) ' ')"})((function(){var $m; return function(){return $m || ($m = function(L_toks){return L_jsonStringify()((function(){var $m; return function(){return $m || ($m = L_join()((function(){var $m; return function(){return $m || ($m = L_map()((function(){var $m; return function(){return $m || ($m = function(L_t){return L_tokenString()(L_t)})}})())(L_toks))}})())(function(){return " "}))}})())})}})())},
  function(){return L_define()(function(){return "linePat"})(function(){return 0})(function(){return "linePat = regexp '\\\\r?\\\\n(?=[^ ]|$)'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "\\r?\\n(?=[^ ]|$)"}))}})())},
  function(){return L_define()(function(){return "emptyLinePat"})(function(){return 0})(function(){return "emptyLinePat = regexp '(^[ \\\\i]*\\\\#.*|^[ \\\\i]*$|^\\\\r?\\\\n[ \\\\i]*$)'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "(^[ \\i]*\\#.*|^[ \\i]*$|^\\r?\\n[ \\i]*$)"}))}})())},
  function(){return L_define()(function(){return "lineScrub"})(function(){return 0})(function(){return "lineScrub = regexpFlags '\\\\r\\\\n' 'g'"})((function(){var $m; return function(){return $m || ($m = L_regexpFlags()(function(){return "\\r\\n"})(function(){return "g"}))}})())},
  function(){return L_define()(function(){return "linesForFile"})(function(){return 1})(function(){return "linesForFile text = filter\n  \\line . isNil (strMatch line emptyLinePat)\n  strSplit (strReplace text lineScrub '\\n') linePat"})((function(){var $m; return function(){return $m || ($m = function(L_text){return L_filter()((function(){var $m; return function(){return $m || ($m = function(L_line){return L_isNil()((function(){var $m; return function(){return $m || ($m = L_strMatch()(L_line)(L_emptyLinePat))}})())})}})())((function(){var $m; return function(){return $m || ($m = L_strSplit()((function(){var $m; return function(){return $m || ($m = L_strReplace()(L_text)(L_lineScrub)(function(){return "\n"}))}})())(L_linePat))}})())})}})())},
  function(){return L_define()(function(){return "defPat"})(function(){return 0})(function(){return "defPat = regexp '^[^ =]+.* =( |$)'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "^[^ =]+.* =( |$)"}))}})())},
  function(){return L_define()(function(){return "unanchoredDefPat"})(function(){return 0})(function(){return "unanchoredDefPat = regexp '^((?:\\\\s*\\\\n|#[^\\\\n]*\\\\n)*)([^=\\\\n]*)(=\\\\([^=]+=|=)?'"})((function(){var $m; return function(){return $m || ($m = L_regexp()(function(){return "^((?:\\s*\\n|#[^\\n]*\\n)*)([^=\\n]*)(=\\([^=]+=|=)?"}))}})())},
  function(){return L_define()(function(){return "namesForLines"})(function(){return 1})(function(){return "namesForLines lines = foldl\n  \\result line . \\\\\n    m = strMatch line defPat\n    .\n    isNil m result (cons (head (tail m)) result)\n  nil\n  lines"})((function(){var $m; return function(){return $m || ($m = function(L_lines){return L_foldl()((function(){var $m; return function(){return $m || ($m = function(L_result){return function(L_line){return (function(){

var L_m;

L_m = (function(){var $m; return function(){return $m || ($m = L_strMatch()(L_line)(L_defPat))}})();
return L_isNil()(L_m)(L_result)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_head()((function(){var $m; return function(){return $m || ($m = L_tail()(L_m))}})()))}})())(L_result))}})())})()}})}})())(L_nil)(L_lines)})}})())},
  function(){return L_define()(function(){return "runParseFilters"})(function(){return 2})(function(){return "runParseFilters filters line = filters\n  \\h t D . bind (h line) \\filtered . runParseFilters t filtered\n  line"})((function(){var $m; return function(){return $m || ($m = function(L_filters){return function(L_line){return L_filters()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_bind()((function(){var $m; return function(){return $m || ($m = L_h()(L_line))}})())((function(){var $m; return function(){return $m || ($m = function(L_filtered){return L_runParseFilters()(L_t)(L_filtered)})}})())}}})}})())(L_line)}})}})())},
  function(){return L_define()(function(){return "isBlockStart"})(function(){return 1})(function(){return "isBlockStart tok = and\n  isToken tok\n  contains blockStarts (tokenString tok)"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return L_and()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_tok))}})())((function(){var $m; return function(){return $m || ($m = L_contains()(L_blockStarts)((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_tok))}})()))}})())})}})())},
  function(){return L_define()(function(){return "macroSub"})(function(){return 2})(function(){return "macroSub macs expr = postProcessMacro -1 -1 (baseMacroSub macs expr)"})((function(){var $m; return function(){return $m || ($m = function(L_macs){return function(L_expr){return L_postProcessMacro()(function(){return -1})(function(){return -1})((function(){var $m; return function(){return $m || ($m = L_baseMacroSub()(L_macs)(L_expr))}})())}})}})())},
  function(){return L_define()(function(){return "consifyMacroValue"})(function(){return 1})(function(){return "consifyMacroValue value = isCons value value (cons value nil)"})((function(){var $m; return function(){return $m || ($m = function(L_value){return L_isCons()(L_value)(L_value)((function(){var $m; return function(){return $m || ($m = L_cons()(L_value)(L_nil))}})())})}})())},
  function(){return L_define()(function(){return "baseMacroSub"})(function(){return 2})(function(){return "baseMacroSub macs expr = isToken expr\n  expr\n  isParens expr\n    expr \\start end content . \\\\\n      result = baseMacroSub macs content\n      .\n      isToken result result (parens start end result)\n    withCons expr expr \\h t .\n      isBlockStart h\n        cons h\n          isTokenString h '\\\\\\\\'\n            macroSubLet macs t\n            macroSubBody '.' macs t\n        withToken h\n          \\\\\n            subH = baseMacroSub macs h\n            .\n            withToken subH\n              cons subH (map (baseMacroSub macs) t)\n              \\tok pos . baseMacroSub macs (cons subH t)\n          \\tok pos . assoc tok macs\n            \\def . baseMacroSub macs (def t)\n            cons h (map (baseMacroSub macs) t)"})((function(){var $m; return function(){return $m || ($m = function(L_macs){return function(L_expr){return L_isToken()(L_expr)(L_expr)((function(){var $m; return function(){return $m || ($m = L_isParens()(L_expr)((function(){var $m; return function(){return $m || ($m = L_expr()((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_end){return function(L_content){return (function(){

var L_result;

L_result = (function(){var $m; return function(){return $m || ($m = L_baseMacroSub()(L_macs)(L_content))}})();
return L_isToken()(L_result)(L_result)((function(){var $m; return function(){return $m || ($m = L_parens()(L_start)(L_end)(L_result))}})())})()}}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_withCons()(L_expr)(L_expr)((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isBlockStart()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_h)(function(){return "\\\\"})((function(){var $m; return function(){return $m || ($m = L_macroSubLet()(L_macs)(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_macroSubBody()(function(){return "."})(L_macs)(L_t))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_withToken()(L_h)(function(){
var L_subH;

L_subH = (function(){var $m; return function(){return $m || ($m = L_baseMacroSub()(L_macs)(L_h))}})();
return L_withToken()(L_subH)((function(){var $m; return function(){return $m || ($m = L_cons()(L_subH)((function(){var $m; return function(){return $m || ($m = L_map()((function(){var $m; return function(){return $m || ($m = L_baseMacroSub()(L_macs))}})())(L_t))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_tok){return function(L_pos){return L_baseMacroSub()(L_macs)((function(){var $m; return function(){return $m || ($m = L_cons()(L_subH)(L_t))}})())}})}})())})((function(){var $m; return function(){return $m || ($m = function(L_tok){return function(L_pos){return L_assoc()(L_tok)(L_macs)((function(){var $m; return function(){return $m || ($m = function(L_def){return L_baseMacroSub()(L_macs)((function(){var $m; return function(){return $m || ($m = L_def()(L_t))}})())})}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_map()((function(){var $m; return function(){return $m || ($m = L_baseMacroSub()(L_macs))}})())(L_t))}})()))}})())}})}})()))}})())}})}})()))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "macroSubLet"})(function(){return 2})(function(){return "macroSubLet macs list = list\n  \\h t D . isTokenString h '.'\n    cons h (baseMacroSub macs t)\n    cons (setParens h \\content . macroSubBody '=' macs content) (macroSubLet macs t)\n  # Don't bother with parse errors at this point -- ast generator will detect them\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_macs){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isTokenString()(L_h)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_baseMacroSub()(L_macs)(L_t))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_setParens()(L_h)((function(){var $m; return function(){return $m || ($m = function(L_content){return L_macroSubBody()(function(){return "="})(L_macs)(L_content)})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_macroSubLet()(L_macs)(L_t))}})()))}})())}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "macroSubBody"})(function(){return 3})(function(){return "macroSubBody char macs list = list\n  \\h t D . cons h\n    isTokenString h char baseMacroSub (macroSubBody char)\n      macs\n      t\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_char){return function(L_macs){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_h)(L_char)(L_baseMacroSub)((function(){var $m; return function(){return $m || ($m = L_macroSubBody()(L_char))}})())(L_macs)(L_t))}})())}}})}})())(L_nil)}}})}})())},
  function(){return L_define()(function(){return "postProcessMacro"})(function(){return 3})(function(){return "postProcessMacro before after expr = isString expr\n  token expr (eq after -1 before after)\n  isParens expr\n    expr \\start end contents . parens start end (postProcessMacro start end contents)\n    isCons expr\n      expr \\h t .\n        isToken h\n          cons h (postProcessMacro (+ 1 (+ (tokenPos h) (strLen (tokenString h)))) -1 t)\n          \\\\\n            posStart = position h\n            posEnd = position t\n            t2 = postProcessMacro -1 after t\n            h2 = postProcessMacro before -1 h\n            .\n            eq posStart -1\n              cons (postProcessMacro before (position t2) h) t2\n              cons h2 (postProcessMacro (+ 1 (lexEnd h2)) after t)\n      isNumber expr\n        token (strString expr) (eq after -1 before after)\n        expr"})((function(){var $m; return function(){return $m || ($m = function(L_before){return function(L_after){return function(L_expr){return L_isString()(L_expr)((function(){var $m; return function(){return $m || ($m = L_token()(L_expr)((function(){var $m; return function(){return $m || ($m = L_eq()(L_after)(function(){return -1})(L_before)(L_after))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_isParens()(L_expr)((function(){var $m; return function(){return $m || ($m = L_expr()((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_end){return function(L_contents){return L_parens()(L_start)(L_end)((function(){var $m; return function(){return $m || ($m = L_postProcessMacro()(L_start)(L_end)(L_contents))}})())}}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_isCons()(L_expr)((function(){var $m; return function(){return $m || ($m = L_expr()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isToken()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_postProcessMacro()((function(){var $m; return function(){return $m || ($m = L_$o()(function(){return 1})((function(){var $m; return function(){return $m || ($m = L_$o()((function(){var $m; return function(){return $m || ($m = L_tokenPos()(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_strLen()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_h))}})()))}})()))}})()))}})())(function(){return -1})(L_t))}})()))}})())(function(){
var L_h2, L_t2, L_posEnd, L_posStart;

L_h2 = (function(){var $m; return function(){return $m || ($m = L_postProcessMacro()(L_before)(function(){return -1})(L_h))}})();

L_t2 = (function(){var $m; return function(){return $m || ($m = L_postProcessMacro()(function(){return -1})(L_after)(L_t))}})();

L_posEnd = (function(){var $m; return function(){return $m || ($m = L_position()(L_t))}})();

L_posStart = (function(){var $m; return function(){return $m || ($m = L_position()(L_h))}})();
return L_eq()(L_posStart)(function(){return -1})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_postProcessMacro()(L_before)((function(){var $m; return function(){return $m || ($m = L_position()(L_t2))}})())(L_h))}})())(L_t2))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h2)((function(){var $m; return function(){return $m || ($m = L_postProcessMacro()((function(){var $m; return function(){return $m || ($m = L_$o()(function(){return 1})((function(){var $m; return function(){return $m || ($m = L_lexEnd()(L_h2))}})()))}})())(L_after)(L_t))}})()))}})())})}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_isNumber()(L_expr)((function(){var $m; return function(){return $m || ($m = L_token()((function(){var $m; return function(){return $m || ($m = L_strString()(L_expr))}})())((function(){var $m; return function(){return $m || ($m = L_eq()(L_after)(function(){return -1})(L_before)(L_after))}})()))}})())(L_expr))}})()))}})()))}})())}}})}})())},
  function(){return L_define()(function(){return "defMacro"})(function(){return 2})(function(){return "defMacro name def = bind (getValue 'macroDefs') \\macs . setValue 'macroDefs' (acons name def macs)"})((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_def){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "macroDefs"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_macs){return L_setValue()(function(){return "macroDefs"})((function(){var $m; return function(){return $m || ($m = L_acons()(L_name)(L_def)(L_macs))}})())})}})())}})}})())},
  function(){return L_define()(function(){return "delimiterListPrefix"})(function(){return 0})(function(){return "delimiterListPrefix = \"\\\"(?:\\\\\\\\.|[^\\\"])*\\\"|'(?:\\\\\\\\.|[^'])*'|\\\\n *|#.*| +\""})(function(){return "\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|\\n *|#.*| +"})},
  function(){return L_define()(function(){return "regexpEscapePat"})(function(){return 0})(function(){return "regexpEscapePat = regexpFlags '[\\\\-\\\\[\\\\]/\\\\{\\\\}\\\\(\\\\)\\\\*\\\\+\\\\?\\\\.\\\\\\\\\\\\^\\\\$\\\\|]' 'g'"})((function(){var $m; return function(){return $m || ($m = L_regexpFlags()(function(){return "[\\-\\[\\]/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]"})(function(){return "g"}))}})())},
  function(){return L_define()(function(){return "addToken"})(function(){return 1})(function(){return "addToken del = bind (getValue 'tokenList')\n  \\dels . contains dels del\n    false\n    \\\\\n      newDels = insertSorted (\\a b . > (strLen a) (strLen b)) del dels\n      .\n      bind (setValue 'tokenList' newDels)\n        \\_ . computeTokenPat newDels"})((function(){var $m; return function(){return $m || ($m = function(L_del){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenList"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_dels){return L_contains()(L_dels)(L_del)(L_false)(function(){
var L_newDels;

L_newDels = (function(){var $m; return function(){return $m || ($m = L_insertSorted()((function(){var $m; return function(){return $m || ($m = function(L_a){return function(L_b){return L_$z()((function(){var $m; return function(){return $m || ($m = L_strLen()(L_a))}})())((function(){var $m; return function(){return $m || ($m = L_strLen()(L_b))}})())}})}})())(L_del)(L_dels))}})();
return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "tokenList"})(L_newDels))}})())((function(){var $m; return function(){return $m || ($m = function(L__){return L_computeTokenPat()(L_newDels)})}})())})})}})())})}})())},
  function(){return L_define()(function(){return "computeTokenPat"})(function(){return 1})(function(){return "computeTokenPat dels = \\\\\n  delPats = map (\\item . strReplace item regexpEscapePat \"\\\\$&\") dels\n  newPat = strCat (cons '(' (cons (join (cons delimiterListPrefix delPats) '|') (cons ')' nil)))\n  .\n  setValue 'tokenPat' newPat"})((function(){var $m; return function(){return $m || ($m = function(L_dels){return (function(){

var L_newPat, L_delPats;

L_newPat = (function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "("})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_join()((function(){var $m; return function(){return $m || ($m = L_cons()(L_delimiterListPrefix)(L_delPats))}})())(function(){return "|"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ")"})(L_nil))}})()))}})()))}})()))}})();

L_delPats = (function(){var $m; return function(){return $m || ($m = L_map()((function(){var $m; return function(){return $m || ($m = function(L_item){return L_strReplace()(L_item)(L_regexpEscapePat)(function(){return "\\$&"})})}})())(L_dels))}})();
return L_setValue()(function(){return "tokenPat"})(L_newPat)})()})}})())},
  function(){return L_define()(function(){return "addTokenGroup"})(function(){return 2})(function(){return "addTokenGroup open close = bind (addToken open)\n  \\_ . bind (addToken close)\n    \\_ . bind (getValue 'tokenGroups')\n      \\gr . setValue 'tokenGroups' (acons open close gr)"})((function(){var $m; return function(){return $m || ($m = function(L_open){return function(L_close){return L_bind()((function(){var $m; return function(){return $m || ($m = L_addToken()(L_open))}})())((function(){var $m; return function(){return $m || ($m = function(L__){return L_bind()((function(){var $m; return function(){return $m || ($m = L_addToken()(L_close))}})())((function(){var $m; return function(){return $m || ($m = function(L___0){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenGroups"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_gr){return L_setValue()(function(){return "tokenGroups"})((function(){var $m; return function(){return $m || ($m = L_acons()(L_open)(L_close)(L_gr))}})())})}})())})}})())})}})())}})}})())},
  function(){return L_define()(function(){return "parse"})(function(){return 2})(function(){return "parse str pat = ifNotErr (parseIndent (token '\\n' 0) (tokens str pat) nil parenGroups) \\list . list \\h t . stripParens h"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseIndent()((function(){var $m; return function(){return $m || ($m = L_token()(function(){return "\n"})(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = L_tokens()(L_str)(L_pat))}})())(L_nil)(L_parenGroups))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_stripParens()(L_h)}})}})())})}})())}})}})())},
  function(){return L_define()(function(){return "parseG"})(function(){return 3})(function(){return "parseG str pat groups = ifNotErr (parseIndent (token '\\n' 0) (tokens str pat) nil groups) \\list . list \\h t . stripParens h"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return function(L_groups){return L_ifNotErr()((function(){var $m; return function(){return $m || ($m = L_parseIndent()((function(){var $m; return function(){return $m || ($m = L_token()(function(){return "\n"})(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = L_tokens()(L_str)(L_pat))}})())(L_nil)(L_groups))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_stripParens()(L_h)}})}})())})}})())}}})}})())},
  function(){return L_define()(function(){return "parseToAst"})(function(){return 2})(function(){return "parseToAst str pat = createAst (parse str pat) nil id"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return L_createAst()((function(){var $m; return function(){return $m || ($m = L_parse()(L_str)(L_pat))}})())(L_nil)(L_id)}})}})())},
  function(){return L_define()(function(){return "parseM"})(function(){return 1})(function(){return "parseM str =\n  bind (getValue 'tokenPat')\n    \\tokPat . bind (getValue 'tokenGroups')\n      \\groups . parseG str tokPat groups"})((function(){var $m; return function(){return $m || ($m = function(L_str){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenPat"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_tokPat){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenGroups"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_groups){return L_parseG()(L_str)(L_tokPat)(L_groups)})}})())})}})())})}})())},
  function(){return L_define()(function(){return "scanLine"})(function(){return 4})(function(){return "scanLine str pat onDef onExpr = scanLineG str pat parenGroups onDef onExpr"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return function(L_onDef){return function(L_onExpr){return L_scanLineG()(L_str)(L_pat)(L_parenGroups)(L_onDef)(L_onExpr)}}}})}})())},
  function(){return L_define()(function(){return "parseLine"})(function(){return 5})(function(){return "parseLine str pat names onDef onExpr = parseLineG str pat names parenGroups onDef onExpr"})((function(){var $m; return function(){return $m || ($m = function(L_str){return function(L_pat){return function(L_names){return function(L_onDef){return function(L_onExpr){return L_parseLineG()(L_str)(L_pat)(L_names)(L_parenGroups)(L_onDef)(L_onExpr)}}}}})}})())},
  function(){return L_define()(function(){return "parseLineM"})(function(){return 1})(function(){return "parseLineM str = bind (getValue 'tokenPat')\n  \\tokPat . bind (getValue 'tokenGroups')\n    \\groups . parseLineG str tokPat nil groups id id"})((function(){var $m; return function(){return $m || ($m = function(L_str){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenPat"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_tokPat){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenGroups"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_groups){return L_parseLineG()(L_str)(L_tokPat)(L_nil)(L_groups)(L_id)(L_id)})}})())})}})())})}})())},
  function(){return L_define()(function(){return "macroSubM"})(function(){return 1})(function(){return "macroSubM expr =\n  bind (getValue 'macroDefs')\n    \\macs . macroSub macs expr"})((function(){var $m; return function(){return $m || ($m = function(L_expr){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "macroDefs"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_macs){return L_macroSub()(L_macs)(L_expr)})}})())})}})())},
  function(){return L_define()(function(){return "macroParse"})(function(){return 1})(function(){return "macroParse str =\n  bind (parseM str)\n    \\ex . macroSubM ex"})((function(){var $m; return function(){return $m || ($m = function(L_str){return L_bind()((function(){var $m; return function(){return $m || ($m = L_parseM()(L_str))}})())((function(){var $m; return function(){return $m || ($m = function(L_ex){return L_macroSubM()(L_ex)})}})())})}})())},
  function(){return L_define()(function(){return "tokensM"})(function(){return 1})(function(){return "tokensM str =\n  bind (getValue 'tokenPat')\n    \\delimiterPat . tokens str delimiterPat"})((function(){var $m; return function(){return $m || ($m = function(L_str){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenPat"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_delimiterPat){return L_tokens()(L_str)(L_delimiterPat)})}})())})}})())},
  function(){return L_define()(function(){return "parseLines"})(function(){return 2})(function(){return "parseLines lines result = lines\n  \\h t D . bind (parseLineM h)\n    \\ast . parseLines t (cons ast result)\n  reverse result"})((function(){var $m; return function(){return $m || ($m = function(L_lines){return function(L_result){return L_lines()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_bind()((function(){var $m; return function(){return $m || ($m = L_parseLineM()(L_h))}})())((function(){var $m; return function(){return $m || ($m = function(L_ast){return L_parseLines()(L_t)((function(){var $m; return function(){return $m || ($m = L_cons()(L_ast)(L_result))}})())})}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_reverse()(L_result))}})())}})}})())},
  function(){return L_define()(function(){return "parseFile"})(function(){return 1})(function(){return "parseFile text = parseLines (linesForFile text) nil"})((function(){var $m; return function(){return $m || ($m = function(L_text){return L_parseLines()((function(){var $m; return function(){return $m || ($m = L_linesForFile()(L_text))}})())(L_nil)})}})())},
  function(){return L_define()(function(){return "simpleScanLine"})(function(){return 1})(function(){return "simpleScanLine line = bind (getValue 'tokenPat')\n  \\tokenPat . bind (getValue 'tokenGroups')\n    \\groups . scanLineG line tokenPat groups id id"})((function(){var $m; return function(){return $m || ($m = function(L_line){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenPat"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_tokenPat){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenGroups"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_groups){return L_scanLineG()(L_line)(L_tokenPat)(L_groups)(L_id)(L_id)})}})())})}})())})}})())},
  function(){return L_define()(function(){return "scanLineM"})(function(){return 1})(function(){return "scanLineM line = bind (getValue 'tokenPat')\n  \\tokenPat . bind (getValue 'tokenGroups')\n    \\groups . bind (getValue 'parseFilters')\n      \\filters . bind (getValue 'macroDefs')\n        \\macros . bind (runParseFilters filters (scanLineG line tokenPat groups id id))\n          \\scanned . macroSub macros scanned"})((function(){var $m; return function(){return $m || ($m = function(L_line){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenPat"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_tokenPat){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenGroups"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_groups){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "parseFilters"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_filters){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "macroDefs"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_macros){return L_bind()((function(){var $m; return function(){return $m || ($m = L_runParseFilters()(L_filters)((function(){var $m; return function(){return $m || ($m = L_scanLineG()(L_line)(L_tokenPat)(L_groups)(L_id)(L_id))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L_scanned){return L_macroSub()(L_macros)(L_scanned)})}})())})}})())})}})())})}})())})}})())})}})())},
  function(){return L_define()(function(){return "newParseLine"})(function(){return 2})(function(){return "newParseLine names line = bind (scanLineM line)\n  \\scanned . createAst scanned names \\ast . ast"})((function(){var $m; return function(){return $m || ($m = function(L_names){return function(L_line){return L_bind()((function(){var $m; return function(){return $m || ($m = L_scanLineM()(L_line))}})())((function(){var $m; return function(){return $m || ($m = function(L_scanned){return L_createAst()(L_scanned)(L_names)((function(){var $m; return function(){return $m || ($m = function(L_ast){return L_ast()})}})())})}})())}})}})())},
  function(){return L_define()(function(){return "runLine"})(function(){return 2})(function(){return "runLine names line = bind (newParseLine names line)\n  \\ast . bind (runAst ast)\n    \\result . cons\n      ast\n      isParseErr result\n        left (parseErrMsg result)\n        right result"})((function(){var $m; return function(){return $m || ($m = function(L_names){return function(L_line){return L_bind()((function(){var $m; return function(){return $m || ($m = L_newParseLine()(L_names)(L_line))}})())((function(){var $m; return function(){return $m || ($m = function(L_ast){return L_bind()((function(){var $m; return function(){return $m || ($m = L_runAst()(L_ast))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return L_cons()(L_ast)((function(){var $m; return function(){return $m || ($m = L_isParseErr()(L_result)((function(){var $m; return function(){return $m || ($m = L_left()((function(){var $m; return function(){return $m || ($m = L_parseErrMsg()(L_result))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_right()(L_result))}})()))}})())})}})())})}})())}})}})())},
  function(){return L_define()(function(){return "runLines"})(function(){return 2})(function(){return "runLines names lines = lines\n  \\h t D . bind (runLine names h)\n    \\line . bind (runLines names t)\n      \\rest . cons line rest\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_names){return function(L_lines){return L_lines()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_bind()((function(){var $m; return function(){return $m || ($m = L_runLine()(L_names)(L_h))}})())((function(){var $m; return function(){return $m || ($m = function(L_line){return L_bind()((function(){var $m; return function(){return $m || ($m = L_runLines()(L_names)(L_t))}})())((function(){var $m; return function(){return $m || ($m = function(L_rest){return L_cons()(L_line)(L_rest)})}})())})}})())}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "runFile"})(function(){return 1})(function(){return "runFile text = \\\\\n  lines = linesForFile text\n  names = namesForLines lines\n  .\n  runLines names lines"})((function(){var $m; return function(){return $m || ($m = function(L_text){return (function(){

var L_names, L_lines;

L_names = (function(){var $m; return function(){return $m || ($m = L_namesForLines()(L_lines))}})();

L_lines = (function(){var $m; return function(){return $m || ($m = L_linesForFile()(L_text))}})();
return L_runLines()(L_names)(L_lines)})()})}})())},
  function(){return L_define()(function(){return "baseLoad"})(function(){return 1})(function(){return "baseLoad file = bind (readFile file)\n  \\result . result\n    \\err . err\n    \\contents . bind (getValue 'activeTokenPacks')\n      \\activePacks . bind resetStdTokenPacks\n        \\_ . bind (runFile contents)\n          \\result . isNil activePacks\n            bind resetStdTokenPacks\n              \\_ . result\n            bind (resetTokenPacks activePacks)\n                \\_ . result"})((function(){var $m; return function(){return $m || ($m = function(L_file){return L_bind()((function(){var $m; return function(){return $m || ($m = L_readFile()(L_file))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return L_result()((function(){var $m; return function(){return $m || ($m = function(L_err){return L_err()})}})())((function(){var $m; return function(){return $m || ($m = function(L_contents){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "activeTokenPacks"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_activePacks){return L_bind()(L_resetStdTokenPacks)((function(){var $m; return function(){return $m || ($m = function(L__){return L_bind()((function(){var $m; return function(){return $m || ($m = L_runFile()(L_contents))}})())((function(){var $m; return function(){return $m || ($m = function(L_result_0){return L_isNil()(L_activePacks)((function(){var $m; return function(){return $m || ($m = L_bind()(L_resetStdTokenPacks)((function(){var $m; return function(){return $m || ($m = function(L___1){return L_result_0()})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_bind()((function(){var $m; return function(){return $m || ($m = L_resetTokenPacks()(L_activePacks))}})())((function(){var $m; return function(){return $m || ($m = function(L___1){return L_result_0()})}})()))}})())})}})())})}})())})}})())})}})())})}})())})}})())},
  function(){return L_define()(function(){return "load"})(function(){return 1})(function(){return "load file = bind (baseLoad file)\n  \\result . \\\\\n    errs = foldr (\\line results . tail line (\\er . cons er results) (\\x . results)) nil result\n    .\n    isNil errs\n      right true\n      left errs"})((function(){var $m; return function(){return $m || ($m = function(L_file){return L_bind()((function(){var $m; return function(){return $m || ($m = L_baseLoad()(L_file))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return (function(){

var L_errs;

L_errs = (function(){var $m; return function(){return $m || ($m = L_foldr()((function(){var $m; return function(){return $m || ($m = function(L_line){return function(L_results){return L_tail()(L_line)((function(){var $m; return function(){return $m || ($m = function(L_er){return L_cons()(L_er)(L_results)})}})())((function(){var $m; return function(){return $m || ($m = function(L_x){return L_results()})}})())}})}})())(L_nil)(L_result))}})();
return L_isNil()(L_errs)((function(){var $m; return function(){return $m || ($m = L_right()(L_true))}})())((function(){var $m; return function(){return $m || ($m = L_left()(L_errs))}})())})()})}})())})}})())},
  function(){return L_define()(function(){return "require"})(function(){return 1})(function(){return "require file = bind (getValue 'requiredFiles')\n  \\files . contains files file\n    false\n    bind (load file)\n      \\result . result\n        \\x . left x\n        \\_ . bind (setValue 'requiredFiles' (cons file files))\n          \\_ . right true"})((function(){var $m; return function(){return $m || ($m = function(L_file){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "requiredFiles"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_files){return L_contains()(L_files)(L_file)(L_false)((function(){var $m; return function(){return $m || ($m = L_bind()((function(){var $m; return function(){return $m || ($m = L_load()(L_file))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return L_result()((function(){var $m; return function(){return $m || ($m = function(L_x){return L_left()(L_x)})}})())((function(){var $m; return function(){return $m || ($m = function(L__){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "requiredFiles"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_file)(L_files))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L___0){return L_right()(L_true)})}})())})}})())})}})()))}})())})}})())})}})())},
  function(){return L_define()(function(){return "defTokenPack"})(function(){return 2})(function(){return "defTokenPack name pack = bind (getValue 'tokenPacks')\n  \\packs . setValue 'tokenPacks' (acons name pack packs)"})((function(){var $m; return function(){return $m || ($m = function(L_name){return function(L_pack){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenPacks"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_packs){return L_setValue()(function(){return "tokenPacks"})((function(){var $m; return function(){return $m || ($m = L_acons()(L_name)(L_pack)(L_packs))}})())})}})())}})}})())},
  function(){return L_define()(function(){return "useTokenPack"})(function(){return 1})(function(){return "useTokenPack name = bind (getValue 'tokenPacks')\n  \\packs . bind (getValue 'tokenGroups')\n    \\groups . bind (getValue 'tokenList')\n      \\tokens . bind (getValue 'activeTokenPacks')\n        \\activePacks . bind (getValue 'parseFilters')\n          \\filters . assoc name packs\n            \\pack . \\\\\n              groupToks = foldl (\\value el . el \\h t . cons h (cons t value)) nil (head (tail pack))\n              newToks = quicksort (\\a b . > (strLen a) (strLen b)) (append (head pack) (append groupToks tokens))\n              .\n              bind (setValue 'tokenList' newToks)\n                \\_ . bind (setValue 'tokenGroups' (append (head (tail pack)) groups))\n                  \\_ . bind (setValue 'parseFilters' (append filters (head (tail (tail pack)))))\n                    \\_ . bind (computeTokenPat newToks)\n                      \\_ . setValue 'activeTokenPacks' (cons name activePacks)\n            nil"})((function(){var $m; return function(){return $m || ($m = function(L_name){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenPacks"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_packs){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenGroups"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_groups){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenList"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_tokens){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "activeTokenPacks"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_activePacks){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "parseFilters"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_filters){return L_assoc()(L_name)(L_packs)((function(){var $m; return function(){return $m || ($m = function(L_pack){return (function(){

var L_newToks, L_groupToks;

L_newToks = (function(){var $m; return function(){return $m || ($m = L_quicksort()((function(){var $m; return function(){return $m || ($m = function(L_a){return function(L_b){return L_$z()((function(){var $m; return function(){return $m || ($m = L_strLen()(L_a))}})())((function(){var $m; return function(){return $m || ($m = L_strLen()(L_b))}})())}})}})())((function(){var $m; return function(){return $m || ($m = L_append()((function(){var $m; return function(){return $m || ($m = L_head()(L_pack))}})())((function(){var $m; return function(){return $m || ($m = L_append()(L_groupToks)(L_tokens))}})()))}})()))}})();

L_groupToks = (function(){var $m; return function(){return $m || ($m = L_foldl()((function(){var $m; return function(){return $m || ($m = function(L_value){return function(L_el){return L_el()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_t)(L_value))}})())}})}})())}})}})())(L_nil)((function(){var $m; return function(){return $m || ($m = L_head()((function(){var $m; return function(){return $m || ($m = L_tail()(L_pack))}})()))}})()))}})();
return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "tokenList"})(L_newToks))}})())((function(){var $m; return function(){return $m || ($m = function(L__){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "tokenGroups"})((function(){var $m; return function(){return $m || ($m = L_append()((function(){var $m; return function(){return $m || ($m = L_head()((function(){var $m; return function(){return $m || ($m = L_tail()(L_pack))}})()))}})())(L_groups))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L___0){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "parseFilters"})((function(){var $m; return function(){return $m || ($m = L_append()(L_filters)((function(){var $m; return function(){return $m || ($m = L_head()((function(){var $m; return function(){return $m || ($m = L_tail()((function(){var $m; return function(){return $m || ($m = L_tail()(L_pack))}})()))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L___1){return L_bind()((function(){var $m; return function(){return $m || ($m = L_computeTokenPat()(L_newToks))}})())((function(){var $m; return function(){return $m || ($m = function(L___2){return L_setValue()(function(){return "activeTokenPacks"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_name)(L_activePacks))}})())})}})())})}})())})}})())})}})())})()})}})())(L_nil)})}})())})}})())})}})())})}})())})}})())})}})())},
  function(){return L_define()(function(){return "resetTokenPacks"})(function(){return 1})(function(){return "resetTokenPacks packs = bind (setValue 'tokenGroups' nil)\n  \\_ . bind (setValue 'tokenList' nil)\n    \\_ . bind (setValue 'activeTokenPacks' nil)\n      \\_ . bind (setValue 'parseFilters' nil)\n        \\_ . foldr1\n          \\packCmd result . bind packCmd \\_ . result\n          map useTokenPack packs"})((function(){var $m; return function(){return $m || ($m = function(L_packs){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "tokenGroups"})(L_nil))}})())((function(){var $m; return function(){return $m || ($m = function(L__){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "tokenList"})(L_nil))}})())((function(){var $m; return function(){return $m || ($m = function(L___0){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "activeTokenPacks"})(L_nil))}})())((function(){var $m; return function(){return $m || ($m = function(L___1){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "parseFilters"})(L_nil))}})())((function(){var $m; return function(){return $m || ($m = function(L___2){return L_foldr1()((function(){var $m; return function(){return $m || ($m = function(L_packCmd){return function(L_result){return L_bind()(L_packCmd)((function(){var $m; return function(){return $m || ($m = function(L___3){return L_result()})}})())}})}})())((function(){var $m; return function(){return $m || ($m = L_map()(L_useTokenPack)(L_packs))}})())})}})())})}})())})}})())})}})())})}})())},
  function(){return L_define()(function(){return "resetStdTokenPacks"})(function(){return 0})(function(){return "resetStdTokenPacks = bind (getValue 'stdTokenPacks')\n  \\stds . bind (resetTokenPacks stds)\n    \\_ . setValue 'activeTokenPacks' nil"})((function(){var $m; return function(){return $m || ($m = L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "stdTokenPacks"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_stds){return L_bind()((function(){var $m; return function(){return $m || ($m = L_resetTokenPacks()(L_stds))}})())((function(){var $m; return function(){return $m || ($m = function(L__){return L_setValue()(function(){return "activeTokenPacks"})(L_nil)})}})())})}})()))}})())},
  function(){return L_define()(function(){return "addStdTokenPacks"})(function(){return 1})(function(){return "addStdTokenPacks morePacks = bind (getValue 'stdTokenPacks')\n  \\stds . setValue 'stdTokenPacks' (append stds morePacks)"})((function(){var $m; return function(){return $m || ($m = function(L_morePacks){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "stdTokenPacks"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_stds){return L_setValue()(function(){return "stdTokenPacks"})((function(){var $m; return function(){return $m || ($m = L_append()(L_stds)(L_morePacks))}})())})}})())})}})())},
  function(){return L_define()(function(){return "addParseFilter"})(function(){return 1})(function(){return "addParseFilter filt = bind (getValue 'parseFilters')\n  \\filters . setValue 'parseFilters' (append filters (cons filt nil))"})((function(){var $m; return function(){return $m || ($m = function(L_filt){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "parseFilters"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_filters){return L_setValue()(function(){return "parseFilters"})((function(){var $m; return function(){return $m || ($m = L_append()(L_filters)((function(){var $m; return function(){return $m || ($m = L_cons()(L_filt)(L_nil))}})()))}})())})}})())})}})())},
  function(){return L_define()(function(){return "d"})(function(){return 3})(function(){return "d label value expr = log (strCat (cons label (cons value nil))) expr"})((function(){var $m; return function(){return $m || ($m = function(L_label){return function(L_value){return function(L_expr){return L_log()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_cons()(L_label)((function(){var $m; return function(){return $m || ($m = L_cons()(L_value)(L_nil))}})()))}})()))}})())(L_expr)}}})}})())},
  function(){return L_define()(function(){return "dd"})(function(){return 2})(function(){return "dd label arg = d label arg arg"})((function(){var $m; return function(){return $m || ($m = function(L_label){return function(L_arg){return L_d()(L_label)(L_arg)(L_arg)}})}})())},
  function(){return L_setValue()(function(){return "macroDefs"})(L_nil)},
  function(){return L_setValue()(function(){return "requiredFiles"})(L_nil)},
  function(){return L_setValue()(function(){return "tokenPacks"})(L_nil)},
  function(){return L_setValue()(function(){return "activeTokenPacks"})(L_nil)},
  function(){return L_setValue()(function(){return "stdTokenPacks"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "std"})(L_nil))}})())},
  function(){return L_defTokenPack()(function(){return "std"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\@"})(L_nil))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_acons()(function(){return "("})(function(){return ")"})(L_nil))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_nil)(L_nil))}})()))}})()))}})())},
  function(){return L_resetStdTokenPacks()},
  function(){return L_addTokenGroup()(function(){return "["})(function(){return "]"})},
  function(){return L_addToken()(function(){return "|"})},
  function(){return L_define()(function(){return "listifyOp"})(function(){return 2})(function(){return "listifyOp op list = list\n  \\h t D . isTokenString h '|'\n    cons t nil\n    cons (cons op (cons h (listifyOp op t))) nil\n  cons 'nil' nil"})((function(){var $m; return function(){return $m || ($m = function(L_op){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isTokenString()(L_h)(function(){return "|"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_t)(L_nil))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(L_op)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_listifyOp()(L_op)(L_t))}})()))}})()))}})())(L_nil))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "nil"})(L_nil))}})())}})}})())},
  function(){return L_define()(function(){return "listify"})(function(){return 1})(function(){return "listify list = listifyOp 'cons' list"})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_listifyOp()(function(){return "cons"})(L_list)})}})())},
  function(){return L_defMacro()(function(){return "["})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_listify()(L_h)}})}})())})}})())},
  function(){return L_define()(function(){return "listFilter"})(function(){return 1})(function(){return "listFilter code = bind (getValue 'listMacros')\n  \\listMacros . filterApplies code \\list . list \\h t .\n    and (isToken h) (contains listMacros (tokenString h))\n      listFilterTail list\n      list"})((function(){var $m; return function(){return $m || ($m = function(L_code){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "listMacros"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_listMacros){return L_filterApplies()(L_code)((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_and()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_contains()(L_listMacros)((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_h))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_listFilterTail()(L_list))}})())(L_list)}})}})())})}})())})}})())})}})())},
  function(){return L_define()(function(){return "listFilterTail"})(function(){return 1})(function(){return "listFilterTail list = list\n  \\h t D . isTokenString h '|'\n    > (length t) 2\n      cons h (cons (removeLast t) (cons (last t) nil))\n      list\n    cons h (listFilterTail t)\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isTokenString()(L_h)(function(){return "|"})((function(){var $m; return function(){return $m || ($m = L_$z()((function(){var $m; return function(){return $m || ($m = L_length()(L_t))}})())(function(){return 2})((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_removeLast()(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_last()(L_t))}})())(L_nil))}})()))}})()))}})())(L_list))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_listFilterTail()(L_t))}})()))}})())}}})}})())(L_nil)})}})())},
  function(){return L_define()(function(){return "filterApplies"})(function(){return 2})(function(){return "filterApplies code func = isParens code\n  code \\start end contents . parens start end (filterApplies contents func)\n  isCons code\n    \\\\\n      filtered = filterApplyElements code func\n      .\n      and (isCons filtered) (isBlockStart (head filtered))\n        filtered\n        func filtered\n    code"})((function(){var $m; return function(){return $m || ($m = function(L_code){return function(L_func){return L_isParens()(L_code)((function(){var $m; return function(){return $m || ($m = L_code()((function(){var $m; return function(){return $m || ($m = function(L_start){return function(L_end){return function(L_contents){return L_parens()(L_start)(L_end)((function(){var $m; return function(){return $m || ($m = L_filterApplies()(L_contents)(L_func))}})())}}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_isCons()(L_code)(function(){
var L_filtered;

L_filtered = (function(){var $m; return function(){return $m || ($m = L_filterApplyElements()(L_code)(L_func))}})();
return L_and()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_filtered))}})())((function(){var $m; return function(){return $m || ($m = L_isBlockStart()((function(){var $m; return function(){return $m || ($m = L_head()(L_filtered))}})()))}})())(L_filtered)((function(){var $m; return function(){return $m || ($m = L_func()(L_filtered))}})())})(L_code))}})())}})}})())},
  function(){return L_define()(function(){return "filterApplyElements"})(function(){return 2})(function(){return "filterApplyElements code func = code\n  \\h t D . isBlockStart h\n    cons h (filterBody t func)\n    cons (filterApplies h func)\n      and (isCons t) (isBlockStart (head t))\n        cons (filterApplyElements t func) nil\n        filterApplyElements t func\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_code){return function(L_func){return L_code()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isBlockStart()(L_h)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_filterBody()(L_t)(L_func))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_filterApplies()(L_h)(L_func))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_isBlockStart()((function(){var $m; return function(){return $m || ($m = L_head()(L_t))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_filterApplyElements()(L_t)(L_func))}})())(L_nil))}})())((function(){var $m; return function(){return $m || ($m = L_filterApplyElements()(L_t)(L_func))}})()))}})()))}})())}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "filterBody"})(function(){return 2})(function(){return "filterBody code func = code \\h t . cons h\n  isTokenString h '.'\n    filterApplies t func\n    filterBody t func"})((function(){var $m; return function(){return $m || ($m = function(L_code){return function(L_func){return L_code()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_h)(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_filterApplies()(L_t)(L_func))}})())((function(){var $m; return function(){return $m || ($m = L_filterBody()(L_t)(L_func))}})()))}})())}})}})())}})}})())},
  function(){return L_setValue()(function(){return "listMacros"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "["})(L_nil))}})())},
  function(){return L_addParseFilter()(L_listFilter)},
  function(){return L_defTokenPack()(function(){return "list"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "|"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "="})(L_nil))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "["})(function(){return "]"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "or["})(function(){return "]"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "and["})(function(){return "]"}))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "concat["})(function(){return "]"}))}})())(L_nil))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(L_listFilter)(L_nil))}})())(L_nil))}})()))}})()))}})())},
  function(){return L_addTokenGroup()(function(){return "or["})(function(){return "]"})},
  function(){return L_addTokenGroup()(function(){return "and["})(function(){return "]"})},
  function(){return L_addTokenGroup()(function(){return "concat["})(function(){return "]"})},
  function(){return L_define()(function(){return "listMacroFoldOp"})(function(){return 3})(function(){return "listMacroFoldOp op emptyCase list = list \\h t . foldr\n    \\case result . [op case result]\n    emptyCase\n    h"})((function(){var $m; return function(){return $m || ($m = function(L_op){return function(L_emptyCase){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_foldr()((function(){var $m; return function(){return $m || ($m = function(L_case){return function(L_result){return L_cons()(L_op)((function(){var $m; return function(){return $m || ($m = L_cons()(L_case)((function(){var $m; return function(){return $m || ($m = L_cons()(L_result)(L_nil))}})()))}})())}})}})())(L_emptyCase)(L_h)}})}})())}}})}})())},
  function(){return L_defMacro()(function(){return "or["})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_listMacroFoldOp()(function(){return "or"})(function(){return "false"})(L_list)})}})())},
  function(){return L_defMacro()(function(){return "and["})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_listMacroFoldOp()(function(){return "and"})(function(){return "true"})(L_list)})}})())},
  function(){return L_defMacro()(function(){return "concat["})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_cons()(function(){return "strCat"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "flatten"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_listify()((function(){var $m; return function(){return $m || ($m = L_head()(L_list))}})()))}})())(L_nil))}})())(L_nil))}})()))}})())(L_nil))}})())})}})())},
  function(){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "listMacros"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_lm){return L_cons()(function(){return "concat["})(L_lm)})}})())},
  function(){return L_define()(function(){return "infix"})(function(){return 1})(function(){return "infix code = bind (getValue 'infixPrecedence')\n  \\prec . bind (getValue 'infixRightAssociative')\n    \\right . bind (getValue 'tokenGroups')\n      \\groups . filterApplies\n        code\n        \\expr . infixRearrange prec right (map (\\cell . tail cell) groups) expr"})((function(){var $m; return function(){return $m || ($m = function(L_code){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "infixPrecedence"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_prec){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "infixRightAssociative"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_right){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "tokenGroups"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_groups){return L_filterApplies()(L_code)((function(){var $m; return function(){return $m || ($m = function(L_expr){return L_infixRearrange()(L_prec)(L_right)((function(){var $m; return function(){return $m || ($m = L_map()((function(){var $m; return function(){return $m || ($m = function(L_cell){return L_tail()(L_cell)})}})())(L_groups))}})())(L_expr)})}})())})}})())})}})())})}})())})}})())},
  function(){return L_define()(function(){return "infixRearrange"})(function(){return 4})(function(){return "infixRearrange prec right closes list = \\\\\n  len = length list\n  head1 = head list\n  tail1 = tail list\n  head2 = head tail1\n  tail2 = tail tail1\n  head3 = head tail2\n  opPrec = getPrec prec head2\n  .\n  < len 2\n    list\n    isInfix opPrec head1 head2 len\n      or (== len 2) (not (isInfixArg closes head3))\n        [[head2 head1] | tail2]\n        infixRearrange prec right closes (absorbArgument opPrec prec right closes head1 head2 tail2 head3 (- len 2))\n      [head1 | infixRearrange prec right closes tail1]"})((function(){var $m; return function(){return $m || ($m = function(L_prec){return function(L_right){return function(L_closes){return function(L_list){return (function(){

var L_opPrec, L_head3, L_tail2, L_head2, L_tail1, L_head1, L_len;

L_opPrec = (function(){var $m; return function(){return $m || ($m = L_getPrec()(L_prec)(L_head2))}})();

L_head3 = (function(){var $m; return function(){return $m || ($m = L_head()(L_tail2))}})();

L_tail2 = (function(){var $m; return function(){return $m || ($m = L_tail()(L_tail1))}})();

L_head2 = (function(){var $m; return function(){return $m || ($m = L_head()(L_tail1))}})();

L_tail1 = (function(){var $m; return function(){return $m || ($m = L_tail()(L_list))}})();

L_head1 = (function(){var $m; return function(){return $m || ($m = L_head()(L_list))}})();

L_len = (function(){var $m; return function(){return $m || ($m = L_length()(L_list))}})();
return L_$y()(L_len)(function(){return 2})(L_list)((function(){var $m; return function(){return $m || ($m = L_isInfix()(L_opPrec)(L_head1)(L_head2)(L_len)((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_$p$p()(L_len)(function(){return 2}))}})())((function(){var $m; return function(){return $m || ($m = L_not()((function(){var $m; return function(){return $m || ($m = L_isInfixArg()(L_closes)(L_head3))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(L_head2)((function(){var $m; return function(){return $m || ($m = L_cons()(L_head1)(L_nil))}})()))}})())(L_tail2))}})())((function(){var $m; return function(){return $m || ($m = L_infixRearrange()(L_prec)(L_right)(L_closes)((function(){var $m; return function(){return $m || ($m = L_absorbArgument()(L_opPrec)(L_prec)(L_right)(L_closes)(L_head1)(L_head2)(L_tail2)(L_head3)((function(){var $m; return function(){return $m || ($m = L_$_()(L_len)(function(){return 2}))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_head1)((function(){var $m; return function(){return $m || ($m = L_infixRearrange()(L_prec)(L_right)(L_closes)(L_tail1))}})()))}})()))}})())})()}}}})}})())},
  function(){return L_define()(function(){return "absorbArgument"})(function(){return 9})(function(){return "absorbArgument opPrec prec right closes head1 head2 tail2 head3 len = \\\\\n  tail3 = tail tail2\n  head4 = head tail3\n  tail4 = tail tail3\n  head5 = head tail4\n  .\n  infixShouldEatNext opPrec prec (contains right (strTokenString head2)) head3 head4 head5 closes len\n    [head1 head2 | absorbArgument (getPrec prec head4) prec right closes head3 head4 tail4 head5 (- len 2)]\n    [[head2 head1 head3] | tail3]"})((function(){var $m; return function(){return $m || ($m = function(L_opPrec){return function(L_prec){return function(L_right){return function(L_closes){return function(L_head1){return function(L_head2){return function(L_tail2){return function(L_head3){return function(L_len){return (function(){

var L_head5, L_tail4, L_head4, L_tail3;

L_head5 = (function(){var $m; return function(){return $m || ($m = L_head()(L_tail4))}})();

L_tail4 = (function(){var $m; return function(){return $m || ($m = L_tail()(L_tail3))}})();

L_head4 = (function(){var $m; return function(){return $m || ($m = L_head()(L_tail3))}})();

L_tail3 = (function(){var $m; return function(){return $m || ($m = L_tail()(L_tail2))}})();
return L_infixShouldEatNext()(L_opPrec)(L_prec)((function(){var $m; return function(){return $m || ($m = L_contains()(L_right)((function(){var $m; return function(){return $m || ($m = L_strTokenString()(L_head2))}})()))}})())(L_head3)(L_head4)(L_head5)(L_closes)(L_len)((function(){var $m; return function(){return $m || ($m = L_cons()(L_head1)((function(){var $m; return function(){return $m || ($m = L_cons()(L_head2)((function(){var $m; return function(){return $m || ($m = L_absorbArgument()((function(){var $m; return function(){return $m || ($m = L_getPrec()(L_prec)(L_head4))}})())(L_prec)(L_right)(L_closes)(L_head3)(L_head4)(L_tail4)(L_head5)((function(){var $m; return function(){return $m || ($m = L_$_()(L_len)(function(){return 2}))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(L_head2)((function(){var $m; return function(){return $m || ($m = L_cons()(L_head1)((function(){var $m; return function(){return $m || ($m = L_cons()(L_head3)(L_nil))}})()))}})()))}})())(L_tail3))}})())})()}}}}}}}}})}})())},
  function(){return L_define()(function(){return "isInfixArg"})(function(){return 2})(function(){return "isInfixArg closes item = or[\n  isParens item\n  isCons item\n  and[\n    isToken item\n    not (contains closes (tokenString item))\n    not (isBlockStart item)]]"})((function(){var $m; return function(){return $m || ($m = function(L_closes){return function(L_item){return L_or()((function(){var $m; return function(){return $m || ($m = L_isParens()(L_item))}})())((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_item))}})())((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isToken()(L_item))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_not()((function(){var $m; return function(){return $m || ($m = L_contains()(L_closes)((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_item))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_not()((function(){var $m; return function(){return $m || ($m = L_isBlockStart()(L_item))}})()))}})())(L_true))}})()))}})()))}})())(L_false))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "isInfix"})(function(){return 4})(function(){return "isInfix opPrec head1 head2 len = and[\n  > len 1\n  > opPrec -1\n  isInfixArg nil head1]"})((function(){var $m; return function(){return $m || ($m = function(L_opPrec){return function(L_head1){return function(L_head2){return function(L_len){return L_and()((function(){var $m; return function(){return $m || ($m = L_$z()(L_len)(function(){return 1}))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_$z()(L_opPrec)(function(){return -1}))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isInfixArg()(L_nil)(L_head1))}})())(L_true))}})()))}})())}}}})}})())},
  function(){return L_define()(function(){return "getPrec"})(function(){return 2})(function(){return "getPrec prec token = \\\\\n  str = tokenString token\n  .\n  isToken token\n    findIndex (\\level . contains level str) prec\n    -1"})((function(){var $m; return function(){return $m || ($m = function(L_prec){return function(L_token){return (function(){

var L_str;

L_str = (function(){var $m; return function(){return $m || ($m = L_tokenString()(L_token))}})();
return L_isToken()(L_token)((function(){var $m; return function(){return $m || ($m = L_findIndex()((function(){var $m; return function(){return $m || ($m = function(L_level){return L_contains()(L_level)(L_str)})}})())(L_prec))}})())(function(){return -1})})()}})}})())},
  function(){return L_define()(function(){return "infixShouldEatNext"})(function(){return 8})(function(){return "infixShouldEatNext opPrec prec isRight curArg nextOp nextArg closes len = \\\\\n  nextPrec = getPrec prec nextOp\n  .\n  and[\n    > len 2\n    isInfix nextPrec curArg nextOp len\n    or (> opPrec nextPrec) (and (== opPrec nextPrec) isRight)\n    isInfixArg closes nextArg]"})((function(){var $m; return function(){return $m || ($m = function(L_opPrec){return function(L_prec){return function(L_isRight){return function(L_curArg){return function(L_nextOp){return function(L_nextArg){return function(L_closes){return function(L_len){return (function(){

var L_nextPrec;

L_nextPrec = (function(){var $m; return function(){return $m || ($m = L_getPrec()(L_prec)(L_nextOp))}})();
return L_and()((function(){var $m; return function(){return $m || ($m = L_$z()(L_len)(function(){return 2}))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isInfix()(L_nextPrec)(L_curArg)(L_nextOp)(L_len))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_or()((function(){var $m; return function(){return $m || ($m = L_$z()(L_opPrec)(L_nextPrec))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_$p$p()(L_opPrec)(L_nextPrec))}})())(L_isRight))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isInfixArg()(L_closes)(L_nextArg))}})())(L_true))}})()))}})()))}})())})()}}}}}}}})}})())},
  function(){return L_defMacro()(function(){return ":"})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_cons()(function(){return "cons"})(L_list)})}})())},
  function(){return L_define()(function(){return "iprec"})(function(){return 0})(function(){return "iprec = [['*' '/' '%'] ['+' '-'] [':'] ['<' '>' '<=' '>='] ['==' '!=']]"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "*"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "/"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "%"})(L_nil))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "+"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "-"})(L_nil))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ":"})(L_nil))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "<"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ">"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "<="})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ">="})(L_nil))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "=="})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "!="})(L_nil))}})()))}})())(L_nil))}})()))}})()))}})()))}})()))}})())},
  function(){return L_define()(function(){return "rightAssoc"})(function(){return 0})(function(){return "rightAssoc = [':']"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ":"})(L_nil))}})())},
  function(){return L_setValue()(function(){return "infixPrecedence"})(L_iprec)},
  function(){return L_setValue()(function(){return "infixRightAssociative"})(L_rightAssoc)},
  function(){return L_defTokenPack()(function(){return "infix"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_flatten()(L_iprec))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_nil)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(L_infix)(L_nil))}})())(L_nil))}})()))}})()))}})())},
  function(){return L_useTokenPack()(function(){return "infix"})},
  function(){return L_defMacro()(function(){return "do"})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_handleDo()(L_list)(L_false)(L_id)})}})())},
  function(){return L_define()(function(){return "handleDo"})(function(){return 3})(function(){return "handleDo list inLet cont = list\n  \\h t D . isNil t\n    cont (inLet ['.' h] [h])\n    doClause (stripParens h) h nil inLet \\newInLet chain .\n      handleDo t newInLet \\rest . cont (chain rest)\n  cont nil"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_inLet){return function(L_cont){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isNil()(L_t)((function(){var $m; return function(){return $m || ($m = L_cont()((function(){var $m; return function(){return $m || ($m = L_inLet()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)(L_nil))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)(L_nil))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_doClause()((function(){var $m; return function(){return $m || ($m = L_stripParens()(L_h))}})())(L_h)(L_nil)(L_inLet)((function(){var $m; return function(){return $m || ($m = function(L_newInLet){return function(L_chain){return L_handleDo()(L_t)(L_newInLet)((function(){var $m; return function(){return $m || ($m = function(L_rest){return L_cont()((function(){var $m; return function(){return $m || ($m = L_chain()(L_rest))}})())})}})())}})}})()))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_cont()(L_nil))}})())}}})}})())},
  function(){return L_define()(function(){return "doClause"})(function(){return 5})(function(){return "doClause steppingClause clause prefix inLet cont = \\\\\n  makeBind var monad = cont false \\rest . inLet (cons '.') id\n    ['bind' monad ['\\\\' var '.' | rest]]\n  .\n  isCons steppingClause\n    steppingClause \\h t . isTokenString h '='\n      inLet\n        cont true \\rest . [clause | rest]\n        cont true \\rest . ['\\\\\\\\' clause | rest]\n      isTokenString h '<-'\n        isNil t\n          parseErr \"No monad in do-clause: \" clause\n          prefix\n            \\ph pt D . isNil pt\n              makeBind (isNil prefix '_' (head prefix)) t\n              parseErr \"More than one variable in do-clause: \" clause\n            makeBind '_' t\n        doClause t clause [h | prefix] inLet cont\n    makeBind '_' clause"})((function(){var $m; return function(){return $m || ($m = function(L_steppingClause){return function(L_clause){return function(L_prefix){return function(L_inLet){return function(L_cont){return (function(){

var L_makeBind;

L_makeBind = (function(){var $m; return function(){return $m || ($m = function(L_var){return function(L_monad){return L_cont()(L_false)((function(){var $m; return function(){return $m || ($m = function(L_rest){return L_inLet()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "."}))}})())(L_id)((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "bind"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_monad)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_var)((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "."})(L_rest))}})()))}})()))}})())(L_nil))}})()))}})()))}})())})}})())}})}})();
return L_isCons()(L_steppingClause)((function(){var $m; return function(){return $m || ($m = L_steppingClause()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_isTokenString()(L_h)(function(){return "="})((function(){var $m; return function(){return $m || ($m = L_inLet()((function(){var $m; return function(){return $m || ($m = L_cont()(L_true)((function(){var $m; return function(){return $m || ($m = function(L_rest){return L_cons()(L_clause)(L_rest)})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cont()(L_true)((function(){var $m; return function(){return $m || ($m = function(L_rest){return L_cons()(function(){return "\\\\"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_clause)(L_rest))}})())})}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_h)(function(){return "<-"})((function(){var $m; return function(){return $m || ($m = L_isNil()(L_t)((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "No monad in do-clause: "})(L_clause))}})())((function(){var $m; return function(){return $m || ($m = L_prefix()((function(){var $m; return function(){return $m || ($m = function(L_ph){return function(L_pt){return function(L_D){return L_isNil()(L_pt)((function(){var $m; return function(){return $m || ($m = L_makeBind()((function(){var $m; return function(){return $m || ($m = L_isNil()(L_prefix)(function(){return "_"})((function(){var $m; return function(){return $m || ($m = L_head()(L_prefix))}})()))}})())(L_t))}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "More than one variable in do-clause: "})(L_clause))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_makeBind()(function(){return "_"})(L_t))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_doClause()(L_t)(L_clause)((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)(L_prefix))}})())(L_inLet)(L_cont))}})()))}})())}})}})()))}})())((function(){var $m; return function(){return $m || ($m = L_makeBind()(function(){return "_"})(L_clause))}})())})()}}}}})}})())},
  function(){return L_defTokenPack()(function(){return "do"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "<-"})(L_nil))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_nil)((function(){var $m; return function(){return $m || ($m = L_cons()(L_nil)(L_nil))}})()))}})()))}})())},
  function(){return L_addStdTokenPacks()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "list"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "infix"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "do"})(L_nil))}})()))}})()))}})())},
  function(){return L_resetStdTokenPacks()}]);

},{}],6:[function(require,module,exports){
(function(global){/*!
 Lo-Dash 0.7.0 lodash.com/license
 Underscore.js 1.3.3 github.com/documentcloud/underscore/blob/master/LICENSE
*/
;(function(e,t){function s(e){return new o(e)}function o(e){if(e&&e.__wrapped__)return e;this.__wrapped__=e}function u(e,t){return function(n,r,i){return e.call(t,n,r,i)}}function a(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||W),s=i?{}:e;if(i)for(var o=t-1;++o<r;)n=e[o]+"",(at.call(s,n)?s[n]:s[n]=[]).push(e[o]);return function(e){if(i){var n=e+"";return at.call(s,n)&&-1<L(s[n],e)}return-1<L(s,e,t)}}function f(e,n){var r=e.b,i=n.b,e=e.a,n=n.a;if(e!==n){if(e>n||e===t)return 1;if(e<n||n===t)return-1}return r<
i?-1:1}function l(e,t,n){function r(){var u=arguments,a=s?this:t;return i||(e=t[o]),n.length&&(u=u.length?n.concat(ct.call(u)):n),this instanceof r?(v.prototype=e.prototype,a=new v,(u=e.apply(a,u))&&$t[typeof u]?u:a):e.apply(a,u)}var i=E(e),s=!n,o=e;return s&&(n=t),r}function c(){for(var e,t,n,s=-1,o=arguments.length,a={e:"",f:"",j:"",q:"",c:{d:""},m:{d:""}};++s<o;)for(t in e=arguments[s],e)n=(n=e[t])==r?"":n,/d|i/.test(t)?("string"==typeof n&&(n={b:n,l:n}),a.c[t]=n.b||"",a.m[t]=n.l||""):a[t]=n;e=
a.a,t=/^[^,]+/.exec(e)[0],n=a.s,a.g=t,a.h=Mt,a.k=Rt,a.n=Pt,a.p=rt,a.r=a.r!==i,a.s=n==r?Ut:n,a.o==r&&(a.o=jt),a.f||(a.f="if(!"+t+")return u");if("e"!=t||!a.c.i)a.c=r;t="",a.s&&(t+="'use strict';"),t+="var j,A,k="+a.g+",u",a.j&&(t+="="+a.j),t+=";"+a.f+";"+a.q+";",a.c&&(t+="var l=k.length;j=-1;",a.m&&(t+="if(l===+l){"),a.o&&(t+="if(z.call(k)==x){k=k.split('')}"),t+=a.c.d+";while(++j<l){A=k[j];"+a.c.i+"}",a.m&&(t+="}"));if(a.m){a.c?t+="else{":a.n&&(t+="var l=k.length;j=-1;if(l&&O(k)){while(++j<l){A=k[j+=''];"+
a.m.i+"}}else{"),a.h||(t+="var v=typeof k=='function'&&r.call(k,'prototype');");if(a.k&&a.r)t+="var o=-1,p=X[typeof k]?m(k):[],l=p.length;"+a.m.d+";while(++o<l){j=p[o];",a.h||(t+="if(!(v&&j=='prototype')){"),t+="A=k[j];"+a.m.i+"",a.h||(t+="}");else{t+=a.m.d+";for(j in k){";if(!a.h||a.r)t+="if(",a.h||(t+="!(v&&j=='prototype')"),!a.h&&a.r&&(t+="&&"),a.r&&(t+="h.call(k,j)"),t+="){";t+="A=k[j];"+a.m.i+";";if(!a.h||a.r)t+="}"}t+="}";if(a.h){t+="var g=k.constructor;";for(n=0;7>n;n++)t+="j='"+a.p[n]+"';if("
,"constructor"==a.p[n]&&(t+="!(g&&g.prototype===k)&&"),t+="h.call(k,j)){A=k[j];"+a.m.i+"}"}if(a.c||a.n)t+="}"}return t+=a.e+";return u",Function("D,E,F,c,I,f,J,h,i,M,O,Q,S,T,W,X,m,r,w,x,z","var G=function("+e+"){"+t+"};return G")(zt,R,D,u,f,ut,ln,at,P,L,w,sn,E,on,Ct,$t,gt,lt,ct,Lt,ht)}function h(e,t){return ot[t]}function p(e){return"\\"+Jt[e]}function d(e){return Xt[e]}function v(){}function m(e,t){if(e&&V.test(t))return"<e%-"+t+"%>";var n=ot.length;return ot[n]="'+__e("+t+")+'",it+n+st}function g
(e,t,n,i){return i?(e=ot.length,ot[e]="';"+i+";__p+='",it+e+st):t?m(r,t):y(r,n)}function y(e,t){if(e&&V.test(t))return"<e%="+t+"%>";var n=ot.length;return ot[n]="'+((__t=("+t+"))==null?'':__t)+'",it+n+st}function b(e){return Vt[e]}function w(e){return ht.call(e)==Et}function E(e){return"function"==typeof e}function S(e,t){var n=i;if(!e||"object"!=typeof e||!t&&w(e))return n;var r=e.constructor;return(!Ft||"function"==typeof e.toString||"string"!=typeof (e+""))&&(!E(r)||r instanceof r)?Dt?(ln(e,function(
e,t,r){return n=!at.call(r,t),i}),n===i):(ln(e,function(e,t){n=t}),n===i||at.call(e,n)):n}function x(e,t,s,o,u){if(e==r)return e;s&&(t=i);if(s=$t[typeof e]){var a=ht.call(e);if(!Wt[a]||Ht&&w(e))return e;var f=a==St,s=f||(a==Ct?on(e,n):s)}if(!s||!t)return s?f?ct.call(e):fn({},e):e;s=e.constructor;switch(a){case xt:return new s(e==n);case Tt:return new s(+e);case Nt:case Lt:return new s(e);case kt:return s(e.source,G.exec(e))}o||(o=[]),u||(u=[]);for(a=o.length;a--;)if(o[a]==e)return u[a];var l=f?s(
a=e.length):{};o.push(e),u.push(l);if(f)for(f=-1;++f<a;)l[f]=x(e[f],t,r,o,u);else cn(e,function(e,n){l[n]=x(e,t,r,o,u)});return l}function T(e,t,s,o){if(e==r||t==r)return e===t;if(e===t)return 0!==e||1/e==1/t;if($t[typeof e]||$t[typeof t])e=e.__wrapped__||e,t=t.__wrapped__||t;var u=ht.call(e);if(u!=ht.call(t))return i;switch(u){case xt:case Tt:return+e==+t;case Nt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case kt:case Lt:return e==t+""}var a=zt[u];if(Ht&&!a&&(a=w(e))&&!w(t)||!a&&(u!=Ct||Ft&&("function"!=typeof 
e.toString&&"string"==typeof (e+"")||"function"!=typeof t.toString&&"string"==typeof (t+""))))return i;s||(s=[]),o||(o=[]);for(u=s.length;u--;)if(s[u]==e)return o[u]==t;var u=-1,f=n,l=0;s.push(e),o.push(t);if(a){l=e.length;if(f=l==t.length)for(;l--&&(f=T(e[l],t[l],s,o)););return f}a=e.constructor,f=t.constructor;if(a!=f&&(!E(a)||!(a instanceof a&&E(f)&&f instanceof f)))return i;for(var c in e)if(at.call(e,c)&&(l++,!at.call(t,c)||!T(e[c],t[c],s,o)))return i;for(c in t)if(at.call(t,c)&&!(l--))return i
;if(Mt)for(;7>++u;)if(c=rt[u],at.call(e,c)&&(!at.call(t,c)||!T(e[c],t[c],s,o)))return i;return n}function N(e,t,n,r){if(!e)return n;var i=e.length,s=3>arguments.length;r&&(t=u(t,r));if(i===+i){var o=jt&&ht.call(e)==Lt?e.split(""):e;for(i&&s&&(n=o[--i]);i--;)n=t(n,o[i],i,e);return n}o=vn(e);for((i=o.length)&&s&&(n=e[o[--i]]);i--;)s=o[i],n=t(n,e[s],s,e);return n}function C(e,t,n){if(e)return t==r||n?e[0]:ct.call(e,0,t)}function k(e,t){var n=[];if(!e)return n;for(var r,i=-1,s=e.length;++i<s;)r=e[i],
sn(r)?ft.apply(n,t?r:k(r)):n.push(r);return n}function L(e,t,n){if(!e)return-1;var r=-1,i=e.length;if(n){if("number"!=typeof n)return r=M(e,t),e[r]===t?r:-1;r=(0>n?yt(0,i+n):n)-1}for(;++r<i;)if(e[r]===t)return r;return-1}function A(e,t,n){var r=-Infinity,i=r;if(!e)return i;var s=-1,o=e.length;if(!t){for(;++s<o;)e[s]>i&&(i=e[s]);return i}for(n&&(t=u(t,n));++s<o;)n=t(e[s],s,e),n>r&&(r=n,i=e[s]);return i}function O(e,t,n){return e?ct.call(e,t==r||n?1:t):[]}function M(e,t,n,r){if(!e)return 0;var i=0,
s=e.length;if(n){r&&(n=D(n,r));for(t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=r+1:s=r}else for(;i<s;)r=i+s>>>1,e[r]<t?i=r+1:s=r;return i}function _(e,t,n,r){var s=[];if(!e)return s;var o=-1,a=e.length,f=[];"function"==typeof t&&(r=n,n=t,t=i);for(n?r&&(n=u(n,r)):n=P;++o<a;)if(r=n(e[o],o,e),t?!o||f[f.length-1]!==r:0>L(f,r))f.push(r),s.push(e[o]);return s}function D(e,t){return qt||pt&&2<arguments.length?pt.call.apply(pt,arguments):l(e,t,ct.call(arguments,2))}function P(e){return e}function H(e){Cn(hn(e),function(
t){var r=s[t]=e[t];o.prototype[t]=function(){var e=[this.__wrapped__];return arguments.length&&ft.apply(e,arguments),e=r.apply(s,e),this.__chain__&&(e=new o(e),e.__chain__=n),e}})}var n=!0,r=null,i=!1,B,j,F,I,q="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(e=global),exports),R=Array.prototype,U=Object.prototype,z=0,W=30,X=e._,V=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,$=/&(?:amp|lt|gt|quot|#x27);/g,J=/\b__p\+='';/g,K=/\b(__p\+=)''\+/g
,Q=/(__e\(.*?\)|\b__t\))\+'';/g,G=/\w*$/,Y=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g,Z=RegExp("^"+(U.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),et=/__token(\d+)__/g,tt=/[&<>"']/g,nt=/['\n\r\t\u2028\u2029\\]/g,rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),it="__token",st="__",ot=[],ut=R.concat,at=U.hasOwnProperty,ft=R.push,lt=U.propertyIsEnumerable,ct=R.slice,ht=U.toString,pt=Z.test(
pt=ct.bind)&&pt,dt=Math.floor,vt=Z.test(vt=Array.isArray)&&vt,mt=e.isFinite,gt=Z.test(gt=Object.keys)&&gt,yt=Math.max,bt=Math.min,wt=Math.random,Et="[object Arguments]",St="[object Array]",xt="[object Boolean]",Tt="[object Date]",Nt="[object Number]",Ct="[object Object]",kt="[object RegExp]",Lt="[object String]",At=e.clearTimeout,Ot=e.setTimeout,Mt,_t,Dt,Pt=n;(function(){function e(){this.x=1}var t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments)Pt=!r;Mt=4>
(n+"").length,Dt="x"!=n[0],_t=(n.splice.call(t,0,1),t[0])})(1);var Ht=!w(arguments),Bt="x"!=ct.call("x")[0],jt="xx"!="x"[0]+Object("x")[0];try{var Ft=("[object Object]",ht.call(e.document||0)==Ct)}catch(It){}var qt=pt&&/\n|Opera/.test(pt+ht.call(e.opera)),Rt=gt&&/^.+$|true/.test(gt+!!e.attachEvent),Ut=!qt,zt={};zt[xt]=zt[Tt]=zt["[object Function]"]=zt[Nt]=zt[Ct]=zt[kt]=i,zt[Et]=zt[St]=zt[Lt]=n;var Wt={};Wt[Et]=Wt["[object Function]"]=i,Wt[St]=Wt[xt]=Wt[Tt]=Wt[Nt]=Wt[Ct]=Wt[kt]=Wt[Lt]=n;var Xt={"&"
:"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Vt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},$t={"boolean":i,"function":n,object:n,number:i,string:i,"undefined":i,unknown:n},Jt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};s.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Kt={a:"e,d,y",j:"e",q:"if(!d)d=i;else if(y)d=c(d,y)",i:"if(d(A,j,e)===false)return u"},Qt={j:"{}"
,q:"var q;if(typeof d!='function'){var hh=d;d=function(A){return A[hh]}}else if(y)d=c(d,y)",i:"q=d(A,j,e);(h.call(u,q)?u[q]++:u[q]=1)"},Gt={j:"true",i:"if(!d(A,j,e))return!u"},Yt={r:i,s:i,a:"n",j:"n",q:"for(var a=1,b=arguments.length;a<b;a++){if(k=arguments[a]){",i:"u[j]=A",e:"}}"},Zt={j:"[]",i:"d(A,j,e)&&u.push(A)"},en={q:"if(y)d=c(d,y)"},tn={i:{l:Kt.i}},nn={j:"",f:"if(!e)return[]",d:{b:"u=Array(l)",l:"u="+(Rt?"Array(l)":"[]")},i:{b:"u[j]=d(A,j,e)",l:"u"+(Rt?"[o]=":".push")+"(d(A,j,e))"}},rn={r:
i,a:"n,d,y",j:"{}",q:"var R=typeof d=='function';if(!R){var t=f.apply(E,arguments)}else if(y)d=c(d,y)",i:"if(R?!d(A,j,n):M(t,j)<0)u[j]=A"};Ht&&(w=function(e){return!!e&&!!at.call(e,"callee")});var sn=vt||function(e){return ht.call(e)==St};E(/x/)&&(E=function(e){return"[object Function]"==ht.call(e)});var on=$t.__proto__!=U?S:function(e,t){if(!e)return i;var n=e.valueOf,r="function"==typeof n&&(r=n.__proto__)&&r.__proto__;return r?e==r||e.__proto__==r&&(t||!w(e)):S(e)},un=c({a:"n",j:"[]",i:"u.push(j)"
}),an=c(Yt,{i:"if(u[j]==null)"+Yt.i}),fn=c(Yt),ln=c(Kt,en,tn,{r:i}),cn=c(Kt,en,tn),hn=c({r:i,a:"n",j:"[]",i:"if(S(A))u.push(j)",e:"u.sort()"}),pn=c({a:"n",j:"{}",i:"u[A]=j"}),dn=c({a:"A",j:"true",q:"var H=z.call(A),l=A.length;if(D[H]"+(Ht?"||O(A)":"")+"||(H==W&&l===+l&&S(A.splice)))return!l",i:{l:"return false"}}),vn=gt?function(e){var t=typeof e;return"function"==t&&lt.call(e,"prototype")?un(e):e&&$t[t]?gt(e):[]}:un,mn=c(Yt,{a:"n,cc,N",q:"var b,P,dd,ee,C=arguments,a=0;if(N==T){b=2;dd=C[3];ee=C[4]}else{b=C.length;dd=[];ee=[]}while(++a<b){if(k=C[a]){"
,i:"if((cc=A)&&((P=Q(cc))||T(cc))){var K=false,ff=dd.length;while(ff--)if(K=dd[ff]==cc)break;if(K){u[j]=ee[ff]}else{dd.push(cc);ee.push(A=(A=u[j])&&P?(Q(A)?A:[]):(T(A)?A:{}));u[j]=G(A,cc,T,dd,ee)}}else if(cc!=null)u[j]=cc"}),gn=c(rn),yn=c({a:"n",j:"[]",i:"u"+(Rt?"[o]=":".push")+"([j,A])"}),bn=c(rn,{q:"if(typeof d!='function'){var q,t=f.apply(E,arguments),l=t.length;for(j=1;j<l;j++){q=t[j];if(q in n)u[q]=n[q]}}else{if(y)d=c(d,y)",i:"if(d(A,j,n))u[j]=A",e:"}"}),wn=c({a:"n",j:"[]",i:"u.push(A)"}),En=
c({a:"e,gg",j:"false",o:i,d:{b:"if(z.call(e)==x)return e.indexOf(gg)>-1"},i:"if(A===gg)return true"}),Sn=c(Kt,Qt),xn=c(Kt,Gt),Tn=c(Kt,Zt),Nn=c(Kt,en,{j:"",i:"if(d(A,j,e))return A"}),Cn=c(Kt,en),kn=c(Kt,Qt,{i:"q=d(A,j,e);(h.call(u,q)?u[q]:u[q]=[]).push(A)"}),Ln=c(nn,{a:"e,U",q:"var C=w.call(arguments,2),R=typeof U=='function'",i:{b:"u[j]=(R?U:A[U]).apply(A,C)",l:"u"+(Rt?"[o]=":".push")+"((R?U:A[U]).apply(A,C))"}}),An=c(Kt,nn),On=c(nn,{a:"e,aa",i:{b:"u[j]=A[aa]",l:"u"+(Rt?"[o]=":".push")+"(A[aa])"}
}),Mn=c({a:"e,d,B,y",j:"B",q:"var V=arguments.length<3;if(y)d=c(d,y)",d:{b:"if(V)u=k[++j]"},i:{b:"u=d(u,A,j,e)",l:"u=V?(V=false,A):d(u,A,j,e)"}}),_n=c(Kt,Zt,{i:"!"+Zt.i}),Dn=c(Kt,Gt,{j:"false",i:Gt.i.replace("!","")}),Pn=c(Kt,Qt,nn,{i:{b:"u[j]={a:d(A,j,e),b:j,c:A}",l:"u"+(Rt?"[o]=":".push")+"({a:d(A,j,e),b:j,c:A})"},e:"u.sort(I);l=u.length;while(l--)u[l]=u[l].c"}),Hn=c(Zt,{a:"e,Z",q:"var t=[];J(Z,function(A,q){t.push(q)});var bb=t.length",i:"for(var q,Y=true,s=0;s<bb;s++){q=t[s];if(!(Y=A[q]===Z[q]))break}Y&&u.push(A)"
}),Bn=c({r:i,s:i,a:"n",j:"n",q:"var L=arguments,l=L.length;if(l>1){for(var j=1;j<l;j++)u[L[j]]=F(u[L[j]],u);return u}",i:"if(S(u[j]))u[j]=F(u[j],u)"});s.VERSION="0.7.0",s.after=function(e,t){return 1>e?t():function(){if(1>--e)return t.apply(this,arguments)}},s.bind=D,s.bindAll=Bn,s.chain=function(e){return e=new o(e),e.__chain__=n,e},s.clone=x,s.compact=function(e){var t=[];if(!e)return t;for(var n=-1,r=e.length;++n<r;)e[n]&&t.push(e[n]);return t},s.compose=function(){var e=arguments;return function(
){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},s.contains=En,s.countBy=Sn,s.debounce=function(e,t,n){function i(){a=r,n||(o=e.apply(u,s))}var s,o,u,a;return function(){var r=n&&!a;return s=arguments,u=this,At(a),a=Ot(i,t),r&&(o=e.apply(u,s)),o}},s.defaults=an,s.defer=function(e){var n=ct.call(arguments,1);return Ot(function(){return e.apply(t,n)},1)},s.delay=function(e,n){var r=ct.call(arguments,2);return Ot(function(){return e.apply(t,r)},n)},s.difference=function(e){
var t=[];if(!e)return t;for(var n=-1,r=e.length,i=ut.apply(t,arguments),i=a(i,r);++n<r;)i(e[n])||t.push(e[n]);return t},s.escape=function(e){return e==r?"":(e+"").replace(tt,d)},s.every=xn,s.extend=fn,s.filter=Tn,s.find=Nn,s.first=C,s.flatten=k,s.forEach=Cn,s.forIn=ln,s.forOwn=cn,s.functions=hn,s.groupBy=kn,s.has=function(e,t){return e?at.call(e,t):i},s.identity=P,s.indexOf=L,s.initial=function(e,t,n){return e?ct.call(e,0,-(t==r||n?1:t)):[]},s.intersection=function(e){var t=[];if(!e)return t;var n
,r=arguments.length,i=[],s=-1,o=e.length;e:for(;++s<o;)if(n=e[s],0>L(t,n)){for(var u=1;u<r;u++)if(!(i[u]||(i[u]=a(arguments[u])))(n))continue e;t.push(n)}return t},s.invert=pn,s.invoke=Ln,s.isArguments=w,s.isArray=sn,s.isBoolean=function(e){return e===n||e===i||ht.call(e)==xt},s.isElement=function(e){return e?1===e.nodeType:i},s.isEmpty=dn,s.isEqual=T,s.isFinite=function(e){return mt(e)&&ht.call(e)==Nt},s.isFunction=E,s.isNaN=function(e){return ht.call(e)==Nt&&e!=+e},s.isNull=function(e){return e===
r},s.isObject=function(e){return e?$t[typeof e]:i},s.isUndefined=function(e){return e===t},s.keys=vn,s.last=function(e,t,n){if(e){var i=e.length;return t==r||n?e[i-1]:ct.call(e,-t||i)}},s.lastIndexOf=function(e,t,n){if(!e)return-1;var r=e.length;for(n&&"number"==typeof n&&(r=(0>n?yt(0,r+n):bt(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},s.lateBind=function(e,t){return l(t,e,ct.call(arguments,2))},s.map=An,s.max=A,s.memoize=function(e,t){var n={};return function(){var r=t?t.apply(this,arguments)
:arguments[0];return at.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},s.merge=mn,s.min=function(e,t,n){var r=Infinity,i=r;if(!e)return i;var s=-1,o=e.length;if(!t){for(;++s<o;)e[s]<i&&(i=e[s]);return i}for(n&&(t=u(t,n));++s<o;)n=t(e[s],s,e),n<r&&(r=n,i=e[s]);return i},s.mixin=H,s.noConflict=function(){return e._=X,this},s.object=function(e,t){if(!e)return{};for(var n=-1,r=e.length,i={};++n<r;)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},s.omit=gn,s.once=function(e){var t,s=i;return function(){return s?
t:(s=n,t=e.apply(this,arguments),e=r,t)}},s.pairs=yn,s.partial=function(e){return l(e,ct.call(arguments,1))},s.pick=bn,s.pluck=On,s.random=function(e,t){return e==r&&t==r?wt():(e=+e||0,t==r&&(t=e,e=0),e+dt(wt()*((+t||0)-e+1)))},s.range=function(e,t,n){e=+e||0,n=+n||1,t==r&&(t=e,e=0);for(var i=-1,t=yt(0,Math.ceil((t-e)/n)),s=Array(t);++i<t;)s[i]=e,e+=n;return s},s.reduce=Mn,s.reduceRight=N,s.reject=_n,s.rest=O,s.result=function(e,t){if(!e)return r;var n=e[t];return E(n)?e[t]():n},s.shuffle=function(
e){if(!e)return[];for(var t,n=-1,r=e.length,i=Array(r);++n<r;)t=dt(wt()*(n+1)),i[n]=i[t],i[t]=e[n];return i},s.size=function(e){if(!e)return 0;var t=e.length;return t===+t?t:vn(e).length},s.some=Dn,s.sortBy=Pn,s.sortedIndex=M,s.tap=function(e,t){return t(e),e},s.template=function(e,t,n){n||(n={});var e=e+"",o,u;o=n.escape;var a=n.evaluate,f=n.interpolate,l=s.templateSettings,c=n=n.variable||l.variable;o==r&&(o=l.escape),a==r&&(a=l.evaluate||i),f==r&&(f=l.interpolate),o&&(e=e.replace(o,m)),f&&(e=e
.replace(f,y)),a!=B&&(B=a,I=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(a?"|"+a.source:""),"g")),o=ot.length,e=e.replace(I,g),o=o!=ot.length,e="__p += '"+e.replace(nt,p).replace(et,h)+"';",ot.length=0,c||(n=j||"obj",o?e="with("+n+"){"+e+"}":(n!=j&&(j=n,F=RegExp("(\\(\\s*)"+n+"\\."+n+"\\b","g")),e=e.replace(Y,"$&"+n+".").replace(F,"$1__d"))),e=(o?e.replace(J,""):e).replace(K,"$1").replace(Q,"$1;"),e="function("+n+"){"+(c?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}"
:(c?"":",__d="+n+"."+n+"||"+n)+";")+e+"return __p}";try{u=Function("_","return "+e)(s)}catch(d){throw d.source=e,d}return t?u(t):(u.source=e,u)},s.throttle=function(e,t){function n(){a=new Date,u=r,s=e.apply(o,i)}var i,s,o,u,a=0;return function(){var r=new Date,f=t-(r-a);return i=arguments,o=this,0>=f?(a=r,s=e.apply(o,i)):u||(u=Ot(n,f)),s}},s.times=function(e,t,n){var r=-1;if(n)for(;++r<e;)t.call(n,r);else for(;++r<e;)t(r)},s.toArray=function(e){if(!e)return[];var t=e.length;return t===+t?(Bt?ht.
call(e)==Lt:"string"==typeof e)?e.split(""):ct.call(e):wn(e)},s.unescape=function(e){return e==r?"":(e+"").replace($,b)},s.union=function(){for(var e=-1,t=[],n=ut.apply(t,arguments),r=n.length;++e<r;)0>L(t,n[e])&&t.push(n[e]);return t},s.uniq=_,s.uniqueId=function(e){var t=z++;return e?e+t:t},s.values=wn,s.where=Hn,s.without=function(e){var t=[];if(!e)return t;for(var n=-1,r=e.length,i=a(arguments,1,20);++n<r;)i(e[n])||t.push(e[n]);return t},s.wrap=function(e,t){return function(){var n=[e];return arguments
.length&&ft.apply(n,arguments),t.apply(this,n)}},s.zip=function(e){if(!e)return[];for(var t=-1,n=A(On(arguments,"length")),r=Array(n);++t<n;)r[t]=On(arguments,t);return r},s.all=xn,s.any=Dn,s.collect=An,s.detect=Nn,s.drop=O,s.each=Cn,s.foldl=Mn,s.foldr=N,s.head=C,s.include=En,s.inject=Mn,s.methods=hn,s.select=Tn,s.tail=O,s.take=C,s.unique=_,Cn({Date:Tt,Number:Nt,RegExp:kt,String:Lt},function(e,t){s["is"+t]=function(t){return ht.call(t)==e}}),o.prototype=s.prototype,H(s),o.prototype.chain=function(
){return this.__chain__=n,this},o.prototype.value=function(){return this.__wrapped__},Cn("pop push reverse shift sort splice unshift".split(" "),function(e){var t=R[e];o.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),_t&&e.length===0&&delete e[0],this.__chain__&&(e=new o(e),e.__chain__=n),e}}),Cn(["concat","join","slice"],function(e){var t=R[e];o.prototype[e]=function(){var e=t.apply(this.__wrapped__,arguments);return this.__chain__&&(e=new o(e),e.__chain__=n),e}}),typeof 
define=="function"&&typeof define.amd=="object"&&define.amd?(e._=s,define(function(){return s})):q?"object"==typeof module&&module&&module.exports==q?(module.exports=s)._=s:q._=s:e._=s})(this);
})(self)
},{}],7:[function(require,module,exports){
(function(global){/**
 * marked - A markdown parser (https://github.com/chjj/marked)
 * Copyright (c) 2011-2012, Christopher Jeffrey. (MIT Licensed)
 */

;(function() {

/**
 * Block-Level Grammar
 */

var block = {
  newline: /^\n+/,
  code: /^( {4}[^\n]+\n*)+/,
  fences: noop,
  hr: /^( *[-*_]){3,} *(?:\n+|$)/,
  heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,
  lheading: /^([^\n]+)\n *(=|-){3,} *\n*/,
  blockquote: /^( *>[^\n]+(\n[^\n]+)*\n*)+/,
  list: /^( *)(bull) [^\0]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
  html: /^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,
  def: /^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,
  paragraph: /^([^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+\n*/,
  text: /^[^\n]+/
};

block.bullet = /(?:[*+-]|\d+\.)/;
block.item = /^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;
block.item = replace(block.item, 'gm')
  (/bull/g, block.bullet)
  ();

block.list = replace(block.list)
  (/bull/g, block.bullet)
  ('hr', /\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)
  ();

block.html = replace(block.html)
  ('comment', /<!--[^\0]*?-->/)
  ('closed', /<(tag)[^\0]+?<\/\1>/)
  ('closing', /<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)
  (/tag/g, tag())
  ();

block.paragraph = replace(block.paragraph)
  ('hr', block.hr)
  ('heading', block.heading)
  ('lheading', block.lheading)
  ('blockquote', block.blockquote)
  ('tag', '<' + tag())
  ('def', block.def)
  ();

block.normal = {
  fences: block.fences,
  paragraph: block.paragraph
};

block.gfm = {
  fences: /^ *(```|~~~) *(\w+)? *\n([^\0]+?)\s*\1 *(?:\n+|$)/,
  paragraph: /^/
};

block.gfm.paragraph = replace(block.paragraph)
  ('(?!', '(?!' + block.gfm.fences.source.replace('\\1', '\\2') + '|')
  ();

/**
 * Block Lexer
 */

block.lexer = function(src) {
  var tokens = [];

  tokens.links = {};

  src = src
    .replace(/\r\n|\r/g, '\n')
    .replace(/\t/g, '    ');

  return block.token(src, tokens, true);
};

block.token = function(src, tokens, top) {
  var src = src.replace(/^ +$/gm, '')
    , next
    , loose
    , cap
    , item
    , space
    , i
    , l
    , start;

  while (src) {
    start = src.length;
    // newline
    if (cap = block.newline.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[0].length > 1) {
        tokens.push({
          type: 'space'
        });
      }
    }

    // code
    if (cap = block.code.exec(src)) {
      src = src.substring(cap[0].length);
      cap = cap[0].replace(/^ {4}/gm, '');
      tokens.push({
        type: 'code',
        text: !options.pedantic
          ? cap.replace(/\n+$/, '')
          : cap,
        textLen: start - src.length,
        remain: src.length
      });
      continue;
    }

    // fences (gfm)
    if (cap = block.fences.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'code',
        lang: cap[2],
        text: cap[3],
        textLen: start - src.length,
        remain: src.length
      });
      continue;
    }

    // heading
    if (cap = block.heading.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'heading',
        depth: cap[1].length,
        text: cap[2]
      });
      continue;
    }

    // lheading
    if (cap = block.lheading.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'heading',
        depth: cap[2] === '=' ? 1 : 2,
        text: cap[1]
      });
      continue;
    }

    // hr
    if (cap = block.hr.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'hr'
      });
      continue;
    }

    // blockquote
    if (cap = block.blockquote.exec(src)) {
      src = src.substring(cap[0].length);

      tokens.push({
        type: 'blockquote_start'
      });

      cap = cap[0].replace(/^ *> ?/gm, '');

      // Pass `top` to keep the current
      // "toplevel" state. This is exactly
      // how markdown.pl works.
      block.token(cap, tokens, top);

      tokens.push({
        type: 'blockquote_end'
      });

      continue;
    }

    // list
    if (cap = block.list.exec(src)) {
      src = src.substring(cap[0].length);

      tokens.push({
        type: 'list_start',
        ordered: isFinite(cap[2])
      });

      // Get each top-level item.
      cap = cap[0].match(block.item);

      next = false;
      l = cap.length;
      i = 0;

      for (; i < l; i++) {
        item = cap[i];

        // Remove the list item's bullet
        // so it is seen as the next token.
        space = item.length;
        item = item.replace(/^ *([*+-]|\d+\.) +/, '');

        // Outdent whatever the
        // list item contains. Hacky.
        if (~item.indexOf('\n ')) {
          space -= item.length;
          item = !options.pedantic
            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')
            : item.replace(/^ {1,4}/gm, '');
        }

        // Determine whether item is loose or not.
        // Use: /(^|\n)(?! )[^\n]+\n\n(?!\s*$)/
        // for discount behavior.
        loose = next || /\n\n(?!\s*$)/.test(item);
        if (i !== l - 1) {
          next = item[item.length-1] === '\n';
          if (!loose) loose = next;
        }

        tokens.push({
          type: loose
            ? 'loose_item_start'
            : 'list_item_start'
        });

        // Recurse.
        block.token(item, tokens);

        tokens.push({
          type: 'list_item_end'
        });
      }

      tokens.push({
        type: 'list_end'
      });

      continue;
    }

    // html
    if (cap = block.html.exec(src)) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: options.sanitize
          ? 'paragraph'
          : 'html',
        pre: cap[1] === 'pre',
        text: cap[0]
      });
      continue;
    }

    // def
    if (top && (cap = block.def.exec(src))) {
      src = src.substring(cap[0].length);
      tokens.links[cap[1].toLowerCase()] = {
        href: cap[2],
        title: cap[3]
      };
      continue;
    }

    // top-level paragraph
    if (top && (cap = block.paragraph.exec(src))) {
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'paragraph',
        text: cap[0]
      });
      continue;
    }

    // text
    if (cap = block.text.exec(src)) {
      // Top-level should never reach here.
      src = src.substring(cap[0].length);
      tokens.push({
        type: 'text',
        text: cap[0]
      });
      continue;
    }
  }

  return tokens;
};

/**
 * Inline Processing
 */

var inline = {
  escape: /^\\([\\`*{}\[\]()#+\-.!_>])/,
  autolink: /^<([^ >]+(@|:\/)[^ >]+)>/,
  url: noop,
  tag: /^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,
  link: /^!?\[(inside)\]\(href\)/,
  reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/,
  nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,
  strong: /^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,
  em: /^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,
  code: /^(`+)([^\0]*?[^`])\1(?!`)/,
  br: /^ {2,}\n(?!\s*$)/,
  text: /^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/
};

inline._linkInside = /(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/;
inline._linkHref = /\s*<?([^\s]*?)>?(?:\s+['"]([^\0]*?)['"])?\s*/;

inline.link = replace(inline.link)
  ('inside', inline._linkInside)
  ('href', inline._linkHref)
  ();

inline.reflink = replace(inline.reflink)
  ('inside', inline._linkInside)
  ();

inline.normal = {
  url: inline.url,
  strong: inline.strong,
  em: inline.em,
  text: inline.text
};

inline.pedantic = {
  strong: /^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,
  em: /^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/
};

inline.gfm = {
  url: /^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,
  text: /^[^\0]+?(?=[\\<!\[_*`]|https?:\/\/| {2,}\n|$)/
};

/**
 * Inline Lexer
 */

inline.lexer = function(src) {
  var out = ''
    , links = tokens.links
    , link
    , text
    , href
    , cap;

  while (src) {
    // escape
    if (cap = inline.escape.exec(src)) {
      src = src.substring(cap[0].length);
      out += cap[1];
      continue;
    }

    // autolink
    if (cap = inline.autolink.exec(src)) {
      src = src.substring(cap[0].length);
      if (cap[2] === '@') {
        text = cap[1][6] === ':'
          ? mangle(cap[1].substring(7))
          : mangle(cap[1]);
        href = mangle('mailto:') + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      out += '<a href="'
        + href
        + '">'
        + text
        + '</a>';
      continue;
    }

    // url (gfm)
    if (cap = inline.url.exec(src)) {
      src = src.substring(cap[0].length);
      text = escape(cap[1]);
      href = text;
      out += '<a href="'
        + href
        + '">'
        + text
        + '</a>';
      continue;
    }

    // tag
    if (cap = inline.tag.exec(src)) {
      src = src.substring(cap[0].length);
      out += options.sanitize
        ? escape(cap[0])
        : cap[0];
      continue;
    }

    // link
    if (cap = inline.link.exec(src)) {
      src = src.substring(cap[0].length);
      out += outputLink(cap, {
        href: cap[2],
        title: cap[3]
      });
      continue;
    }

    // reflink, nolink
    if ((cap = inline.reflink.exec(src))
        || (cap = inline.nolink.exec(src))) {
      src = src.substring(cap[0].length);
      link = (cap[2] || cap[1]).replace(/\s+/g, ' ');
      link = links[link.toLowerCase()];
      if (!link || !link.href) {
        out += cap[0][0];
        src = cap[0].substring(1) + src;
        continue;
      }
      out += outputLink(cap, link);
      continue;
    }

    // strong
    if (cap = inline.strong.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<strong>'
        + inline.lexer(cap[2] || cap[1])
        + '</strong>';
      continue;
    }

    // em
    if (cap = inline.em.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<em>'
        + inline.lexer(cap[2] || cap[1])
        + '</em>';
      continue;
    }

    // code
    if (cap = inline.code.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<code>'
        + escape(cap[2], true)
        + '</code>';
      continue;
    }

    // br
    if (cap = inline.br.exec(src)) {
      src = src.substring(cap[0].length);
      out += '<br>';
      continue;
    }

    // text
    if (cap = inline.text.exec(src)) {
      src = src.substring(cap[0].length);
      out += escape(cap[0]);
      continue;
    }
  }

  return out;
};

function outputLink(cap, link) {
  if (cap[0][0] !== '!') {
    return '<a href="'
      + escape(link.href)
      + '"'
      + (link.title
      ? ' title="'
      + escape(link.title)
      + '"'
      : '')
      + '>'
      + inline.lexer(cap[1])
      + '</a>';
  } else {
    return '<img src="'
      + escape(link.href)
      + '" alt="'
      + escape(cap[1])
      + '"'
      + (link.title
      ? ' title="'
      + escape(link.title)
      + '"'
      : '')
      + '>';
  }
}

/**
 * Parsing
 */

var tokens
  , token;

function next() {
  return token = tokens.pop();
}

function tok() {
  switch (token.type) {
    case 'space': {
      return '';
    }
    case 'hr': {
      return '<hr>\n';
    }
    case 'heading': {
      return '<h'
        + token.depth
        + '>'
        + inline.lexer(token.text)
        + '</h'
        + token.depth
        + '>\n';
    }
    case 'code': {
      if (options.highlight) {
        token.code = options.highlight(token.text, token.lang);
        if (token.code != null && token.code !== token.text) {
          token.escaped = true;
          token.text = token.code;
        }
      }

      if (!token.escaped) {
        token.text = escape(token.text, true);
      }

      return '<pre><code'
        + (token.lang
        ? ' class="lang-'
        + token.lang
        + '"'
        : '')
        + '>'
        + token.text
        + '</code></pre>\n';
    }
    case 'blockquote_start': {
      var body = '';

      while (next().type !== 'blockquote_end') {
        body += tok();
      }

      return '<blockquote>\n'
        + body
        + '</blockquote>\n';
    }
    case 'list_start': {
      var type = token.ordered ? 'ol' : 'ul'
        , body = '';

      while (next().type !== 'list_end') {
        body += tok();
      }

      return '<'
        + type
        + '>\n'
        + body
        + '</'
        + type
        + '>\n';
    }
    case 'list_item_start': {
      var body = '';

      while (next().type !== 'list_item_end') {
        body += token.type === 'text'
          ? parseText()
          : tok();
      }

      return '<li>'
        + body
        + '</li>\n';
    }
    case 'loose_item_start': {
      var body = '';

      while (next().type !== 'list_item_end') {
        body += tok();
      }

      return '<li>'
        + body
        + '</li>\n';
    }
    case 'html': {
      return !token.pre && !options.pedantic
        ? inline.lexer(token.text)
        : token.text;
    }
    case 'paragraph': {
      return '<p>'
        + inline.lexer(token.text)
        + '</p>\n';
    }
    case 'text': {
      return '<p>'
        + parseText()
        + '</p>\n';
    }
  }
}

function parseText() {
  var body = token.text
    , top;

  while ((top = tokens[tokens.length-1])
         && top.type === 'text') {
    body += '\n' + next().text;
  }

  return inline.lexer(body);
}

function parse(src) {
  tokens = src.reverse();

  var out = '';
  while (next()) {
    out += tok();
  }

  tokens = null;
  token = null;

  return out;
}

/**
 * Helpers
 */

function escape(html, encode) {
  return html
    .replace(!encode ? /&(?!#?\w+;)/g : /&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function mangle(text) {
  var out = ''
    , l = text.length
    , i = 0
    , ch;

  for (; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = 'x' + ch.toString(16);
    }
    out += '&#' + ch + ';';
  }

  return out;
}

function tag() {
  var tag = '(?!(?:'
    + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'
    + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'
    + '|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b';

  return tag;
}

function replace(regex, opt) {
  regex = regex.source;
  opt = opt || '';
  return function self(name, val) {
    if (!name) return new RegExp(regex, opt);
    val = val.source || val;
    val = val.replace(/(^|[^\[])\^/g, '$1');
    regex = regex.replace(name, val);
    return self;
  };
}

function noop() {}
noop.exec = noop;

/**
 * Marked
 */

function marked(src, opt) {
  setOptions(opt);
  if (opt && opt.saveLex) {
    return [parse(block.lexer(src)), block.lexer(src)];
  } else {
    return parse(block.lexer(src));
  }
}

/**
 * Options
 */

var options
  , defaults;

function setOptions(opt) {
  if (!opt) opt = defaults;
  if (options === opt) return;
  options = opt;

  if (options.gfm) {
    block.fences = block.gfm.fences;
    block.paragraph = block.gfm.paragraph;
    inline.text = inline.gfm.text;
    inline.url = inline.gfm.url;
  } else {
    block.fences = block.normal.fences;
    block.paragraph = block.normal.paragraph;
    inline.text = inline.normal.text;
    inline.url = inline.normal.url;
  }

  if (options.pedantic) {
    inline.em = inline.pedantic.em;
    inline.strong = inline.pedantic.strong;
  } else {
    inline.em = inline.normal.em;
    inline.strong = inline.normal.strong;
  }
}

marked.options =
marked.setOptions = function(opt) {
  defaults = opt;
  setOptions(opt);
  return marked;
};

marked.setOptions({
  gfm: true,
  pedantic: false,
  sanitize: false,
  highlight: null
});

/**
 * Expose
 */

marked.parser = function(src, opt) {
  setOptions(opt);
  return parse(src);
};

marked.lexer = function(src, opt) {
  setOptions(opt);
  return block.lexer(src);
};

marked.parse = marked;

if (typeof module !== 'undefined') {
  module.exports = marked;
} else {
  this.marked = marked;
}

}).call(function() {
  return this || (typeof window !== 'undefined' ? window : global);
}());

})(self)
},{}],8:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
(function() {
  var $, DOWN_ARROW, END, ENTER, ESC, HOME, LEFT_ARROW, Notebook, PAGE_DOWN, PAGE_UP, Q, RIGHT_ARROW, UP_ARROW, arrows, bindMarkupDiv, bindSlider, chooseSlide, cleanEmptyNodes, closeWindow, countSlide, createNode, delay, editingEnabled, enableEditing, enableSlideControls, firstSlide, getElementCode, handleInternalSections, hideSlide, insertControls, isLeisureCode, jQuery, lastSlide, makeMarkupDiv, makeSection, makeSlideDiv, markupButtons, markupElement, markupSlideContent, markupSlides, mergeLeisureCode, mergeUp, nextSibling, nextSlide, nthSlide, oldSlide, padSlide, presentLeisureCode, presentSlide, prevSlide, previousSibling, remove, showSlide, slideControls, slideControlsEnabled, slideKeyListener, slideName, slidePat, slides, sliding, textNode, unwrap, unwrapContent, _, _ref,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  jQuery = window.jQuery, $ = window.$, _ = window._;

  _ref = Notebook = require('./notebook'), ENTER = _ref.ENTER, delay = _ref.delay, textNode = _ref.textNode, createNode = _ref.createNode, remove = _ref.remove, unwrap = _ref.unwrap, insertControls = _ref.insertControls, cleanEmptyNodes = _ref.cleanEmptyNodes, isLeisureCode = _ref.isLeisureCode, getElementCode = _ref.getElementCode, previousSibling = _ref.previousSibling, nextSibling = _ref.nextSibling, presentLeisureCode = _ref.presentLeisureCode, mergeLeisureCode = _ref.mergeLeisureCode, closeWindow = _ref.closeWindow, markupButtons = _ref.markupButtons, ESC = _ref.ESC, HOME = _ref.HOME, END = _ref.END, PAGE_UP = _ref.PAGE_UP, PAGE_DOWN = _ref.PAGE_DOWN, LEFT_ARROW = _ref.LEFT_ARROW, RIGHT_ARROW = _ref.RIGHT_ARROW, UP_ARROW = _ref.UP_ARROW, DOWN_ARROW = _ref.DOWN_ARROW, arrows = _ref.arrows;

  Q = 81;

  window.markup = function(md) {
    var maindoc, nodes, _ref1;

    nodes = document.querySelectorAll('[maindoc]');
    if (nodes.length === 0) {
      maindoc = createNode("<div maindoc></div>");
      document.body.insertBefore(maindoc, document.body.firstChild);
      nodes = [maindoc];
    } else {
      maindoc = nodes[0];
    }
    md = ((_ref1 = md != null ? md.replace(/\r\n/mg, '\n') : void 0) != null ? _ref1 : maindoc.innerHTML.replace(/^\s*<!--*/, '').replace(/-->\s*\n*/m, '')).trim();
    document.body.classList.add('hideControls');
    markupSlides(maindoc, md);
    return insertControls(maindoc);
  };

  lastSlide = null;

  if (typeof console !== "undefined" && console !== null) {
    if (typeof console.error === "function") {
      console.error(new Error("REMINDER: Incompatibility: using -webkit-calc").stack);
    }
  }

  slidePat = /^(\*\*\*[^\n]*\n(?:--?\n)?)/m;

  slideName = /^\*\*\*([^\n]*)\n(?:--?\n)?/m;

  sliding = false;

  markupSlides = function(el, md) {
    var div, hasCode, slides;

    hasCode = markupSlideContent(el, md);
    slides = el.querySelectorAll('[leisureSection]');
    if (slides.length <= (el.querySelector('[leisureSection="Leisure Controls"]') ? 2 : 1)) {
      document.body.classList.add("oneSlide");
    }
    div = createNode("<div class='slide-controls'>\n  <div id='slide-killbutton' onclick='toggleSlideShow()' style='float: right'><button>Slides</button></div>\n  <div id='slide-num' style='float: right; margin-right: 10px'></div>\n</div>");
    markupButtons(div);
    el.appendChild(div);
    if (location.search && _.find(location.search.slice(1).split('&'), (function(p) {
      return p.match(/^slides=/);
    }))) {
      sliding = true;
      showSlide($(chooseSlide()));
    } else {
      document.body.classList.add('scroll');
    }
    return hasCode;
  };

  markupSlideContent = function(el, md, noMain) {
    var content, hasCode, i, m, p, pageType, pages, _i, _ref1, _ref2;

    pages = md.split(slidePat);
    hasCode = false;
    if (pages.length > 1) {
      document.body.classList.add('slide-container');
      el.innerHTML = '';
      bindSlider();
      el.removeAttribute('doc');
      if (pages.length === 3 && !pages[0] && !pages[2]) {
        pages[2] = '\n';
      }
      for (i = _i = 0, _ref1 = pages.length; _i < _ref1; i = _i += 2) {
        p = pages[i];
        if (p) {
          pageType = i > 0 ? (m = (_ref2 = pages[i - 1].match(slidePat)) != null ? _ref2[1] : void 0, m.match(/\n-\n/) ? ['continuation', 'hiddenPage'] : m.match(/\n--\n/) ? ['hiddenPage', 'secretPage'] : []) : [];
          content = makeSlideDiv(el, pageType, (i > 0 ? pages[i - 1].match(slideName)[1].trim() : 'Main'));
          if (i > 0) {
            hasCode = (markupElement(content, pages[i - 1] + p)) || hasCode;
          } else {
            hasCode = (markupElement(content, '***\n' + p)) || hasCode;
          }
          padSlide(content, (i > 0 ? pages[i - 1] : '***\n'));
        }
      }
    } else {
      content = makeSlideDiv(el, ['page'], 'Main');
      while (el.firstChild !== content.parentNode) {
        content.appendChild(el.firstChild);
      }
      hasCode = markupElement(content, md);
      padSlide(content, '***\n');
      if (noMain) {
        unwrapContent(content);
      }
    }
    return hasCode;
  };

  padSlide = function(content, header) {
    var div, range;

    if (!content.firstChild || isLeisureCode(content.firstChild)) {
      range = document.createRange();
      range.setStart(content, 0);
      range.setEnd(content, 0);
      div = makeMarkupDiv(range, header);
      div.appendChild(createNode('<br>'));
    }
    if (isLeisureCode(content.lastChild)) {
      range = document.createRange();
      range.setStartAfter(content.lastChild);
      range.setEndAfter(content.lastChild);
      div = makeMarkupDiv(range, '\n');
      return div.appendChild(createNode('<br>'));
    }
  };

  unwrapContent = function(content) {
    var el, section;

    section = content.parentNode;
    el = section.parentNode;
    el.insertBefore(content, section);
    remove(section);
    return unwrap(content);
  };

  makeSlideDiv = function(el, pageTypes, title) {
    var content, div, pageType, sectionTitle, _i, _len;

    lastSlide = div = createNode("<div class='leisure_page'></div>");
    div.setAttribute('leisureSection', title);
    div.setAttribute('doc', '');
    div.setAttribute('slide', '');
    div.classList.add('slide');
    div.classList.add('ui-corner-all');
    div.classList.add('ui-widget');
    div.classList.add('ui-widget-content');
    for (_i = 0, _len = pageTypes.length; _i < _len; _i++) {
      pageType = pageTypes[_i];
      div.classList.add(pageType);
    }
    el.appendChild(div);
    sectionTitle = createNode("<div class='pageTitle'>" + title + "</div>");
    sectionTitle.setAttribute('leisureoutput', '');
    div.appendChild(sectionTitle);
    content = createNode("<div class='pageContent'></div>");
    div.appendChild(content);
    return content;
  };

  chooseSlide = function() {
    var param;

    param = _.find(location.search.slice(1).split('&'), (function(p) {
      return p.match(/^slide=.*/);
    }));
    console.log(param);
    if (param) {
      return document.querySelector("[slide='" + (param.split('=')[1]) + "']");
    } else {
      return document.querySelector('[maindoc]').firstElementChild;
    }
  };

  oldSlide = 0;

  window.toggleSlideShow = function() {
    sliding = $(document.body).is('.scroll');
    enableSlideControls(true);
    enableEditing(true);
    if (sliding) {
      $(document.body).removeClass('scroll');
      return showSlide(nthSlide(oldSlide));
    } else {
      oldSlide = $('.slide.showing').attr('slide');
      hideSlide($('.slide.showing'));
      $(document.body).addClass('scroll');
      return $('#slide-num').html('');
    }
  };

  bindSlider = function() {
    return document.body.addEventListener('keydown', slideKeyListener);
  };

  slideControls = [Q, ESC, LEFT_ARROW, RIGHT_ARROW, HOME, END, PAGE_UP, PAGE_DOWN];

  slideControlsEnabled = true;

  enableSlideControls = function(state) {
    return slideControlsEnabled = state;
  };

  presentSlide = function(s) {
    hideSlide($('.slide.showing'));
    return showSlide(s);
  };

  firstSlide = function() {
    return slides();
  };

  lastSlide = function() {
    return slides().last();
  };

  prevSlide = function() {
    var n;

    n = $('.slide.showing').prevAll('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
    if (n.length) {
      return n;
    } else {
      return slides();
    }
  };

  nextSlide = function() {
    var n;

    n = $('.slide.showing').nextAll('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
    if (n.length) {
      return n;
    } else {
      return $('.slide.showing');
    }
  };

  slideKeyListener = function(e) {
    var c;

    if (sliding) {
      window.evt = e;
      c = e.charCode || e.keyCode || e.which;
      if ((__indexOf.call(slideControls, c) >= 0) && !$(e.target).is('[leisurenode=code],[leisurenode=code] *') && slideControlsEnabled) {
        e.preventDefault();
        if (c === ESC) {
          return toggleSlideShow();
        } else if (c === Q) {
          return closeWindow();
        } else {
          return presentSlide(((function() {
            switch (c) {
              case HOME:
                return firstSlide();
              case END:
                return lastSlide();
              case LEFT_ARROW:
              case PAGE_UP:
                return prevSlide();
              case RIGHT_ARROW:
              case PAGE_DOWN:
                return nextSlide();
            }
          })()));
        }
      }
    }
  };

  slides = function() {
    return $('[slide]').not('[leisureSection="Leisure Controls"]').not('.hiddenPage').not('.secretPage');
  };

  nthSlide = function(n) {
    return slides().slice(n);
  };

  countSlide = function(el) {
    var count, n, slide, _i, _len, _ref1;

    n = -1;
    count = 0;
    _ref1 = slides();
    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
      slide = _ref1[_i];
      count++;
      if (slide === el) {
        n = count;
      }
    }
    return [n, count];
  };

  showSlide = function(el) {
    var count, n, _ref1;

    _ref1 = countSlide(el[0]), n = _ref1[0], count = _ref1[1];
    oldSlide = n;
    $('#slide-num').html("" + n + " / " + count);
    return $(el).first().removeClass('hidden').addClass('showing');
  };

  hideSlide = function(el) {
    return $(el).first().addClass('hidden').removeClass('showing');
  };

  markupElement = function(el, md) {
    var code, codePos, len, lex, markup, node, prev, prevCodePos, range, slide, _i, _len, _ref1, _ref2, _ref3;

    len = md.length;
    slide = (_ref1 = md.match(slidePat)) != null ? _ref1 : '';
    _ref2 = window.marked((slide ? md.slice(slide[0].length) : md), {
      saveLex: true,
      gfm: true
    }), markup = _ref2[0], lex = _ref2[1];
    el.innerHTML = markup.trim() || '<br>';
    prev = null;
    range = document.createRange();
    prevCodePos = -1;
    codePos = 0;
    _ref3 = el.querySelectorAll('code');
    for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
      node = _ref3[_i];
      while (lex[codePos].type !== 'code') {
        codePos++;
      }
      if (node.parentNode.tagName !== 'PRE') {
        code = node;
      } else {
        code = node.parentNode;
        code.innerHTML = node.innerHTML;
      }
      code.setAttribute('noLeisureBar', '');
      code.setAttribute('leisureNode', 'code');
      code.md = lex[codePos].text;
      if (code.parentNode.firstChild !== code) {
        if (prev === null || prev.parentNode !== code.parentNode) {
          range.setStart(code.parentNode, 0);
        } else {
          range.setStartAfter(prev);
        }
        range.setEndBefore(code);
        makeMarkupDiv(range, md.substring((prevCodePos === -1 ? 0 : len - lex[prevCodePos].remain), len - lex[codePos].remain - lex[codePos].textLen));
      }
      prevCodePos = codePos;
      codePos++;
      prev = code;
    }
    if (prevCodePos > -1) {
      if (lex[prevCodePos].remain > 0) {
        range.selectNodeContents(prev.parentNode);
        range.setStartAfter(prev);
        makeMarkupDiv(range, md.substring(len - lex[prevCodePos].remain));
      }
    } else {
      range.selectNodeContents(el);
      makeMarkupDiv(range, md);
    }
    return prevCodePos > -1;
  };

  handleInternalSections = function(content) {
    var before, innerSections, marker, node, nodeContent, nodeTitle, prev, section, sectionHolder, title, _i, _j, _len, _len1, _ref1;

    section = content.parentNode;
    sectionHolder = section.parentNode;
    innerSections = section.querySelectorAll('[leisureSection]');
    if (innerSections.length === 0) {
      if (!((_ref1 = content.firstChild.md) != null ? _ref1.match(/^\*\*\*/) : void 0)) {
        if (!section.previousSibling) {
          return section.setAttribute('leisureSection', 'Main');
        } else {
          prev = section.previousSibling.querySelector('.pageContent');
          while (content.firstChild) {
            mergeUp(content.firstChild, prev);
          }
          return remove(section);
        }
      }
    } else {
      title = section.getAttribute('leisureSection');
      before = false;
      for (_i = 0, _len = innerSections.length; _i < _len; _i++) {
        node = innerSections[_i];
        if (node.getAttribute('leisureSection') === title) {
          before = true;
          break;
        }
      }
      before = before || (!innerSections[0].previousSibling);
      marker = section;
      for (_j = 0, _len1 = innerSections.length; _j < _len1; _j++) {
        node = innerSections[_j];
        nodeTitle = node.getAttribute('leisureSection');
        nodeContent = node.querySelector('.pageContent');
        if (nodeTitle === title || (node.previousSibling && nodeTitle === 'Main')) {
          if (nodeTitle === title) {
            before = false;
          }
          while (nodeContent.firstChild) {
            content.insertBefore(nodeContent.firstChild, node);
            mergeLeisureCode(node.previousSibling, node);
          }
          remove(node);
        } else {
          while (node.nextSibling && !node.nextSibling.getAttribute('leisureSection')) {
            mergeUp(node.nextSibling, nodeContent);
          }
          padSlide(nodeContent, "***" + nodeTitle + "\n");
          if (before) {
            section.parentNode.insertBefore(node, section);
          } else {
            section.parentNode.insertBefore(node, marker.nextSibling);
            marker = node;
          }
        }
      }
      if (!content.firstChild) {
        return remove(section);
      } else {
        return padSlide(content, "***" + title + "\n");
      }
    }
  };

  mergeUp = function(el, newParent) {
    newParent.appendChild(el);
    return mergeLeisureCode(newParent.lastChild.previousSibling, newParent.lastChild);
  };

  makeSection = function(title, node, next) {
    var div;

    div = createNode("<div leisureSection='" + title + "'></div>");
    node.parentNode.insertBefore(div, node);
    while (div.nextSibling && div.nextSibling !== next) {
      div.appendChild(div.nextSibling);
    }
    return div;
  };

  makeMarkupDiv = function(range, md) {
    var div;

    div = document.createElement('div');
    range.surroundContents(div);
    div.md = md;
    bindMarkupDiv(div);
    return div;
  };

  editingEnabled = true;

  enableEditing = function(state) {
    return editingEnabled = state;
  };

  bindMarkupDiv = function(div) {
    var editing;

    div.bound = true;
    div.setAttribute('leisureNode', 'markdown');
    div.setAttribute('contenteditable', 'false');
    editing = false;
    div.addEventListener('dblclick', function(e) {
      if (!editing && editingEnabled) {
        div.innerHTML = '';
        div.appendChild(textNode(div.md));
        div.style.whiteSpace = 'pre-wrap';
        div.setAttribute('contenteditable', 'true');
        editing = true;
        div.parentNode.setAttribute('editing', 'true');
        return div.focus();
      }
    });
    div.addEventListener('keypress', function(e) {
      var br, r, s;

      if (editing) {
        s = window.getSelection();
        r = s.getRangeAt(0);
        if ((e.charCode || e.keyCode || e.which) === ENTER) {
          br = textNode('\n');
          r.insertNode(br);
          r = document.createRange();
          r.setStart(br, 1);
          s.removeAllRanges();
          s.addRange(r);
          return e.preventDefault();
        }
      }
    });
    return div.addEventListener('blur', function(e) {
      var first, frag, last, node, parent, prevSection, r, scroll, _i, _len, _ref1, _ref2;

      if (editing) {
        scroll = document.body.scrollTop;
        div.style.whiteSpace = '';
        editing = false;
        div.parentNode.removeAttribute('editing');
        div.setAttribute('contenteditable', 'false');
        prevSection = (_ref1 = div.parentNode.parentNode.previousSibling) != null ? _ref1.getAttribute('leisureSection') : void 0;
        parent = div.parentNode;
        if (markupSlideContent(div, div.textContent, prevSection && prevSection !== 'Leisure Controls')) {
          _ref2 = div.querySelectorAll("[leisurenode='code']");
          for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
            node = _ref2[_i];
            presentLeisureCode(node, true);
          }
        } else if (div.textContent.trim() === '') {
          cleanEmptyNodes(div);
        }
        r = document.createRange();
        r.selectNodeContents(div);
        frag = r.extractContents();
        first = frag.childNodes[0];
        last = frag.childNodes[frag.childNodes.length - 1];
        parent.replaceChild(frag, div);
        mergeLeisureCode(previousSibling(first), first);
        mergeLeisureCode(last, nextSibling(last));
        handleInternalSections(parent);
        return delay(function() {
          return document.body.scrollTop = scroll;
        });
      }
    });
  };

  Notebook.markupElement = markupElement;

  Notebook.enableSlideControls = enableSlideControls;

  Notebook.enableEditing = enableEditing;

  Notebook.presentSlide = presentSlide;

  Notebook.firstSlide = firstSlide;

  Notebook.lastSlide = lastSlide;

  Notebook.prevSlide = prevSlide;

  Notebook.nextSlide = nextSlide;

}).call(this);

/*
*/

},{"./notebook":9}],9:[function(require,module,exports){
(function(global){// Generated by CoffeeScript 1.6.2
/*
# use an element as a Leisure notebook
# Only runs in the context of a browser
*/


(function() {
  var $, BS, DEL, DOWN_ARROW, END, ENTER, ESC, HOME, LEFT_ARROW, Leisure_anno, Nil, PAGE_DOWN, PAGE_UP, RIGHT_ARROW, TAB, UP_ARROW, URI, Xus, acceptCode, addBoxClasses, addDefControls, addsLine, allowEvents, arrows, autoRun, baseElements, baseStrokeWidth, basicCall, bindAll, bindNotebook, bootNotebook, box, boxClasses, buttonClasses, c, chainEvalNodes, changeTheme, changeView, checkDeleteExpr, checkHideSource, checkMutateFromModification, cleanEmptyNodes, cleanOutput, clearAst, clearOutputBox, clearUpdates, clickTest, closeWindow, codeBox, codeFocus, codeSpan, configureSaveLink, continueRangePosition, createFragment, createNode, createPeer, createSlider, debug, defaultEnv, define, delay, docFocus, envFor, errString, escapeHtml, evalBox, evalDoc, evalDocCode, evalNodes, evalOutput, evaluating, evaluationQueue, event, filename, findCurrentCodeHolder, findDefs, findUpdateSelector, focusBox, foldLeft, gen, getAnnoBody, getAnnoData, getAnnoName, getAst, getBox, getDefName, getElementCode, getElements, getExprSource, getHtml, getMDDocument, getMaxStrokeWidth, getParseErr, getRangePosition, getRangeText, getRanges, getRefName, getSvgElement, getType, grp, handleKey, hasFunc, hasMonadOutput, head, hiddenPat, hideControlSection, hideOutputSource, hideSlider, highlightNotebookFunction, highlightPosition, id, identity, ignoreDeleteOutputBox, init, initNotebook, insertControls, isDef, isLeisureCode, isMonad, isOutput, isSlider, leisureContextString, linePat, linkSource, loadProgram, loaded, makeId, makeLabel, makeMonad, makeOption, makeOutputBox, makeOutputControls, makeRange, makeSyncMonad, makeTestBox, makeTestCase, markPartialApplies, markupButton, markupButtons, markupDefs, mergeLeisureCode, nameSub, nextId, nextSibling, nodeEnd, nodeFor, nonprintable, numberEnd, numberStart, oldBrackets, owner, patchFuncAst, peer, peerGetDocument, peerGetFunctions, peerNotifySelection, postLoadQueue, prepExpr, presentLeisureCode, presentValue, previousBoxRangeInternal, previousBoxRangeStart, previousSibling, primSvgMeasure, primconcatNodes, printable, printableControlCharacters, processLine, psgn, queueAfterLoad, remove, removeBoxClasses, removeOldDefs, replaceContents, replaceRange, replicate, req, root, runAuto, runMonad, runTest, runTests, saveProgram, setAst, setFilename, setMinMax, setSnapper, setUpdate, showAst, showError, showFilename, showFilenames, showOutputSource, showResult, showSliderButton, showSource, skipLeftOverOutputBox, slider, snapshot, svgBetterMeasure, svgMeasure, svgMeasureText, tail, testPat, textNode, toDefBox, toExprBox, toggleEdit, transformStrokeWidth, transformedPoint, unwrap, update, updatePat, wrapRange, xusEnv, _, _ref, _ref1,
    __slice = [].slice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  console.log("LOADING NOTEBOOK");

  _ref = root = module.exports = require('./ast'), nameSub = _ref.nameSub, getRefName = _ref.getRefName, define = _ref.define, foldLeft = _ref.foldLeft, Nil = _ref.Nil, getType = _ref.getType, getAnnoName = _ref.getAnnoName, getAnnoData = _ref.getAnnoData, getAnnoBody = _ref.getAnnoBody, Leisure_anno = _ref.Leisure_anno;

  _ref1 = require('./runtime'), isMonad = _ref1.isMonad, runMonad = _ref1.runMonad, makeMonad = _ref1.makeMonad, makeSyncMonad = _ref1.makeSyncMonad, identity = _ref1.identity, defaultEnv = _ref1.defaultEnv, basicCall = _ref1.basicCall;

  gen = require('./gen').gen;

  URI = window.URI;

  Xus = window.Xus;

  $ = window.$;

  _ = require('./lodash.min');

  window.global = window;

  debug = false;

  BS = 8;

  TAB = 9;

  ENTER = 13;

  ESC = 27;

  PAGE_UP = 33;

  PAGE_DOWN = 34;

  END = 35;

  HOME = 36;

  LEFT_ARROW = 37;

  UP_ARROW = 38;

  RIGHT_ARROW = 39;

  DOWN_ARROW = 40;

  DEL = 46;

  arrows = [37, 38, 39, 40];

  updatePat = /(^|\n)(#@update )([^\n]+)(?:^|\n)/;

  peer = null;

  nextId = 0;

  filename = null;

  event = function() {
    var args, widget;

    widget = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return basicCall(args, envFor(widget), identity);
  };

  defaultEnv.readFile = function(fileName, cont) {
    var uri;

    uri = new URI(document.location.href, fileName);
    console.log("\n\n@@@@READ FILE: " + uri + "\n\n");
    return $.get(String(uri)).done(function(data) {
      return cont(null, data);
    }).fail(function(err) {
      return cont(err, null);
    });
  };

  defaultEnv.writeFile = function(fileName, data, cont) {};

  snapshot = function(el, pgm) {};

  setSnapper = function(snapFunc) {
    return snapshot = snapFunc;
  };

  delay = function(func) {
    return window.setTimeout(func, 1);
  };

  getParseErr = getHtml = function(x) {
    return x(function() {
      return function(value) {
        return value();
      };
    });
  };

  escapeHtml = function(str) {
    if (typeof str === 'string') {
      return str.replace(/[<>]/g, function(c) {
        switch (c) {
          case '<':
            return '&lt;';
          case '>':
            return '&gt;';
        }
      });
    } else {
      return str;
    }
  };

  presentValue = function(v) {
    var content;

    if ((getType(v)) === 'svgNode') {
      content = v(function() {
        return id;
      });
      return _svgPresent()(function() {
        return content;
      })(function() {
        return id;
      });
    } else if ((getType(v)) === 'html') {
      return getHtml(v);
    } else if ((getType(v)) === 'parseErr') {
      return "PARSE ERROR: " + (getParseErr(v));
    } else {
      return escapeHtml(String(v));
    }
  };

  bootNotebook = function(el) {
    if ((document.getElementById('channelList')) == null) {
      document.body.appendChild(createNode("<datalist id='channelList'>\n   <option value=''></option>\n   <option value='app'>app</option>\n   <option value='compile'>compile</option>\n   <option value='editorFocus'>editorFocus</option>\n</datalist>"));
    }
    return createPeer();
  };

  closeWindow = function() {
    console.log("CLOSING WINDOW");
    window.open('', '_self', '');
    return window.close();
  };

  createPeer = function() {
    var k, param, params, server, v, _i, _len, _ref2, _ref3;

    root.xusServer = server = new Xus.Server();
    server.exit = function() {
      return closeWindow();
    };
    peer = root.peer = Xus.createDirectPeer(server);
    peer.server = server;
    peer.listen('leisure/selection/contents', true, function(key, value) {
      var node, r, s;

      if (key === 'leisure/selection/contents') {
        s = window.getSelection();
        if (s.rangeCount && s.toString() !== value) {
          r = s.getRangeAt(0);
          r.deleteContents();
          node = textNode(value.toString());
          r.insertNode(node);
          s.removeAllRanges();
          r.selectNode(node);
          return s.addRange(r);
        }
      }
    });
    peer.set('leisure/evalExpr', null, 'transient');
    peer.listen('leisure/evalExpr', false, function(key, value) {
      var env, expr, result;

      if (key === 'leisure/evalExpr' && (value != null)) {
        expr = value[0], result = value[1];
        console.log("EVAL: " + expr + ", RESULT: " + result);
        env = xusEnv(result, expr);
        return processLine(expr, env, function() {
          return typeof env.cleanup === "function" ? env.cleanup() : void 0;
        });
      }
    });
    peer.set('leisure/document', peerGetDocument);
    peer.set('leisure/functions', peerGetFunctions);
    peer.set('leisure/storage', []);
    if (Boot.documentFragment) {
      params = {};
      _ref2 = Boot.documentFragment.substring(1).split('&');
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        _ref3 = param.split('='), k = _ref3[0], v = _ref3[1];
        params[k.toLowerCase()] = decodeURIComponent(v);
      }
      if (params.xusproxy != null) {
        return Xus.xusToProxy(server, params.xusproxy);
      }
    }
  };

  replaceContents = function(uri, contents) {
    if (!contents) {
      contents = uri;
      uri = null;
    }
    if (uri) {
      setFilename(uri.toString());
    }
    document.body.setAttribute('doc', '');
    window.leisureAutoRunAll = true;
    window.markup(contents);
    return bindAll();
  };

  bindAll = function() {
    var node, _i, _len, _ref2;

    _ref2 = document.querySelectorAll("[leisurenode='code']");
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      node = _ref2[_i];
      node.setAttribute('contentEditable', 'true');
      bindNotebook(node);
      changeTheme(node, 'thin');
      evalDoc(node);
    }
    return showFilenames();
  };

  xusEnv = function(resultVar, expr) {
    var env, result;

    result = '';
    env = {
      debug: debug,
      finishedEvent: function() {},
      owner: null,
      require: req,
      write: function(msg) {
        return result += "" + msg + "\n";
      },
      prompt: function(msg, cont) {
        return result += "Attempt to prompt with " + msg;
      },
      processResult: function(res, ast) {
        result += res;
        return peer.set(resultVar, JSON.stringify(result));
      },
      presentValue: function(x) {
        return x;
      },
      fileSettings: {
        uri: new URI(document.location.href)
      },
      err: function(err) {
        result += err.leisureContext ? "ERROR: " + err + ":\n" + (leisureContextString(err)) + "\n" + err.stack : "Couldn't parse: " + expr;
        return peer.set(resultVar, result);
      }
    };
    env.__proto__ = root.defaultEnv;
    return env;
  };

  peerGetDocument = function() {
    var nodes;

    nodes = document.querySelectorAll("[leisurenode='code']");
    if (nodes.length > 1 || Notebook.md) {
      return getMDDocument();
    } else {
      return getSimpleDocument();
    }
  };

  peerGetFunctions = function() {
    return (_.uniq(window.leisureFuncNames.toArray().sort(), true)).sort();
  };

  getMDDocument = function() {
    var md, node, _i, _len, _ref2, _ref3;

    md = '';
    _ref2 = document.querySelectorAll('[doc] [leisureNode]');
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      node = _ref2[_i];
      md += isLeisureCode(node) ? "```\n" + (getElementCode(node)) + "\n```\n" : (_ref3 = node.md) != null ? _ref3 : '';
    }
    return md;
  };

  makeId = function(el) {
    if (!el.id) {
      return el.id = "Leisure-" + (nextId++);
    }
  };

  allowEvents = true;

  init = false;

  bindNotebook = function(el) {
    if (!init) {
      init = true;
      defaultEnv.presentValue = presentValue;
      defaultEnv.write = function(msg) {
        return console.log(msg);
      };
      defaultEnv.owner = document.body;
      defaultEnv.finishedEvent = function(evt, channel) {
        return update(channel != null ? channel : 'app', defaultEnv);
      };
      defaultEnv.debug = debug;
    }
    if (el.bound == null) {
      makeId(el);
      el.bound = true;
      el.addEventListener('DOMCharacterDataModified', (function(evt) {
        if (allowEvents && !el.replacing) {
          return delay(function() {
            return checkMutateFromModification(evt);
          });
        }
      }), true);
      el.addEventListener('DOMSubtreeModified', (function(evt) {
        if (allowEvents && !el.replacing) {
          return delay(function() {
            return checkMutateFromModification(evt);
          });
        }
      }), true);
      el.addEventListener('mousedown', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('mousemove', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('mouseup', (function(e) {
        if (!isSlider(e.srcElement)) {
          return delay(function() {
            return highlightPosition(e);
          });
        }
      }), true);
      el.addEventListener('keydown', function(e) {
        var c, r, s;

        c = e.charCode || e.keyCode || e.which;
        if (c === DEL || c === BS) {
          s = window.getSelection();
          r = s.getRangeAt(0);
          if (c === BS) {
            checkDeleteExpr(getBox(r.startContainer));
            if (skipLeftOverOutputBox(el, r)) {
              return e.preventDefault();
            }
          } else if (c === DEL) {
            checkDeleteExpr(getBox(r.startContainer));
            if (ignoreDeleteOutputBox(el, r)) {
              return e.preventDefault();
            }
          }
        }
        if (printable(c)) {
          clearAst(getBox(window.getSelection().focusNode));
        }
        if ((__indexOf.call(arrows, c) >= 0) || printable(c)) {
          delay(function() {
            return highlightPosition(e);
          });
        }
        if (e.ctrlKey && c === ENTER) {
          return handleKey("C-ENTER");
        } else if (e.altKey && c === ENTER) {
          return handleKey("M-ENTER");
        } else if (c === TAB) {
          handleKey("TAB");
          return e.preventDefault();
        }
      });
      el.addEventListener('keypress', function(e) {
        var br, bx, r, s, sp;

        s = window.getSelection();
        r = s.getRangeAt(0);
        if ((e.charCode || e.keyCode || e.which) === ENTER) {
          br = textNode('\n');
          r.insertNode(br);
          r = document.createRange();
          r.setStart(br, 1);
          s.removeAllRanges();
          s.addRange(r);
          return e.preventDefault();
        } else if (r.startContainer.parentNode === el) {
          sp = codeSpan('\n', 'codeExpr');
          sp.setAttribute('generatedNL', '');
          bx = box(s.getRangeAt(0), 'codeMainExpr', true);
          bx.appendChild(sp);
          makeOutputBox(bx);
          r = document.createRange();
          r.setStart(sp, 0);
          s.removeAllRanges();
          return s.addRange(r);
        }
      });
      el.addEventListener('focus', (function() {
        if (allowEvents) {
          return findCurrentCodeHolder();
        }
      }), true);
      el.addEventListener('blur', (function() {
        if (allowEvents) {
          return findCurrentCodeHolder();
        }
      }), true);
      if (window.leisureAutoRunAll) {
        autoRun(el, true);
        return window.setTimeout((function() {
          return runTests(el);
        }), 1);
      } else {
        return el.autorunState = false;
      }
    }
  };

  checkDeleteExpr = function(node) {
    var out;

    if (isOutput(node && node.output)) {
      out = node.output;
      return window.setTimeout((function() {
        if (!node.textContent.trim()) {
          node.parentNode.removeChild(node);
        }
        if ((node.parentNode == null) && ((out != null ? out.parentNode : void 0) != null)) {
          return out.parentNode.removeChild(out);
        }
      }), 1);
    }
  };

  skipLeftOverOutputBox = function(el, r) {
    var box, s;

    el.normalize();
    box = previousBoxRangeInternal(r) || previousBoxRangeStart(r);
    if (isOutput(box)) {
      s = window.getSelection();
      r.selectNode(box);
      r.collapse(true);
      s.removeAllRanges();
      s.addRange(r);
      return true;
    } else {
      return false;
    }
  };

  previousBoxRangeInternal = function(r) {
    return r.startContainer.nodeType === 1 && r.startOffset > 0 && r.startContainer.childNodes[r.startOffset - 1];
  };

  previousBoxRangeStart = function(r) {
    return r.startContainer.nodeType === 3 && r.startOffset === 0 && previousSibling(r.startContainer);
  };

  ignoreDeleteOutputBox = function(el, r) {
    var n;

    el.normalize();
    if (r.startContainer.nodeType === 3 && r.startOffset === r.startContainer.length) {
      n = r.startContainer;
      while (n && n.nextSibling === null) {
        n = n.parentNode;
      }
      return isOutput(n != null ? n.nextSibling : void 0);
    } else {
      return false;
    }
  };

  isOutput = function(el) {
    return (el != null ? el.nodeType : void 0) === 1 && el.hasAttribute('LeisureOutput');
  };

  isLeisureCode = function(el) {
    return (el != null ? el.nodeType : void 0) === 1 && el.getAttribute('leisureNode') === 'code';
  };

  peerNotifySelection = function(el, str) {};

  printableControlCharacters = (function() {
    var _i, _len, _ref2, _results;

    _ref2 = "\r\i\n\b";
    _results = [];
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      c = _ref2[_i];
      _results.push(c.charCodeAt(0));
    }
    return _results;
  })();

  printable = function(code) {
    return (code > 0xf && code < 37) || code > 40 || __indexOf.call(printableControlCharacters, code) >= 0;
  };

  nonprintable = null;

  (function() {
    var i, s, _i;

    s = '';
    for (i = _i = 0; 0 <= 0xf ? _i <= 0xf : _i >= 0xf; i = 0 <= 0xf ? ++_i : --_i) {
      s += String.fromCharCode(i);
    }
    s.replace(/[\i\r\f]/g, '');
    return nonprintable = new RegExp("[" + s + "]");
  })();

  handleKey = function(key) {
    var box;

    switch (key) {
      case "C-ENTER":
      case "TAB":
        box = getBox(window.getSelection().focusNode);
        if ((box.getAttribute('codeMainExpr')) != null) {
          return evalOutput(box.output);
        } else if ((box.getAttribute('codeMain')) != null) {
          return acceptCode(box);
        }
        break;
      case "M-ENTER":
        box = getBox(window.getSelection().focusNode);
        if ((box.getAttribute('codeMainExpr')) != null) {
          return clearOutputBox(box.output);
        }
    }
  };

  clearAst = function(box) {
    var cbox;

    cbox = getBox(box);
    return cbox != null ? cbox.ast = null : void 0;
  };

  oldBrackets = [null, Nil];

  cleanEmptyNodes = function(el) {
    var next, prev, _ref2;

    if (el.nodeType === 3 && (el.parentNode != null)) {
      return cleanEmptyNodes(el.parentNode);
    } else {
      prev = el.previousSibling;
      next = el.nextSibling;
      if (el.nodeType === 1 && el.textContent.trim() === '' && ((_ref2 = el.parentNode) != null ? _ref2.hasAttribute('doc') : void 0)) {
        el.parentNode.removeChild(el);
      }
      if (next === nextSibling(prev)) {
        return mergeLeisureCode(prev, next);
      }
    }
  };

  presentLeisureCode = function(node, doEval) {
    node.setAttribute('contentEditable', 'true');
    Notebook.bindNotebook(node);
    Notebook.changeTheme(node, 'thin');
    if (doEval) {
      return evalDoc(node);
    } else {
      return initNotebook(node);
    }
  };

  mergeLeisureCode = function(el1, el2) {
    var newCode, r;

    if (el1 && el2) {
      if (el1.nodeType === 1 && el2.nodeType === 3) {
        el1.appendChild(el2);
        return el1.normalize();
      } else if (el1.nodeType === 3 && el2.nodeType === 1) {
        el2.insertBefore(el1, el2.firstChild);
        return el2.normalize();
      } else if (el1.hasAttribute('leisureNode') && el1.getAttribute('leisureNode') === el2.getAttribute('leisureNode')) {
        newCode = textNode(el1.md = el1.getAttribute('leisureNode') === 'code' ? "" + (getElementCode(el1)) + "\n" + (getElementCode(el2)) : "" + el1.md + "\n" + el2.md);
        r = document.createRange();
        r.selectNodeContents(el2);
        el1.appendChild(textNode('\n'));
        el1.appendChild(r.extractContents());
        return el2.parentNode.removeChild(el2);
      }
    }
  };

  highlightPosition = function(e) {
    var ast, b, brackets, changed, i, node, parent, pos, r, ranges, s, span, _i, _j, _k, _len, _len1, _len2, _ref2, _ref3, _ref4;

    parent = null;
    s = window.getSelection();
    if (s.rangeCount) {
      if (cleanEmptyNodes(s.getRangeAt(0).startContainer)) {
        return;
      }
      focusBox(s.focusNode);
      parent = getBox(s.focusNode);
      if ((_ref2 = s.getRangeAt(0)) != null ? _ref2.collapsed : void 0) {
        if (!parent || isOutput(parent)) {
          return;
        }
        if (parent.parentNode && (ast = getAst(parent))) {
          r = s.getRangeAt(0);
          r.setStart(parent, 0);
          pos = getRangeText(r).length;
          changed = false;
          if (false) {
            brackets = Leisure.bracket(ast.leisureBase, pos);
            if (oldBrackets[0] !== parent || !oldBrackets[1].equals(brackets)) {
              oldBrackets = [parent, brackets];
              _ref3 = document.querySelectorAll("[LeisureBrackets]");
              for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
                node = _ref3[_i];
                unwrap(node);
              }
              _ref4 = parent.querySelectorAll(".partialApply");
              for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
                node = _ref4[_j];
                unwrap(node);
              }
              parent.normalize();
              markPartialApplies(parent);
              b = brackets;
              ranges = [];
              while (b !== Nil) {
                ranges.push(makeRange(parent, b.head().head(), b.head().tail().head()));
                b = b.tail();
              }
              for (i = _k = 0, _len2 = ranges.length; _k < _len2; i = ++_k) {
                r = ranges[i];
                span = document.createElement('span');
                span.setAttribute('LeisureBrackets', '');
                span.setAttribute('class', i === 0 ? 'LeisureFunc' : 'LeisureArg');
                wrapRange(r, span);
              }
              changed = true;
            }
          }
          if (e instanceof KeyboardEvent) {
            if (hideSlider()) {
              pos += 1;
            }
          } else if (e instanceof MouseEvent && e.type === 'mousedown' && (e.target === parent || parent.contains(e.target)) && showSliderButton(parent, pos, e)) {
            changed = true;
            pos += 1;
          }
          if (changed) {
            window.EVT = e;
            s.removeAllRanges();
            s.addRange(makeRange(parent, pos));
          }
        }
      }
      return peerNotifySelection(parent, s.toString());
    }
  };

  numberEnd = /(?:^|.*[^0-9.])([0-9]+\.?[0-9]*|\.[0-9]*)$/;

  numberStart = /^([0-9]+\.[0-9]+|[0-9]+|\.[0-9]+)/;

  slider = [];

  showSliderButton = function(parent, pos, e) {
    var changed, len, m, oldPos, r, sParent, sPos, sValue, span, text;

    if (slider.length) {
      hideSlider();
      return false;
    } else {
      text = parent.textContent;
      oldPos = pos;
      changed = 0;
      if (m = text.substring(0, pos).match(numberEnd)) {
        pos -= m[1].length;
      }
      if (m = text.substring(pos).match(numberStart)) {
        len = m[1].length;
        if (oldPos <= pos + len) {
          sParent = slider[0], sPos = slider[1], sValue = slider[2];
          if (parent !== sParent || pos !== sPos || m[1] !== sValue) {
            hideSlider();
            r = makeRange(parent, pos, pos + m[1].length);
            span = createNode("<span class='leisureRangeNumber ui-widget-content'></span>");
            wrapRange(r, span);
            changed = 1;
            span.normalize();
            slider = [parent, pos, m[1], span];
            createSlider();
          }
        }
        return changed;
      } else {
        return hideSlider();
      }
    }
  };

  isSlider = function(el) {
    while (el !== document) {
      if (el.hasAttribute('slider')) {
        return true;
      }
      el = el.parentNode;
    }
    return false;
  };

  createSlider = function() {
    var d, div, inside, max, min, parent, pos, sl, sliding, span, value;

    parent = slider[0], pos = slider[1], value = slider[2], span = slider[3], div = slider[4];
    if (div) {
      return;
    }
    inside = false;
    sliding = false;
    d = createNode("<div style='z-index: 1; position: absolute; width: 200px; background: white; border: solid green 1px' slider contentEditable='false'></div>");
    slider.push(d);
    d.style.top = "" + (span.offsetTop + span.offsetHeight + 5) + "px";
    d.style.minTop = '0px';
    d.style.left = "" + (Math.max(0, (span.offsetLeft + span.offsetWidth) / 2 - 100)) + "px";
    d.addEventListener('mouseover', function(e) {
      if (!inside) {
        return inside = true;
      }
    });
    d.addEventListener('mouseout', function(e) {
      if (e.toElement !== d && !d.contains(e.toElement)) {
        inside = false;
        if (!sliding) {
          return hideSlider();
        }
      }
    });
    value = Number(value);
    min = value < 0 ? value * 2 : value / 2;
    max = value === 0 ? 10 : value * 2;
    sl = $(d).slider({
      animate: 'fast',
      start: function() {
        sliding = true;
        return delay(function() {
          return allowEvents = false;
        });
      },
      stop: function(event, ui) {
        setMinMax(sl);
        allowEvents = true;
        sliding = false;
        if (!inside) {
          return hideSlider();
        }
      },
      slide: function(event, ui) {
        var ast, _ref2;

        if (span.firstChild) {
          span.firstChild.nodeValue = String(ui.value);
        }
        if (isDef(parent)) {
          parent.ast = null;
          acceptCode(parent);
          ast = getAst(parent);
          if ((_ref2 = parent.ast) != null ? _ref2.leisureName : void 0) {
            return update("sel-" + parent.ast.leisureName);
          }
        } else {
          makeId(parent);
          if (!parent.getAttribute(parent.output, 'leisureUpdate')) {
            setUpdate(parent.output, "id-" + parent.id + " compile", true);
          }
          update("id-" + parent.id);
          return update("compile");
        }
      },
      value: value
    });
    setMinMax(sl, value);
    parent.insertBefore(d, parent.firstChild);
    return d.focus();
  };

  psgn = function(x) {
    if (x < 0) {
      return -1;
    } else {
      return 1;
    }
  };

  setMinMax = function(sl, value) {
    var max, min, step, _ref2;

    value = value || sl.slider("value");
    min = 0;
    max = (1 <= (_ref2 = Math.abs(value)) && _ref2 < 50) || value === 0 ? 100 * psgn(value) : value * 2;
    if (Math.round(value) === value) {
      step = Math.round((max - min) / 100);
      step = step - step % (max - min);
    } else {
      step = (max - min) / 100;
    }
    sl.slider("option", "min", min);
    sl.slider("option", "max", max);
    return sl.slider("option", "step", step);
  };

  hideSlider = function() {
    var div, parent, sPos, sValue, span;

    if (slider.length) {
      parent = slider[0], sPos = slider[1], sValue = slider[2], span = slider[3], div = slider[4];
      unwrap(span);
      if (div) {
        remove(div);
      }
      parent.normalize();
      slider = [];
      return 2;
    } else {
      return 0;
    }
  };

  wrapRange = function(range, node) {
    var contents, err;

    try {
      return range.surroundContents(node);
    } catch (_error) {
      err = _error;
      contents = range.cloneContents();
      replaceRange(range, node);
      return node.appendChild(contents);
    }
  };

  replaceRange = function(range, node) {
    range.deleteContents();
    return range.insertNode(node);
  };

  getRangeText = function(r) {
    return r.cloneContents().textContent;
  };

  getBox = function(node) {
    while ((node != null) && ((typeof node.getAttribute === "function" ? node.getAttribute('LeisureBox') : void 0) == null)) {
      node = node.parentElement;
    }
    return node;
  };

  checkMutateFromModification = function(evt) {
    var b, b2;

    b = getBox(evt.target);
    b2 = getBox(window.getSelection().focusNode);
    if (b && b === b2) {
      if ((isDef(b)) && b.classList.contains('codeMainExpr')) {
        toDefBox(b);
      } else if (!(isDef(b)) && b.classList.contains('codeMain')) {
        toExprBox(b);
      }
      return replicate(b);
    }
  };

  replicate = function(b) {
    if (b.replicator) {
      return delay(function() {
        return b.replicator.replicate(b);
      });
    }
  };

  buttonClasses = 'ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only'.split(' ');

  boxClasses = {
    codeMainExpr: ['codeMainExpr', 'ui-widget', 'ui-widget-content', 'ui-corner-all'],
    codeMain: ['codeMain', 'ui-widget', 'ui-widget-content', 'ui-corner-all'],
    codeMainTest: ['codeMainTest'],
    output: ['output', 'ui-corner-all']
  };

  addBoxClasses = function(box, type) {
    var cl, _i, _len, _ref2, _results;

    box.setAttribute(type, '');
    _ref2 = boxClasses[type];
    _results = [];
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      cl = _ref2[_i];
      _results.push(box.classList.add(cl));
    }
    return _results;
  };

  removeBoxClasses = function(box, type) {
    var cl, _i, _len, _ref2, _results;

    box.removeAttribute(type);
    _ref2 = boxClasses[type];
    _results = [];
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      cl = _ref2[_i];
      _results.push(box.classList.remove(cl));
    }
    return _results;
  };

  toExprBox = function(b) {
    var node, _i, _j, _len, _len1, _ref2, _ref3;

    removeBoxClasses(b, 'codeMain');
    addBoxClasses(b, 'codeMainExpr');
    _ref2 = b.querySelectorAll('[codename]');
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      node = _ref2[_i];
      unwrap(node);
    }
    _ref3 = b.querySelectorAll('.astbutton');
    for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
      node = _ref3[_j];
      remove(node);
    }
    return makeOutputBox(b);
  };

  toDefBox = function(b) {
    if (b.output) {
      remove(b.output);
    }
    removeBoxClasses(b, 'codeMainExpr');
    addBoxClasses(b, 'codeMain');
    return addDefControls(b);
  };

  addDefControls = function(box) {
    var btn;

    btn = createNode("<button onclick='Notebook.showAst(this.parentNode)' class='astbutton' title='Show AST'></button>");
    markupButton(btn);
    return box.appendChild(btn);
  };

  remove = function(node) {
    var _ref2;

    return (_ref2 = node.parentNode) != null ? _ref2.removeChild(node) : void 0;
  };

  showAst = function(box) {
    var name, node, output;

    name = (getAst(box)).leisureName;
    if (box.astOut != null) {
      remove(box.astOut.output);
      remove(box.astOut);
      return box.astOut = null;
    } else if (name != null) {
      node = codeBox('codeMainExpr');
      box.astOut = node;
      node.setAttribute('leisureOutput', '');
      box.parentNode.insertBefore(node, box.nextSibling);
      node.textContent = "#@update sel-" + name + "\ntreeForNotebook " + name;
      output = makeOutputBox(node);
      toggleEdit(output);
      return evalOutput(output, true);
    }
  };

  highlightNotebookFunction = function(funcName, start, stop) {
    var box, offset, sel;

    box = document.body.querySelector("[leisurefunc=" + funcName + "]");
    offset = 0;
    sel = window.getSelection();
    sel.removeAllRanges();
    return sel.addRange(makeRange(box, start + offset, stop + offset));
  };

  isDef = function(box) {
    var defType, leading, m, matched, name, txt;

    txt = box.textContent;
    if ((m = txt.match(L_defPat()))) {
      matched = m[0], leading = m[1], name = m[2], defType = m[3];
      return (defType != null ? defType.length : void 0) > 0;
    }
    return false;
  };

  initNotebook = function(el) {
    var pgm;

    el.replacing = true;
    removeOldDefs(el);
    pgm = markupDefs(el, findDefs(el));
    el.normalize();
    el.replacing = false;
    if (!el.hasAttribute('noLeisureBar')) {
      insertControls(el);
      el.testResults.innerHTML = pgm[2];
    }
    snapshot(el, pgm);
    return pgm;
  };

  makeLabel = function(text, c) {
    var node;

    node = document.createElement('SPAN');
    node.innerHTML = text;
    node.setAttribute('class', c);
    return node;
  };

  makeOption = function(name) {
    var opt;

    opt = document.createElement('OPTION');
    opt.text = name;
    return opt;
  };

  createNode = function(txt) {
    var scratch;

    scratch = document.createElement('DIV');
    scratch.innerHTML = txt;
    return scratch.firstChild;
  };

  createFragment = function(txt) {
    var frag, scratch;

    scratch = document.createElement('DIV');
    scratch.innerHTML = txt;
    frag = document.createDocumentFragment();
    while (scratch.firstChild) {
      frag.appendChild(scratch.firstChild);
    }
    return frag;
  };

  insertControls = function(el) {
    var controlDiv, saveButton, spacer, testButton, themeSelect, viewSelect, _ref2, _ref3;

    controlDiv = createNode("<div LeisureOutput contentEditable='false' class='leisure_bar'><div class=\"leisure_bar_contents\">\n  <button leisureId='saveButton' class=\"leisure_start\">Save</button>\n  <button leisureId='testButton'>Run Tests</button> <span leisureId='testResults' class=\"notrun\"></span>\n  <input type='checkbox' leisureId='autorunTests'><b>Auto</b></input>\n  <span class=\"leisure_theme\">Theme: </span>\n  <select leisureId='themeSelect'>\n    <option value=thin>Thin</option>\n    <option value=gaudy>Gaudy</option>\n    <option value=cthulhu>Cthulhu</option>\n  </select>\n  <span>View: </span>\n  <select leisureId='viewSelect'>\n    <option value=coding>Coding</option>\n    <option value=debugging>Debugging</option>\n    <option value=testing>Testing</option>\n    <option value=running>Running</option>\n  </select>\n</div>");
    spacer = createNode("<div LeisureOutput  contentEditable='false' class='leisure_space'></div>");
    el.insertBefore(spacer, el.firstChild);
    el.insertBefore(controlDiv, el.firstChild);
    _ref2 = getElements(el, ['downloadLink', 'viewLink', 'saveButton', 'testButton', 'testResults', 'autorunTests', 'themeSelect', 'viewSelect']), el.leisureDownloadLink = _ref2[0], el.leisureViewLink = _ref2[1], saveButton = _ref2[2], testButton = _ref2[3], el.testResults = _ref2[4], el.autorun = _ref2[5], themeSelect = _ref2[6], viewSelect = _ref2[7];
    controlDiv.addEventListener('click', function(evt) {
      if (document.body.classList.contains('hideControls')) {
        return document.body.classList.remove('hideControls');
      } else {
        return document.body.classList.add('hideControls');
      }
    });
    saveButton.addEventListener('click', function(evt) {
      return saveProgram(el);
    });
    testButton.addEventListener('click', function() {
      return runTests(el);
    });
    themeSelect.value = (_ref3 = el.leisureTheme) != null ? _ref3 : 'thin';
    themeSelect.addEventListener('change', function(evt) {
      return changeTheme(el, evt.target.value);
    });
    viewSelect.addEventListener('change', function(evt) {
      return changeView(el, evt.target.value);
    });
    el.autorun.checked = el.autorunState;
    el.autorun.addEventListener('change', function(evt) {
      el.autorunState = el.autorun.checked;
      if (el.autorunState) {
        return runTests(el);
      }
    });
    return markupButtons(controlDiv);
  };

  saveProgram = function() {
    return write(filename, getMDDocument(), (function() {
      return alert("Saving " + filename);
    }), function(err) {
      console.log(err);
      alert(err.stack);
      throw err;
    });
  };

  showFilename = function(el) {
    if (el && filename) {
      el.innerHTML = "Save: " + (filename.pathName());
      return el.title = filename.toString();
    }
  };

  showFilenames = function() {
    var node, _i, _len, _ref2, _results;

    _ref2 = document.body.querySelectorAll('[leisureId=saveButton]');
    _results = [];
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      node = _ref2[_i];
      _results.push(showFilename(node));
    }
    return _results;
  };

  setFilename = function(newName) {
    console.log("SET FILENAME: " + newName);
    filename = newName instanceof URI ? newName : new URI(document.location.href, newName);
    return showFilenames();
  };

  markupButtons = function(el) {
    var btn, _i, _len, _ref2, _results;

    _ref2 = el.querySelectorAll('button');
    _results = [];
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      btn = _ref2[_i];
      _results.push(markupButton(btn));
    }
    return _results;
  };

  markupButton = function(btn) {
    var cl, _i, _len, _results;

    _results = [];
    for (_i = 0, _len = buttonClasses.length; _i < _len; _i++) {
      cl = buttonClasses[_i];
      _results.push(btn.classList.add(cl));
    }
    return _results;
  };

  getElements = function(el, ids) {
    var els, id, node, _i, _j, _len, _len1, _ref2, _results;

    els = {};
    _ref2 = el.querySelectorAll('[leisureId]');
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      node = _ref2[_i];
      els[node.getAttribute('leisureId')] = node;
    }
    _results = [];
    for (_j = 0, _len1 = ids.length; _j < _len1; _j++) {
      id = ids[_j];
      _results.push(els[id]);
    }
    return _results;
  };

  escapeHtml = function(str) {
    if (typeof str === 'string') {
      return str.replace(/[<>]/g, function(c) {
        switch (c) {
          case '<':
            return '&lt;';
          case '>':
            return '&gt;';
        }
      });
    } else {
      return str;
    }
  };

  loadProgram = function(el, files) {
    var fr;

    el = getBox;
    fr = new FileReader();
    fr.onloadend = function(evt) {
      el.innerHTML = escapeHtml(fr.result);
      return initNotebook(el);
    };
    return fr.readAsBinaryString(files.item(0));
  };

  configureSaveLink = function(el) {
    var blob, builder;

    window.URL = window.URL || window.webkitURL;
    builder = new WebKitBlobBuilder();
    builder.append(getElementCode(el));
    blob = builder.getBlob('text/plain');
    el.leisureDownloadLink.href = window.URL.createObjectURL(blob);
    return el.leisureViewLink.href = window.URL.createObjectURL(blob);
  };

  getElementCode = function(el) {
    var r;

    r = document.createRange();
    r.selectNode(el);
    c = r.cloneContents().firstChild;
    removeOldDefs(c);
    return c.textContent;
  };

  runTests = function(el) {
    var failed, passed, resultsClass, test, _i, _len, _ref2;

    passed = 0;
    failed = 0;
    _ref2 = el.querySelectorAll('.codeMainTest');
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      test = _ref2[_i];
      if (runTest(test)) {
        passed++;
      } else {
        failed++;
      }
    }
    if (el.testResults) {
      resultsClass = el.testResults.classList;
      resultsClass.remove('notrun');
      if (!failed) {
        resultsClass.remove('failed');
        resultsClass.add('passed');
        return el.testResults.innerHTML = passed;
      } else {
        resultsClass.remove('passed');
        resultsClass.add('failed');
        return el.testResults.innerHTML = "" + passed + "/" + failed;
      }
    }
  };

  changeTheme = function(el, value) {
    var theme;

    theme = value;
    el.leisureTheme = theme;
    return el.className = theme;
  };

  changeView = function(el, value) {
    debug = value === 'debugging';
    return alert('new view: ' + value + ", debug: " + debug);
  };

  unwrap = function(node) {
    var parent;

    parent = node.parentNode;
    if (parent) {
      while (node.firstChild != null) {
        parent.insertBefore(node.firstChild, node);
      }
      return parent.removeChild(node);
    }
  };

  removeOldDefs = function(el) {
    var extracted, m, node, txt, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref2, _ref3, _ref4;

    el.leisureDownloadLink = null;
    el.leisureViewLink = null;
    extracted = [];
    _ref2 = el.querySelectorAll("[LeisureOutput]");
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      node = _ref2[_i];
      remove(node);
    }
    _ref3 = el.querySelectorAll("[generatednl]");
    for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
      node = _ref3[_j];
      txt = node.lastChild;
      if (txt.nodeType === 3 && txt.data[txt.data.length - 1] === '\n') {
        txt.data = txt.data.substring(0, txt.data.length - 1);
      }
    }
    _ref4 = el.querySelectorAll("[Leisure]");
    for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {
      node = _ref4[_k];
      if (addsLine(node) && (node.firstChild != null)) {
        extracted.push(node.firstChild);
      }
      unwrap(node);
    }
    for (_l = 0, _len3 = extracted.length; _l < _len3; _l++) {
      node = extracted[_l];
      if ((node.parentNode != null) && !addsLine(node) && (node.previousSibling != null) && !addsLine(node.previousSibling)) {
        node.parentNode.insertBefore(text('\n'), node);
      }
    }
    el.textContent = el.textContent.replace(/\uFEFF/g, '');
    txt = el.lastChild;
    if ((txt != null ? txt.nodeType : void 0) === 3 && (m = txt.data.match(/(^|[^\n])(\n+)$/))) {
      return txt.data = txt.data.substring(0, txt.data.length - m[2].length);
    }
  };

  markupDefs = function(el, defs) {
    var auto, bod, body, bx, def, i, main, name, notebookAutoNodes, pgm, s, test, tests, totalTests, _i, _j, _len, _len1, _ref2, _ref3;

    pgm = '';
    auto = '';
    totalTests = 0;
    notebookAutoNodes = [];
    for (_i = 0, _len = defs.length; _i < _len; _i++) {
      i = defs[_i];
      main = i.main, name = i.name, def = i.def, body = i.body, tests = i.tests;
      if (name) {
        bx = box(main, 'codeMain', true);
        bx.appendChild(codeSpan(name, 'codeName'));
        bx.appendChild(textNode(def));
        bod = codeSpan(textNode(body), 'codeBody');
        bod.appendChild(textNode('\n'));
        bod.setAttribute('generatedNL', '');
        bx.appendChild(bod);
        bx.addEventListener('blur', (function() {
          return evalDoc(el);
        }), true);
        markPartialApplies(bx);
        addDefControls(bx);
        pgm += "" + name + " " + def + " " + body + "\n";
      } else if (main != null) {
        bx = box(main, 'codeMainExpr', true);
        s = codeSpan(textNode(body), 'codeExpr');
        s.setAttribute('generatedNL', '');
        s.appendChild(textNode('\n'));
        bx.appendChild(s);
        markPartialApplies(bx);
        if (((_ref2 = main.leisureAuto) != null ? _ref2.mode : void 0) === 'silent') {
          auto += "" + body + "\n";
        } else {
          if (((_ref3 = main.leisureAuto) != null ? _ref3.mode : void 0) === 'notebook') {
            notebookAutoNodes.push(bx);
          }
          makeOutputBox(bx);
        }
      }
      for (_j = 0, _len1 = tests.length; _j < _len1; _j++) {
        test = tests[_j];
        replaceRange(test, makeTestBox(test.leisureTest));
        totalTests++;
      }
    }
    return [pgm, auto, totalTests, notebookAutoNodes];
  };

  getDefName = function(ast) {
    if (ast instanceof Leisure_anno && getAnnoName(ast) === 'definition') {
      return getAnnoData(ast);
    } else {
      return null;
    }
  };

  getAst = function(bx, def) {
    var defName, _ref2;

    if (bx.ast != null) {
      patchFuncAst(bx.ast);
      bx.setAttribute('leisureFunc', (_ref2 = bx.ast.leisureName) != null ? _ref2 : '');
      return bx.ast;
    } else {
      def = def || bx.textContent;
      defName = getDefName(runMonad(L_newParseLine()(function() {
        return Nil;
      })(function() {
        return def;
      })));
      setAst(bx, (defName ? {
        leisureName: defName,
        leisureSource: def
      } : {}));
      return bx.ast;
    }
  };

  setAst = function(bx, ast) {
    bx.ast = ast;
    return patchFuncAst(ast);
  };

  patchFuncAst = function(ast) {
    var parent;

    if ((ast != null ? ast.leisureName : void 0) != null) {
      parent = window[nameSub(ast.leisureName)];
      if (parent != null) {
        parent.ast = ast;
        parent.src = ast.leisureSource;
        return update("ast-" + ast.leisureName);
      }
    }
  };

  markPartialApplies = function(bx, def) {};

  textNode = function(text) {
    return document.createTextNode(text);
  };

  nodeFor = function(text) {
    if (typeof text === 'string') {
      return textNode(text);
    } else {
      return text;
    }
  };

  evalOutput = function(exBox, nofocus, cont) {
    var selector, stopUpdates, updateSelector, _ref2;

    exBox = getBox(exBox);
    if (!nofocus) {
      focusBox(exBox);
    }
    cleanOutput(exBox, true);
    selector = findUpdateSelector(exBox.source);
    if (selector) {
      exBox.setAttribute('leisureUpdate', selector);
    }
    makeOutputControls(exBox);
    _ref2 = getElements(exBox.firstChild, ['chooseUpdate', 'stopUpdates']), updateSelector = _ref2[0], stopUpdates = _ref2[1];
    updateSelector.addEventListener('change', function(evt) {
      return setUpdate(exBox, evt.target.value, true);
    });
    updateSelector.addEventListener('keydown', function(e) {
      c = e.charCode || e.keyCode || e.which;
      if (c === ENTER) {
        e.preventDefault();
        return updateSelector.blur();
      }
    });
    updateSelector.value = (exBox.getAttribute('leisureUpdate')) || '';
    exBox.updateSelector = updateSelector;
    return evalBox(exBox.source, exBox, cont);
  };

  findUpdateSelector = function(box) {
    var def, defType, leading, matched, name, u;

    if (def = box.textContent.match(L_defPat())) {
      matched = def[0], leading = def[1], name = def[2], defType = def[3];
      if (u = leading.match(updatePat)) {
        return u[3];
      }
    }
  };

  getExprSource = function(box) {
    var b, s;

    s = window.getSelection();
    b = getBox(s.focusNode);
    if (b !== box || !s.rangeCount || s.getRangeAt(0).collapsed) {
      return box.textContent;
    } else {
      return getRangeText(s.getRangeAt(0));
    }
  };

  setUpdate = function(el, channel, preserveSource) {
    var ast, def, defType, index, leading, matched, name, r, txt, u;

    el.setAttribute('leisureUpdate', channel);
    if (channel) {
      el.classList.add('ui-state-highlight');
    } else {
      el.classList.remove('ui-state-highlight');
    }
    ast = getAst(el.source);
    txt = el.source.textContent;
    if (!preserveSource && (def = txt.match(L_defPat()))) {
      matched = def[0], leading = def[1], name = def[2], defType = def[3];
      index = def.index;
      if (u = leading.match(updatePat)) {
        index += u.index + u[1].length + u[2].length;
        r = makeRange(el.source, index, index + u[3].length);
        r.deleteContents();
      } else {
        r = makeRange(el.source, index + leading.length, index + leading.length);
      }
      r.insertNode(textNode(channel));
      return el.source.normalize();
    }
  };

  hasMonadOutput = function(box) {
    var _ref2, _ref3;

    return ((_ref2 = box.firstElementChild) != null ? (_ref3 = _ref2.nextElementSibling) != null ? _ref3.nextElementSibling : void 0 : void 0) != null;
  };

  checkHideSource = function(box) {
    var hs;

    if (!box.hideOutputSource && hasMonadOutput(box)) {
      box.hideOutputSource = true;
      hs = createNode("<button class='editToggle' style='float:right'></button>");
      markupButton(hs);
      hs.addEventListener('click', function() {
        return toggleEdit(hs);
      });
      return box.firstElementChild.appendChild(hs);
    }
  };

  makeOutputControls = function(exBox) {
    if (exBox.firstChild.firstChild === exBox.firstChild.lastChild) {
      exBox.firstChild.insertBefore(createFragment("<button onclick='Notebook.clearOutputBox(this)'>X</button>"), exBox.firstChild.firstChild);
      exBox.firstChild.appendChild(createFragment("<button onclick='Notebook.makeTestCase(this)' leisureId='makeTestCase'>Make test\ncase</button><b>Update: </b><input type='text'\nplaceholder='Click for updating' list='channelList' leisureId='chooseUpdate'></input><button\nonclick='Notebook.clearUpdates(this)' leisureId='stopUpdates'>Stop Updates</button>"));
      markupButtons(exBox);
      return exBox.classList.add('fatControls');
    }
  };

  showOutputSource = function(output) {
    output.classList.remove('hidingSource');
    return output.source.style.display = '';
  };

  hideOutputSource = function(output) {
    console.log("HIDE: " + output);
    output.classList.add('hidingSource');
    return output.source.style.display = 'none';
  };

  toggleEdit = function(toggleButton) {
    var output;

    output = getBox(toggleButton);
    if (output.classList.contains('hidingSource')) {
      return showOutputSource(output);
    } else {
      return hideOutputSource(output);
    }
  };

  clearUpdates = function(widget, preserveSource) {
    var exBox;

    exBox = getBox(widget);
    exBox.updateSelector.value = '';
    return setUpdate(exBox, '', preserveSource);
  };

  update = function(type, env) {
    var node, _i, _len, _ref2, _results;

    env = env != null ? env : defaultEnv;
    _ref2 = env.owner.querySelectorAll("[leisureUpdate~='" + type + "']");
    _results = [];
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      node = _ref2[_i];
      _results.push(evalOutput(node, true));
    }
    return _results;
  };

  clearOutputBox = function(exBox) {
    clearUpdates(exBox, true);
    return cleanOutput(exBox);
  };

  cleanOutput = function(exBox, preserveControls) {
    var fc, _results;

    exBox = getBox(exBox);
    exBox.classList.remove('fatControls');
    if (!preserveControls) {
      exBox.hideOutputSource = null;
      fc = exBox.firstChild;
      fc.removeChild(fc.firstChild);
      while (fc.firstChild !== fc.lastChild) {
        fc.removeChild(fc.lastChild);
      }
    }
    _results = [];
    while (exBox.firstChild !== exBox.lastChild) {
      _results.push(exBox.removeChild(exBox.lastChild));
    }
    return _results;
  };

  makeTestCase = function(exBox) {
    var box, output, source, test;

    output = getBox(exBox);
    source = output.source;
    test = {
      expr: source.textContent.trim(),
      expected: escapeHtml(Parse.print(output.result))
    };
    box = makeTestBox(test, owner(exBox));
    source.parentNode.insertBefore(box, source);
    remove(source);
    remove(output);
    box.parentNode.insertBefore(textNode('\uFEFF'), box);
    box.parentNode.insertBefore(textNode('\uFEFF'), box.nextSibling);
    if (owner(box).autorunState) {
      return clickTest(box);
    }
  };

  makeTestBox = function(test, owner, src) {
    var bx, s;

    src = src != null ? src : "#@test " + (JSON.stringify(test.expr)) + "\n#@expected " + (JSON.stringify(test.expected));
    s = codeSpan(src, 'codeTest');
    s.appendChild(textNode('\n'));
    s.setAttribute('generatedNL', '');
    bx = codeBox('codeMainTest');
    bx.testSrc = s;
    bx.setAttribute('class', 'codeMainTest notrun');
    bx.setAttribute('contenteditable', 'false');
    bx.appendChild(s);
    bx.addEventListener('click', (function() {
      return clickTest(bx);
    }), true);
    bx.test = test;
    return bx;
  };

  clickTest = function(bx) {
    var exprBox, r, sp;

    if (bx.classList.contains('notrun')) {
      return runTest(bx);
    } else {
      r = document.createRange();
      r.setStartBefore(bx);
      r.setEndAfter(bx);
      r.deleteContents();
      sp = codeSpan(bx.test.expr, 'codeExpr');
      sp.setAttribute('generatedNL', '');
      exprBox = box(r, 'codeMainExpr', true);
      exprBox.appendChild(sp);
      return makeOutputBox(exprBox);
    }
  };

  runTest = function(bx) {
    var passed, test;

    test = bx.test;
    passed = true;
    processLine(prepExpr(test.expr), {
      values: {},
      require: req,
      write: function(str) {
        return console.log(str);
      },
      debug: debug,
      prompt: function(msg, cont) {
        return cont(null);
      },
      processResult: function(result, ast) {
        return passed = showResult(bx, escapeHtml(String(result)), escapeHtml(test.expected));
      },
      err: function() {
        return passed = false;
      },
      presentValue: function(x) {
        return x;
      }
    }, identity);
    return passed;
  };

  showResult = function(bx, actual, expected) {
    var cl;

    cl = bx.classList;
    cl.remove('notrun');
    if (actual === expected) {
      cl.remove('failed');
      cl.add('passed');
      bx.testSrc.innerHTML = "#@test " + (JSON.stringify(bx.test.expr)) + "\n#@expected " + (JSON.stringify(bx.test.expected));
    } else {
      cl.remove('passed');
      cl.add('failed');
      bx.testSrc.innerHTML = "#@test " + (JSON.stringify(bx.test.expr)) + "\n#@expected " + (JSON.stringify(bx.test.expected)) + "\n#@result " + (JSON.stringify(actual));
      console.log("expected <" + expected + "> but got <" + actual + ">");
    }
    return actual === expected;
  };

  prepExpr = function(txt) {
    return txt;
  };

  envFor = function(box) {
    var env, exBox, widget;

    exBox = getBox(box);
    widget = null;
    env = {
      fileSettings: {},
      debug: debug,
      finishedEvent: function(evt, channel) {
        return update(channel != null ? channel : 'app', this);
      },
      owner: owner(box),
      box: box,
      require: req,
      write: function(msg) {
        var div;

        div = document.createElement('div');
        div.classList.add('outputDiv');
        div.innerHTML = "" + msg + "\n";
        exBox.appendChild(div);
        checkHideSource(exBox);
        return markupButtons(exBox);
      },
      getWidget: function() {
        if (!widget) {
          widget = document.createElement("DIV");
          exBox.appendChild(widget);
        }
        return widget;
      },
      destroyWidget: function() {
        if (widget) {
          return remove(widget);
        }
      },
      prompt: function(msg, cont) {
        return cont(window.prompt(msg));
      },
      processResult: function(result, ast) {
        box.result = result;
        return setAst(box, ast);
      },
      presentValue: presentValue,
      err: function(err) {
        var btn, _ref2;

        btn = box.querySelector('[leisureId="makeTestCase"]');
        if (btn) {
          remove(btn);
        }
        return this.write("<div class='errorDiv'>" + escapeHtml("ERROR: " + (err.leisureContext ? "" + err + ":\n" + (leisureContextString(err)) + "\n" : '') + ((_ref2 = err.stack) != null ? _ref2 : err)) + "</div>");
      },
      cleanup: function() {
        this.destroyWidget();
        if (root.lastEnv === env) {
          return root.lastEnv = null;
        }
      }
    };
    env.__proto__ = defaultEnv;
    env.fileSettings.uri = new URI(document.location.href);
    root.lastEnv = env;
    return env;
  };

  leisureContextString = function(err) {
    var func, offset;

    return ((function() {
      var _i, _len, _ref2, _ref3, _results;

      _ref2 = err.leisureContext.toArray();
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        _ref3 = _ref2[_i], func = _ref3[0], offset = _ref3[1];
        _results.push(linkSource(func, offset));
      }
      return _results;
    })()).join('\n');
  };

  linkSource = function(funcName, offset) {};

  showSource = function(funcName, offset) {};

  makeOutputBox = function(source) {
    var cl, node, _i, _len, _ref2;

    node = document.createElement('div');
    node.setAttribute('LeisureOutput', '');
    node.setAttribute('Leisure', '');
    node.setAttribute('LeisureBox', '');
    _ref2 = boxClasses.output;
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      cl = _ref2[_i];
      node.classList.add(cl);
    }
    node.setAttribute('contentEditable', 'false');
    node.source = source;
    source.output = node;
    node.innerHTML = "<div class='controls'><button onclick='Notebook.evalOutput(this)'>-&gt;</button></div>";
    markupButtons(node);
    source.parentNode.insertBefore(node, source.nextSibling);
    return node;
  };

  codeSpan = function(text, boxType) {
    var node;

    node = document.createElement('span');
    node.setAttribute(boxType, '');
    node.setAttribute('Leisure', '');
    node.setAttribute('class', boxType);
    if (text) {
      node.appendChild(nodeFor(text));
    }
    return node;
  };

  codeBox = function(boxType) {
    var node;

    node = document.createElement('div');
    addBoxClasses(node, boxType);
    node.setAttribute('LeisureBox', '');
    node.setAttribute('Leisure', '');
    node.addEventListener('compositionstart', function(e) {
      return checkMutateFromModification(e);
    });
    return node;
  };

  box = function(range, boxType, empty) {
    var node;

    node = codeBox(boxType);
    if (empty) {
      range.deleteContents();
    } else {
      node.appendChild(range.extractContents());
    }
    range.insertNode(node);
    return node;
  };

  linePat = new RegExp("(" + (L_linePat().source) + ")");

  findDefs = function(el) {
    var def, ranges, rest, rng, txt;

    txt = el.textContent;
    rest = txt;
    ranges = [];
    while ((def = rest.match(L_unanchoredDefPat())) && def[1].length !== rest.length) {
      rng = getRanges(el, txt, rest, def, txt.length - rest.length);
      if (rng) {
        rest = rng.next;
        if (rng) {
          ranges.push(rng);
        } else {
          break;
        }
      } else {
        break;
      }
    }
    return ranges;
  };

  testPat = /(#@test([^\n]*)\n#@expected([^\n]*))\n/m;

  getRanges = function(el, txt, rest, def, restOff) {
    var body, bodyStart, defType, endPat, ex, exEnd, leadOff, leading, leadingSpaces, lm, m, m2, mainEnd, mainStart, matchStart, matched, name, nameEnd, nameRaw, next, outerRange, r, rest1, t, tOff, tests, textStart, _ref2, _ref3, _ref4, _ref5;

    _ref2 = m = def, matched = _ref2[0], leading = _ref2[1], nameRaw = _ref2[2], defType = _ref2[3];
    if (!rest.trim()) {
      return null;
    } else if (m == null) {
      return [makeRange(el, restOff, txt.length), null, null, [], ''];
    } else {
      tests = [];
      matchStart = restOff + m.index;
      if (defType == null) {
        name = null;
      } else if (nameRaw[0] === ' ') {
        name = null;
        defType = null;
      } else {
        name = nameRaw.trim() || null;
      }
      rest1 = rest.substring((defType ? matched : leading).length);
      endPat = rest1.match(/\n+[^\s]|\n?$/);
      next = endPat ? rest1.substring(endPat.index) : rest1;
      mainEnd = txt.length - next.length;
      t = leading;
      leadOff = tOff = restOff;
      while (m2 = t.match(testPat)) {
        r = makeRange(el, tOff + m2.index, tOff + m2.index + m2[1].length);
        r.leisureTest = {
          expr: JSON.parse(m2[2]),
          expected: JSON.parse(m2[3])
        };
        tests.push(r);
        tOff += m2.index + m2[1].length;
        t = leading.substring(tOff - leadOff);
      }
      if (name) {
        mainStart = matchStart + ((_ref3 = leading != null ? leading.length : void 0) != null ? _ref3 : 0);
        nameEnd = mainStart + name.length;
        leadingSpaces = (rest1.match(/^\s*/))[0].length;
        bodyStart = txt.length - (rest1.length - leadingSpaces);
        outerRange = makeRange(el, mainStart, mainEnd);
        return {
          main: outerRange,
          name: txt.substring(mainStart, nameEnd),
          def: defType,
          body: txt.substring(bodyStart, mainEnd),
          tests: tests,
          next: next
        };
      } else {
        mainStart = defType === '=' ? restOff + m.index + m[0].length : matchStart + ((_ref4 = leading != null ? leading.length : void 0) != null ? _ref4 : 0);
        ex = txt.substring(mainStart, mainEnd).match(/^(.*[^ \n])[ \n]*$/);
        exEnd = ex ? mainStart + ex[1].length : mainEnd;
        body = txt.substring(mainStart, exEnd);
        if (body.trim()) {
          textStart = restOff + m.index + (t ? leading.length - t.length : 0);
          if ((t != null) && (lm = t.match(/^[ \n]+/))) {
            textStart += lm[0].length;
          }
          if (m = t.match(/(?:^|\n)#@auto( +[^\n]*)?(\n|$)/)) {
            outerRange = makeRange(el, textStart, exEnd);
            outerRange.leisureAuto = JSON.parse("{" + ((_ref5 = m[1]) != null ? _ref5 : '') + "}");
            if (outerRange.leisureAuto.mode === 'notebook') {
              outerRange.leisureNode = el;
              outerRange.leisureStart = textStart;
            }
            return {
              main: outerRange,
              name: null,
              def: null,
              body: txt.substring(textStart, exEnd),
              tests: tests,
              fullText: txt.substring(textStart, exEnd),
              next: next
            };
          } else {
            outerRange = makeRange(el, textStart, exEnd);
            return {
              main: outerRange,
              name: null,
              def: null,
              body: txt.substring(textStart, exEnd),
              tests: tests,
              next: next
            };
          }
        } else {
          return {
            main: null,
            name: null,
            def: null,
            body: null,
            tests: tests,
            next: next
          };
        }
      }
    }
  };

  makeRange = function(el, off1, off2) {
    var node, offset, range, _ref2, _ref3;

    range = document.createRange();
    _ref2 = grp(el, off1, false), node = _ref2[0], offset = _ref2[1];
    if ((offset != null) && offset > 0) {
      range.setStart(node, offset);
    } else {
      range.setStartBefore(node);
    }
    if (off2 != null) {
      _ref3 = grp(el, off2, true), node = _ref3[0], offset = _ref3[1];
      if (offset != null) {
        range.setEnd(node, offset);
      } else {
        range.setEndAfter(node);
      }
    }
    return range;
  };

  grp = function(node, charOffset, end) {
    var child, offset, ret, _ref2;

    _ref2 = ret = getRangePosition(node.firstChild, charOffset, end), child = _ref2[0], offset = _ref2[1];
    if (child) {
      return ret;
    } else if (node.lastChild) {
      return nodeEnd(node.lastChild);
    } else {
      return [node, end ? 1 : 0];
    }
  };

  getRangePosition = function(node, charOffset, end) {
    var newNode, newOff, ret, _ref2;

    if (!node) {
      return [null, charOffset];
    } else if (node.nodeType === 3) {
      if (node.length > (end ? charOffset - 1 : charOffset)) {
        return [node, charOffset];
      } else {
        ret = continueRangePosition(node, charOffset - node.length, end);
        return ret;
      }
    } else if (node.nodeName === 'BR') {
      if (charOffset === (end ? 1 : 0)) {
        return [node];
      } else {
        return continueRangePosition(node, charOffset, end);
      }
    } else if (node.firstChild != null) {
      _ref2 = getRangePosition(node.firstChild, charOffset, end), newNode = _ref2[0], newOff = _ref2[1];
      if (newNode != null) {
        return [newNode, newOff];
      } else {
        return continueRangePosition(node, newOff, end);
      }
    } else {
      return continueRangePosition(node, charOffset, end);
    }
  };

  continueRangePosition = function(node, charOffset, end) {
    var newOff;

    newOff = charOffset - ((addsLine(node)) || ((node.nextSibling != null) && (addsLine(node.nextSibling))) ? 1 : 0);
    if (end && (newOff === 1 || charOffset === 1)) {
      return nodeEnd(node);
    } else if (node.nextSibling != null) {
      return getRangePosition(node.nextSibling, newOff, end);
    } else {
      return continueRangePosition(node.parentNode, newOff, end);
    }
  };

  nodeEnd = function(node) {
    return [node, node.nodeType === 3 ? node.length : node.childNodes.length - 1];
  };

  addsLine = function(node) {
    return (node != null ? node.nodeType : void 0) === 1 && (node.nodeName === 'BR' || (getComputedStyle(node, null).display === 'block' && node.childNodes.length > 0));
  };

  req = function(file, cont) {
    var name, s;

    if (!(file.match(/\.js$/))) {
      file = "" + file + ".js";
    }
    name = file.substring(0, file.length - 3);
    s = document.createElement('script');
    s.setAttribute('src', file);
    s.addEventListener('load', function() {
      Leisure.processDefs(global[name], global);
      if (cont) {
        return cont(L_false());
      }
    });
    return document.head.appendChild(s);
  };

  postLoadQueue = [];

  loaded = false;

  queueAfterLoad = function(func) {
    if (loaded) {
      return func();
    } else {
      return postLoadQueue.push(func);
    }
  };

  /*
  # handle focus manually, because grabbing focus and blur events doesn't seem to work for the parent
  */


  docFocus = null;

  codeFocus = null;

  findCurrentCodeHolder = function() {
    var _ref2;

    return focusBox((_ref2 = window.getSelection()) != null ? _ref2.focusNode : void 0);
  };

  focusBox = function(box) {
    var newCode, old, _ref2;

    newCode = null;
    while (box && (box.nodeType !== 1 || !isLeisureCode(box))) {
      if (box.nodeType === 1 && ((box.getAttribute('LeisureBox')) != null)) {
        newCode = box;
      }
      box = box.parentNode;
    }
    if (box !== docFocus) {
      if (docFocus != null) {
        docFocus.classList.remove('focused');
      }
      docFocus = box;
      if (box != null) {
        if ((_ref2 = box.classList) != null) {
          _ref2.add('focused');
        }
      }
    }
    if (newCode !== codeFocus) {
      old = codeFocus;
      codeFocus = newCode;
      if (old) {
        return acceptCode(old);
      }
    }
  };

  owner = function(box) {
    while (box && (box.nodeType !== 1 || !isLeisureCode(box))) {
      box = box.parentNode;
    }
    return box;
  };

  hiddenPat = /(^|\n)#@hidden *(\n|$)/;

  evalBox = function(box, envBox, cont) {
    var env;

    env = envBox != null ? envFor(envBox) : null;
    processLine(box.textContent, env, function(result) {
      if (env != null) {
        if (typeof env.cleanup === "function") {
          env.cleanup();
        }
      }
      return (cont != null ? cont : function(x) {
        return x;
      })(result);
    });
    getAst(box);
    if (box.output && hasMonadOutput(box.output) && box.textContent.match(hiddenPat)) {
      return hideOutputSource(box.output);
    } else if (box.textContent.match(hiddenPat)) {
      return console.log("NO MONAD, BUT MATCHES HIDDEN");
    }
  };

  acceptCode = function(box) {
    if ((box.getAttribute('codemain')) != null) {
      evalBox(box);
      update('compile');
      if (owner(box).autorunState) {
        return runTests(owner(box));
      }
    }
  };

  errString = function(err) {
    return err.stack;
  };

  evaluating = false;

  evaluationQueue = [];

  evalNodes = function(nodes) {
    if (evaluating) {
      return evaluationQueue.push(nodes);
    } else {
      return chainEvalNodes(nodes);
    }
  };

  chainEvalNodes = function(nodes) {
    evaluating = true;
    return runAuto(nodes, 0, function() {
      if (evaluationQueue.length) {
        return chainEvalNodes(evaluationQueue.shift());
      } else {
        return evaluating = false;
      }
    });
  };

  evalDoc = function(el) {
    var auto, autoNodes, e, err, pgm, x, _ref2;

    _ref2 = initNotebook(el), pgm = _ref2[0], auto = _ref2[1], x = _ref2[2], autoNodes = _ref2[3];
    try {
      if (auto || autoNodes) {
        auto = "do\n  " + ((auto != null ? auto : '#').trim().replace(/\n/g, '\n  ')) + "\n  delay\n  finishLoading";
        global.noredefs = false;
        Notebook.queueAfterLoad(function() {
          evalDocCode(el, pgm);
          if (el.autorunState) {
            runTests(el);
          }
          return evalNodes(autoNodes);
        });
        e = envFor(el);
        e.write = function() {};
        e.err = function(err) {
          return alert('bubba ' + errString(err));
        };
        return processLine(auto, e, identity);
      } else {
        return evalDocCode(el, pgm);
      }
    } catch (_error) {
      err = _error;
      return showError(err, "Error compiling " + pgm);
    }
  };

  runAuto = function(nodes, index, cont) {
    var node;

    if (index < nodes.length) {
      console.log("RUNNING AUTO: " + index);
      node = nodes[index];
      console.log("evalOutput", node, node.output);
      return evalOutput(node.output, false, function() {
        return runAuto(nodes, index + 1, cont);
      });
    } else {
      return (cont != null ? cont : function() {})();
    }
  };

  processLine = function(text, env, cont) {
    var err;

    if (text) {
      try {
        return runMonad(L_newParseLine()(function() {
          return Nil;
        })(function() {
          return text;
        }), env, function(ast) {
          var err, result;

          try {
            if (getType(ast) === 'parseErr') {
              env.write(env.presentValue(ast));
              if (typeof env.processResult === "function") {
                env.processResult(ast);
              }
              return cont(ast);
            } else {
              result = eval("(" + (gen(ast)) + ")");
              env.write(env.presentValue(result));
              if (isMonad(result)) {
                return runMonad(result, env, function(result) {
                  env.processResult(result);
                  return cont(result);
                });
              } else {
                if (typeof env.processResult === "function") {
                  env.processResult(result);
                }
                return cont(result);
              }
            }
          } catch (_error) {
            err = _error;
            console.log("ERROR: " + err.stack);
            env.write(env.presentValue(err.stack));
            if (typeof env.processResult === "function") {
              env.processResult(err.stack);
            }
            return cont(err.stack);
          }
        });
      } catch (_error) {
        err = _error;
        console.log("ERROR: " + err.stack);
        env.write(env.presentValue(err.stack));
        if (typeof env.processResult === "function") {
          env.processResult(err.stack);
        }
        return cont(err.stack);
      }
    } else {
      return cont('');
    }
  };

  showError = function(e, msg) {
    console.log(msg);
    console.log(e);
    console.log(e.stack);
    return alert(e.stack);
  };

  evalDocCode = function(el, pgm) {
    return runMonad(L_runFile()(function() {
      return pgm;
    }), defaultEnv, function(result) {
      var node, _i, _len, _ref2, _results;

      _ref2 = el.querySelectorAll('[codeMain]');
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        node = _ref2[_i];
        _results.push(getAst(node));
      }
      return _results;
    });
  };

  define('getDocument', function() {
    return makeSyncMonad(function(env, cont) {
      return cont(peerGetDocument());
    });
  });

  define('getLink', function() {
    return 0;
  });

  define('replaceDocument', function() {
    return function(str) {
      return makeSyncMonad(function(env, cont) {
        replaceContents(str());
        return cont(L_true());
      });
    };
  });

  define('gdriveOpen', function() {
    return makeMonad(function(env, cont) {
      return GdriveStorage.runOpen(function(json) {
        var _ref2;

        if ((json != null ? json.action : void 0) === 'picked' && ((_ref2 = json.docs) != null ? _ref2.length : void 0) > 0) {
          return GdriveStorage.loadFile(json.docs[0].id, function() {
            return cont(_some()(function() {
              return json.docs[0].title;
            }));
          });
        } else {
          return cont(_none());
        }
      });
    });
  });

  define('getFilename', function() {
    return makeSyncMonad(function(env, cont) {
      var _ref2;

      return cont((_ref2 = filename != null ? filename.pathName() : void 0) != null ? _ref2 : '');
    });
  });

  define('setURI', function() {
    return function(uri) {
      return makeSyncMonad(function(env, cont) {
        setFilename(uri());
        return cont(L_true());
      });
    };
  });

  define('getURI', function() {
    return makeSyncMonad(function(env, cont) {
      var _ref2;

      return cont((_ref2 = filename != null ? filename.toString() : void 0) != null ? _ref2 : '');
    });
  });

  define('finishLoading', function() {
    return makeMonad(function(env, cont) {
      var i, _i, _len;

      loaded = true;
      for (_i = 0, _len = postLoadQueue.length; _i < _len; _i++) {
        i = postLoadQueue[_i];
        i();
      }
      postLoadQueue = [];
      return cont(L_false());
    });
  });

  define('markupButtons', function() {
    return makeSyncMonad(function(env, cont) {
      if (env.box) {
        markupButtons(env.box);
      }
      return cont(L_false());
    });
  });

  define('alert', function() {
    return function(str) {
      return makeSyncMonad(function(env, cont) {
        window.alert(str());
        return cont(L_false());
      });
    };
  });

  define('bindEvent', function() {
    return function(selector) {
      return function(eventName) {
        return function(func) {
          return makeSyncMonad(function(env, cont) {
            var node;

            node = env.box.querySelector(selector());
            if (!node) {
              node = document.body.querySelector(selector());
            }
            console.log("ADDING EVENT: " + (selector()) + " " + (eventName()) + " NODE: " + node);
            if (node) {
              node.addEventListener(eventName(), function(e) {
                console.log("EVENT: " + (selector()) + " " + (eventName()) + " " + (func()));
                return runMonad(func()(function() {
                  return e;
                }), envFor(e.target), function() {});
              });
            }
            return cont(L_false());
          });
        };
      };
    };
  });

  define('quit', function() {
    return window.close();
  });

  define('config', function() {
    return function(expr) {
      return makeSyncMonad(function(env, cont) {
        switch (expr()) {
          case 'autoTest':
            autoRun(env.owner, true);
        }
        return cont(L_false());
      });
    };
  });

  define('notebookSelection', function() {
    return function(func) {
      return makeSyncMonad(function(env, cont) {
        var bx, offset, p1, p2, r, r2, sel;

        sel = window.getSelection();
        bx = getBox(sel.focusNode);
        if ((bx != null) && hasFunc(bx, func)) {
          offset = 0;
          r = sel.getRangeAt(0);
          window.r = r;
          r2 = document.createRange();
          r2.setStart(bx, 0);
          r2.setEnd(r.startContainer, r.startOffset);
          p1 = r2.cloneContents().textContent.length - offset;
          if (!r.collapsed) {
            r2.setEnd(r.endContainer, r.endOffset);
          }
          p2 = r2.cloneContents().textContent.length - offset;
          return cont(_some2()(function() {
            return p1;
          })(function() {
            return p2;
          }));
        } else {
          return cont(_none());
        }
      });
    };
  });

  hasFunc = function(bx, func) {
    var ast;

    ast = getAst(bx);
    return ast === func().ast || ast === func.ast;
  };

  define('notebookAst', function() {
    return function(func) {
      return makeSyncMonad(function(env, cont) {
        var ast, node;

        if (func.leisureName != null) {
          node = document.querySelector("[LeisureFunc=" + func.leisureName + "]");
          if (node != null) {
            ast = getAst(node);
            return cont(_some()(function() {
              return ast;
            }));
          }
        }
        return cont(_none());
      });
    };
  });

  autoRun = function(el, state) {
    var _ref2;

    el.autorunState = state;
    return (_ref2 = el.autorun) != null ? _ref2.checked = state : void 0;
  };

  head = function(l) {
    return l(function() {
      return function(hh) {
        return function(tt) {
          return hh();
        };
      };
    });
  };

  tail = function(l) {
    return l(function() {
      return function(hh) {
        return function(tt) {
          return tt();
        };
      };
    });
  };

  id = function(v) {
    return v();
  };

  getSvgElement = function(id) {
    var el, svg;

    if ((el = document.getElementById(id))) {
      return el;
    } else {
      svg = createNode("<svg id='HIDDEN_SVG' xmlns='http://www.w3.org/2000/svg' version='1.1' style='top: -100000; position: absolute'><text id='HIDDEN_TEXT'>bubba</text></svg>");
      document.body.appendChild(svg);
      return document.getElementById(id);
    }
  };

  svgMeasureText = function(text) {
    return function(style) {
      return function(f) {
        var bx, txt;

        txt = getSvgElement('HIDDEN_TEXT');
        if (style()) {
          txt.setAttribute('style', style());
        }
        txt.lastChild.textContent = text();
        bx = txt.getBBox();
        return f()(function() {
          return bx.width;
        })(function() {
          return bx.height;
        });
      };
    };
  };

  primconcatNodes = function(nodes) {
    if (nodes === _nil()) {
      return "";
    } else {
      return (head(nodes))(id) + concatNodes(tail(nodes));
    }
  };

  transformedPoint = function(pt, x, y, ctm, ictm) {
    pt.x = x;
    pt.y = y;
    return pt.matrixTransform(ctm).matrixTransform(ictm);
  };

  svgMeasure = function(content) {
    return primSvgMeasure(content, baseStrokeWidth);
  };

  svgBetterMeasure = function(content) {
    return primSvgMeasure(content, transformStrokeWidth);
  };

  primSvgMeasure = function(content, transformFunc) {
    return function(f) {
      var bbox, g, pad, svg;

      svg = createNode("<svg xmlns='http://www.w3.org/2000/svg' version='1.1' style='top: -100000'><g>" + (content()) + "</g></svg>");
      document.body.appendChild(svg);
      g = svg.firstChild;
      bbox = g.getBBox();
      pad = getMaxStrokeWidth(g, g, svg, transformFunc);
      document.body.removeChild(svg);
      return f()(function() {
        return bbox.x - Math.ceil(pad / 2);
      })(function() {
        return bbox.y - Math.ceil(pad / 2);
      })(function() {
        return bbox.width + pad;
      })(function() {
        return bbox.height + pad;
      });
    };
  };

  baseElements = ['path', 'rect', 'circle', 'ellipse', 'line', 'polyline', 'polygon'];

  getMaxStrokeWidth = function(el, base, svg, transformFunc) {
    var _ref2, _ref3;

    if (_ref2 = base.nodeName, __indexOf.call(baseElements, _ref2) >= 0) {
      svg.setAttribute('width', (_ref3 = getComputedStyle(base).strokeWidth) != null ? _ref3 : '0', svg);
      return transformFunc(el, svg.width.baseVal.value);
    } else if (base.nodeName === 'use') {
      return getMaxStrokeWidth(base, base.instanceRoot.correspondingElement, svg, transformFunc);
    } else if (base.nodeName === 'g') {
      return foldLeft((function(v, n) {
        return Math.max(v, getMaxStrokeWidth(n, n, svg, transformFunc));
      }), 0, el.childNodes);
    } else {
      return 0;
    }
  };

  baseStrokeWidth = function(el, w) {
    return w;
  };

  transformStrokeWidth = function(el, w) {
    var ctm, tp1, tp2, x, y;

    if (w === 0) {
      return 0;
    } else {
      ctm = el.getScreenCTM();
      tp1 = transformedPoint(pt, bx.x - Math.ceil(w), bx.y - Math.ceil(w), ctm, isctm);
      tp2 = transformedPoint(pt, bx.x + bx.width + Math.ceil(w), bx.y + bx.height + Math.ceil(w), ctm, isctm);
      x = tp2.x - tp1.x;
      y = tp2.y - tp1.y;
      return Math.sqrt(x * x + y * y);
    }
  };

  previousSibling = function(node) {
    while ((node != null ? node.parentNode : void 0) && !node.previousSibling) {
      node = node.parentNode;
    }
    return node != null ? node.previousSibling : void 0;
  };

  nextSibling = function(node) {
    while ((node != null ? node.parentNode : void 0) && !node.nextSibling) {
      node = node.parentNode;
    }
    return node != null ? node.nextSibling : void 0;
  };

  hideControlSection = function() {
    var controlSection;

    controlSection = document.body.querySelector('[leisureSection="Leisure Controls"]');
    if (!controlSection) {
      controlSection = document.createElement('DIV');
      document.body.insertBefore(controlSection, document.body.firstChild);
      root.markupElement(controlSection, "# Leisure Controls\n\n## File Save and Load\n```\nsaveFile\n\nsaveAs 'filename'\n\nsaveAs pickFile\n\nloadFile\n\nemptyFile\n```");
      unwrap(controlSection);
    }
    controlSection.classList.add(leisure_controls);
    return controlSection.classList.add(hidden);
  };

  define('printValue', function() {
    return function(value) {
      return makeMonad(function(env, cont) {
        if (value() !== L_nil()) {
          env.write("" + (env.presentValue(value())) + "\n");
        }
        return cont(L_false());
      });
    };
  });

  defaultEnv.require = req;

  root.svgMeasureText = svgMeasureText;

  root.svgMeasure = svgMeasure;

  root.initNotebook = initNotebook;

  root.bindNotebook = bindNotebook;

  root.bindAll = bindAll;

  root.evalOutput = evalOutput;

  root.makeTestCase = makeTestCase;

  root.cleanOutput = cleanOutput;

  root.clearOutputBox = clearOutputBox;

  root.envFor = envFor;

  root.queueAfterLoad = queueAfterLoad;

  root.evalDoc = evalDoc;

  root.getBox = getBox;

  root.makeRange = makeRange;

  root.grp = grp;

  root.changeTheme = changeTheme;

  root.setSnapper = setSnapper;

  root.update = update;

  root.clearUpdates = clearUpdates;

  root.showAst = showAst;

  root.toggleEdit = toggleEdit;

  root.showSource = showSource;

  root.bootNotebook = bootNotebook;

  root.createNode = createNode;

  root.ENTER = ENTER;

  root.textNode = textNode;

  root.cleanEmptyNodes = cleanEmptyNodes;

  root.isLeisureCode = isLeisureCode;

  root.getElementCode = getElementCode;

  root.runTests = runTests;

  root.previousSibling = previousSibling;

  root.nextSibling = nextSibling;

  root.presentLeisureCode = presentLeisureCode;

  root.mergeLeisureCode = mergeLeisureCode;

  root.highlightNotebookFunction = highlightNotebookFunction;

  root.ESC = ESC;

  root.HOME = HOME;

  root.END = END;

  root.PAGE_UP = PAGE_UP;

  root.PAGE_DOWN = PAGE_DOWN;

  root.LEFT_ARROW = LEFT_ARROW;

  root.UP_ARROW = UP_ARROW;

  root.RIGHT_ARROW = RIGHT_ARROW;

  root.DOWN_ARROW = DOWN_ARROW;

  root.arrows = arrows;

  root.closeWindow = closeWindow;

  root.markupButton = markupButton;

  root.markupButtons = markupButtons;

  root.getAst = getAst;

  root.insertControls = insertControls;

  root.delay = delay;

  root.setFilename = setFilename;

  root.unwrap = unwrap;

  root.remove = remove;

  root.wrapRange = wrapRange;

  root.replaceContents = replaceContents;

  root.event = event;

}).call(this);

/*
*/

})(self)
},{"./ast":1,"./gen":4,"./lodash.min":6,"./runtime":10}],10:[function(require,module,exports){
(function(process,global){// Generated by CoffeeScript 1.6.2
/*
Copyright (C) 2013, Bill Burdick, Tiny Concepts: https://github.com/zot/Leisure

(licensed with ZLIB license)

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software
in a product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not be
misrepresented as being the original software.

3. This notice may not be removed or altered from any source distribution.
*/


(function() {
  var Monad, Nil, actors, ast2Json, asyncMonad, basicCall, booleanFor, call, callMonad, cons, consFrom, continueMonads, curry, defaultEnv, define, ensureLeisureClass, functionInfo, getDataType, getMonadSyncMode, getType, getValue, head, identity, isMonad, left, makeMonad, makeSyncMonad, monadModeSync, nameSub, newRunMonad, nextMonad, none, parensContent, parensEnd, parensStart, readDir, readFile, replaceErr, right, root, runMonad, setDataType, setType, setValue, setWarnAsync, some, statFile, strCoord, strFromList, strToList, subcurry, tail, tokenPos, tokenString, values, warnAsync, withSyncModeDo, _, _false, _identity, _ref, _ref1, _true,
    __slice = [].slice;

  _ref = root = module.exports = require('./base'), readFile = _ref.readFile, statFile = _ref.statFile, readDir = _ref.readDir, defaultEnv = _ref.defaultEnv;

  _ref1 = require('./ast'), define = _ref1.define, consFrom = _ref1.consFrom, cons = _ref1.cons, Nil = _ref1.Nil, head = _ref1.head, tail = _ref1.tail, getType = _ref1.getType, getDataType = _ref1.getDataType, ast2Json = _ref1.ast2Json, ensureLeisureClass = _ref1.ensureLeisureClass, setType = _ref1.setType, setDataType = _ref1.setDataType, functionInfo = _ref1.functionInfo, nameSub = _ref1.nameSub;

  _ = require('./lodash.min');

  call = function() {
    var args;

    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return basicCall(args, defaultEnv, identity);
  };

  callMonad = function() {
    var args, cont, env, _i;

    args = 3 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 2) : (_i = 0, []), env = arguments[_i++], cont = arguments[_i++];
    return basicCall(args, env, cont);
  };

  basicCall = function(args, env, cont) {
    var arg, res, _i, _len, _ref2;

    res = global["L_" + args[0]]();
    _ref2 = args.slice(1);
    for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
      arg = _ref2[_i];
      res = (function(arg) {
        return res(function() {
          return arg;
        });
      })(arg);
    }
    return runMonad(res, env, cont);
  };

  identity = function(x) {
    return x;
  };

  _identity = function(x) {
    return x();
  };

  _true = setType((function(a) {
    return function(b) {
      return a();
    };
  }), 'true');

  _false = setType((function(a) {
    return function(b) {
      return b();
    };
  }), 'false');

  left = function(x) {
    return setType((function(lCase) {
      return function(rCase) {
        return lCase()(function() {
          return x;
        });
      };
    }), 'left');
  };

  right = function(x) {
    return setType((function(lCase) {
      return function(rCase) {
        return rCase()(function() {
          return x;
        });
      };
    }), 'right');
  };

  some = function(x) {
    return setType((function(someCase) {
      return function(noneCase) {
        return someCase()(function() {
          return x;
        });
      };
    }), 'some');
  };

  none = setType((function(someCase) {
    return function(noneCase) {
      return noneCase();
    };
  }), 'none');

  booleanFor = function(bool) {
    if (bool) {
      return L_true();
    } else {
      return L_false();
    }
  };

  define('eq', function() {
    return function(a) {
      return function(b) {
        return booleanFor(a() === b());
      };
    };
  });

  define('==', function() {
    return function(a) {
      return function(b) {
        return booleanFor(a() === b());
      };
    };
  });

  define('hasType', function() {
    return function(data) {
      return function(func) {
        return booleanFor(getType(data()) === getDataType(func()));
      };
    };
  });

  define('+', function() {
    return function(x) {
      return function(y) {
        return x() + y();
      };
    };
  });

  define('-', function() {
    return function(x) {
      return function(y) {
        return x() - y();
      };
    };
  });

  define('*', function() {
    return function(x) {
      return function(y) {
        return x() * y();
      };
    };
  });

  define('/', function() {
    return function(x) {
      return function(y) {
        return x() / y();
      };
    };
  });

  define('%', function() {
    return function(x) {
      return function(y) {
        return x() % y();
      };
    };
  });

  define('<', function() {
    return function(x) {
      return function(y) {
        return booleanFor(x() < y());
      };
    };
  });

  define('<=', function() {
    return function(x) {
      return function(y) {
        return booleanFor(x() <= y());
      };
    };
  });

  define('>', function() {
    return function(x) {
      return function(y) {
        return booleanFor(x() > y());
      };
    };
  });

  define('>=', function() {
    return function(x) {
      return function(y) {
        return booleanFor(x() >= y());
      };
    };
  });

  define('floor', function() {
    return function(x) {
      return Math.floor(x());
    };
  });

  define('ceil', function() {
    return function(x) {
      return Math.ceil(x());
    };
  });

  define('min', function() {
    return function(x) {
      return function(y) {
        return Math.min(x(), y());
      };
    };
  });

  define('max', function() {
    return function(x) {
      return function(y) {
        return Math.max(x(), y());
      };
    };
  });

  define('round', function() {
    return function(x) {
      return Math.round(x());
    };
  });

  define('abs', function() {
    return function(x) {
      return Math.abs(x());
    };
  });

  define('sqrt', function() {
    return function(x) {
      return Math.sqrt(x());
    };
  });

  define('acos', function() {
    return function(x) {
      return Math.acos(x());
    };
  });

  define('asin', function() {
    return function(x) {
      return Math.asin(x());
    };
  });

  define('atan', function() {
    return function(x) {
      return Math.atan(x());
    };
  });

  define('atan2', function() {
    return function(x) {
      return function(y) {
        return Math.atan2(x(), y());
      };
    };
  });

  define('cos', function() {
    return function(x) {
      return Math.cos(x());
    };
  });

  define('log', function() {
    return function(x) {
      return Math.log(x());
    };
  });

  define('sin', function() {
    return function(x) {
      return Math.sin(x());
    };
  });

  define('tan', function() {
    return function(x) {
      return Math.tan(x());
    };
  });

  define('rand', function() {
    return makeSyncMonad(function(env, cont) {
      return cont(Math.random());
    });
  });

  define('randInt', function() {
    return function(low) {
      return function(high) {
        return makeSyncMonad(function(env, cont) {
          return cont(Math.floor(low() + Math.random() * high()));
        });
      };
    };
  });

  define('^', function() {
    return function(x) {
      return function(y) {
        return Math.pow(x(), y());
      };
    };
  });

  define('strString', function() {
    return function(data) {
      return String(data());
    };
  });

  define('strAt', function() {
    return function(str) {
      return function(index) {
        return str()[strCoord(str(), index())];
      };
    };
  });

  define('strStartsWith', function() {
    return function(str) {
      return function(prefix) {
        return booleanFor(str().substring(0, prefix().length) === prefix());
      };
    };
  });

  define('strLen', function() {
    return function(str) {
      return str().length;
    };
  });

  define('strToLowerCase', function() {
    return function(str) {
      return str().toLowerCase();
    };
  });

  define('strToUpperCase', function() {
    return function(str) {
      return str().toUpperCase();
    };
  });

  define('strReplace', function() {
    return function(str) {
      return function(pat) {
        return function(repl) {
          return str().replace(pat(), repl());
        };
      };
    };
  });

  strCoord = function(str, coord) {
    if (coord < 0) {
      return str.length + coord;
    } else {
      return coord;
    }
  };

  define('strSubstring', function() {
    return function(str) {
      return function(start) {
        return function(end) {
          var a, b;

          a = strCoord(str(), start());
          b = strCoord(str(), end());
          if (b < a && end() === 0) {
            b = str().length;
          }
          return str().substring(a, b);
        };
      };
    };
  });

  define('strSplit', function() {
    return function(str) {
      return function(pat) {
        return consFrom(str().split(pat() instanceof RegExp ? pat() : new RegExp(pat())));
      };
    };
  });

  define('strCat', function() {
    return function(list) {
      return _.map(list().toArray(), function(el) {
        return L_show()(function() {
          return el;
        });
      }).join('');
    };
  });

  define('strAdd', function() {
    return function(s1) {
      return function(s2) {
        return s1() + s2();
      };
    };
  });

  define('strMatch', function() {
    return function(str) {
      return function(pat) {
        var groups, m, pos;

        m = str().match((pat() instanceof RegExp ? pat() : new RegExp(pat())));
        if (m) {
          groups = [];
          pos = 1;
          while (m[pos]) {
            groups.push(m[pos++]);
          }
          if (typeof m.index !== 'undefined') {
            return consFrom([m[0], consFrom(groups), m.index, m.input]);
          } else {
            return consFrom([m[0], consFrom(groups)]);
          }
        } else {
          return Nil;
        }
      };
    };
  });

  define('strToList', function() {
    return function(str) {
      return strToList(str());
    };
  });

  strToList = function(str) {
    if (str === '') {
      return Nil;
    } else {
      return cons(str[0], strToList(str.substring(1)));
    }
  };

  define('strFromList', function() {
    return function(list) {
      return strFromList(list());
    };
  });

  strFromList = function(list) {
    if (list instanceof Leisure_nil) {
      return '';
    } else {
      return head(list) + strFromList(tail(list));
    }
  };

  define('regexp', function() {
    return function(str) {
      return new RegExp(str());
    };
  });

  define('regexpFlags', function() {
    return function(str) {
      return function(flags) {
        return new RegExp(str(), flags());
      };
    };
  });

  define('jsonParse', function() {
    return function(str) {
      return function(failCont) {
        return function(successCont) {
          var err, p;

          try {
            p = JSON.parse(str());
            return successCont()(function() {
              return p;
            });
          } catch (_error) {
            err = _error;
            return failCont()(function() {
              return err;
            });
          }
        };
      };
    };
  });

  define('jsonStringify', function() {
    return function(obj) {
      return function(failCont) {
        return function(successCont) {
          var err, s;

          try {
            s = JSON.stringify(obj());
            return successCont()(function() {
              return s;
            });
          } catch (_error) {
            err = _error;
            return failCont()(function() {
              return err;
            });
          }
        };
      };
    };
  });

  define('log', function() {
    return function(str) {
      return function(res) {
        console.log(String(str()));
        return res();
      };
    };
  });

  makeMonad = function(guts) {
    var m;

    m = function() {};
    m.__proto__ = Monad.prototype;
    m.cmd = guts;
    m.type = 'monad';
    return m;
  };

  makeSyncMonad = function(guts) {
    var m;

    m = makeMonad(guts);
    m.sync = true;
    return m;
  };

  nextMonad = function(cont) {
    return cont;
  };

  replaceErr = function(err, msg) {
    err.message = msg;
    return err;
  };

  defaultEnv.write = function(str) {
    return process.stdout.write(str);
  };

  defaultEnv.err = function(err) {
    var _ref2;

    return this.write("Error: " + ((_ref2 = err.stack) != null ? _ref2 : err));
  };

  defaultEnv.prompt = function() {
    throw new Error("Environment does not support prompting!");
  };

  monadModeSync = false;

  getMonadSyncMode = function() {
    return monadModeSync;
  };

  withSyncModeDo = function(newMode, block) {
    var oldMode;

    oldMode = monadModeSync;
    monadModeSync = newMode;
    try {
      return block();
    } finally {

    }
  };

  runMonad = function(monad, env, cont) {
    env = env != null ? env : root.defaultEnv;
    return withSyncModeDo(true, function() {
      return newRunMonad(monad, env, cont, []);
    });
  };

  isMonad = function(m) {
    return typeof m === 'function' && (m.cmd != null);
  };

  continueMonads = function(contStack, env) {
    return function(result) {
      return withSyncModeDo(false, function() {
        return newRunMonad(result, env, null, contStack);
      });
    };
  };

  asyncMonad = {
    toString: function() {
      return "<asyncMonadResult>";
    }
  };

  warnAsync = false;

  setWarnAsync = function(state) {
    return warnAsync = state;
  };

  newRunMonad = function(monad, env, cont, contStack) {
    var err, result;

    if (cont) {
      contStack.push(cont);
    }
    try {
      while (true) {
        if (isMonad(monad)) {
          if (monad.binding) {
            contStack.push((function(bnd) {
              return function(x) {
                return bnd(function() {
                  return x;
                });
              };
            })(monad.binding()));
            monad = monad.monad();
            continue;
          } else if (!monad.sync) {
            monadModeSync = false;
            if (warnAsync) {
              console.log("async monad");
            }
            monad.cmd(env, continueMonads(contStack, env));
            return asyncMonad;
          }
          result = monad.cmd(env, identity);
        } else {
          monadModeSync = true;
          result = monad;
        }
        if (!contStack.length) {
          return result;
        }
        monad = contStack.pop()(result);
      }
    } catch (_error) {
      err = _error;
      err = replaceErr(err, "\nERROR RUNNING MONAD, MONAD: " + monad + ", ENV: " + env + "...\n" + err.message);
      console.log(err.stack);
      return (cont != null ? cont : identity)(err);
    }
  };

  Monad = (function() {
    function Monad() {}

    Monad.prototype.toString = function() {
      return "Monad: " + (this.cmd.toString());
    };

    return Monad;

  })();

  global.L_runMonads = function(monadArray) {
    monadArray.reverse();
    return newRunMonad(0, defaultEnv, null, monadArray);
  };

  define('define', function() {
    return function(name) {
      return function(arity) {
        return function(src) {
          return function(def) {
            return makeSyncMonad(function(env, cont) {
              define(name(), def, arity(), src());
              return cont(typeof L_true !== "undefined" && L_true !== null ? L_true : _true);
            });
          };
        };
      };
    };
  });

  define('bind', function() {
    return function(m) {
      return function(binding) {
        var bindMonad;

        bindMonad = makeMonad(function(env, cont) {});
        bindMonad.monad = m;
        bindMonad.binding = binding;
        return bindMonad;
      };
    };
  });

  values = {};

  actors = {};

  define('actor', function() {
    return function(name) {
      return function(func) {
        return actors[name] = func;
      };
    };
  });

  define('send', function() {
    return function(name) {
      return function(msg) {
        return setTimeout((function() {
          return runMonad(actors[name]()(msg));
        }), 1);
      };
    };
  });

  define('hasValue', function() {
    return function(name) {
      return makeSyncMonad(function(env, cont) {
        return cont(booleanFor(values[name()] != null));
      });
    };
  });

  define('getValueOr', function() {
    return function(name) {
      return function(defaultValue) {
        return makeSyncMonad(function(env, cont) {
          var _ref2;

          return cont((_ref2 = values[name()]) != null ? _ref2 : defaultValue());
        });
      };
    };
  });

  define('getValue', function() {
    return function(name) {
      return makeSyncMonad(function(env, cont) {
        if (!(name() in values)) {
          throw new Error("No value named '" + (name()) + "'");
        }
        return cont(values[name()]);
      });
    };
  });

  define('setValue', function() {
    return function(name) {
      return function(value) {
        return makeSyncMonad(function(env, cont) {
          values[name()] = value();
          return cont(_true);
        });
      };
    };
  });

  setValue = function(key, value) {
    return values[key] = value;
  };

  getValue = function(key) {
    return values[key];
  };

  define('envHas', function() {
    return function(name) {
      return makeSyncMonad(function(env, cont) {
        return cont(booleanFor(env.values[name()] != null));
      });
    };
  });

  define('envGetOr', function() {
    return function(name) {
      return function(defaultValue) {
        return makeSyncMonad(function(env, cont) {
          var _ref2;

          return cont((_ref2 = env.values[name()]) != null ? _ref2 : defaultValue());
        });
      };
    };
  });

  define('envGet', function() {
    return function(name) {
      return makeSyncMonad(function(env, cont) {
        if (!(name() in env.values)) {
          throw new Error("No value named '" + (name()) + "'");
        }
        return cont(env.values[name()]);
      });
    };
  });

  define('envSet', function() {
    return function(name) {
      return function(value) {
        return makeSyncMonad(function(env, cont) {
          env.values[name()] = value();
          return cont(_true);
        });
      };
    };
  });

  define('createS', function() {
    return makeSyncMonad(function(env, cont) {
      return cont(_true);
    });
  });

  define('getS', function() {
    return function(state) {
      return makeSyncMonad(function(env, cont) {
        return cont(state().value);
      });
    };
  });

  define('setS', function() {
    return function(state) {
      return function(value) {
        return makeSyncMonad(function(env, cont) {
          state().value = value();
          return cont(_false);
        });
      };
    };
  });

  setValue('macros', Nil);

  define('defMacro', function() {
    return function(name) {
      return function(def) {
        return makeSyncMonad(function(env, cont) {
          values.macros = cons(cons(name(), def()), values.macros);
          return cont(_false);
        });
      };
    };
  });

  define('funcs', function() {
    return makeSyncMonad(function(env, cont) {
      console.log("Leisure functions:\n" + (_(global.leisureFuncNames.toArray()).sort().join('\n')));
      return cont(_false);
    });
  });

  define('funcSrc', function() {
    return function(func) {
      if (typeof func() === 'function' && func().src) {
        return some(func().src);
      } else {
        return none;
      }
    };
  });

  define('ast2Json', function() {
    return function(ast) {
      return JSON.stringify(ast2Json(ast()));
    };
  });

  define('print', function() {
    return function(msg) {
      return makeSyncMonad(function(env, cont) {
        var m;

        m = msg();
        env.write("" + (env.presentValue(m)) + "\n");
        return cont(_false);
      });
    };
  });

  define('write', function() {
    return function(msg) {
      return makeSyncMonad(function(env, cont) {
        env.write(env.presentValue(msg()));
        return cont(_false);
      });
    };
  });

  define('readFile', function() {
    return function(name) {
      return makeMonad(function(env, cont) {
        return readFile(name(), function(err, contents) {
          return cont((err ? left(err.stack) : right(contents)));
        });
      });
    };
  });

  define('readDir', function() {
    return function(dir) {
      return makeMonad(function(env, cont) {
        return readDir(dir(), function(err, files) {
          return cont((err ? left(err.stack) : right(files)));
        });
      });
    };
  });

  define('statFile', function() {
    return function(file) {
      return makeMonad(function(env, cont) {
        return statFile(file(), function(err, stats) {
          return cont((err ? left(err.stack) : right(stats)));
        });
      });
    };
  });

  define('prompt', function() {
    return function(msg) {
      return makeMonad(function(env, cont) {
        return env.prompt(String(msg()), function(input) {
          return cont(input);
        });
      });
    };
  });

  define('rand', function() {
    return makeSyncMonad(function(env, cont) {
      return cont(Math.random());
    });
  });

  define('js', function() {
    return function(str) {
      return makeSyncMonad(function(env, cont) {
        var err, result;

        try {
          result = eval(str());
          return cont(right(result));
        } catch (_error) {
          err = _error;
          return cont(left(err));
        }
      });
    };
  });

  define('delay', function() {
    return function(timeout) {
      return makeMonad(function(env, cont) {
        return setTimeout((function() {
          return cont(_true);
        }), timeout());
      });
    };
  });

  define('altDef', function() {
    return function(name) {
      return function(alt) {
        return function(arity) {
          return function(def) {
            return makeMonad(function(env, cont) {
              var alts, i, info, newDef, nm;

              info = functionInfo[name()];
              if (!info) {
                info = functionInfo[name()] = {
                  src: '',
                  arity: -1,
                  alts: {},
                  altList: []
                };
              }
              if (!info.alts[alt()]) {
                info.altList.push(alt());
              }
              info.alts[alt()] = def;
              alts = (function() {
                var _i, _len, _ref2, _results;

                _ref2 = info.altList;
                _results = [];
                for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
                  i = _ref2[_i];
                  _results.push(info.alts[i]);
                }
                return _results;
              })();
              newDef = curry(arity(), function(args) {
                var arg, opt, res, _i, _j, _k, _len, _len1, _len2;

                for (_i = 0, _len = alts.length; _i < _len; _i++) {
                  alt = alts[_i];
                  opt = alt();
                  for (_j = 0, _len1 = args.length; _j < _len1; _j++) {
                    arg = args[_j];
                    opt = opt(arg);
                  }
                  if (getType(opt) === 'some') {
                    return opt(function() {
                      return function(x) {
                        return x();
                      };
                    })(function() {
                      return _false;
                    });
                  }
                }
                if (info.mainDef) {
                  res = info.mainDef();
                  for (_k = 0, _len2 = args.length; _k < _len2; _k++) {
                    arg = args[_k];
                    res = res(arg);
                  }
                  return res;
                }
                throw new Error("No default definition for " + (name()));
              });
              nm = "L_" + (nameSub(name()));
              global[nm] = global.leisureFuncNames[nm] = newDef;
              return cont(def);
            });
          };
        };
      };
    };
  });

  curry = function(arity, func) {
    return function() {
      return subcurry(arity, func, []);
    };
  };

  subcurry = function(arity, func, args) {
    return function(arg) {
      args = args != null ? args : [];
      args.push(arg);
      if (arity === 1) {
        return func(args);
      } else {
        return subcurry(arity - 1, func, args);
      }
    };
  };

  ensureLeisureClass('token');

  Leisure_token.prototype.toString = function() {
    return "Token(" + (JSON.stringify(tokenString(this))) + ", " + (tokenPos(this)) + ")";
  };

  tokenString = function(t) {
    return t(function() {
      return function(txt) {
        return function(pos) {
          return txt();
        };
      };
    });
  };

  tokenPos = function(t) {
    return t(function() {
      return function(txt) {
        return function(pos) {
          return pos();
        };
      };
    });
  };

  ensureLeisureClass('parens');

  Leisure_parens.prototype.toString = function() {
    return "Parens(" + (parensStart(this)) + ", " + (parensEnd(this)) + ", " + (parensContent(this)) + ")";
  };

  parensStart = function(p) {
    return p(function() {
      return function(s) {
        return function(e) {
          return function(l) {
            return s();
          };
        };
      };
    });
  };

  parensEnd = function(p) {
    return p(function() {
      return function(s) {
        return function(e) {
          return function(l) {
            return e();
          };
        };
      };
    });
  };

  parensContent = function(p) {
    return p(function() {
      return function(s) {
        return function(e) {
          return function(l) {
            return l();
          };
        };
      };
    });
  };

  ensureLeisureClass('true');

  Leisure_true.prototype.toString = function() {
    return "true";
  };

  ensureLeisureClass('false');

  Leisure_false.prototype.toString = function() {
    return "false";
  };

  ensureLeisureClass('left');

  Leisure_left.prototype.toString = function() {
    return "Left(" + (this(function() {
      return _identity;
    })(function() {
      return _identity;
    })) + ")";
  };

  ensureLeisureClass('right');

  Leisure_right.prototype.toString = function() {
    return "Right(" + (this(function() {
      return _identity;
    })(function() {
      return _identity;
    })) + ")";
  };

  root._true = _true;

  root._false = _false;

  root.stateValues = values;

  root.runMonad = runMonad;

  root.isMonad = isMonad;

  root.identity = identity;

  root.setValue = setValue;

  root.getValue = getValue;

  root.makeMonad = makeMonad;

  root.makeSyncMonad = makeSyncMonad;

  root.replaceErr = replaceErr;

  root.left = left;

  root.right = right;

  root.getMonadSyncMode = getMonadSyncMode;

  root.asyncMonad = asyncMonad;

  root.setWarnAsync = setWarnAsync;

  root.call = call;

  root.callMonad = callMonad;

  root.basicCall = basicCall;

  root.booleanFor = booleanFor;

  if (typeof window !== "undefined" && window !== null) {
    window.runMonad = runMonad;
    window.setType = setType;
    window.setDataType = setDataType;
    window.defaultEnv = defaultEnv;
    window.identity = identity;
  }

}).call(this);

/*
*/

})(require("__browserify_process"),self)
},{"./ast":1,"./base":2,"./lodash.min":6,"__browserify_process":12}],11:[function(require,module,exports){
L_runMonads([
  function(){return L_define()(function(){return "if"})(function(){return 0})(function(){return "if = id"})(L_id)},
  function(){return L_define()(function(){return "aconsf"})(function(){return 3})(function(){return "aconsf key value list = acons key value (removeIf (\\pair . pair \\h t . h == key) list)"})((function(){var $m; return function(){return $m || ($m = function(L_key){return function(L_value){return function(L_list){return L_acons()(L_key)(L_value)((function(){var $m; return function(){return $m || ($m = L_removeIf()((function(){var $m; return function(){return $m || ($m = function(L_pair){return L_pair()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_$p$p()(L_h)(L_key)}})}})())})}})())(L_list))}})())}}})}})())},
  function(){return L_defMacro()(function(){return "when"})((function(){var $m; return function(){return $m || ($m = function(L_line){return L_line()((function(){var $m; return function(){return $m || ($m = function(L_cond){return function(L_rest){return L_cons()(L_cond)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "do"})(L_rest))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "nil"})(L_nil))}})()))}})())}})}})())})}})())},
  function(){return L_addTokenGroup()(function(){return "js["})(function(){return "]"})},
  function(){return L_defMacro()(function(){return "js["})((function(){var $m; return function(){return $m || ($m = function(L_list){return L_cons()(function(){return "js"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "strCat"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "flatten"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_listify()((function(){var $m; return function(){return $m || ($m = L_head()(L_list))}})()))}})())(L_nil))}})())(L_nil))}})()))}})())(L_nil))}})()))}})())(L_nil))}})())})}})())},
  function(){return L_define()(function(){return "html"})(function(){return 1})(function(){return "html x = \\f . f x"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_x){return setType(function(L_f){return L_f()(L_x)}, 'html')}, 'html'))}})())},
  function(){return L_define()(function(){return "iszero"})(function(){return 0})(function(){return "iszero = eq 0"})((function(){var $m; return function(){return $m || ($m = L_eq()(function(){return 0}))}})())},
  function(){return L_define()(function(){return "positive"})(function(){return 0})(function(){return "positive = 0 <"})((function(){var $m; return function(){return $m || ($m = L_$y()(function(){return 0}))}})())},
  function(){return L_addToken()(function(){return "--"})},
  function(){return L_addToken()(function(){return "++"})},
  function(){return L_define()(function(){return "--"})(function(){return 0})(function(){return "-- = (flip (-)) 1"})((function(){var $m; return function(){return $m || ($m = L_flip()(L_$_)(function(){return 1}))}})())},
  function(){return L_define()(function(){return "++"})(function(){return 0})(function(){return "++ = (1 +)"})((function(){var $m; return function(){return $m || ($m = L_$o()(function(){return 1}))}})())},
  function(){return L_define()(function(){return "intercalate"})(function(){return 2})(function(){return "intercalate x l = concat (intersperse x l)"})((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_l){return L_concat()((function(){var $m; return function(){return $m || ($m = L_intersperse()(L_x)(L_l))}})())}})}})())},
  function(){return L_define()(function(){return "visit"})(function(){return 2})(function(){return "visit func l = \\\\\n  result = func func l\n  .\n  isCons result\n    result \\h t . cons (visit func h) (visit func t)\n    result"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_l){return (function(){

var L_result;

L_result = (function(){var $m; return function(){return $m || ($m = L_func()(L_func)(L_l))}})();
return L_isCons()(L_result)((function(){var $m; return function(){return $m || ($m = L_result()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return L_cons()((function(){var $m; return function(){return $m || ($m = L_visit()(L_func)(L_h))}})())((function(){var $m; return function(){return $m || ($m = L_visit()(L_func)(L_t))}})())}})}})()))}})())(L_result)})()}})}})())},
  function(){return L_define()(function(){return "simplify"})(function(){return 1})(function(){return "simplify exprString = do\n  list <- scanLineM exprString\n  visit (\\func x . isToken x (tokenString x) ((isParens x) (visit func (parensContent x)) x)) list"})((function(){var $m; return function(){return $m || ($m = function(L_exprString){return L_bind()((function(){var $m; return function(){return $m || ($m = L_scanLineM()(L_exprString))}})())((function(){var $m; return function(){return $m || ($m = function(L_list){return L_visit()((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_x){return L_isToken()(L_x)((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_x))}})())((function(){var $m; return function(){return $m || ($m = L_isParens()(L_x)((function(){var $m; return function(){return $m || ($m = L_visit()(L_func)((function(){var $m; return function(){return $m || ($m = L_parensContent()(L_x))}})()))}})())(L_x))}})())}})}})())(L_list)})}})())})}})())},
  function(){return L_define()(function(){return "doall"})(function(){return 0})(function(){return "doall = foldr1 (\\el res . bind el \\_ . res)"})((function(){var $m; return function(){return $m || ($m = L_foldr1()((function(){var $m; return function(){return $m || ($m = function(L_el){return function(L_res){return L_bind()(L_el)((function(){var $m; return function(){return $m || ($m = function(L__){return L_res()})}})())}})}})()))}})())},
  function(){return L_define()(function(){return "requireJS"})(function(){return 1})(function(){return "requireJS file = bind (getValue 'requiredFiles')\n  \\files . contains files file\n    false\n    bind (loadJS file)\n      \\result . result\n        \\x . left x\n        \\_ . bind (setValue 'requiredFiles' (cons file files))\n          \\_ . right true"})((function(){var $m; return function(){return $m || ($m = function(L_file){return L_bind()((function(){var $m; return function(){return $m || ($m = L_getValue()(function(){return "requiredFiles"}))}})())((function(){var $m; return function(){return $m || ($m = function(L_files){return L_contains()(L_files)(L_file)(L_false)((function(){var $m; return function(){return $m || ($m = L_bind()((function(){var $m; return function(){return $m || ($m = L_loadJS()(L_file))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return L_result()((function(){var $m; return function(){return $m || ($m = function(L_x){return L_left()(L_x)})}})())((function(){var $m; return function(){return $m || ($m = function(L__){return L_bind()((function(){var $m; return function(){return $m || ($m = L_setValue()(function(){return "requiredFiles"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_file)(L_files))}})()))}})())((function(){var $m; return function(){return $m || ($m = function(L___0){return L_right()(L_true)})}})())})}})())})}})()))}})())})}})())})}})())},
  function(){return L_define()(function(){return "load"})(function(){return 1})(function(){return "load file = bind (readFile file)\n  \\result . result\n    \\err . err\n    \\contents . js contents"})((function(){var $m; return function(){return $m || ($m = function(L_file){return L_bind()((function(){var $m; return function(){return $m || ($m = L_readFile()(L_file))}})())((function(){var $m; return function(){return $m || ($m = function(L_result){return L_result()((function(){var $m; return function(){return $m || ($m = function(L_err){return L_err()})}})())((function(){var $m; return function(){return $m || ($m = function(L_contents){return L_js()(L_contents)})}})())})}})())})}})())},
  function(){return L_define()(function(){return "dlempty"})(function(){return 0})(function(){return "dlempty = id"})(L_id)},
  function(){return L_define()(function(){return "dl"})(function(){return 1})(function(){return "dl item = \\rest . item:rest"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_item){return setType(function(L_rest){return L_cons()(L_item)(L_rest)}, 'dl')}, 'dl'))}})())},
  function(){return L_define()(function(){return "dlPush"})(function(){return 2})(function(){return "dlPush list item = dlAppend list (dl item)"})((function(){var $m; return function(){return $m || ($m = function(L_list){return function(L_item){return L_dlAppend()(L_list)((function(){var $m; return function(){return $m || ($m = L_dl()(L_item))}})())}})}})())},
  function(){return L_define()(function(){return "dlAppend"})(function(){return 2})(function(){return "dlAppend a b = \\rest . a (b rest)"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_a){return function(L_b){return setType(function(L_rest){return L_a()((function(){var $m; return function(){return $m || ($m = L_b()(L_rest))}})())}, 'dlAppend')}}, 'dlAppend'))}})())},
  function(){return L_define()(function(){return "remove"})(function(){return 2})(function(){return "remove x l = removeIf (eq x) l"})((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_l){return L_removeIf()((function(){var $m; return function(){return $m || ($m = L_eq()(L_x))}})())(L_l)}})}})())},
  function(){return L_define()(function(){return "removeIf"})(function(){return 2})(function(){return "removeIf f l = filter (compose not f) l"})((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return L_filter()((function(){var $m; return function(){return $m || ($m = L_compose()(L_not)(L_f))}})())(L_l)}})}})())},
  function(){return L_define()(function(){return "any"})(function(){return 2})(function(){return "any f l = find f l (\\el . true) false"})((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return L_find()(L_f)(L_l)((function(){var $m; return function(){return $m || ($m = function(L_el){return L_true()})}})())(L_false)}})}})())},
  function(){return L_define()(function(){return "all"})(function(){return 2})(function(){return "all f l = not any (compose not f) l"})((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return L_not()(L_any)((function(){var $m; return function(){return $m || ($m = L_compose()(L_not)(L_f))}})())(L_l)}})}})())},
  function(){return L_define()(function(){return "take"})(function(){return 2})(function(){return "take n list = positive n\n  list\n    \\h t D . cons h (take (-- n) t)\n    nil\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_list){return L_positive()(L_n)((function(){var $m; return function(){return $m || ($m = L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_take()((function(){var $m; return function(){return $m || ($m = L_$_$_()(L_n))}})())(L_t))}})())}}})}})())(L_nil))}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "takeWhile"})(function(){return 2})(function(){return "takeWhile predicate list = list\n  \\h t D . predicate (head list)\n    cons h (takeWhile predicate t)\n    nil\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_predicate){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_predicate()((function(){var $m; return function(){return $m || ($m = L_head()(L_list))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_takeWhile()(L_predicate)(L_t))}})()))}})())(L_nil)}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "drop"})(function(){return 2})(function(){return "drop x list = positive x\n  list\n    \\h t D . drop (-- x) t\n    nil\n  list"})((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_list){return L_positive()(L_x)((function(){var $m; return function(){return $m || ($m = L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_drop()((function(){var $m; return function(){return $m || ($m = L_$_$_()(L_x))}})())(L_t)}}})}})())(L_nil))}})())(L_list)}})}})())},
  function(){return L_define()(function(){return "dropWhile"})(function(){return 2})(function(){return "dropWhile predicate list = list\n  \\h t D . predicate h\n    dropWhile predicate t\n    list\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_predicate){return function(L_list){return L_list()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_predicate()(L_h)((function(){var $m; return function(){return $m || ($m = L_dropWhile()(L_predicate)(L_t))}})())(L_list)}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "dropLast"})(function(){return 2})(function(){return "dropLast n list = reverse (drop n (reverse list))"})((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_list){return L_reverse()((function(){var $m; return function(){return $m || ($m = L_drop()(L_n)((function(){var $m; return function(){return $m || ($m = L_reverse()(L_list))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "box"})(function(){return 2})(function(){return "box n list = list == nil\n  nil\n  [(take n list) | box n (drop n list)]"})((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_list){return L_$p$p()(L_list)(L_nil)(L_nil)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_take()(L_n)(L_list))}})())((function(){var $m; return function(){return $m || ($m = L_box()(L_n)((function(){var $m; return function(){return $m || ($m = L_drop()(L_n)(L_list))}})()))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "at"})(function(){return 2})(function(){return "at l x = (x == 0) (head l) (at (tail l) (-- (x) ) )"})((function(){var $m; return function(){return $m || ($m = function(L_l){return function(L_x){return L_$p$p()(L_x)(function(){return 0})((function(){var $m; return function(){return $m || ($m = L_head()(L_l))}})())((function(){var $m; return function(){return $m || ($m = L_at()((function(){var $m; return function(){return $m || ($m = L_tail()(L_l))}})())((function(){var $m; return function(){return $m || ($m = L_$_$_()(L_x))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "series"})(function(){return 2})(function(){return "series func n = n:(series func (func n))"})((function(){var $m; return function(){return $m || ($m = function(L_func){return function(L_n){return L_cons()(L_n)((function(){var $m; return function(){return $m || ($m = L_series()(L_func)((function(){var $m; return function(){return $m || ($m = L_func()(L_n))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "from"})(function(){return 1})(function(){return "from n = series ++ n"})((function(){var $m; return function(){return $m || ($m = function(L_n){return L_series()(L_$o$o)(L_n)})}})())},
  function(){return L_define()(function(){return "fromBy"})(function(){return 2})(function(){return "fromBy n inc = series ((+) inc) n"})((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_inc){return L_series()((function(){var $m; return function(){return $m || ($m = L_$o()(L_inc))}})())(L_n)}})}})())},
  function(){return L_define()(function(){return "fromTo"})(function(){return 2})(function(){return "fromTo n m = takeWhile ((>) m) (from n)"})((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_m){return L_takeWhile()((function(){var $m; return function(){return $m || ($m = L_$z()(L_m))}})())((function(){var $m; return function(){return $m || ($m = L_from()(L_n))}})())}})}})())},
  function(){return L_define()(function(){return "fromToBy"})(function(){return 3})(function(){return "fromToBy n m inc = takeWhile ((>) m) (fromBy n inc)"})((function(){var $m; return function(){return $m || ($m = function(L_n){return function(L_m){return function(L_inc){return L_takeWhile()((function(){var $m; return function(){return $m || ($m = L_$z()(L_m))}})())((function(){var $m; return function(){return $m || ($m = L_fromBy()(L_n)(L_inc))}})())}}})}})())},
  function(){return L_define()(function(){return "count"})(function(){return 2})(function(){return "count x l = countIf (eq x) l"})((function(){var $m; return function(){return $m || ($m = function(L_x){return function(L_l){return L_countIf()((function(){var $m; return function(){return $m || ($m = L_eq()(L_x))}})())(L_l)}})}})())},
  function(){return L_define()(function(){return "countIf"})(function(){return 2})(function(){return "countIf f l = (eq l nil) 0\n  + (f (head l) 1 0) (countIf f (tail l))"})((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return L_eq()(L_l)(L_nil)(function(){return 0})((function(){var $m; return function(){return $m || ($m = L_$o()((function(){var $m; return function(){return $m || ($m = L_f()((function(){var $m; return function(){return $m || ($m = L_head()(L_l))}})())(function(){return 1})(function(){return 0}))}})())((function(){var $m; return function(){return $m || ($m = L_countIf()(L_f)((function(){var $m; return function(){return $m || ($m = L_tail()(L_l))}})()))}})()))}})())}})}})())},
  function(){return L_define()(function(){return "countIfNot"})(function(){return 2})(function(){return "countIfNot f l = countIf (\\x. not (f x)) l"})((function(){var $m; return function(){return $m || ($m = function(L_f){return function(L_l){return L_countIf()((function(){var $m; return function(){return $m || ($m = function(L_x){return L_not()((function(){var $m; return function(){return $m || ($m = L_f()(L_x))}})())})}})())(L_l)}})}})())},
  function(){return L_define()(function(){return "odds"})(function(){return 1})(function(){return "odds l = l\n  \\h t D . [h | evens t]\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_cons()(L_h)((function(){var $m; return function(){return $m || ($m = L_evens()(L_t))}})())}}})}})())(L_nil)})}})())},
  function(){return L_define()(function(){return "evens"})(function(){return 1})(function(){return "evens l = l\n  \\h t D . odds t\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_odds()(L_t)}}})}})())(L_nil)})}})())},
  function(){return L_define()(function(){return "cleave"})(function(){return 1})(function(){return "cleave l = [(evens l) | (odds l)]"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_cons()((function(){var $m; return function(){return $m || ($m = L_evens()(L_l))}})())((function(){var $m; return function(){return $m || ($m = L_odds()(L_l))}})())})}})())},
  function(){return L_define()(function(){return "merge"})(function(){return 3})(function(){return "merge cmp a b = a\n  \\ah at D . b\n    \\bh bt D . cmp ah bh\n      [ah | (merge cmp at b)]\n      [bh | (merge cmp a bt)]\n    a\n  b"})((function(){var $m; return function(){return $m || ($m = function(L_cmp){return function(L_a){return function(L_b){return L_a()((function(){var $m; return function(){return $m || ($m = function(L_ah){return function(L_at){return function(L_D){return L_b()((function(){var $m; return function(){return $m || ($m = function(L_bh){return function(L_bt){return function(L_D_0){return L_cmp()(L_ah)(L_bh)((function(){var $m; return function(){return $m || ($m = L_cons()(L_ah)((function(){var $m; return function(){return $m || ($m = L_merge()(L_cmp)(L_at)(L_b))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_bh)((function(){var $m; return function(){return $m || ($m = L_merge()(L_cmp)(L_a)(L_bt))}})()))}})())}}})}})())(L_a)}}})}})())(L_b)}}})}})())},
  function(){return L_define()(function(){return "mergeSort"})(function(){return 2})(function(){return "mergeSort cmp l = l\n  \\h t D . eq (tail l) nil\n    l\n    do\n      cl = cleave l\n      e = head cl\n      o = tail cl\n      merge cmp (mergeSort cmp e) (mergeSort cmp o)\n  nil"})((function(){var $m; return function(){return $m || ($m = function(L_cmp){return function(L_l){return L_l()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_eq()((function(){var $m; return function(){return $m || ($m = L_tail()(L_l))}})())(L_nil)(L_l)(function(){
var L_o, L_e, L_cl;

L_o = (function(){var $m; return function(){return $m || ($m = L_tail()(L_cl))}})();

L_e = (function(){var $m; return function(){return $m || ($m = L_head()(L_cl))}})();

L_cl = (function(){var $m; return function(){return $m || ($m = L_cleave()(L_l))}})();
return L_merge()(L_cmp)((function(){var $m; return function(){return $m || ($m = L_mergeSort()(L_cmp)(L_e))}})())((function(){var $m; return function(){return $m || ($m = L_mergeSort()(L_cmp)(L_o))}})())})}}})}})())(L_nil)}})}})())},
  function(){return L_define()(function(){return "sort"})(function(){return 1})(function(){return "sort l = sortBy lte l"})((function(){var $m; return function(){return $m || ($m = function(L_l){return L_sortBy()(L_lte)(L_l)})}})())},
  function(){return L_define()(function(){return "sortBy"})(function(){return 2})(function(){return "sortBy cmp l = mergeSort cmp l"})((function(){var $m; return function(){return $m || ($m = function(L_cmp){return function(L_l){return L_mergeSort()(L_cmp)(L_l)}})}})())},
  function(){return L_addToken()(function(){return "->"})},
  function(){return L_define()(function(){return "mkStr"})(function(){return 1})(function(){return "mkStr tok = concat['\"' (tokenString tok) '\"']"})((function(){var $m; return function(){return $m || ($m = function(L_tok){return L_strCat()((function(){var $m; return function(){return $m || ($m = L_flatten()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\""})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_tokenString()(L_tok))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\""})(L_nil))}})()))}})()))}})()))}})())})}})())},
  function(){return L_defMacro()(function(){return "defCase"})((function(){var $m; return function(){return $m || ($m = function(L_list){return (function(){

var L_t3, L_h3, L_t2, L_h2, L_t1, L_h1;

L_t3 = (function(){var $m; return function(){return $m || ($m = L_tail()(L_t2))}})();

L_h3 = (function(){var $m; return function(){return $m || ($m = L_head()(L_t2))}})();

L_t2 = (function(){var $m; return function(){return $m || ($m = L_tail()(L_t1))}})();

L_h2 = (function(){var $m; return function(){return $m || ($m = L_head()(L_t1))}})();

L_t1 = (function(){var $m; return function(){return $m || ($m = L_tail()(L_list))}})();

L_h1 = (function(){var $m; return function(){return $m || ($m = L_head()(L_list))}})();
return L_and()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_list))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_t1))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isCons()(L_t2))}})())((function(){var $m; return function(){return $m || ($m = L_and()((function(){var $m; return function(){return $m || ($m = L_isTokenString()(L_h2)(function(){return "."}))}})())(L_true))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_makeCaseArgs()(L_list)((function(){var $m; return function(){return $m || ($m = L_mkStr()(L_h1))}})())((function(){var $m; return function(){return $m || ($m = L_mkStr()(L_h3))}})())(L_t3)(L_id))}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Error in case definition -- expected func.name args | condition -> action, but got "})(L_list))}})())})()})}})())},
  function(){return L_define()(function(){return "makeCaseArgs"})(function(){return 5})(function(){return "makeCaseArgs orig funcName altName rest args = rest\n  \\h t D . isTokenString h '|'\n    makeCaseCondition orig funcName altName (args nil) t id\n    makeCaseArgs orig funcName altName t (dlPush args h)\n  parseErr \"Error in case definition -- expected func.name args | condition -> action, but got \" orig"})((function(){var $m; return function(){return $m || ($m = function(L_orig){return function(L_funcName){return function(L_altName){return function(L_rest){return function(L_args){return L_rest()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isTokenString()(L_h)(function(){return "|"})((function(){var $m; return function(){return $m || ($m = L_makeCaseCondition()(L_orig)(L_funcName)(L_altName)((function(){var $m; return function(){return $m || ($m = L_args()(L_nil))}})())(L_t)(L_id))}})())((function(){var $m; return function(){return $m || ($m = L_makeCaseArgs()(L_orig)(L_funcName)(L_altName)(L_t)((function(){var $m; return function(){return $m || ($m = L_dlPush()(L_args)(L_h))}})()))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Error in case definition -- expected func.name args | condition -> action, but got "})(L_orig))}})())}}}}})}})())},
  function(){return L_define()(function(){return "makeCaseCondition"})(function(){return 6})(function(){return "makeCaseCondition orig funcName altName args rest cond = rest\n  \\h t D . isTokenString h '->'\n    foldr1 append [['altDef' funcName altName (length args) '\\\\'] args ['.' (cond nil) ['some' t] 'none']]\n    makeCaseCondition orig funcName altName args t (dlPush cond h)\n parseErr \"Error in case definition -- expected func.name args | condition -> action, but got \" orig"})((function(){var $m; return function(){return $m || ($m = function(L_orig){return function(L_funcName){return function(L_altName){return function(L_args){return function(L_rest){return function(L_cond){return L_rest()((function(){var $m; return function(){return $m || ($m = function(L_h){return function(L_t){return function(L_D){return L_isTokenString()(L_h)(function(){return "->"})((function(){var $m; return function(){return $m || ($m = L_foldr1()(L_append)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "altDef"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_funcName)((function(){var $m; return function(){return $m || ($m = L_cons()(L_altName)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_length()(L_args))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "\\"})(L_nil))}})()))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_args)((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "."})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cond()(L_nil))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "some"})((function(){var $m; return function(){return $m || ($m = L_cons()(L_t)(L_nil))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "none"})(L_nil))}})()))}})()))}})()))}})())(L_nil))}})()))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_makeCaseCondition()(L_orig)(L_funcName)(L_altName)(L_args)(L_t)((function(){var $m; return function(){return $m || ($m = L_dlPush()(L_cond)(L_h))}})()))}})())}}})}})())((function(){var $m; return function(){return $m || ($m = L_parseErr()(function(){return "Error in case definition -- expected func.name args | condition -> action, but got "})(L_orig))}})())}}}}}})}})())},
  function(){return L_altDef()(function(){return "show"})(function(){return "some"})(function(){return 1})((function(){var $m; return function(){return $m || ($m = function(L_obj){return L_hasType()(L_obj)(L_some)((function(){var $m; return function(){return $m || ($m = L_some()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_flatten()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "Some("})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_obj()(L_id)(L_false))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ")"})(L_nil))}})()))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return L_altDef()(function(){return "show"})(function(){return "none"})(function(){return 1})((function(){var $m; return function(){return $m || ($m = function(L_obj){return L_hasType()(L_obj)(L_none)((function(){var $m; return function(){return $m || ($m = L_some()(function(){return "None"}))}})())(L_none)})}})())},
  function(){return L_altDef()(function(){return "show"})(function(){return "left"})(function(){return 1})((function(){var $m; return function(){return $m || ($m = function(L_obj){return L_hasType()(L_obj)(L_left)((function(){var $m; return function(){return $m || ($m = L_some()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_flatten()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "Left("})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_obj()(L_id)(L_id))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ")"})(L_nil))}})()))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return L_altDef()(function(){return "show"})(function(){return "right"})(function(){return 1})((function(){var $m; return function(){return $m || ($m = function(L_obj){return L_hasType()(L_obj)(L_right)((function(){var $m; return function(){return $m || ($m = L_some()((function(){var $m; return function(){return $m || ($m = L_strCat()((function(){var $m; return function(){return $m || ($m = L_flatten()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "Right("})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_obj()(L_id)(L_id))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return ")"})(L_nil))}})()))}})()))}})()))}})()))}})()))}})())(L_none)})}})())},
  function(){return L_altDef()(function(){return "bind"})(function(){return "option"})(function(){return 2})((function(){var $m; return function(){return $m || ($m = function(L_opt){return function(L_cont){return L_or()((function(){var $m; return function(){return $m || ($m = L_hasType()(L_opt)(L_some))}})())((function(){var $m; return function(){return $m || ($m = L_hasType()(L_opt)(L_none))}})())((function(){var $m; return function(){return $m || ($m = L_some()((function(){var $m; return function(){return $m || ($m = L_opt()((function(){var $m; return function(){return $m || ($m = function(L_value){return L_cont()(L_value)})}})())(L_none))}})()))}})())(L_none)}})}})())},
  function(){return L_altDef()(function(){return "bind"})(function(){return "either"})(function(){return 2})((function(){var $m; return function(){return $m || ($m = function(L_either){return function(L_cont){return L_or()((function(){var $m; return function(){return $m || ($m = L_hasType()(L_either)(L_left))}})())((function(){var $m; return function(){return $m || ($m = L_hasType()(L_either)(L_right))}})())((function(){var $m; return function(){return $m || ($m = L_some()((function(){var $m; return function(){return $m || ($m = L_either()((function(){var $m; return function(){return $m || ($m = function(L__){return L_either()})}})())((function(){var $m; return function(){return $m || ($m = function(L_value){return L_cont()(L_value)})}})()))}})()))}})())(L_none)}})}})())},
  function(){return L_define()(function(){return "html"})(function(){return 1})(function(){return "html x = \\f . f x"})((function(){var $m; return function(){return $m || ($m = setDataType(function(L_x){return setType(function(L_f){return L_f()(L_x)}, 'html')}, 'html'))}})())},
  function(){return L_defTokenPack()(function(){return "util"})((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "->"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "--"})((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "++"})(L_nil))}})()))}})()))}})())((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "js["})(function(){return "]"}))}})())(L_nil))}})())((function(){var $m; return function(){return $m || ($m = L_cons()(L_nil)(L_nil))}})()))}})()))}})())},
  function(){return L_addStdTokenPacks()((function(){var $m; return function(){return $m || ($m = L_cons()(function(){return "util"})(L_nil))}})())}]);

},{}],12:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    if (canPost) {
        var queue = [];
        window.addEventListener('message', function (ev) {
            if (ev.source === window && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

process.binding = function (name) {
    throw new Error('process.binding is not supported');
}

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}]},{},[3])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9hc3QuanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9iYXNlLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvYnJvd3Nlck1haW4uanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9nZW4uanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9nZW5lcmF0ZWRQcmVsdWRlLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvbG9kYXNoLm1pbi5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbGliL21hcmtlZC5qcyIsIi9ob21lL2JpbGwvbGMvbGFtYmRhQ2FsY3VsdXMvbGliL21kLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvbm90ZWJvb2suanMiLCIvaG9tZS9iaWxsL2xjL2xhbWJkYUNhbGN1bHVzL2xpYi9ydW50aW1lLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9saWIvc3RkLmpzIiwiL2hvbWUvYmlsbC9sYy9sYW1iZGFDYWxjdWx1cy9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaW5zZXJ0LW1vZHVsZS1nbG9iYWxzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25sQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDamJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeHhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25pQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3B5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDenVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGdsb2JhbCl7Ly8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuLypcbkNvcHlyaWdodCAoQykgMjAxMiwgQmlsbCBCdXJkaWNrLCBUaW55IENvbmNlcHRzOiBodHRwczovL2dpdGh1Yi5jb20vem90L0xlaXN1cmVcblxuKGxpY2Vuc2VkIHdpdGggWkxJQiBsaWNlbnNlKVxuXG5UaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxud2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG5hcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuXG5QZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbmluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbmZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcblxuMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcbmNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG5pbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbmFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG5cbjIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG5taXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG5cbjMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIExfYW5ubywgTF9hcHBseSwgTF9sYW1iZGEsIExfbGV0LCBMX2xpdCwgTF9yZWYsIExlaXN1cmVPYmplY3QsIExlaXN1cmVfQmFzZUNvbnMsIExlaXN1cmVfY29ucywgTGVpc3VyZV9uaWwsIE5pbCwgYW5ubywgYXBwbHksIGFzdDJKc29uLCBhc3QySnNvbkVuY29kaW5ncywgYXN0U3RyaW5nLCBjaGFyQ29kZXMsIGNoZWNrVHlwZSwgY29ucywgY29uc0VxLCBjb25zRnJvbSwgZGVmaW5lLCBlbnN1cmVMZWlzdXJlQ2xhc3MsIGV2YWxGdW5jLCBmb2xkTGVmdCwgZnVuY3Rpb25JbmZvLCBnZXRBbm5vQm9keSwgZ2V0QW5ub0RhdGEsIGdldEFubm9OYW1lLCBnZXRBcHBseUFyZywgZ2V0QXBwbHlGdW5jLCBnZXREYXRhVHlwZSwgZ2V0TGFtYmRhQm9keSwgZ2V0TGFtYmRhVmFyLCBnZXRMZXRCb2R5LCBnZXRMZXROYW1lLCBnZXRMZXRWYWx1ZSwgZ2V0TGl0VmFsLCBnZXRSZWZOYW1lLCBnZXRUeXBlLCBoZWFkLCBqc1R5cGUsIGpzb24yQXN0LCBqc29uMkFzdEVuY29kaW5ncywgbGFtYmRhLCBsZWlzdXJlQWRkRnVuYywgbGV0U3RyLCBsaXQsIGxsZXQsIG1ha2VTdXBlciwgbWtQcm90bywgbmFtZUZ1bmMsIG5hbWVTdWIsIHByaW1Db25zLCBwcmltRm9sZExlZnQsIHJlZiwgcm9vdCwgc2F2ZSwgc2V0RGF0YVR5cGUsIHNldFR5cGUsIHN1cGVydHlwZXMsIHRhaWwsIHRocm93RXJyb3IsIF8sIF9yZWYsIF9yZWYxLCBfcmVmMixcbiAgICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuICByb290ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Jhc2UnKTtcblxuICBfID0gcmVxdWlyZSgnLi9sb2Rhc2gubWluJyk7XG5cbiAgY2hhckNvZGVzID0ge1xuICAgIFwiJ1wiOiAnJGEnLFxuICAgICcsJzogJyRiJyxcbiAgICAnJCc6ICckJCcsXG4gICAgJ0AnOiAnJGQnLFxuICAgICc/JzogJyRlJyxcbiAgICAnLyc6ICckZicsXG4gICAgJyonOiAnJGcnLFxuICAgICcmJzogJyRoJyxcbiAgICAnXic6ICckaScsXG4gICAgJyEnOiAnJGsnLFxuICAgICdgJzogJyRsJyxcbiAgICAnfic6ICckbScsXG4gICAgJy0nOiAnJF8nLFxuICAgICcrJzogJyRvJyxcbiAgICAnPSc6ICckcCcsXG4gICAgJ3wnOiAnJHEnLFxuICAgICdbJzogJyRyJyxcbiAgICAnXSc6ICckcycsXG4gICAgJ3snOiAnJHQnLFxuICAgICd9JzogJyR1JyxcbiAgICAnXCInOiAnJHYnLFxuICAgICc6JzogJyR3JyxcbiAgICAnOyc6ICckeCcsXG4gICAgJzwnOiAnJHknLFxuICAgICc+JzogJyR6JyxcbiAgICAnJSc6ICckQScsXG4gICAgJy4nOiAnJEInXG4gIH07XG5cbiAgbmFtZVN1YiA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgY29kZSwgaSwgcywgX2ksIF9yZWY7XG5cbiAgICBzID0gJyc7XG4gICAgZm9yIChpID0gX2kgPSAwLCBfcmVmID0gbmFtZS5sZW5ndGg7IDAgPD0gX3JlZiA/IF9pIDwgX3JlZiA6IF9pID4gX3JlZjsgaSA9IDAgPD0gX3JlZiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICBjb2RlID0gY2hhckNvZGVzW25hbWVbaV1dO1xuICAgICAgcyArPSBjb2RlICE9IG51bGwgPyBjb2RlIDogbmFtZVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG4gIH07XG5cbiAgc2V0RGF0YVR5cGUgPSBmdW5jdGlvbihmdW5jLCBkYXRhVHlwZSkge1xuICAgIGlmIChkYXRhVHlwZSkge1xuICAgICAgZnVuYy5kYXRhVHlwZSA9IGRhdGFUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuYztcbiAgfTtcblxuICBzZXRUeXBlID0gZnVuY3Rpb24oZnVuYywgdHlwZSkge1xuICAgIGlmICh0eXBlKSB7XG4gICAgICBmdW5jLnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBmdW5jLl9fcHJvdG9fXyA9IChlbnN1cmVMZWlzdXJlQ2xhc3ModHlwZSkpLnByb3RvdHlwZTtcbiAgICByZXR1cm4gZnVuYztcbiAgfTtcblxuICBMZWlzdXJlT2JqZWN0ID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIExlaXN1cmVPYmplY3QoKSB7fVxuXG4gICAgcmV0dXJuIExlaXN1cmVPYmplY3Q7XG5cbiAgfSkoKTtcblxuICBMZWlzdXJlT2JqZWN0LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnTGVpc3VyZU9iamVjdCc7XG5cbiAgZ2xvYmFsLkxlaXN1cmVfT2JqZWN0ID0gTGVpc3VyZU9iamVjdDtcblxuICBzdXBlcnR5cGVzID0ge307XG5cbiAgcm9vdC5sZWlzdXJlQ2xhc3NDaGFuZ2UgPSAwO1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcyA9IGZ1bmN0aW9uKGxlaXN1cmVDbGFzcykge1xuICAgIHZhciBjbDtcblxuICAgIGNsID0gXCJMZWlzdXJlX1wiICsgKG5hbWVTdWIobGVpc3VyZUNsYXNzKSk7XG4gICAgaWYgKGdsb2JhbFtjbF0gPT0gbnVsbCkge1xuICAgICAgZ2xvYmFsW2NsXSA9IGV2YWwoXCIoZnVuY3Rpb24gXCIgKyBjbCArIFwiKCl7fSlcIik7XG4gICAgICBzdXBlcnR5cGVzW2NsXSA9ICdMZWlzdXJlX09iamVjdCc7XG4gICAgICByb290LmxlaXN1cmVDbGFzc0NoYW5nZSsrO1xuICAgIH1cbiAgICByZXR1cm4gZ2xvYmFsW2NsXTtcbiAgfTtcblxuICBtYWtlU3VwZXIgPSBmdW5jdGlvbih0eXBlLCBzdXBlcnR5cGUpIHtcbiAgICBzdXBlcnR5cGVzW1wiTGVpc3VyZV9cIiArIChuYW1lU3ViKHR5cGUpKV0gPSBcIkxlaXN1cmVfXCIgKyAobmFtZVN1YihzdXBlcnR5cGUpKTtcbiAgICByZXR1cm4gcm9vdC5sZWlzdXJlQ2xhc3NDaGFuZ2UrKztcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2NvbnMnKTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ25pbCcpO1xuXG4gIHN1cGVydHlwZXMuTGVpc3VyZV9jb25zID0gJ0xlaXN1cmVfT2JqZWN0JztcblxuICBzdXBlcnR5cGVzLkxlaXN1cmVfbmlsID0gJ0xlaXN1cmVfT2JqZWN0JztcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2FzdCcpO1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnbGl0Jyk7XG5cbiAgTGVpc3VyZV9saXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwibGl0KFwiICsgKGdldExpdFZhbCh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3JlZicpO1xuXG4gIExlaXN1cmVfcmVmLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcInJlZihcIiArIChnZXRSZWZOYW1lKHRoaXMpKSArIFwiKVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnbGFtYmRhJyk7XG5cbiAgTGVpc3VyZV9sYW1iZGEucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwibGFtYmRhKFwiICsgKGFzdFN0cmluZyh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2FwcGx5Jyk7XG5cbiAgTGVpc3VyZV9hcHBseS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJhcHBseShcIiArIChhc3RTdHJpbmcodGhpcykpICsgXCIpXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdsZXQnKTtcblxuICBMZWlzdXJlX2xldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJsZXQoXCIgKyAoYXN0U3RyaW5nKHRoaXMpKSArIFwiKVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnYW5ubycpO1xuXG4gIExlaXN1cmVfYW5uby5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJhbm5vKFwiICsgKGFzdFN0cmluZyh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ2RvYycpO1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnc3JjTG9jYXRpb24nKTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3BhdHRlcm4nKTtcblxuICBtYWtlU3VwZXIoJ2xpdCcsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ3JlZicsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ2xhbWJkYScsICdhc3QnKTtcblxuICBtYWtlU3VwZXIoJ2FwcGx5JywgJ2FzdCcpO1xuXG4gIG1ha2VTdXBlcignbGV0JywgJ2FzdCcpO1xuXG4gIG1ha2VTdXBlcignYW5ubycsICdhc3QnKTtcblxuICBhc3RTdHJpbmcgPSBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgYXJnU3RyLCBmdW5jU3RyLCBfcmVmO1xuXG4gICAgc3dpdGNoIChnZXRUeXBlKGFzdCkpIHtcbiAgICAgIGNhc2UgJ2xpdCc6XG4gICAgICAgIHJldHVybiBnZXRMaXRWYWwoYXN0KTtcbiAgICAgIGNhc2UgJ3JlZic6XG4gICAgICAgIHJldHVybiBnZXRSZWZOYW1lKGFzdCk7XG4gICAgICBjYXNlICdhcHBseSc6XG4gICAgICAgIGZ1bmNTdHIgPSBhc3RTdHJpbmcoZ2V0QXBwbHlGdW5jKGFzdCkpO1xuICAgICAgICBpZiAoKF9yZWYgPSBnZXRUeXBlKGdldEFwcGx5RnVuYyhhc3QpKSkgPT09ICdsYW1iZGEnIHx8IF9yZWYgPT09ICdsZXQnKSB7XG4gICAgICAgICAgZnVuY1N0ciA9IFwiKFwiICsgZnVuY1N0ciArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIGFyZ1N0ciA9IGFzdFN0cmluZyhnZXRBcHBseUFyZyhhc3QpKTtcbiAgICAgICAgaWYgKGdldFR5cGUoZ2V0QXBwbHlBcmcoYXN0KSkgPT09ICdhcHBseScpIHtcbiAgICAgICAgICBhcmdTdHIgPSBcIihcIiArIGFyZ1N0ciArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiICsgZnVuY1N0ciArIFwiIFwiICsgYXJnU3RyO1xuICAgICAgY2FzZSAnbGFtYmRhJzpcbiAgICAgICAgcmV0dXJuIFwiXFxcXFwiICsgKGdldExhbWJkYVZhcihhc3QpKSArIFwiIC4gXCIgKyAoYXN0U3RyaW5nKGdldExhbWJkYUJvZHkoYXN0KSkpO1xuICAgICAgY2FzZSAnbGV0JzpcbiAgICAgICAgcmV0dXJuIFwiXFxcXFxcXFxcIiArIChsZXRTdHIoYXN0KSk7XG4gICAgICBjYXNlICdhbm5vJzpcbiAgICAgICAgcmV0dXJuIFwiXFxcXEBcIiArIChnZXRBbm5vTmFtZShhc3QpKSArIFwiIFwiICsgKGdldEFubm9EYXRhKGFzdCkpICsgXCIgLiBcIiArIChhc3RTdHJpbmcoZ2V0QW5ub0JvZHkoYXN0KSkpO1xuICAgIH1cbiAgfTtcblxuICBsZXRTdHIgPSBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgYmluZGluZywgYm9keTtcblxuICAgIGJvZHkgPSBnZXRMZXRCb2R5KGFzdCk7XG4gICAgYmluZGluZyA9IFwiKFwiICsgKGdldExldE5hbWUoYXN0KSkgKyBcIiA9IFwiICsgKGFzdFN0cmluZyhnZXRMZXRWYWx1ZShhc3QpKSkgKyBcIilcIjtcbiAgICBpZiAoYm9keSBpbnN0YW5jZW9mIExlaXN1cmVfbGV0KSB7XG4gICAgICByZXR1cm4gXCJcIiArIGJpbmRpbmcgKyBcIiBcIiArIChsZXRTdHIoYm9keSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJcIiArIGJpbmRpbmcgKyBcIiAuIFwiICsgKGFzdFN0cmluZyhib2R5KSk7XG4gICAgfVxuICB9O1xuXG4gIExlaXN1cmVfQmFzZUNvbnMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExlaXN1cmVfQmFzZUNvbnMsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBMZWlzdXJlX0Jhc2VDb25zKCkge1xuICAgICAgX3JlZiA9IExlaXN1cmVfQmFzZUNvbnMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gX3JlZjtcbiAgICB9XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5oZWFkID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgSW1wbGVtZW50ZWRcIik7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnRhaWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBJbXBsZW1lbnRlZFwiKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuaXNOaWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIGlmIChmdW5jKHRoaXMuaGVhZCgpKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy50YWlsKCkuZmluZChmdW5jKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgdmFyIHQ7XG5cbiAgICAgIHQgPSB0aGlzLnRhaWwoKS5yZW1vdmVBbGwoZnVuYyk7XG4gICAgICBpZiAoZnVuYyh0aGlzLmhlYWQoKSkpIHtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICB9IGVsc2UgaWYgKHQgPT09IHRoaXMudGFpbCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnModGhpcy5oZWFkKCksIHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gY29ucyhmdW5jKHRoaXMuaGVhZCgpKSwgdGhpcy50YWlsKCkubWFwKGZ1bmMpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZGwgPSBmdW5jdGlvbihmdW5jLCBhcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhaWwoKS5mb2xkbChmdW5jLCBmdW5jKGFyZywgdGhpcy5oZWFkKCkpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZGwxID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIHRoaXMudGFpbCgpLmZvbGRsKGZ1bmMsIHRoaXMuaGVhZCgpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZHIgPSBmdW5jdGlvbihmdW5jLCBhcmcpIHtcbiAgICAgIHJldHVybiBmdW5jKHRoaXMuaGVhZCgpLCB0aGlzLnRhaWwoKS5mb2xkcihmdW5jLCBhcmcpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZm9sZHIxID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgaWYgKHRoaXMudGFpbCgpID09PSBOaWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bmModGhpcy5oZWFkKCksIHRoaXMudGFpbCgpLmZvbGRyMShmdW5jKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmZvbGRsKChmdW5jdGlvbihpLCBlbCkge1xuICAgICAgICBpLnB1c2goZWwpO1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH0pLCBbXSk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKHN0cik7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJldihOaWwpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5yZXYgPSBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhaWwoKS5yZXYoY29ucyh0aGlzLmhlYWQoKSwgcmVzdWx0KSk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmVsZW1lbnRTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMTtcblxuICAgICAgcmV0dXJuIFwiXCIgKyAoKChfcmVmMSA9IHRoaXMuaGVhZCgpKSAhPSBudWxsID8gX3JlZjEuY29uc3RydWN0b3IgOiB2b2lkIDApID09PSB0aGlzLmNvbnN0cnVjdG9yIHx8IHRoaXMuaGVhZCgpIGluc3RhbmNlb2YgTGVpc3VyZV9uaWwgPyAnWycgKyB0aGlzLmhlYWQoKS5lbGVtZW50U3RyaW5nKCkgKyAnXScgOiB0aGlzLmhlYWQoKSkgKyAodGhpcy50YWlsKCkgaW5zdGFuY2VvZiBMZWlzdXJlX25pbCA/ICcnIDogdGhpcy50YWlsKCkgaW5zdGFuY2VvZiBMZWlzdXJlX0Jhc2VDb25zID8gXCIgXCIgKyAodGhpcy50YWlsKCkuZWxlbWVudFN0cmluZygpKSA6IFwiIHwgXCIgKyAodGhpcy50YWlsKCkpKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIHJldHVybiB0aGlzID09PSBvdGhlciB8fCAob3RoZXIgaW5zdGFuY2VvZiBMZWlzdXJlX0Jhc2VDb25zICYmIGNvbnNFcSh0aGlzLmhlYWQoKSwgb3RoZXIuaGVhZCgpKSAmJiBjb25zRXEodGhpcy50YWlsKCksIG90aGVyLnRhaWwoKSkpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgICAgIGJsb2NrKHRoaXMuaGVhZCgpKTtcbiAgICAgIHJldHVybiB0aGlzLnRhaWwoKS5lYWNoKGJsb2NrKTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9CYXNlQ29ucy5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb2xkbCgoZnVuY3Rpb24oaSwgZWwpIHtcbiAgICAgICAgcmV0dXJuIGkgKyAxO1xuICAgICAgfSksIDApO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdDtcblxuICAgICAgdCA9IHRoaXMudGFpbCgpO1xuICAgICAgaWYgKHQgPT09IE5pbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdC5sYXN0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKGwpIHtcbiAgICAgIHJldHVybiBjb25zKHRoaXMuaGVhZCgpLCB0aGlzLnRhaWwoKS5hcHBlbmQobCkpO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX0Jhc2VDb25zLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiXCIgKyAodGhpcy5zdHJpbmdOYW1lKCkpICsgXCJbXCIgKyAodGhpcy5lbGVtZW50U3RyaW5nKCkpICsgXCJdXCI7XG4gICAgfTtcblxuICAgIExlaXN1cmVfQmFzZUNvbnMucHJvdG90eXBlLnN0cmluZ05hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIkJhc2VDb25zXCI7XG4gICAgfTtcblxuICAgIHJldHVybiBMZWlzdXJlX0Jhc2VDb25zO1xuXG4gIH0pKExlaXN1cmVPYmplY3QpO1xuXG4gIGNvbnNFcSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYSA9PT0gYiB8fCAoYSBpbnN0YW5jZW9mIExlaXN1cmVfQmFzZUNvbnMgJiYgYS5lcXVhbHMoYikpO1xuICB9O1xuXG4gIExlaXN1cmVfY29ucyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGVpc3VyZV9jb25zLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gTGVpc3VyZV9jb25zKCkge1xuICAgICAgX3JlZjEgPSBMZWlzdXJlX2NvbnMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gX3JlZjE7XG4gICAgfVxuXG4gICAgTGVpc3VyZV9jb25zLnByb3RvdHlwZS5oZWFkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcyhmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgcmV0dXJuIGEoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIExlaXN1cmVfY29ucy5wcm90b3R5cGUudGFpbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX2NvbnMucHJvdG90eXBlLnN0cmluZ05hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIkNvbnNcIjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExlaXN1cmVfY29ucztcblxuICB9KShMZWlzdXJlX0Jhc2VDb25zKTtcblxuICBnbG9iYWwuTGVpc3VyZV9jb25zID0gTGVpc3VyZV9jb25zO1xuXG4gIExlaXN1cmVfbmlsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMZWlzdXJlX25pbCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIExlaXN1cmVfbmlsKCkge1xuICAgICAgX3JlZjIgPSBMZWlzdXJlX25pbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBfcmVmMjtcbiAgICB9XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuaXNOaWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5yZW1vdmVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIE5pbDtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmZvbGRsID0gZnVuY3Rpb24oZnVuYywgYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuZm9sZHIgPSBmdW5jdGlvbihmdW5jLCBhcmcpIHtcbiAgICAgIHJldHVybiBhcmc7XG4gICAgfTtcblxuICAgIExlaXN1cmVfbmlsLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLnJldiA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBMZWlzdXJlX25pbDtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9O1xuXG4gICAgTGVpc3VyZV9uaWwucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKGwpIHtcbiAgICAgIHJldHVybiBsO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIkNvbnNbXVwiO1xuICAgIH07XG5cbiAgICBMZWlzdXJlX25pbC5wcm90b3R5cGUuZWxlbWVudFN0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGVpc3VyZV9uaWw7XG5cbiAgfSkoTGVpc3VyZU9iamVjdCk7XG5cbiAgZ2xvYmFsLkxlaXN1cmVfbmlsID0gTGVpc3VyZV9uaWw7XG5cbiAganNUeXBlID0gZnVuY3Rpb24odikge1xuICAgIHZhciB0O1xuXG4gICAgdCA9IHR5cGVvZiB2O1xuICAgIGlmICh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHYuY29uc3RydWN0b3IgfHwgdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICB9O1xuXG4gIG1rUHJvdG8gPSBmdW5jdGlvbihwcm90b0Z1bmMsIHZhbHVlKSB7XG4gICAgdmFsdWUuX19wcm90b19fID0gcHJvdG9GdW5jLnByb3RvdHlwZTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgdGhyb3dFcnJvciA9IGZ1bmN0aW9uKG1zZykge1xuICAgIHRocm93IChtc2cgaW5zdGFuY2VvZiBFcnJvciA/IG1zZyA6IG5ldyBFcnJvcihTdHJpbmcobXNnKSkpO1xuICB9O1xuXG4gIGNoZWNrVHlwZSA9IGZ1bmN0aW9uKHZhbHVlLCB0eXBlKSB7XG4gICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiB0eXBlKSkge1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IoXCJUeXBlIGVycm9yOiBleHBlY3RlZCB0eXBlOiBcIiArIHR5cGUgKyBcIiwgYnV0IGdvdDogXCIgKyAoanNUeXBlKHZhbHVlKSkpO1xuICAgIH1cbiAgfTtcblxuICBwcmltQ29ucyA9IHNldERhdGFUeXBlKChmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgIHJldHVybiBta1Byb3RvKExlaXN1cmVfY29ucywgc2V0VHlwZSgoZnVuY3Rpb24oZikge1xuICAgICAgICByZXR1cm4gZigpKGEpKGIpO1xuICAgICAgfSksICdjb25zJykpO1xuICAgIH07XG4gIH0pLCAnY29ucycpO1xuXG4gIE5pbCA9IG1rUHJvdG8oTGVpc3VyZV9uaWwsIHNldERhdGFUeXBlKHNldFR5cGUoKGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgcmV0dXJuIGIoKTtcbiAgICB9O1xuICB9KSwgJ25pbCcpLCAnbmlsJykpO1xuXG4gIGNvbnMgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIHByaW1Db25zKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gYjtcbiAgICB9KTtcbiAgfTtcblxuICBmb2xkTGVmdCA9IGZ1bmN0aW9uKGZ1bmMsIHZhbCwgdGhpbmcpIHtcbiAgICBpZiAodGhpbmcgaW5zdGFuY2VvZiBMZWlzdXJlX2NvbnMpIHtcbiAgICAgIHJldHVybiB0aGluZy5mb2xkbChmdW5jLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJpbUZvbGRMZWZ0KGZ1bmMsIHZhbCwgdGhpbmcsIDApO1xuICAgIH1cbiAgfTtcblxuICBwcmltRm9sZExlZnQgPSBmdW5jdGlvbihmdW5jLCB2YWwsIGFycmF5LCBpbmRleCkge1xuICAgIGlmIChpbmRleCA8IGFycmF5Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHByaW1Gb2xkTGVmdChmdW5jLCBmdW5jKHZhbCwgYXJyYXlbaW5kZXhdKSwgYXJyYXksIGluZGV4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICB9O1xuXG4gIGdsb2JhbC5sZWlzdXJlRnVuY3MgPSB7fTtcblxuICBnbG9iYWwubGVpc3VyZUZ1bmNOYW1lcyA9IE5pbDtcblxuICBsZWlzdXJlQWRkRnVuYyA9IGdsb2JhbC5sZWlzdXJlQWRkRnVuYyA9IGZ1bmN0aW9uKG5tKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5sZWlzdXJlRnVuY05hbWVzID0gY29ucyhubSwgZ2xvYmFsLmxlaXN1cmVGdW5jTmFtZXMpO1xuICB9O1xuXG4gIHJvb3QuZXZhbEZ1bmMgPSBldmFsRnVuYyA9IGV2YWw7XG5cbiAgcm9vdC5mdW5jdGlvbkNvdW50ID0gMDtcblxuICBmdW5jdGlvbkluZm8gPSB7fTtcblxuICBuYW1lRnVuYyA9IGZ1bmN0aW9uKGZ1bmMsIG5hbWUpIHtcbiAgICB2YXIgZjtcblxuICAgIGYgPSBudWxsO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChmID09PSBudWxsKSB7XG4gICAgICAgIGYgPSBmdW5jKCk7XG4gICAgICAgIGlmICh0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGYubGVpc3VyZU5hbWUgPSBuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGY7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBkZWZpbmUgPSBmdW5jdGlvbihuYW1lLCBmdW5jLCBhcml0eSwgc3JjLCBtZXRob2QpIHtcbiAgICB2YXIgbm07XG5cbiAgICBmdW5jdGlvbkluZm9bbmFtZV0gPSB7XG4gICAgICBzcmM6IHNyYyxcbiAgICAgIGFyaXR5OiBhcml0eSxcbiAgICAgIGxlaXN1cmVOYW1lOiBuYW1lLFxuICAgICAgYWx0czoge30sXG4gICAgICBhbHRMaXN0OiBbXVxuICAgIH07XG4gICAgbm0gPSAnTF8nICsgbmFtZVN1YihuYW1lKTtcbiAgICBpZiAoIW1ldGhvZCAmJiBnbG9iYWwubm9yZWRlZnMgJiYgKGdsb2JhbFtubV0gIT0gbnVsbCkpIHtcbiAgICAgIHRocm93RXJyb3IoXCJbREVGXSBBdHRlbXB0IHRvIHJlZGVmaW5lIGRlZmluaXRpb246IFwiICsgbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uSW5mb1tuYW1lXS5tYWluRGVmID0gZ2xvYmFsW25tXSA9IGdsb2JhbC5sZWlzdXJlRnVuY3Nbbm1dID0gbmFtZUZ1bmMoZnVuYywgbmFtZSk7XG4gICAgbGVpc3VyZUFkZEZ1bmMobmFtZSk7XG4gICAgcm9vdC5mdW5jdGlvbkNvdW50Kys7XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH07XG5cbiAgTF9saXQgPSBzZXREYXRhVHlwZSgoZnVuY3Rpb24oX3gpIHtcbiAgICByZXR1cm4gc2V0VHlwZSgoZnVuY3Rpb24oX2YpIHtcbiAgICAgIHJldHVybiBfZigpKF94KTtcbiAgICB9KSwgJ2xpdCcpO1xuICB9KSwgJ2xpdCcpO1xuXG4gIExfcmVmID0gc2V0RGF0YVR5cGUoKGZ1bmN0aW9uKF94KSB7XG4gICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKF9mKSB7XG4gICAgICByZXR1cm4gX2YoKShfeCk7XG4gICAgfSksICdyZWYnKTtcbiAgfSksICdyZWYnKTtcblxuICBMX2xhbWJkYSA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfdikge1xuICAgIHJldHVybiBmdW5jdGlvbihfZikge1xuICAgICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKF9nKSB7XG4gICAgICAgIHJldHVybiBfZygpKF92KShfZik7XG4gICAgICB9KSwgJ2xhbWJkYScpO1xuICAgIH07XG4gIH0pLCAnbGFtYmRhJyk7XG5cbiAgTF9hcHBseSA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbihfYXJnKSB7XG4gICAgICByZXR1cm4gc2V0VHlwZSgoZnVuY3Rpb24oX2YpIHtcbiAgICAgICAgcmV0dXJuIF9mKCkoX2Z1bmMpKF9hcmcpO1xuICAgICAgfSksICdhcHBseScpO1xuICAgIH07XG4gIH0pLCAnYXBwbHknKTtcblxuICBMX2xldCA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfbikge1xuICAgIHJldHVybiBmdW5jdGlvbihfdikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKF9iKSB7XG4gICAgICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihfZikge1xuICAgICAgICAgIHJldHVybiBfZigpKF9uKShfdikoX2IpO1xuICAgICAgICB9KSwgJ2xldCcpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KSwgJ2xldCcpO1xuXG4gIExfYW5ubyA9IHNldERhdGFUeXBlKChmdW5jdGlvbihfbmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihfZGF0YSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKF9ib2R5KSB7XG4gICAgICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihfZikge1xuICAgICAgICAgIHJldHVybiBfZigpKF9uYW1lKShfZGF0YSkoX2JvZHkpO1xuICAgICAgICB9KSwgJ2Fubm8nKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSksICdhbm5vJyk7XG5cbiAgZ2V0VHlwZSA9IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgdDtcblxuICAgIHQgPSB0eXBlb2YgZjtcbiAgICByZXR1cm4gKHQgPT09ICdmdW5jdGlvbicgJiYgKGYgIT0gbnVsbCA/IGYudHlwZSA6IHZvaWQgMCkpIHx8IChcIipcIiArIHQpO1xuICB9O1xuXG4gIGRlZmluZSgnZ2V0VHlwZScsIChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBnZXRUeXBlKHZhbHVlKCkpO1xuICAgIH07XG4gIH0pLCAxKTtcblxuICBnZXREYXRhVHlwZSA9IGZ1bmN0aW9uKGYpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGYuZGF0YVR5cGUpIHx8ICcnO1xuICB9O1xuXG4gIGRlZmluZSgnZ2V0RGF0YVR5cGUnLCAoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZ2V0RGF0YVR5cGUodmFsdWUoKSk7XG4gICAgfTtcbiAgfSksIDEpO1xuXG4gIHNhdmUgPSB7fTtcblxuICBzYXZlLmxpdCA9IGxpdCA9IGZ1bmN0aW9uKGwpIHtcbiAgICByZXR1cm4gTF9saXQoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbDtcbiAgICB9KTtcbiAgfTtcblxuICBzYXZlLnJlZiA9IHJlZiA9IGZ1bmN0aW9uKHIpIHtcbiAgICByZXR1cm4gTF9yZWYoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcjtcbiAgICB9KTtcbiAgfTtcblxuICBzYXZlLmxhbWJkYSA9IGxhbWJkYSA9IGZ1bmN0aW9uKHYsIGJvZHkpIHtcbiAgICByZXR1cm4gTF9sYW1iZGEoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdjtcbiAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBib2R5O1xuICAgIH0pO1xuICB9O1xuXG4gIHNhdmUuYXBwbHkgPSBhcHBseSA9IGZ1bmN0aW9uKGYsIGEpIHtcbiAgICByZXR1cm4gTF9hcHBseShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmO1xuICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfSk7XG4gIH07XG5cbiAgc2F2ZS5sbGV0ID0gbGxldCA9IGZ1bmN0aW9uKG4sIHYsIGIpIHtcbiAgICByZXR1cm4gTF9sZXQoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB2O1xuICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGI7XG4gICAgfSk7XG4gIH07XG5cbiAgc2F2ZS5hbm5vID0gYW5ubyA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEsIGJvZHkpIHtcbiAgICByZXR1cm4gTF9hbm5vKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBib2R5O1xuICAgIH0pO1xuICB9O1xuXG4gIHNhdmUuY29ucyA9IGNvbnM7XG5cbiAgZ2V0TGl0VmFsID0gZnVuY3Rpb24obHQpIHtcbiAgICByZXR1cm4gbHQoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gdigpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBnZXRSZWZOYW1lID0gZnVuY3Rpb24ocmYpIHtcbiAgICByZXR1cm4gcmYoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gdigpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBnZXRMYW1iZGFWYXIgPSBmdW5jdGlvbihsYW0pIHtcbiAgICByZXR1cm4gbGFtKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICByZXR1cm4gdigpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBnZXRMYW1iZGFCb2R5ID0gZnVuY3Rpb24obGFtKSB7XG4gICAgcmV0dXJuIGxhbShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgcmV0dXJuIGIoKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgZ2V0QXBwbHlGdW5jID0gZnVuY3Rpb24oYXBsKSB7XG4gICAgcmV0dXJuIGFwbChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgcmV0dXJuIGEoKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgZ2V0QXBwbHlBcmcgPSBmdW5jdGlvbihhcGwpIHtcbiAgICByZXR1cm4gYXBsKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICByZXR1cm4gYigpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBnZXRMZXROYW1lID0gZnVuY3Rpb24obHQpIHtcbiAgICByZXR1cm4gbHQoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICByZXR1cm4gbigpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIGdldExldFZhbHVlID0gZnVuY3Rpb24obHQpIHtcbiAgICByZXR1cm4gbHQoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICByZXR1cm4gdigpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIGdldExldEJvZHkgPSBmdW5jdGlvbihsdCkge1xuICAgIHJldHVybiBsdChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgZ2V0QW5ub05hbWUgPSBmdW5jdGlvbihhbm5vKSB7XG4gICAgcmV0dXJuIGFubm8oZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihib2R5KSB7XG4gICAgICAgICAgICByZXR1cm4gbmFtZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIGdldEFubm9EYXRhID0gZnVuY3Rpb24oYW5ubykge1xuICAgIHJldHVybiBhbm5vKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBnZXRBbm5vQm9keSA9IGZ1bmN0aW9uKGFubm8pIHtcbiAgICByZXR1cm4gYW5ubyhmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgICAgICAgIHJldHVybiBib2R5KCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAganNvbjJBc3RFbmNvZGluZ3MgPSB7XG4gICAgbGl0OiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9saXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBqc29uLnZhbHVlO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWY6IGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIHJldHVybiBMX3JlZihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGpzb24udmFyTmFtZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbGFtYmRhOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9sYW1iZGEoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBqc29uLnZhck5hbWU7XG4gICAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGpzb24yQXN0KGpzb24uYm9keSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFwcGx5OiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4gTF9hcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGpzb24yQXN0KGpzb24uZnVuYyk7XG4gICAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGpzb24yQXN0KGpzb24uYXJnKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgXCJsZXRcIjogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIExfbGV0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ganNvbi52YXJOYW1lO1xuICAgICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBqc29uMkFzdChqc29uLnZhbHVlKTtcbiAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ganNvbjJBc3QoanNvbi5ib2R5KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYW5ubzogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIExfYW5ubyhmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGpzb24ubmFtZTtcbiAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ganNvbjJBc3QoanNvbi5kYXRhKTtcbiAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ganNvbjJBc3QoanNvbi5ib2R5KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uczogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIHNhdmUuY29ucyhqc29uMkFzdChqc29uLmhlYWQpLCBqc29uMkFzdChqc29uLnRhaWwpKTtcbiAgICB9LFxuICAgIG5pbDogZnVuY3Rpb24oanNvbikge1xuICAgICAgcmV0dXJuIE5pbDtcbiAgICB9XG4gIH07XG5cbiAgbGl0ID0gc2F2ZS5saXQ7XG5cbiAgcmVmID0gc2F2ZS5yZWY7XG5cbiAgbGFtYmRhID0gc2F2ZS5sYW1iZGE7XG5cbiAgYXBwbHkgPSBzYXZlLmFwcGx5O1xuXG4gIGxsZXQgPSBzYXZlLmxsZXQ7XG5cbiAgYW5ubyA9IHNhdmUuYW5ubztcblxuICBjb25zID0gc2F2ZS5jb25zO1xuXG4gIGpzb24yQXN0ID0gZnVuY3Rpb24oanNvbikge1xuICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBqc29uMkFzdEVuY29kaW5nc1tqc29uLl90eXBlXShqc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICB9O1xuXG4gIGFzdDJKc29uRW5jb2RpbmdzID0ge1xuICAgIExlaXN1cmVfbGl0OiBmdW5jdGlvbihhc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF90eXBlOiAnbGl0JyxcbiAgICAgICAgdmFsdWU6IGdldExpdFZhbChhc3QpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9yZWY6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICdyZWYnLFxuICAgICAgICB2YXJOYW1lOiBnZXRSZWZOYW1lKGFzdClcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX2xhbWJkYTogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2xhbWJkYScsXG4gICAgICAgIHZhck5hbWU6IGdldExhbWJkYVZhcihhc3QpLFxuICAgICAgICBib2R5OiBhc3QySnNvbihnZXRMYW1iZGFCb2R5KGFzdCkpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9hcHBseTogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2FwcGx5JyxcbiAgICAgICAgZnVuYzogYXN0Mkpzb24oZ2V0QXBwbHlGdW5jKGFzdCkpLFxuICAgICAgICBhcmc6IGFzdDJKc29uKGdldEFwcGx5QXJnKGFzdCkpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9sZXQ6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICdsZXQnLFxuICAgICAgICB2YXJOYW1lOiBnZXRMZXROYW1lKGFzdCksXG4gICAgICAgIHZhbHVlOiBhc3QySnNvbihnZXRMZXRWYWx1ZShhc3QpKSxcbiAgICAgICAgYm9keTogYXN0Mkpzb24oZ2V0TGV0Qm9keShhc3QpKVxuICAgICAgfTtcbiAgICB9LFxuICAgIExlaXN1cmVfYW5ubzogZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfdHlwZTogJ2Fubm8nLFxuICAgICAgICBuYW1lOiBnZXRBbm5vTmFtZShhc3QpLFxuICAgICAgICBkYXRhOiBhc3QySnNvbihnZXRBbm5vRGF0YShhc3QpKSxcbiAgICAgICAgYm9keTogYXN0Mkpzb24oZ2V0QW5ub0JvZHkoYXN0KSlcbiAgICAgIH07XG4gICAgfSxcbiAgICBMZWlzdXJlX2NvbnM6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICdjb25zJyxcbiAgICAgICAgaGVhZDogYXN0Mkpzb24oYXN0LmhlYWQoKSksXG4gICAgICAgIHRhaWw6IGFzdDJKc29uKGFzdC50YWlsKCkpXG4gICAgICB9O1xuICAgIH0sXG4gICAgTGVpc3VyZV9uaWw6IGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX3R5cGU6ICduaWwnXG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICBhc3QySnNvbiA9IGZ1bmN0aW9uKGFzdCkge1xuICAgIHZhciBfcmVmMztcblxuICAgIGlmIChhc3QySnNvbkVuY29kaW5nc1soX3JlZjMgPSBhc3QuY29uc3RydWN0b3IpICE9IG51bGwgPyBfcmVmMy5uYW1lIDogdm9pZCAwXSkge1xuICAgICAgcmV0dXJuIGFzdDJKc29uRW5jb2RpbmdzW2FzdC5jb25zdHJ1Y3Rvci5uYW1lXShhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXN0O1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ2pzb24yQXN0JywgKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihqc29uKSB7XG4gICAgICByZXR1cm4ganNvbjJBc3QoSlNPTi5wYXJzZShqc29uKCkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgZGVmaW5lKCdhc3QySnNvbicsIChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXN0KSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXN0Mkpzb24oYXN0KCkpKTtcbiAgICB9O1xuICB9KSk7XG5cbiAgY29uc0Zyb20gPSBmdW5jdGlvbihhcnJheSwgaSkge1xuICAgIGkgPSBpIHx8IDA7XG4gICAgaWYgKGkgPCBhcnJheS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjb25zKGFycmF5W2ldLCBjb25zRnJvbShhcnJheSwgaSArIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5pbDtcbiAgICB9XG4gIH07XG5cbiAgaGVhZCA9IGZ1bmN0aW9uKGwpIHtcbiAgICByZXR1cm4gbC5oZWFkKCk7XG4gIH07XG5cbiAgdGFpbCA9IGZ1bmN0aW9uKGwpIHtcbiAgICByZXR1cm4gbC50YWlsKCk7XG4gIH07XG5cbiAgcm9vdC5oZWFkID0gaGVhZDtcblxuICByb290LnRhaWwgPSB0YWlsO1xuXG4gIHJvb3QuY29uc0Zyb20gPSBjb25zRnJvbTtcblxuICByb290Lm5hbWVTdWIgPSBuYW1lU3ViO1xuXG4gIHJvb3Quc2V0RGF0YVR5cGUgPSBzZXREYXRhVHlwZTtcblxuICByb290LnNldFR5cGUgPSBzZXRUeXBlO1xuXG4gIHJvb3QubWtQcm90byA9IG1rUHJvdG87XG5cbiAgcm9vdC5OaWwgPSBOaWw7XG5cbiAgcm9vdC5jb25zID0gY29ucztcblxuICByb290LnByaW1Db25zID0gcHJpbUNvbnM7XG5cbiAgcm9vdC5kZWZpbmUgPSBkZWZpbmU7XG5cbiAgcm9vdC5nZXRUeXBlID0gZ2V0VHlwZTtcblxuICByb290LmdldERhdGFUeXBlID0gZ2V0RGF0YVR5cGU7XG5cbiAgcm9vdC5saXQgPSBsaXQ7XG5cbiAgcm9vdC5yZWYgPSByZWY7XG5cbiAgcm9vdC5sYW1iZGEgPSBsYW1iZGE7XG5cbiAgcm9vdC5hcHBseSA9IGFwcGx5O1xuXG4gIHJvb3QuYW5ubyA9IGFubm87XG5cbiAgcm9vdC5sbGV0ID0gbGxldDtcblxuICByb290LmdldFJlZk5hbWUgPSBnZXRSZWZOYW1lO1xuXG4gIHJvb3QuZ2V0TGl0VmFsID0gZ2V0TGl0VmFsO1xuXG4gIHJvb3QuZ2V0TGFtYmRhQm9keSA9IGdldExhbWJkYUJvZHk7XG5cbiAgcm9vdC5nZXRMYW1iZGFWYXIgPSBnZXRMYW1iZGFWYXI7XG5cbiAgcm9vdC5nZXRBcHBseUZ1bmMgPSBnZXRBcHBseUZ1bmM7XG5cbiAgcm9vdC5nZXRBcHBseUFyZyA9IGdldEFwcGx5QXJnO1xuXG4gIHJvb3QuZ2V0TGV0TmFtZSA9IGdldExldE5hbWU7XG5cbiAgcm9vdC5nZXRMZXRWYWx1ZSA9IGdldExldFZhbHVlO1xuXG4gIHJvb3QuZ2V0TGV0Qm9keSA9IGdldExldEJvZHk7XG5cbiAgcm9vdC5nZXRBbm5vTmFtZSA9IGdldEFubm9OYW1lO1xuXG4gIHJvb3QuZ2V0QW5ub0RhdGEgPSBnZXRBbm5vRGF0YTtcblxuICByb290LmdldEFubm9Cb2R5ID0gZ2V0QW5ub0JvZHk7XG5cbiAgcm9vdC50aHJvd0Vycm9yID0gdGhyb3dFcnJvcjtcblxuICByb290LmZvbGRMZWZ0ID0gZm9sZExlZnQ7XG5cbiAgcm9vdC5MZWlzdXJlT2JqZWN0ID0gTGVpc3VyZU9iamVjdDtcblxuICByb290LmV2YWxGdW5jID0gZXZhbEZ1bmM7XG5cbiAgcm9vdC5qc29uMkFzdCA9IGpzb24yQXN0O1xuXG4gIHJvb3QuYXN0Mkpzb24gPSBhc3QySnNvbjtcblxuICByb290LkxlaXN1cmVfbGl0ID0gTGVpc3VyZV9saXQ7XG5cbiAgcm9vdC5MZWlzdXJlX3JlZiA9IExlaXN1cmVfcmVmO1xuXG4gIHJvb3QuTGVpc3VyZV9sYW1iZGEgPSBMZWlzdXJlX2xhbWJkYTtcblxuICByb290LkxlaXN1cmVfYXBwbHkgPSBMZWlzdXJlX2FwcGx5O1xuXG4gIHJvb3QuTGVpc3VyZV9sZXQgPSBMZWlzdXJlX2xldDtcblxuICByb290LkxlaXN1cmVfYW5ubyA9IExlaXN1cmVfYW5ubztcblxuICByb290LmVuc3VyZUxlaXN1cmVDbGFzcyA9IGVuc3VyZUxlaXN1cmVDbGFzcztcblxuICByb290Lm1ha2VTdXBlciA9IG1ha2VTdXBlcjtcblxuICByb290LnN1cGVydHlwZXMgPSBzdXBlcnR5cGVzO1xuXG4gIHJvb3QuZnVuY3Rpb25JbmZvID0gZnVuY3Rpb25JbmZvO1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9YXN0Lm1hcFxuKi9cblxufSkoc2VsZikiLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4vKlxuQ29weXJpZ2h0IChDKSAyMDEzLCBCaWxsIEJ1cmRpY2ssIFRpbnkgQ29uY2VwdHM6IGh0dHBzOi8vZ2l0aHViLmNvbS96b3QvTGVpc3VyZVxuXG4obGljZW5zZWQgd2l0aCBaTElCIGxpY2Vuc2UpXG5cblRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG53YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbmFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG5cblBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuXG4xLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbmluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cblxuMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbm1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cblxuMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cbiovXG5cblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZGVmYXVsdEVudiwgcmVhZERpciwgcmVhZEZpbGUsIHJvb3QsIHN0YXRGaWxlLCB3cml0ZUZpbGU7XG5cbiAgcm9vdCA9IG1vZHVsZS5leHBvcnRzO1xuXG4gIGRlZmF1bHRFbnYgPSB7XG4gICAgcHJlc2VudFZhbHVlOiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4geDtcbiAgICB9LFxuICAgIHZhbHVlczoge31cbiAgfTtcblxuICByZWFkRmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBjb250KSB7XG4gICAgcmV0dXJuIGRlZmF1bHRFbnYucmVhZEZpbGUoZmlsZU5hbWUsIGNvbnQpO1xuICB9O1xuXG4gIHdyaXRlRmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBkYXRhLCBjb250KSB7XG4gICAgcmV0dXJuIGRlZmF1bHRFbnYud3JpdGVGaWxlKGZpbGVOYW1lLCBkYXRhLCBjb250KTtcbiAgfTtcblxuICByZWFkRGlyID0gZnVuY3Rpb24oZmlsZU5hbWUsIGNvbnQpIHtcbiAgICByZXR1cm4gZGVmYXVsdEVudi5yZWFkRGlyKGZpbGVOYW1lLCBjb250KTtcbiAgfTtcblxuICBzdGF0RmlsZSA9IGZ1bmN0aW9uKGZpbGVOYW1lLCBjb250KSB7XG4gICAgcmV0dXJuIGRlZmF1bHRFbnYuc3RhdEZpbGUoZmlsZU5hbWUsIGNvbnQpO1xuICB9O1xuXG4gIHJvb3QuZGVmYXVsdEVudiA9IGRlZmF1bHRFbnY7XG5cbiAgcm9vdC5yZWFkRmlsZSA9IHJlYWRGaWxlO1xuXG4gIHJvb3QucmVhZERpciA9IHJlYWREaXI7XG5cbiAgcm9vdC53cml0ZUZpbGUgPSB3cml0ZUZpbGU7XG5cbiAgcm9vdC5zdGF0RmlsZSA9IHN0YXRGaWxlO1xuXG59KS5jYWxsKHRoaXMpO1xuXG4vKlxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5tYXBcbiovXG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBMZWlzdXJlLCBleHBvcnRzLCBrLCBuYiwgdiwgX3JlZjtcblxuICB3aW5kb3cubWFya2VkID0gcmVxdWlyZSgnLi9tYXJrZWQnKTtcblxuICBMZWlzdXJlID0gZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9iYXNlJyk7XG5cbiAgcmVxdWlyZSgnLi9hc3QnKTtcblxuICByZXF1aXJlKCcuL2dlbicpO1xuXG4gIHJlcXVpcmUoJy4vcnVudGltZScpO1xuXG4gIHJlcXVpcmUoJy4vZ2VuZXJhdGVkUHJlbHVkZScpO1xuXG4gIHJlcXVpcmUoJy4vc3RkJyk7XG5cbiAgcmVxdWlyZSgnLi9tZCcpO1xuXG4gIHdpbmRvdy5Ob3RlYm9vayA9IG5iID0gcmVxdWlyZSgnLi9ub3RlYm9vaycpO1xuXG4gIF9yZWYgPSB3aW5kb3cuTGVpc3VyZTtcbiAgZm9yIChrIGluIF9yZWYpIHtcbiAgICB2ID0gX3JlZltrXTtcbiAgICBMZWlzdXJlW2tdID0gdjtcbiAgfVxuXG4gIHdpbmRvdy5MZWlzdXJlID0gTGVpc3VyZTtcblxufSkuY2FsbCh0aGlzKTtcblxuLypcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPWJyb3dzZXJNYWluLm1hcFxuKi9cbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbi8qXG5Db3B5cmlnaHQgKEMpIDIwMTMsIEJpbGwgQnVyZGljaywgVGlueSBDb25jZXB0czogaHR0cHM6Ly9naXRodWIuY29tL3pvdC9MZWlzdXJlXG5cbihsaWNlbnNlZCB3aXRoIFpMSUIgbGljZW5zZSlcblxuVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbndhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cblxuUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG5pbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG5mcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG5cbjEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG5jbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG5hcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuXG4yLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxubWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuXG4zLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBMZWlzdXJlX2Fubm8sIExlaXN1cmVfYXBwbHksIExlaXN1cmVfbGFtYmRhLCBMZWlzdXJlX2xldCwgTGVpc3VyZV9saXQsIExlaXN1cmVfcmVmLCBOaWwsIGFkZFVuaXEsIGNvbnMsIGNvbnNGcm9tLCBkZWZpbmUsIGR1bXBBbm5vLCBnZW4sIGdlbkFwcGx5QXJnLCBnZW5MZXRzLCBnZW5VbmlxLCBnZXRBbm5vQm9keSwgZ2V0QW5ub0RhdGEsIGdldEFubm9OYW1lLCBnZXRBcHBseUFyZywgZ2V0QXBwbHlGdW5jLCBnZXRMYW1iZGFCb2R5LCBnZXRMYW1iZGFWYXIsIGdldExhc3RMZXRCb2R5LCBnZXRMZXRCb2R5LCBnZXRMZXROYW1lLCBnZXRMZXRWYWx1ZSwgZ2V0TGl0VmFsLCBnZXRSZWZOYW1lLCBsZWZ0LCBsZXRMaXN0LCBtYWtlU3luY01vbmFkLCBtZW1vaXplLCBuYW1lU3ViLCByaWdodCwgcm9vdCwgcnVuTW9uYWQsIHNldERhdGFUeXBlLCBzZXRUeXBlLCB1bmlxTmFtZSwgdmFyTmFtZVN1YiwgXywgX2ZhbHNlLCBfcmVmLCBfcmVmMTtcblxuICBfcmVmID0gcm9vdCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9hc3QnKSwgbmFtZVN1YiA9IF9yZWYubmFtZVN1YiwgZ2V0TGl0VmFsID0gX3JlZi5nZXRMaXRWYWwsIGdldFJlZk5hbWUgPSBfcmVmLmdldFJlZk5hbWUsIGdldExhbWJkYVZhciA9IF9yZWYuZ2V0TGFtYmRhVmFyLCBnZXRMYW1iZGFCb2R5ID0gX3JlZi5nZXRMYW1iZGFCb2R5LCBnZXRBcHBseUZ1bmMgPSBfcmVmLmdldEFwcGx5RnVuYywgZ2V0QXBwbHlBcmcgPSBfcmVmLmdldEFwcGx5QXJnLCBnZXRBbm5vTmFtZSA9IF9yZWYuZ2V0QW5ub05hbWUsIGdldEFubm9EYXRhID0gX3JlZi5nZXRBbm5vRGF0YSwgZ2V0QW5ub0JvZHkgPSBfcmVmLmdldEFubm9Cb2R5LCBnZXRMZXROYW1lID0gX3JlZi5nZXRMZXROYW1lLCBnZXRMZXRWYWx1ZSA9IF9yZWYuZ2V0TGV0VmFsdWUsIGdldExldEJvZHkgPSBfcmVmLmdldExldEJvZHksIExlaXN1cmVfbGl0ID0gX3JlZi5MZWlzdXJlX2xpdCwgTGVpc3VyZV9yZWYgPSBfcmVmLkxlaXN1cmVfcmVmLCBMZWlzdXJlX2xhbWJkYSA9IF9yZWYuTGVpc3VyZV9sYW1iZGEsIExlaXN1cmVfYXBwbHkgPSBfcmVmLkxlaXN1cmVfYXBwbHksIExlaXN1cmVfbGV0ID0gX3JlZi5MZWlzdXJlX2xldCwgTGVpc3VyZV9hbm5vID0gX3JlZi5MZWlzdXJlX2Fubm8sIHNldFR5cGUgPSBfcmVmLnNldFR5cGUsIHNldERhdGFUeXBlID0gX3JlZi5zZXREYXRhVHlwZSwgY29ucyA9IF9yZWYuY29ucywgTmlsID0gX3JlZi5OaWwsIGNvbnNGcm9tID0gX3JlZi5jb25zRnJvbSwgZGVmaW5lID0gX3JlZi5kZWZpbmU7XG5cbiAgX3JlZjEgPSByZXF1aXJlKCcuL3J1bnRpbWUnKSwgbWFrZVN5bmNNb25hZCA9IF9yZWYxLm1ha2VTeW5jTW9uYWQsIHJ1bk1vbmFkID0gX3JlZjEucnVuTW9uYWQsIF9mYWxzZSA9IF9yZWYxLl9mYWxzZSwgbGVmdCA9IF9yZWYxLmxlZnQsIHJpZ2h0ID0gX3JlZjEucmlnaHQ7XG5cbiAgXyA9IHJlcXVpcmUoJy4vbG9kYXNoLm1pbicpO1xuXG4gIHZhck5hbWVTdWIgPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIFwiTF9cIiArIChuYW1lU3ViKG4pKTtcbiAgfTtcblxuICBnZW4gPSBmdW5jdGlvbihhc3QpIHtcbiAgICByZXR1cm4gZ2VuVW5pcShhc3QsIE5pbCwgW05pbCwgMF0pO1xuICB9O1xuXG4gIGdlblVuaXEgPSBmdW5jdGlvbihhc3QsIG5hbWVzLCB1bmlxKSB7XG4gICAgdmFyIGFyaXR5LCBkYXRhLCBmdW5jTmFtZSwgZ2VubmVkLCBuLCBuYW1lLCBzcmMsIHUsIF9yZWYyO1xuXG4gICAgc3dpdGNoIChhc3QuY29uc3RydWN0b3IpIHtcbiAgICAgIGNhc2UgTGVpc3VyZV9saXQ6XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShnZXRMaXRWYWwoYXN0KSk7XG4gICAgICBjYXNlIExlaXN1cmVfcmVmOlxuICAgICAgICByZXR1cm4gXCJcIiArICh1bmlxTmFtZShnZXRSZWZOYW1lKGFzdCksIHVuaXEpKSArIFwiKClcIjtcbiAgICAgIGNhc2UgTGVpc3VyZV9sYW1iZGE6XG4gICAgICAgIG5hbWUgPSBnZXRMYW1iZGFWYXIoYXN0KTtcbiAgICAgICAgdSA9IGFkZFVuaXEobmFtZSwgbmFtZXMsIHVuaXEpO1xuICAgICAgICBuID0gY29ucyhuYW1lLCBuYW1lcyk7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uKFwiICsgKHVuaXFOYW1lKG5hbWUsIHUpKSArIFwiKXtyZXR1cm4gXCIgKyAoZ2VuVW5pcShnZXRMYW1iZGFCb2R5KGFzdCksIG4sIHUpKSArIFwifVwiO1xuICAgICAgY2FzZSBMZWlzdXJlX2FwcGx5OlxuICAgICAgICByZXR1cm4gXCJcIiArIChnZW5VbmlxKGdldEFwcGx5RnVuYyhhc3QpLCBuYW1lcywgdW5pcSkpICsgXCIoXCIgKyAoZ2VuQXBwbHlBcmcoZ2V0QXBwbHlBcmcoYXN0KSwgbmFtZXMsIHVuaXEpKSArIFwiKVwiO1xuICAgICAgY2FzZSBMZWlzdXJlX2xldDpcbiAgICAgICAgcmV0dXJuIFwiKGZ1bmN0aW9uKCl7XFxuXCIgKyAoZ2VuTGV0cyhhc3QsIG5hbWVzLCB1bmlxKSkgKyBcIn0pKClcIjtcbiAgICAgIGNhc2UgTGVpc3VyZV9hbm5vOlxuICAgICAgICBuYW1lID0gZ2V0QW5ub05hbWUoYXN0KTtcbiAgICAgICAgZGF0YSA9IGdldEFubm9EYXRhKGFzdCk7XG4gICAgICAgIGdlbm5lZCA9IGdlblVuaXEoZ2V0QW5ub0JvZHkoYXN0KSwgbmFtZXMsIHVuaXEpO1xuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgICAgIHJldHVybiBcInNldFR5cGUoXCIgKyBnZW5uZWQgKyBcIiwgJ1wiICsgZGF0YSArIFwiJylcIjtcbiAgICAgICAgICBjYXNlICdkYXRhVHlwZSc6XG4gICAgICAgICAgICByZXR1cm4gXCJzZXREYXRhVHlwZShcIiArIGdlbm5lZCArIFwiLCAnXCIgKyBkYXRhICsgXCInKVwiO1xuICAgICAgICAgIGNhc2UgJ2RlZmluZSc6XG4gICAgICAgICAgICBfcmVmMiA9IGRhdGEudG9BcnJheSgpLCBmdW5jTmFtZSA9IF9yZWYyWzBdLCBhcml0eSA9IF9yZWYyWzFdLCBzcmMgPSBfcmVmMlsyXTtcbiAgICAgICAgICAgIHJldHVybiBcImRlZmluZSgnXCIgKyBmdW5jTmFtZSArIFwiJywgKGZ1bmN0aW9uKCl7cmV0dXJuIFwiICsgZ2VubmVkICsgXCJ9KSwgXCIgKyBhcml0eSArIFwiLCBcIiArIChKU09OLnN0cmluZ2lmeShzcmMpKSArIFwiKVwiO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZ2VubmVkO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiRFVSPyBcIiArIGFzdCArIFwiLCBcIiArIGFzdC5jb25zdHJ1Y3RvciArIFwiIFwiICsgTGVpc3VyZV9sYW1iZGE7XG4gICAgfVxuICB9O1xuXG4gIG1lbW9pemUgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgcmV0dXJuIFwiKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gXCIgKyBmdW5jICsgXCIpfX0pKClcIjtcbiAgfTtcblxuICBkdW1wQW5ubyA9IGZ1bmN0aW9uKGFzdCkge1xuICAgIGlmIChhc3QgaW5zdGFuY2VvZiBMZWlzdXJlX2Fubm8pIHtcbiAgICAgIHJldHVybiBkdW1wQW5ubyhnZXRBbm5vQm9keShhc3QpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFzdDtcbiAgICB9XG4gIH07XG5cbiAgZ2VuQXBwbHlBcmcgPSBmdW5jdGlvbihhcmcsIG5hbWVzLCB1bmlxKSB7XG4gICAgaWYgKGR1bXBBbm5vKGFyZykgaW5zdGFuY2VvZiBMZWlzdXJlX2FwcGx5KSB7XG4gICAgICByZXR1cm4gbWVtb2l6ZShnZW5VbmlxKGFyZywgbmFtZXMsIHVuaXEpKTtcbiAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIExlaXN1cmVfcmVmKSB7XG4gICAgICByZXR1cm4gdW5pcU5hbWUoZ2V0UmVmTmFtZShhcmcpLCB1bmlxKTtcbiAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIExlaXN1cmVfbGV0KSB7XG4gICAgICByZXR1cm4gXCJmdW5jdGlvbigpe1wiICsgKGdlbkxldHMoYXJnLCBuYW1lcywgdW5pcSkpICsgXCJ9XCI7XG4gICAgfSBlbHNlIGlmIChkdW1wQW5ubyhhcmcpIGluc3RhbmNlb2YgTGVpc3VyZV9sYW1iZGEpIHtcbiAgICAgIHJldHVybiBtZW1vaXplKGdlblVuaXEoYXJnLCBuYW1lcywgdW5pcSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJmdW5jdGlvbigpe3JldHVybiBcIiArIChnZW5VbmlxKGFyZywgbmFtZXMsIHVuaXEpKSArIFwifVwiO1xuICAgIH1cbiAgfTtcblxuICBnZW5MZXRzID0gZnVuY3Rpb24oYXN0LCBuYW1lcywgdW5pcSkge1xuICAgIHZhciBhc3NpZ25zLCBkZWNzLCBfcmVmMjtcblxuICAgIF9yZWYyID0gXy5mb2xkbChsZXRMaXN0KGFzdCwgW10pLCAoZnVuY3Rpb24ocmVzdWx0LCBsKSB7XG4gICAgICB2YXIgY29kZSwgbGV0TmFtZSwgbGV0TmFtZXMsIG4sIG5ld1UsIHU7XG5cbiAgICAgIG4gPSByZXN1bHRbMF0sIHUgPSByZXN1bHRbMV0sIGxldE5hbWVzID0gcmVzdWx0WzJdLCBjb2RlID0gcmVzdWx0WzNdO1xuICAgICAgbmV3VSA9IGFkZFVuaXEoZ2V0TGV0TmFtZShsKSwgbiwgdSk7XG4gICAgICBsZXROYW1lID0gdW5pcU5hbWUoZ2V0TGV0TmFtZShsKSwgbmV3VSk7XG4gICAgICByZXR1cm4gW2NvbnMoZ2V0TGV0TmFtZShsKSwgbiksIG5ld1UsIGNvbnMobGV0TmFtZSwgbGV0TmFtZXMpLCBjb25zKCdcXG4nICsgbGV0TmFtZSArICcgPSAnICsgZ2VuQXBwbHlBcmcoZ2V0TGV0VmFsdWUobCksIG4sIHUpLCBjb2RlKV07XG4gICAgfSksIFtuYW1lcywgdW5pcSwgTmlsLCBOaWxdKSwgbmFtZXMgPSBfcmVmMlswXSwgdW5pcSA9IF9yZWYyWzFdLCBkZWNzID0gX3JlZjJbMl0sIGFzc2lnbnMgPSBfcmVmMlszXTtcbiAgICByZXR1cm4gXCJcXG52YXIgXCIgKyAoZGVjcy5qb2luKCcsICcpKSArIFwiO1xcblwiICsgKGFzc2lnbnMuam9pbignO1xcbicpKSArIFwiO1xcbnJldHVybiBcIiArIChnZW5VbmlxKGdldExhc3RMZXRCb2R5KGFzdCksIG5hbWVzLCB1bmlxKSk7XG4gIH07XG5cbiAgYWRkVW5pcSA9IGZ1bmN0aW9uKG5hbWUsIG5hbWVzLCB1bmlxKSB7XG4gICAgdmFyIG51bSwgb3ZlcnJpZGVzO1xuXG4gICAgaWYgKChuYW1lcy5maW5kKGZ1bmN0aW9uKGVsKSB7XG4gICAgICByZXR1cm4gZWwgPT09IG5hbWU7XG4gICAgfSkpICE9PSBOaWwpIHtcbiAgICAgIG92ZXJyaWRlcyA9IHVuaXFbMF0sIG51bSA9IHVuaXFbMV07XG4gICAgICByZXR1cm4gW2NvbnMoY29ucyhuYW1lLCBcIlwiICsgbmFtZSArIFwiX1wiICsgbnVtKSwgb3ZlcnJpZGVzKSwgbnVtICsgMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmlxO1xuICAgIH1cbiAgfTtcblxuICB1bmlxTmFtZSA9IGZ1bmN0aW9uKG5hbWUsIHVuaXEpIHtcbiAgICB2YXIga3Y7XG5cbiAgICB1bmlxID0gdW5pcVswXTtcbiAgICBrdiA9IHVuaXEuZmluZCgoZnVuY3Rpb24oZWwpIHtcbiAgICAgIHJldHVybiBlbC5oZWFkKCkgPT09IG5hbWU7XG4gICAgfSksIHVuaXEpO1xuICAgIHJldHVybiB2YXJOYW1lU3ViKChrdiAhPT0gTmlsID8ga3YudGFpbCgpIDogbmFtZSkpO1xuICB9O1xuXG4gIGxldExpc3QgPSBmdW5jdGlvbihhc3QsIGJ1Zikge1xuICAgIGlmIChhc3QgaW5zdGFuY2VvZiBMZWlzdXJlX2xldCkge1xuICAgICAgYnVmLnB1c2goYXN0KTtcbiAgICAgIHJldHVybiBsZXRMaXN0KGdldExldEJvZHkoYXN0KSwgYnVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9XG4gIH07XG5cbiAgZ2V0TGFzdExldEJvZHkgPSBmdW5jdGlvbihhc3QpIHtcbiAgICBpZiAoYXN0IGluc3RhbmNlb2YgTGVpc3VyZV9sZXQpIHtcbiAgICAgIHJldHVybiBnZXRMYXN0TGV0Qm9keShnZXRMZXRCb2R5KGFzdCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXN0O1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ3J1bkFzdCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhc3QpIHtcbiAgICAgIHZhciBlcnI7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBldmFsKFwiKFwiICsgKGdlbihhc3QoKSkpICsgXCIpXCIpO1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgcmV0dXJuIExfcGFyc2VFcnIoKShmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gXCJcXG5cXG5QYXJzZSBlcnJvcjogXCIgKyBlcnIudG9TdHJpbmcoKSArIFwiXFxuQVNUOiBcIjtcbiAgICAgICAgfSkoYXN0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICByb290LmdlbiA9IGdlbjtcblxufSkuY2FsbCh0aGlzKTtcblxuLypcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPWdlbi5tYXBcbiovXG4iLCJMX3J1bk1vbmFkcyhbXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0cnVlXCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0cnVlID0gXFxcXGEgYiAuIGFcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKHNldFR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gTF9hKCl9fSwgJ3RydWUnKSwgJ3RydWUnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZmFsc2VcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcImZhbHNlID0gXFxcXGEgYiAuIGJcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKHNldFR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gTF9iKCl9fSwgJ2ZhbHNlJyksICdmYWxzZScpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJub3RcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcIm5vdCBiID0gYiBmYWxzZSB0cnVlXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Ipe3JldHVybiBMX2IoKShMX2ZhbHNlKShMX3RydWUpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYW5kXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhbmQgYSBiID0gYSBiIGZhbHNlXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiBMX2EoKShMX2IpKExfZmFsc2UpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIm9yXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJvciBhIGIgPSBhIHRydWUgYlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gTF9hKCkoTF90cnVlKShMX2IpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInNvbWVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInNvbWUgeCA9IFxcXFxzb21lQ2FzZSBub25lQ2FzZSAuIHNvbWVDYXNlIHhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9zb21lQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfbm9uZUNhc2Upe3JldHVybiBMX3NvbWVDYXNlKCkoTF94KX19LCAnc29tZScpfSwgJ3NvbWUnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic29tZTJcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInNvbWUyIGEgYiA9IFxcXFxzb21lQ2FzZSBub25lQ2FzZSAuIHNvbWVDYXNlIGEgYlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX3NvbWVDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9ub25lQ2FzZSl7cmV0dXJuIExfc29tZUNhc2UoKShMX2EpKExfYil9fSwgJ3NvbWUyJyl9fSwgJ3NvbWUyJykpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIm5vbmVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcIm5vbmUgPSBcXFxcc29tZUNhc2Ugbm9uZUNhc2UgLiBub25lQ2FzZVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoc2V0VHlwZShmdW5jdGlvbihMX3NvbWVDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9ub25lQ2FzZSl7cmV0dXJuIExfbm9uZUNhc2UoKX19LCAnbm9uZScpLCAnbm9uZScpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJuZXFcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcIm5lcSBhIGIgPSBub3QgKGVxIGEgYilcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIExfbm90KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9lcSgpKExfYSkoTF9iKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGVmdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGVmdCB4ID0gXFxcXGxDYXNlIHJDYXNlIC4gbENhc2UgeFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF94KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2xDYXNlKXtyZXR1cm4gZnVuY3Rpb24oTF9yQ2FzZSl7cmV0dXJuIExfbENhc2UoKShMX3gpfX0sICdsZWZ0Jyl9LCAnbGVmdCcpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyaWdodFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmlnaHQgeCA9IFxcXFxsQ2FzZSByQ2FzZSAuIHJDYXNlIHhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9sQ2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfckNhc2Upe3JldHVybiBMX3JDYXNlKCkoTF94KX19LCAncmlnaHQnKX0sICdyaWdodCcpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzaG93XCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzaG93IHggPSBzdHJTdHJpbmcgeFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF94KXtyZXR1cm4gTF9zdHJTdHJpbmcoKShMX3gpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaWRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImlkIHggPSB4XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBMX3goKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImNvbXBvc2VcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImNvbXBvc2UgZiBnID0gXFxcXHggLiBmIChnIHgpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBzZXREYXRhVHlwZShmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2cpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIExfZigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZygpKExfeCkpfX0pKCkpfSwgJ2NvbXBvc2UnKX19LCAnY29tcG9zZScpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmbGlwXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmbGlwIGZ1bmMgPSBcXFxceCB5IC4gZnVuYyB5IHhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF94KXtyZXR1cm4gZnVuY3Rpb24oTF95KXtyZXR1cm4gTF9mdW5jKCkoTF95KShMX3gpfX0sICdmbGlwJyl9LCAnZmxpcCcpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb25zXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb25zIGEgYiA9IFxcXFxmIC4gZiBhIGJcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF9hKShMX2IpfSwgJ2NvbnMnKX19LCAnY29ucycpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc0NvbnNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImlzQ29ucyBjID0gaGFzVHlwZSBjIGNvbnNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfYyl7cmV0dXJuIExfaGFzVHlwZSgpKExfYykoTF9jb25zKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIm5pbFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibmlsID0gXFxcXGEgYiAuIGJcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKHNldFR5cGUoZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gTF9iKCl9fSwgJ25pbCcpLCAnbmlsJykpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImlzTmlsXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc05pbCBuID0gaGFzVHlwZSBuIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uKXtyZXR1cm4gTF9oYXNUeXBlKCkoTF9uKShMX25pbCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJoZWFkXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJoZWFkIGwgPSBsIFxcXFxoIHQgLiBoXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2wpe3JldHVybiBMX2woKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBMX2goKX19KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInRhaWxcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInRhaWwgbCA9IGwgXFxcXGggdCAuIHRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbCl7cmV0dXJuIExfbCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfdCgpfX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGFzdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGFzdCBsID0gaXNDb25zIGxcXG4gIGwgXFxcXGggdCAuIGlzQ29ucyB0IChsYXN0IHQpIGhcXG4gIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sKXtyZXR1cm4gTF9pc0NvbnMoKShMX2wpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfaXNDb25zKCkoTF90KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xhc3QoKShMX3QpKX19KSgpKShMX2gpfX0pfX0pKCkpKX19KSgpKShMX25pbCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyZW1vdmVMYXN0XCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyZW1vdmVMYXN0IGwgPSBpc0NvbnMgbFxcbiAgbCBcXFxcaCB0IC4gaXNDb25zIHQgKGNvbnMgaCAocmVtb3ZlTGFzdCB0KSkgbmlsXFxuICBuaWxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbCl7cmV0dXJuIExfaXNDb25zKCkoTF9sKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2woKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBMX2lzQ29ucygpKExfdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlbW92ZUxhc3QoKShMX3QpKX19KSgpKSl9fSkoKSkoTF9uaWwpfX0pfX0pKCkpKX19KSgpKShMX25pbCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsZW5ndGhcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImxlbmd0aCBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gKyAxIChsZW5ndGggdClcXG4gIDBcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfJG8oKShmdW5jdGlvbigpe3JldHVybiAxfSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sZW5ndGgoKShMX3QpKX19KSgpKX19fSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYXBwZW5kXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhcHBlbmQgYSBiID0gYSAoXFxcXGggdCBEIC4gY29ucyBoIChhcHBlbmQgdCBiKSkgYlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gTF9hKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FwcGVuZCgpKExfdCkoTF9iKSl9fSkoKSl9fX0pfX0pKCkpKExfYil9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZmxhdHRlblwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZmxhdHRlbiBsaXN0ID0gaXNDb25zIGxpc3RcXG4gIHN1YmZsYXR0ZW4gbGlzdCBuaWxcXG4gIGxpc3RcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfaXNDb25zKCkoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N1YmZsYXR0ZW4oKShMX2xpc3QpKExfbmlsKSl9fSkoKSkoTF9saXN0KX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInN1YmZsYXR0ZW5cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInN1YmZsYXR0ZW4gbGlzdCByZXN1bHQgPSBpc05pbCBsaXN0XFxuICByZXN1bHRcXG4gIGlzQ29ucyBsaXN0XFxuICAgIGxpc3QgXFxcXGggdCAuIHN1YmZsYXR0ZW4gaCAoc3ViZmxhdHRlbiB0IHJlc3VsdClcXG4gICAgY29ucyBsaXN0IHJlc3VsdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiBMX2lzTmlsKCkoTF9saXN0KShMX3Jlc3VsdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc0NvbnMoKShMX2xpc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfc3ViZmxhdHRlbigpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdWJmbGF0dGVuKCkoTF90KShMX3Jlc3VsdCkpfX0pKCkpfX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2xpc3QpKExfcmVzdWx0KSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJldmVyc2VcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInJldmVyc2UgbCA9IHJldiBsIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sKXtyZXR1cm4gTF9yZXYoKShMX2wpKExfbmlsKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJldlwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmV2IGwgcmVzdWx0ID0gbCAoXFxcXGggdCBEIC4gcmV2IHQgKGNvbnMgaCByZXN1bHQpKSByZXN1bHRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbCl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0KXtyZXR1cm4gTF9sKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9yZXYoKShMX3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfaCkoTF9yZXN1bHQpKX19KSgpKX19fSl9fSkoKSkoTF9yZXN1bHQpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImZpbHRlclwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZmlsdGVyIGZ1bmMgbGlzdCA9IGxpc3QgKFxcXFxoIHQgRCAuIGZ1bmMgaCAoY29ucyBoKSBpZCAoZmlsdGVyIGZ1bmMgdCkpIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9saXN0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9mdW5jKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKX19KSgpKShMX2lkKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZpbHRlcigpKExfZnVuYykoTF90KSl9fSkoKSl9fX0pfX0pKCkpKExfbmlsKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmaW5kXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmaW5kIHByZWRpY2F0ZSBsaXN0ID0gbGlzdCAoXFxcXGggdCBEIC4gcHJlZGljYXRlIGggKHNvbWUgaCkgKGZpbmQgcHJlZGljYXRlIHQpKSBub25lXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3ByZWRpY2F0ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfcHJlZGljYXRlKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NvbWUoKShMX2gpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZpbmQoKShMX3ByZWRpY2F0ZSkoTF90KSl9fSkoKSl9fX0pfX0pKCkpKExfbm9uZSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY29udGFpbnNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImNvbnRhaW5zIGxpc3QgaXRlbSA9IGZpbmQgKFxcXFxlbCAuIGVxIGVsIGl0ZW0pIGxpc3QgKFxcXFx4IC4gdHJ1ZSkgZmFsc2VcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIExfZmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZWwpe3JldHVybiBMX2VxKCkoTF9lbCkoTF9pdGVtKX0pfX0pKCkpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF94KXtyZXR1cm4gTF90cnVlKCl9KX19KSgpKShMX2ZhbHNlKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYXBcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcIm1hcCBmdW5jIGwgPSBsIChcXFxcaCB0IEQgLiBjb25zIChmdW5jIGgpIChtYXAgZnVuYyB0KSkgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX2woKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Z1bmMoKShMX2gpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX21hcCgpKExfZnVuYykoTF90KSl9fSkoKSl9fX0pfX0pKCkpKExfbmlsKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYXBTYXZlXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYXBTYXZlIGZ1bmMgbCA9IGxcXG4gIFxcXFxoIHQgRCAuIFxcXFxcXFxcXFxuICAgIG5ld0ggPSBmdW5jIGhcXG4gICAgbmV3VCA9IG1hcFNhdmUgZnVuYyB0XFxuICAgIC5cXG4gICAgYW5kIChlcSBuZXdIIGgpIChlcSBuZXdUIHQpXFxuICAgICAgbFxcbiAgICAgIGNvbnMgbmV3SCBuZXdUXFxuICBuaWxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIExfbCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9uZXdULCBMX25ld0g7XG5cbkxfbmV3VCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFwU2F2ZSgpKExfZnVuYykoTF90KSl9fSkoKTtcblxuTF9uZXdIID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mdW5jKCkoTF9oKSl9fSkoKTtcbnJldHVybiBMX2FuZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKShMX25ld0gpKExfaCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKShMX25ld1QpKExfdCkpfX0pKCkpKExfbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9uZXdIKShMX25ld1QpKX19KSgpKX0pKCl9fX0pfX0pKCkpKExfbmlsKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmb2xkbFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZm9sZGwgZnVuYyBpbml0aWFsVmFsdWUgbCA9IGwgKFxcXFxoIHQgRCAuIGZvbGRsIGZ1bmMgKGZ1bmMgaW5pdGlhbFZhbHVlIGgpIHQpIGluaXRpYWxWYWx1ZVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9pbml0aWFsVmFsdWUpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX2woKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2ZvbGRsKCkoTF9mdW5jKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Z1bmMoKShMX2luaXRpYWxWYWx1ZSkoTF9oKSl9fSkoKSkoTF90KX19fSl9fSkoKSkoTF9pbml0aWFsVmFsdWUpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmb2xkbDFcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImZvbGRsMSBmdW5jIGwgPSBsIFxcXFxoIHQgLiBmb2xkbCBmdW5jIGggdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gTF9sKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF9mb2xkbCgpKExfZnVuYykoTF9oKShMX3QpfX0pfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImZvbGRyXCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmb2xkciBmdW5jIGluaXRpYWxWYWx1ZSBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gZnVuYyBoIChmb2xkciBmdW5jIGluaXRpYWxWYWx1ZSB0KVxcbiAgaW5pdGlhbFZhbHVlXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2luaXRpYWxWYWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfZnVuYygpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mb2xkcigpKExfZnVuYykoTF9pbml0aWFsVmFsdWUpKExfdCkpfX0pKCkpfX19KX19KSgpKShMX2luaXRpYWxWYWx1ZSl9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImZvbGRyMVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZm9sZHIxIGZ1bmMgbGlzdCA9IGxpc3QgXFxcXGggdCAuIGlzTmlsIHRcXG4gIGhcXG4gIGZ1bmMgaCAoZm9sZHIxIGZ1bmMgdClcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfaXNOaWwoKShMX3QpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mdW5jKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZvbGRyMSgpKExfZnVuYykoTF90KSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImludGVyc3BlcnNlXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpbnRlcnNwZXJzZSBsaXN0IGVsZW1lbnQgPSBsaXN0IChcXFxcaCB0IEQgLlxcbiAgaXNOaWwgdFxcbiAgICBsaXN0XFxuICAgIGNvbnMgaCAoY29ucyBlbGVtZW50IChpbnRlcnNwZXJzZSB0IGVsZW1lbnQpKSkgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2VsZW1lbnQpe3JldHVybiBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2lzTmlsKCkoTF90KShMX2xpc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9lbGVtZW50KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ludGVyc3BlcnNlKCkoTF90KShMX2VsZW1lbnQpKX19KSgpKSl9fSkoKSkpfX0pKCkpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiam9pblwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiam9pbiBsaXN0IGVsID0gc3RyQ2F0IChpbnRlcnNwZXJzZSBsaXN0IGVsKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIExfc3RyQ2F0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pbnRlcnNwZXJzZSgpKExfbGlzdCkoTF9lbCkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImZpbmRJbmRleFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZmluZEluZGV4IGZ1bmMgbGlzdCA9IGlkeCBsaXN0IGZ1bmMgMFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9pZHgoKShMX2xpc3QpKExfZnVuYykoZnVuY3Rpb24oKXtyZXR1cm4gMH0pfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImlkeFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaWR4IGxpc3QgZnVuYyBwb3MgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBmdW5jIGhcXG4gICAgcG9zXFxuICAgIGlkeCB0IGZ1bmMgKCsgMSBwb3MpXFxuICAtMVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2Z1bmMoKShMX2gpKExfcG9zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lkeCgpKExfdCkoTF9mdW5jKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyRvKCkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKExfcG9zKSl9fSkoKSkpfX0pKCkpfX19KX19KSgpKShmdW5jdGlvbigpe3JldHVybiAtMX0pfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmRleFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5kZXggbGlzdCBlbCA9IGZpbmQgKFxcXFxpdGVtIC4gPT0gZWwgaXRlbSkgbGlzdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIExfZmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIExfJHAkcCgpKExfZWwpKExfaXRlbSl9KX19KSgpKShMX2xpc3QpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImFjb25zXCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhY29ucyBrIHYgYWxpc3QgPSBjb25zIChjb25zIGsgdikgYWxpc3RcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfayl7cmV0dXJuIGZ1bmN0aW9uKExfdil7cmV0dXJuIGZ1bmN0aW9uKExfYWxpc3Qpe3JldHVybiBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2spKExfdikpfX0pKCkpKExfYWxpc3QpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhc3NvY1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYXNzb2MgayBhbGlzdCAgPSBmaW5kIChcXFxcZWwgLiBlcSBrIChoZWFkIGVsKSkgYWxpc3QgKFxcXFxjZWxsIC4gY2VsbCBcXFxcaGVhZCB0YWlsIC4gc29tZSB0YWlsKSBub25lXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2spe3JldHVybiBmdW5jdGlvbihMX2FsaXN0KXtyZXR1cm4gTF9maW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIExfZXEoKShMX2spKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfZWwpKX19KSgpKX0pfX0pKCkpKExfYWxpc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY2VsbCl7cmV0dXJuIExfY2VsbCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaGVhZCl7cmV0dXJuIGZ1bmN0aW9uKExfdGFpbCl7cmV0dXJuIExfc29tZSgpKExfdGFpbCl9fSl9fSkoKSl9KX19KSgpKShMX25vbmUpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJhc3NvY1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmFzc29jIHYgYWxpc3QgPSBmaW5kIChcXFxcZWwgLiBlcSB2ICh0YWlsIGVsKSkgYWxpc3QgKFxcXFxjZWxsIC4gY2VsbCBcXFxcaGVhZCB0YWlsIC4gc29tZSBoZWFkKSBub25lXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Ype3JldHVybiBmdW5jdGlvbihMX2FsaXN0KXtyZXR1cm4gTF9maW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9lbCl7cmV0dXJuIExfZXEoKShMX3YpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfZWwpKX19KSgpKX0pfX0pKCkpKExfYWxpc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY2VsbCl7cmV0dXJuIExfY2VsbCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaGVhZCl7cmV0dXJuIGZ1bmN0aW9uKExfdGFpbCl7cmV0dXJuIExfc29tZSgpKExfaGVhZCl9fSl9fSkoKSl9KX19KSgpKShMX25vbmUpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInF1aWNrc29ydFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicXVpY2tzb3J0IGxlc3MgbGlzdCA9IChxcyBsZXNzIGxpc3QpIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sZXNzKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9xcygpKExfbGVzcykoTF9saXN0KShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInFzIHNvcnRlZEZ1bmMgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIFxcXFxcXFxcXFxuICAgIGdyZWF0ZXIgPSBmaWx0ZXIgKHNvcnRlZEZ1bmMgaCkgdFxcbiAgICBsZXNzZXIgPSBmaWx0ZXIgKGNvbXBvc2Ugbm90IChzb3J0ZWRGdW5jIGgpKSB0XFxuICAgIC5cXG4gICAgXFxcXHJlc3QgLiAocXMgc29ydGVkRnVuYyBsZXNzZXIpIChjb25zIGggKChxcyBzb3J0ZWRGdW5jIGdyZWF0ZXIpIHJlc3QpKVxcbiAgaWRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc29ydGVkRnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9sZXNzZXIsIExfZ3JlYXRlcjtcblxuTF9sZXNzZXIgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZpbHRlcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29tcG9zZSgpKExfbm90KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NvcnRlZEZ1bmMoKShMX2gpKX19KSgpKSl9fSkoKSkoTF90KSl9fSkoKTtcblxuTF9ncmVhdGVyID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9maWx0ZXIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NvcnRlZEZ1bmMoKShMX2gpKX19KSgpKShMX3QpKX19KSgpO1xucmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIExfcXMoKShMX3NvcnRlZEZ1bmMpKExfbGVzc2VyKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcXMoKShMX3NvcnRlZEZ1bmMpKExfZ3JlYXRlcikoTF9yZXN0KSl9fSkoKSkpfX0pKCkpfX0pKCl9fX0pfX0pKCkpKExfaWQpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImluc2VydFNvcnRlZFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5zZXJ0U29ydGVkIHNvcnRGdW5jIGl0ZW0gbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIHNvcnRGdW5jIGl0ZW0gaCAoY29ucyBpdGVtIGxpc3QpIChjb25zIGggKGluc2VydFNvcnRlZCBzb3J0RnVuYyBpdGVtIHQpKVxcbiAgY29ucyBpdGVtIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zb3J0RnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfc29ydEZ1bmMoKShMX2l0ZW0pKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9pdGVtKShMX2xpc3QpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaW5zZXJ0U29ydGVkKCkoTF9zb3J0RnVuYykoTF9pdGVtKShMX3QpKX19KSgpKSl9fSkoKSl9fX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfaXRlbSkoTF9uaWwpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInRva2VuIHR4dCBwb3MgPSBcXFxcZiAuIGYgdHh0IHBvc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF90eHQpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF90eHQpKExfcG9zKX0sICd0b2tlbicpfX0sICd0b2tlbicpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlblN0cmluZ1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5TdHJpbmcgdG9rID0gdG9rIFxcXFx0IHAgLiB0XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIExfdG9rKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gTF90KCl9fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlblBvc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5Qb3MgdG9rID0gdG9rIFxcXFx0IHAgLiBwXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIExfdG9rKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9wKXtyZXR1cm4gTF9wKCl9fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc1Rva2VuXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc1Rva2VuIHQgPSBoYXNUeXBlIHQgdG9rZW5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfaGFzVHlwZSgpKExfdCkoTF90b2tlbil9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJlbnNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcInBhcmVucyBzdGFydCBlbmQgY29udGVudCA9IFxcXFxmIC4gZiBzdGFydCBlbmQgY29udGVudFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfZW5kKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250ZW50KXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiBMX2YoKShMX3N0YXJ0KShMX2VuZCkoTF9jb250ZW50KX0sICdwYXJlbnMnKX19fSwgJ3BhcmVucycpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJlbnNTdGFydFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyZW5zU3RhcnQgcCA9IHAgXFxcXHMgZSBjIC4gc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wKXtyZXR1cm4gTF9wKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zKXtyZXR1cm4gZnVuY3Rpb24oTF9lKXtyZXR1cm4gZnVuY3Rpb24oTF9jKXtyZXR1cm4gTF9zKCl9fX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyZW5zRW5kXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJlbnNFbmQgcCA9IHAgXFxcXHMgZSBjIC4gZVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wKXtyZXR1cm4gTF9wKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zKXtyZXR1cm4gZnVuY3Rpb24oTF9lKXtyZXR1cm4gZnVuY3Rpb24oTF9jKXtyZXR1cm4gTF9lKCl9fX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyZW5zQ29udGVudFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyZW5zQ29udGVudCBwID0gcCBcXFxccyBlIGMgLiBjXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Ape3JldHVybiBMX3AoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Mpe3JldHVybiBmdW5jdGlvbihMX2Upe3JldHVybiBmdW5jdGlvbihMX2Mpe3JldHVybiBMX2MoKX19fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc1BhcmVuc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNQYXJlbnMgcCA9IGhhc1R5cGUgcCBwYXJlbnNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcCl7cmV0dXJuIExfaGFzVHlwZSgpKExfcCkoTF9wYXJlbnMpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFrZVBhcmVuc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFrZVBhcmVucyBzdGFydCBlbmQgY29udGVudCA9XFxuICBhbmQgKGlzQ29ucyBjb250ZW50KSAoaXNOaWwgKHRhaWwgY29udGVudCkpXFxuICAgIG1ha2VQYXJlbnMgc3RhcnQgZW5kIChoZWFkIGNvbnRlbnQpXFxuICAgIG9yIChpc1Rva2VuIGNvbnRlbnQpIChpc1BhcmVucyBjb250ZW50KVxcbiAgICAgIGNvbnRlbnRcXG4gICAgICBwYXJlbnMgc3RhcnQgZW5kIGNvbnRlbnRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc0NvbnMoKShMX2NvbnRlbnQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzTmlsKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF9jb250ZW50KSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFrZVBhcmVucygpKExfc3RhcnQpKExfZW5kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX2NvbnRlbnQpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9vcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNUb2tlbigpKExfY29udGVudCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNQYXJlbnMoKShMX2NvbnRlbnQpKX19KSgpKShMX2NvbnRlbnQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyZW5zKCkoTF9zdGFydCkoTF9lbmQpKExfY29udGVudCkpfX0pKCkpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyZW5zRnJvbVRva3NcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcInBhcmVuc0Zyb21Ub2tzIGxlZnQgcmlnaHQgY29udGVudCA9IFxcXFxcXFxcXFxuICBzdGFydCA9IHRva2VuUG9zIGxlZnRcXG4gIGVuZCA9ICsgKHRva2VuUG9zIHJpZ2h0KSAoc3RyTGVuICh0b2tlblN0cmluZyByaWdodCkpXFxuICAuXFxuICBwYXJlbnMgc3RhcnQgZW5kIGNvbnRlbnRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGVmdCl7cmV0dXJuIGZ1bmN0aW9uKExfcmlnaHQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZW5kLCBMX3N0YXJ0O1xuXG5MX2VuZCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJG8oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuUG9zKCkoTF9yaWdodCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTGVuKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfcmlnaHQpKX19KSgpKSl9fSkoKSkpfX0pKCk7XG5cbkxfc3RhcnQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuUG9zKCkoTF9sZWZ0KSl9fSkoKTtcbnJldHVybiBMX3BhcmVucygpKExfc3RhcnQpKExfZW5kKShMX2NvbnRlbnQpfSkoKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic3RyaXBQYXJlbnNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInN0cmlwUGFyZW5zIHAgPSBpc1BhcmVucyBwIChwYXJlbnNDb250ZW50IHApIHBcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcCl7cmV0dXJuIExfaXNQYXJlbnMoKShMX3ApKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyZW5zQ29udGVudCgpKExfcCkpfX0pKCkpKExfcCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUVyclwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VFcnIgbXNnMSBtc2cyID0gXFxcXGYgLiBmIChzdHJDYXQgKGNvbnMgbXNnMSAoY29ucyBtc2cyIG5pbCkpKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9tc2cxKXtyZXR1cm4gZnVuY3Rpb24oTF9tc2cyKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiBMX2YoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfbXNnMSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9tc2cyKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9LCAncGFyc2VFcnInKX19LCAncGFyc2VFcnInKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VFcnJNc2dcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlRXJyTXNnIGVyciA9IGVyciBcXFxcbSAuIG1cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gTF9lcnIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX20pe3JldHVybiBMX20oKX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNQYXJzZUVyclwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNQYXJzZUVyciB0aGluZyA9IGhhc1R5cGUgdGhpbmcgcGFyc2VFcnJcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdGhpbmcpe3JldHVybiBMX2hhc1R5cGUoKShMX3RoaW5nKShMX3BhcnNlRXJyKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImVtcHR5VG9rZW5cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcImVtcHR5VG9rZW4gPSByZWdleHAgJ15cXFxcXFxcXG5bIFxcXFxcXFxcaV0qKCN8JCknXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlZ2V4cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXlxcXFxuWyBcXFxcaV0qKCN8JClcIn0pKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWtlVG9rZW5zXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWtlVG9rZW5zIHN0cmluZ3Mgc3RhcnQgPSBzdHJpbmdzIChcXFxcaCB0IEQgLiBtYWtlTW9yZVRva2VucyBoIHQgc3RhcnQpIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHJpbmdzKXtyZXR1cm4gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIExfc3RyaW5ncygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfbWFrZU1vcmVUb2tlbnMoKShMX2gpKExfdCkoTF9zdGFydCl9fX0pfX0pKCkpKExfbmlsKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWtlTW9yZVRva2Vuc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFrZU1vcmVUb2tlbnMgaCB0IHN0YXJ0ID0gXFxcXFxcXFxcXG4gIG5leHQgPSBtYWtlVG9rZW5zIHQgKCsgc3RhcnQgKHN0ckxlbiBoKSlcXG4gIC5cXG4gIGFuZCAoc3RyTWF0Y2hlcyBoIGVtcHR5VG9rZW4pIChvciAoaXNOaWwgdCkgKHN0clN0YXJ0c1dpdGggKGhlYWQgdCkgJ1xcXFxuJykpXFxuICAgIG1ha2VUb2tlbnMgdCAoKyBzdGFydCAoc3RyTGVuIGgpKVxcbiAgICBvciAoc3RyU3RhcnRzV2l0aCBoICcgJykgKHN0clN0YXJ0c1dpdGggaCAnIycpXFxuICAgICAgbmV4dFxcbiAgICAgIGFuZCAoc3RyU3RhcnRzV2l0aCBoICdcXFxcbicpIChzdHJTdGFydHNXaXRoIChoZWFkIHQpICcjJylcXG4gICAgICAgIG1ha2VUb2tlbnMgKHRhaWwgdCkgKCsgc3RhcnQgKCsgKHN0ckxlbiBoKSAoc3RyTGVuIChoZWFkIHQpKSkpXFxuICAgICAgICBjb25zICh0b2tlbiBoIHN0YXJ0KSBuZXh0XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX25leHQ7XG5cbkxfbmV4dCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFrZVRva2VucygpKExfdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kbygpKExfc3RhcnQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTGVuKCkoTF9oKSl9fSkoKSkpfX0pKCkpKX19KSgpO1xucmV0dXJuIExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJNYXRjaGVzKCkoTF9oKShMX2VtcHR5VG9rZW4pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc05pbCgpKExfdCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyU3RhcnRzV2l0aCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfdCkpfX0pKCkpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxuXCJ9KSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFrZVRva2VucygpKExfdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kbygpKExfc3RhcnQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTGVuKCkoTF9oKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdGFydHNXaXRoKCkoTF9oKShmdW5jdGlvbigpe3JldHVybiBcIiBcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0clN0YXJ0c1dpdGgoKShMX2gpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiI1wifSkpfX0pKCkpKExfbmV4dCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0clN0YXJ0c1dpdGgoKShMX2gpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxuXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdGFydHNXaXRoKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF90KSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gXCIjXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWtlVG9rZW5zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF90KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kbygpKExfc3RhcnQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJG8oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckxlbigpKExfaCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTGVuKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF90KSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW4oKShMX2gpKExfc3RhcnQpKX19KSgpKShMX25leHQpKX19KSgpKSl9fSkoKSkpfX0pKCkpfSkoKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic3BsaXRUb2tlbnNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInNwbGl0VG9rZW5zIHN0ciBwYXQgPSBmaWx0ZXIgKFxcXFxzIC4gbm90IChlcSBzICcnKSkgKGJhc2ljU3BsaXRUb2tlbnMgc3RyIHBhdCB0cnVlKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIExfZmlsdGVyKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zKXtyZXR1cm4gTF9ub3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2VxKCkoTF9zKShmdW5jdGlvbigpe3JldHVybiBcIlwifSkpfX0pKCkpfSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9iYXNpY1NwbGl0VG9rZW5zKCkoTF9zdHIpKExfcGF0KShMX3RydWUpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJudW1iZXJQYXRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcIm51bWJlclBhdCA9IHJlZ2V4cCAnLT8oWzAtOV0rKFxcXFxcXFxcLlswLTldKyk/fFxcXFxcXFxcLlswLTldKyknXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlZ2V4cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLT8oWzAtOV0rKFxcXFwuWzAtOV0rKT98XFxcXC5bMC05XSspXCJ9KSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWF0Y2hPZmZzZXRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcIm1hdGNoT2Zmc2V0IHN0ciBtYXRjaCA9IGlzTmlsIG1hdGNoXFxuICBzdHJMZW4gc3RyXFxuICBoZWFkICh0YWlsICh0YWlsIG1hdGNoKSlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9tYXRjaCl7cmV0dXJuIExfaXNOaWwoKShMX21hdGNoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckxlbigpKExfc3RyKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF9tYXRjaCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmFzaWNTcGxpdFRva2Vuc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmFzaWNTcGxpdFRva2VucyBzdHIgcGF0IHByZXZJc0RlbCA9ID09IHN0ciAnJ1xcbiAgbmlsXFxuICBcXFxcXFxcXFxcbiAgICBudW0gPSBzdHJNYXRjaCBzdHIgbnVtYmVyUGF0XFxuICAgIGRlbCA9IHN0ck1hdGNoIHN0ciBwYXRcXG4gICAgbnVtT2Zmc2V0ID0gbWF0Y2hPZmZzZXQgc3RyIG51bVxcbiAgICBkZWxPZmZzZXQgPSBtYXRjaE9mZnNldCBzdHIgZGVsXFxuICAgIHNlbGVjdCA9IGFuZCAoPT0gbnVtT2Zmc2V0IDApIHByZXZJc0RlbFxcbiAgICAgIFxcXFxkZWwgbnVtIGZpcnN0IC4gbnVtXFxuICAgICAgPT0gZGVsT2Zmc2V0IDBcXG4gICAgICAgIFxcXFxkZWwgbnVtIGZpcnN0IC4gZGVsXFxuICAgICAgICBcXFxcZGVsIG51bSBmaXJzdCAuIGZpcnN0XFxuICAgIGZpcnN0ID0gc2VsZWN0IChoZWFkIGRlbCkgKGhlYWQgbnVtKSAoc3RyU3Vic3RyaW5nIHN0ciAwIGRlbE9mZnNldClcXG4gICAgLlxcbiAgICBjb25zXFxuICAgICAgZmlyc3RcXG4gICAgICBiYXNpY1NwbGl0VG9rZW5zXFxuICAgICAgICBzdHJTdWJzdHJpbmcgc3RyIChzdHJMZW4gZmlyc3QpIDBcXG4gICAgICAgIHBhdFxcbiAgICAgICAgc2VsZWN0IHRydWUgZmFsc2UgZmFsc2VcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX3ByZXZJc0RlbCl7cmV0dXJuIExfJHAkcCgpKExfc3RyKShmdW5jdGlvbigpe3JldHVybiBcIlwifSkoTF9uaWwpKGZ1bmN0aW9uKCl7XG52YXIgTF9maXJzdCwgTF9zZWxlY3QsIExfZGVsT2Zmc2V0LCBMX251bU9mZnNldCwgTF9kZWwsIExfbnVtO1xuXG5MX2ZpcnN0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZWxlY3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX2RlbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfbnVtKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdWJzdHJpbmcoKShMX3N0cikoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKExfZGVsT2Zmc2V0KSl9fSkoKSkpfX0pKCk7XG5cbkxfc2VsZWN0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyRwJHAoKShMX251bU9mZnNldCkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKShMX3ByZXZJc0RlbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9kZWxfMCl7cmV0dXJuIGZ1bmN0aW9uKExfbnVtXzEpe3JldHVybiBmdW5jdGlvbihMX2ZpcnN0KXtyZXR1cm4gTF9udW1fMSgpfX19KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyRwJHAoKShMX2RlbE9mZnNldCkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZGVsXzApe3JldHVybiBmdW5jdGlvbihMX251bV8xKXtyZXR1cm4gZnVuY3Rpb24oTF9maXJzdCl7cmV0dXJuIExfZGVsXzAoKX19fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9kZWxfMCl7cmV0dXJuIGZ1bmN0aW9uKExfbnVtXzEpe3JldHVybiBmdW5jdGlvbihMX2ZpcnN0KXtyZXR1cm4gTF9maXJzdCgpfX19KX19KSgpKSl9fSkoKSkpfX0pKCk7XG5cbkxfZGVsT2Zmc2V0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYXRjaE9mZnNldCgpKExfc3RyKShMX2RlbCkpfX0pKCk7XG5cbkxfbnVtT2Zmc2V0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYXRjaE9mZnNldCgpKExfc3RyKShMX251bSkpfX0pKCk7XG5cbkxfZGVsID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJNYXRjaCgpKExfc3RyKShMX3BhdCkpfX0pKCk7XG5cbkxfbnVtID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJNYXRjaCgpKExfc3RyKShMX251bWJlclBhdCkpfX0pKCk7XG5yZXR1cm4gTF9jb25zKCkoTF9maXJzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9iYXNpY1NwbGl0VG9rZW5zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdWJzdHJpbmcoKShMX3N0cikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJMZW4oKShMX2ZpcnN0KSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKShMX3BhdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZWxlY3QoKShMX3RydWUpKExfZmFsc2UpKExfZmFsc2UpKX19KSgpKSl9fSkoKSl9KX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5zXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbnMgc3RyIHBhdCA9IG1ha2VUb2tlbnMgKHNwbGl0VG9rZW5zIHN0ciBwYXQpIDBcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBMX21ha2VUb2tlbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NwbGl0VG9rZW5zKCkoTF9zdHIpKExfcGF0KSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImlzU3RyaW5nXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc1N0cmluZyBzID0gPT0gKGdldFR5cGUgcykgJypzdHJpbmcnXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Mpe3JldHVybiBMXyRwJHAoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFR5cGUoKShMX3MpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiBcIipzdHJpbmdcIn0pfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNOdW1iZXJcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImlzTnVtYmVyIHMgPSA9PSAoZ2V0VHlwZSBzKSAnKm51bWJlcidcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcyl7cmV0dXJuIExfJHAkcCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VHlwZSgpKExfcykpfX0pKCkpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiKm51bWJlclwifSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc1Rva2VuU3RyaW5nXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc1Rva2VuU3RyaW5nIHRvayBzdHIgPSBvclxcbiAgYW5kIChpc1Rva2VuIHRvaykgKGVxICh0b2tlblN0cmluZyB0b2spIHN0cilcXG4gIGFuZCAoaXNTdHJpbmcgdG9rKSAoZXEgdG9rIHN0cilcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzVG9rZW4oKShMX3RvaykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuU3RyaW5nKCkoTF90b2spKX19KSgpKShMX3N0cikpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FuZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNTdHJpbmcoKShMX3RvaykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKShMX3RvaykoTF9zdHIpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNUb2tlblN0YXJ0XCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc1Rva2VuU3RhcnQgdG9rIHN0ciA9IG9yXFxuICBhbmQgKGlzVG9rZW4gdG9rKSAoc3RyU3RhcnRzV2l0aCAodG9rZW5TdHJpbmcgdG9rKSBzdHIpXFxuICBhbmQgKGlzU3RyaW5nIHRvaykgKHN0clN0YXJ0c1dpdGggdG9rIHN0cilcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzVG9rZW4oKShMX3RvaykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyU3RhcnRzV2l0aCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX3RvaykpfX0pKCkpKExfc3RyKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1N0cmluZygpKExfdG9rKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdGFydHNXaXRoKCkoTF90b2spKExfc3RyKSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInN0clRva2VuU3RyaW5nXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJUb2tlblN0cmluZyB0b2sgPSB3aXRoVG9rZW4gdG9rIG5pbCBcXFxcc3RyIHBvcyAuIHN0clwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2spe3JldHVybiBMX3dpdGhUb2tlbigpKExfdG9rKShMX25pbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIExfc3RyKCl9fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ3aXRoVG9rZW5cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcIndpdGhUb2tlbiB0b2sgbm9uVG9rQ2FzZSB0b2tDYXNlID0gaXNUb2tlbiB0b2tcXG4gIHRvayB0b2tDYXNlXFxuICBpc1N0cmluZyB0b2tcXG4gICAgdG9rQ2FzZSB0b2sgLTFcXG4gICAgbm9uVG9rQ2FzZVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX25vblRva0Nhc2Upe3JldHVybiBmdW5jdGlvbihMX3Rva0Nhc2Upe3JldHVybiBMX2lzVG9rZW4oKShMX3RvaykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2soKShMX3Rva0Nhc2UpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzU3RyaW5nKCkoTF90b2spKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rQ2FzZSgpKExfdG9rKShmdW5jdGlvbigpe3JldHVybiAtMX0pKX19KSgpKShMX25vblRva0Nhc2UpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwid2l0aENvbnNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcIndpdGhDb25zIGwgbmlsQ2FzZSBjb250ID0gaXNDb25zIGwgKGwgKFxcXFxoIHQgRCAuIGNvbnQgaCB0KSBuaWxDYXNlKSBuaWxDYXNlXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2wpe3JldHVybiBmdW5jdGlvbihMX25pbENhc2Upe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiBMX2lzQ29ucygpKExfbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9jb250KCkoTF9oKShMX3QpfX19KX19KSgpKShMX25pbENhc2UpKX19KSgpKShMX25pbENhc2UpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpZk5vdEVyclwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaWZOb3RFcnIgdGhpbmcgY29udCA9IGhhc1R5cGUgdGhpbmcgcGFyc2VFcnIgdGhpbmcgKGNvbnQgdGhpbmcpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3RoaW5nKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF9oYXNUeXBlKCkoTF90aGluZykoTF9wYXJzZUVycikoTF90aGluZykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250KCkoTF90aGluZykpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlVG9rc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VUb2tzIHRva3MgZ3JvdXBzID1cXG4gIGlzTmlsIHRva3MgbmlsXFxuICAgIGlmTm90RXJyIChwYXJzZVRvayB0b2tzIGdyb3VwcykgXFxcXGxpc3QgLiBsaXN0IFxcXFxoIHQgLlxcbiAgICAgIGlmTm90RXJyIChwYXJzZVRva3MgdCBncm91cHMpIFxcXFxyZXMgLlxcbiAgICAgICAgY29ucyBoXFxuICAgICAgICAgIGFuZCAoaXNDb25zIHJlcykgKGlzQmxvY2tTdGFydCAoaGVhZCByZXMpKVxcbiAgICAgICAgICAgIGNvbnMgcmVzIG5pbFxcbiAgICAgICAgICAgIHJlc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBMX2lzTmlsKCkoTF90b2tzKShMX25pbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pZk5vdEVycigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VUb2soKShMX3Rva3MpKExfZ3JvdXBzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9saXN0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF9pZk5vdEVycigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VUb2tzKCkoTF90KShMX2dyb3VwcykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcmVzKXtyZXR1cm4gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FuZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNDb25zKCkoTF9yZXMpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQmxvY2tTdGFydCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfcmVzKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfcmVzKShMX25pbCkpfX0pKCkpKExfcmVzKSl9fSkoKSl9KX19KSgpKX19KX19KSgpKX0pfX0pKCkpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZVRva1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VUb2sgdG9rcyBncm91cHMgPSB3aXRoQ29ucyB0b2tzIG5pbCBcXFxcaCB0IC5cXG4gIHdpdGhUb2tlbiBoIHRva3MgXFxcXHR4dCBwb3MgLlxcbiAgICBhc3NvYyB0eHQgZ3JvdXBzXFxuICAgICAgXFxcXGNsb3NlIC4gcGFyc2VHcm91cCBoIHQgbmlsIGNsb3NlIGdyb3Vwc1xcbiAgICAgIGlzVG9rZW5TdGFydCBoICdcXFxcbicgKHBhcnNlSW5kZW50IGggdCBuaWwgZ3JvdXBzKVxcbiAgICAgICAgdG9rc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBMX3dpdGhDb25zKCkoTF90b2tzKShMX25pbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF93aXRoVG9rZW4oKShMX2gpKExfdG9rcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90eHQpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIExfYXNzb2MoKShMX3R4dCkoTF9ncm91cHMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY2xvc2Upe3JldHVybiBMX3BhcnNlR3JvdXAoKShMX2gpKExfdCkoTF9uaWwpKExfY2xvc2UpKExfZ3JvdXBzKX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNUb2tlblN0YXJ0KCkoTF9oKShmdW5jdGlvbigpe3JldHVybiBcIlxcblwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUluZGVudCgpKExfaCkoTF90KShMX25pbCkoTF9ncm91cHMpKX19KSgpKShMX3Rva3MpKX19KSgpKX19KX19KSgpKX19KX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUdyb3VwXCJ9KShmdW5jdGlvbigpe3JldHVybiA1fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUdyb3VwIGxlZnQgdG9rcyBnciBjbG9zZSBncm91cHMgPSB3aXRoQ29ucyB0b2tzIChwYXJzZUVyciAnVW50ZXJtaW5hdGVkIGdyb3VwIHN0YXJ0aW5nICcgKGxvYyBsZWZ0KSlcXG4gIFxcXFxoIHQgLiBpc1Rva2VuU3RyaW5nIGggY2xvc2VcXG4gICAgZXEgY2xvc2UgJyknXFxuICAgICAgY29ucyAocGFyZW5zRnJvbVRva3MgbGVmdCBoIChyZXZlcnNlIGdyKSkgdFxcbiAgICAgIGNvbnMgKGNvbnMgbGVmdCAoY29ucyAocmV2ZXJzZSBncikgKGNvbnMgaCBuaWwpKSkgdFxcbiAgICB3aXRoVG9rZW4gaFxcbiAgICAgIGlmTm90RXJyIChwYXJzZVRvayB0b2tzIGdyb3VwcykgXFxcXGxpc3QgLiBsaXN0IFxcXFxyZXN0SCByZXN0VCAuXFxuICAgICAgICBwYXJzZUdyb3VwIGxlZnQgcmVzdFQgKGNvbnMgcmVzdEggZ3IpIGNsb3NlIGdyb3Vwc1xcbiAgICAgIFxcXFx0eHQgcG9zIC5cXG4gICAgICAgIHJhc3NvYyB0eHQgZ3JvdXBzXFxuICAgICAgICAgIFxcXFxvcGVuIC4gcGFyc2VFcnIgKHN0ckNhdCAoY29ucyAnTWlzbWF0Y2hlZCBncm91cDogJyAoY29ucyAodG9rZW5TdHJpbmcgbGVmdCkgKGNvbnMgdHh0IChjb25zICcgJyBuaWwpKSkpKSAobG9jIGxlZnQpXFxuICAgICAgICAgIGlmTm90RXJyIChwYXJzZVRvayB0b2tzIGdyb3VwcykgXFxcXGxpc3QgLiBsaXN0IFxcXFxyZXN0SCByZXN0VCAuIHBhcnNlR3JvdXAgbGVmdCByZXN0VCAoY29ucyByZXN0SCBncikgY2xvc2UgZ3JvdXBzXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xlZnQpe3JldHVybiBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX2dyKXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZSl7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gTF93aXRoQ29ucygpKExfdG9rcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUVycigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiVW50ZXJtaW5hdGVkIGdyb3VwIHN0YXJ0aW5nIFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX2xlZnQpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF9pc1Rva2VuU3RyaW5nKCkoTF9oKShMX2Nsb3NlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2VxKCkoTF9jbG9zZSkoZnVuY3Rpb24oKXtyZXR1cm4gXCIpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcmVuc0Zyb21Ub2tzKCkoTF9sZWZ0KShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmV2ZXJzZSgpKExfZ3IpKX19KSgpKSl9fSkoKSkoTF90KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9sZWZ0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JldmVyc2UoKShMX2dyKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkoTF90KSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfd2l0aFRva2VuKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lmTm90RXJyKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZVRvaygpKExfdG9rcykoTF9ncm91cHMpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3RIKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0VCl7cmV0dXJuIExfcGFyc2VHcm91cCgpKExfbGVmdCkoTF9yZXN0VCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9yZXN0SCkoTF9ncikpfX0pKCkpKExfY2xvc2UpKExfZ3JvdXBzKX19KX19KSgpKX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3R4dCl7cmV0dXJuIGZ1bmN0aW9uKExfcG9zKXtyZXR1cm4gTF9yYXNzb2MoKShMX3R4dCkoTF9ncm91cHMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb3Blbil7cmV0dXJuIExfcGFyc2VFcnIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiTWlzbWF0Y2hlZCBncm91cDogXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuU3RyaW5nKCkoTF9sZWZ0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF90eHQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiIFwifSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX2xlZnQpKX19KSgpKX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaWZOb3RFcnIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlVG9rKCkoTF90b2tzKShMX2dyb3VwcykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcmVzdEgpe3JldHVybiBmdW5jdGlvbihMX3Jlc3RUKXtyZXR1cm4gTF9wYXJzZUdyb3VwKCkoTF9sZWZ0KShMX3Jlc3RUKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX3Jlc3RIKShMX2dyKSl9fSkoKSkoTF9jbG9zZSkoTF9ncm91cHMpfX0pfX0pKCkpfSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpKX19KSgpKX19KX19KSgpKX19fX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUluZGVudFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gNH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VJbmRlbnQgaW5kZW50IHRva3MgZ3IgZ3JvdXBzID1cXG4gIHdpdGhDb25zIHRva3MgKGNvbnMgKG1ha2VQYXJlbnMgKHRva2VuUG9zIGluZGVudCkgKGxleEVuZCAoaGVhZCBncikpIChyZXZlcnNlIGdyKSkgbmlsKVxcbiAgICBcXFxcaCB0IC4gb3IgKHdpdGhUb2tlbiBoIGZhbHNlIChcXFxcdHh0IHBvcyAuIHJhc3NvYyB0eHQgZ3JvdXBzIChcXFxcb3BlbiAuIHRydWUpIGZhbHNlKSlcXG4gICAgICBhbmQgKGlzVG9rZW5TdGFydCBoICdcXFxcbicpICg8PSAoc3RyTGVuICh0b2tlblN0cmluZyBoKSkgKHN0ckxlbiAodG9rZW5TdHJpbmcgaW5kZW50KSkpXFxuICAgICAgY29ucyAobWFrZVBhcmVucyAodG9rZW5Qb3MgaW5kZW50KSAodG9rZW5Qb3MgaCkgKHJldmVyc2UgZ3IpKSB0b2tzXFxuICAgICAgaWZOb3RFcnIgKHBhcnNlVG9rIHRva3MgZ3JvdXBzKSBcXFxcbGlzdCAuIGxpc3QgXFxcXHJlc3RIIHJlc3RUIC4gcGFyc2VJbmRlbnQgaW5kZW50IHJlc3RUIChjb25zIHJlc3RIIGdyKSBncm91cHNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaW5kZW50KXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9ncil7cmV0dXJuIGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gTF93aXRoQ29ucygpKExfdG9rcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWtlUGFyZW5zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblBvcygpKExfaW5kZW50KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sZXhFbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX2dyKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmV2ZXJzZSgpKExfZ3IpKX19KSgpKSl9fSkoKSkoTF9uaWwpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF93aXRoVG9rZW4oKShMX2gpKExfZmFsc2UpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdHh0KXtyZXR1cm4gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiBMX3Jhc3NvYygpKExfdHh0KShMX2dyb3VwcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vcGVuKXtyZXR1cm4gTF90cnVlKCl9KX19KSgpKShMX2ZhbHNlKX19KX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzVG9rZW5TdGFydCgpKExfaCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXG5cIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyR5JHAoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckxlbigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX2gpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJMZW4oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuU3RyaW5nKCkoTF9pbmRlbnQpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX21ha2VQYXJlbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuUG9zKCkoTF9pbmRlbnQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuUG9zKCkoTF9oKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZXZlcnNlKCkoTF9ncikpfX0pKCkpKX19KSgpKShMX3Rva3MpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lmTm90RXJyKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZVRvaygpKExfdG9rcykoTF9ncm91cHMpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3RIKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0VCl7cmV0dXJuIExfcGFyc2VJbmRlbnQoKShMX2luZGVudCkoTF9yZXN0VCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9yZXN0SCkoTF9ncikpfX0pKCkpKExfZ3JvdXBzKX19KX19KSgpKX0pfX0pKCkpKX19KSgpKX19KX19KSgpKX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImxpdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGl0IHZhbHVlID0gXFxcXGYgLiBmIHZhbHVlXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBzZXREYXRhVHlwZShmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gc2V0VHlwZShmdW5jdGlvbihMX2Ype3JldHVybiBMX2YoKShMX3ZhbHVlKX0sICdsaXQnKX0sICdsaXQnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVmXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyZWYgbmFtZSA9IFxcXFxmIC4gZiBuYW1lXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBzZXREYXRhVHlwZShmdW5jdGlvbihMX25hbWUpe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfZil7cmV0dXJuIExfZigpKExfbmFtZSl9LCAncmVmJyl9LCAncmVmJykpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImxhbWJkYVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGFtYmRhIG5hbWUgYm9keSA9IFxcXFxmIC4gZiBuYW1lIGJvZHlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF9uYW1lKShMX2JvZHkpfSwgJ2xhbWJkYScpfX0sICdsYW1iZGEnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYXBwbHlcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImFwcGx5IGZ1bmMgYXJnID0gXFxcXGYgLiBmIGZ1bmMgYXJnXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBzZXREYXRhVHlwZShmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF9mdW5jKShMX2FyZyl9LCAnYXBwbHknKX19LCAnYXBwbHknKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGV0XCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsZXQgbmFtZSB2YWx1ZSBib2R5ID0gXFxcXGYgLiBmIG5hbWUgdmFsdWUgYm9keVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gc2V0RGF0YVR5cGUoZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF9uYW1lKShMX3ZhbHVlKShMX2JvZHkpfSwgJ2xldCcpfX19LCAnbGV0JykpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImFubm9cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcImFubm8gbmFtZSBkYXRhIGJvZHkgPSBcXFxcZiAuIGYgbmFtZSBkYXRhIGJvZHlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfZGF0YSl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF9uYW1lKShMX2RhdGEpKExfYm9keSl9LCAnYW5ubycpfX19LCAnYW5ubycpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ3aXRoUGFyZW5zXCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ3aXRoUGFyZW5zIHAgZXJyIGNvbnQgPSBpc1BhcmVucyBwIChwIGNvbnQpIGVyclwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wKXtyZXR1cm4gZnVuY3Rpb24oTF9lcnIpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiBMX2lzUGFyZW5zKCkoTF9wKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3AoKShMX2NvbnQpKX19KSgpKShMX2Vycil9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInNldFBhcmVuc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2V0UGFyZW5zIHAgZnVuYyA9IGlzUGFyZW5zIHBcXG4gIHAgXFxcXHN0YXJ0IGVuZCBjb250ZW50IC4gcGFyZW5zIHN0YXJ0IGVuZCAoZnVuYyBjb250ZW50KVxcbiAgZnVuYyBwXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Ape3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBMX2lzUGFyZW5zKCkoTF9wKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3AoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiBMX3BhcmVucygpKExfc3RhcnQpKExfZW5kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Z1bmMoKShMX2NvbnRlbnQpKX19KSgpKX19fSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZnVuYygpKExfcCkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIndpdGhTdHJpcHBlZFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwid2l0aFN0cmlwcGVkIGxpc3QgY29udCA9IHdpdGhQYXJlbnMgbGlzdCAoY29udCBsaXN0KSBcXFxcc3RhcnQgZW5kIGNvbnRlbnQgLiB3aXRoU3RyaXBwZWQgY29udGVudCBjb250XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiBMX3dpdGhQYXJlbnMoKShMX2xpc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udCgpKExfbGlzdCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIExfd2l0aFN0cmlwcGVkKCkoTF9jb250ZW50KShMX2NvbnQpfX19KX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwb3NpdGlvblwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicG9zaXRpb24gdGhpbmcgPSBpc1Rva2VuIHRoaW5nICh0b2tlblBvcyB0aGluZylcXG4gIGlzUGFyZW5zIHRoaW5nIChwYXJlbnNTdGFydCB0aGluZylcXG4gICAgaXNDb25zIHRoaW5nIChwb3NpdGlvbiAoaGVhZCB0aGluZykpXFxuICAgICAgLTFcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdGhpbmcpe3JldHVybiBMX2lzVG9rZW4oKShMX3RoaW5nKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuUG9zKCkoTF90aGluZykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNQYXJlbnMoKShMX3RoaW5nKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcmVuc1N0YXJ0KCkoTF90aGluZykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNDb25zKCkoTF90aGluZykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wb3NpdGlvbigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfdGhpbmcpKX19KSgpKSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gLTF9KSl9fSkoKSkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGV4RW5kXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsZXhFbmQgdGhpbmcgPSBpc1Rva2VuIHRoaW5nICgrICh0b2tlblBvcyB0aGluZykgKHN0ckxlbiAodG9rZW5TdHJpbmcgdGhpbmcpKSlcXG4gIGlzUGFyZW5zIHRoaW5nIChwYXJlbnNFbmQgdGhpbmcpXFxuICAgIGlzQ29ucyB0aGluZyAobGV4RW5kIChsYXN0IHRoaW5nKSlcXG4gICAgICAtMVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90aGluZyl7cmV0dXJuIExfaXNUb2tlbigpKExfdGhpbmcpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJG8oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuUG9zKCkoTF90aGluZykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTGVuKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfdGhpbmcpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNQYXJlbnMoKShMX3RoaW5nKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcmVuc0VuZCgpKExfdGhpbmcpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQ29ucygpKExfdGhpbmcpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGV4RW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sYXN0KCkoTF90aGluZykpfX0pKCkpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiAtMX0pKX19KSgpKSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsb2NcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImxvYyB0aGluZyA9IFxcXFxcXFxcXFxuICBwID0gcG9zaXRpb24gdGhpbmdcXG4gIGwgPSBlcSBwIC0xICdhbiB1bmtub3duIGxvY2F0aW9uJyBwXFxuICAuXFxuICBzdHJDYXQgKGNvbnMgJ2F0ICcgKGNvbnMgbCBuaWwpKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90aGluZyl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9sLCBMX3A7XG5cbkxfbCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKShMX3ApKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhbiB1bmtub3duIGxvY2F0aW9uXCJ9KShMX3ApKX19KSgpO1xuXG5MX3AgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Bvc2l0aW9uKCkoTF90aGluZykpfX0pKCk7XG5yZXR1cm4gTF9zdHJDYXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImF0IFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9sKShMX25pbCkpfX0pKCkpKX19KSgpKX0pKCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzY3J1YlwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2NydWIgc3RyID0gc3RyRnJvbUxpc3QgKHNjcnViTGlzdCAoc3RyVG9MaXN0IHN0cikpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0cil7cmV0dXJuIExfc3RyRnJvbUxpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NjcnViTGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyVG9MaXN0KCkoTF9zdHIpKX19KSgpKSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzY3J1Ykxpc3RcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInNjcnViTGlzdCBsaXN0ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gXFxcXFxcXFxcXG4gICAgbmV4dCA9IHNjcnViTGlzdCB0XFxuICAgIC5cXG4gICAgZXEgaCAnXFxcXFxcXFwnIChjb25zIGggKGNvbnMgKGhlYWQgdCkgKHNjcnViTGlzdCAodGFpbCB0KSkpKVxcbiAgICAgIGVxIGggJ1xcXFxcXFwiJyAoY29ucyAnXFxcXFxcXFwnIChjb25zICdcXFxcXFxcIicgbmV4dCkpXFxuICAgICAgICBjb25zIGggbmV4dFxcbiAgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbmV4dDtcblxuTF9uZXh0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zY3J1Ykxpc3QoKShMX3QpKX19KSgpO1xucmV0dXJuIExfZXEoKShMX2gpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3QpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NjcnViTGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfdCkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKShMX2gpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcIlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIlxcXCJcIn0pKExfbmV4dCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKExfbmV4dCkpfX0pKCkpKX19KSgpKX0pKCl9fX0pfX0pKCkpKExfbmlsKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImNyZWF0ZUFzdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY3JlYXRlQXN0IGluTGlzdCBuYW1lcyBjb250ID0gd2l0aFN0cmlwcGVkIGluTGlzdCBcXFxcbGlzdCAuXFxuICBpc1Rva2VuIGxpc3QgKGNyZWF0ZUxpdE9yUmVmICh0b2tlblN0cmluZyBsaXN0KSBuYW1lcyBjb250KVxcbiAgICBsaXN0XFxuICAgICAgXFxcXGggdCBEIC5cXG4gICAgICAgIGlzVG9rZW5TdHJpbmcgaCAnXFxcXFxcXFxcXFxcXFxcXCcgKGNyZWF0ZUxldCBoIHQgbmFtZXMgY29udClcXG4gICAgICAgICAgaXNUb2tlblN0cmluZyBoICdcXFxcXFxcXEAnIChjcmVhdGVBbm5vIGggdCBuYW1lcyBjb250KVxcbiAgICAgICAgICAgIGlzVG9rZW5TdHJpbmcgaCAnXFxcXFxcXFwnIChjcmVhdGVMYW1iZGEgaCB0IG5hbWVzIGNvbnQpXFxuICAgICAgICAgICAgICBjcmVhdGVBcHBseSBsaXN0IG5hbWVzIGNvbnRcXG4gICAgICBjb250IG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9pbkxpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF93aXRoU3RyaXBwZWQoKShMX2luTGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9pc1Rva2VuKCkoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NyZWF0ZUxpdE9yUmVmKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfbGlzdCkpfX0pKCkpKExfbmFtZXMpKExfY29udCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfaXNUb2tlblN0cmluZygpKExfaCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcXFxcXFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jcmVhdGVMZXQoKShMX2gpKExfdCkoTF9uYW1lcykoTF9jb250KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuU3RyaW5nKCkoTF9oKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxAXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NyZWF0ZUFubm8oKShMX2gpKExfdCkoTF9uYW1lcykoTF9jb250KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuU3RyaW5nKCkoTF9oKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY3JlYXRlTGFtYmRhKCkoTF9oKShMX3QpKExfbmFtZXMpKExfY29udCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY3JlYXRlQXBwbHkoKShMX2xpc3QpKExfbmFtZXMpKExfY29udCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9fX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udCgpKExfbmlsKSl9fSkoKSkpfX0pKCkpfSl9fSkoKSl9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInN0ck1hdGNoZXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInN0ck1hdGNoZXMgc3RyIHBhdCA9IGlzQ29ucyAoc3RyTWF0Y2ggc3RyIHBhdClcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBMX2lzQ29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTWF0Y2goKShMX3N0cikoTF9wYXQpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkaWdpdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGlnaXQgPSByZWdleHAgJ15bMC05XSskJ1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZWdleHAoKShmdW5jdGlvbigpe3JldHVybiBcIl5bMC05XSskXCJ9KSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmFja3NsYXNoQ29kZXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcImJhY2tzbGFzaENvZGVzID0gJ2JmbnJ0J1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJiZm5ydFwifSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmFja3NsYXNoVmFsdWVzXCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJiYWNrc2xhc2hWYWx1ZXMgPSAnXFxcXGJcXFxcZlxcXFxuXFxcXHJcXFxcdCdcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxiXFxmXFxuXFxyXFx0XCJ9KX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb252ZXJ0U3RyaW5nRXNjYXBlXCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb252ZXJ0U3RyaW5nRXNjYXBlIGNoYXIgY29kZXMgdmFsdWVzID1cXG4gIGVxIGNvZGVzICcnXFxuICAgIGNoYXJcXG4gICAgZXEgY2hhciAoc3RyQXQgY29kZXMgMClcXG4gICAgICBzdHJBdCB2YWx1ZXMgMFxcbiAgICAgIGNvbnZlcnRTdHJpbmdFc2NhcGUgY2hhciAoc3RyU3Vic3RyaW5nIGNvZGVzIDEgMCkgKHN0clN1YnN0cmluZyB2YWx1ZXMgMSAwKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jaGFyKXtyZXR1cm4gZnVuY3Rpb24oTF9jb2Rlcyl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWVzKXtyZXR1cm4gTF9lcSgpKExfY29kZXMpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXCJ9KShMX2NoYXIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKShMX2NoYXIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyQXQoKShMX2NvZGVzKShmdW5jdGlvbigpe3JldHVybiAwfSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyQXQoKShMX3ZhbHVlcykoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnZlcnRTdHJpbmdFc2NhcGUoKShMX2NoYXIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyU3Vic3RyaW5nKCkoTF9jb2RlcykoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdWJzdHJpbmcoKShMX3ZhbHVlcykoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KSl9fSkoKSkpfX0pKCkpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY29udmVydFN0cmluZ0VzY2FwZXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcImNvbnZlcnRTdHJpbmdFc2NhcGVzIG9yaWcgc3RyIGNvbnQgPVxcbiAgZXEgc3RyICcnXFxuICAgIGNvbnQgc3RyXFxuICAgIGVxIChzdHJBdCBzdHIgMCkgJ1xcXFxcXFxcJ1xcbiAgICAgIGVxIChzdHJMZW4gc3RyKSAxIChwYXJzZUVyciBcXFwiRXJyb3IsIGJhY2tzbGFzaCB3aXRob3V0IGNoYXJhY3RlciBpbiBzdHJpbmc6IFxcXCIgb3JpZylcXG4gICAgICAgIGNvbnZlcnRTdHJpbmdFc2NhcGVzIG9yaWcgKHN0clN1YnN0cmluZyBzdHIgMiAwKSBcXFxccmVzdCAuIGNvbnRcXG4gICAgICAgICAgc3RyQWRkXFxuICAgICAgICAgICAgY29udmVydFN0cmluZ0VzY2FwZSAoc3RyQXQgc3RyIDEpIGJhY2tzbGFzaENvZGVzIGJhY2tzbGFzaFZhbHVlc1xcbiAgICAgICAgICAgIHJlc3RcXG4gICAgICBjb252ZXJ0U3RyaW5nRXNjYXBlcyBvcmlnIChzdHJTdWJzdHJpbmcgc3RyIDEgMCkgXFxcXHJlc3QgLiBjb250XFxuICAgICAgICBzdHJBZGRcXG4gICAgICAgICAgc3RyQXQgc3RyIDBcXG4gICAgICAgICAgcmVzdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vcmlnKXtyZXR1cm4gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiBMX2VxKCkoTF9zdHIpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnQoKShMX3N0cikpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckF0KCkoTF9zdHIpKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2VxKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJMZW4oKShMX3N0cikpfX0pKCkpKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJFcnJvciwgYmFja3NsYXNoIHdpdGhvdXQgY2hhcmFjdGVyIGluIHN0cmluZzogXCJ9KShMX29yaWcpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnZlcnRTdHJpbmdFc2NhcGVzKCkoTF9vcmlnKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0clN1YnN0cmluZygpKExfc3RyKShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckFkZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udmVydFN0cmluZ0VzY2FwZSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyQXQoKShMX3N0cikoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKX19KSgpKShMX2JhY2tzbGFzaENvZGVzKShMX2JhY2tzbGFzaFZhbHVlcykpfX0pKCkpKExfcmVzdCkpfX0pKCkpfSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnZlcnRTdHJpbmdFc2NhcGVzKCkoTF9vcmlnKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0clN1YnN0cmluZygpKExfc3RyKShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckFkZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyQXQoKShMX3N0cikoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKShMX3Jlc3QpKX19KSgpKX0pfX0pKCkpKX19KSgpKSl9fSkoKSl9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlU3RyaW5nXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZVN0cmluZyBzdHIgY29udCA9XFxuICBuZXEgKHN0ckF0IHN0ciAwKSAoc3RyQXQgc3RyIC0xKSAocGFyc2VFcnIgXFxcIkJhZGx5IHRlcm1pbmF0ZWQgc3RyaW5nOiBcXFwiIHN0cilcXG4gICAgY29udmVydFN0cmluZ0VzY2FwZXMgc3RyIChzdHJTdWJzdHJpbmcgc3RyIDEgLTEpIGNvbnRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF9uZXEoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckF0KCkoTF9zdHIpKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJBdCgpKExfc3RyKShmdW5jdGlvbigpe3JldHVybiAtMX0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJCYWRseSB0ZXJtaW5hdGVkIHN0cmluZzogXCJ9KShMX3N0cikpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udmVydFN0cmluZ0VzY2FwZXMoKShMX3N0cikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdWJzdHJpbmcoKShMX3N0cikoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkpfX0pKCkpKExfY29udCkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImNyZWF0ZUxpdE9yUmVmXCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjcmVhdGVMaXRPclJlZiB0b2sgbmFtZXMgY29udCA9XFxuICBjb250YWlucyBuYW1lcyB0b2tcXG4gICAgY29udCAocmVmIHRvaylcXG4gICAgb3IgKHN0clN0YXJ0c1dpdGggdG9rICdcXFxcXFxcIicpIChzdHJTdGFydHNXaXRoIHRvayBcXFwiJ1xcXCIpXFxuICAgICAgcGFyc2VTdHJpbmcgdG9rIFxcXFxzdHIgLiBjb250IChsaXQgc3RyKVxcbiAgICAgIHN0clN0YXJ0c1dpdGggdG9rICcuJ1xcbiAgICAgICAganNvblBhcnNlIChzdHJDYXQgKGNvbnMgJzAnIChjb25zIHRvayBuaWwpKSkgKFxcXFxlcnIgLiBjb250IChyZWYgdG9rKSkgKFxcXFxpdGVtIC4gY29udCAobGl0IGl0ZW0pKVxcbiAgICAgICAgb3IgKGFuZCAoPj0gKHN0ckF0IHRvayAwKSAnMCcpICg8PSAoc3RyQXQgdG9rIDApICc5JykpIChzdHJTdGFydHNXaXRoIHRvayAnLScpXFxuICAgICAgICAgIGpzb25QYXJzZSB0b2sgKFxcXFxlcnIgLiBjb250IChyZWYgdG9rKSkgKFxcXFxpdGVtIC4gY29udCAobGl0IGl0ZW0pKVxcbiAgICAgICAgICBjb250IChyZWYgdG9rKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF9jb250YWlucygpKExfbmFtZXMpKExfdG9rKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlZigpKExfdG9rKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfb3IoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0clN0YXJ0c1dpdGgoKShMX3RvaykoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFwiXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdGFydHNXaXRoKCkoTF90b2spKGZ1bmN0aW9uKCl7cmV0dXJuIFwiJ1wifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VTdHJpbmcoKShMX3RvaykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xpdCgpKExfc3RyKSl9fSkoKSl9KX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdGFydHNXaXRoKCkoTF90b2spKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9qc29uUGFyc2UoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiMFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF90b2spKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Vycil7cmV0dXJuIExfY29udCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmVmKCkoTF90b2spKX19KSgpKX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIExfY29udCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGl0KCkoTF9pdGVtKSl9fSkoKSl9KX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9vcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8keiRwKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJBdCgpKExfdG9rKShmdW5jdGlvbigpe3JldHVybiAwfSkpfX0pKCkpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiMFwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJHkkcCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyQXQoKShMX3RvaykoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKShmdW5jdGlvbigpe3JldHVybiBcIjlcIn0pKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdGFydHNXaXRoKCkoTF90b2spKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLVwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfanNvblBhcnNlKCkoTF90b2spKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZXJyKXtyZXR1cm4gTF9jb250KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZWYoKShMX3RvaykpfX0pKCkpfSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9pdGVtKXtyZXR1cm4gTF9jb250KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9saXQoKShMX2l0ZW0pKX19KSgpKX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlZigpKExfdG9rKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjcmVhdGVMYW1iZGFcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDR9KShmdW5jdGlvbigpe3JldHVybiBcImNyZWF0ZUxhbWJkYSBzdGFydCBsaXN0IG5hbWVzIGNvbnQgPSBcXFxcXFxcXFxcbiAgZXJyID0gcGFyc2VFcnIgXFxcIkxhbWJkYSBuZWVkcyBhIHZhcmlhYmxlIG5hbWUsIGEgZG90LCBhbmQgYSBib2R5IFxcXCIgKGxvYyBzdGFydClcXG4gIC5cXG4gIHdpdGhDb25zIGxpc3QgZXJyIFxcXFxuYW1lIHJlc3QgLlxcbiAgICB3aXRoVG9rZW4gbmFtZSBlcnIgXFxcXG4gcCAuXFxuICAgICAgd2l0aENvbnMgcmVzdCBlcnIgXFxcXGRvdCBib2R5IC5cXG4gICAgICAgICMgYXJlIHRoZXNlIHBhcnRpYWwgYXBwbGljYXRpb25zIHRvbyBoYXJkIHRvIHJlYWQ/XFxuICAgICAgICBpc1Rva2VuU3RyaW5nIGRvdCAnLicgKGNyZWF0ZUFzdCBib2R5KSAoY3JlYXRlTGFtYmRhIHN0YXJ0IHJlc3QpXFxuICAgICAgICAgIGNvbnMgbiBuYW1lc1xcbiAgICAgICAgICBcXFxcYm9keUFzdCAuIGNvbnQgKGxhbWJkYSBuIGJvZHlBc3QpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9lcnI7XG5cbkxfZXJyID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUVycigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiTGFtYmRhIG5lZWRzIGEgdmFyaWFibGUgbmFtZSwgYSBkb3QsIGFuZCBhIGJvZHkgXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xvYygpKExfc3RhcnQpKX19KSgpKSl9fSkoKTtcbnJldHVybiBMX3dpdGhDb25zKCkoTF9saXN0KShMX2VycikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gTF93aXRoVG9rZW4oKShMX25hbWUpKExfZXJyKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX24pe3JldHVybiBmdW5jdGlvbihMX3Ape3JldHVybiBMX3dpdGhDb25zKCkoTF9yZXN0KShMX2VycikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9kb3Qpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiBMX2lzVG9rZW5TdHJpbmcoKShMX2RvdCkoZnVuY3Rpb24oKXtyZXR1cm4gXCIuXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NyZWF0ZUFzdCgpKExfYm9keSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY3JlYXRlTGFtYmRhKCkoTF9zdGFydCkoTF9yZXN0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9uKShMX25hbWVzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9ib2R5QXN0KXtyZXR1cm4gTF9jb250KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sYW1iZGEoKShMX24pKExfYm9keUFzdCkpfX0pKCkpfSl9fSkoKSl9fSl9fSkoKSl9fSl9fSkoKSl9fSl9fSkoKSl9KSgpfX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY3JlYXRlQW5ub1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gNH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY3JlYXRlQW5ubyBzdGFydCBsaXN0IG5hbWVzIGNvbnQgPVxcbiAgd2l0aENvbnMgbGlzdCAocGFyc2VFcnIgXFxcIk5vIGFubm90YXRpb24gbmFtZSBvciBkYXRhIGluIGFubm90YXRpb24gXFxcIiAobG9jIHN0YXJ0KSkgXFxcXG5hbWUgcmVzdCAuXFxuICAgIHdpdGhDb25zIHJlc3QgKHBhcnNlRXJyIFxcXCJObyBkYXRhIGZvciBhbm5vdGF0aW9uIFxcXCIgKGxvYyBzdGFydCkpIFxcXFxkYXRhIHJlc3QgLiBcXFxcXFxcXFxcbiAgICAgIGZpbmlzaCBkYXRhIGJvZHkgPSBjcmVhdGVBc3QgYm9keSBuYW1lcyBcXFxcYm9keUFzdCAuXFxuICAgICAgICBjbGVhblRva2VucyBzdGFydCBuYW1lIFxcXFxuYW1lIC5cXG4gICAgICAgICAgY2xlYW5Ub2tlbnMgc3RhcnQgZGF0YSBcXFxcZGF0YSAuXFxuICAgICAgICAgICAgY29udCAoYW5ubyBuYW1lIGRhdGEgYm9keUFzdClcXG4gICAgICAuXFxuICAgICAgaXNUb2tlblN0cmluZyBkYXRhICcuJ1xcbiAgICAgICAgZmluaXNoIG5pbCByZXN0XFxuICAgICAgICB3aXRoU3RyaXBwZWQgZGF0YSBcXFxcZGF0YSAuXFxuICAgICAgICAgIHdpdGhDb25zIHJlc3QgKHBhcnNlRXJyIFxcXCJObyBib2R5IGZvciBhbm5vdGF0aW9uIFxcXCIgKGxvYyBzdGFydCkpIFxcXFxkb3QgYm9keSAuXFxuICAgICAgICAgICAgaXNUb2tlblN0cmluZyBkb3QgJy4nXFxuICAgICAgICAgICAgICBmaW5pc2ggZGF0YSBib2R5XFxuICAgICAgICAgICAgICBwYXJzZUVyciBcXFwiQW5ub3RhdGlvbiBleHBlY3RzIGRvdCBhZnRlciBuYW1lIGFuZCBkYXRhIFxcXCIgKGxvYyBzdGFydClcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF93aXRoQ29ucygpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUVycigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiTm8gYW5ub3RhdGlvbiBuYW1lIG9yIGRhdGEgaW4gYW5ub3RhdGlvbiBcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbG9jKCkoTF9zdGFydCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBMX3dpdGhDb25zKCkoTF9yZXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJObyBkYXRhIGZvciBhbm5vdGF0aW9uIFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX3N0YXJ0KSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZGF0YSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdF8wKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX2ZpbmlzaDtcblxuTF9maW5pc2ggPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2RhdGFfMSl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIExfY3JlYXRlQXN0KCkoTF9ib2R5KShMX25hbWVzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2JvZHlBc3Qpe3JldHVybiBMX2NsZWFuVG9rZW5zKCkoTF9zdGFydCkoTF9uYW1lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX25hbWVfMil7cmV0dXJuIExfY2xlYW5Ub2tlbnMoKShMX3N0YXJ0KShMX2RhdGFfMSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9kYXRhXzMpe3JldHVybiBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Fubm8oKShMX25hbWVfMikoTF9kYXRhXzMpKExfYm9keUFzdCkpfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfX0pfX0pKCk7XG5yZXR1cm4gTF9pc1Rva2VuU3RyaW5nKCkoTF9kYXRhKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZmluaXNoKCkoTF9uaWwpKExfcmVzdF8wKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF93aXRoU3RyaXBwZWQoKShMX2RhdGEpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZGF0YV8xKXtyZXR1cm4gTF93aXRoQ29ucygpKExfcmVzdF8wKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJObyBib2R5IGZvciBhbm5vdGF0aW9uIFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX3N0YXJ0KSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZG90KXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gTF9pc1Rva2VuU3RyaW5nKCkoTF9kb3QpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9maW5pc2goKShMX2RhdGFfMSkoTF9ib2R5KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUVycigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiQW5ub3RhdGlvbiBleHBlY3RzIGRvdCBhZnRlciBuYW1lIGFuZCBkYXRhIFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX3N0YXJ0KSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfSl9fSkoKSkpfX0pKCkpfSkoKX19KX19KSgpKX19KX19KSgpKX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImJvZHlTdHJ1Y3RQYXRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcImJvZHlTdHJ1Y3RQYXQgPSByZWdleHAgJ1xcXFxcXFxcfFxcXFxcXFxcXFxcXFxcXFx8XFxcXFxcXFxAJ1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZWdleHAoKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFx8XFxcXFxcXFx8XFxcXEBcIn0pKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjcmVhdGVBcHBseVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY3JlYXRlQXBwbHkgaW5MaXN0IG5hbWVzIGNvbnQgPSB3aXRoU3RyaXBwZWQgaW5MaXN0IFxcXFxsaXN0IC5cXG4gIHdpdGhDb25zIGxpc3QgKHBhcnNlRXJyIFxcXCJGdW5jaW9uIGFwcGx5IGV4cGVjdGluZyBhIG5vbi1lbXB0eSBsaXN0IFxcXCIgKGxvYyBpbkxpc3QpKSBcXFxcaCB0IC5cXG4gICAgY3JlYXRlQXN0IGggbmFtZXMgXFxcXGZ1bmMgLiBjaGFpbkFwcGx5IGZ1bmMgdCBuYW1lcyBjb250XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2luTGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiBMX3dpdGhTdHJpcHBlZCgpKExfaW5MaXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX3dpdGhDb25zKCkoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJGdW5jaW9uIGFwcGx5IGV4cGVjdGluZyBhIG5vbi1lbXB0eSBsaXN0IFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX2luTGlzdCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBMX2NyZWF0ZUFzdCgpKExfaCkoTF9uYW1lcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gTF9jaGFpbkFwcGx5KCkoTF9mdW5jKShMX3QpKExfbmFtZXMpKExfY29udCl9KX19KSgpKX19KX19KSgpKX0pfX0pKCkpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJibG9ja1N0YXJ0c1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmxvY2tTdGFydHMgPSBjb25zICdcXFxcXFxcXCcgKGNvbnMgJ1xcXFxcXFxcXFxcXFxcXFwnIChjb25zICdcXFxcXFxcXEAnIG5pbCkpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXFxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXEBcIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjaGFpbkFwcGx5XCJ9KShmdW5jdGlvbigpe3JldHVybiA0fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjaGFpbkFwcGx5IGZ1bmMgbGlzdCBuYW1lcyBjb250ID0gd2l0aENvbnMgbGlzdCAoY29udCBmdW5jKSBcXFxcYXJnSXRlbSByZXN0IC5cXG4gIGFuZCAoaXNUb2tlbiBhcmdJdGVtKSAoY29udGFpbnMgYmxvY2tTdGFydHMgKHRva2VuU3RyaW5nIGFyZ0l0ZW0pKVxcbiAgICBjcmVhdGVBc3QgbGlzdCBuYW1lcyBcXFxcYXJnIC4gY29udCAoYXBwbHkgZnVuYyBhcmcpXFxuICAgIGNyZWF0ZUFzdCBhcmdJdGVtIG5hbWVzIFxcXFxhcmcgLiBjaGFpbkFwcGx5IChhcHBseSBmdW5jIGFyZykgcmVzdCBuYW1lcyBjb250XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF93aXRoQ29ucygpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250KCkoTF9mdW5jKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9hcmdJdGVtKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzVG9rZW4oKShMX2FyZ0l0ZW0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnRhaW5zKCkoTF9ibG9ja1N0YXJ0cykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfYXJnSXRlbSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NyZWF0ZUFzdCgpKExfbGlzdCkoTF9uYW1lcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9hcmcpe3JldHVybiBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FwcGx5KCkoTF9mdW5jKShMX2FyZykpfX0pKCkpfSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY3JlYXRlQXN0KCkoTF9hcmdJdGVtKShMX25hbWVzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIExfY2hhaW5BcHBseSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYXBwbHkoKShMX2Z1bmMpKExfYXJnKSl9fSkoKSkoTF9yZXN0KShMX25hbWVzKShMX2NvbnQpfSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY2xlYW5Ub2tlbnNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcImNsZWFuVG9rZW5zIHN0YXJ0IHRva3MgY29udCA9IGlzVG9rZW4gdG9rc1xcbiAgY29udCAodG9rZW5TdHJpbmcgdG9rcylcXG4gIHdpdGhDb25zIHRva3MgKGNvbnQgdG9rcykgXFxcXGhlYWQgdGFpbCAuXFxuICAgIGNsZWFuVG9rZW5zIHN0YXJ0IGhlYWQgXFxcXGhlYWQgLlxcbiAgICAgIGNsZWFuVG9rZW5zIHN0YXJ0IHRhaWwgXFxcXHRhaWwgLlxcbiAgICAgICAgY29udCAoY29ucyBoZWFkIHRhaWwpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF9pc1Rva2VuKCkoTF90b2tzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuU3RyaW5nKCkoTF90b2tzKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfd2l0aENvbnMoKShMX3Rva3MpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udCgpKExfdG9rcykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaGVhZCl7cmV0dXJuIGZ1bmN0aW9uKExfdGFpbCl7cmV0dXJuIExfY2xlYW5Ub2tlbnMoKShMX3N0YXJ0KShMX2hlYWQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaGVhZF8wKXtyZXR1cm4gTF9jbGVhblRva2VucygpKExfc3RhcnQpKExfdGFpbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90YWlsXzEpe3JldHVybiBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2hlYWRfMCkoTF90YWlsXzEpKX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9fSl9fSkoKSkpfX0pKCkpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjcmVhdGVMZXRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDR9KShmdW5jdGlvbigpe3JldHVybiBcImNyZWF0ZUxldCBzdGFydCBsaXN0IG5hbWVzIGNvbnQgPSB3aXRoQ29ucyBsaXN0XFxuICBwYXJzZUVyciBcXFwiTm8gdmFyaWFibGUgb3IgYm9keSBmb3IgbGV0IFxcXCIgKGxvYyBzdGFydClcXG4gIFxcXFxiaW5kaW5nIGJvZHkgLiBlcSBib2R5IG5pbCAoY3JlYXRlQXN0IGJpbmRpbmcgbmFtZSBjb250KVxcbiAgICBnZXRMZXROYW1lcyBzdGFydCBsaXN0IG5hbWVzIFxcXFxuZXdOYW1lcyAuXFxuICAgICAgY3JlYXRlU3VibGV0cyBzdGFydCBiaW5kaW5nIGJvZHkgbmV3TmFtZXMgY29udFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiBMX3dpdGhDb25zKCkoTF9saXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJObyB2YXJpYWJsZSBvciBib2R5IGZvciBsZXQgXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xvYygpKExfc3RhcnQpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9iaW5kaW5nKXtyZXR1cm4gZnVuY3Rpb24oTF9ib2R5KXtyZXR1cm4gTF9lcSgpKExfYm9keSkoTF9uaWwpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY3JlYXRlQXN0KCkoTF9iaW5kaW5nKShMX25hbWUpKExfY29udCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0TGV0TmFtZXMoKShMX3N0YXJ0KShMX2xpc3QpKExfbmFtZXMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbmV3TmFtZXMpe3JldHVybiBMX2NyZWF0ZVN1YmxldHMoKShMX3N0YXJ0KShMX2JpbmRpbmcpKExfYm9keSkoTF9uZXdOYW1lcykoTF9jb250KX0pfX0pKCkpKX19KSgpKX19KX19KSgpKX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImdldExldE5hbWVzXCJ9KShmdW5jdGlvbigpe3JldHVybiA0fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJnZXRMZXROYW1lcyBzdGFydCBsaXN0IG5hbWVzIGNvbnQgPSBcXFxcXFxcXFxcbiAgZXJyID0gcGFyc2VFcnIgXFxcIkxldCBleHBlY3RlZCBiaW5kaW5nIFxcXCIgKGxvYyBzdGFydClcXG4gIC5cXG4gIHdpdGhDb25zIGxpc3QgKGNvbnQgbmFtZXMpIFxcXFxiaW5kaW5nIGJvZHkgLlxcbiAgICBpc1Rva2VuU3RyaW5nIGJpbmRpbmcgJy4nIChjb250IG5hbWVzKVxcbiAgICAgIHdpdGhQYXJlbnMgYmluZGluZyBlcnIgXFxcXHN0YXJ0IGVuZCBkZWYgLlxcbiAgICAgICAgd2l0aENvbnMgZGVmIGVyciBcXFxcbmFtZSByZXN0IC5cXG4gICAgICAgICAgd2l0aFRva2VuIG5hbWUgZXJyIFxcXFxzdHIgcG9zIC5cXG4gICAgICAgICAgICBnZXRMZXROYW1lcyBzdGFydCBib2R5IChjb25zIHN0ciBuYW1lcykgY29udFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZXJyO1xuXG5MX2VyciA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VFcnIoKShmdW5jdGlvbigpe3JldHVybiBcIkxldCBleHBlY3RlZCBiaW5kaW5nIFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX3N0YXJ0KSl9fSkoKSkpfX0pKCk7XG5yZXR1cm4gTF93aXRoQ29ucygpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250KCkoTF9uYW1lcykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfYmluZGluZyl7cmV0dXJuIGZ1bmN0aW9uKExfYm9keSl7cmV0dXJuIExfaXNUb2tlblN0cmluZygpKExfYmluZGluZykoZnVuY3Rpb24oKXtyZXR1cm4gXCIuXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnQoKShMX25hbWVzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF93aXRoUGFyZW5zKCkoTF9iaW5kaW5nKShMX2VycikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdGFydF8wKXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIExfd2l0aENvbnMoKShMX2RlZikoTF9lcnIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIExfd2l0aFRva2VuKCkoTF9uYW1lKShMX2VycikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIExfZ2V0TGV0TmFtZXMoKShMX3N0YXJ0XzApKExfYm9keSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9zdHIpKExfbmFtZXMpKX19KSgpKShMX2NvbnQpfX0pfX0pKCkpfX0pfX0pKCkpfX19KX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9KSgpfX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY3JlYXRlU3VibGV0c1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gNX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY3JlYXRlU3VibGV0cyBzdGFydCBiaW5kaW5nIGJvZHkgbmFtZXMgY29udCA9XFxuICBpc1Rva2VuU3RyaW5nIGJpbmRpbmcgJy4nIChjcmVhdGVBc3QgYm9keSBuYW1lcyBjb250KVxcbiAgICB3aXRoQ29ucyBib2R5IChwYXJzZUVyciBcXFwiTGV0IGV4cGVjdGVkIGEgYm9keSBcXFwiIChsb2Mgc3RhcnQpKSBcXFxcYm9keUggYm9keVQgLlxcbiAgICAgIGdldE5hbWVBbmREZWYgKHBhcmVuc1N0YXJ0IGJpbmRpbmcpIChwYXJlbnNDb250ZW50IGJpbmRpbmcpIG5hbWVzIFxcXFxuYW1lIGRlZiAuXFxuICAgICAgICBjcmVhdGVTdWJsZXRzIHN0YXJ0IGJvZHlIIGJvZHlUIG5hbWVzIFxcXFxib2R5QXN0IC5cXG4gICAgICAgICAgY29udCAobGV0ICh0b2tlblN0cmluZyBuYW1lKSBkZWYgYm9keUFzdClcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2JpbmRpbmcpe3JldHVybiBmdW5jdGlvbihMX2JvZHkpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF9pc1Rva2VuU3RyaW5nKCkoTF9iaW5kaW5nKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY3JlYXRlQXN0KCkoTF9ib2R5KShMX25hbWVzKShMX2NvbnQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3dpdGhDb25zKCkoTF9ib2R5KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJMZXQgZXhwZWN0ZWQgYSBib2R5IFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2MoKShMX3N0YXJ0KSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfYm9keUgpe3JldHVybiBmdW5jdGlvbihMX2JvZHlUKXtyZXR1cm4gTF9nZXROYW1lQW5kRGVmKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJlbnNTdGFydCgpKExfYmluZGluZykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyZW5zQ29udGVudCgpKExfYmluZGluZykpfX0pKCkpKExfbmFtZXMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gTF9jcmVhdGVTdWJsZXRzKCkoTF9zdGFydCkoTF9ib2R5SCkoTF9ib2R5VCkoTF9uYW1lcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9ib2R5QXN0KXtyZXR1cm4gTF9jb250KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sZXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuU3RyaW5nKCkoTF9uYW1lKSl9fSkoKSkoTF9kZWYpKExfYm9keUFzdCkpfX0pKCkpfSl9fSkoKSl9fSl9fSkoKSl9fSl9fSkoKSkpfX0pKCkpfX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImdldE5hbWVBbmREZWZcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDR9KShmdW5jdGlvbigpe3JldHVybiBcImdldE5hbWVBbmREZWYgcG9zIGJpbmRpbmcgbmFtZXMgY29udCA9XFxuICB3aXRoQ29ucyAodGFpbCBiaW5kaW5nKSAocGFyc2VFcnIgXFxcIkxldCBleHBlY3RlZCBiaW5kaW5nIGF0IFxcXCIgcG9zKSBcXFxcc25kIHNuZFQgLlxcbiAgICBpc1Rva2VuU3RyaW5nIHNuZCAnPScgKGNyZWF0ZUFzdCBzbmRUIG5hbWVzIFxcXFxkZWYgLiBjb250IChoZWFkIGJpbmRpbmcpIGRlZilcXG4gICAgICBnZXRMZXRMYW1iZGEgcG9zICh0YWlsIGJpbmRpbmcpIG5pbCBuYW1lcyBcXFxcbGFtYiAuIGNvbnQgKGhlYWQgYmluZGluZykgbGFtYlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiBmdW5jdGlvbihMX2JpbmRpbmcpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF93aXRoQ29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfYmluZGluZykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VFcnIoKShmdW5jdGlvbigpe3JldHVybiBcIkxldCBleHBlY3RlZCBiaW5kaW5nIGF0IFwifSkoTF9wb3MpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3NuZCl7cmV0dXJuIGZ1bmN0aW9uKExfc25kVCl7cmV0dXJuIExfaXNUb2tlblN0cmluZygpKExfc25kKShmdW5jdGlvbigpe3JldHVybiBcIj1cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY3JlYXRlQXN0KCkoTF9zbmRUKShMX25hbWVzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2RlZil7cmV0dXJuIExfY29udCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfYmluZGluZykpfX0pKCkpKExfZGVmKX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldExldExhbWJkYSgpKExfcG9zKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RhaWwoKShMX2JpbmRpbmcpKX19KSgpKShMX25pbCkoTF9uYW1lcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sYW1iKXtyZXR1cm4gTF9jb250KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF9iaW5kaW5nKSl9fSkoKSkoTF9sYW1iKX0pfX0pKCkpKX19KSgpKX19KX19KSgpKX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImdldExldExhbWJkYVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gNX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZ2V0TGV0TGFtYmRhIHBvcyBkZWYgYXJncyBuYW1lcyBjb250ID1cXG4gIHdpdGhDb25zIGRlZiAocGFyc2VFcnIgXFxcIkxldCBleHBlY3RlZCBiaW5kaW5nIGF0IFxcXCIgcG9zKSBcXFxcYXJnIHJlc3QgLlxcbiAgICBub3QgKGlzVG9rZW4gYXJnKSAocGFyc2VFcnIgXFxcIkxldCBleHBlY3RlZCBiaW5kaW5nIGF0IFxcXCIgcG9zKVxcbiAgICAgIGlzVG9rZW5TdHJpbmcgYXJnICc9J1xcbiAgICAgICAgY3JlYXRlQXN0IChjb25zICh0b2tlbiAnXFxcXFxcXFwnIHBvcykgKGFwcGVuZCAocmV2ZXJzZSBhcmdzKSAoY29ucyAodG9rZW4gJy4nIChwb3NpdGlvbiBhcmcpKSByZXN0KSkpIG5hbWVzIGNvbnRcXG4gICAgICAgIGdldExldExhbWJkYSBwb3MgcmVzdCAoY29ucyBhcmcgYXJncykgbmFtZXMgY29udFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wb3Mpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIGZ1bmN0aW9uKExfYXJncyl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2NvbnQpe3JldHVybiBMX3dpdGhDb25zKCkoTF9kZWYpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VFcnIoKShmdW5jdGlvbigpe3JldHVybiBcIkxldCBleHBlY3RlZCBiaW5kaW5nIGF0IFwifSkoTF9wb3MpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIExfbm90KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuKCkoTF9hcmcpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJMZXQgZXhwZWN0ZWQgYmluZGluZyBhdCBcIn0pKExfcG9zKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuU3RyaW5nKCkoTF9hcmcpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiPVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jcmVhdGVBc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcXCJ9KShMX3BvcykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYXBwZW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZXZlcnNlKCkoTF9hcmdzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlbigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wb3NpdGlvbigpKExfYXJnKSl9fSkoKSkpfX0pKCkpKExfcmVzdCkpfX0pKCkpKX19KSgpKSl9fSkoKSkoTF9uYW1lcykoTF9jb250KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRMZXRMYW1iZGEoKShMX3BvcykoTF9yZXN0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2FyZykoTF9hcmdzKSl9fSkoKSkoTF9uYW1lcykoTF9jb250KSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInBhcmVuR3JvdXBzXCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJlbkdyb3VwcyA9IGNvbnMgKGNvbnMgJygnICcpJykgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIihcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiKVwifSkpfX0pKCkpKExfbmlsKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2NhbkxpbmVHXCJ9KShmdW5jdGlvbigpe3JldHVybiA1fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzY2FuTGluZUcgc3RyIHBhdCBncm91cHMgb25EZWYgb25FeHByID0gXFxcXFxcXFxcXG4gIHRva3MgPSB0b2tlbnMgc3RyIHBhdFxcbiAgZ3JvdXBUb2tzID0gZm9sZHIgKFxcXFxlbCB2YWx1ZSAuIGVsIFxcXFxoIHQgLiBjb25zIGggKGNvbnMgdCB2YWx1ZSkpIChjb25zICc9JyBibG9ja1N0YXJ0cykgZ3JvdXBzXFxuICAuXFxuICAjIGNoZWNrIGlmIGl0J3MgYSBkZWZpbml0aW9uXFxuICBmaW5kIChcXFxcdG9rIC4gb3IgKGNvbnRhaW5zIGdyb3VwVG9rcyAodG9rZW5TdHJpbmcgdG9rKSkgKGlzQ29ucyAoc3RyTWF0Y2ggKHRva2VuU3RyaW5nIHRvaykgJ15cXFxcbicpKSkgdG9rcyAoXFxcXGl0ZW0gLiBpc1Rva2VuU3RyaW5nIGl0ZW0gJz0nKSBmYWxzZVxcbiAgICB0b2tzIFxcXFxuYW1lIHJlc3QgLiBcXFxcXFxcXFxcbiAgICAgIHBhcnNlSXQgZnVuYyA9IFxcXFxcXFxcXFxuICAgICAgICBwYXJzZWQgPSBwYXJzZVRva3MgKGNoZWNrU2V0RGF0YVR5cGUgZnVuYyByZXN0IG5hbWUpIGdyb3Vwc1xcbiAgICAgICAgLlxcbiAgICAgICAgb25EZWYgKGlmTm90RXJyIHBhcnNlZCBcXFxcbGlzdCAuIGNyZWF0ZURlZiBsaXN0IG5hbWUgKGFyaXR5IHJlc3QgMCkgc3RyKVxcbiAgICAgIC5cXG4gICAgICBpc1Rva2VuU3RyaW5nIChoZWFkIHJlc3QpICc9J1xcbiAgICAgICAgaXNUb2tlblN0cmluZyAoaGVhZCAodGFpbCByZXN0KSkgJ1xcXFxcXFxcJ1xcbiAgICAgICAgICBwYXJzZUl0IChzZXRUeXBlQW5ubyAodGFpbCByZXN0KSAodG9rZW5TdHJpbmcgbmFtZSkpXFxuICAgICAgICAgIHBhcnNlSXQgKHRhaWwgcmVzdClcXG4gICAgICAgIHRyYW5zZm9ybURlZiBuYW1lIHJlc3QgXFxcXGRlZiAuXFxuICAgICAgICAgIHBhcnNlSXQgKGNvbnMgKHRva2VuICdcXFxcXFxcXCcgKC0gKHBvc2l0aW9uIChoZWFkIHJlc3QpKSAxKSkgZGVmKVxcbiAgICBpZk5vdEVyciAocGFyc2VUb2tzIHRva3MgZ3JvdXBzKSBcXFxcbGlzdCAuIG9uRXhwciBsaXN0XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBmdW5jdGlvbihMX29uRGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9vbkV4cHIpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZ3JvdXBUb2tzLCBMX3Rva3M7XG5cbkxfZ3JvdXBUb2tzID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mb2xkcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZWwpe3JldHVybiBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gTF9lbCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfY29ucygpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF90KShMX3ZhbHVlKSl9fSkoKSl9fSl9fSkoKSl9fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI9XCJ9KShMX2Jsb2NrU3RhcnRzKSl9fSkoKSkoTF9ncm91cHMpKX19KSgpO1xuXG5MX3Rva3MgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VucygpKExfc3RyKShMX3BhdCkpfX0pKCk7XG5yZXR1cm4gTF9maW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2spe3JldHVybiBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250YWlucygpKExfZ3JvdXBUb2tzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuU3RyaW5nKCkoTF90b2spKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc0NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ck1hdGNoKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfdG9rKSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJeXFxuXCJ9KSl9fSkoKSkpfX0pKCkpfSl9fSkoKSkoTF90b2tzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiBMX2lzVG9rZW5TdHJpbmcoKShMX2l0ZW0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiPVwifSl9KX19KSgpKShMX2ZhbHNlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva3MoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfcGFyc2VJdDtcblxuTF9wYXJzZUl0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3BhcnNlZDtcblxuTF9wYXJzZWQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlVG9rcygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY2hlY2tTZXREYXRhVHlwZSgpKExfZnVuYykoTF9yZXN0KShMX25hbWUpKX19KSgpKShMX2dyb3VwcykpfX0pKCk7XG5yZXR1cm4gTF9vbkRlZigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaWZOb3RFcnIoKShMX3BhcnNlZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9jcmVhdGVEZWYoKShMX2xpc3QpKExfbmFtZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hcml0eSgpKExfcmVzdCkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKShMX3N0cil9KX19KSgpKSl9fSkoKSl9KSgpfSl9fSkoKTtcbnJldHVybiBMX2lzVG9rZW5TdHJpbmcoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3Jlc3QpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiBcIj1cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNUb2tlblN0cmluZygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfcmVzdCkpfX0pKCkpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VJdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc2V0VHlwZUFubm8oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RhaWwoKShMX3Jlc3QpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuU3RyaW5nKCkoTF9uYW1lKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlSXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RhaWwoKShMX3Jlc3QpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdHJhbnNmb3JtRGVmKCkoTF9uYW1lKShMX3Jlc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gTF9wYXJzZUl0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlbigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kXygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zaXRpb24oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3Jlc3QpKX19KSgpKSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKX19KSgpKSl9fSkoKSkoTF9kZWYpKX19KSgpKX0pfX0pKCkpKX19KSgpKX0pKCl9fSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaWZOb3RFcnIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlVG9rcygpKExfdG9rcykoTF9ncm91cHMpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX29uRXhwcigpKExfbGlzdCl9KX19KSgpKSl9fSkoKSl9KSgpfX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlTGluZUdcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDZ9KShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlTGluZUcgc3RyIHBhdCBuYW1lcyBncm91cHMgb25EZWYgb25FeHByID0gXFxcXFxcXFxcXG4gIGFzdENhbGxiYWNrIGNiID0gXFxcXGxpc3QgLiBjcmVhdGVBc3QgbGlzdCBuYW1lcyBcXFxcYXN0IC4gY2IgYXN0XFxuICAuXFxuICBzY2FuTGluZUcgc3RyIHBhdCBncm91cHMgKGFzdENhbGxiYWNrIG9uRGVmKSAoYXN0Q2FsbGJhY2sgb25FeHByKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIGZ1bmN0aW9uKExfb25EZWYpe3JldHVybiBmdW5jdGlvbihMX29uRXhwcil7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9hc3RDYWxsYmFjaztcblxuTF9hc3RDYWxsYmFjayA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY2Ipe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2NyZWF0ZUFzdCgpKExfbGlzdCkoTF9uYW1lcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9hc3Qpe3JldHVybiBMX2NiKCkoTF9hc3QpfSl9fSkoKSl9fSl9fSkoKTtcbnJldHVybiBMX3NjYW5MaW5lRygpKExfc3RyKShMX3BhdCkoTF9ncm91cHMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYXN0Q2FsbGJhY2soKShMX29uRGVmKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hc3RDYWxsYmFjaygpKExfb25FeHByKSl9fSkoKSl9KSgpfX19fX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0cmFuc2Zvcm1EZWZcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcInRyYW5zZm9ybURlZiBuYW1lIHRva3MgY29udCA9IHdpdGhDb25zIHRva3MgKHBhcnNlRXJyIFxcXCJCYWQgZGVmaW5pdGlvbiwgZXhwZWN0aW5nIHRva2Vuc1xcXCIgKGxvYyBuYW1lKSkgXFxcXGggdCAuXFxuICBpc1Rva2VuU3RyaW5nIGggJz0nXFxuICAgIGlzVG9rZW5TdHJpbmcgKGhlYWQgdCkgJ1xcXFxcXFxcJ1xcbiAgICAgIGNvbnQgKGNvbnMgKHRva2VuICcuJyAocG9zaXRpb24gaCkpIChzZXRUeXBlQW5ubyB0ICh0b2tlblN0cmluZyBuYW1lKSkpXFxuICAgICAgY29udCAoY29ucyAodG9rZW4gJy4nIChwb3NpdGlvbiBoKSkgdClcXG4gICAgdHJhbnNmb3JtRGVmIG5hbWUgdCBcXFxcbGlzdCAuIGNvbnQgKGNvbnMgaCBsaXN0KVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250KXtyZXR1cm4gTF93aXRoQ29ucygpKExfdG9rcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUVycigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiQmFkIGRlZmluaXRpb24sIGV4cGVjdGluZyB0b2tlbnNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbG9jKCkoTF9uYW1lKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfaXNUb2tlblN0cmluZygpKExfaCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI9XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzVG9rZW5TdHJpbmcoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3QpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW4oKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zaXRpb24oKShMX2gpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZXRUeXBlQW5ubygpKExfdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfbmFtZSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW4oKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zaXRpb24oKShMX2gpKX19KSgpKSl9fSkoKSkoTF90KSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RyYW5zZm9ybURlZigpKExfbmFtZSkoTF90KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2NvbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKExfbGlzdCkpfX0pKCkpfSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzZXRUeXBlQW5ub1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2V0VHlwZUFubm8gdG9rcyBuYW1lID0gXFxcXFxcXFxcXG4gIHRvayA9IFxcXFxzdHIgLiB0b2tlbiBzdHIgKHBvc2l0aW9uIHRva3MpXFxuICAuXFxuICBjb25zICh0b2sgJ1xcXFxcXFxcQCcpIChjb25zICh0b2sgJ3R5cGUnKSAoY29ucyAodG9rIG5hbWUpIChjb25zICh0b2sgJy4nKSB0b2tzKSkpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Rva3Mpe3JldHVybiBmdW5jdGlvbihMX25hbWUpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfdG9rO1xuXG5MX3RvayA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gTF90b2tlbigpKExfc3RyKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Bvc2l0aW9uKCkoTF90b2tzKSl9fSkoKSl9KX19KSgpO1xucmV0dXJuIExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcQFwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0eXBlXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2soKShMX25hbWUpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RvaygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLlwifSkpfX0pKCkpKExfdG9rcykpfX0pKCkpKX19KSgpKSl9fSkoKSl9KSgpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInNldERhdGFUeXBlQW5ub1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2V0RGF0YVR5cGVBbm5vIHRva3MgbmFtZSA9IFxcXFxcXFxcXFxuICB0b2sgPSBcXFxcc3RyIC4gdG9rZW4gc3RyIChwb3NpdGlvbiB0b2tzKVxcbiAgLlxcbiAgY29ucyAodG9rICdcXFxcXFxcXEAnKSAoY29ucyAodG9rICdkYXRhVHlwZScpIChjb25zICh0b2sgKHRva2VuU3RyaW5nIG5hbWUpKSAoY29ucyAodG9rICcuJykgdG9rcykpKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3RvaztcblxuTF90b2sgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0cil7cmV0dXJuIExfdG9rZW4oKShMX3N0cikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wb3NpdGlvbigpKExfdG9rcykpfX0pKCkpfSl9fSkoKTtcbnJldHVybiBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RvaygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXEBcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RvaygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGF0YVR5cGVcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RvaygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX25hbWUpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2soKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKX19KSgpKShMX3Rva3MpKX19KSgpKSl9fSkoKSkpfX0pKCkpfSkoKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjcmVhdGVEZWZcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDR9KShmdW5jdGlvbigpe3JldHVybiBcImNyZWF0ZURlZiBkZWYgbmFtZSBhcml0eSBzcmMgPSBcXFxcXFxcXFxcbiAgdG9rIHN0ciA9IHRva2VuIHN0ciAocG9zaXRpb24gZGVmKVxcbiAgLlxcbiAganNvblN0cmluZ2lmeSAodG9rZW5TdHJpbmcgbmFtZSkgKFxcXFxlcnIgLiBwYXJzZUVyciAoc3RyQ2F0IChjb25zIFxcXCJCYWQgZnVuY3Rpb24gbmFtZSBcXFwiIChjb25zIChsb2MgbmFtZSkgbmlsKSkpIGVycikgXFxcXG5hbWVTdHIgLlxcbiAgICBqc29uU3RyaW5naWZ5IHNyYyAoXFxcXGVyciAuIHBhcnNlRXJyIChzdHJDYXQgKGNvbnMgXFxcIkJhZCBzb3VyY2UgXFxcIiAoY29ucyAobG9jIG5hbWUpIG5pbCkpKSBlcnIpIFxcXFxzcmNTdHIgLlxcbiAgICAgICNjb25zICh0b2sgJ2RlZmluZScpIChjb25zICh0b2sgbmFtZVN0cikgKGNvbnMgKHRvayAoc3RyU3RyaW5nIGFyaXR5KSkgKGNvbnMgKHRvayBzcmNTdHIpIChjb25zIGRlZiBuaWwpKSkpXFxuICAgICAgY29ucyAodG9rICdcXFxcXFxcXEAnKSAoY29ucyAoY29ucyAodG9rICdkZWZpbml0aW9uJykgKGNvbnMgKHRvayBuYW1lKSBuaWwpKSAoY29ucyAodG9rICcuJykgKGNvbnMgKHRvayAnZGVmaW5lJykgKGNvbnMgKHRvayBuYW1lU3RyKSAoY29ucyAodG9rIChzdHJTdHJpbmcgYXJpdHkpKSAoY29ucyAodG9rIHNyY1N0cikgKGNvbnMgZGVmIG5pbCkpKSkpKSlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZGVmKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9hcml0eSl7cmV0dXJuIGZ1bmN0aW9uKExfc3JjKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3RvaztcblxuTF90b2sgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0cil7cmV0dXJuIExfdG9rZW4oKShMX3N0cikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wb3NpdGlvbigpKExfZGVmKSl9fSkoKSl9KX19KSgpO1xucmV0dXJuIExfanNvblN0cmluZ2lmeSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX25hbWUpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Vycil7cmV0dXJuIExfcGFyc2VFcnIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiQmFkIGZ1bmN0aW9uIG5hbWUgXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xvYygpKExfbmFtZSkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX2Vycil9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX25hbWVTdHIpe3JldHVybiBMX2pzb25TdHJpbmdpZnkoKShMX3NyYykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9lcnIpe3JldHVybiBMX3BhcnNlRXJyKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJDYXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIkJhZCBzb3VyY2UgXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xvYygpKExfbmFtZSkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX2Vycil9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3NyY1N0cil7cmV0dXJuIExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcQFwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkZWZpbml0aW9uXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2soKShMX25hbWUpKX19KSgpKShMX25pbCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RvaygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLlwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkZWZpbmVcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RvaygpKExfbmFtZVN0cikpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJTdHJpbmcoKShMX2FyaXR5KSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rKCkoTF9zcmNTdHIpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2RlZikoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KSgpfX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY2hlY2tTZXREYXRhVHlwZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY2hlY2tTZXREYXRhVHlwZSB0b2tzIGN1clRva3MgbmFtZSA9IHdpdGhDb25zIGN1clRva3MgdG9rcyBcXFxcaCB0IC5cXG4gIGlzVG9rZW5TdHJpbmcgaCAnPSdcXG4gICAgaXNUb2tlblN0cmluZyAoaGVhZCB0KSAnXFxcXFxcXFwnXFxuICAgICAgc2V0RGF0YVR5cGVBbm5vIHRva3MgbmFtZVxcbiAgICAgIHRva3NcXG4gICAgY2hlY2tTZXREYXRhVHlwZSB0b2tzIHQgbmFtZVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9jdXJUb2tzKXtyZXR1cm4gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gTF93aXRoQ29ucygpKExfY3VyVG9rcykoTF90b2tzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBMX2lzVG9rZW5TdHJpbmcoKShMX2gpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiPVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuU3RyaW5nKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF90KSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NldERhdGFUeXBlQW5ubygpKExfdG9rcykoTF9uYW1lKSl9fSkoKSkoTF90b2tzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jaGVja1NldERhdGFUeXBlKCkoTF90b2tzKShMX3QpKExfbmFtZSkpfX0pKCkpfX0pfX0pKCkpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhcml0eVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYXJpdHkgdG9rcyBuID0gaXNUb2tlblN0cmluZyAoaGVhZCB0b2tzKSAnPScgbiAoYXJpdHkgKHRhaWwgdG9rcykgKCsgbiAxKSlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIGZ1bmN0aW9uKExfbil7cmV0dXJuIExfaXNUb2tlblN0cmluZygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfdG9rcykpfX0pKCkpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiPVwifSkoTF9uKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FyaXR5KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF90b2tzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kbygpKExfbikoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rTGlzdFN0clwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rTGlzdFN0ciB0b2tzID0ganNvblN0cmluZ2lmeSAoam9pbiAobWFwIChcXFxcdCAuIHRva2VuU3RyaW5nIHQpIHRva3MpICcgJylcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rcyl7cmV0dXJuIExfanNvblN0cmluZ2lmeSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfam9pbigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFwKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF90b2tlblN0cmluZygpKExfdCl9KX19KSgpKShMX3Rva3MpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiBcIiBcIn0pKX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImxpbmVQYXRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcImxpbmVQYXQgPSByZWdleHAgJ1xcXFxcXFxccj9cXFxcXFxcXG4oPz1bXiBdfCQpJ1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZWdleHAoKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxyP1xcXFxuKD89W14gXXwkKVwifSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImVtcHR5TGluZVBhdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZW1wdHlMaW5lUGF0ID0gcmVnZXhwICcoXlsgXFxcXFxcXFxpXSpcXFxcXFxcXCMuKnxeWyBcXFxcXFxcXGldKiR8XlxcXFxcXFxccj9cXFxcXFxcXG5bIFxcXFxcXFxcaV0qJCknXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlZ2V4cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiKF5bIFxcXFxpXSpcXFxcIy4qfF5bIFxcXFxpXSokfF5cXFxccj9cXFxcblsgXFxcXGldKiQpXCJ9KSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGluZVNjcnViXCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsaW5lU2NydWIgPSByZWdleHBGbGFncyAnXFxcXFxcXFxyXFxcXFxcXFxuJyAnZydcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmVnZXhwRmxhZ3MoKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxyXFxcXG5cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZ1wifSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImxpbmVzRm9yRmlsZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGluZXNGb3JGaWxlIHRleHQgPSBmaWx0ZXJcXG4gIFxcXFxsaW5lIC4gaXNOaWwgKHN0ck1hdGNoIGxpbmUgZW1wdHlMaW5lUGF0KVxcbiAgc3RyU3BsaXQgKHN0clJlcGxhY2UgdGV4dCBsaW5lU2NydWIgJ1xcXFxuJykgbGluZVBhdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90ZXh0KXtyZXR1cm4gTF9maWx0ZXIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpbmUpe3JldHVybiBMX2lzTmlsKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJNYXRjaCgpKExfbGluZSkoTF9lbXB0eUxpbmVQYXQpKX19KSgpKX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyU3BsaXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0clJlcGxhY2UoKShMX3RleHQpKExfbGluZVNjcnViKShmdW5jdGlvbigpe3JldHVybiBcIlxcblwifSkpfX0pKCkpKExfbGluZVBhdCkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGVmUGF0XCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkZWZQYXQgPSByZWdleHAgJ15bXiA9XSsuKiA9KCB8JCknXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlZ2V4cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXlteID1dKy4qID0oIHwkKVwifSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInVuYW5jaG9yZWREZWZQYXRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcInVuYW5jaG9yZWREZWZQYXQgPSByZWdleHAgJ14oKD86XFxcXFxcXFxzKlxcXFxcXFxcbnwjW15cXFxcXFxcXG5dKlxcXFxcXFxcbikqKShbXj1cXFxcXFxcXG5dKikoPVxcXFxcXFxcKFtePV0rPXw9KT8nXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JlZ2V4cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXigoPzpcXFxccypcXFxcbnwjW15cXFxcbl0qXFxcXG4pKikoW149XFxcXG5dKikoPVxcXFwoW149XSs9fD0pP1wifSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIm5hbWVzRm9yTGluZXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcIm5hbWVzRm9yTGluZXMgbGluZXMgPSBmb2xkbFxcbiAgXFxcXHJlc3VsdCBsaW5lIC4gXFxcXFxcXFxcXG4gICAgbSA9IHN0ck1hdGNoIGxpbmUgZGVmUGF0XFxuICAgIC5cXG4gICAgaXNOaWwgbSByZXN1bHQgKGNvbnMgKGhlYWQgKHRhaWwgbSkpIHJlc3VsdClcXG4gIG5pbFxcbiAgbGluZXNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGluZXMpe3JldHVybiBMX2ZvbGRsKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiBmdW5jdGlvbihMX2xpbmUpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfbTtcblxuTF9tID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJNYXRjaCgpKExfbGluZSkoTF9kZWZQYXQpKX19KSgpO1xucmV0dXJuIExfaXNOaWwoKShMX20pKExfcmVzdWx0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RhaWwoKShMX20pKX19KSgpKSl9fSkoKSkoTF9yZXN1bHQpKX19KSgpKX0pKCl9fSl9fSkoKSkoTF9uaWwpKExfbGluZXMpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicnVuUGFyc2VGaWx0ZXJzXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJydW5QYXJzZUZpbHRlcnMgZmlsdGVycyBsaW5lID0gZmlsdGVyc1xcbiAgXFxcXGggdCBEIC4gYmluZCAoaCBsaW5lKSBcXFxcZmlsdGVyZWQgLiBydW5QYXJzZUZpbHRlcnMgdCBmaWx0ZXJlZFxcbiAgbGluZVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9maWx0ZXJzKXtyZXR1cm4gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gTF9maWx0ZXJzKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oKCkoTF9saW5lKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9maWx0ZXJlZCl7cmV0dXJuIExfcnVuUGFyc2VGaWx0ZXJzKCkoTF90KShMX2ZpbHRlcmVkKX0pfX0pKCkpfX19KX19KSgpKShMX2xpbmUpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImlzQmxvY2tTdGFydFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNCbG9ja1N0YXJ0IHRvayA9IGFuZFxcbiAgaXNUb2tlbiB0b2tcXG4gIGNvbnRhaW5zIGJsb2NrU3RhcnRzICh0b2tlblN0cmluZyB0b2spXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Rvayl7cmV0dXJuIExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuKCkoTF90b2spKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnRhaW5zKCkoTF9ibG9ja1N0YXJ0cykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfdG9rKSl9fSkoKSkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFjcm9TdWJcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcIm1hY3JvU3ViIG1hY3MgZXhwciA9IHBvc3RQcm9jZXNzTWFjcm8gLTEgLTEgKGJhc2VNYWNyb1N1YiBtYWNzIGV4cHIpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX21hY3Mpe3JldHVybiBmdW5jdGlvbihMX2V4cHIpe3JldHVybiBMX3Bvc3RQcm9jZXNzTWFjcm8oKShmdW5jdGlvbigpe3JldHVybiAtMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9iYXNlTWFjcm9TdWIoKShMX21hY3MpKExfZXhwcikpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImNvbnNpZnlNYWNyb1ZhbHVlXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb25zaWZ5TWFjcm9WYWx1ZSB2YWx1ZSA9IGlzQ29ucyB2YWx1ZSB2YWx1ZSAoY29ucyB2YWx1ZSBuaWwpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gTF9pc0NvbnMoKShMX3ZhbHVlKShMX3ZhbHVlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX3ZhbHVlKShMX25pbCkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmFzZU1hY3JvU3ViXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJiYXNlTWFjcm9TdWIgbWFjcyBleHByID0gaXNUb2tlbiBleHByXFxuICBleHByXFxuICBpc1BhcmVucyBleHByXFxuICAgIGV4cHIgXFxcXHN0YXJ0IGVuZCBjb250ZW50IC4gXFxcXFxcXFxcXG4gICAgICByZXN1bHQgPSBiYXNlTWFjcm9TdWIgbWFjcyBjb250ZW50XFxuICAgICAgLlxcbiAgICAgIGlzVG9rZW4gcmVzdWx0IHJlc3VsdCAocGFyZW5zIHN0YXJ0IGVuZCByZXN1bHQpXFxuICAgIHdpdGhDb25zIGV4cHIgZXhwciBcXFxcaCB0IC5cXG4gICAgICBpc0Jsb2NrU3RhcnQgaFxcbiAgICAgICAgY29ucyBoXFxuICAgICAgICAgIGlzVG9rZW5TdHJpbmcgaCAnXFxcXFxcXFxcXFxcXFxcXCdcXG4gICAgICAgICAgICBtYWNyb1N1YkxldCBtYWNzIHRcXG4gICAgICAgICAgICBtYWNyb1N1YkJvZHkgJy4nIG1hY3MgdFxcbiAgICAgICAgd2l0aFRva2VuIGhcXG4gICAgICAgICAgXFxcXFxcXFxcXG4gICAgICAgICAgICBzdWJIID0gYmFzZU1hY3JvU3ViIG1hY3MgaFxcbiAgICAgICAgICAgIC5cXG4gICAgICAgICAgICB3aXRoVG9rZW4gc3ViSFxcbiAgICAgICAgICAgICAgY29ucyBzdWJIIChtYXAgKGJhc2VNYWNyb1N1YiBtYWNzKSB0KVxcbiAgICAgICAgICAgICAgXFxcXHRvayBwb3MgLiBiYXNlTWFjcm9TdWIgbWFjcyAoY29ucyBzdWJIIHQpXFxuICAgICAgICAgIFxcXFx0b2sgcG9zIC4gYXNzb2MgdG9rIG1hY3NcXG4gICAgICAgICAgICBcXFxcZGVmIC4gYmFzZU1hY3JvU3ViIG1hY3MgKGRlZiB0KVxcbiAgICAgICAgICAgIGNvbnMgaCAobWFwIChiYXNlTWFjcm9TdWIgbWFjcykgdClcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIGZ1bmN0aW9uKExfZXhwcil7cmV0dXJuIExfaXNUb2tlbigpKExfZXhwcikoTF9leHByKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzUGFyZW5zKCkoTF9leHByKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2V4cHIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0YXJ0KXtyZXR1cm4gZnVuY3Rpb24oTF9lbmQpe3JldHVybiBmdW5jdGlvbihMX2NvbnRlbnQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfcmVzdWx0O1xuXG5MX3Jlc3VsdCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYmFzZU1hY3JvU3ViKCkoTF9tYWNzKShMX2NvbnRlbnQpKX19KSgpO1xucmV0dXJuIExfaXNUb2tlbigpKExfcmVzdWx0KShMX3Jlc3VsdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJlbnMoKShMX3N0YXJ0KShMX2VuZCkoTF9yZXN1bHQpKX19KSgpKX0pKCl9fX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3dpdGhDb25zKCkoTF9leHByKShMX2V4cHIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfaXNCbG9ja1N0YXJ0KCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNUb2tlblN0cmluZygpKExfaCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXFxcXFxcXFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWNyb1N1YkxldCgpKExfbWFjcykoTF90KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWNyb1N1YkJvZHkoKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKExfbWFjcykoTF90KSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3dpdGhUb2tlbigpKExfaCkoZnVuY3Rpb24oKXtcbnZhciBMX3N1Ykg7XG5cbkxfc3ViSCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYmFzZU1hY3JvU3ViKCkoTF9tYWNzKShMX2gpKX19KSgpO1xucmV0dXJuIExfd2l0aFRva2VuKCkoTF9zdWJIKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX3N1YkgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFwKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9iYXNlTWFjcm9TdWIoKShMX21hY3MpKX19KSgpKShMX3QpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIExfYmFzZU1hY3JvU3ViKCkoTF9tYWNzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX3N1YkgpKExfdCkpfX0pKCkpfX0pfX0pKCkpfSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90b2spe3JldHVybiBmdW5jdGlvbihMX3Bvcyl7cmV0dXJuIExfYXNzb2MoKShMX3RvaykoTF9tYWNzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2RlZil7cmV0dXJuIExfYmFzZU1hY3JvU3ViKCkoTF9tYWNzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2RlZigpKExfdCkpfX0pKCkpfSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX21hcCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYmFzZU1hY3JvU3ViKCkoTF9tYWNzKSl9fSkoKSkoTF90KSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpKX19KSgpKX19KX19KSgpKSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIm1hY3JvU3ViTGV0XCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWNyb1N1YkxldCBtYWNzIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBpc1Rva2VuU3RyaW5nIGggJy4nXFxuICAgIGNvbnMgaCAoYmFzZU1hY3JvU3ViIG1hY3MgdClcXG4gICAgY29ucyAoc2V0UGFyZW5zIGggXFxcXGNvbnRlbnQgLiBtYWNyb1N1YkJvZHkgJz0nIG1hY3MgY29udGVudCkgKG1hY3JvU3ViTGV0IG1hY3MgdClcXG4gICMgRG9uJ3QgYm90aGVyIHdpdGggcGFyc2UgZXJyb3JzIGF0IHRoaXMgcG9pbnQgLS0gYXN0IGdlbmVyYXRvciB3aWxsIGRldGVjdCB0aGVtXFxuICBuaWxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfaXNUb2tlblN0cmluZygpKExfaCkoZnVuY3Rpb24oKXtyZXR1cm4gXCIuXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYmFzZU1hY3JvU3ViKCkoTF9tYWNzKShMX3QpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZXRQYXJlbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY29udGVudCl7cmV0dXJuIExfbWFjcm9TdWJCb2R5KCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI9XCJ9KShMX21hY3MpKExfY29udGVudCl9KX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWNyb1N1YkxldCgpKExfbWFjcykoTF90KSl9fSkoKSkpfX0pKCkpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFjcm9TdWJCb2R5XCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWNyb1N1YkJvZHkgY2hhciBtYWNzIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBjb25zIGhcXG4gICAgaXNUb2tlblN0cmluZyBoIGNoYXIgYmFzZU1hY3JvU3ViIChtYWNyb1N1YkJvZHkgY2hhcilcXG4gICAgICBtYWNzXFxuICAgICAgdFxcbiAgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2NoYXIpe3JldHVybiBmdW5jdGlvbihMX21hY3Mpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNUb2tlblN0cmluZygpKExfaCkoTF9jaGFyKShMX2Jhc2VNYWNyb1N1YikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWNyb1N1YkJvZHkoKShMX2NoYXIpKX19KSgpKShMX21hY3MpKExfdCkpfX0pKCkpfX19KX19KSgpKShMX25pbCl9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInBvc3RQcm9jZXNzTWFjcm9cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcInBvc3RQcm9jZXNzTWFjcm8gYmVmb3JlIGFmdGVyIGV4cHIgPSBpc1N0cmluZyBleHByXFxuICB0b2tlbiBleHByIChlcSBhZnRlciAtMSBiZWZvcmUgYWZ0ZXIpXFxuICBpc1BhcmVucyBleHByXFxuICAgIGV4cHIgXFxcXHN0YXJ0IGVuZCBjb250ZW50cyAuIHBhcmVucyBzdGFydCBlbmQgKHBvc3RQcm9jZXNzTWFjcm8gc3RhcnQgZW5kIGNvbnRlbnRzKVxcbiAgICBpc0NvbnMgZXhwclxcbiAgICAgIGV4cHIgXFxcXGggdCAuXFxuICAgICAgICBpc1Rva2VuIGhcXG4gICAgICAgICAgY29ucyBoIChwb3N0UHJvY2Vzc01hY3JvICgrIDEgKCsgKHRva2VuUG9zIGgpIChzdHJMZW4gKHRva2VuU3RyaW5nIGgpKSkpIC0xIHQpXFxuICAgICAgICAgIFxcXFxcXFxcXFxuICAgICAgICAgICAgcG9zU3RhcnQgPSBwb3NpdGlvbiBoXFxuICAgICAgICAgICAgcG9zRW5kID0gcG9zaXRpb24gdFxcbiAgICAgICAgICAgIHQyID0gcG9zdFByb2Nlc3NNYWNybyAtMSBhZnRlciB0XFxuICAgICAgICAgICAgaDIgPSBwb3N0UHJvY2Vzc01hY3JvIGJlZm9yZSAtMSBoXFxuICAgICAgICAgICAgLlxcbiAgICAgICAgICAgIGVxIHBvc1N0YXJ0IC0xXFxuICAgICAgICAgICAgICBjb25zIChwb3N0UHJvY2Vzc01hY3JvIGJlZm9yZSAocG9zaXRpb24gdDIpIGgpIHQyXFxuICAgICAgICAgICAgICBjb25zIGgyIChwb3N0UHJvY2Vzc01hY3JvICgrIDEgKGxleEVuZCBoMikpIGFmdGVyIHQpXFxuICAgICAgaXNOdW1iZXIgZXhwclxcbiAgICAgICAgdG9rZW4gKHN0clN0cmluZyBleHByKSAoZXEgYWZ0ZXIgLTEgYmVmb3JlIGFmdGVyKVxcbiAgICAgICAgZXhwclwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9iZWZvcmUpe3JldHVybiBmdW5jdGlvbihMX2FmdGVyKXtyZXR1cm4gZnVuY3Rpb24oTF9leHByKXtyZXR1cm4gTF9pc1N0cmluZygpKExfZXhwcikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlbigpKExfZXhwcikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9lcSgpKExfYWZ0ZXIpKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkoTF9iZWZvcmUpKExfYWZ0ZXIpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1BhcmVucygpKExfZXhwcikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9leHByKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdGFydCl7cmV0dXJuIGZ1bmN0aW9uKExfZW5kKXtyZXR1cm4gZnVuY3Rpb24oTF9jb250ZW50cyl7cmV0dXJuIExfcGFyZW5zKCkoTF9zdGFydCkoTF9lbmQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zdFByb2Nlc3NNYWNybygpKExfc3RhcnQpKExfZW5kKShMX2NvbnRlbnRzKSl9fSkoKSl9fX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQ29ucygpKExfZXhwcikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9leHByKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF9pc1Rva2VuKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zdFByb2Nlc3NNYWNybygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJG8oKShmdW5jdGlvbigpe3JldHVybiAxfSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kbygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5Qb3MoKShMX2gpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckxlbigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX2gpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiAtMX0pKExfdCkpfX0pKCkpKX19KSgpKShmdW5jdGlvbigpe1xudmFyIExfaDIsIExfdDIsIExfcG9zRW5kLCBMX3Bvc1N0YXJ0O1xuXG5MX2gyID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wb3N0UHJvY2Vzc01hY3JvKCkoTF9iZWZvcmUpKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkoTF9oKSl9fSkoKTtcblxuTF90MiA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zdFByb2Nlc3NNYWNybygpKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkoTF9hZnRlcikoTF90KSl9fSkoKTtcblxuTF9wb3NFbmQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Bvc2l0aW9uKCkoTF90KSl9fSkoKTtcblxuTF9wb3NTdGFydCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zaXRpb24oKShMX2gpKX19KSgpO1xucmV0dXJuIExfZXEoKShMX3Bvc1N0YXJ0KShmdW5jdGlvbigpe3JldHVybiAtMX0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcG9zdFByb2Nlc3NNYWNybygpKExfYmVmb3JlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Bvc2l0aW9uKCkoTF90MikpfX0pKCkpKExfaCkpfX0pKCkpKExfdDIpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gyKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Bvc3RQcm9jZXNzTWFjcm8oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyRvKCkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGV4RW5kKCkoTF9oMikpfX0pKCkpKX19KSgpKShMX2FmdGVyKShMX3QpKX19KSgpKSl9fSkoKSl9KX19KX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc051bWJlcigpKExfZXhwcikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlbigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyU3RyaW5nKCkoTF9leHByKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9lcSgpKExfYWZ0ZXIpKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkoTF9iZWZvcmUpKExfYWZ0ZXIpKX19KSgpKSl9fSkoKSkoTF9leHByKSl9fSkoKSkpfX0pKCkpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGVmTWFjcm9cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImRlZk1hY3JvIG5hbWUgZGVmID0gYmluZCAoZ2V0VmFsdWUgJ21hY3JvRGVmcycpIFxcXFxtYWNzIC4gc2V0VmFsdWUgJ21hY3JvRGVmcycgKGFjb25zIG5hbWUgZGVmIG1hY3MpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX25hbWUpe3JldHVybiBmdW5jdGlvbihMX2RlZil7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcIm1hY3JvRGVmc1wifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbWFjcyl7cmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcIm1hY3JvRGVmc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hY29ucygpKExfbmFtZSkoTF9kZWYpKExfbWFjcykpfX0pKCkpfSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGVsaW1pdGVyTGlzdFByZWZpeFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGVsaW1pdGVyTGlzdFByZWZpeCA9IFxcXCJcXFxcXFxcIig/OlxcXFxcXFxcXFxcXFxcXFwufFteXFxcXFxcXCJdKSpcXFxcXFxcInwnKD86XFxcXFxcXFxcXFxcXFxcXC58W14nXSkqJ3xcXFxcXFxcXG4gKnwjLip8ICtcXFwiXCJ9KShmdW5jdGlvbigpe3JldHVybiBcIlxcXCIoPzpcXFxcXFxcXC58W15cXFwiXSkqXFxcInwnKD86XFxcXFxcXFwufFteJ10pKid8XFxcXG4gKnwjLip8ICtcIn0pfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJlZ2V4cEVzY2FwZVBhdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVnZXhwRXNjYXBlUGF0ID0gcmVnZXhwRmxhZ3MgJ1tcXFxcXFxcXC1cXFxcXFxcXFtcXFxcXFxcXF0vXFxcXFxcXFx7XFxcXFxcXFx9XFxcXFxcXFwoXFxcXFxcXFwpXFxcXFxcXFwqXFxcXFxcXFwrXFxcXFxcXFw/XFxcXFxcXFwuXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXlxcXFxcXFxcJFxcXFxcXFxcfF0nICdnJ1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZWdleHBGbGFncygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiW1xcXFwtXFxcXFtcXFxcXS9cXFxce1xcXFx9XFxcXChcXFxcKVxcXFwqXFxcXCtcXFxcP1xcXFwuXFxcXFxcXFxcXFxcXlxcXFwkXFxcXHxdXCJ9KShmdW5jdGlvbigpe3JldHVybiBcImdcIn0pKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhZGRUb2tlblwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWRkVG9rZW4gZGVsID0gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuTGlzdCcpXFxuICBcXFxcZGVscyAuIGNvbnRhaW5zIGRlbHMgZGVsXFxuICAgIGZhbHNlXFxuICAgIFxcXFxcXFxcXFxuICAgICAgbmV3RGVscyA9IGluc2VydFNvcnRlZCAoXFxcXGEgYiAuID4gKHN0ckxlbiBhKSAoc3RyTGVuIGIpKSBkZWwgZGVsc1xcbiAgICAgIC5cXG4gICAgICBiaW5kIChzZXRWYWx1ZSAndG9rZW5MaXN0JyBuZXdEZWxzKVxcbiAgICAgICAgXFxcXF8gLiBjb21wdXRlVG9rZW5QYXQgbmV3RGVsc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9kZWwpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbkxpc3RcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2RlbHMpe3JldHVybiBMX2NvbnRhaW5zKCkoTF9kZWxzKShMX2RlbCkoTF9mYWxzZSkoZnVuY3Rpb24oKXtcbnZhciBMX25ld0RlbHM7XG5cbkxfbmV3RGVscyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaW5zZXJ0U29ydGVkKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gTF8keigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTGVuKCkoTF9hKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdHJMZW4oKShMX2IpKX19KSgpKX19KX19KSgpKShMX2RlbCkoTF9kZWxzKSl9fSkoKTtcbnJldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbkxpc3RcIn0pKExfbmV3RGVscykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfXyl7cmV0dXJuIExfY29tcHV0ZVRva2VuUGF0KCkoTF9uZXdEZWxzKX0pfX0pKCkpfSl9KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImNvbXB1dGVUb2tlblBhdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY29tcHV0ZVRva2VuUGF0IGRlbHMgPSBcXFxcXFxcXFxcbiAgZGVsUGF0cyA9IG1hcCAoXFxcXGl0ZW0gLiBzdHJSZXBsYWNlIGl0ZW0gcmVnZXhwRXNjYXBlUGF0IFxcXCJcXFxcXFxcXCQmXFxcIikgZGVsc1xcbiAgbmV3UGF0ID0gc3RyQ2F0IChjb25zICcoJyAoY29ucyAoam9pbiAoY29ucyBkZWxpbWl0ZXJMaXN0UHJlZml4IGRlbFBhdHMpICd8JykgKGNvbnMgJyknIG5pbCkpKVxcbiAgLlxcbiAgc2V0VmFsdWUgJ3Rva2VuUGF0JyBuZXdQYXRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZGVscyl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9uZXdQYXQsIExfZGVsUGF0cztcblxuTF9uZXdQYXQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiKFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9qb2luKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9kZWxpbWl0ZXJMaXN0UHJlZml4KShMX2RlbFBhdHMpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiBcInxcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIilcIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKTtcblxuTF9kZWxQYXRzID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYXAoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiBMX3N0clJlcGxhY2UoKShMX2l0ZW0pKExfcmVnZXhwRXNjYXBlUGF0KShmdW5jdGlvbigpe3JldHVybiBcIlxcXFwkJlwifSl9KX19KSgpKShMX2RlbHMpKX19KSgpO1xucmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInRva2VuUGF0XCJ9KShMX25ld1BhdCl9KSgpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWRkVG9rZW5Hcm91cFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWRkVG9rZW5Hcm91cCBvcGVuIGNsb3NlID0gYmluZCAoYWRkVG9rZW4gb3BlbilcXG4gIFxcXFxfIC4gYmluZCAoYWRkVG9rZW4gY2xvc2UpXFxuICAgIFxcXFxfIC4gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuR3JvdXBzJylcXG4gICAgICBcXFxcZ3IgLiBzZXRWYWx1ZSAndG9rZW5Hcm91cHMnIChhY29ucyBvcGVuIGNsb3NlIGdyKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vcGVuKXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZSl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYWRkVG9rZW4oKShMX29wZW4pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX18pe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FkZFRva2VuKCkoTF9jbG9zZSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfX18wKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5Hcm91cHNcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2dyKXtyZXR1cm4gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5Hcm91cHNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYWNvbnMoKShMX29wZW4pKExfY2xvc2UpKExfZ3IpKX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2Ugc3RyIHBhdCA9IGlmTm90RXJyIChwYXJzZUluZGVudCAodG9rZW4gJ1xcXFxuJyAwKSAodG9rZW5zIHN0ciBwYXQpIG5pbCBwYXJlbkdyb3VwcykgXFxcXGxpc3QgLiBsaXN0IFxcXFxoIHQgLiBzdHJpcFBhcmVucyBoXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0cil7cmV0dXJuIGZ1bmN0aW9uKExfcGF0KXtyZXR1cm4gTF9pZk5vdEVycigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VJbmRlbnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rva2VuKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJcXG5cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlbnMoKShMX3N0cikoTF9wYXQpKX19KSgpKShMX25pbCkoTF9wYXJlbkdyb3VwcykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfc3RyaXBQYXJlbnMoKShMX2gpfX0pfX0pKCkpfSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VHXCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUcgc3RyIHBhdCBncm91cHMgPSBpZk5vdEVyciAocGFyc2VJbmRlbnQgKHRva2VuICdcXFxcbicgMCkgKHRva2VucyBzdHIgcGF0KSBuaWwgZ3JvdXBzKSBcXFxcbGlzdCAuIGxpc3QgXFxcXGggdCAuIHN0cmlwUGFyZW5zIGhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIExfaWZOb3RFcnIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlSW5kZW50KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlbigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxuXCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5zKCkoTF9zdHIpKExfcGF0KSl9fSkoKSkoTF9uaWwpKExfZ3JvdXBzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9saXN0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF9zdHJpcFBhcmVucygpKExfaCl9fSl9fSkoKSl9KX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VUb0FzdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VUb0FzdCBzdHIgcGF0ID0gY3JlYXRlQXN0IChwYXJzZSBzdHIgcGF0KSBuaWwgaWRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBMX2NyZWF0ZUFzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2UoKShMX3N0cikoTF9wYXQpKX19KSgpKShMX25pbCkoTF9pZCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VNXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZU0gc3RyID1cXG4gIGJpbmQgKGdldFZhbHVlICd0b2tlblBhdCcpXFxuICAgIFxcXFx0b2tQYXQgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICAgIFxcXFxncm91cHMgLiBwYXJzZUcgc3RyIHRva1BhdCBncm91cHNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5QYXRcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Rva1BhdCl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInRva2VuR3JvdXBzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBMX3BhcnNlRygpKExfc3RyKShMX3Rva1BhdCkoTF9ncm91cHMpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInNjYW5MaW5lXCJ9KShmdW5jdGlvbigpe3JldHVybiA0fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzY2FuTGluZSBzdHIgcGF0IG9uRGVmIG9uRXhwciA9IHNjYW5MaW5lRyBzdHIgcGF0IHBhcmVuR3JvdXBzIG9uRGVmIG9uRXhwclwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBmdW5jdGlvbihMX3BhdCl7cmV0dXJuIGZ1bmN0aW9uKExfb25EZWYpe3JldHVybiBmdW5jdGlvbihMX29uRXhwcil7cmV0dXJuIExfc2NhbkxpbmVHKCkoTF9zdHIpKExfcGF0KShMX3BhcmVuR3JvdXBzKShMX29uRGVmKShMX29uRXhwcil9fX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUxpbmVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDV9KShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlTGluZSBzdHIgcGF0IG5hbWVzIG9uRGVmIG9uRXhwciA9IHBhcnNlTGluZUcgc3RyIHBhdCBuYW1lcyBwYXJlbkdyb3VwcyBvbkRlZiBvbkV4cHJcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RyKXtyZXR1cm4gZnVuY3Rpb24oTF9wYXQpe3JldHVybiBmdW5jdGlvbihMX25hbWVzKXtyZXR1cm4gZnVuY3Rpb24oTF9vbkRlZil7cmV0dXJuIGZ1bmN0aW9uKExfb25FeHByKXtyZXR1cm4gTF9wYXJzZUxpbmVHKCkoTF9zdHIpKExfcGF0KShMX25hbWVzKShMX3BhcmVuR3JvdXBzKShMX29uRGVmKShMX29uRXhwcil9fX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VMaW5lTVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VMaW5lTSBzdHIgPSBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYXQnKVxcbiAgXFxcXHRva1BhdCAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkdyb3VwcycpXFxuICAgIFxcXFxncm91cHMgLiBwYXJzZUxpbmVHIHN0ciB0b2tQYXQgbmlsIGdyb3VwcyBpZCBpZFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdHIpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlblBhdFwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rUGF0KXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5Hcm91cHNcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2dyb3Vwcyl7cmV0dXJuIExfcGFyc2VMaW5lRygpKExfc3RyKShMX3Rva1BhdCkoTF9uaWwpKExfZ3JvdXBzKShMX2lkKShMX2lkKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWNyb1N1Yk1cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcIm1hY3JvU3ViTSBleHByID1cXG4gIGJpbmQgKGdldFZhbHVlICdtYWNyb0RlZnMnKVxcbiAgICBcXFxcbWFjcyAuIG1hY3JvU3ViIG1hY3MgZXhwclwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9leHByKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFjcm9EZWZzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9tYWNzKXtyZXR1cm4gTF9tYWNyb1N1YigpKExfbWFjcykoTF9leHByKX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFjcm9QYXJzZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFjcm9QYXJzZSBzdHIgPVxcbiAgYmluZCAocGFyc2VNIHN0cilcXG4gICAgXFxcXGV4IC4gbWFjcm9TdWJNIGV4XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0cil7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VNKCkoTF9zdHIpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2V4KXtyZXR1cm4gTF9tYWNyb1N1Yk0oKShMX2V4KX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5zTVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5zTSBzdHIgPVxcbiAgYmluZCAoZ2V0VmFsdWUgJ3Rva2VuUGF0JylcXG4gICAgXFxcXGRlbGltaXRlclBhdCAuIHRva2VucyBzdHIgZGVsaW1pdGVyUGF0XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3N0cil7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInRva2VuUGF0XCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9kZWxpbWl0ZXJQYXQpe3JldHVybiBMX3Rva2VucygpKExfc3RyKShMX2RlbGltaXRlclBhdCl9KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlTGluZXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlTGluZXMgbGluZXMgcmVzdWx0ID0gbGluZXNcXG4gIFxcXFxoIHQgRCAuIGJpbmQgKHBhcnNlTGluZU0gaClcXG4gICAgXFxcXGFzdCAuIHBhcnNlTGluZXMgdCAoY29ucyBhc3QgcmVzdWx0KVxcbiAgcmV2ZXJzZSByZXN1bHRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGluZXMpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIExfbGluZXMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlTGluZU0oKShMX2gpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2FzdCl7cmV0dXJuIExfcGFyc2VMaW5lcygpKExfdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9hc3QpKExfcmVzdWx0KSl9fSkoKSl9KX19KSgpKX19fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZXZlcnNlKCkoTF9yZXN1bHQpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUZpbGVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInBhcnNlRmlsZSB0ZXh0ID0gcGFyc2VMaW5lcyAobGluZXNGb3JGaWxlIHRleHQpIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF90ZXh0KXtyZXR1cm4gTF9wYXJzZUxpbmVzKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9saW5lc0ZvckZpbGUoKShMX3RleHQpKX19KSgpKShMX25pbCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzaW1wbGVTY2FuTGluZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2ltcGxlU2NhbkxpbmUgbGluZSA9IGJpbmQgKGdldFZhbHVlICd0b2tlblBhdCcpXFxuICBcXFxcdG9rZW5QYXQgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICBcXFxcZ3JvdXBzIC4gc2NhbkxpbmVHIGxpbmUgdG9rZW5QYXQgZ3JvdXBzIGlkIGlkXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpbmUpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlblBhdFwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rZW5QYXQpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbkdyb3Vwc1wifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gTF9zY2FuTGluZUcoKShMX2xpbmUpKExfdG9rZW5QYXQpKExfZ3JvdXBzKShMX2lkKShMX2lkKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzY2FuTGluZU1cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcInNjYW5MaW5lTSBsaW5lID0gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuUGF0JylcXG4gIFxcXFx0b2tlblBhdCAuIGJpbmQgKGdldFZhbHVlICd0b2tlbkdyb3VwcycpXFxuICAgIFxcXFxncm91cHMgLiBiaW5kIChnZXRWYWx1ZSAncGFyc2VGaWx0ZXJzJylcXG4gICAgICBcXFxcZmlsdGVycyAuIGJpbmQgKGdldFZhbHVlICdtYWNyb0RlZnMnKVxcbiAgICAgICAgXFxcXG1hY3JvcyAuIGJpbmQgKHJ1blBhcnNlRmlsdGVycyBmaWx0ZXJzIChzY2FuTGluZUcgbGluZSB0b2tlblBhdCBncm91cHMgaWQgaWQpKVxcbiAgICAgICAgICBcXFxcc2Nhbm5lZCAuIG1hY3JvU3ViIG1hY3JvcyBzY2FubmVkXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpbmUpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlblBhdFwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rZW5QYXQpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbkdyb3Vwc1wifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZ3JvdXBzKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VGaWx0ZXJzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9maWx0ZXJzKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFjcm9EZWZzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9tYWNyb3Mpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3J1blBhcnNlRmlsdGVycygpKExfZmlsdGVycykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zY2FuTGluZUcoKShMX2xpbmUpKExfdG9rZW5QYXQpKExfZ3JvdXBzKShMX2lkKShMX2lkKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc2Nhbm5lZCl7cmV0dXJuIExfbWFjcm9TdWIoKShMX21hY3JvcykoTF9zY2FubmVkKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJuZXdQYXJzZUxpbmVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcIm5ld1BhcnNlTGluZSBuYW1lcyBsaW5lID0gYmluZCAoc2NhbkxpbmVNIGxpbmUpXFxuICBcXFxcc2Nhbm5lZCAuIGNyZWF0ZUFzdCBzY2FubmVkIG5hbWVzIFxcXFxhc3QgLiBhc3RcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2xpbmUpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NjYW5MaW5lTSgpKExfbGluZSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc2Nhbm5lZCl7cmV0dXJuIExfY3JlYXRlQXN0KCkoTF9zY2FubmVkKShMX25hbWVzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2FzdCl7cmV0dXJuIExfYXN0KCl9KX19KSgpKX0pfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJ1bkxpbmVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInJ1bkxpbmUgbmFtZXMgbGluZSA9IGJpbmQgKG5ld1BhcnNlTGluZSBuYW1lcyBsaW5lKVxcbiAgXFxcXGFzdCAuIGJpbmQgKHJ1bkFzdCBhc3QpXFxuICAgIFxcXFxyZXN1bHQgLiBjb25zXFxuICAgICAgYXN0XFxuICAgICAgaXNQYXJzZUVyciByZXN1bHRcXG4gICAgICAgIGxlZnQgKHBhcnNlRXJyTXNnIHJlc3VsdClcXG4gICAgICAgIHJpZ2h0IHJlc3VsdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uYW1lcyl7cmV0dXJuIGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbmV3UGFyc2VMaW5lKCkoTF9uYW1lcykoTF9saW5lKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9hc3Qpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3J1bkFzdCgpKExfYXN0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiBMX2NvbnMoKShMX2FzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1BhcnNlRXJyKCkoTF9yZXN1bHQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGVmdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VFcnJNc2coKShMX3Jlc3VsdCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3JpZ2h0KCkoTF9yZXN1bHQpKX19KSgpKSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJ1bkxpbmVzXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJydW5MaW5lcyBuYW1lcyBsaW5lcyA9IGxpbmVzXFxuICBcXFxcaCB0IEQgLiBiaW5kIChydW5MaW5lIG5hbWVzIGgpXFxuICAgIFxcXFxsaW5lIC4gYmluZCAocnVuTGluZXMgbmFtZXMgdClcXG4gICAgICBcXFxccmVzdCAuIGNvbnMgbGluZSByZXN0XFxuICBuaWxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbmFtZXMpe3JldHVybiBmdW5jdGlvbihMX2xpbmVzKXtyZXR1cm4gTF9saW5lcygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcnVuTGluZSgpKExfbmFtZXMpKExfaCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcnVuTGluZXMoKShMX25hbWVzKShMX3QpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBMX2NvbnMoKShMX2xpbmUpKExfcmVzdCl9KX19KSgpKX0pfX0pKCkpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicnVuRmlsZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicnVuRmlsZSB0ZXh0ID0gXFxcXFxcXFxcXG4gIGxpbmVzID0gbGluZXNGb3JGaWxlIHRleHRcXG4gIG5hbWVzID0gbmFtZXNGb3JMaW5lcyBsaW5lc1xcbiAgLlxcbiAgcnVuTGluZXMgbmFtZXMgbGluZXNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdGV4dCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9uYW1lcywgTF9saW5lcztcblxuTF9uYW1lcyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbmFtZXNGb3JMaW5lcygpKExfbGluZXMpKX19KSgpO1xuXG5MX2xpbmVzID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9saW5lc0ZvckZpbGUoKShMX3RleHQpKX19KSgpO1xucmV0dXJuIExfcnVuTGluZXMoKShMX25hbWVzKShMX2xpbmVzKX0pKCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJiYXNlTG9hZFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmFzZUxvYWQgZmlsZSA9IGJpbmQgKHJlYWRGaWxlIGZpbGUpXFxuICBcXFxccmVzdWx0IC4gcmVzdWx0XFxuICAgIFxcXFxlcnIgLiBlcnJcXG4gICAgXFxcXGNvbnRlbnRzIC4gYmluZCAoZ2V0VmFsdWUgJ2FjdGl2ZVRva2VuUGFja3MnKVxcbiAgICAgIFxcXFxhY3RpdmVQYWNrcyAuIGJpbmQgcmVzZXRTdGRUb2tlblBhY2tzXFxuICAgICAgICBcXFxcXyAuIGJpbmQgKHJ1bkZpbGUgY29udGVudHMpXFxuICAgICAgICAgIFxcXFxyZXN1bHQgLiBpc05pbCBhY3RpdmVQYWNrc1xcbiAgICAgICAgICAgIGJpbmQgcmVzZXRTdGRUb2tlblBhY2tzXFxuICAgICAgICAgICAgICBcXFxcXyAuIHJlc3VsdFxcbiAgICAgICAgICAgIGJpbmQgKHJlc2V0VG9rZW5QYWNrcyBhY3RpdmVQYWNrcylcXG4gICAgICAgICAgICAgICAgXFxcXF8gLiByZXN1bHRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZmlsZSl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmVhZEZpbGUoKShMX2ZpbGUpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIExfcmVzdWx0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9lcnIpe3JldHVybiBMX2VycigpfSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jb250ZW50cyl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcImFjdGl2ZVRva2VuUGFja3NcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2FjdGl2ZVBhY2tzKXtyZXR1cm4gTF9iaW5kKCkoTF9yZXNldFN0ZFRva2VuUGFja3MpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfXyl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcnVuRmlsZSgpKExfY29udGVudHMpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3VsdF8wKXtyZXR1cm4gTF9pc05pbCgpKExfYWN0aXZlUGFja3MpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYmluZCgpKExfcmVzZXRTdGRUb2tlblBhY2tzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX19fMSl7cmV0dXJuIExfcmVzdWx0XzAoKX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Jlc2V0VG9rZW5QYWNrcygpKExfYWN0aXZlUGFja3MpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX19fMSl7cmV0dXJuIExfcmVzdWx0XzAoKX0pfX0pKCkpKX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsb2FkXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsb2FkIGZpbGUgPSBiaW5kIChiYXNlTG9hZCBmaWxlKVxcbiAgXFxcXHJlc3VsdCAuIFxcXFxcXFxcXFxuICAgIGVycnMgPSBmb2xkciAoXFxcXGxpbmUgcmVzdWx0cyAuIHRhaWwgbGluZSAoXFxcXGVyIC4gY29ucyBlciByZXN1bHRzKSAoXFxcXHggLiByZXN1bHRzKSkgbmlsIHJlc3VsdFxcbiAgICAuXFxuICAgIGlzTmlsIGVycnNcXG4gICAgICByaWdodCB0cnVlXFxuICAgICAgbGVmdCBlcnJzXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2ZpbGUpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Jhc2VMb2FkKCkoTF9maWxlKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfZXJycztcblxuTF9lcnJzID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mb2xkcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGluZSl7cmV0dXJuIGZ1bmN0aW9uKExfcmVzdWx0cyl7cmV0dXJuIExfdGFpbCgpKExfbGluZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9lcil7cmV0dXJuIExfY29ucygpKExfZXIpKExfcmVzdWx0cyl9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBMX3Jlc3VsdHMoKX0pfX0pKCkpfX0pfX0pKCkpKExfbmlsKShMX3Jlc3VsdCkpfX0pKCk7XG5yZXR1cm4gTF9pc05pbCgpKExfZXJycykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yaWdodCgpKExfdHJ1ZSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGVmdCgpKExfZXJycykpfX0pKCkpfSkoKX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVxdWlyZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVxdWlyZSBmaWxlID0gYmluZCAoZ2V0VmFsdWUgJ3JlcXVpcmVkRmlsZXMnKVxcbiAgXFxcXGZpbGVzIC4gY29udGFpbnMgZmlsZXMgZmlsZVxcbiAgICBmYWxzZVxcbiAgICBiaW5kIChsb2FkIGZpbGUpXFxuICAgICAgXFxcXHJlc3VsdCAuIHJlc3VsdFxcbiAgICAgICAgXFxcXHggLiBsZWZ0IHhcXG4gICAgICAgIFxcXFxfIC4gYmluZCAoc2V0VmFsdWUgJ3JlcXVpcmVkRmlsZXMnIChjb25zIGZpbGUgZmlsZXMpKVxcbiAgICAgICAgICBcXFxcXyAuIHJpZ2h0IHRydWVcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZmlsZSl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInJlcXVpcmVkRmlsZXNcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2ZpbGVzKXtyZXR1cm4gTF9jb250YWlucygpKExfZmlsZXMpKExfZmlsZSkoTF9mYWxzZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sb2FkKCkoTF9maWxlKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiBMX3Jlc3VsdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfeCl7cmV0dXJuIExfbGVmdCgpKExfeCl9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX18pe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyZXF1aXJlZEZpbGVzXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2ZpbGUpKExfZmlsZXMpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9fXzApe3JldHVybiBMX3JpZ2h0KCkoTF90cnVlKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImRlZlRva2VuUGFja1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGVmVG9rZW5QYWNrIG5hbWUgcGFjayA9IGJpbmQgKGdldFZhbHVlICd0b2tlblBhY2tzJylcXG4gIFxcXFxwYWNrcyAuIHNldFZhbHVlICd0b2tlblBhY2tzJyAoYWNvbnMgbmFtZSBwYWNrIHBhY2tzKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9wYWNrKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5QYWNrc1wifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcGFja3Mpe3JldHVybiBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlblBhY2tzXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Fjb25zKCkoTF9uYW1lKShMX3BhY2spKExfcGFja3MpKX19KSgpKX0pfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInVzZVRva2VuUGFja1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwidXNlVG9rZW5QYWNrIG5hbWUgPSBiaW5kIChnZXRWYWx1ZSAndG9rZW5QYWNrcycpXFxuICBcXFxccGFja3MgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICBcXFxcZ3JvdXBzIC4gYmluZCAoZ2V0VmFsdWUgJ3Rva2VuTGlzdCcpXFxuICAgICAgXFxcXHRva2VucyAuIGJpbmQgKGdldFZhbHVlICdhY3RpdmVUb2tlblBhY2tzJylcXG4gICAgICAgIFxcXFxhY3RpdmVQYWNrcyAuIGJpbmQgKGdldFZhbHVlICdwYXJzZUZpbHRlcnMnKVxcbiAgICAgICAgICBcXFxcZmlsdGVycyAuIGFzc29jIG5hbWUgcGFja3NcXG4gICAgICAgICAgICBcXFxccGFjayAuIFxcXFxcXFxcXFxuICAgICAgICAgICAgICBncm91cFRva3MgPSBmb2xkbCAoXFxcXHZhbHVlIGVsIC4gZWwgXFxcXGggdCAuIGNvbnMgaCAoY29ucyB0IHZhbHVlKSkgbmlsIChoZWFkICh0YWlsIHBhY2spKVxcbiAgICAgICAgICAgICAgbmV3VG9rcyA9IHF1aWNrc29ydCAoXFxcXGEgYiAuID4gKHN0ckxlbiBhKSAoc3RyTGVuIGIpKSAoYXBwZW5kIChoZWFkIHBhY2spIChhcHBlbmQgZ3JvdXBUb2tzIHRva2VucykpXFxuICAgICAgICAgICAgICAuXFxuICAgICAgICAgICAgICBiaW5kIChzZXRWYWx1ZSAndG9rZW5MaXN0JyBuZXdUb2tzKVxcbiAgICAgICAgICAgICAgICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICd0b2tlbkdyb3VwcycgKGFwcGVuZCAoaGVhZCAodGFpbCBwYWNrKSkgZ3JvdXBzKSlcXG4gICAgICAgICAgICAgICAgICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICdwYXJzZUZpbHRlcnMnIChhcHBlbmQgZmlsdGVycyAoaGVhZCAodGFpbCAodGFpbCBwYWNrKSkpKSlcXG4gICAgICAgICAgICAgICAgICAgIFxcXFxfIC4gYmluZCAoY29tcHV0ZVRva2VuUGF0IG5ld1Rva3MpXFxuICAgICAgICAgICAgICAgICAgICAgIFxcXFxfIC4gc2V0VmFsdWUgJ2FjdGl2ZVRva2VuUGFja3MnIChjb25zIG5hbWUgYWN0aXZlUGFja3MpXFxuICAgICAgICAgICAgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX25hbWUpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlblBhY2tzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wYWNrcyl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInRva2VuR3JvdXBzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbkxpc3RcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Rva2Vucyl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcImFjdGl2ZVRva2VuUGFja3NcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2FjdGl2ZVBhY2tzKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VGaWx0ZXJzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9maWx0ZXJzKXtyZXR1cm4gTF9hc3NvYygpKExfbmFtZSkoTF9wYWNrcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wYWNrKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX25ld1Rva3MsIExfZ3JvdXBUb2tzO1xuXG5MX25ld1Rva3MgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3F1aWNrc29ydCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfYSl7cmV0dXJuIGZ1bmN0aW9uKExfYil7cmV0dXJuIExfJHooKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckxlbigpKExfYSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyTGVuKCkoTF9iKSl9fSkoKSl9fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hcHBlbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3BhY2spKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FwcGVuZCgpKExfZ3JvdXBUb2tzKShMX3Rva2VucykpfX0pKCkpKX19KSgpKSl9fSkoKTtcblxuTF9ncm91cFRva3MgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZvbGRsKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfZWwpe3JldHVybiBMX2VsKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX3QpKExfdmFsdWUpKX19KSgpKX19KX19KSgpKX19KX19KSgpKShMX25pbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF9wYWNrKSl9fSkoKSkpfX0pKCkpKX19KSgpO1xucmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInRva2VuTGlzdFwifSkoTF9uZXdUb2tzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9fKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidG9rZW5Hcm91cHNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYXBwZW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF9wYWNrKSl9fSkoKSkpfX0pKCkpKExfZ3JvdXBzKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfX18wKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VGaWx0ZXJzXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FwcGVuZCgpKExfZmlsdGVycykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF9wYWNrKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfX18xKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb21wdXRlVG9rZW5QYXQoKShMX25ld1Rva3MpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX19fMil7cmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcImFjdGl2ZVRva2VuUGFja3NcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfbmFtZSkoTF9hY3RpdmVQYWNrcykpfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KSgpfSl9fSkoKSkoTF9uaWwpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJlc2V0VG9rZW5QYWNrc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVzZXRUb2tlblBhY2tzIHBhY2tzID0gYmluZCAoc2V0VmFsdWUgJ3Rva2VuR3JvdXBzJyBuaWwpXFxuICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICd0b2tlbkxpc3QnIG5pbClcXG4gICAgXFxcXF8gLiBiaW5kIChzZXRWYWx1ZSAnYWN0aXZlVG9rZW5QYWNrcycgbmlsKVxcbiAgICAgIFxcXFxfIC4gYmluZCAoc2V0VmFsdWUgJ3BhcnNlRmlsdGVycycgbmlsKVxcbiAgICAgICAgXFxcXF8gLiBmb2xkcjFcXG4gICAgICAgICAgXFxcXHBhY2tDbWQgcmVzdWx0IC4gYmluZCBwYWNrQ21kIFxcXFxfIC4gcmVzdWx0XFxuICAgICAgICAgIG1hcCB1c2VUb2tlblBhY2sgcGFja3NcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcGFja3Mpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbkdyb3Vwc1wifSkoTF9uaWwpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX18pe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0b2tlbkxpc3RcIn0pKExfbmlsKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9fXzApe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhY3RpdmVUb2tlblBhY2tzXCJ9KShMX25pbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfX18xKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicGFyc2VGaWx0ZXJzXCJ9KShMX25pbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfX18yKXtyZXR1cm4gTF9mb2xkcjEoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3BhY2tDbWQpe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIExfYmluZCgpKExfcGFja0NtZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9fXzMpe3JldHVybiBMX3Jlc3VsdCgpfSl9fSkoKSl9fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYXAoKShMX3VzZVRva2VuUGFjaykoTF9wYWNrcykpfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyZXNldFN0ZFRva2VuUGFja3NcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcInJlc2V0U3RkVG9rZW5QYWNrcyA9IGJpbmQgKGdldFZhbHVlICdzdGRUb2tlblBhY2tzJylcXG4gIFxcXFxzdGRzIC4gYmluZCAocmVzZXRUb2tlblBhY2tzIHN0ZHMpXFxuICAgIFxcXFxfIC4gc2V0VmFsdWUgJ2FjdGl2ZVRva2VuUGFja3MnIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic3RkVG9rZW5QYWNrc1wifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3Rkcyl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmVzZXRUb2tlblBhY2tzKCkoTF9zdGRzKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9fKXtyZXR1cm4gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWN0aXZlVG9rZW5QYWNrc1wifSkoTF9uaWwpfSl9fSkoKSl9KX19KSgpKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWRkU3RkVG9rZW5QYWNrc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWRkU3RkVG9rZW5QYWNrcyBtb3JlUGFja3MgPSBiaW5kIChnZXRWYWx1ZSAnc3RkVG9rZW5QYWNrcycpXFxuICBcXFxcc3RkcyAuIHNldFZhbHVlICdzdGRUb2tlblBhY2tzJyAoYXBwZW5kIHN0ZHMgbW9yZVBhY2tzKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9tb3JlUGFja3Mpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzdGRUb2tlblBhY2tzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9zdGRzKXtyZXR1cm4gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic3RkVG9rZW5QYWNrc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hcHBlbmQoKShMX3N0ZHMpKExfbW9yZVBhY2tzKSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImFkZFBhcnNlRmlsdGVyXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhZGRQYXJzZUZpbHRlciBmaWx0ID0gYmluZCAoZ2V0VmFsdWUgJ3BhcnNlRmlsdGVycycpXFxuICBcXFxcZmlsdGVycyAuIHNldFZhbHVlICdwYXJzZUZpbHRlcnMnIChhcHBlbmQgZmlsdGVycyAoY29ucyBmaWx0IG5pbCkpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2ZpbHQpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUZpbHRlcnNcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2ZpbHRlcnMpe3JldHVybiBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwYXJzZUZpbHRlcnNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYXBwZW5kKCkoTF9maWx0ZXJzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2ZpbHQpKExfbmlsKSl9fSkoKSkpfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkXCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkIGxhYmVsIHZhbHVlIGV4cHIgPSBsb2cgKHN0ckNhdCAoY29ucyBsYWJlbCAoY29ucyB2YWx1ZSBuaWwpKSkgZXhwclwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sYWJlbCl7cmV0dXJuIGZ1bmN0aW9uKExfdmFsdWUpe3JldHVybiBmdW5jdGlvbihMX2V4cHIpe3JldHVybiBMX2xvZygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyQ2F0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9sYWJlbCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF92YWx1ZSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfZXhwcil9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImRkXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkZCBsYWJlbCBhcmcgPSBkIGxhYmVsIGFyZyBhcmdcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGFiZWwpe3JldHVybiBmdW5jdGlvbihMX2FyZyl7cmV0dXJuIExfZCgpKExfbGFiZWwpKExfYXJnKShMX2FyZyl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWNyb0RlZnNcIn0pKExfbmlsKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInJlcXVpcmVkRmlsZXNcIn0pKExfbmlsKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInRva2VuUGFja3NcIn0pKExfbmlsKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcImFjdGl2ZVRva2VuUGFja3NcIn0pKExfbmlsKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInN0ZFRva2VuUGFja3NcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic3RkXCJ9KShMX25pbCkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZUb2tlblBhY2soKShmdW5jdGlvbigpe3JldHVybiBcInN0ZFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCIuXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIlxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXFxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXEBcIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiKFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCIpXCJ9KShMX25pbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfbmlsKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX3Jlc2V0U3RkVG9rZW5QYWNrcygpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9hZGRUb2tlbkdyb3VwKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJbXCJ9KShmdW5jdGlvbigpe3JldHVybiBcIl1cIn0pfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9hZGRUb2tlbigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwifFwifSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGlzdGlmeU9wXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsaXN0aWZ5T3Agb3AgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGlzVG9rZW5TdHJpbmcgaCAnfCdcXG4gICAgY29ucyB0IG5pbFxcbiAgICBjb25zIChjb25zIG9wIChjb25zIGggKGxpc3RpZnlPcCBvcCB0KSkpIG5pbFxcbiAgY29ucyAnbmlsJyBuaWxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb3Ape3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2lzVG9rZW5TdHJpbmcoKShMX2gpKGZ1bmN0aW9uKCl7cmV0dXJuIFwifFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF90KShMX25pbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfb3ApKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9saXN0aWZ5T3AoKShMX29wKShMX3QpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbmlsKSl9fSkoKSl9fX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibmlsXCJ9KShMX25pbCkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImxpc3RpZnlcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImxpc3RpZnkgbGlzdCA9IGxpc3RpZnlPcCAnY29ucycgbGlzdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9saXN0aWZ5T3AoKShmdW5jdGlvbigpe3JldHVybiBcImNvbnNcIn0pKExfbGlzdCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmTWFjcm8oKShmdW5jdGlvbigpe3JldHVybiBcIltcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfbGlzdGlmeSgpKExfaCl9fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsaXN0RmlsdGVyXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsaXN0RmlsdGVyIGNvZGUgPSBiaW5kIChnZXRWYWx1ZSAnbGlzdE1hY3JvcycpXFxuICBcXFxcbGlzdE1hY3JvcyAuIGZpbHRlckFwcGxpZXMgY29kZSBcXFxcbGlzdCAuIGxpc3QgXFxcXGggdCAuXFxuICAgIGFuZCAoaXNUb2tlbiBoKSAoY29udGFpbnMgbGlzdE1hY3JvcyAodG9rZW5TdHJpbmcgaCkpXFxuICAgICAgbGlzdEZpbHRlclRhaWwgbGlzdFxcbiAgICAgIGxpc3RcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY29kZSl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcImxpc3RNYWNyb3NcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3RNYWNyb3Mpe3JldHVybiBMX2ZpbHRlckFwcGxpZXMoKShMX2NvZGUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuKCkoTF9oKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250YWlucygpKExfbGlzdE1hY3JvcykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfaCkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xpc3RGaWx0ZXJUYWlsKCkoTF9saXN0KSl9fSkoKSkoTF9saXN0KX19KX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsaXN0RmlsdGVyVGFpbFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGlzdEZpbHRlclRhaWwgbGlzdCA9IGxpc3RcXG4gIFxcXFxoIHQgRCAuIGlzVG9rZW5TdHJpbmcgaCAnfCdcXG4gICAgPiAobGVuZ3RoIHQpIDJcXG4gICAgICBjb25zIGggKGNvbnMgKHJlbW92ZUxhc3QgdCkgKGNvbnMgKGxhc3QgdCkgbmlsKSlcXG4gICAgICBsaXN0XFxuICAgIGNvbnMgaCAobGlzdEZpbHRlclRhaWwgdClcXG4gIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9saXN0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9pc1Rva2VuU3RyaW5nKCkoTF9oKShmdW5jdGlvbigpe3JldHVybiBcInxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJHooKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xlbmd0aCgpKExfdCkpfX0pKCkpKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmVtb3ZlTGFzdCgpKExfdCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGFzdCgpKExfdCkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX2xpc3QpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGlzdEZpbHRlclRhaWwoKShMX3QpKX19KSgpKSl9fSkoKSl9fX0pfX0pKCkpKExfbmlsKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImZpbHRlckFwcGxpZXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImZpbHRlckFwcGxpZXMgY29kZSBmdW5jID0gaXNQYXJlbnMgY29kZVxcbiAgY29kZSBcXFxcc3RhcnQgZW5kIGNvbnRlbnRzIC4gcGFyZW5zIHN0YXJ0IGVuZCAoZmlsdGVyQXBwbGllcyBjb250ZW50cyBmdW5jKVxcbiAgaXNDb25zIGNvZGVcXG4gICAgXFxcXFxcXFxcXG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlckFwcGx5RWxlbWVudHMgY29kZSBmdW5jXFxuICAgICAgLlxcbiAgICAgIGFuZCAoaXNDb25zIGZpbHRlcmVkKSAoaXNCbG9ja1N0YXJ0IChoZWFkIGZpbHRlcmVkKSlcXG4gICAgICAgIGZpbHRlcmVkXFxuICAgICAgICBmdW5jIGZpbHRlcmVkXFxuICAgIGNvZGVcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY29kZSl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIExfaXNQYXJlbnMoKShMX2NvZGUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29kZSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RhcnQpe3JldHVybiBmdW5jdGlvbihMX2VuZCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udGVudHMpe3JldHVybiBMX3BhcmVucygpKExfc3RhcnQpKExfZW5kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZpbHRlckFwcGxpZXMoKShMX2NvbnRlbnRzKShMX2Z1bmMpKX19KSgpKX19fSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNDb25zKCkoTF9jb2RlKShmdW5jdGlvbigpe1xudmFyIExfZmlsdGVyZWQ7XG5cbkxfZmlsdGVyZWQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZpbHRlckFwcGx5RWxlbWVudHMoKShMX2NvZGUpKExfZnVuYykpfX0pKCk7XG5yZXR1cm4gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQ29ucygpKExfZmlsdGVyZWQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQmxvY2tTdGFydCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfZmlsdGVyZWQpKX19KSgpKSl9fSkoKSkoTF9maWx0ZXJlZCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mdW5jKCkoTF9maWx0ZXJlZCkpfX0pKCkpfSkoTF9jb2RlKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZmlsdGVyQXBwbHlFbGVtZW50c1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZmlsdGVyQXBwbHlFbGVtZW50cyBjb2RlIGZ1bmMgPSBjb2RlXFxuICBcXFxcaCB0IEQgLiBpc0Jsb2NrU3RhcnQgaFxcbiAgICBjb25zIGggKGZpbHRlckJvZHkgdCBmdW5jKVxcbiAgICBjb25zIChmaWx0ZXJBcHBsaWVzIGggZnVuYylcXG4gICAgICBhbmQgKGlzQ29ucyB0KSAoaXNCbG9ja1N0YXJ0IChoZWFkIHQpKVxcbiAgICAgICAgY29ucyAoZmlsdGVyQXBwbHlFbGVtZW50cyB0IGZ1bmMpIG5pbFxcbiAgICAgICAgZmlsdGVyQXBwbHlFbGVtZW50cyB0IGZ1bmNcXG4gIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gTF9jb2RlKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9pc0Jsb2NrU3RhcnQoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9maWx0ZXJCb2R5KCkoTF90KShMX2Z1bmMpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9maWx0ZXJBcHBsaWVzKCkoTF9oKShMX2Z1bmMpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FuZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNDb25zKCkoTF90KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc0Jsb2NrU3RhcnQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3QpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9maWx0ZXJBcHBseUVsZW1lbnRzKCkoTF90KShMX2Z1bmMpKX19KSgpKShMX25pbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZmlsdGVyQXBwbHlFbGVtZW50cygpKExfdCkoTF9mdW5jKSl9fSkoKSkpfX0pKCkpKX19KSgpKX19fSl9fSkoKSkoTF9uaWwpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImZpbHRlckJvZHlcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImZpbHRlckJvZHkgY29kZSBmdW5jID0gY29kZSBcXFxcaCB0IC4gY29ucyBoXFxuICBpc1Rva2VuU3RyaW5nIGggJy4nXFxuICAgIGZpbHRlckFwcGxpZXMgdCBmdW5jXFxuICAgIGZpbHRlckJvZHkgdCBmdW5jXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2NvZGUpe3JldHVybiBmdW5jdGlvbihMX2Z1bmMpe3JldHVybiBMX2NvZGUoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBMX2NvbnMoKShMX2gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNUb2tlblN0cmluZygpKExfaCkoZnVuY3Rpb24oKXtyZXR1cm4gXCIuXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZpbHRlckFwcGxpZXMoKShMX3QpKExfZnVuYykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZmlsdGVyQm9keSgpKExfdCkoTF9mdW5jKSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGlzdE1hY3Jvc1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJbXCJ9KShMX25pbCkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9hZGRQYXJzZUZpbHRlcigpKExfbGlzdEZpbHRlcil9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZlRva2VuUGFjaygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibGlzdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ8XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIj1cIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiW1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJdXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJvcltcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXVwifSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYW5kW1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJdXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb25jYXRbXCJ9KShmdW5jdGlvbigpe3JldHVybiBcIl1cIn0pKX19KSgpKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfbGlzdEZpbHRlcikoTF9uaWwpKX19KSgpKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2FkZFRva2VuR3JvdXAoKShmdW5jdGlvbigpe3JldHVybiBcIm9yW1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJdXCJ9KX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfYWRkVG9rZW5Hcm91cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYW5kW1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJdXCJ9KX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfYWRkVG9rZW5Hcm91cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY29uY2F0W1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJdXCJ9KX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJsaXN0TWFjcm9Gb2xkT3BcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcImxpc3RNYWNyb0ZvbGRPcCBvcCBlbXB0eUNhc2UgbGlzdCA9IGxpc3QgXFxcXGggdCAuIGZvbGRyXFxuICAgIFxcXFxjYXNlIHJlc3VsdCAuIFtvcCBjYXNlIHJlc3VsdF1cXG4gICAgZW1wdHlDYXNlXFxuICAgIGhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb3Ape3JldHVybiBmdW5jdGlvbihMX2VtcHR5Q2FzZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfZm9sZHIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Nhc2Upe3JldHVybiBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIExfY29ucygpKExfb3ApKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfY2FzZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9yZXN1bHQpKExfbmlsKSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpKExfZW1wdHlDYXNlKShMX2gpfX0pfX0pKCkpfX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmTWFjcm8oKShmdW5jdGlvbigpe3JldHVybiBcIm9yW1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9saXN0TWFjcm9Gb2xkT3AoKShmdW5jdGlvbigpe3JldHVybiBcIm9yXCJ9KShmdW5jdGlvbigpe3JldHVybiBcImZhbHNlXCJ9KShMX2xpc3QpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZk1hY3JvKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhbmRbXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2xpc3RNYWNyb0ZvbGRPcCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYW5kXCJ9KShmdW5jdGlvbigpe3JldHVybiBcInRydWVcIn0pKExfbGlzdCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmTWFjcm8oKShmdW5jdGlvbigpe3JldHVybiBcImNvbmNhdFtcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic3RyQ2F0XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImZsYXR0ZW5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbGlzdGlmeSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfbGlzdCkpfX0pKCkpKX19KSgpKShMX25pbCkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKExfbmlsKSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcImxpc3RNYWNyb3NcIn0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xtKXtyZXR1cm4gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb25jYXRbXCJ9KShMX2xtKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImluZml4XCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmZpeCBjb2RlID0gYmluZCAoZ2V0VmFsdWUgJ2luZml4UHJlY2VkZW5jZScpXFxuICBcXFxccHJlYyAuIGJpbmQgKGdldFZhbHVlICdpbmZpeFJpZ2h0QXNzb2NpYXRpdmUnKVxcbiAgICBcXFxccmlnaHQgLiBiaW5kIChnZXRWYWx1ZSAndG9rZW5Hcm91cHMnKVxcbiAgICAgIFxcXFxncm91cHMgLiBmaWx0ZXJBcHBsaWVzXFxuICAgICAgICBjb2RlXFxuICAgICAgICBcXFxcZXhwciAuIGluZml4UmVhcnJhbmdlIHByZWMgcmlnaHQgKG1hcCAoXFxcXGNlbGwgLiB0YWlsIGNlbGwpIGdyb3VwcykgZXhwclwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jb2RlKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5maXhQcmVjZWRlbmNlXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9wcmVjKXtyZXR1cm4gTF9iaW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9nZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5maXhSaWdodEFzc29jaWF0aXZlXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9yaWdodCl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcInRva2VuR3JvdXBzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9ncm91cHMpe3JldHVybiBMX2ZpbHRlckFwcGxpZXMoKShMX2NvZGUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZXhwcil7cmV0dXJuIExfaW5maXhSZWFycmFuZ2UoKShMX3ByZWMpKExfcmlnaHQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFwKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jZWxsKXtyZXR1cm4gTF90YWlsKCkoTF9jZWxsKX0pfX0pKCkpKExfZ3JvdXBzKSl9fSkoKSkoTF9leHByKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5maXhSZWFycmFuZ2VcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDR9KShmdW5jdGlvbigpe3JldHVybiBcImluZml4UmVhcnJhbmdlIHByZWMgcmlnaHQgY2xvc2VzIGxpc3QgPSBcXFxcXFxcXFxcbiAgbGVuID0gbGVuZ3RoIGxpc3RcXG4gIGhlYWQxID0gaGVhZCBsaXN0XFxuICB0YWlsMSA9IHRhaWwgbGlzdFxcbiAgaGVhZDIgPSBoZWFkIHRhaWwxXFxuICB0YWlsMiA9IHRhaWwgdGFpbDFcXG4gIGhlYWQzID0gaGVhZCB0YWlsMlxcbiAgb3BQcmVjID0gZ2V0UHJlYyBwcmVjIGhlYWQyXFxuICAuXFxuICA8IGxlbiAyXFxuICAgIGxpc3RcXG4gICAgaXNJbmZpeCBvcFByZWMgaGVhZDEgaGVhZDIgbGVuXFxuICAgICAgb3IgKD09IGxlbiAyKSAobm90IChpc0luZml4QXJnIGNsb3NlcyBoZWFkMykpXFxuICAgICAgICBbW2hlYWQyIGhlYWQxXSB8IHRhaWwyXVxcbiAgICAgICAgaW5maXhSZWFycmFuZ2UgcHJlYyByaWdodCBjbG9zZXMgKGFic29yYkFyZ3VtZW50IG9wUHJlYyBwcmVjIHJpZ2h0IGNsb3NlcyBoZWFkMSBoZWFkMiB0YWlsMiBoZWFkMyAoLSBsZW4gMikpXFxuICAgICAgW2hlYWQxIHwgaW5maXhSZWFycmFuZ2UgcHJlYyByaWdodCBjbG9zZXMgdGFpbDFdXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3ByZWMpe3JldHVybiBmdW5jdGlvbihMX3JpZ2h0KXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZXMpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfb3BQcmVjLCBMX2hlYWQzLCBMX3RhaWwyLCBMX2hlYWQyLCBMX3RhaWwxLCBMX2hlYWQxLCBMX2xlbjtcblxuTF9vcFByZWMgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFByZWMoKShMX3ByZWMpKExfaGVhZDIpKX19KSgpO1xuXG5MX2hlYWQzID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF90YWlsMikpfX0pKCk7XG5cbkxfdGFpbDIgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RhaWwoKShMX3RhaWwxKSl9fSkoKTtcblxuTF9oZWFkMiA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfdGFpbDEpKX19KSgpO1xuXG5MX3RhaWwxID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF9saXN0KSl9fSkoKTtcblxuTF9oZWFkMSA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfbGlzdCkpfX0pKCk7XG5cbkxfbGVuID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9sZW5ndGgoKShMX2xpc3QpKX19KSgpO1xucmV0dXJuIExfJHkoKShMX2xlbikoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc0luZml4KCkoTF9vcFByZWMpKExfaGVhZDEpKExfaGVhZDIpKExfbGVuKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kcCRwKCkoTF9sZW4pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9ub3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzSW5maXhBcmcoKShMX2Nsb3NlcykoTF9oZWFkMykpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2hlYWQyKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2hlYWQxKShMX25pbCkpfX0pKCkpKX19KSgpKShMX3RhaWwyKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pbmZpeFJlYXJyYW5nZSgpKExfcHJlYykoTF9yaWdodCkoTF9jbG9zZXMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYWJzb3JiQXJndW1lbnQoKShMX29wUHJlYykoTF9wcmVjKShMX3JpZ2h0KShMX2Nsb3NlcykoTF9oZWFkMSkoTF9oZWFkMikoTF90YWlsMikoTF9oZWFkMykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kXygpKExfbGVuKShmdW5jdGlvbigpe3JldHVybiAyfSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfaGVhZDEpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaW5maXhSZWFycmFuZ2UoKShMX3ByZWMpKExfcmlnaHQpKExfY2xvc2VzKShMX3RhaWwxKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0pKCl9fX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhYnNvcmJBcmd1bWVudFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gOX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWJzb3JiQXJndW1lbnQgb3BQcmVjIHByZWMgcmlnaHQgY2xvc2VzIGhlYWQxIGhlYWQyIHRhaWwyIGhlYWQzIGxlbiA9IFxcXFxcXFxcXFxuICB0YWlsMyA9IHRhaWwgdGFpbDJcXG4gIGhlYWQ0ID0gaGVhZCB0YWlsM1xcbiAgdGFpbDQgPSB0YWlsIHRhaWwzXFxuICBoZWFkNSA9IGhlYWQgdGFpbDRcXG4gIC5cXG4gIGluZml4U2hvdWxkRWF0TmV4dCBvcFByZWMgcHJlYyAoY29udGFpbnMgcmlnaHQgKHN0clRva2VuU3RyaW5nIGhlYWQyKSkgaGVhZDMgaGVhZDQgaGVhZDUgY2xvc2VzIGxlblxcbiAgICBbaGVhZDEgaGVhZDIgfCBhYnNvcmJBcmd1bWVudCAoZ2V0UHJlYyBwcmVjIGhlYWQ0KSBwcmVjIHJpZ2h0IGNsb3NlcyBoZWFkMyBoZWFkNCB0YWlsNCBoZWFkNSAoLSBsZW4gMildXFxuICAgIFtbaGVhZDIgaGVhZDEgaGVhZDNdIHwgdGFpbDNdXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29wUHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfcmlnaHQpe3JldHVybiBmdW5jdGlvbihMX2Nsb3Nlcyl7cmV0dXJuIGZ1bmN0aW9uKExfaGVhZDEpe3JldHVybiBmdW5jdGlvbihMX2hlYWQyKXtyZXR1cm4gZnVuY3Rpb24oTF90YWlsMil7cmV0dXJuIGZ1bmN0aW9uKExfaGVhZDMpe3JldHVybiBmdW5jdGlvbihMX2xlbil7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9oZWFkNSwgTF90YWlsNCwgTF9oZWFkNCwgTF90YWlsMztcblxuTF9oZWFkNSA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaGVhZCgpKExfdGFpbDQpKX19KSgpO1xuXG5MX3RhaWw0ID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF90YWlsMykpfX0pKCk7XG5cbkxfaGVhZDQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3RhaWwzKSl9fSkoKTtcblxuTF90YWlsMyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfdGFpbDIpKX19KSgpO1xucmV0dXJuIExfaW5maXhTaG91bGRFYXROZXh0KCkoTF9vcFByZWMpKExfcHJlYykoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250YWlucygpKExfcmlnaHQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyVG9rZW5TdHJpbmcoKShMX2hlYWQyKSl9fSkoKSkpfX0pKCkpKExfaGVhZDMpKExfaGVhZDQpKExfaGVhZDUpKExfY2xvc2VzKShMX2xlbikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oZWFkMSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oZWFkMikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hYnNvcmJBcmd1bWVudCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0UHJlYygpKExfcHJlYykoTF9oZWFkNCkpfX0pKCkpKExfcHJlYykoTF9yaWdodCkoTF9jbG9zZXMpKExfaGVhZDMpKExfaGVhZDQpKExfdGFpbDQpKExfaGVhZDUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJF8oKShMX2xlbikoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2hlYWQyKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2hlYWQxKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2hlYWQzKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkoTF90YWlsMykpfX0pKCkpfSkoKX19fX19fX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNJbmZpeEFyZ1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNJbmZpeEFyZyBjbG9zZXMgaXRlbSA9IG9yW1xcbiAgaXNQYXJlbnMgaXRlbVxcbiAgaXNDb25zIGl0ZW1cXG4gIGFuZFtcXG4gICAgaXNUb2tlbiBpdGVtXFxuICAgIG5vdCAoY29udGFpbnMgY2xvc2VzICh0b2tlblN0cmluZyBpdGVtKSlcXG4gICAgbm90IChpc0Jsb2NrU3RhcnQgaXRlbSldXVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jbG9zZXMpe3JldHVybiBmdW5jdGlvbihMX2l0ZW0pe3JldHVybiBMX29yKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1BhcmVucygpKExfaXRlbSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfb3IoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQ29ucygpKExfaXRlbSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfb3IoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FuZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNUb2tlbigpKExfaXRlbSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9ub3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnRhaW5zKCkoTF9jbG9zZXMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX2l0ZW0pKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9ub3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQmxvY2tTdGFydCgpKExfaXRlbSkpfX0pKCkpKX19KSgpKShMX3RydWUpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfZmFsc2UpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNJbmZpeFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gNH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXNJbmZpeCBvcFByZWMgaGVhZDEgaGVhZDIgbGVuID0gYW5kW1xcbiAgPiBsZW4gMVxcbiAgPiBvcFByZWMgLTFcXG4gIGlzSW5maXhBcmcgbmlsIGhlYWQxXVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vcFByZWMpe3JldHVybiBmdW5jdGlvbihMX2hlYWQxKXtyZXR1cm4gZnVuY3Rpb24oTF9oZWFkMil7cmV0dXJuIGZ1bmN0aW9uKExfbGVuKXtyZXR1cm4gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyR6KCkoTF9sZW4pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyR6KCkoTF9vcFByZWMpKGZ1bmN0aW9uKCl7cmV0dXJuIC0xfSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc0luZml4QXJnKCkoTF9uaWwpKExfaGVhZDEpKX19KSgpKShMX3RydWUpKX19KSgpKSl9fSkoKSl9fX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJnZXRQcmVjXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJnZXRQcmVjIHByZWMgdG9rZW4gPSBcXFxcXFxcXFxcbiAgc3RyID0gdG9rZW5TdHJpbmcgdG9rZW5cXG4gIC5cXG4gIGlzVG9rZW4gdG9rZW5cXG4gICAgZmluZEluZGV4IChcXFxcbGV2ZWwgLiBjb250YWlucyBsZXZlbCBzdHIpIHByZWNcXG4gICAgLTFcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcHJlYyl7cmV0dXJuIGZ1bmN0aW9uKExfdG9rZW4pe3JldHVybiAoZnVuY3Rpb24oKXtcblxudmFyIExfc3RyO1xuXG5MX3N0ciA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX3Rva2VuKSl9fSkoKTtcbnJldHVybiBMX2lzVG9rZW4oKShMX3Rva2VuKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZpbmRJbmRleCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGV2ZWwpe3JldHVybiBMX2NvbnRhaW5zKCkoTF9sZXZlbCkoTF9zdHIpfSl9fSkoKSkoTF9wcmVjKSl9fSkoKSkoZnVuY3Rpb24oKXtyZXR1cm4gLTF9KX0pKCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5maXhTaG91bGRFYXROZXh0XCJ9KShmdW5jdGlvbigpe3JldHVybiA4fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmZpeFNob3VsZEVhdE5leHQgb3BQcmVjIHByZWMgaXNSaWdodCBjdXJBcmcgbmV4dE9wIG5leHRBcmcgY2xvc2VzIGxlbiA9IFxcXFxcXFxcXFxuICBuZXh0UHJlYyA9IGdldFByZWMgcHJlYyBuZXh0T3BcXG4gIC5cXG4gIGFuZFtcXG4gICAgPiBsZW4gMlxcbiAgICBpc0luZml4IG5leHRQcmVjIGN1ckFyZyBuZXh0T3AgbGVuXFxuICAgIG9yICg+IG9wUHJlYyBuZXh0UHJlYykgKGFuZCAoPT0gb3BQcmVjIG5leHRQcmVjKSBpc1JpZ2h0KVxcbiAgICBpc0luZml4QXJnIGNsb3NlcyBuZXh0QXJnXVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vcFByZWMpe3JldHVybiBmdW5jdGlvbihMX3ByZWMpe3JldHVybiBmdW5jdGlvbihMX2lzUmlnaHQpe3JldHVybiBmdW5jdGlvbihMX2N1ckFyZyl7cmV0dXJuIGZ1bmN0aW9uKExfbmV4dE9wKXtyZXR1cm4gZnVuY3Rpb24oTF9uZXh0QXJnKXtyZXR1cm4gZnVuY3Rpb24oTF9jbG9zZXMpe3JldHVybiBmdW5jdGlvbihMX2xlbil7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9uZXh0UHJlYztcblxuTF9uZXh0UHJlYyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZ2V0UHJlYygpKExfcHJlYykoTF9uZXh0T3ApKX19KSgpO1xucmV0dXJuIExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8keigpKExfbGVuKShmdW5jdGlvbigpe3JldHVybiAyfSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc0luZml4KCkoTF9uZXh0UHJlYykoTF9jdXJBcmcpKExfbmV4dE9wKShMX2xlbikpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9vcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJHooKShMX29wUHJlYykoTF9uZXh0UHJlYykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8kcCRwKCkoTF9vcFByZWMpKExfbmV4dFByZWMpKX19KSgpKShMX2lzUmlnaHQpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzSW5maXhBcmcoKShMX2Nsb3NlcykoTF9uZXh0QXJnKSl9fSkoKSkoTF90cnVlKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0pKCl9fX19fX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZk1hY3JvKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI6XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImNvbnNcIn0pKExfbGlzdCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpcHJlY1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaXByZWMgPSBbWycqJyAnLycgJyUnXSBbJysnICctJ10gWyc6J10gWyc8JyAnPicgJzw9JyAnPj0nXSBbJz09JyAnIT0nXV1cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiKlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCIvXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIiVcIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIitcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLVwifSkoTF9uaWwpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI6XCJ9KShMX25pbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiPFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI+XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIjw9XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIj49XCJ9KShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiPT1cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiIT1cIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJpZ2h0QXNzb2NcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcInJpZ2h0QXNzb2MgPSBbJzonXVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI6XCJ9KShMX25pbCkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9zZXRWYWx1ZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5maXhQcmVjZWRlbmNlXCJ9KShMX2lwcmVjKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfc2V0VmFsdWUoKShmdW5jdGlvbigpe3JldHVybiBcImluZml4UmlnaHRBc3NvY2lhdGl2ZVwifSkoTF9yaWdodEFzc29jKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmVG9rZW5QYWNrKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmZpeFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mbGF0dGVuKCkoTF9pcHJlYykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfbmlsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2luZml4KShMX25pbCkpfX0pKCkpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfdXNlVG9rZW5QYWNrKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmZpeFwifSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZk1hY3JvKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkb1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9oYW5kbGVEbygpKExfbGlzdCkoTF9mYWxzZSkoTF9pZCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJoYW5kbGVEb1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaGFuZGxlRG8gbGlzdCBpbkxldCBjb250ID0gbGlzdFxcbiAgXFxcXGggdCBEIC4gaXNOaWwgdFxcbiAgICBjb250IChpbkxldCBbJy4nIGhdIFtoXSlcXG4gICAgZG9DbGF1c2UgKHN0cmlwUGFyZW5zIGgpIGggbmlsIGluTGV0IFxcXFxuZXdJbkxldCBjaGFpbiAuXFxuICAgICAgaGFuZGxlRG8gdCBuZXdJbkxldCBcXFxccmVzdCAuIGNvbnQgKGNoYWluIHJlc3QpXFxuICBjb250IG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9pbkxldCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfaXNOaWwoKShMX3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29udCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaW5MZXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfaCkoTF9uaWwpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9kb0NsYXVzZSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyaXBQYXJlbnMoKShMX2gpKX19KSgpKShMX2gpKExfbmlsKShMX2luTGV0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX25ld0luTGV0KXtyZXR1cm4gZnVuY3Rpb24oTF9jaGFpbil7cmV0dXJuIExfaGFuZGxlRG8oKShMX3QpKExfbmV3SW5MZXQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIExfY29udCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY2hhaW4oKShMX3Jlc3QpKX19KSgpKX0pfX0pKCkpfX0pfX0pKCkpKX19KSgpKX19fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250KCkoTF9uaWwpKX19KSgpKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZG9DbGF1c2VcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDV9KShmdW5jdGlvbigpe3JldHVybiBcImRvQ2xhdXNlIHN0ZXBwaW5nQ2xhdXNlIGNsYXVzZSBwcmVmaXggaW5MZXQgY29udCA9IFxcXFxcXFxcXFxuICBtYWtlQmluZCB2YXIgbW9uYWQgPSBjb250IGZhbHNlIFxcXFxyZXN0IC4gaW5MZXQgKGNvbnMgJy4nKSBpZFxcbiAgICBbJ2JpbmQnIG1vbmFkIFsnXFxcXFxcXFwnIHZhciAnLicgfCByZXN0XV1cXG4gIC5cXG4gIGlzQ29ucyBzdGVwcGluZ0NsYXVzZVxcbiAgICBzdGVwcGluZ0NsYXVzZSBcXFxcaCB0IC4gaXNUb2tlblN0cmluZyBoICc9J1xcbiAgICAgIGluTGV0XFxuICAgICAgICBjb250IHRydWUgXFxcXHJlc3QgLiBbY2xhdXNlIHwgcmVzdF1cXG4gICAgICAgIGNvbnQgdHJ1ZSBcXFxccmVzdCAuIFsnXFxcXFxcXFxcXFxcXFxcXCcgY2xhdXNlIHwgcmVzdF1cXG4gICAgICBpc1Rva2VuU3RyaW5nIGggJzwtJ1xcbiAgICAgICAgaXNOaWwgdFxcbiAgICAgICAgICBwYXJzZUVyciBcXFwiTm8gbW9uYWQgaW4gZG8tY2xhdXNlOiBcXFwiIGNsYXVzZVxcbiAgICAgICAgICBwcmVmaXhcXG4gICAgICAgICAgICBcXFxccGggcHQgRCAuIGlzTmlsIHB0XFxuICAgICAgICAgICAgICBtYWtlQmluZCAoaXNOaWwgcHJlZml4ICdfJyAoaGVhZCBwcmVmaXgpKSB0XFxuICAgICAgICAgICAgICBwYXJzZUVyciBcXFwiTW9yZSB0aGFuIG9uZSB2YXJpYWJsZSBpbiBkby1jbGF1c2U6IFxcXCIgY2xhdXNlXFxuICAgICAgICAgICAgbWFrZUJpbmQgJ18nIHRcXG4gICAgICAgIGRvQ2xhdXNlIHQgY2xhdXNlIFtoIHwgcHJlZml4XSBpbkxldCBjb250XFxuICAgIG1ha2VCaW5kICdfJyBjbGF1c2VcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfc3RlcHBpbmdDbGF1c2Upe3JldHVybiBmdW5jdGlvbihMX2NsYXVzZSl7cmV0dXJuIGZ1bmN0aW9uKExfcHJlZml4KXtyZXR1cm4gZnVuY3Rpb24oTF9pbkxldCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIChmdW5jdGlvbigpe1xuXG52YXIgTF9tYWtlQmluZDtcblxuTF9tYWtlQmluZCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdmFyKXtyZXR1cm4gZnVuY3Rpb24oTF9tb25hZCl7cmV0dXJuIExfY29udCgpKExfZmFsc2UpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIExfaW5MZXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKX19KSgpKShMX2lkKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImJpbmRcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfbW9uYWQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF92YXIpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLlwifSkoTF9yZXN0KSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9KX19KSgpKX19KX19KSgpO1xucmV0dXJuIExfaXNDb25zKCkoTF9zdGVwcGluZ0NsYXVzZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zdGVwcGluZ0NsYXVzZSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfaXNUb2tlblN0cmluZygpKExfaCkoZnVuY3Rpb24oKXtyZXR1cm4gXCI9XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2luTGV0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb250KCkoTF90cnVlKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBMX2NvbnMoKShMX2NsYXVzZSkoTF9yZXN0KX0pfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnQoKShMX3RydWUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXFxcXFxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfY2xhdXNlKShMX3Jlc3QpKX19KSgpKX0pfX0pKCkpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuU3RyaW5nKCkoTF9oKShmdW5jdGlvbigpe3JldHVybiBcIjwtXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzTmlsKCkoTF90KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJObyBtb25hZCBpbiBkby1jbGF1c2U6IFwifSkoTF9jbGF1c2UpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3ByZWZpeCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcGgpe3JldHVybiBmdW5jdGlvbihMX3B0KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9pc05pbCgpKExfcHQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFrZUJpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzTmlsKCkoTF9wcmVmaXgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiX1wifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF9wcmVmaXgpKX19KSgpKSl9fSkoKSkoTF90KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUVycigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiTW9yZSB0aGFuIG9uZSB2YXJpYWJsZSBpbiBkby1jbGF1c2U6IFwifSkoTF9jbGF1c2UpKX19KSgpKX19fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWtlQmluZCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiX1wifSkoTF90KSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2RvQ2xhdXNlKCkoTF90KShMX2NsYXVzZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oKShMX3ByZWZpeCkpfX0pKCkpKExfaW5MZXQpKExfY29udCkpfX0pKCkpKX19KSgpKX19KX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWtlQmluZCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiX1wifSkoTF9jbGF1c2UpKX19KSgpKX0pKCl9fX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZlRva2VuUGFjaygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZG9cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiPC1cIn0pKExfbmlsKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9uaWwpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKExfbmlsKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2FkZFN0ZFRva2VuUGFja3MoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImxpc3RcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5maXhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZG9cIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfcmVzZXRTdGRUb2tlblBhY2tzKCl9XSk7XG4iLCIoZnVuY3Rpb24oZ2xvYmFsKXsvKiFcbiBMby1EYXNoIDAuNy4wIGxvZGFzaC5jb20vbGljZW5zZVxuIFVuZGVyc2NvcmUuanMgMS4zLjMgZ2l0aHViLmNvbS9kb2N1bWVudGNsb3VkL3VuZGVyc2NvcmUvYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cbjsoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBzKGUpe3JldHVybiBuZXcgbyhlKX1mdW5jdGlvbiBvKGUpe2lmKGUmJmUuX193cmFwcGVkX18pcmV0dXJuIGU7dGhpcy5fX3dyYXBwZWRfXz1lfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gZnVuY3Rpb24obixyLGkpe3JldHVybiBlLmNhbGwodCxuLHIsaSl9fWZ1bmN0aW9uIGEoZSx0LG4pe3R8fCh0PTApO3ZhciByPWUubGVuZ3RoLGk9ci10Pj0obnx8Vykscz1pP3t9OmU7aWYoaSlmb3IodmFyIG89dC0xOysrbzxyOyluPWVbb10rXCJcIiwoYXQuY2FsbChzLG4pP3Nbbl06c1tuXT1bXSkucHVzaChlW29dKTtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaSl7dmFyIG49ZStcIlwiO3JldHVybiBhdC5jYWxsKHMsbikmJi0xPEwoc1tuXSxlKX1yZXR1cm4tMTxMKHMsZSx0KX19ZnVuY3Rpb24gZihlLG4pe3ZhciByPWUuYixpPW4uYixlPWUuYSxuPW4uYTtpZihlIT09bil7aWYoZT5ufHxlPT09dClyZXR1cm4gMTtpZihlPG58fG49PT10KXJldHVybi0xfXJldHVybiByPFxuaT8tMToxfWZ1bmN0aW9uIGwoZSx0LG4pe2Z1bmN0aW9uIHIoKXt2YXIgdT1hcmd1bWVudHMsYT1zP3RoaXM6dDtyZXR1cm4gaXx8KGU9dFtvXSksbi5sZW5ndGgmJih1PXUubGVuZ3RoP24uY29uY2F0KGN0LmNhbGwodSkpOm4pLHRoaXMgaW5zdGFuY2VvZiByPyh2LnByb3RvdHlwZT1lLnByb3RvdHlwZSxhPW5ldyB2LCh1PWUuYXBwbHkoYSx1KSkmJiR0W3R5cGVvZiB1XT91OmEpOmUuYXBwbHkoYSx1KX12YXIgaT1FKGUpLHM9IW4sbz1lO3JldHVybiBzJiYobj10KSxyfWZ1bmN0aW9uIGMoKXtmb3IodmFyIGUsdCxuLHM9LTEsbz1hcmd1bWVudHMubGVuZ3RoLGE9e2U6XCJcIixmOlwiXCIsajpcIlwiLHE6XCJcIixjOntkOlwiXCJ9LG06e2Q6XCJcIn19OysrczxvOylmb3IodCBpbiBlPWFyZ3VtZW50c1tzXSxlKW49KG49ZVt0XSk9PXI/XCJcIjpuLC9kfGkvLnRlc3QodCk/KFwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj17YjpuLGw6bn0pLGEuY1t0XT1uLmJ8fFwiXCIsYS5tW3RdPW4ubHx8XCJcIik6YVt0XT1uO2U9XG5hLmEsdD0vXlteLF0rLy5leGVjKGUpWzBdLG49YS5zLGEuZz10LGEuaD1NdCxhLms9UnQsYS5uPVB0LGEucD1ydCxhLnI9YS5yIT09aSxhLnM9bj09cj9VdDpuLGEubz09ciYmKGEubz1qdCksYS5mfHwoYS5mPVwiaWYoIVwiK3QrXCIpcmV0dXJuIHVcIik7aWYoXCJlXCIhPXR8fCFhLmMuaSlhLmM9cjt0PVwiXCIsYS5zJiYodCs9XCIndXNlIHN0cmljdCc7XCIpLHQrPVwidmFyIGosQSxrPVwiK2EuZytcIix1XCIsYS5qJiYodCs9XCI9XCIrYS5qKSx0Kz1cIjtcIithLmYrXCI7XCIrYS5xK1wiO1wiLGEuYyYmKHQrPVwidmFyIGw9ay5sZW5ndGg7aj0tMTtcIixhLm0mJih0Kz1cImlmKGw9PT0rbCl7XCIpLGEubyYmKHQrPVwiaWYoei5jYWxsKGspPT14KXtrPWsuc3BsaXQoJycpfVwiKSx0Kz1hLmMuZCtcIjt3aGlsZSgrK2o8bCl7QT1rW2pdO1wiK2EuYy5pK1wifVwiLGEubSYmKHQrPVwifVwiKSk7aWYoYS5tKXthLmM/dCs9XCJlbHNle1wiOmEubiYmKHQrPVwidmFyIGw9ay5sZW5ndGg7aj0tMTtpZihsJiZPKGspKXt3aGlsZSgrK2o8bCl7QT1rW2orPScnXTtcIitcbmEubS5pK1wifX1lbHNle1wiKSxhLmh8fCh0Kz1cInZhciB2PXR5cGVvZiBrPT0nZnVuY3Rpb24nJiZyLmNhbGwoaywncHJvdG90eXBlJyk7XCIpO2lmKGEuayYmYS5yKXQrPVwidmFyIG89LTEscD1YW3R5cGVvZiBrXT9tKGspOltdLGw9cC5sZW5ndGg7XCIrYS5tLmQrXCI7d2hpbGUoKytvPGwpe2o9cFtvXTtcIixhLmh8fCh0Kz1cImlmKCEodiYmaj09J3Byb3RvdHlwZScpKXtcIiksdCs9XCJBPWtbal07XCIrYS5tLmkrXCJcIixhLmh8fCh0Kz1cIn1cIik7ZWxzZXt0Kz1hLm0uZCtcIjtmb3IoaiBpbiBrKXtcIjtpZighYS5ofHxhLnIpdCs9XCJpZihcIixhLmh8fCh0Kz1cIiEodiYmaj09J3Byb3RvdHlwZScpXCIpLCFhLmgmJmEuciYmKHQrPVwiJiZcIiksYS5yJiYodCs9XCJoLmNhbGwoayxqKVwiKSx0Kz1cIil7XCI7dCs9XCJBPWtbal07XCIrYS5tLmkrXCI7XCI7aWYoIWEuaHx8YS5yKXQrPVwifVwifXQrPVwifVwiO2lmKGEuaCl7dCs9XCJ2YXIgZz1rLmNvbnN0cnVjdG9yO1wiO2ZvcihuPTA7Nz5uO24rKyl0Kz1cImo9J1wiK2EucFtuXStcIic7aWYoXCJcbixcImNvbnN0cnVjdG9yXCI9PWEucFtuXSYmKHQrPVwiIShnJiZnLnByb3RvdHlwZT09PWspJiZcIiksdCs9XCJoLmNhbGwoayxqKSl7QT1rW2pdO1wiK2EubS5pK1wifVwifWlmKGEuY3x8YS5uKXQrPVwifVwifXJldHVybiB0Kz1hLmUrXCI7cmV0dXJuIHVcIixGdW5jdGlvbihcIkQsRSxGLGMsSSxmLEosaCxpLE0sTyxRLFMsVCxXLFgsbSxyLHcseCx6XCIsXCJ2YXIgRz1mdW5jdGlvbihcIitlK1wiKXtcIit0K1wifTtyZXR1cm4gR1wiKSh6dCxSLEQsdSxmLHV0LGxuLGF0LFAsTCx3LHNuLEUsb24sQ3QsJHQsZ3QsbHQsY3QsTHQsaHQpfWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gb3RbdF19ZnVuY3Rpb24gcChlKXtyZXR1cm5cIlxcXFxcIitKdFtlXX1mdW5jdGlvbiBkKGUpe3JldHVybiBYdFtlXX1mdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIG0oZSx0KXtpZihlJiZWLnRlc3QodCkpcmV0dXJuXCI8ZSUtXCIrdCtcIiU+XCI7dmFyIG49b3QubGVuZ3RoO3JldHVybiBvdFtuXT1cIicrX19lKFwiK3QrXCIpKydcIixpdCtuK3N0fWZ1bmN0aW9uIGdcbihlLHQsbixpKXtyZXR1cm4gaT8oZT1vdC5sZW5ndGgsb3RbZV09XCInO1wiK2krXCI7X19wKz0nXCIsaXQrZStzdCk6dD9tKHIsdCk6eShyLG4pfWZ1bmN0aW9uIHkoZSx0KXtpZihlJiZWLnRlc3QodCkpcmV0dXJuXCI8ZSU9XCIrdCtcIiU+XCI7dmFyIG49b3QubGVuZ3RoO3JldHVybiBvdFtuXT1cIicrKChfX3Q9KFwiK3QrXCIpKT09bnVsbD8nJzpfX3QpKydcIixpdCtuK3N0fWZ1bmN0aW9uIGIoZSl7cmV0dXJuIFZ0W2VdfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIGh0LmNhbGwoZSk9PUV0fWZ1bmN0aW9uIEUoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX1mdW5jdGlvbiBTKGUsdCl7dmFyIG49aTtpZighZXx8XCJvYmplY3RcIiE9dHlwZW9mIGV8fCF0JiZ3KGUpKXJldHVybiBuO3ZhciByPWUuY29uc3RydWN0b3I7cmV0dXJuKCFGdHx8XCJmdW5jdGlvblwiPT10eXBlb2YgZS50b1N0cmluZ3x8XCJzdHJpbmdcIiE9dHlwZW9mIChlK1wiXCIpKSYmKCFFKHIpfHxyIGluc3RhbmNlb2Ygcik/RHQ/KGxuKGUsZnVuY3Rpb24oXG5lLHQscil7cmV0dXJuIG49IWF0LmNhbGwocix0KSxpfSksbj09PWkpOihsbihlLGZ1bmN0aW9uKGUsdCl7bj10fSksbj09PWl8fGF0LmNhbGwoZSxuKSk6bn1mdW5jdGlvbiB4KGUsdCxzLG8sdSl7aWYoZT09cilyZXR1cm4gZTtzJiYodD1pKTtpZihzPSR0W3R5cGVvZiBlXSl7dmFyIGE9aHQuY2FsbChlKTtpZighV3RbYV18fEh0JiZ3KGUpKXJldHVybiBlO3ZhciBmPWE9PVN0LHM9Znx8KGE9PUN0P29uKGUsbik6cyl9aWYoIXN8fCF0KXJldHVybiBzP2Y/Y3QuY2FsbChlKTpmbih7fSxlKTplO3M9ZS5jb25zdHJ1Y3Rvcjtzd2l0Y2goYSl7Y2FzZSB4dDpyZXR1cm4gbmV3IHMoZT09bik7Y2FzZSBUdDpyZXR1cm4gbmV3IHMoK2UpO2Nhc2UgTnQ6Y2FzZSBMdDpyZXR1cm4gbmV3IHMoZSk7Y2FzZSBrdDpyZXR1cm4gcyhlLnNvdXJjZSxHLmV4ZWMoZSkpfW98fChvPVtdKSx1fHwodT1bXSk7Zm9yKGE9by5sZW5ndGg7YS0tOylpZihvW2FdPT1lKXJldHVybiB1W2FdO3ZhciBsPWY/cyhcbmE9ZS5sZW5ndGgpOnt9O28ucHVzaChlKSx1LnB1c2gobCk7aWYoZilmb3IoZj0tMTsrK2Y8YTspbFtmXT14KGVbZl0sdCxyLG8sdSk7ZWxzZSBjbihlLGZ1bmN0aW9uKGUsbil7bFtuXT14KGUsdCxyLG8sdSl9KTtyZXR1cm4gbH1mdW5jdGlvbiBUKGUsdCxzLG8pe2lmKGU9PXJ8fHQ9PXIpcmV0dXJuIGU9PT10O2lmKGU9PT10KXJldHVybiAwIT09ZXx8MS9lPT0xL3Q7aWYoJHRbdHlwZW9mIGVdfHwkdFt0eXBlb2YgdF0pZT1lLl9fd3JhcHBlZF9ffHxlLHQ9dC5fX3dyYXBwZWRfX3x8dDt2YXIgdT1odC5jYWxsKGUpO2lmKHUhPWh0LmNhbGwodCkpcmV0dXJuIGk7c3dpdGNoKHUpe2Nhc2UgeHQ6Y2FzZSBUdDpyZXR1cm4rZT09K3Q7Y2FzZSBOdDpyZXR1cm4gZSE9K2U/dCE9K3Q6MD09ZT8xL2U9PTEvdDplPT0rdDtjYXNlIGt0OmNhc2UgTHQ6cmV0dXJuIGU9PXQrXCJcIn12YXIgYT16dFt1XTtpZihIdCYmIWEmJihhPXcoZSkpJiYhdyh0KXx8IWEmJih1IT1DdHx8RnQmJihcImZ1bmN0aW9uXCIhPXR5cGVvZiBcbmUudG9TdHJpbmcmJlwic3RyaW5nXCI9PXR5cGVvZiAoZStcIlwiKXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC50b1N0cmluZyYmXCJzdHJpbmdcIj09dHlwZW9mICh0K1wiXCIpKSkpcmV0dXJuIGk7c3x8KHM9W10pLG98fChvPVtdKTtmb3IodT1zLmxlbmd0aDt1LS07KWlmKHNbdV09PWUpcmV0dXJuIG9bdV09PXQ7dmFyIHU9LTEsZj1uLGw9MDtzLnB1c2goZSksby5wdXNoKHQpO2lmKGEpe2w9ZS5sZW5ndGg7aWYoZj1sPT10Lmxlbmd0aClmb3IoO2wtLSYmKGY9VChlW2xdLHRbbF0scyxvKSk7KTtyZXR1cm4gZn1hPWUuY29uc3RydWN0b3IsZj10LmNvbnN0cnVjdG9yO2lmKGEhPWYmJighRShhKXx8IShhIGluc3RhbmNlb2YgYSYmRShmKSYmZiBpbnN0YW5jZW9mIGYpKSlyZXR1cm4gaTtmb3IodmFyIGMgaW4gZSlpZihhdC5jYWxsKGUsYykmJihsKyssIWF0LmNhbGwodCxjKXx8IVQoZVtjXSx0W2NdLHMsbykpKXJldHVybiBpO2ZvcihjIGluIHQpaWYoYXQuY2FsbCh0LGMpJiYhKGwtLSkpcmV0dXJuIGlcbjtpZihNdClmb3IoOzc+Kyt1OylpZihjPXJ0W3VdLGF0LmNhbGwoZSxjKSYmKCFhdC5jYWxsKHQsYyl8fCFUKGVbY10sdFtjXSxzLG8pKSlyZXR1cm4gaTtyZXR1cm4gbn1mdW5jdGlvbiBOKGUsdCxuLHIpe2lmKCFlKXJldHVybiBuO3ZhciBpPWUubGVuZ3RoLHM9Mz5hcmd1bWVudHMubGVuZ3RoO3ImJih0PXUodCxyKSk7aWYoaT09PStpKXt2YXIgbz1qdCYmaHQuY2FsbChlKT09THQ/ZS5zcGxpdChcIlwiKTplO2ZvcihpJiZzJiYobj1vWy0taV0pO2ktLTspbj10KG4sb1tpXSxpLGUpO3JldHVybiBufW89dm4oZSk7Zm9yKChpPW8ubGVuZ3RoKSYmcyYmKG49ZVtvWy0taV1dKTtpLS07KXM9b1tpXSxuPXQobixlW3NdLHMsZSk7cmV0dXJuIG59ZnVuY3Rpb24gQyhlLHQsbil7aWYoZSlyZXR1cm4gdD09cnx8bj9lWzBdOmN0LmNhbGwoZSwwLHQpfWZ1bmN0aW9uIGsoZSx0KXt2YXIgbj1bXTtpZighZSlyZXR1cm4gbjtmb3IodmFyIHIsaT0tMSxzPWUubGVuZ3RoOysraTxzOylyPWVbaV0sXG5zbihyKT9mdC5hcHBseShuLHQ/cjprKHIpKTpuLnB1c2gocik7cmV0dXJuIG59ZnVuY3Rpb24gTChlLHQsbil7aWYoIWUpcmV0dXJuLTE7dmFyIHI9LTEsaT1lLmxlbmd0aDtpZihuKXtpZihcIm51bWJlclwiIT10eXBlb2YgbilyZXR1cm4gcj1NKGUsdCksZVtyXT09PXQ/cjotMTtyPSgwPm4/eXQoMCxpK24pOm4pLTF9Zm9yKDsrK3I8aTspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9ZnVuY3Rpb24gQShlLHQsbil7dmFyIHI9LUluZmluaXR5LGk9cjtpZighZSlyZXR1cm4gaTt2YXIgcz0tMSxvPWUubGVuZ3RoO2lmKCF0KXtmb3IoOysrczxvOyllW3NdPmkmJihpPWVbc10pO3JldHVybiBpfWZvcihuJiYodD11KHQsbikpOysrczxvOyluPXQoZVtzXSxzLGUpLG4+ciYmKHI9bixpPWVbc10pO3JldHVybiBpfWZ1bmN0aW9uIE8oZSx0LG4pe3JldHVybiBlP2N0LmNhbGwoZSx0PT1yfHxuPzE6dCk6W119ZnVuY3Rpb24gTShlLHQsbixyKXtpZighZSlyZXR1cm4gMDt2YXIgaT0wLFxucz1lLmxlbmd0aDtpZihuKXtyJiYobj1EKG4scikpO2Zvcih0PW4odCk7aTxzOylyPWkrcz4+PjEsbihlW3JdKTx0P2k9cisxOnM9cn1lbHNlIGZvcig7aTxzOylyPWkrcz4+PjEsZVtyXTx0P2k9cisxOnM9cjtyZXR1cm4gaX1mdW5jdGlvbiBfKGUsdCxuLHIpe3ZhciBzPVtdO2lmKCFlKXJldHVybiBzO3ZhciBvPS0xLGE9ZS5sZW5ndGgsZj1bXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiYocj1uLG49dCx0PWkpO2ZvcihuP3ImJihuPXUobixyKSk6bj1QOysrbzxhOylpZihyPW4oZVtvXSxvLGUpLHQ/IW98fGZbZi5sZW5ndGgtMV0hPT1yOjA+TChmLHIpKWYucHVzaChyKSxzLnB1c2goZVtvXSk7cmV0dXJuIHN9ZnVuY3Rpb24gRChlLHQpe3JldHVybiBxdHx8cHQmJjI8YXJndW1lbnRzLmxlbmd0aD9wdC5jYWxsLmFwcGx5KHB0LGFyZ3VtZW50cyk6bChlLHQsY3QuY2FsbChhcmd1bWVudHMsMikpfWZ1bmN0aW9uIFAoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gSChlKXtDbihobihlKSxmdW5jdGlvbihcbnQpe3ZhciByPXNbdF09ZVt0XTtvLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3ZhciBlPVt0aGlzLl9fd3JhcHBlZF9fXTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmZnQuYXBwbHkoZSxhcmd1bWVudHMpLGU9ci5hcHBseShzLGUpLHRoaXMuX19jaGFpbl9fJiYoZT1uZXcgbyhlKSxlLl9fY2hhaW5fXz1uKSxlfX0pfXZhciBuPSEwLHI9bnVsbCxpPSExLEIsaixGLEkscT1cIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmZXhwb3J0cyYmKFwib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmZ2xvYmFsPT1nbG9iYWwuZ2xvYmFsJiYoZT1nbG9iYWwpLGV4cG9ydHMpLFI9QXJyYXkucHJvdG90eXBlLFU9T2JqZWN0LnByb3RvdHlwZSx6PTAsVz0zMCxYPWUuXyxWPS9bLT8rPSF+KiUmXjw+fHsoXFwvXXxcXFtcXER8XFxiKD86ZGVsZXRlfGlufGluc3RhbmNlb2Z8bmV3fHR5cGVvZnx2b2lkKVxcYi8sJD0vJig/OmFtcHxsdHxndHxxdW90fCN4MjcpOy9nLEo9L1xcYl9fcFxcKz0nJzsvZyxLPS9cXGIoX19wXFwrPSknJ1xcKy9nXG4sUT0vKF9fZVxcKC4qP1xcKXxcXGJfX3RcXCkpXFwrJyc7L2csRz0vXFx3KiQvLFk9Lyg/Ol9fZXxfX3Q9KVxcKFxccyooPyFbXFxkXFxzXCInXXx0aGlzXFwuKS9nLFo9UmVnRXhwKFwiXlwiKyhVLnZhbHVlT2YrXCJcIikucmVwbGFjZSgvWy4qKz9ePSE6JHt9KCl8W1xcXVxcL1xcXFxdL2csXCJcXFxcJCZcIikucmVwbGFjZSgvdmFsdWVPZnxmb3IgW15cXF1dKy9nLFwiLis/XCIpK1wiJFwiKSxldD0vX190b2tlbihcXGQrKV9fL2csdHQ9L1smPD5cIiddL2csbnQ9L1snXFxuXFxyXFx0XFx1MjAyOFxcdTIwMjlcXFxcXS9nLHJ0PVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpLGl0PVwiX190b2tlblwiLHN0PVwiX19cIixvdD1bXSx1dD1SLmNvbmNhdCxhdD1VLmhhc093blByb3BlcnR5LGZ0PVIucHVzaCxsdD1VLnByb3BlcnR5SXNFbnVtZXJhYmxlLGN0PVIuc2xpY2UsaHQ9VS50b1N0cmluZyxwdD1aLnRlc3QoXG5wdD1jdC5iaW5kKSYmcHQsZHQ9TWF0aC5mbG9vcix2dD1aLnRlc3QodnQ9QXJyYXkuaXNBcnJheSkmJnZ0LG10PWUuaXNGaW5pdGUsZ3Q9Wi50ZXN0KGd0PU9iamVjdC5rZXlzKSYmZ3QseXQ9TWF0aC5tYXgsYnQ9TWF0aC5taW4sd3Q9TWF0aC5yYW5kb20sRXQ9XCJbb2JqZWN0IEFyZ3VtZW50c11cIixTdD1cIltvYmplY3QgQXJyYXldXCIseHQ9XCJbb2JqZWN0IEJvb2xlYW5dXCIsVHQ9XCJbb2JqZWN0IERhdGVdXCIsTnQ9XCJbb2JqZWN0IE51bWJlcl1cIixDdD1cIltvYmplY3QgT2JqZWN0XVwiLGt0PVwiW29iamVjdCBSZWdFeHBdXCIsTHQ9XCJbb2JqZWN0IFN0cmluZ11cIixBdD1lLmNsZWFyVGltZW91dCxPdD1lLnNldFRpbWVvdXQsTXQsX3QsRHQsUHQ9bjsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy54PTF9dmFyIHQ9ezA6MSxsZW5ndGg6MX0sbj1bXTtlLnByb3RvdHlwZT17dmFsdWVPZjoxLHk6MX07Zm9yKHZhciByIGluIG5ldyBlKW4ucHVzaChyKTtmb3IociBpbiBhcmd1bWVudHMpUHQ9IXI7TXQ9ND5cbihuK1wiXCIpLmxlbmd0aCxEdD1cInhcIiE9blswXSxfdD0obi5zcGxpY2UuY2FsbCh0LDAsMSksdFswXSl9KSgxKTt2YXIgSHQ9IXcoYXJndW1lbnRzKSxCdD1cInhcIiE9Y3QuY2FsbChcInhcIilbMF0sanQ9XCJ4eFwiIT1cInhcIlswXStPYmplY3QoXCJ4XCIpWzBdO3RyeXt2YXIgRnQ9KFwiW29iamVjdCBPYmplY3RdXCIsaHQuY2FsbChlLmRvY3VtZW50fHwwKT09Q3QpfWNhdGNoKEl0KXt9dmFyIHF0PXB0JiYvXFxufE9wZXJhLy50ZXN0KHB0K2h0LmNhbGwoZS5vcGVyYSkpLFJ0PWd0JiYvXi4rJHx0cnVlLy50ZXN0KGd0KyEhZS5hdHRhY2hFdmVudCksVXQ9IXF0LHp0PXt9O3p0W3h0XT16dFtUdF09enRbXCJbb2JqZWN0IEZ1bmN0aW9uXVwiXT16dFtOdF09enRbQ3RdPXp0W2t0XT1pLHp0W0V0XT16dFtTdF09enRbTHRdPW47dmFyIFd0PXt9O1d0W0V0XT1XdFtcIltvYmplY3QgRnVuY3Rpb25dXCJdPWksV3RbU3RdPVd0W3h0XT1XdFtUdF09V3RbTnRdPVd0W0N0XT1XdFtrdF09V3RbTHRdPW47dmFyIFh0PXtcIiZcIlxuOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImI3gyNztcIn0sVnQ9e1wiJmFtcDtcIjpcIiZcIixcIiZsdDtcIjpcIjxcIixcIiZndDtcIjpcIj5cIixcIiZxdW90O1wiOidcIicsXCImI3gyNztcIjpcIidcIn0sJHQ9e1wiYm9vbGVhblwiOmksXCJmdW5jdGlvblwiOm4sb2JqZWN0Om4sbnVtYmVyOmksc3RyaW5nOmksXCJ1bmRlZmluZWRcIjppLHVua25vd246bn0sSnQ9e1wiXFxcXFwiOlwiXFxcXFwiLFwiJ1wiOlwiJ1wiLFwiXFxuXCI6XCJuXCIsXCJcXHJcIjpcInJcIixcIlx0XCI6XCJ0XCIsXCJcXHUyMDI4XCI6XCJ1MjAyOFwiLFwiXFx1MjAyOVwiOlwidTIwMjlcIn07cy50ZW1wbGF0ZVNldHRpbmdzPXtlc2NhcGU6LzwlLShbXFxzXFxTXSs/KSU+L2csZXZhbHVhdGU6LzwlKFtcXHNcXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcXHNcXFNdKz8pJT4vZyx2YXJpYWJsZTpcIlwifTt2YXIgS3Q9e2E6XCJlLGQseVwiLGo6XCJlXCIscTpcImlmKCFkKWQ9aTtlbHNlIGlmKHkpZD1jKGQseSlcIixpOlwiaWYoZChBLGosZSk9PT1mYWxzZSlyZXR1cm4gdVwifSxRdD17ajpcInt9XCJcbixxOlwidmFyIHE7aWYodHlwZW9mIGQhPSdmdW5jdGlvbicpe3ZhciBoaD1kO2Q9ZnVuY3Rpb24oQSl7cmV0dXJuIEFbaGhdfX1lbHNlIGlmKHkpZD1jKGQseSlcIixpOlwicT1kKEEsaixlKTsoaC5jYWxsKHUscSk/dVtxXSsrOnVbcV09MSlcIn0sR3Q9e2o6XCJ0cnVlXCIsaTpcImlmKCFkKEEsaixlKSlyZXR1cm4hdVwifSxZdD17cjppLHM6aSxhOlwiblwiLGo6XCJuXCIscTpcImZvcih2YXIgYT0xLGI9YXJndW1lbnRzLmxlbmd0aDthPGI7YSsrKXtpZihrPWFyZ3VtZW50c1thXSl7XCIsaTpcInVbal09QVwiLGU6XCJ9fVwifSxadD17ajpcIltdXCIsaTpcImQoQSxqLGUpJiZ1LnB1c2goQSlcIn0sZW49e3E6XCJpZih5KWQ9YyhkLHkpXCJ9LHRuPXtpOntsOkt0Lml9fSxubj17ajpcIlwiLGY6XCJpZighZSlyZXR1cm5bXVwiLGQ6e2I6XCJ1PUFycmF5KGwpXCIsbDpcInU9XCIrKFJ0P1wiQXJyYXkobClcIjpcIltdXCIpfSxpOntiOlwidVtqXT1kKEEsaixlKVwiLGw6XCJ1XCIrKFJ0P1wiW29dPVwiOlwiLnB1c2hcIikrXCIoZChBLGosZSkpXCJ9fSxybj17cjpcbmksYTpcIm4sZCx5XCIsajpcInt9XCIscTpcInZhciBSPXR5cGVvZiBkPT0nZnVuY3Rpb24nO2lmKCFSKXt2YXIgdD1mLmFwcGx5KEUsYXJndW1lbnRzKX1lbHNlIGlmKHkpZD1jKGQseSlcIixpOlwiaWYoUj8hZChBLGosbik6TSh0LGopPDApdVtqXT1BXCJ9O0h0JiYodz1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJiEhYXQuY2FsbChlLFwiY2FsbGVlXCIpfSk7dmFyIHNuPXZ0fHxmdW5jdGlvbihlKXtyZXR1cm4gaHQuY2FsbChlKT09U3R9O0UoL3gvKSYmKEU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT1odC5jYWxsKGUpfSk7dmFyIG9uPSR0Ll9fcHJvdG9fXyE9VT9TOmZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIGk7dmFyIG49ZS52YWx1ZU9mLHI9XCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKHI9bi5fX3Byb3RvX18pJiZyLl9fcHJvdG9fXztyZXR1cm4gcj9lPT1yfHxlLl9fcHJvdG9fXz09ciYmKHR8fCF3KGUpKTpTKGUpfSx1bj1jKHthOlwiblwiLGo6XCJbXVwiLGk6XCJ1LnB1c2goailcIlxufSksYW49YyhZdCx7aTpcImlmKHVbal09PW51bGwpXCIrWXQuaX0pLGZuPWMoWXQpLGxuPWMoS3QsZW4sdG4se3I6aX0pLGNuPWMoS3QsZW4sdG4pLGhuPWMoe3I6aSxhOlwiblwiLGo6XCJbXVwiLGk6XCJpZihTKEEpKXUucHVzaChqKVwiLGU6XCJ1LnNvcnQoKVwifSkscG49Yyh7YTpcIm5cIixqOlwie31cIixpOlwidVtBXT1qXCJ9KSxkbj1jKHthOlwiQVwiLGo6XCJ0cnVlXCIscTpcInZhciBIPXouY2FsbChBKSxsPUEubGVuZ3RoO2lmKERbSF1cIisoSHQ/XCJ8fE8oQSlcIjpcIlwiKStcInx8KEg9PVcmJmw9PT0rbCYmUyhBLnNwbGljZSkpKXJldHVybiFsXCIsaTp7bDpcInJldHVybiBmYWxzZVwifX0pLHZuPWd0P2Z1bmN0aW9uKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVyblwiZnVuY3Rpb25cIj09dCYmbHQuY2FsbChlLFwicHJvdG90eXBlXCIpP3VuKGUpOmUmJiR0W3RdP2d0KGUpOltdfTp1bixtbj1jKFl0LHthOlwibixjYyxOXCIscTpcInZhciBiLFAsZGQsZWUsQz1hcmd1bWVudHMsYT0wO2lmKE49PVQpe2I9MjtkZD1DWzNdO2VlPUNbNF19ZWxzZXtiPUMubGVuZ3RoO2RkPVtdO2VlPVtdfXdoaWxlKCsrYTxiKXtpZihrPUNbYV0pe1wiXG4saTpcImlmKChjYz1BKSYmKChQPVEoY2MpKXx8VChjYykpKXt2YXIgSz1mYWxzZSxmZj1kZC5sZW5ndGg7d2hpbGUoZmYtLSlpZihLPWRkW2ZmXT09Y2MpYnJlYWs7aWYoSyl7dVtqXT1lZVtmZl19ZWxzZXtkZC5wdXNoKGNjKTtlZS5wdXNoKEE9KEE9dVtqXSkmJlA/KFEoQSk/QTpbXSk6KFQoQSk/QTp7fSkpO3Vbal09RyhBLGNjLFQsZGQsZWUpfX1lbHNlIGlmKGNjIT1udWxsKXVbal09Y2NcIn0pLGduPWMocm4pLHluPWMoe2E6XCJuXCIsajpcIltdXCIsaTpcInVcIisoUnQ/XCJbb109XCI6XCIucHVzaFwiKStcIihbaixBXSlcIn0pLGJuPWMocm4se3E6XCJpZih0eXBlb2YgZCE9J2Z1bmN0aW9uJyl7dmFyIHEsdD1mLmFwcGx5KEUsYXJndW1lbnRzKSxsPXQubGVuZ3RoO2ZvcihqPTE7ajxsO2orKyl7cT10W2pdO2lmKHEgaW4gbil1W3FdPW5bcV19fWVsc2V7aWYoeSlkPWMoZCx5KVwiLGk6XCJpZihkKEEsaixuKSl1W2pdPUFcIixlOlwifVwifSksd249Yyh7YTpcIm5cIixqOlwiW11cIixpOlwidS5wdXNoKEEpXCJ9KSxFbj1cbmMoe2E6XCJlLGdnXCIsajpcImZhbHNlXCIsbzppLGQ6e2I6XCJpZih6LmNhbGwoZSk9PXgpcmV0dXJuIGUuaW5kZXhPZihnZyk+LTFcIn0saTpcImlmKEE9PT1nZylyZXR1cm4gdHJ1ZVwifSksU249YyhLdCxRdCkseG49YyhLdCxHdCksVG49YyhLdCxadCksTm49YyhLdCxlbix7ajpcIlwiLGk6XCJpZihkKEEsaixlKSlyZXR1cm4gQVwifSksQ249YyhLdCxlbiksa249YyhLdCxRdCx7aTpcInE9ZChBLGosZSk7KGguY2FsbCh1LHEpP3VbcV06dVtxXT1bXSkucHVzaChBKVwifSksTG49Yyhubix7YTpcImUsVVwiLHE6XCJ2YXIgQz13LmNhbGwoYXJndW1lbnRzLDIpLFI9dHlwZW9mIFU9PSdmdW5jdGlvbidcIixpOntiOlwidVtqXT0oUj9VOkFbVV0pLmFwcGx5KEEsQylcIixsOlwidVwiKyhSdD9cIltvXT1cIjpcIi5wdXNoXCIpK1wiKChSP1U6QVtVXSkuYXBwbHkoQSxDKSlcIn19KSxBbj1jKEt0LG5uKSxPbj1jKG5uLHthOlwiZSxhYVwiLGk6e2I6XCJ1W2pdPUFbYWFdXCIsbDpcInVcIisoUnQ/XCJbb109XCI6XCIucHVzaFwiKStcIihBW2FhXSlcIn1cbn0pLE1uPWMoe2E6XCJlLGQsQix5XCIsajpcIkJcIixxOlwidmFyIFY9YXJndW1lbnRzLmxlbmd0aDwzO2lmKHkpZD1jKGQseSlcIixkOntiOlwiaWYoVil1PWtbKytqXVwifSxpOntiOlwidT1kKHUsQSxqLGUpXCIsbDpcInU9Vj8oVj1mYWxzZSxBKTpkKHUsQSxqLGUpXCJ9fSksX249YyhLdCxadCx7aTpcIiFcIitadC5pfSksRG49YyhLdCxHdCx7ajpcImZhbHNlXCIsaTpHdC5pLnJlcGxhY2UoXCIhXCIsXCJcIil9KSxQbj1jKEt0LFF0LG5uLHtpOntiOlwidVtqXT17YTpkKEEsaixlKSxiOmosYzpBfVwiLGw6XCJ1XCIrKFJ0P1wiW29dPVwiOlwiLnB1c2hcIikrXCIoe2E6ZChBLGosZSksYjpqLGM6QX0pXCJ9LGU6XCJ1LnNvcnQoSSk7bD11Lmxlbmd0aDt3aGlsZShsLS0pdVtsXT11W2xdLmNcIn0pLEhuPWMoWnQse2E6XCJlLFpcIixxOlwidmFyIHQ9W107SihaLGZ1bmN0aW9uKEEscSl7dC5wdXNoKHEpfSk7dmFyIGJiPXQubGVuZ3RoXCIsaTpcImZvcih2YXIgcSxZPXRydWUscz0wO3M8YmI7cysrKXtxPXRbc107aWYoIShZPUFbcV09PT1aW3FdKSlicmVha31ZJiZ1LnB1c2goQSlcIlxufSksQm49Yyh7cjppLHM6aSxhOlwiblwiLGo6XCJuXCIscTpcInZhciBMPWFyZ3VtZW50cyxsPUwubGVuZ3RoO2lmKGw+MSl7Zm9yKHZhciBqPTE7ajxsO2orKyl1W0xbal1dPUYodVtMW2pdXSx1KTtyZXR1cm4gdX1cIixpOlwiaWYoUyh1W2pdKSl1W2pdPUYodVtqXSx1KVwifSk7cy5WRVJTSU9OPVwiMC43LjBcIixzLmFmdGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDE+ZT90KCk6ZnVuY3Rpb24oKXtpZigxPi0tZSlyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxzLmJpbmQ9RCxzLmJpbmRBbGw9Qm4scy5jaGFpbj1mdW5jdGlvbihlKXtyZXR1cm4gZT1uZXcgbyhlKSxlLl9fY2hhaW5fXz1uLGV9LHMuY2xvbmU9eCxzLmNvbXBhY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9W107aWYoIWUpcmV0dXJuIHQ7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGg7KytuPHI7KWVbbl0mJnQucHVzaChlW25dKTtyZXR1cm4gdH0scy5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbihcbil7Zm9yKHZhciB0PWFyZ3VtZW50cyxuPWUubGVuZ3RoO24tLTspdD1bZVtuXS5hcHBseSh0aGlzLHQpXTtyZXR1cm4gdFswXX19LHMuY29udGFpbnM9RW4scy5jb3VudEJ5PVNuLHMuZGVib3VuY2U9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoKXthPXIsbnx8KG89ZS5hcHBseSh1LHMpKX12YXIgcyxvLHUsYTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1uJiYhYTtyZXR1cm4gcz1hcmd1bWVudHMsdT10aGlzLEF0KGEpLGE9T3QoaSx0KSxyJiYobz1lLmFwcGx5KHUscykpLG99fSxzLmRlZmF1bHRzPWFuLHMuZGVmZXI9ZnVuY3Rpb24oZSl7dmFyIG49Y3QuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIE90KGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxuKX0sMSl9LHMuZGVsYXk9ZnVuY3Rpb24oZSxuKXt2YXIgcj1jdC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gT3QoZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LHIpfSxuKX0scy5kaWZmZXJlbmNlPWZ1bmN0aW9uKGUpe1xudmFyIHQ9W107aWYoIWUpcmV0dXJuIHQ7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGgsaT11dC5hcHBseSh0LGFyZ3VtZW50cyksaT1hKGkscik7KytuPHI7KWkoZVtuXSl8fHQucHVzaChlW25dKTtyZXR1cm4gdH0scy5lc2NhcGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PXI/XCJcIjooZStcIlwiKS5yZXBsYWNlKHR0LGQpfSxzLmV2ZXJ5PXhuLHMuZXh0ZW5kPWZuLHMuZmlsdGVyPVRuLHMuZmluZD1ObixzLmZpcnN0PUMscy5mbGF0dGVuPWsscy5mb3JFYWNoPUNuLHMuZm9ySW49bG4scy5mb3JPd249Y24scy5mdW5jdGlvbnM9aG4scy5ncm91cEJ5PWtuLHMuaGFzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/YXQuY2FsbChlLHQpOml9LHMuaWRlbnRpdHk9UCxzLmluZGV4T2Y9TCxzLmluaXRpYWw9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlP2N0LmNhbGwoZSwwLC0odD09cnx8bj8xOnQpKTpbXX0scy5pbnRlcnNlY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9W107aWYoIWUpcmV0dXJuIHQ7dmFyIG5cbixyPWFyZ3VtZW50cy5sZW5ndGgsaT1bXSxzPS0xLG89ZS5sZW5ndGg7ZTpmb3IoOysrczxvOylpZihuPWVbc10sMD5MKHQsbikpe2Zvcih2YXIgdT0xO3U8cjt1KyspaWYoIShpW3VdfHwoaVt1XT1hKGFyZ3VtZW50c1t1XSkpKShuKSljb250aW51ZSBlO3QucHVzaChuKX1yZXR1cm4gdH0scy5pbnZlcnQ9cG4scy5pbnZva2U9TG4scy5pc0FyZ3VtZW50cz13LHMuaXNBcnJheT1zbixzLmlzQm9vbGVhbj1mdW5jdGlvbihlKXtyZXR1cm4gZT09PW58fGU9PT1pfHxodC5jYWxsKGUpPT14dH0scy5pc0VsZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/MT09PWUubm9kZVR5cGU6aX0scy5pc0VtcHR5PWRuLHMuaXNFcXVhbD1ULHMuaXNGaW5pdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG10KGUpJiZodC5jYWxsKGUpPT1OdH0scy5pc0Z1bmN0aW9uPUUscy5pc05hTj1mdW5jdGlvbihlKXtyZXR1cm4gaHQuY2FsbChlKT09TnQmJmUhPStlfSxzLmlzTnVsbD1mdW5jdGlvbihlKXtyZXR1cm4gZT09PVxucn0scy5pc09iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4gZT8kdFt0eXBlb2YgZV06aX0scy5pc1VuZGVmaW5lZD1mdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LHMua2V5cz12bixzLmxhc3Q9ZnVuY3Rpb24oZSx0LG4pe2lmKGUpe3ZhciBpPWUubGVuZ3RoO3JldHVybiB0PT1yfHxuP2VbaS0xXTpjdC5jYWxsKGUsLXR8fGkpfX0scy5sYXN0SW5kZXhPZj1mdW5jdGlvbihlLHQsbil7aWYoIWUpcmV0dXJuLTE7dmFyIHI9ZS5sZW5ndGg7Zm9yKG4mJlwibnVtYmVyXCI9PXR5cGVvZiBuJiYocj0oMD5uP3l0KDAscituKTpidChuLHItMSkpKzEpO3ItLTspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9LHMubGF0ZUJpbmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbCh0LGUsY3QuY2FsbChhcmd1bWVudHMsMikpfSxzLm1hcD1BbixzLm1heD1BLHMubWVtb2l6ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O3JldHVybiBmdW5jdGlvbigpe3ZhciByPXQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cylcbjphcmd1bWVudHNbMF07cmV0dXJuIGF0LmNhbGwobixyKT9uW3JdOm5bcl09ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxzLm1lcmdlPW1uLHMubWluPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1JbmZpbml0eSxpPXI7aWYoIWUpcmV0dXJuIGk7dmFyIHM9LTEsbz1lLmxlbmd0aDtpZighdCl7Zm9yKDsrK3M8bzspZVtzXTxpJiYoaT1lW3NdKTtyZXR1cm4gaX1mb3IobiYmKHQ9dSh0LG4pKTsrK3M8bzspbj10KGVbc10scyxlKSxuPHImJihyPW4saT1lW3NdKTtyZXR1cm4gaX0scy5taXhpbj1ILHMubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBlLl89WCx0aGlzfSxzLm9iamVjdD1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybnt9O2Zvcih2YXIgbj0tMSxyPWUubGVuZ3RoLGk9e307KytuPHI7KXQ/aVtlW25dXT10W25dOmlbZVtuXVswXV09ZVtuXVsxXTtyZXR1cm4gaX0scy5vbWl0PWduLHMub25jZT1mdW5jdGlvbihlKXt2YXIgdCxzPWk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHM/XG50OihzPW4sdD1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlPXIsdCl9fSxzLnBhaXJzPXluLHMucGFydGlhbD1mdW5jdGlvbihlKXtyZXR1cm4gbChlLGN0LmNhbGwoYXJndW1lbnRzLDEpKX0scy5waWNrPWJuLHMucGx1Y2s9T24scy5yYW5kb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09ciYmdD09cj93dCgpOihlPStlfHwwLHQ9PXImJih0PWUsZT0wKSxlK2R0KHd0KCkqKCgrdHx8MCktZSsxKSkpfSxzLnJhbmdlPWZ1bmN0aW9uKGUsdCxuKXtlPStlfHwwLG49K258fDEsdD09ciYmKHQ9ZSxlPTApO2Zvcih2YXIgaT0tMSx0PXl0KDAsTWF0aC5jZWlsKCh0LWUpL24pKSxzPUFycmF5KHQpOysraTx0OylzW2ldPWUsZSs9bjtyZXR1cm4gc30scy5yZWR1Y2U9TW4scy5yZWR1Y2VSaWdodD1OLHMucmVqZWN0PV9uLHMucmVzdD1PLHMucmVzdWx0PWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIHI7dmFyIG49ZVt0XTtyZXR1cm4gRShuKT9lW3RdKCk6bn0scy5zaHVmZmxlPWZ1bmN0aW9uKFxuZSl7aWYoIWUpcmV0dXJuW107Zm9yKHZhciB0LG49LTEscj1lLmxlbmd0aCxpPUFycmF5KHIpOysrbjxyOyl0PWR0KHd0KCkqKG4rMSkpLGlbbl09aVt0XSxpW3RdPWVbbl07cmV0dXJuIGl9LHMuc2l6ZT1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gMDt2YXIgdD1lLmxlbmd0aDtyZXR1cm4gdD09PSt0P3Q6dm4oZSkubGVuZ3RofSxzLnNvbWU9RG4scy5zb3J0Qnk9UG4scy5zb3J0ZWRJbmRleD1NLHMudGFwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQoZSksZX0scy50ZW1wbGF0ZT1mdW5jdGlvbihlLHQsbil7bnx8KG49e30pO3ZhciBlPWUrXCJcIixvLHU7bz1uLmVzY2FwZTt2YXIgYT1uLmV2YWx1YXRlLGY9bi5pbnRlcnBvbGF0ZSxsPXMudGVtcGxhdGVTZXR0aW5ncyxjPW49bi52YXJpYWJsZXx8bC52YXJpYWJsZTtvPT1yJiYobz1sLmVzY2FwZSksYT09ciYmKGE9bC5ldmFsdWF0ZXx8aSksZj09ciYmKGY9bC5pbnRlcnBvbGF0ZSksbyYmKGU9ZS5yZXBsYWNlKG8sbSkpLGYmJihlPWVcbi5yZXBsYWNlKGYseSkpLGEhPUImJihCPWEsST1SZWdFeHAoXCI8ZSUtKFtcXFxcc1xcXFxTXSs/KSU+fDxlJT0oW1xcXFxzXFxcXFNdKz8pJT5cIisoYT9cInxcIithLnNvdXJjZTpcIlwiKSxcImdcIikpLG89b3QubGVuZ3RoLGU9ZS5yZXBsYWNlKEksZyksbz1vIT1vdC5sZW5ndGgsZT1cIl9fcCArPSAnXCIrZS5yZXBsYWNlKG50LHApLnJlcGxhY2UoZXQsaCkrXCInO1wiLG90Lmxlbmd0aD0wLGN8fChuPWp8fFwib2JqXCIsbz9lPVwid2l0aChcIituK1wiKXtcIitlK1wifVwiOihuIT1qJiYoaj1uLEY9UmVnRXhwKFwiKFxcXFwoXFxcXHMqKVwiK24rXCJcXFxcLlwiK24rXCJcXFxcYlwiLFwiZ1wiKSksZT1lLnJlcGxhY2UoWSxcIiQmXCIrbitcIi5cIikucmVwbGFjZShGLFwiJDFfX2RcIikpKSxlPShvP2UucmVwbGFjZShKLFwiXCIpOmUpLnJlcGxhY2UoSyxcIiQxXCIpLnJlcGxhY2UoUSxcIiQxO1wiKSxlPVwiZnVuY3Rpb24oXCIrbitcIil7XCIrKGM/XCJcIjpuK1wifHwoXCIrbitcIj17fSk7XCIpK1widmFyIF9fdCxfX3A9JycsX19lPV8uZXNjYXBlXCIrKG8/XCIsX19qPUFycmF5LnByb3RvdHlwZS5qb2luO2Z1bmN0aW9uIHByaW50KCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpfVwiXG46KGM/XCJcIjpcIixfX2Q9XCIrbitcIi5cIituK1wifHxcIituKStcIjtcIikrZStcInJldHVybiBfX3B9XCI7dHJ5e3U9RnVuY3Rpb24oXCJfXCIsXCJyZXR1cm4gXCIrZSkocyl9Y2F0Y2goZCl7dGhyb3cgZC5zb3VyY2U9ZSxkfXJldHVybiB0P3UodCk6KHUuc291cmNlPWUsdSl9LHMudGhyb3R0bGU9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7YT1uZXcgRGF0ZSx1PXIscz1lLmFwcGx5KG8saSl9dmFyIGkscyxvLHUsYT0wO3JldHVybiBmdW5jdGlvbigpe3ZhciByPW5ldyBEYXRlLGY9dC0oci1hKTtyZXR1cm4gaT1hcmd1bWVudHMsbz10aGlzLDA+PWY/KGE9cixzPWUuYXBwbHkobyxpKSk6dXx8KHU9T3QobixmKSksc319LHMudGltZXM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPS0xO2lmKG4pZm9yKDsrK3I8ZTspdC5jYWxsKG4scik7ZWxzZSBmb3IoOysrcjxlOyl0KHIpfSxzLnRvQXJyYXk9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuW107dmFyIHQ9ZS5sZW5ndGg7cmV0dXJuIHQ9PT0rdD8oQnQ/aHQuXG5jYWxsKGUpPT1MdDpcInN0cmluZ1wiPT10eXBlb2YgZSk/ZS5zcGxpdChcIlwiKTpjdC5jYWxsKGUpOnduKGUpfSxzLnVuZXNjYXBlPWZ1bmN0aW9uKGUpe3JldHVybiBlPT1yP1wiXCI6KGUrXCJcIikucmVwbGFjZSgkLGIpfSxzLnVuaW9uPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPS0xLHQ9W10sbj11dC5hcHBseSh0LGFyZ3VtZW50cykscj1uLmxlbmd0aDsrK2U8cjspMD5MKHQsbltlXSkmJnQucHVzaChuW2VdKTtyZXR1cm4gdH0scy51bmlxPV8scy51bmlxdWVJZD1mdW5jdGlvbihlKXt2YXIgdD16Kys7cmV0dXJuIGU/ZSt0OnR9LHMudmFsdWVzPXduLHMud2hlcmU9SG4scy53aXRob3V0PWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2lmKCFlKXJldHVybiB0O2Zvcih2YXIgbj0tMSxyPWUubGVuZ3RoLGk9YShhcmd1bWVudHMsMSwyMCk7KytuPHI7KWkoZVtuXSl8fHQucHVzaChlW25dKTtyZXR1cm4gdH0scy53cmFwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49W2VdO3JldHVybiBhcmd1bWVudHNcbi5sZW5ndGgmJmZ0LmFwcGx5KG4sYXJndW1lbnRzKSx0LmFwcGx5KHRoaXMsbil9fSxzLnppcD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm5bXTtmb3IodmFyIHQ9LTEsbj1BKE9uKGFyZ3VtZW50cyxcImxlbmd0aFwiKSkscj1BcnJheShuKTsrK3Q8bjspclt0XT1Pbihhcmd1bWVudHMsdCk7cmV0dXJuIHJ9LHMuYWxsPXhuLHMuYW55PURuLHMuY29sbGVjdD1BbixzLmRldGVjdD1ObixzLmRyb3A9TyxzLmVhY2g9Q24scy5mb2xkbD1NbixzLmZvbGRyPU4scy5oZWFkPUMscy5pbmNsdWRlPUVuLHMuaW5qZWN0PU1uLHMubWV0aG9kcz1obixzLnNlbGVjdD1UbixzLnRhaWw9TyxzLnRha2U9QyxzLnVuaXF1ZT1fLENuKHtEYXRlOlR0LE51bWJlcjpOdCxSZWdFeHA6a3QsU3RyaW5nOkx0fSxmdW5jdGlvbihlLHQpe3NbXCJpc1wiK3RdPWZ1bmN0aW9uKHQpe3JldHVybiBodC5jYWxsKHQpPT1lfX0pLG8ucHJvdG90eXBlPXMucHJvdG90eXBlLEgocyksby5wcm90b3R5cGUuY2hhaW49ZnVuY3Rpb24oXG4pe3JldHVybiB0aGlzLl9fY2hhaW5fXz1uLHRoaXN9LG8ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX193cmFwcGVkX199LENuKFwicG9wIHB1c2ggcmV2ZXJzZSBzaGlmdCBzb3J0IHNwbGljZSB1bnNoaWZ0XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUpe3ZhciB0PVJbZV07by5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fd3JhcHBlZF9fO3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKSxfdCYmZS5sZW5ndGg9PT0wJiZkZWxldGUgZVswXSx0aGlzLl9fY2hhaW5fXyYmKGU9bmV3IG8oZSksZS5fX2NoYWluX189biksZX19KSxDbihbXCJjb25jYXRcIixcImpvaW5cIixcInNsaWNlXCJdLGZ1bmN0aW9uKGUpe3ZhciB0PVJbZV07by5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT10LmFwcGx5KHRoaXMuX193cmFwcGVkX18sYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5fX2NoYWluX18mJihlPW5ldyBvKGUpLGUuX19jaGFpbl9fPW4pLGV9fSksdHlwZW9mIFxuZGVmaW5lPT1cImZ1bmN0aW9uXCImJnR5cGVvZiBkZWZpbmUuYW1kPT1cIm9iamVjdFwiJiZkZWZpbmUuYW1kPyhlLl89cyxkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gc30pKTpxP1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZSYmbW9kdWxlLmV4cG9ydHM9PXE/KG1vZHVsZS5leHBvcnRzPXMpLl89czpxLl89czplLl89c30pKHRoaXMpO1xufSkoc2VsZikiLCIoZnVuY3Rpb24oZ2xvYmFsKXsvKipcbiAqIG1hcmtlZCAtIEEgbWFya2Rvd24gcGFyc2VyIChodHRwczovL2dpdGh1Yi5jb20vY2hqai9tYXJrZWQpXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxMiwgQ2hyaXN0b3BoZXIgSmVmZnJleS4gKE1JVCBMaWNlbnNlZClcbiAqL1xuXG47KGZ1bmN0aW9uKCkge1xuXG4vKipcbiAqIEJsb2NrLUxldmVsIEdyYW1tYXJcbiAqL1xuXG52YXIgYmxvY2sgPSB7XG4gIG5ld2xpbmU6IC9eXFxuKy8sXG4gIGNvZGU6IC9eKCB7NH1bXlxcbl0rXFxuKikrLyxcbiAgZmVuY2VzOiBub29wLFxuICBocjogL14oICpbLSpfXSl7Myx9ICooPzpcXG4rfCQpLyxcbiAgaGVhZGluZzogL14gKigjezEsNn0pICooW15cXG5dKz8pICojKiAqKD86XFxuK3wkKS8sXG4gIGxoZWFkaW5nOiAvXihbXlxcbl0rKVxcbiAqKD18LSl7Myx9ICpcXG4qLyxcbiAgYmxvY2txdW90ZTogL14oICo+W15cXG5dKyhcXG5bXlxcbl0rKSpcXG4qKSsvLFxuICBsaXN0OiAvXiggKikoYnVsbCkgW15cXDBdKz8oPzpocnxcXG57Mix9KD8hICkoPyFcXDFidWxsIClcXG4qfFxccyokKS8sXG4gIGh0bWw6IC9eICooPzpjb21tZW50fGNsb3NlZHxjbG9zaW5nKSAqKD86XFxuezIsfXxcXHMqJCkvLFxuICBkZWY6IC9eICpcXFsoW15cXF1dKylcXF06ICooW15cXHNdKykoPzogK1tcIihdKFteXFxuXSspW1wiKV0pPyAqKD86XFxuK3wkKS8sXG4gIHBhcmFncmFwaDogL14oW15cXG5dK1xcbj8oPyFocnxoZWFkaW5nfGxoZWFkaW5nfGJsb2NrcXVvdGV8dGFnfGRlZikpK1xcbiovLFxuICB0ZXh0OiAvXlteXFxuXSsvXG59O1xuXG5ibG9jay5idWxsZXQgPSAvKD86WyorLV18XFxkK1xcLikvO1xuYmxvY2suaXRlbSA9IC9eKCAqKShidWxsKSBbXlxcbl0qKD86XFxuKD8hXFwxYnVsbCApW15cXG5dKikqLztcbmJsb2NrLml0ZW0gPSByZXBsYWNlKGJsb2NrLml0ZW0sICdnbScpXG4gICgvYnVsbC9nLCBibG9jay5idWxsZXQpXG4gICgpO1xuXG5ibG9jay5saXN0ID0gcmVwbGFjZShibG9jay5saXN0KVxuICAoL2J1bGwvZywgYmxvY2suYnVsbGV0KVxuICAoJ2hyJywgL1xcbisoPz0oPzogKlstKl9dKXszLH0gKig/Olxcbit8JCkpLylcbiAgKCk7XG5cbmJsb2NrLmh0bWwgPSByZXBsYWNlKGJsb2NrLmh0bWwpXG4gICgnY29tbWVudCcsIC88IS0tW15cXDBdKj8tLT4vKVxuICAoJ2Nsb3NlZCcsIC88KHRhZylbXlxcMF0rPzxcXC9cXDE+LylcbiAgKCdjbG9zaW5nJywgLzx0YWcoPzpcIlteXCJdKlwifCdbXiddKid8W14nXCI+XSkqPz4vKVxuICAoL3RhZy9nLCB0YWcoKSlcbiAgKCk7XG5cbmJsb2NrLnBhcmFncmFwaCA9IHJlcGxhY2UoYmxvY2sucGFyYWdyYXBoKVxuICAoJ2hyJywgYmxvY2suaHIpXG4gICgnaGVhZGluZycsIGJsb2NrLmhlYWRpbmcpXG4gICgnbGhlYWRpbmcnLCBibG9jay5saGVhZGluZylcbiAgKCdibG9ja3F1b3RlJywgYmxvY2suYmxvY2txdW90ZSlcbiAgKCd0YWcnLCAnPCcgKyB0YWcoKSlcbiAgKCdkZWYnLCBibG9jay5kZWYpXG4gICgpO1xuXG5ibG9jay5ub3JtYWwgPSB7XG4gIGZlbmNlczogYmxvY2suZmVuY2VzLFxuICBwYXJhZ3JhcGg6IGJsb2NrLnBhcmFncmFwaFxufTtcblxuYmxvY2suZ2ZtID0ge1xuICBmZW5jZXM6IC9eICooYGBgfH5+fikgKihcXHcrKT8gKlxcbihbXlxcMF0rPylcXHMqXFwxICooPzpcXG4rfCQpLyxcbiAgcGFyYWdyYXBoOiAvXi9cbn07XG5cbmJsb2NrLmdmbS5wYXJhZ3JhcGggPSByZXBsYWNlKGJsb2NrLnBhcmFncmFwaClcbiAgKCcoPyEnLCAnKD8hJyArIGJsb2NrLmdmbS5mZW5jZXMuc291cmNlLnJlcGxhY2UoJ1xcXFwxJywgJ1xcXFwyJykgKyAnfCcpXG4gICgpO1xuXG4vKipcbiAqIEJsb2NrIExleGVyXG4gKi9cblxuYmxvY2subGV4ZXIgPSBmdW5jdGlvbihzcmMpIHtcbiAgdmFyIHRva2VucyA9IFtdO1xuXG4gIHRva2Vucy5saW5rcyA9IHt9O1xuXG4gIHNyYyA9IHNyY1xuICAgIC5yZXBsYWNlKC9cXHJcXG58XFxyL2csICdcXG4nKVxuICAgIC5yZXBsYWNlKC9cXHQvZywgJyAgICAnKTtcblxuICByZXR1cm4gYmxvY2sudG9rZW4oc3JjLCB0b2tlbnMsIHRydWUpO1xufTtcblxuYmxvY2sudG9rZW4gPSBmdW5jdGlvbihzcmMsIHRva2VucywgdG9wKSB7XG4gIHZhciBzcmMgPSBzcmMucmVwbGFjZSgvXiArJC9nbSwgJycpXG4gICAgLCBuZXh0XG4gICAgLCBsb29zZVxuICAgICwgY2FwXG4gICAgLCBpdGVtXG4gICAgLCBzcGFjZVxuICAgICwgaVxuICAgICwgbFxuICAgICwgc3RhcnQ7XG5cbiAgd2hpbGUgKHNyYykge1xuICAgIHN0YXJ0ID0gc3JjLmxlbmd0aDtcbiAgICAvLyBuZXdsaW5lXG4gICAgaWYgKGNhcCA9IGJsb2NrLm5ld2xpbmUuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgaWYgKGNhcFswXS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnc3BhY2UnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNvZGVcbiAgICBpZiAoY2FwID0gYmxvY2suY29kZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBjYXAgPSBjYXBbMF0ucmVwbGFjZSgvXiB7NH0vZ20sICcnKTtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICB0ZXh0OiAhb3B0aW9ucy5wZWRhbnRpY1xuICAgICAgICAgID8gY2FwLnJlcGxhY2UoL1xcbiskLywgJycpXG4gICAgICAgICAgOiBjYXAsXG4gICAgICAgIHRleHRMZW46IHN0YXJ0IC0gc3JjLmxlbmd0aCxcbiAgICAgICAgcmVtYWluOiBzcmMubGVuZ3RoXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGZlbmNlcyAoZ2ZtKVxuICAgIGlmIChjYXAgPSBibG9jay5mZW5jZXMuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgIGxhbmc6IGNhcFsyXSxcbiAgICAgICAgdGV4dDogY2FwWzNdLFxuICAgICAgICB0ZXh0TGVuOiBzdGFydCAtIHNyYy5sZW5ndGgsXG4gICAgICAgIHJlbWFpbjogc3JjLmxlbmd0aFxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBoZWFkaW5nXG4gICAgaWYgKGNhcCA9IGJsb2NrLmhlYWRpbmcuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIGRlcHRoOiBjYXBbMV0ubGVuZ3RoLFxuICAgICAgICB0ZXh0OiBjYXBbMl1cbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gbGhlYWRpbmdcbiAgICBpZiAoY2FwID0gYmxvY2subGhlYWRpbmcuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIGRlcHRoOiBjYXBbMl0gPT09ICc9JyA/IDEgOiAyLFxuICAgICAgICB0ZXh0OiBjYXBbMV1cbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gaHJcbiAgICBpZiAoY2FwID0gYmxvY2suaHIuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnaHInXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGJsb2NrcXVvdGVcbiAgICBpZiAoY2FwID0gYmxvY2suYmxvY2txdW90ZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG5cbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2Jsb2NrcXVvdGVfc3RhcnQnXG4gICAgICB9KTtcblxuICAgICAgY2FwID0gY2FwWzBdLnJlcGxhY2UoL14gKj4gPy9nbSwgJycpO1xuXG4gICAgICAvLyBQYXNzIGB0b3BgIHRvIGtlZXAgdGhlIGN1cnJlbnRcbiAgICAgIC8vIFwidG9wbGV2ZWxcIiBzdGF0ZS4gVGhpcyBpcyBleGFjdGx5XG4gICAgICAvLyBob3cgbWFya2Rvd24ucGwgd29ya3MuXG4gICAgICBibG9jay50b2tlbihjYXAsIHRva2VucywgdG9wKTtcblxuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnYmxvY2txdW90ZV9lbmQnXG4gICAgICB9KTtcblxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gbGlzdFxuICAgIGlmIChjYXAgPSBibG9jay5saXN0LmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcblxuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAnbGlzdF9zdGFydCcsXG4gICAgICAgIG9yZGVyZWQ6IGlzRmluaXRlKGNhcFsyXSlcbiAgICAgIH0pO1xuXG4gICAgICAvLyBHZXQgZWFjaCB0b3AtbGV2ZWwgaXRlbS5cbiAgICAgIGNhcCA9IGNhcFswXS5tYXRjaChibG9jay5pdGVtKTtcblxuICAgICAgbmV4dCA9IGZhbHNlO1xuICAgICAgbCA9IGNhcC5sZW5ndGg7XG4gICAgICBpID0gMDtcblxuICAgICAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaXRlbSA9IGNhcFtpXTtcblxuICAgICAgICAvLyBSZW1vdmUgdGhlIGxpc3QgaXRlbSdzIGJ1bGxldFxuICAgICAgICAvLyBzbyBpdCBpcyBzZWVuIGFzIHRoZSBuZXh0IHRva2VuLlxuICAgICAgICBzcGFjZSA9IGl0ZW0ubGVuZ3RoO1xuICAgICAgICBpdGVtID0gaXRlbS5yZXBsYWNlKC9eICooWyorLV18XFxkK1xcLikgKy8sICcnKTtcblxuICAgICAgICAvLyBPdXRkZW50IHdoYXRldmVyIHRoZVxuICAgICAgICAvLyBsaXN0IGl0ZW0gY29udGFpbnMuIEhhY2t5LlxuICAgICAgICBpZiAofml0ZW0uaW5kZXhPZignXFxuICcpKSB7XG4gICAgICAgICAgc3BhY2UgLT0gaXRlbS5sZW5ndGg7XG4gICAgICAgICAgaXRlbSA9ICFvcHRpb25zLnBlZGFudGljXG4gICAgICAgICAgICA/IGl0ZW0ucmVwbGFjZShuZXcgUmVnRXhwKCdeIHsxLCcgKyBzcGFjZSArICd9JywgJ2dtJyksICcnKVxuICAgICAgICAgICAgOiBpdGVtLnJlcGxhY2UoL14gezEsNH0vZ20sICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERldGVybWluZSB3aGV0aGVyIGl0ZW0gaXMgbG9vc2Ugb3Igbm90LlxuICAgICAgICAvLyBVc2U6IC8oXnxcXG4pKD8hIClbXlxcbl0rXFxuXFxuKD8hXFxzKiQpL1xuICAgICAgICAvLyBmb3IgZGlzY291bnQgYmVoYXZpb3IuXG4gICAgICAgIGxvb3NlID0gbmV4dCB8fCAvXFxuXFxuKD8hXFxzKiQpLy50ZXN0KGl0ZW0pO1xuICAgICAgICBpZiAoaSAhPT0gbCAtIDEpIHtcbiAgICAgICAgICBuZXh0ID0gaXRlbVtpdGVtLmxlbmd0aC0xXSA9PT0gJ1xcbic7XG4gICAgICAgICAgaWYgKCFsb29zZSkgbG9vc2UgPSBuZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6IGxvb3NlXG4gICAgICAgICAgICA/ICdsb29zZV9pdGVtX3N0YXJ0J1xuICAgICAgICAgICAgOiAnbGlzdF9pdGVtX3N0YXJ0J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZWN1cnNlLlxuICAgICAgICBibG9jay50b2tlbihpdGVtLCB0b2tlbnMpO1xuXG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnbGlzdF9pdGVtX2VuZCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ2xpc3RfZW5kJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGh0bWxcbiAgICBpZiAoY2FwID0gYmxvY2suaHRtbC5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6IG9wdGlvbnMuc2FuaXRpemVcbiAgICAgICAgICA/ICdwYXJhZ3JhcGgnXG4gICAgICAgICAgOiAnaHRtbCcsXG4gICAgICAgIHByZTogY2FwWzFdID09PSAncHJlJyxcbiAgICAgICAgdGV4dDogY2FwWzBdXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGRlZlxuICAgIGlmICh0b3AgJiYgKGNhcCA9IGJsb2NrLmRlZi5leGVjKHNyYykpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLmxpbmtzW2NhcFsxXS50b0xvd2VyQ2FzZSgpXSA9IHtcbiAgICAgICAgaHJlZjogY2FwWzJdLFxuICAgICAgICB0aXRsZTogY2FwWzNdXG4gICAgICB9O1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdG9wLWxldmVsIHBhcmFncmFwaFxuICAgIGlmICh0b3AgJiYgKGNhcCA9IGJsb2NrLnBhcmFncmFwaC5leGVjKHNyYykpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgdGV4dDogY2FwWzBdXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHRleHRcbiAgICBpZiAoY2FwID0gYmxvY2sudGV4dC5leGVjKHNyYykpIHtcbiAgICAgIC8vIFRvcC1sZXZlbCBzaG91bGQgbmV2ZXIgcmVhY2ggaGVyZS5cbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgdGV4dDogY2FwWzBdXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59O1xuXG4vKipcbiAqIElubGluZSBQcm9jZXNzaW5nXG4gKi9cblxudmFyIGlubGluZSA9IHtcbiAgZXNjYXBlOiAvXlxcXFwoW1xcXFxgKnt9XFxbXFxdKCkjK1xcLS4hXz5dKS8sXG4gIGF1dG9saW5rOiAvXjwoW14gPl0rKEB8OlxcLylbXiA+XSspPi8sXG4gIHVybDogbm9vcCxcbiAgdGFnOiAvXjwhLS1bXlxcMF0qPy0tPnxePFxcLz9cXHcrKD86XCJbXlwiXSpcInwnW14nXSonfFteJ1wiPl0pKj8+LyxcbiAgbGluazogL14hP1xcWyhpbnNpZGUpXFxdXFwoaHJlZlxcKS8sXG4gIHJlZmxpbms6IC9eIT9cXFsoaW5zaWRlKVxcXVxccypcXFsoW15cXF1dKilcXF0vLFxuICBub2xpbms6IC9eIT9cXFsoKD86XFxbW15cXF1dKlxcXXxbXlxcW1xcXV0pKilcXF0vLFxuICBzdHJvbmc6IC9eX18oW15cXDBdKz8pX18oPyFfKXxeXFwqXFwqKFteXFwwXSs/KVxcKlxcKig/IVxcKikvLFxuICBlbTogL15cXGJfKCg/Ol9ffFteXFwwXSkrPylfXFxifF5cXCooKD86XFwqXFwqfFteXFwwXSkrPylcXCooPyFcXCopLyxcbiAgY29kZTogL14oYCspKFteXFwwXSo/W15gXSlcXDEoPyFgKS8sXG4gIGJyOiAvXiB7Mix9XFxuKD8hXFxzKiQpLyxcbiAgdGV4dDogL15bXlxcMF0rPyg/PVtcXFxcPCFcXFtfKmBdfCB7Mix9XFxufCQpL1xufTtcblxuaW5saW5lLl9saW5rSW5zaWRlID0gLyg/OlxcW1teXFxdXSpcXF18W15cXF1dfFxcXSg/PVteXFxbXSpcXF0pKSovO1xuaW5saW5lLl9saW5rSHJlZiA9IC9cXHMqPD8oW15cXHNdKj8pPj8oPzpcXHMrWydcIl0oW15cXDBdKj8pWydcIl0pP1xccyovO1xuXG5pbmxpbmUubGluayA9IHJlcGxhY2UoaW5saW5lLmxpbmspXG4gICgnaW5zaWRlJywgaW5saW5lLl9saW5rSW5zaWRlKVxuICAoJ2hyZWYnLCBpbmxpbmUuX2xpbmtIcmVmKVxuICAoKTtcblxuaW5saW5lLnJlZmxpbmsgPSByZXBsYWNlKGlubGluZS5yZWZsaW5rKVxuICAoJ2luc2lkZScsIGlubGluZS5fbGlua0luc2lkZSlcbiAgKCk7XG5cbmlubGluZS5ub3JtYWwgPSB7XG4gIHVybDogaW5saW5lLnVybCxcbiAgc3Ryb25nOiBpbmxpbmUuc3Ryb25nLFxuICBlbTogaW5saW5lLmVtLFxuICB0ZXh0OiBpbmxpbmUudGV4dFxufTtcblxuaW5saW5lLnBlZGFudGljID0ge1xuICBzdHJvbmc6IC9eX18oPz1cXFMpKFteXFwwXSo/XFxTKV9fKD8hXyl8XlxcKlxcKig/PVxcUykoW15cXDBdKj9cXFMpXFwqXFwqKD8hXFwqKS8sXG4gIGVtOiAvXl8oPz1cXFMpKFteXFwwXSo/XFxTKV8oPyFfKXxeXFwqKD89XFxTKShbXlxcMF0qP1xcUylcXCooPyFcXCopL1xufTtcblxuaW5saW5lLmdmbSA9IHtcbiAgdXJsOiAvXihodHRwcz86XFwvXFwvW15cXHNdK1teLiw6O1wiJylcXF1cXHNdKS8sXG4gIHRleHQ6IC9eW15cXDBdKz8oPz1bXFxcXDwhXFxbXypgXXxodHRwcz86XFwvXFwvfCB7Mix9XFxufCQpL1xufTtcblxuLyoqXG4gKiBJbmxpbmUgTGV4ZXJcbiAqL1xuXG5pbmxpbmUubGV4ZXIgPSBmdW5jdGlvbihzcmMpIHtcbiAgdmFyIG91dCA9ICcnXG4gICAgLCBsaW5rcyA9IHRva2Vucy5saW5rc1xuICAgICwgbGlua1xuICAgICwgdGV4dFxuICAgICwgaHJlZlxuICAgICwgY2FwO1xuXG4gIHdoaWxlIChzcmMpIHtcbiAgICAvLyBlc2NhcGVcbiAgICBpZiAoY2FwID0gaW5saW5lLmVzY2FwZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gY2FwWzFdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gYXV0b2xpbmtcbiAgICBpZiAoY2FwID0gaW5saW5lLmF1dG9saW5rLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIGlmIChjYXBbMl0gPT09ICdAJykge1xuICAgICAgICB0ZXh0ID0gY2FwWzFdWzZdID09PSAnOidcbiAgICAgICAgICA/IG1hbmdsZShjYXBbMV0uc3Vic3RyaW5nKDcpKVxuICAgICAgICAgIDogbWFuZ2xlKGNhcFsxXSk7XG4gICAgICAgIGhyZWYgPSBtYW5nbGUoJ21haWx0bzonKSArIHRleHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gZXNjYXBlKGNhcFsxXSk7XG4gICAgICAgIGhyZWYgPSB0ZXh0O1xuICAgICAgfVxuICAgICAgb3V0ICs9ICc8YSBocmVmPVwiJ1xuICAgICAgICArIGhyZWZcbiAgICAgICAgKyAnXCI+J1xuICAgICAgICArIHRleHRcbiAgICAgICAgKyAnPC9hPic7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyB1cmwgKGdmbSlcbiAgICBpZiAoY2FwID0gaW5saW5lLnVybC5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICB0ZXh0ID0gZXNjYXBlKGNhcFsxXSk7XG4gICAgICBocmVmID0gdGV4dDtcbiAgICAgIG91dCArPSAnPGEgaHJlZj1cIidcbiAgICAgICAgKyBocmVmXG4gICAgICAgICsgJ1wiPidcbiAgICAgICAgKyB0ZXh0XG4gICAgICAgICsgJzwvYT4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdGFnXG4gICAgaWYgKGNhcCA9IGlubGluZS50YWcuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgb3V0ICs9IG9wdGlvbnMuc2FuaXRpemVcbiAgICAgICAgPyBlc2NhcGUoY2FwWzBdKVxuICAgICAgICA6IGNhcFswXTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGxpbmtcbiAgICBpZiAoY2FwID0gaW5saW5lLmxpbmsuZXhlYyhzcmMpKSB7XG4gICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpO1xuICAgICAgb3V0ICs9IG91dHB1dExpbmsoY2FwLCB7XG4gICAgICAgIGhyZWY6IGNhcFsyXSxcbiAgICAgICAgdGl0bGU6IGNhcFszXVxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyByZWZsaW5rLCBub2xpbmtcbiAgICBpZiAoKGNhcCA9IGlubGluZS5yZWZsaW5rLmV4ZWMoc3JjKSlcbiAgICAgICAgfHwgKGNhcCA9IGlubGluZS5ub2xpbmsuZXhlYyhzcmMpKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIGxpbmsgPSAoY2FwWzJdIHx8IGNhcFsxXSkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgbGluayA9IGxpbmtzW2xpbmsudG9Mb3dlckNhc2UoKV07XG4gICAgICBpZiAoIWxpbmsgfHwgIWxpbmsuaHJlZikge1xuICAgICAgICBvdXQgKz0gY2FwWzBdWzBdO1xuICAgICAgICBzcmMgPSBjYXBbMF0uc3Vic3RyaW5nKDEpICsgc3JjO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIG91dCArPSBvdXRwdXRMaW5rKGNhcCwgbGluayk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBzdHJvbmdcbiAgICBpZiAoY2FwID0gaW5saW5lLnN0cm9uZy5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gJzxzdHJvbmc+J1xuICAgICAgICArIGlubGluZS5sZXhlcihjYXBbMl0gfHwgY2FwWzFdKVxuICAgICAgICArICc8L3N0cm9uZz4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gZW1cbiAgICBpZiAoY2FwID0gaW5saW5lLmVtLmV4ZWMoc3JjKSkge1xuICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTtcbiAgICAgIG91dCArPSAnPGVtPidcbiAgICAgICAgKyBpbmxpbmUubGV4ZXIoY2FwWzJdIHx8IGNhcFsxXSlcbiAgICAgICAgKyAnPC9lbT4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gY29kZVxuICAgIGlmIChjYXAgPSBpbmxpbmUuY29kZS5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gJzxjb2RlPidcbiAgICAgICAgKyBlc2NhcGUoY2FwWzJdLCB0cnVlKVxuICAgICAgICArICc8L2NvZGU+JztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGJyXG4gICAgaWYgKGNhcCA9IGlubGluZS5ici5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gJzxicj4nO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gdGV4dFxuICAgIGlmIChjYXAgPSBpbmxpbmUudGV4dC5leGVjKHNyYykpIHtcbiAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7XG4gICAgICBvdXQgKz0gZXNjYXBlKGNhcFswXSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3V0O1xufTtcblxuZnVuY3Rpb24gb3V0cHV0TGluayhjYXAsIGxpbmspIHtcbiAgaWYgKGNhcFswXVswXSAhPT0gJyEnKSB7XG4gICAgcmV0dXJuICc8YSBocmVmPVwiJ1xuICAgICAgKyBlc2NhcGUobGluay5ocmVmKVxuICAgICAgKyAnXCInXG4gICAgICArIChsaW5rLnRpdGxlXG4gICAgICA/ICcgdGl0bGU9XCInXG4gICAgICArIGVzY2FwZShsaW5rLnRpdGxlKVxuICAgICAgKyAnXCInXG4gICAgICA6ICcnKVxuICAgICAgKyAnPidcbiAgICAgICsgaW5saW5lLmxleGVyKGNhcFsxXSlcbiAgICAgICsgJzwvYT4nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnPGltZyBzcmM9XCInXG4gICAgICArIGVzY2FwZShsaW5rLmhyZWYpXG4gICAgICArICdcIiBhbHQ9XCInXG4gICAgICArIGVzY2FwZShjYXBbMV0pXG4gICAgICArICdcIidcbiAgICAgICsgKGxpbmsudGl0bGVcbiAgICAgID8gJyB0aXRsZT1cIidcbiAgICAgICsgZXNjYXBlKGxpbmsudGl0bGUpXG4gICAgICArICdcIidcbiAgICAgIDogJycpXG4gICAgICArICc+JztcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNpbmdcbiAqL1xuXG52YXIgdG9rZW5zXG4gICwgdG9rZW47XG5cbmZ1bmN0aW9uIG5leHQoKSB7XG4gIHJldHVybiB0b2tlbiA9IHRva2Vucy5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdG9rKCkge1xuICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICBjYXNlICdzcGFjZSc6IHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY2FzZSAnaHInOiB7XG4gICAgICByZXR1cm4gJzxocj5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdoZWFkaW5nJzoge1xuICAgICAgcmV0dXJuICc8aCdcbiAgICAgICAgKyB0b2tlbi5kZXB0aFxuICAgICAgICArICc+J1xuICAgICAgICArIGlubGluZS5sZXhlcih0b2tlbi50ZXh0KVxuICAgICAgICArICc8L2gnXG4gICAgICAgICsgdG9rZW4uZGVwdGhcbiAgICAgICAgKyAnPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ2NvZGUnOiB7XG4gICAgICBpZiAob3B0aW9ucy5oaWdobGlnaHQpIHtcbiAgICAgICAgdG9rZW4uY29kZSA9IG9wdGlvbnMuaGlnaGxpZ2h0KHRva2VuLnRleHQsIHRva2VuLmxhbmcpO1xuICAgICAgICBpZiAodG9rZW4uY29kZSAhPSBudWxsICYmIHRva2VuLmNvZGUgIT09IHRva2VuLnRleHQpIHtcbiAgICAgICAgICB0b2tlbi5lc2NhcGVkID0gdHJ1ZTtcbiAgICAgICAgICB0b2tlbi50ZXh0ID0gdG9rZW4uY29kZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRva2VuLmVzY2FwZWQpIHtcbiAgICAgICAgdG9rZW4udGV4dCA9IGVzY2FwZSh0b2tlbi50ZXh0LCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8cHJlPjxjb2RlJ1xuICAgICAgICArICh0b2tlbi5sYW5nXG4gICAgICAgID8gJyBjbGFzcz1cImxhbmctJ1xuICAgICAgICArIHRva2VuLmxhbmdcbiAgICAgICAgKyAnXCInXG4gICAgICAgIDogJycpXG4gICAgICAgICsgJz4nXG4gICAgICAgICsgdG9rZW4udGV4dFxuICAgICAgICArICc8L2NvZGU+PC9wcmU+XFxuJztcbiAgICB9XG4gICAgY2FzZSAnYmxvY2txdW90ZV9zdGFydCc6IHtcbiAgICAgIHZhciBib2R5ID0gJyc7XG5cbiAgICAgIHdoaWxlIChuZXh0KCkudHlwZSAhPT0gJ2Jsb2NrcXVvdGVfZW5kJykge1xuICAgICAgICBib2R5ICs9IHRvaygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxibG9ja3F1b3RlPlxcbidcbiAgICAgICAgKyBib2R5XG4gICAgICAgICsgJzwvYmxvY2txdW90ZT5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdsaXN0X3N0YXJ0Jzoge1xuICAgICAgdmFyIHR5cGUgPSB0b2tlbi5vcmRlcmVkID8gJ29sJyA6ICd1bCdcbiAgICAgICAgLCBib2R5ID0gJyc7XG5cbiAgICAgIHdoaWxlIChuZXh0KCkudHlwZSAhPT0gJ2xpc3RfZW5kJykge1xuICAgICAgICBib2R5ICs9IHRvaygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzwnXG4gICAgICAgICsgdHlwZVxuICAgICAgICArICc+XFxuJ1xuICAgICAgICArIGJvZHlcbiAgICAgICAgKyAnPC8nXG4gICAgICAgICsgdHlwZVxuICAgICAgICArICc+XFxuJztcbiAgICB9XG4gICAgY2FzZSAnbGlzdF9pdGVtX3N0YXJ0Jzoge1xuICAgICAgdmFyIGJvZHkgPSAnJztcblxuICAgICAgd2hpbGUgKG5leHQoKS50eXBlICE9PSAnbGlzdF9pdGVtX2VuZCcpIHtcbiAgICAgICAgYm9keSArPSB0b2tlbi50eXBlID09PSAndGV4dCdcbiAgICAgICAgICA/IHBhcnNlVGV4dCgpXG4gICAgICAgICAgOiB0b2soKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8bGk+J1xuICAgICAgICArIGJvZHlcbiAgICAgICAgKyAnPC9saT5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdsb29zZV9pdGVtX3N0YXJ0Jzoge1xuICAgICAgdmFyIGJvZHkgPSAnJztcblxuICAgICAgd2hpbGUgKG5leHQoKS50eXBlICE9PSAnbGlzdF9pdGVtX2VuZCcpIHtcbiAgICAgICAgYm9keSArPSB0b2soKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8bGk+J1xuICAgICAgICArIGJvZHlcbiAgICAgICAgKyAnPC9saT5cXG4nO1xuICAgIH1cbiAgICBjYXNlICdodG1sJzoge1xuICAgICAgcmV0dXJuICF0b2tlbi5wcmUgJiYgIW9wdGlvbnMucGVkYW50aWNcbiAgICAgICAgPyBpbmxpbmUubGV4ZXIodG9rZW4udGV4dClcbiAgICAgICAgOiB0b2tlbi50ZXh0O1xuICAgIH1cbiAgICBjYXNlICdwYXJhZ3JhcGgnOiB7XG4gICAgICByZXR1cm4gJzxwPidcbiAgICAgICAgKyBpbmxpbmUubGV4ZXIodG9rZW4udGV4dClcbiAgICAgICAgKyAnPC9wPlxcbic7XG4gICAgfVxuICAgIGNhc2UgJ3RleHQnOiB7XG4gICAgICByZXR1cm4gJzxwPidcbiAgICAgICAgKyBwYXJzZVRleHQoKVxuICAgICAgICArICc8L3A+XFxuJztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VUZXh0KCkge1xuICB2YXIgYm9keSA9IHRva2VuLnRleHRcbiAgICAsIHRvcDtcblxuICB3aGlsZSAoKHRvcCA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoLTFdKVxuICAgICAgICAgJiYgdG9wLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgIGJvZHkgKz0gJ1xcbicgKyBuZXh0KCkudGV4dDtcbiAgfVxuXG4gIHJldHVybiBpbmxpbmUubGV4ZXIoYm9keSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlKHNyYykge1xuICB0b2tlbnMgPSBzcmMucmV2ZXJzZSgpO1xuXG4gIHZhciBvdXQgPSAnJztcbiAgd2hpbGUgKG5leHQoKSkge1xuICAgIG91dCArPSB0b2soKTtcbiAgfVxuXG4gIHRva2VucyA9IG51bGw7XG4gIHRva2VuID0gbnVsbDtcblxuICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIEhlbHBlcnNcbiAqL1xuXG5mdW5jdGlvbiBlc2NhcGUoaHRtbCwgZW5jb2RlKSB7XG4gIHJldHVybiBodG1sXG4gICAgLnJlcGxhY2UoIWVuY29kZSA/IC8mKD8hIz9cXHcrOykvZyA6IC8mL2csICcmYW1wOycpXG4gICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgLnJlcGxhY2UoLycvZywgJyYjMzk7Jyk7XG59XG5cbmZ1bmN0aW9uIG1hbmdsZSh0ZXh0KSB7XG4gIHZhciBvdXQgPSAnJ1xuICAgICwgbCA9IHRleHQubGVuZ3RoXG4gICAgLCBpID0gMFxuICAgICwgY2g7XG5cbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBjaCA9IHRleHQuY2hhckNvZGVBdChpKTtcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgY2ggPSAneCcgKyBjaC50b1N0cmluZygxNik7XG4gICAgfVxuICAgIG91dCArPSAnJiMnICsgY2ggKyAnOyc7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiB0YWcoKSB7XG4gIHZhciB0YWcgPSAnKD8hKD86J1xuICAgICsgJ2F8ZW18c3Ryb25nfHNtYWxsfHN8Y2l0ZXxxfGRmbnxhYmJyfGRhdGF8dGltZXxjb2RlJ1xuICAgICsgJ3x2YXJ8c2FtcHxrYmR8c3VifHN1cHxpfGJ8dXxtYXJrfHJ1Ynl8cnR8cnB8YmRpfGJkbydcbiAgICArICd8c3Bhbnxicnx3YnJ8aW5zfGRlbHxpbWcpXFxcXGIpXFxcXHcrKD8hOi98QClcXFxcYic7XG5cbiAgcmV0dXJuIHRhZztcbn1cblxuZnVuY3Rpb24gcmVwbGFjZShyZWdleCwgb3B0KSB7XG4gIHJlZ2V4ID0gcmVnZXguc291cmNlO1xuICBvcHQgPSBvcHQgfHwgJyc7XG4gIHJldHVybiBmdW5jdGlvbiBzZWxmKG5hbWUsIHZhbCkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG9wdCk7XG4gICAgdmFsID0gdmFsLnNvdXJjZSB8fCB2YWw7XG4gICAgdmFsID0gdmFsLnJlcGxhY2UoLyhefFteXFxbXSlcXF4vZywgJyQxJyk7XG4gICAgcmVnZXggPSByZWdleC5yZXBsYWNlKG5hbWUsIHZhbCk7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxubm9vcC5leGVjID0gbm9vcDtcblxuLyoqXG4gKiBNYXJrZWRcbiAqL1xuXG5mdW5jdGlvbiBtYXJrZWQoc3JjLCBvcHQpIHtcbiAgc2V0T3B0aW9ucyhvcHQpO1xuICBpZiAob3B0ICYmIG9wdC5zYXZlTGV4KSB7XG4gICAgcmV0dXJuIFtwYXJzZShibG9jay5sZXhlcihzcmMpKSwgYmxvY2subGV4ZXIoc3JjKV07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlKGJsb2NrLmxleGVyKHNyYykpO1xuICB9XG59XG5cbi8qKlxuICogT3B0aW9uc1xuICovXG5cbnZhciBvcHRpb25zXG4gICwgZGVmYXVsdHM7XG5cbmZ1bmN0aW9uIHNldE9wdGlvbnMob3B0KSB7XG4gIGlmICghb3B0KSBvcHQgPSBkZWZhdWx0cztcbiAgaWYgKG9wdGlvbnMgPT09IG9wdCkgcmV0dXJuO1xuICBvcHRpb25zID0gb3B0O1xuXG4gIGlmIChvcHRpb25zLmdmbSkge1xuICAgIGJsb2NrLmZlbmNlcyA9IGJsb2NrLmdmbS5mZW5jZXM7XG4gICAgYmxvY2sucGFyYWdyYXBoID0gYmxvY2suZ2ZtLnBhcmFncmFwaDtcbiAgICBpbmxpbmUudGV4dCA9IGlubGluZS5nZm0udGV4dDtcbiAgICBpbmxpbmUudXJsID0gaW5saW5lLmdmbS51cmw7XG4gIH0gZWxzZSB7XG4gICAgYmxvY2suZmVuY2VzID0gYmxvY2subm9ybWFsLmZlbmNlcztcbiAgICBibG9jay5wYXJhZ3JhcGggPSBibG9jay5ub3JtYWwucGFyYWdyYXBoO1xuICAgIGlubGluZS50ZXh0ID0gaW5saW5lLm5vcm1hbC50ZXh0O1xuICAgIGlubGluZS51cmwgPSBpbmxpbmUubm9ybWFsLnVybDtcbiAgfVxuXG4gIGlmIChvcHRpb25zLnBlZGFudGljKSB7XG4gICAgaW5saW5lLmVtID0gaW5saW5lLnBlZGFudGljLmVtO1xuICAgIGlubGluZS5zdHJvbmcgPSBpbmxpbmUucGVkYW50aWMuc3Ryb25nO1xuICB9IGVsc2Uge1xuICAgIGlubGluZS5lbSA9IGlubGluZS5ub3JtYWwuZW07XG4gICAgaW5saW5lLnN0cm9uZyA9IGlubGluZS5ub3JtYWwuc3Ryb25nO1xuICB9XG59XG5cbm1hcmtlZC5vcHRpb25zID1cbm1hcmtlZC5zZXRPcHRpb25zID0gZnVuY3Rpb24ob3B0KSB7XG4gIGRlZmF1bHRzID0gb3B0O1xuICBzZXRPcHRpb25zKG9wdCk7XG4gIHJldHVybiBtYXJrZWQ7XG59O1xuXG5tYXJrZWQuc2V0T3B0aW9ucyh7XG4gIGdmbTogdHJ1ZSxcbiAgcGVkYW50aWM6IGZhbHNlLFxuICBzYW5pdGl6ZTogZmFsc2UsXG4gIGhpZ2hsaWdodDogbnVsbFxufSk7XG5cbi8qKlxuICogRXhwb3NlXG4gKi9cblxubWFya2VkLnBhcnNlciA9IGZ1bmN0aW9uKHNyYywgb3B0KSB7XG4gIHNldE9wdGlvbnMob3B0KTtcbiAgcmV0dXJuIHBhcnNlKHNyYyk7XG59O1xuXG5tYXJrZWQubGV4ZXIgPSBmdW5jdGlvbihzcmMsIG9wdCkge1xuICBzZXRPcHRpb25zKG9wdCk7XG4gIHJldHVybiBibG9jay5sZXhlcihzcmMpO1xufTtcblxubWFya2VkLnBhcnNlID0gbWFya2VkO1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBtYXJrZWQ7XG59IGVsc2Uge1xuICB0aGlzLm1hcmtlZCA9IG1hcmtlZDtcbn1cblxufSkuY2FsbChmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKTtcbn0oKSk7XG5cbn0pKHNlbGYpIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuKGZ1bmN0aW9uKCkge1xuICB2YXIgJCwgRE9XTl9BUlJPVywgRU5ELCBFTlRFUiwgRVNDLCBIT01FLCBMRUZUX0FSUk9XLCBOb3RlYm9vaywgUEFHRV9ET1dOLCBQQUdFX1VQLCBRLCBSSUdIVF9BUlJPVywgVVBfQVJST1csIGFycm93cywgYmluZE1hcmt1cERpdiwgYmluZFNsaWRlciwgY2hvb3NlU2xpZGUsIGNsZWFuRW1wdHlOb2RlcywgY2xvc2VXaW5kb3csIGNvdW50U2xpZGUsIGNyZWF0ZU5vZGUsIGRlbGF5LCBlZGl0aW5nRW5hYmxlZCwgZW5hYmxlRWRpdGluZywgZW5hYmxlU2xpZGVDb250cm9scywgZmlyc3RTbGlkZSwgZ2V0RWxlbWVudENvZGUsIGhhbmRsZUludGVybmFsU2VjdGlvbnMsIGhpZGVTbGlkZSwgaW5zZXJ0Q29udHJvbHMsIGlzTGVpc3VyZUNvZGUsIGpRdWVyeSwgbGFzdFNsaWRlLCBtYWtlTWFya3VwRGl2LCBtYWtlU2VjdGlvbiwgbWFrZVNsaWRlRGl2LCBtYXJrdXBCdXR0b25zLCBtYXJrdXBFbGVtZW50LCBtYXJrdXBTbGlkZUNvbnRlbnQsIG1hcmt1cFNsaWRlcywgbWVyZ2VMZWlzdXJlQ29kZSwgbWVyZ2VVcCwgbmV4dFNpYmxpbmcsIG5leHRTbGlkZSwgbnRoU2xpZGUsIG9sZFNsaWRlLCBwYWRTbGlkZSwgcHJlc2VudExlaXN1cmVDb2RlLCBwcmVzZW50U2xpZGUsIHByZXZTbGlkZSwgcHJldmlvdXNTaWJsaW5nLCByZW1vdmUsIHNob3dTbGlkZSwgc2xpZGVDb250cm9scywgc2xpZGVDb250cm9sc0VuYWJsZWQsIHNsaWRlS2V5TGlzdGVuZXIsIHNsaWRlTmFtZSwgc2xpZGVQYXQsIHNsaWRlcywgc2xpZGluZywgdGV4dE5vZGUsIHVud3JhcCwgdW53cmFwQ29udGVudCwgXywgX3JlZixcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxuICBqUXVlcnkgPSB3aW5kb3cualF1ZXJ5LCAkID0gd2luZG93LiQsIF8gPSB3aW5kb3cuXztcblxuICBfcmVmID0gTm90ZWJvb2sgPSByZXF1aXJlKCcuL25vdGVib29rJyksIEVOVEVSID0gX3JlZi5FTlRFUiwgZGVsYXkgPSBfcmVmLmRlbGF5LCB0ZXh0Tm9kZSA9IF9yZWYudGV4dE5vZGUsIGNyZWF0ZU5vZGUgPSBfcmVmLmNyZWF0ZU5vZGUsIHJlbW92ZSA9IF9yZWYucmVtb3ZlLCB1bndyYXAgPSBfcmVmLnVud3JhcCwgaW5zZXJ0Q29udHJvbHMgPSBfcmVmLmluc2VydENvbnRyb2xzLCBjbGVhbkVtcHR5Tm9kZXMgPSBfcmVmLmNsZWFuRW1wdHlOb2RlcywgaXNMZWlzdXJlQ29kZSA9IF9yZWYuaXNMZWlzdXJlQ29kZSwgZ2V0RWxlbWVudENvZGUgPSBfcmVmLmdldEVsZW1lbnRDb2RlLCBwcmV2aW91c1NpYmxpbmcgPSBfcmVmLnByZXZpb3VzU2libGluZywgbmV4dFNpYmxpbmcgPSBfcmVmLm5leHRTaWJsaW5nLCBwcmVzZW50TGVpc3VyZUNvZGUgPSBfcmVmLnByZXNlbnRMZWlzdXJlQ29kZSwgbWVyZ2VMZWlzdXJlQ29kZSA9IF9yZWYubWVyZ2VMZWlzdXJlQ29kZSwgY2xvc2VXaW5kb3cgPSBfcmVmLmNsb3NlV2luZG93LCBtYXJrdXBCdXR0b25zID0gX3JlZi5tYXJrdXBCdXR0b25zLCBFU0MgPSBfcmVmLkVTQywgSE9NRSA9IF9yZWYuSE9NRSwgRU5EID0gX3JlZi5FTkQsIFBBR0VfVVAgPSBfcmVmLlBBR0VfVVAsIFBBR0VfRE9XTiA9IF9yZWYuUEFHRV9ET1dOLCBMRUZUX0FSUk9XID0gX3JlZi5MRUZUX0FSUk9XLCBSSUdIVF9BUlJPVyA9IF9yZWYuUklHSFRfQVJST1csIFVQX0FSUk9XID0gX3JlZi5VUF9BUlJPVywgRE9XTl9BUlJPVyA9IF9yZWYuRE9XTl9BUlJPVywgYXJyb3dzID0gX3JlZi5hcnJvd3M7XG5cbiAgUSA9IDgxO1xuXG4gIHdpbmRvdy5tYXJrdXAgPSBmdW5jdGlvbihtZCkge1xuICAgIHZhciBtYWluZG9jLCBub2RlcywgX3JlZjE7XG5cbiAgICBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1ttYWluZG9jXScpO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG1haW5kb2MgPSBjcmVhdGVOb2RlKFwiPGRpdiBtYWluZG9jPjwvZGl2PlwiKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKG1haW5kb2MsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICBub2RlcyA9IFttYWluZG9jXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWFpbmRvYyA9IG5vZGVzWzBdO1xuICAgIH1cbiAgICBtZCA9ICgoX3JlZjEgPSBtZCAhPSBudWxsID8gbWQucmVwbGFjZSgvXFxyXFxuL21nLCAnXFxuJykgOiB2b2lkIDApICE9IG51bGwgPyBfcmVmMSA6IG1haW5kb2MuaW5uZXJIVE1MLnJlcGxhY2UoL15cXHMqPCEtLSovLCAnJykucmVwbGFjZSgvLS0+XFxzKlxcbiovbSwgJycpKS50cmltKCk7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRlQ29udHJvbHMnKTtcbiAgICBtYXJrdXBTbGlkZXMobWFpbmRvYywgbWQpO1xuICAgIHJldHVybiBpbnNlcnRDb250cm9scyhtYWluZG9jKTtcbiAgfTtcblxuICBsYXN0U2xpZGUgPSBudWxsO1xuXG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlLmVycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKFwiUkVNSU5ERVI6IEluY29tcGF0aWJpbGl0eTogdXNpbmcgLXdlYmtpdC1jYWxjXCIpLnN0YWNrKTtcbiAgICB9XG4gIH1cblxuICBzbGlkZVBhdCA9IC9eKFxcKlxcKlxcKlteXFxuXSpcXG4oPzotLT9cXG4pPykvbTtcblxuICBzbGlkZU5hbWUgPSAvXlxcKlxcKlxcKihbXlxcbl0qKVxcbig/Oi0tP1xcbik/L207XG5cbiAgc2xpZGluZyA9IGZhbHNlO1xuXG4gIG1hcmt1cFNsaWRlcyA9IGZ1bmN0aW9uKGVsLCBtZCkge1xuICAgIHZhciBkaXYsIGhhc0NvZGUsIHNsaWRlcztcblxuICAgIGhhc0NvZGUgPSBtYXJrdXBTbGlkZUNvbnRlbnQoZWwsIG1kKTtcbiAgICBzbGlkZXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdbbGVpc3VyZVNlY3Rpb25dJyk7XG4gICAgaWYgKHNsaWRlcy5sZW5ndGggPD0gKGVsLnF1ZXJ5U2VsZWN0b3IoJ1tsZWlzdXJlU2VjdGlvbj1cIkxlaXN1cmUgQ29udHJvbHNcIl0nKSA/IDIgOiAxKSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwib25lU2xpZGVcIik7XG4gICAgfVxuICAgIGRpdiA9IGNyZWF0ZU5vZGUoXCI8ZGl2IGNsYXNzPSdzbGlkZS1jb250cm9scyc+XFxuICA8ZGl2IGlkPSdzbGlkZS1raWxsYnV0dG9uJyBvbmNsaWNrPSd0b2dnbGVTbGlkZVNob3coKScgc3R5bGU9J2Zsb2F0OiByaWdodCc+PGJ1dHRvbj5TbGlkZXM8L2J1dHRvbj48L2Rpdj5cXG4gIDxkaXYgaWQ9J3NsaWRlLW51bScgc3R5bGU9J2Zsb2F0OiByaWdodDsgbWFyZ2luLXJpZ2h0OiAxMHB4Jz48L2Rpdj5cXG48L2Rpdj5cIik7XG4gICAgbWFya3VwQnV0dG9ucyhkaXYpO1xuICAgIGVsLmFwcGVuZENoaWxkKGRpdik7XG4gICAgaWYgKGxvY2F0aW9uLnNlYXJjaCAmJiBfLmZpbmQobG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCcmJyksIChmdW5jdGlvbihwKSB7XG4gICAgICByZXR1cm4gcC5tYXRjaCgvXnNsaWRlcz0vKTtcbiAgICB9KSkpIHtcbiAgICAgIHNsaWRpbmcgPSB0cnVlO1xuICAgICAgc2hvd1NsaWRlKCQoY2hvb3NlU2xpZGUoKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3Njcm9sbCcpO1xuICAgIH1cbiAgICByZXR1cm4gaGFzQ29kZTtcbiAgfTtcblxuICBtYXJrdXBTbGlkZUNvbnRlbnQgPSBmdW5jdGlvbihlbCwgbWQsIG5vTWFpbikge1xuICAgIHZhciBjb250ZW50LCBoYXNDb2RlLCBpLCBtLCBwLCBwYWdlVHlwZSwgcGFnZXMsIF9pLCBfcmVmMSwgX3JlZjI7XG5cbiAgICBwYWdlcyA9IG1kLnNwbGl0KHNsaWRlUGF0KTtcbiAgICBoYXNDb2RlID0gZmFsc2U7XG4gICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnc2xpZGUtY29udGFpbmVyJyk7XG4gICAgICBlbC5pbm5lckhUTUwgPSAnJztcbiAgICAgIGJpbmRTbGlkZXIoKTtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZG9jJyk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoID09PSAzICYmICFwYWdlc1swXSAmJiAhcGFnZXNbMl0pIHtcbiAgICAgICAgcGFnZXNbMl0gPSAnXFxuJztcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZjEgPSBwYWdlcy5sZW5ndGg7IF9pIDwgX3JlZjE7IGkgPSBfaSArPSAyKSB7XG4gICAgICAgIHAgPSBwYWdlc1tpXTtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICBwYWdlVHlwZSA9IGkgPiAwID8gKG0gPSAoX3JlZjIgPSBwYWdlc1tpIC0gMV0ubWF0Y2goc2xpZGVQYXQpKSAhPSBudWxsID8gX3JlZjJbMV0gOiB2b2lkIDAsIG0ubWF0Y2goL1xcbi1cXG4vKSA/IFsnY29udGludWF0aW9uJywgJ2hpZGRlblBhZ2UnXSA6IG0ubWF0Y2goL1xcbi0tXFxuLykgPyBbJ2hpZGRlblBhZ2UnLCAnc2VjcmV0UGFnZSddIDogW10pIDogW107XG4gICAgICAgICAgY29udGVudCA9IG1ha2VTbGlkZURpdihlbCwgcGFnZVR5cGUsIChpID4gMCA/IHBhZ2VzW2kgLSAxXS5tYXRjaChzbGlkZU5hbWUpWzFdLnRyaW0oKSA6ICdNYWluJykpO1xuICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaGFzQ29kZSA9IChtYXJrdXBFbGVtZW50KGNvbnRlbnQsIHBhZ2VzW2kgLSAxXSArIHApKSB8fCBoYXNDb2RlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoYXNDb2RlID0gKG1hcmt1cEVsZW1lbnQoY29udGVudCwgJyoqKlxcbicgKyBwKSkgfHwgaGFzQ29kZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFkU2xpZGUoY29udGVudCwgKGkgPiAwID8gcGFnZXNbaSAtIDFdIDogJyoqKlxcbicpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50ID0gbWFrZVNsaWRlRGl2KGVsLCBbJ3BhZ2UnXSwgJ01haW4nKTtcbiAgICAgIHdoaWxlIChlbC5maXJzdENoaWxkICE9PSBjb250ZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbC5maXJzdENoaWxkKTtcbiAgICAgIH1cbiAgICAgIGhhc0NvZGUgPSBtYXJrdXBFbGVtZW50KGNvbnRlbnQsIG1kKTtcbiAgICAgIHBhZFNsaWRlKGNvbnRlbnQsICcqKipcXG4nKTtcbiAgICAgIGlmIChub01haW4pIHtcbiAgICAgICAgdW53cmFwQ29udGVudChjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhc0NvZGU7XG4gIH07XG5cbiAgcGFkU2xpZGUgPSBmdW5jdGlvbihjb250ZW50LCBoZWFkZXIpIHtcbiAgICB2YXIgZGl2LCByYW5nZTtcblxuICAgIGlmICghY29udGVudC5maXJzdENoaWxkIHx8IGlzTGVpc3VyZUNvZGUoY29udGVudC5maXJzdENoaWxkKSkge1xuICAgICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcmFuZ2Uuc2V0U3RhcnQoY29udGVudCwgMCk7XG4gICAgICByYW5nZS5zZXRFbmQoY29udGVudCwgMCk7XG4gICAgICBkaXYgPSBtYWtlTWFya3VwRGl2KHJhbmdlLCBoZWFkZXIpO1xuICAgICAgZGl2LmFwcGVuZENoaWxkKGNyZWF0ZU5vZGUoJzxicj4nKSk7XG4gICAgfVxuICAgIGlmIChpc0xlaXN1cmVDb2RlKGNvbnRlbnQubGFzdENoaWxkKSkge1xuICAgICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihjb250ZW50Lmxhc3RDaGlsZCk7XG4gICAgICByYW5nZS5zZXRFbmRBZnRlcihjb250ZW50Lmxhc3RDaGlsZCk7XG4gICAgICBkaXYgPSBtYWtlTWFya3VwRGl2KHJhbmdlLCAnXFxuJyk7XG4gICAgICByZXR1cm4gZGl2LmFwcGVuZENoaWxkKGNyZWF0ZU5vZGUoJzxicj4nKSk7XG4gICAgfVxuICB9O1xuXG4gIHVud3JhcENvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgdmFyIGVsLCBzZWN0aW9uO1xuXG4gICAgc2VjdGlvbiA9IGNvbnRlbnQucGFyZW50Tm9kZTtcbiAgICBlbCA9IHNlY3Rpb24ucGFyZW50Tm9kZTtcbiAgICBlbC5pbnNlcnRCZWZvcmUoY29udGVudCwgc2VjdGlvbik7XG4gICAgcmVtb3ZlKHNlY3Rpb24pO1xuICAgIHJldHVybiB1bndyYXAoY29udGVudCk7XG4gIH07XG5cbiAgbWFrZVNsaWRlRGl2ID0gZnVuY3Rpb24oZWwsIHBhZ2VUeXBlcywgdGl0bGUpIHtcbiAgICB2YXIgY29udGVudCwgZGl2LCBwYWdlVHlwZSwgc2VjdGlvblRpdGxlLCBfaSwgX2xlbjtcblxuICAgIGxhc3RTbGlkZSA9IGRpdiA9IGNyZWF0ZU5vZGUoXCI8ZGl2IGNsYXNzPSdsZWlzdXJlX3BhZ2UnPjwvZGl2PlwiKTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdsZWlzdXJlU2VjdGlvbicsIHRpdGxlKTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdkb2MnLCAnJyk7XG4gICAgZGl2LnNldEF0dHJpYnV0ZSgnc2xpZGUnLCAnJyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3NsaWRlJyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3VpLWNvcm5lci1hbGwnKTtcbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgndWktd2lkZ2V0Jyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3VpLXdpZGdldC1jb250ZW50Jyk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBwYWdlVHlwZXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIHBhZ2VUeXBlID0gcGFnZVR5cGVzW19pXTtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKHBhZ2VUeXBlKTtcbiAgICB9XG4gICAgZWwuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBzZWN0aW9uVGl0bGUgPSBjcmVhdGVOb2RlKFwiPGRpdiBjbGFzcz0ncGFnZVRpdGxlJz5cIiArIHRpdGxlICsgXCI8L2Rpdj5cIik7XG4gICAgc2VjdGlvblRpdGxlLnNldEF0dHJpYnV0ZSgnbGVpc3VyZW91dHB1dCcsICcnKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoc2VjdGlvblRpdGxlKTtcbiAgICBjb250ZW50ID0gY3JlYXRlTm9kZShcIjxkaXYgY2xhc3M9J3BhZ2VDb250ZW50Jz48L2Rpdj5cIik7XG4gICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgIHJldHVybiBjb250ZW50O1xuICB9O1xuXG4gIGNob29zZVNsaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhcmFtO1xuXG4gICAgcGFyYW0gPSBfLmZpbmQobG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCcmJyksIChmdW5jdGlvbihwKSB7XG4gICAgICByZXR1cm4gcC5tYXRjaCgvXnNsaWRlPS4qLyk7XG4gICAgfSkpO1xuICAgIGNvbnNvbGUubG9nKHBhcmFtKTtcbiAgICBpZiAocGFyYW0pIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW3NsaWRlPSdcIiArIChwYXJhbS5zcGxpdCgnPScpWzFdKSArIFwiJ11cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbWFpbmRvY10nKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG4gIH07XG5cbiAgb2xkU2xpZGUgPSAwO1xuXG4gIHdpbmRvdy50b2dnbGVTbGlkZVNob3cgPSBmdW5jdGlvbigpIHtcbiAgICBzbGlkaW5nID0gJChkb2N1bWVudC5ib2R5KS5pcygnLnNjcm9sbCcpO1xuICAgIGVuYWJsZVNsaWRlQ29udHJvbHModHJ1ZSk7XG4gICAgZW5hYmxlRWRpdGluZyh0cnVlKTtcbiAgICBpZiAoc2xpZGluZykge1xuICAgICAgJChkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcygnc2Nyb2xsJyk7XG4gICAgICByZXR1cm4gc2hvd1NsaWRlKG50aFNsaWRlKG9sZFNsaWRlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9sZFNsaWRlID0gJCgnLnNsaWRlLnNob3dpbmcnKS5hdHRyKCdzbGlkZScpO1xuICAgICAgaGlkZVNsaWRlKCQoJy5zbGlkZS5zaG93aW5nJykpO1xuICAgICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcygnc2Nyb2xsJyk7XG4gICAgICByZXR1cm4gJCgnI3NsaWRlLW51bScpLmh0bWwoJycpO1xuICAgIH1cbiAgfTtcblxuICBiaW5kU2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHNsaWRlS2V5TGlzdGVuZXIpO1xuICB9O1xuXG4gIHNsaWRlQ29udHJvbHMgPSBbUSwgRVNDLCBMRUZUX0FSUk9XLCBSSUdIVF9BUlJPVywgSE9NRSwgRU5ELCBQQUdFX1VQLCBQQUdFX0RPV05dO1xuXG4gIHNsaWRlQ29udHJvbHNFbmFibGVkID0gdHJ1ZTtcblxuICBlbmFibGVTbGlkZUNvbnRyb2xzID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICByZXR1cm4gc2xpZGVDb250cm9sc0VuYWJsZWQgPSBzdGF0ZTtcbiAgfTtcblxuICBwcmVzZW50U2xpZGUgPSBmdW5jdGlvbihzKSB7XG4gICAgaGlkZVNsaWRlKCQoJy5zbGlkZS5zaG93aW5nJykpO1xuICAgIHJldHVybiBzaG93U2xpZGUocyk7XG4gIH07XG5cbiAgZmlyc3RTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzbGlkZXMoKTtcbiAgfTtcblxuICBsYXN0U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2xpZGVzKCkubGFzdCgpO1xuICB9O1xuXG4gIHByZXZTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuO1xuXG4gICAgbiA9ICQoJy5zbGlkZS5zaG93aW5nJykucHJldkFsbCgnW3NsaWRlXScpLm5vdCgnW2xlaXN1cmVTZWN0aW9uPVwiTGVpc3VyZSBDb250cm9sc1wiXScpLm5vdCgnLmhpZGRlblBhZ2UnKS5ub3QoJy5zZWNyZXRQYWdlJyk7XG4gICAgaWYgKG4ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNsaWRlcygpO1xuICAgIH1cbiAgfTtcblxuICBuZXh0U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbjtcblxuICAgIG4gPSAkKCcuc2xpZGUuc2hvd2luZycpLm5leHRBbGwoJ1tzbGlkZV0nKS5ub3QoJ1tsZWlzdXJlU2VjdGlvbj1cIkxlaXN1cmUgQ29udHJvbHNcIl0nKS5ub3QoJy5oaWRkZW5QYWdlJykubm90KCcuc2VjcmV0UGFnZScpO1xuICAgIGlmIChuLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG47XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAkKCcuc2xpZGUuc2hvd2luZycpO1xuICAgIH1cbiAgfTtcblxuICBzbGlkZUtleUxpc3RlbmVyID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBjO1xuXG4gICAgaWYgKHNsaWRpbmcpIHtcbiAgICAgIHdpbmRvdy5ldnQgPSBlO1xuICAgICAgYyA9IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlIHx8IGUud2hpY2g7XG4gICAgICBpZiAoKF9faW5kZXhPZi5jYWxsKHNsaWRlQ29udHJvbHMsIGMpID49IDApICYmICEkKGUudGFyZ2V0KS5pcygnW2xlaXN1cmVub2RlPWNvZGVdLFtsZWlzdXJlbm9kZT1jb2RlXSAqJykgJiYgc2xpZGVDb250cm9sc0VuYWJsZWQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoYyA9PT0gRVNDKSB7XG4gICAgICAgICAgcmV0dXJuIHRvZ2dsZVNsaWRlU2hvdygpO1xuICAgICAgICB9IGVsc2UgaWYgKGMgPT09IFEpIHtcbiAgICAgICAgICByZXR1cm4gY2xvc2VXaW5kb3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcHJlc2VudFNsaWRlKCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICAgICAgY2FzZSBIT01FOlxuICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdFNsaWRlKCk7XG4gICAgICAgICAgICAgIGNhc2UgRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0U2xpZGUoKTtcbiAgICAgICAgICAgICAgY2FzZSBMRUZUX0FSUk9XOlxuICAgICAgICAgICAgICBjYXNlIFBBR0VfVVA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXZTbGlkZSgpO1xuICAgICAgICAgICAgICBjYXNlIFJJR0hUX0FSUk9XOlxuICAgICAgICAgICAgICBjYXNlIFBBR0VfRE9XTjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dFNsaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkoKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHNsaWRlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKCdbc2xpZGVdJykubm90KCdbbGVpc3VyZVNlY3Rpb249XCJMZWlzdXJlIENvbnRyb2xzXCJdJykubm90KCcuaGlkZGVuUGFnZScpLm5vdCgnLnNlY3JldFBhZ2UnKTtcbiAgfTtcblxuICBudGhTbGlkZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gc2xpZGVzKCkuc2xpY2Uobik7XG4gIH07XG5cbiAgY291bnRTbGlkZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGNvdW50LCBuLCBzbGlkZSwgX2ksIF9sZW4sIF9yZWYxO1xuXG4gICAgbiA9IC0xO1xuICAgIGNvdW50ID0gMDtcbiAgICBfcmVmMSA9IHNsaWRlcygpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIHNsaWRlID0gX3JlZjFbX2ldO1xuICAgICAgY291bnQrKztcbiAgICAgIGlmIChzbGlkZSA9PT0gZWwpIHtcbiAgICAgICAgbiA9IGNvdW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW24sIGNvdW50XTtcbiAgfTtcblxuICBzaG93U2xpZGUgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBjb3VudCwgbiwgX3JlZjE7XG5cbiAgICBfcmVmMSA9IGNvdW50U2xpZGUoZWxbMF0pLCBuID0gX3JlZjFbMF0sIGNvdW50ID0gX3JlZjFbMV07XG4gICAgb2xkU2xpZGUgPSBuO1xuICAgICQoJyNzbGlkZS1udW0nKS5odG1sKFwiXCIgKyBuICsgXCIgLyBcIiArIGNvdW50KTtcbiAgICByZXR1cm4gJChlbCkuZmlyc3QoKS5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ3Nob3dpbmcnKTtcbiAgfTtcblxuICBoaWRlU2xpZGUgPSBmdW5jdGlvbihlbCkge1xuICAgIHJldHVybiAkKGVsKS5maXJzdCgpLmFkZENsYXNzKCdoaWRkZW4nKS5yZW1vdmVDbGFzcygnc2hvd2luZycpO1xuICB9O1xuXG4gIG1hcmt1cEVsZW1lbnQgPSBmdW5jdGlvbihlbCwgbWQpIHtcbiAgICB2YXIgY29kZSwgY29kZVBvcywgbGVuLCBsZXgsIG1hcmt1cCwgbm9kZSwgcHJldiwgcHJldkNvZGVQb3MsIHJhbmdlLCBzbGlkZSwgX2ksIF9sZW4sIF9yZWYxLCBfcmVmMiwgX3JlZjM7XG5cbiAgICBsZW4gPSBtZC5sZW5ndGg7XG4gICAgc2xpZGUgPSAoX3JlZjEgPSBtZC5tYXRjaChzbGlkZVBhdCkpICE9IG51bGwgPyBfcmVmMSA6ICcnO1xuICAgIF9yZWYyID0gd2luZG93Lm1hcmtlZCgoc2xpZGUgPyBtZC5zbGljZShzbGlkZVswXS5sZW5ndGgpIDogbWQpLCB7XG4gICAgICBzYXZlTGV4OiB0cnVlLFxuICAgICAgZ2ZtOiB0cnVlXG4gICAgfSksIG1hcmt1cCA9IF9yZWYyWzBdLCBsZXggPSBfcmVmMlsxXTtcbiAgICBlbC5pbm5lckhUTUwgPSBtYXJrdXAudHJpbSgpIHx8ICc8YnI+JztcbiAgICBwcmV2ID0gbnVsbDtcbiAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcHJldkNvZGVQb3MgPSAtMTtcbiAgICBjb2RlUG9zID0gMDtcbiAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvZGUnKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjNbX2ldO1xuICAgICAgd2hpbGUgKGxleFtjb2RlUG9zXS50eXBlICE9PSAnY29kZScpIHtcbiAgICAgICAgY29kZVBvcysrO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZS50YWdOYW1lICE9PSAnUFJFJykge1xuICAgICAgICBjb2RlID0gbm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgIGNvZGUuaW5uZXJIVE1MID0gbm9kZS5pbm5lckhUTUw7XG4gICAgICB9XG4gICAgICBjb2RlLnNldEF0dHJpYnV0ZSgnbm9MZWlzdXJlQmFyJywgJycpO1xuICAgICAgY29kZS5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJywgJ2NvZGUnKTtcbiAgICAgIGNvZGUubWQgPSBsZXhbY29kZVBvc10udGV4dDtcbiAgICAgIGlmIChjb2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCAhPT0gY29kZSkge1xuICAgICAgICBpZiAocHJldiA9PT0gbnVsbCB8fCBwcmV2LnBhcmVudE5vZGUgIT09IGNvZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KGNvZGUucGFyZW50Tm9kZSwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihwcmV2KTtcbiAgICAgICAgfVxuICAgICAgICByYW5nZS5zZXRFbmRCZWZvcmUoY29kZSk7XG4gICAgICAgIG1ha2VNYXJrdXBEaXYocmFuZ2UsIG1kLnN1YnN0cmluZygocHJldkNvZGVQb3MgPT09IC0xID8gMCA6IGxlbiAtIGxleFtwcmV2Q29kZVBvc10ucmVtYWluKSwgbGVuIC0gbGV4W2NvZGVQb3NdLnJlbWFpbiAtIGxleFtjb2RlUG9zXS50ZXh0TGVuKSk7XG4gICAgICB9XG4gICAgICBwcmV2Q29kZVBvcyA9IGNvZGVQb3M7XG4gICAgICBjb2RlUG9zKys7XG4gICAgICBwcmV2ID0gY29kZTtcbiAgICB9XG4gICAgaWYgKHByZXZDb2RlUG9zID4gLTEpIHtcbiAgICAgIGlmIChsZXhbcHJldkNvZGVQb3NdLnJlbWFpbiA+IDApIHtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHByZXYucGFyZW50Tm9kZSk7XG4gICAgICAgIHJhbmdlLnNldFN0YXJ0QWZ0ZXIocHJldik7XG4gICAgICAgIG1ha2VNYXJrdXBEaXYocmFuZ2UsIG1kLnN1YnN0cmluZyhsZW4gLSBsZXhbcHJldkNvZGVQb3NdLnJlbWFpbikpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoZWwpO1xuICAgICAgbWFrZU1hcmt1cERpdihyYW5nZSwgbWQpO1xuICAgIH1cbiAgICByZXR1cm4gcHJldkNvZGVQb3MgPiAtMTtcbiAgfTtcblxuICBoYW5kbGVJbnRlcm5hbFNlY3Rpb25zID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgIHZhciBiZWZvcmUsIGlubmVyU2VjdGlvbnMsIG1hcmtlciwgbm9kZSwgbm9kZUNvbnRlbnQsIG5vZGVUaXRsZSwgcHJldiwgc2VjdGlvbiwgc2VjdGlvbkhvbGRlciwgdGl0bGUsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYxO1xuXG4gICAgc2VjdGlvbiA9IGNvbnRlbnQucGFyZW50Tm9kZTtcbiAgICBzZWN0aW9uSG9sZGVyID0gc2VjdGlvbi5wYXJlbnROb2RlO1xuICAgIGlubmVyU2VjdGlvbnMgPSBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsZWlzdXJlU2VjdGlvbl0nKTtcbiAgICBpZiAoaW5uZXJTZWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICghKChfcmVmMSA9IGNvbnRlbnQuZmlyc3RDaGlsZC5tZCkgIT0gbnVsbCA/IF9yZWYxLm1hdGNoKC9eXFwqXFwqXFwqLykgOiB2b2lkIDApKSB7XG4gICAgICAgIGlmICghc2VjdGlvbi5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgICByZXR1cm4gc2VjdGlvbi5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVTZWN0aW9uJywgJ01haW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2ID0gc2VjdGlvbi5wcmV2aW91c1NpYmxpbmcucXVlcnlTZWxlY3RvcignLnBhZ2VDb250ZW50Jyk7XG4gICAgICAgICAgd2hpbGUgKGNvbnRlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgbWVyZ2VVcChjb250ZW50LmZpcnN0Q2hpbGQsIHByZXYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVtb3ZlKHNlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpdGxlID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVTZWN0aW9uJyk7XG4gICAgICBiZWZvcmUgPSBmYWxzZTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gaW5uZXJTZWN0aW9ucy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBub2RlID0gaW5uZXJTZWN0aW9uc1tfaV07XG4gICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKSA9PT0gdGl0bGUpIHtcbiAgICAgICAgICBiZWZvcmUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiZWZvcmUgPSBiZWZvcmUgfHwgKCFpbm5lclNlY3Rpb25zWzBdLnByZXZpb3VzU2libGluZyk7XG4gICAgICBtYXJrZXIgPSBzZWN0aW9uO1xuICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gaW5uZXJTZWN0aW9ucy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgbm9kZSA9IGlubmVyU2VjdGlvbnNbX2pdO1xuICAgICAgICBub2RlVGl0bGUgPSBub2RlLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKTtcbiAgICAgICAgbm9kZUNvbnRlbnQgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5wYWdlQ29udGVudCcpO1xuICAgICAgICBpZiAobm9kZVRpdGxlID09PSB0aXRsZSB8fCAobm9kZS5wcmV2aW91c1NpYmxpbmcgJiYgbm9kZVRpdGxlID09PSAnTWFpbicpKSB7XG4gICAgICAgICAgaWYgKG5vZGVUaXRsZSA9PT0gdGl0bGUpIHtcbiAgICAgICAgICAgIGJlZm9yZSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aGlsZSAobm9kZUNvbnRlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgY29udGVudC5pbnNlcnRCZWZvcmUobm9kZUNvbnRlbnQuZmlyc3RDaGlsZCwgbm9kZSk7XG4gICAgICAgICAgICBtZXJnZUxlaXN1cmVDb2RlKG5vZGUucHJldmlvdXNTaWJsaW5nLCBub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVtb3ZlKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdoaWxlIChub2RlLm5leHRTaWJsaW5nICYmICFub2RlLm5leHRTaWJsaW5nLmdldEF0dHJpYnV0ZSgnbGVpc3VyZVNlY3Rpb24nKSkge1xuICAgICAgICAgICAgbWVyZ2VVcChub2RlLm5leHRTaWJsaW5nLCBub2RlQ29udGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhZFNsaWRlKG5vZGVDb250ZW50LCBcIioqKlwiICsgbm9kZVRpdGxlICsgXCJcXG5cIik7XG4gICAgICAgICAgaWYgKGJlZm9yZSkge1xuICAgICAgICAgICAgc2VjdGlvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBzZWN0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VjdGlvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBtYXJrZXIubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgbWFya2VyID0gbm9kZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghY29udGVudC5maXJzdENoaWxkKSB7XG4gICAgICAgIHJldHVybiByZW1vdmUoc2VjdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFkU2xpZGUoY29udGVudCwgXCIqKipcIiArIHRpdGxlICsgXCJcXG5cIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG1lcmdlVXAgPSBmdW5jdGlvbihlbCwgbmV3UGFyZW50KSB7XG4gICAgbmV3UGFyZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgICByZXR1cm4gbWVyZ2VMZWlzdXJlQ29kZShuZXdQYXJlbnQubGFzdENoaWxkLnByZXZpb3VzU2libGluZywgbmV3UGFyZW50Lmxhc3RDaGlsZCk7XG4gIH07XG5cbiAgbWFrZVNlY3Rpb24gPSBmdW5jdGlvbih0aXRsZSwgbm9kZSwgbmV4dCkge1xuICAgIHZhciBkaXY7XG5cbiAgICBkaXYgPSBjcmVhdGVOb2RlKFwiPGRpdiBsZWlzdXJlU2VjdGlvbj0nXCIgKyB0aXRsZSArIFwiJz48L2Rpdj5cIik7XG4gICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkaXYsIG5vZGUpO1xuICAgIHdoaWxlIChkaXYubmV4dFNpYmxpbmcgJiYgZGl2Lm5leHRTaWJsaW5nICE9PSBuZXh0KSB7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2Lm5leHRTaWJsaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcblxuICBtYWtlTWFya3VwRGl2ID0gZnVuY3Rpb24ocmFuZ2UsIG1kKSB7XG4gICAgdmFyIGRpdjtcblxuICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJhbmdlLnN1cnJvdW5kQ29udGVudHMoZGl2KTtcbiAgICBkaXYubWQgPSBtZDtcbiAgICBiaW5kTWFya3VwRGl2KGRpdik7XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcblxuICBlZGl0aW5nRW5hYmxlZCA9IHRydWU7XG5cbiAgZW5hYmxlRWRpdGluZyA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgcmV0dXJuIGVkaXRpbmdFbmFibGVkID0gc3RhdGU7XG4gIH07XG5cbiAgYmluZE1hcmt1cERpdiA9IGZ1bmN0aW9uKGRpdikge1xuICAgIHZhciBlZGl0aW5nO1xuXG4gICAgZGl2LmJvdW5kID0gdHJ1ZTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKCdsZWlzdXJlTm9kZScsICdtYXJrZG93bicpO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICdmYWxzZScpO1xuICAgIGVkaXRpbmcgPSBmYWxzZTtcbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIWVkaXRpbmcgJiYgZWRpdGluZ0VuYWJsZWQpIHtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQodGV4dE5vZGUoZGl2Lm1kKSk7XG4gICAgICAgIGRpdi5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZS13cmFwJztcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ3RydWUnKTtcbiAgICAgICAgZWRpdGluZyA9IHRydWU7XG4gICAgICAgIGRpdi5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnZWRpdGluZycsICd0cnVlJyk7XG4gICAgICAgIHJldHVybiBkaXYuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgYnIsIHIsIHM7XG5cbiAgICAgIGlmIChlZGl0aW5nKSB7XG4gICAgICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHIgPSBzLmdldFJhbmdlQXQoMCk7XG4gICAgICAgIGlmICgoZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IEVOVEVSKSB7XG4gICAgICAgICAgYnIgPSB0ZXh0Tm9kZSgnXFxuJyk7XG4gICAgICAgICAgci5pbnNlcnROb2RlKGJyKTtcbiAgICAgICAgICByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICByLnNldFN0YXJ0KGJyLCAxKTtcbiAgICAgICAgICBzLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgIHMuYWRkUmFuZ2Uocik7XG4gICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkaXYuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBmaXJzdCwgZnJhZywgbGFzdCwgbm9kZSwgcGFyZW50LCBwcmV2U2VjdGlvbiwgciwgc2Nyb2xsLCBfaSwgX2xlbiwgX3JlZjEsIF9yZWYyO1xuXG4gICAgICBpZiAoZWRpdGluZykge1xuICAgICAgICBzY3JvbGwgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgZGl2LnN0eWxlLndoaXRlU3BhY2UgPSAnJztcbiAgICAgICAgZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2VkaXRpbmcnKTtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgIHByZXZTZWN0aW9uID0gKF9yZWYxID0gZGl2LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcpICE9IG51bGwgPyBfcmVmMS5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVTZWN0aW9uJykgOiB2b2lkIDA7XG4gICAgICAgIHBhcmVudCA9IGRpdi5wYXJlbnROb2RlO1xuICAgICAgICBpZiAobWFya3VwU2xpZGVDb250ZW50KGRpdiwgZGl2LnRleHRDb250ZW50LCBwcmV2U2VjdGlvbiAmJiBwcmV2U2VjdGlvbiAhPT0gJ0xlaXN1cmUgQ29udHJvbHMnKSkge1xuICAgICAgICAgIF9yZWYyID0gZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbGVpc3VyZW5vZGU9J2NvZGUnXVwiKTtcbiAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBub2RlID0gX3JlZjJbX2ldO1xuICAgICAgICAgICAgcHJlc2VudExlaXN1cmVDb2RlKG5vZGUsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXYudGV4dENvbnRlbnQudHJpbSgpID09PSAnJykge1xuICAgICAgICAgIGNsZWFuRW1wdHlOb2RlcyhkaXYpO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhkaXYpO1xuICAgICAgICBmcmFnID0gci5leHRyYWN0Q29udGVudHMoKTtcbiAgICAgICAgZmlyc3QgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG4gICAgICAgIGxhc3QgPSBmcmFnLmNoaWxkTm9kZXNbZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGZyYWcsIGRpdik7XG4gICAgICAgIG1lcmdlTGVpc3VyZUNvZGUocHJldmlvdXNTaWJsaW5nKGZpcnN0KSwgZmlyc3QpO1xuICAgICAgICBtZXJnZUxlaXN1cmVDb2RlKGxhc3QsIG5leHRTaWJsaW5nKGxhc3QpKTtcbiAgICAgICAgaGFuZGxlSW50ZXJuYWxTZWN0aW9ucyhwYXJlbnQpO1xuICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gc2Nyb2xsO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBOb3RlYm9vay5tYXJrdXBFbGVtZW50ID0gbWFya3VwRWxlbWVudDtcblxuICBOb3RlYm9vay5lbmFibGVTbGlkZUNvbnRyb2xzID0gZW5hYmxlU2xpZGVDb250cm9scztcblxuICBOb3RlYm9vay5lbmFibGVFZGl0aW5nID0gZW5hYmxlRWRpdGluZztcblxuICBOb3RlYm9vay5wcmVzZW50U2xpZGUgPSBwcmVzZW50U2xpZGU7XG5cbiAgTm90ZWJvb2suZmlyc3RTbGlkZSA9IGZpcnN0U2xpZGU7XG5cbiAgTm90ZWJvb2subGFzdFNsaWRlID0gbGFzdFNsaWRlO1xuXG4gIE5vdGVib29rLnByZXZTbGlkZSA9IHByZXZTbGlkZTtcblxuICBOb3RlYm9vay5uZXh0U2xpZGUgPSBuZXh0U2xpZGU7XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1tZC5tYXBcbiovXG4iLCIoZnVuY3Rpb24oZ2xvYmFsKXsvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG4vKlxuIyB1c2UgYW4gZWxlbWVudCBhcyBhIExlaXN1cmUgbm90ZWJvb2tcbiMgT25seSBydW5zIGluIHRoZSBjb250ZXh0IG9mIGEgYnJvd3NlclxuKi9cblxuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBCUywgREVMLCBET1dOX0FSUk9XLCBFTkQsIEVOVEVSLCBFU0MsIEhPTUUsIExFRlRfQVJST1csIExlaXN1cmVfYW5ubywgTmlsLCBQQUdFX0RPV04sIFBBR0VfVVAsIFJJR0hUX0FSUk9XLCBUQUIsIFVQX0FSUk9XLCBVUkksIFh1cywgYWNjZXB0Q29kZSwgYWRkQm94Q2xhc3NlcywgYWRkRGVmQ29udHJvbHMsIGFkZHNMaW5lLCBhbGxvd0V2ZW50cywgYXJyb3dzLCBhdXRvUnVuLCBiYXNlRWxlbWVudHMsIGJhc2VTdHJva2VXaWR0aCwgYmFzaWNDYWxsLCBiaW5kQWxsLCBiaW5kTm90ZWJvb2ssIGJvb3ROb3RlYm9vaywgYm94LCBib3hDbGFzc2VzLCBidXR0b25DbGFzc2VzLCBjLCBjaGFpbkV2YWxOb2RlcywgY2hhbmdlVGhlbWUsIGNoYW5nZVZpZXcsIGNoZWNrRGVsZXRlRXhwciwgY2hlY2tIaWRlU291cmNlLCBjaGVja011dGF0ZUZyb21Nb2RpZmljYXRpb24sIGNsZWFuRW1wdHlOb2RlcywgY2xlYW5PdXRwdXQsIGNsZWFyQXN0LCBjbGVhck91dHB1dEJveCwgY2xlYXJVcGRhdGVzLCBjbGlja1Rlc3QsIGNsb3NlV2luZG93LCBjb2RlQm94LCBjb2RlRm9jdXMsIGNvZGVTcGFuLCBjb25maWd1cmVTYXZlTGluaywgY29udGludWVSYW5nZVBvc2l0aW9uLCBjcmVhdGVGcmFnbWVudCwgY3JlYXRlTm9kZSwgY3JlYXRlUGVlciwgY3JlYXRlU2xpZGVyLCBkZWJ1ZywgZGVmYXVsdEVudiwgZGVmaW5lLCBkZWxheSwgZG9jRm9jdXMsIGVudkZvciwgZXJyU3RyaW5nLCBlc2NhcGVIdG1sLCBldmFsQm94LCBldmFsRG9jLCBldmFsRG9jQ29kZSwgZXZhbE5vZGVzLCBldmFsT3V0cHV0LCBldmFsdWF0aW5nLCBldmFsdWF0aW9uUXVldWUsIGV2ZW50LCBmaWxlbmFtZSwgZmluZEN1cnJlbnRDb2RlSG9sZGVyLCBmaW5kRGVmcywgZmluZFVwZGF0ZVNlbGVjdG9yLCBmb2N1c0JveCwgZm9sZExlZnQsIGdlbiwgZ2V0QW5ub0JvZHksIGdldEFubm9EYXRhLCBnZXRBbm5vTmFtZSwgZ2V0QXN0LCBnZXRCb3gsIGdldERlZk5hbWUsIGdldEVsZW1lbnRDb2RlLCBnZXRFbGVtZW50cywgZ2V0RXhwclNvdXJjZSwgZ2V0SHRtbCwgZ2V0TUREb2N1bWVudCwgZ2V0TWF4U3Ryb2tlV2lkdGgsIGdldFBhcnNlRXJyLCBnZXRSYW5nZVBvc2l0aW9uLCBnZXRSYW5nZVRleHQsIGdldFJhbmdlcywgZ2V0UmVmTmFtZSwgZ2V0U3ZnRWxlbWVudCwgZ2V0VHlwZSwgZ3JwLCBoYW5kbGVLZXksIGhhc0Z1bmMsIGhhc01vbmFkT3V0cHV0LCBoZWFkLCBoaWRkZW5QYXQsIGhpZGVDb250cm9sU2VjdGlvbiwgaGlkZU91dHB1dFNvdXJjZSwgaGlkZVNsaWRlciwgaGlnaGxpZ2h0Tm90ZWJvb2tGdW5jdGlvbiwgaGlnaGxpZ2h0UG9zaXRpb24sIGlkLCBpZGVudGl0eSwgaWdub3JlRGVsZXRlT3V0cHV0Qm94LCBpbml0LCBpbml0Tm90ZWJvb2ssIGluc2VydENvbnRyb2xzLCBpc0RlZiwgaXNMZWlzdXJlQ29kZSwgaXNNb25hZCwgaXNPdXRwdXQsIGlzU2xpZGVyLCBsZWlzdXJlQ29udGV4dFN0cmluZywgbGluZVBhdCwgbGlua1NvdXJjZSwgbG9hZFByb2dyYW0sIGxvYWRlZCwgbWFrZUlkLCBtYWtlTGFiZWwsIG1ha2VNb25hZCwgbWFrZU9wdGlvbiwgbWFrZU91dHB1dEJveCwgbWFrZU91dHB1dENvbnRyb2xzLCBtYWtlUmFuZ2UsIG1ha2VTeW5jTW9uYWQsIG1ha2VUZXN0Qm94LCBtYWtlVGVzdENhc2UsIG1hcmtQYXJ0aWFsQXBwbGllcywgbWFya3VwQnV0dG9uLCBtYXJrdXBCdXR0b25zLCBtYXJrdXBEZWZzLCBtZXJnZUxlaXN1cmVDb2RlLCBuYW1lU3ViLCBuZXh0SWQsIG5leHRTaWJsaW5nLCBub2RlRW5kLCBub2RlRm9yLCBub25wcmludGFibGUsIG51bWJlckVuZCwgbnVtYmVyU3RhcnQsIG9sZEJyYWNrZXRzLCBvd25lciwgcGF0Y2hGdW5jQXN0LCBwZWVyLCBwZWVyR2V0RG9jdW1lbnQsIHBlZXJHZXRGdW5jdGlvbnMsIHBlZXJOb3RpZnlTZWxlY3Rpb24sIHBvc3RMb2FkUXVldWUsIHByZXBFeHByLCBwcmVzZW50TGVpc3VyZUNvZGUsIHByZXNlbnRWYWx1ZSwgcHJldmlvdXNCb3hSYW5nZUludGVybmFsLCBwcmV2aW91c0JveFJhbmdlU3RhcnQsIHByZXZpb3VzU2libGluZywgcHJpbVN2Z01lYXN1cmUsIHByaW1jb25jYXROb2RlcywgcHJpbnRhYmxlLCBwcmludGFibGVDb250cm9sQ2hhcmFjdGVycywgcHJvY2Vzc0xpbmUsIHBzZ24sIHF1ZXVlQWZ0ZXJMb2FkLCByZW1vdmUsIHJlbW92ZUJveENsYXNzZXMsIHJlbW92ZU9sZERlZnMsIHJlcGxhY2VDb250ZW50cywgcmVwbGFjZVJhbmdlLCByZXBsaWNhdGUsIHJlcSwgcm9vdCwgcnVuQXV0bywgcnVuTW9uYWQsIHJ1blRlc3QsIHJ1blRlc3RzLCBzYXZlUHJvZ3JhbSwgc2V0QXN0LCBzZXRGaWxlbmFtZSwgc2V0TWluTWF4LCBzZXRTbmFwcGVyLCBzZXRVcGRhdGUsIHNob3dBc3QsIHNob3dFcnJvciwgc2hvd0ZpbGVuYW1lLCBzaG93RmlsZW5hbWVzLCBzaG93T3V0cHV0U291cmNlLCBzaG93UmVzdWx0LCBzaG93U2xpZGVyQnV0dG9uLCBzaG93U291cmNlLCBza2lwTGVmdE92ZXJPdXRwdXRCb3gsIHNsaWRlciwgc25hcHNob3QsIHN2Z0JldHRlck1lYXN1cmUsIHN2Z01lYXN1cmUsIHN2Z01lYXN1cmVUZXh0LCB0YWlsLCB0ZXN0UGF0LCB0ZXh0Tm9kZSwgdG9EZWZCb3gsIHRvRXhwckJveCwgdG9nZ2xlRWRpdCwgdHJhbnNmb3JtU3Ryb2tlV2lkdGgsIHRyYW5zZm9ybWVkUG9pbnQsIHVud3JhcCwgdXBkYXRlLCB1cGRhdGVQYXQsIHdyYXBSYW5nZSwgeHVzRW52LCBfLCBfcmVmLCBfcmVmMSxcbiAgICBfX3NsaWNlID0gW10uc2xpY2UsXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgY29uc29sZS5sb2coXCJMT0FESU5HIE5PVEVCT09LXCIpO1xuXG4gIF9yZWYgPSByb290ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2FzdCcpLCBuYW1lU3ViID0gX3JlZi5uYW1lU3ViLCBnZXRSZWZOYW1lID0gX3JlZi5nZXRSZWZOYW1lLCBkZWZpbmUgPSBfcmVmLmRlZmluZSwgZm9sZExlZnQgPSBfcmVmLmZvbGRMZWZ0LCBOaWwgPSBfcmVmLk5pbCwgZ2V0VHlwZSA9IF9yZWYuZ2V0VHlwZSwgZ2V0QW5ub05hbWUgPSBfcmVmLmdldEFubm9OYW1lLCBnZXRBbm5vRGF0YSA9IF9yZWYuZ2V0QW5ub0RhdGEsIGdldEFubm9Cb2R5ID0gX3JlZi5nZXRBbm5vQm9keSwgTGVpc3VyZV9hbm5vID0gX3JlZi5MZWlzdXJlX2Fubm87XG5cbiAgX3JlZjEgPSByZXF1aXJlKCcuL3J1bnRpbWUnKSwgaXNNb25hZCA9IF9yZWYxLmlzTW9uYWQsIHJ1bk1vbmFkID0gX3JlZjEucnVuTW9uYWQsIG1ha2VNb25hZCA9IF9yZWYxLm1ha2VNb25hZCwgbWFrZVN5bmNNb25hZCA9IF9yZWYxLm1ha2VTeW5jTW9uYWQsIGlkZW50aXR5ID0gX3JlZjEuaWRlbnRpdHksIGRlZmF1bHRFbnYgPSBfcmVmMS5kZWZhdWx0RW52LCBiYXNpY0NhbGwgPSBfcmVmMS5iYXNpY0NhbGw7XG5cbiAgZ2VuID0gcmVxdWlyZSgnLi9nZW4nKS5nZW47XG5cbiAgVVJJID0gd2luZG93LlVSSTtcblxuICBYdXMgPSB3aW5kb3cuWHVzO1xuXG4gICQgPSB3aW5kb3cuJDtcblxuICBfID0gcmVxdWlyZSgnLi9sb2Rhc2gubWluJyk7XG5cbiAgd2luZG93Lmdsb2JhbCA9IHdpbmRvdztcblxuICBkZWJ1ZyA9IGZhbHNlO1xuXG4gIEJTID0gODtcblxuICBUQUIgPSA5O1xuXG4gIEVOVEVSID0gMTM7XG5cbiAgRVNDID0gMjc7XG5cbiAgUEFHRV9VUCA9IDMzO1xuXG4gIFBBR0VfRE9XTiA9IDM0O1xuXG4gIEVORCA9IDM1O1xuXG4gIEhPTUUgPSAzNjtcblxuICBMRUZUX0FSUk9XID0gMzc7XG5cbiAgVVBfQVJST1cgPSAzODtcblxuICBSSUdIVF9BUlJPVyA9IDM5O1xuXG4gIERPV05fQVJST1cgPSA0MDtcblxuICBERUwgPSA0NjtcblxuICBhcnJvd3MgPSBbMzcsIDM4LCAzOSwgNDBdO1xuXG4gIHVwZGF0ZVBhdCA9IC8oXnxcXG4pKCNAdXBkYXRlICkoW15cXG5dKykoPzpefFxcbikvO1xuXG4gIHBlZXIgPSBudWxsO1xuXG4gIG5leHRJZCA9IDA7XG5cbiAgZmlsZW5hbWUgPSBudWxsO1xuXG4gIGV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MsIHdpZGdldDtcblxuICAgIHdpZGdldCA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgcmV0dXJuIGJhc2ljQ2FsbChhcmdzLCBlbnZGb3Iod2lkZ2V0KSwgaWRlbnRpdHkpO1xuICB9O1xuXG4gIGRlZmF1bHRFbnYucmVhZEZpbGUgPSBmdW5jdGlvbihmaWxlTmFtZSwgY29udCkge1xuICAgIHZhciB1cmk7XG5cbiAgICB1cmkgPSBuZXcgVVJJKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsIGZpbGVOYW1lKTtcbiAgICBjb25zb2xlLmxvZyhcIlxcblxcbkBAQEBSRUFEIEZJTEU6IFwiICsgdXJpICsgXCJcXG5cXG5cIik7XG4gICAgcmV0dXJuICQuZ2V0KFN0cmluZyh1cmkpKS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHJldHVybiBjb250KG51bGwsIGRhdGEpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oZXJyKSB7XG4gICAgICByZXR1cm4gY29udChlcnIsIG51bGwpO1xuICAgIH0pO1xuICB9O1xuXG4gIGRlZmF1bHRFbnYud3JpdGVGaWxlID0gZnVuY3Rpb24oZmlsZU5hbWUsIGRhdGEsIGNvbnQpIHt9O1xuXG4gIHNuYXBzaG90ID0gZnVuY3Rpb24oZWwsIHBnbSkge307XG5cbiAgc2V0U25hcHBlciA9IGZ1bmN0aW9uKHNuYXBGdW5jKSB7XG4gICAgcmV0dXJuIHNuYXBzaG90ID0gc25hcEZ1bmM7XG4gIH07XG5cbiAgZGVsYXkgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmMsIDEpO1xuICB9O1xuXG4gIGdldFBhcnNlRXJyID0gZ2V0SHRtbCA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUoKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgZXNjYXBlSHRtbCA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bPD5dL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgICAgY2FzZSAnPCc6XG4gICAgICAgICAgICByZXR1cm4gJyZsdDsnO1xuICAgICAgICAgIGNhc2UgJz4nOlxuICAgICAgICAgICAgcmV0dXJuICcmZ3Q7JztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICB9O1xuXG4gIHByZXNlbnRWYWx1ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgY29udGVudDtcblxuICAgIGlmICgoZ2V0VHlwZSh2KSkgPT09ICdzdmdOb2RlJykge1xuICAgICAgY29udGVudCA9IHYoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIF9zdmdQcmVzZW50KCkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoKGdldFR5cGUodikpID09PSAnaHRtbCcpIHtcbiAgICAgIHJldHVybiBnZXRIdG1sKHYpO1xuICAgIH0gZWxzZSBpZiAoKGdldFR5cGUodikpID09PSAncGFyc2VFcnInKSB7XG4gICAgICByZXR1cm4gXCJQQVJTRSBFUlJPUjogXCIgKyAoZ2V0UGFyc2VFcnIodikpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXNjYXBlSHRtbChTdHJpbmcodikpO1xuICAgIH1cbiAgfTtcblxuICBib290Tm90ZWJvb2sgPSBmdW5jdGlvbihlbCkge1xuICAgIGlmICgoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxMaXN0JykpID09IG51bGwpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3JlYXRlTm9kZShcIjxkYXRhbGlzdCBpZD0nY2hhbm5lbExpc3QnPlxcbiAgIDxvcHRpb24gdmFsdWU9Jyc+PC9vcHRpb24+XFxuICAgPG9wdGlvbiB2YWx1ZT0nYXBwJz5hcHA8L29wdGlvbj5cXG4gICA8b3B0aW9uIHZhbHVlPSdjb21waWxlJz5jb21waWxlPC9vcHRpb24+XFxuICAgPG9wdGlvbiB2YWx1ZT0nZWRpdG9yRm9jdXMnPmVkaXRvckZvY3VzPC9vcHRpb24+XFxuPC9kYXRhbGlzdD5cIikpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlUGVlcigpO1xuICB9O1xuXG4gIGNsb3NlV2luZG93ID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coXCJDTE9TSU5HIFdJTkRPV1wiKTtcbiAgICB3aW5kb3cub3BlbignJywgJ19zZWxmJywgJycpO1xuICAgIHJldHVybiB3aW5kb3cuY2xvc2UoKTtcbiAgfTtcblxuICBjcmVhdGVQZWVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGssIHBhcmFtLCBwYXJhbXMsIHNlcnZlciwgdiwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMztcblxuICAgIHJvb3QueHVzU2VydmVyID0gc2VydmVyID0gbmV3IFh1cy5TZXJ2ZXIoKTtcbiAgICBzZXJ2ZXIuZXhpdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGNsb3NlV2luZG93KCk7XG4gICAgfTtcbiAgICBwZWVyID0gcm9vdC5wZWVyID0gWHVzLmNyZWF0ZURpcmVjdFBlZXIoc2VydmVyKTtcbiAgICBwZWVyLnNlcnZlciA9IHNlcnZlcjtcbiAgICBwZWVyLmxpc3RlbignbGVpc3VyZS9zZWxlY3Rpb24vY29udGVudHMnLCB0cnVlLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZSwgciwgcztcblxuICAgICAgaWYgKGtleSA9PT0gJ2xlaXN1cmUvc2VsZWN0aW9uL2NvbnRlbnRzJykge1xuICAgICAgICBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgICBpZiAocy5yYW5nZUNvdW50ICYmIHMudG9TdHJpbmcoKSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICByID0gcy5nZXRSYW5nZUF0KDApO1xuICAgICAgICAgIHIuZGVsZXRlQ29udGVudHMoKTtcbiAgICAgICAgICBub2RlID0gdGV4dE5vZGUodmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgci5pbnNlcnROb2RlKG5vZGUpO1xuICAgICAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgci5zZWxlY3ROb2RlKG5vZGUpO1xuICAgICAgICAgIHJldHVybiBzLmFkZFJhbmdlKHIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcGVlci5zZXQoJ2xlaXN1cmUvZXZhbEV4cHInLCBudWxsLCAndHJhbnNpZW50Jyk7XG4gICAgcGVlci5saXN0ZW4oJ2xlaXN1cmUvZXZhbEV4cHInLCBmYWxzZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgdmFyIGVudiwgZXhwciwgcmVzdWx0O1xuXG4gICAgICBpZiAoa2V5ID09PSAnbGVpc3VyZS9ldmFsRXhwcicgJiYgKHZhbHVlICE9IG51bGwpKSB7XG4gICAgICAgIGV4cHIgPSB2YWx1ZVswXSwgcmVzdWx0ID0gdmFsdWVbMV07XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVZBTDogXCIgKyBleHByICsgXCIsIFJFU1VMVDogXCIgKyByZXN1bHQpO1xuICAgICAgICBlbnYgPSB4dXNFbnYocmVzdWx0LCBleHByKTtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NMaW5lKGV4cHIsIGVudiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiBlbnYuY2xlYW51cCA9PT0gXCJmdW5jdGlvblwiID8gZW52LmNsZWFudXAoKSA6IHZvaWQgMDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcGVlci5zZXQoJ2xlaXN1cmUvZG9jdW1lbnQnLCBwZWVyR2V0RG9jdW1lbnQpO1xuICAgIHBlZXIuc2V0KCdsZWlzdXJlL2Z1bmN0aW9ucycsIHBlZXJHZXRGdW5jdGlvbnMpO1xuICAgIHBlZXIuc2V0KCdsZWlzdXJlL3N0b3JhZ2UnLCBbXSk7XG4gICAgaWYgKEJvb3QuZG9jdW1lbnRGcmFnbWVudCkge1xuICAgICAgcGFyYW1zID0ge307XG4gICAgICBfcmVmMiA9IEJvb3QuZG9jdW1lbnRGcmFnbWVudC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcGFyYW0gPSBfcmVmMltfaV07XG4gICAgICAgIF9yZWYzID0gcGFyYW0uc3BsaXQoJz0nKSwgayA9IF9yZWYzWzBdLCB2ID0gX3JlZjNbMV07XG4gICAgICAgIHBhcmFtc1trLnRvTG93ZXJDYXNlKCldID0gZGVjb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy54dXNwcm94eSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBYdXMueHVzVG9Qcm94eShzZXJ2ZXIsIHBhcmFtcy54dXNwcm94eSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJlcGxhY2VDb250ZW50cyA9IGZ1bmN0aW9uKHVyaSwgY29udGVudHMpIHtcbiAgICBpZiAoIWNvbnRlbnRzKSB7XG4gICAgICBjb250ZW50cyA9IHVyaTtcbiAgICAgIHVyaSA9IG51bGw7XG4gICAgfVxuICAgIGlmICh1cmkpIHtcbiAgICAgIHNldEZpbGVuYW1lKHVyaS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoJ2RvYycsICcnKTtcbiAgICB3aW5kb3cubGVpc3VyZUF1dG9SdW5BbGwgPSB0cnVlO1xuICAgIHdpbmRvdy5tYXJrdXAoY29udGVudHMpO1xuICAgIHJldHVybiBiaW5kQWxsKCk7XG4gIH07XG5cbiAgYmluZEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjI7XG5cbiAgICBfcmVmMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbGVpc3VyZW5vZGU9J2NvZGUnXVwiKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjJbX2ldO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRFZGl0YWJsZScsICd0cnVlJyk7XG4gICAgICBiaW5kTm90ZWJvb2sobm9kZSk7XG4gICAgICBjaGFuZ2VUaGVtZShub2RlLCAndGhpbicpO1xuICAgICAgZXZhbERvYyhub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHNob3dGaWxlbmFtZXMoKTtcbiAgfTtcblxuICB4dXNFbnYgPSBmdW5jdGlvbihyZXN1bHRWYXIsIGV4cHIpIHtcbiAgICB2YXIgZW52LCByZXN1bHQ7XG5cbiAgICByZXN1bHQgPSAnJztcbiAgICBlbnYgPSB7XG4gICAgICBkZWJ1ZzogZGVidWcsXG4gICAgICBmaW5pc2hlZEV2ZW50OiBmdW5jdGlvbigpIHt9LFxuICAgICAgb3duZXI6IG51bGwsXG4gICAgICByZXF1aXJlOiByZXEsXG4gICAgICB3cml0ZTogZnVuY3Rpb24obXNnKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKz0gXCJcIiArIG1zZyArIFwiXFxuXCI7XG4gICAgICB9LFxuICAgICAgcHJvbXB0OiBmdW5jdGlvbihtc2csIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArPSBcIkF0dGVtcHQgdG8gcHJvbXB0IHdpdGggXCIgKyBtc2c7XG4gICAgICB9LFxuICAgICAgcHJvY2Vzc1Jlc3VsdDogZnVuY3Rpb24ocmVzLCBhc3QpIHtcbiAgICAgICAgcmVzdWx0ICs9IHJlcztcbiAgICAgICAgcmV0dXJuIHBlZXIuc2V0KHJlc3VsdFZhciwgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICB9LFxuICAgICAgcHJlc2VudFZhbHVlOiBmdW5jdGlvbih4KSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgICAgfSxcbiAgICAgIGZpbGVTZXR0aW5nczoge1xuICAgICAgICB1cmk6IG5ldyBVUkkoZG9jdW1lbnQubG9jYXRpb24uaHJlZilcbiAgICAgIH0sXG4gICAgICBlcnI6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICByZXN1bHQgKz0gZXJyLmxlaXN1cmVDb250ZXh0ID8gXCJFUlJPUjogXCIgKyBlcnIgKyBcIjpcXG5cIiArIChsZWlzdXJlQ29udGV4dFN0cmluZyhlcnIpKSArIFwiXFxuXCIgKyBlcnIuc3RhY2sgOiBcIkNvdWxkbid0IHBhcnNlOiBcIiArIGV4cHI7XG4gICAgICAgIHJldHVybiBwZWVyLnNldChyZXN1bHRWYXIsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBlbnYuX19wcm90b19fID0gcm9vdC5kZWZhdWx0RW52O1xuICAgIHJldHVybiBlbnY7XG4gIH07XG5cbiAgcGVlckdldERvY3VtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5vZGVzO1xuXG4gICAgbm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2xlaXN1cmVub2RlPSdjb2RlJ11cIik7XG4gICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEgfHwgTm90ZWJvb2subWQpIHtcbiAgICAgIHJldHVybiBnZXRNRERvY3VtZW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXRTaW1wbGVEb2N1bWVudCgpO1xuICAgIH1cbiAgfTtcblxuICBwZWVyR2V0RnVuY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChfLnVuaXEod2luZG93LmxlaXN1cmVGdW5jTmFtZXMudG9BcnJheSgpLnNvcnQoKSwgdHJ1ZSkpLnNvcnQoKTtcbiAgfTtcblxuICBnZXRNRERvY3VtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1kLCBub2RlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzO1xuXG4gICAgbWQgPSAnJztcbiAgICBfcmVmMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkb2NdIFtsZWlzdXJlTm9kZV0nKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjJbX2ldO1xuICAgICAgbWQgKz0gaXNMZWlzdXJlQ29kZShub2RlKSA/IFwiYGBgXFxuXCIgKyAoZ2V0RWxlbWVudENvZGUobm9kZSkpICsgXCJcXG5gYGBcXG5cIiA6IChfcmVmMyA9IG5vZGUubWQpICE9IG51bGwgPyBfcmVmMyA6ICcnO1xuICAgIH1cbiAgICByZXR1cm4gbWQ7XG4gIH07XG5cbiAgbWFrZUlkID0gZnVuY3Rpb24oZWwpIHtcbiAgICBpZiAoIWVsLmlkKSB7XG4gICAgICByZXR1cm4gZWwuaWQgPSBcIkxlaXN1cmUtXCIgKyAobmV4dElkKyspO1xuICAgIH1cbiAgfTtcblxuICBhbGxvd0V2ZW50cyA9IHRydWU7XG5cbiAgaW5pdCA9IGZhbHNlO1xuXG4gIGJpbmROb3RlYm9vayA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgaWYgKCFpbml0KSB7XG4gICAgICBpbml0ID0gdHJ1ZTtcbiAgICAgIGRlZmF1bHRFbnYucHJlc2VudFZhbHVlID0gcHJlc2VudFZhbHVlO1xuICAgICAgZGVmYXVsdEVudi53cml0ZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICByZXR1cm4gY29uc29sZS5sb2cobXNnKTtcbiAgICAgIH07XG4gICAgICBkZWZhdWx0RW52Lm93bmVyID0gZG9jdW1lbnQuYm9keTtcbiAgICAgIGRlZmF1bHRFbnYuZmluaXNoZWRFdmVudCA9IGZ1bmN0aW9uKGV2dCwgY2hhbm5lbCkge1xuICAgICAgICByZXR1cm4gdXBkYXRlKGNoYW5uZWwgIT0gbnVsbCA/IGNoYW5uZWwgOiAnYXBwJywgZGVmYXVsdEVudik7XG4gICAgICB9O1xuICAgICAgZGVmYXVsdEVudi5kZWJ1ZyA9IGRlYnVnO1xuICAgIH1cbiAgICBpZiAoZWwuYm91bmQgPT0gbnVsbCkge1xuICAgICAgbWFrZUlkKGVsKTtcbiAgICAgIGVsLmJvdW5kID0gdHJ1ZTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNoYXJhY3RlckRhdGFNb2RpZmllZCcsIChmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKGFsbG93RXZlbnRzICYmICFlbC5yZXBsYWNpbmcpIHtcbiAgICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tNdXRhdGVGcm9tTW9kaWZpY2F0aW9uKGV2dCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLCB0cnVlKTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTVN1YnRyZWVNb2RpZmllZCcsIChmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKGFsbG93RXZlbnRzICYmICFlbC5yZXBsYWNpbmcpIHtcbiAgICAgICAgICByZXR1cm4gZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tNdXRhdGVGcm9tTW9kaWZpY2F0aW9uKGV2dCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLCB0cnVlKTtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghaXNTbGlkZXIoZS5zcmNFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBoaWdobGlnaHRQb3NpdGlvbihlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksIHRydWUpO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFpc1NsaWRlcihlLnNyY0VsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhpZ2hsaWdodFBvc2l0aW9uKGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSwgdHJ1ZSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFpc1NsaWRlcihlLnNyY0VsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhpZ2hsaWdodFBvc2l0aW9uKGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSwgdHJ1ZSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgYywgciwgcztcblxuICAgICAgICBjID0gZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaDtcbiAgICAgICAgaWYgKGMgPT09IERFTCB8fCBjID09PSBCUykge1xuICAgICAgICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgciA9IHMuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgICBpZiAoYyA9PT0gQlMpIHtcbiAgICAgICAgICAgIGNoZWNrRGVsZXRlRXhwcihnZXRCb3goci5zdGFydENvbnRhaW5lcikpO1xuICAgICAgICAgICAgaWYgKHNraXBMZWZ0T3Zlck91dHB1dEJveChlbCwgcikpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09IERFTCkge1xuICAgICAgICAgICAgY2hlY2tEZWxldGVFeHByKGdldEJveChyLnN0YXJ0Q29udGFpbmVyKSk7XG4gICAgICAgICAgICBpZiAoaWdub3JlRGVsZXRlT3V0cHV0Qm94KGVsLCByKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJpbnRhYmxlKGMpKSB7XG4gICAgICAgICAgY2xlYXJBc3QoZ2V0Qm94KHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKF9faW5kZXhPZi5jYWxsKGFycm93cywgYykgPj0gMCkgfHwgcHJpbnRhYmxlKGMpKSB7XG4gICAgICAgICAgZGVsYXkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaGlnaGxpZ2h0UG9zaXRpb24oZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUuY3RybEtleSAmJiBjID09PSBFTlRFUikge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVLZXkoXCJDLUVOVEVSXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGUuYWx0S2V5ICYmIGMgPT09IEVOVEVSKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZUtleShcIk0tRU5URVJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gVEFCKSB7XG4gICAgICAgICAgaGFuZGxlS2V5KFwiVEFCXCIpO1xuICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBiciwgYngsIHIsIHMsIHNwO1xuXG4gICAgICAgIHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHIgPSBzLmdldFJhbmdlQXQoMCk7XG4gICAgICAgIGlmICgoZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaCkgPT09IEVOVEVSKSB7XG4gICAgICAgICAgYnIgPSB0ZXh0Tm9kZSgnXFxuJyk7XG4gICAgICAgICAgci5pbnNlcnROb2RlKGJyKTtcbiAgICAgICAgICByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICByLnNldFN0YXJ0KGJyLCAxKTtcbiAgICAgICAgICBzLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgIHMuYWRkUmFuZ2Uocik7XG4gICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChyLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUgPT09IGVsKSB7XG4gICAgICAgICAgc3AgPSBjb2RlU3BhbignXFxuJywgJ2NvZGVFeHByJyk7XG4gICAgICAgICAgc3Auc2V0QXR0cmlidXRlKCdnZW5lcmF0ZWROTCcsICcnKTtcbiAgICAgICAgICBieCA9IGJveChzLmdldFJhbmdlQXQoMCksICdjb2RlTWFpbkV4cHInLCB0cnVlKTtcbiAgICAgICAgICBieC5hcHBlbmRDaGlsZChzcCk7XG4gICAgICAgICAgbWFrZU91dHB1dEJveChieCk7XG4gICAgICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgci5zZXRTdGFydChzcCwgMCk7XG4gICAgICAgICAgcy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICByZXR1cm4gcy5hZGRSYW5nZShyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGFsbG93RXZlbnRzKSB7XG4gICAgICAgICAgcmV0dXJuIGZpbmRDdXJyZW50Q29kZUhvbGRlcigpO1xuICAgICAgICB9XG4gICAgICB9KSwgdHJ1ZSk7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYWxsb3dFdmVudHMpIHtcbiAgICAgICAgICByZXR1cm4gZmluZEN1cnJlbnRDb2RlSG9sZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLCB0cnVlKTtcbiAgICAgIGlmICh3aW5kb3cubGVpc3VyZUF1dG9SdW5BbGwpIHtcbiAgICAgICAgYXV0b1J1bihlbCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHJ1blRlc3RzKGVsKTtcbiAgICAgICAgfSksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVsLmF1dG9ydW5TdGF0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjaGVja0RlbGV0ZUV4cHIgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgdmFyIG91dDtcblxuICAgIGlmIChpc091dHB1dChub2RlICYmIG5vZGUub3V0cHV0KSkge1xuICAgICAgb3V0ID0gbm9kZS5vdXRwdXQ7XG4gICAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIW5vZGUudGV4dENvbnRlbnQudHJpbSgpKSB7XG4gICAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgobm9kZS5wYXJlbnROb2RlID09IG51bGwpICYmICgob3V0ICE9IG51bGwgPyBvdXQucGFyZW50Tm9kZSA6IHZvaWQgMCkgIT0gbnVsbCkpIHtcbiAgICAgICAgICByZXR1cm4gb3V0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob3V0KTtcbiAgICAgICAgfVxuICAgICAgfSksIDEpO1xuICAgIH1cbiAgfTtcblxuICBza2lwTGVmdE92ZXJPdXRwdXRCb3ggPSBmdW5jdGlvbihlbCwgcikge1xuICAgIHZhciBib3gsIHM7XG5cbiAgICBlbC5ub3JtYWxpemUoKTtcbiAgICBib3ggPSBwcmV2aW91c0JveFJhbmdlSW50ZXJuYWwocikgfHwgcHJldmlvdXNCb3hSYW5nZVN0YXJ0KHIpO1xuICAgIGlmIChpc091dHB1dChib3gpKSB7XG4gICAgICBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgci5zZWxlY3ROb2RlKGJveCk7XG4gICAgICByLmNvbGxhcHNlKHRydWUpO1xuICAgICAgcy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIHMuYWRkUmFuZ2Uocik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBwcmV2aW91c0JveFJhbmdlSW50ZXJuYWwgPSBmdW5jdGlvbihyKSB7XG4gICAgcmV0dXJuIHIuc3RhcnRDb250YWluZXIubm9kZVR5cGUgPT09IDEgJiYgci5zdGFydE9mZnNldCA+IDAgJiYgci5zdGFydENvbnRhaW5lci5jaGlsZE5vZGVzW3Iuc3RhcnRPZmZzZXQgLSAxXTtcbiAgfTtcblxuICBwcmV2aW91c0JveFJhbmdlU3RhcnQgPSBmdW5jdGlvbihyKSB7XG4gICAgcmV0dXJuIHIuc3RhcnRDb250YWluZXIubm9kZVR5cGUgPT09IDMgJiYgci5zdGFydE9mZnNldCA9PT0gMCAmJiBwcmV2aW91c1NpYmxpbmcoci5zdGFydENvbnRhaW5lcik7XG4gIH07XG5cbiAgaWdub3JlRGVsZXRlT3V0cHV0Qm94ID0gZnVuY3Rpb24oZWwsIHIpIHtcbiAgICB2YXIgbjtcblxuICAgIGVsLm5vcm1hbGl6ZSgpO1xuICAgIGlmIChyLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlID09PSAzICYmIHIuc3RhcnRPZmZzZXQgPT09IHIuc3RhcnRDb250YWluZXIubGVuZ3RoKSB7XG4gICAgICBuID0gci5zdGFydENvbnRhaW5lcjtcbiAgICAgIHdoaWxlIChuICYmIG4ubmV4dFNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgICAgbiA9IG4ucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc091dHB1dChuICE9IG51bGwgPyBuLm5leHRTaWJsaW5nIDogdm9pZCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBpc091dHB1dCA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgcmV0dXJuIChlbCAhPSBudWxsID8gZWwubm9kZVR5cGUgOiB2b2lkIDApID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZSgnTGVpc3VyZU91dHB1dCcpO1xuICB9O1xuXG4gIGlzTGVpc3VyZUNvZGUgPSBmdW5jdGlvbihlbCkge1xuICAgIHJldHVybiAoZWwgIT0gbnVsbCA/IGVsLm5vZGVUeXBlIDogdm9pZCAwKSA9PT0gMSAmJiBlbC5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJykgPT09ICdjb2RlJztcbiAgfTtcblxuICBwZWVyTm90aWZ5U2VsZWN0aW9uID0gZnVuY3Rpb24oZWwsIHN0cikge307XG5cbiAgcHJpbnRhYmxlQ29udHJvbENoYXJhY3RlcnMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9pLCBfbGVuLCBfcmVmMiwgX3Jlc3VsdHM7XG5cbiAgICBfcmVmMiA9IFwiXFxyXFxpXFxuXFxiXCI7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBjID0gX3JlZjJbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChjLmNoYXJDb2RlQXQoMCkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH0pKCk7XG5cbiAgcHJpbnRhYmxlID0gZnVuY3Rpb24oY29kZSkge1xuICAgIHJldHVybiAoY29kZSA+IDB4ZiAmJiBjb2RlIDwgMzcpIHx8IGNvZGUgPiA0MCB8fCBfX2luZGV4T2YuY2FsbChwcmludGFibGVDb250cm9sQ2hhcmFjdGVycywgY29kZSkgPj0gMDtcbiAgfTtcblxuICBub25wcmludGFibGUgPSBudWxsO1xuXG4gIChmdW5jdGlvbigpIHtcbiAgICB2YXIgaSwgcywgX2k7XG5cbiAgICBzID0gJyc7XG4gICAgZm9yIChpID0gX2kgPSAwOyAwIDw9IDB4ZiA/IF9pIDw9IDB4ZiA6IF9pID49IDB4ZjsgaSA9IDAgPD0gMHhmID8gKytfaSA6IC0tX2kpIHtcbiAgICAgIHMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICB9XG4gICAgcy5yZXBsYWNlKC9bXFxpXFxyXFxmXS9nLCAnJyk7XG4gICAgcmV0dXJuIG5vbnByaW50YWJsZSA9IG5ldyBSZWdFeHAoXCJbXCIgKyBzICsgXCJdXCIpO1xuICB9KSgpO1xuXG4gIGhhbmRsZUtleSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHZhciBib3g7XG5cbiAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgY2FzZSBcIkMtRU5URVJcIjpcbiAgICAgIGNhc2UgXCJUQUJcIjpcbiAgICAgICAgYm94ID0gZ2V0Qm94KHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGUpO1xuICAgICAgICBpZiAoKGJveC5nZXRBdHRyaWJ1dGUoJ2NvZGVNYWluRXhwcicpKSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGV2YWxPdXRwdXQoYm94Lm91dHB1dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoKGJveC5nZXRBdHRyaWJ1dGUoJ2NvZGVNYWluJykpICE9IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gYWNjZXB0Q29kZShib3gpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIk0tRU5URVJcIjpcbiAgICAgICAgYm94ID0gZ2V0Qm94KHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGUpO1xuICAgICAgICBpZiAoKGJveC5nZXRBdHRyaWJ1dGUoJ2NvZGVNYWluRXhwcicpKSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGNsZWFyT3V0cHV0Qm94KGJveC5vdXRwdXQpO1xuICAgICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNsZWFyQXN0ID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIGNib3g7XG5cbiAgICBjYm94ID0gZ2V0Qm94KGJveCk7XG4gICAgcmV0dXJuIGNib3ggIT0gbnVsbCA/IGNib3guYXN0ID0gbnVsbCA6IHZvaWQgMDtcbiAgfTtcblxuICBvbGRCcmFja2V0cyA9IFtudWxsLCBOaWxdO1xuXG4gIGNsZWFuRW1wdHlOb2RlcyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIG5leHQsIHByZXYsIF9yZWYyO1xuXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAzICYmIChlbC5wYXJlbnROb2RlICE9IG51bGwpKSB7XG4gICAgICByZXR1cm4gY2xlYW5FbXB0eU5vZGVzKGVsLnBhcmVudE5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2ID0gZWwucHJldmlvdXNTaWJsaW5nO1xuICAgICAgbmV4dCA9IGVsLm5leHRTaWJsaW5nO1xuICAgICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLnRleHRDb250ZW50LnRyaW0oKSA9PT0gJycgJiYgKChfcmVmMiA9IGVsLnBhcmVudE5vZGUpICE9IG51bGwgPyBfcmVmMi5oYXNBdHRyaWJ1dGUoJ2RvYycpIDogdm9pZCAwKSkge1xuICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXh0ID09PSBuZXh0U2libGluZyhwcmV2KSkge1xuICAgICAgICByZXR1cm4gbWVyZ2VMZWlzdXJlQ29kZShwcmV2LCBuZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHJlc2VudExlaXN1cmVDb2RlID0gZnVuY3Rpb24obm9kZSwgZG9FdmFsKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRFZGl0YWJsZScsICd0cnVlJyk7XG4gICAgTm90ZWJvb2suYmluZE5vdGVib29rKG5vZGUpO1xuICAgIE5vdGVib29rLmNoYW5nZVRoZW1lKG5vZGUsICd0aGluJyk7XG4gICAgaWYgKGRvRXZhbCkge1xuICAgICAgcmV0dXJuIGV2YWxEb2Mobm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpbml0Tm90ZWJvb2sobm9kZSk7XG4gICAgfVxuICB9O1xuXG4gIG1lcmdlTGVpc3VyZUNvZGUgPSBmdW5jdGlvbihlbDEsIGVsMikge1xuICAgIHZhciBuZXdDb2RlLCByO1xuXG4gICAgaWYgKGVsMSAmJiBlbDIpIHtcbiAgICAgIGlmIChlbDEubm9kZVR5cGUgPT09IDEgJiYgZWwyLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgIGVsMS5hcHBlbmRDaGlsZChlbDIpO1xuICAgICAgICByZXR1cm4gZWwxLm5vcm1hbGl6ZSgpO1xuICAgICAgfSBlbHNlIGlmIChlbDEubm9kZVR5cGUgPT09IDMgJiYgZWwyLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgIGVsMi5pbnNlcnRCZWZvcmUoZWwxLCBlbDIuZmlyc3RDaGlsZCk7XG4gICAgICAgIHJldHVybiBlbDIubm9ybWFsaXplKCk7XG4gICAgICB9IGVsc2UgaWYgKGVsMS5oYXNBdHRyaWJ1dGUoJ2xlaXN1cmVOb2RlJykgJiYgZWwxLmdldEF0dHJpYnV0ZSgnbGVpc3VyZU5vZGUnKSA9PT0gZWwyLmdldEF0dHJpYnV0ZSgnbGVpc3VyZU5vZGUnKSkge1xuICAgICAgICBuZXdDb2RlID0gdGV4dE5vZGUoZWwxLm1kID0gZWwxLmdldEF0dHJpYnV0ZSgnbGVpc3VyZU5vZGUnKSA9PT0gJ2NvZGUnID8gXCJcIiArIChnZXRFbGVtZW50Q29kZShlbDEpKSArIFwiXFxuXCIgKyAoZ2V0RWxlbWVudENvZGUoZWwyKSkgOiBcIlwiICsgZWwxLm1kICsgXCJcXG5cIiArIGVsMi5tZCk7XG4gICAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhlbDIpO1xuICAgICAgICBlbDEuYXBwZW5kQ2hpbGQodGV4dE5vZGUoJ1xcbicpKTtcbiAgICAgICAgZWwxLmFwcGVuZENoaWxkKHIuZXh0cmFjdENvbnRlbnRzKCkpO1xuICAgICAgICByZXR1cm4gZWwyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwyKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgaGlnaGxpZ2h0UG9zaXRpb24gPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGFzdCwgYiwgYnJhY2tldHMsIGNoYW5nZWQsIGksIG5vZGUsIHBhcmVudCwgcG9zLCByLCByYW5nZXMsIHMsIHNwYW4sIF9pLCBfaiwgX2ssIF9sZW4sIF9sZW4xLCBfbGVuMiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcblxuICAgIHBhcmVudCA9IG51bGw7XG4gICAgcyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAocy5yYW5nZUNvdW50KSB7XG4gICAgICBpZiAoY2xlYW5FbXB0eU5vZGVzKHMuZ2V0UmFuZ2VBdCgwKS5zdGFydENvbnRhaW5lcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9jdXNCb3gocy5mb2N1c05vZGUpO1xuICAgICAgcGFyZW50ID0gZ2V0Qm94KHMuZm9jdXNOb2RlKTtcbiAgICAgIGlmICgoX3JlZjIgPSBzLmdldFJhbmdlQXQoMCkpICE9IG51bGwgPyBfcmVmMi5jb2xsYXBzZWQgOiB2b2lkIDApIHtcbiAgICAgICAgaWYgKCFwYXJlbnQgfHwgaXNPdXRwdXQocGFyZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50LnBhcmVudE5vZGUgJiYgKGFzdCA9IGdldEFzdChwYXJlbnQpKSkge1xuICAgICAgICAgIHIgPSBzLmdldFJhbmdlQXQoMCk7XG4gICAgICAgICAgci5zZXRTdGFydChwYXJlbnQsIDApO1xuICAgICAgICAgIHBvcyA9IGdldFJhbmdlVGV4dChyKS5sZW5ndGg7XG4gICAgICAgICAgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgIGlmIChmYWxzZSkge1xuICAgICAgICAgICAgYnJhY2tldHMgPSBMZWlzdXJlLmJyYWNrZXQoYXN0LmxlaXN1cmVCYXNlLCBwb3MpO1xuICAgICAgICAgICAgaWYgKG9sZEJyYWNrZXRzWzBdICE9PSBwYXJlbnQgfHwgIW9sZEJyYWNrZXRzWzFdLmVxdWFscyhicmFja2V0cykpIHtcbiAgICAgICAgICAgICAgb2xkQnJhY2tldHMgPSBbcGFyZW50LCBicmFja2V0c107XG4gICAgICAgICAgICAgIF9yZWYzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltMZWlzdXJlQnJhY2tldHNdXCIpO1xuICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IF9yZWYzW19pXTtcbiAgICAgICAgICAgICAgICB1bndyYXAobm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgX3JlZjQgPSBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChcIi5wYXJ0aWFsQXBwbHlcIik7XG4gICAgICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWY0Lmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBfcmVmNFtfal07XG4gICAgICAgICAgICAgICAgdW53cmFwKG5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBhcmVudC5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgbWFya1BhcnRpYWxBcHBsaWVzKHBhcmVudCk7XG4gICAgICAgICAgICAgIGIgPSBicmFja2V0cztcbiAgICAgICAgICAgICAgcmFuZ2VzID0gW107XG4gICAgICAgICAgICAgIHdoaWxlIChiICE9PSBOaWwpIHtcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaChtYWtlUmFuZ2UocGFyZW50LCBiLmhlYWQoKS5oZWFkKCksIGIuaGVhZCgpLnRhaWwoKS5oZWFkKCkpKTtcbiAgICAgICAgICAgICAgICBiID0gYi50YWlsKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZm9yIChpID0gX2sgPSAwLCBfbGVuMiA9IHJhbmdlcy5sZW5ndGg7IF9rIDwgX2xlbjI7IGkgPSArK19rKSB7XG4gICAgICAgICAgICAgICAgciA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdMZWlzdXJlQnJhY2tldHMnLCAnJyk7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgaSA9PT0gMCA/ICdMZWlzdXJlRnVuYycgOiAnTGVpc3VyZUFyZycpO1xuICAgICAgICAgICAgICAgIHdyYXBSYW5nZShyLCBzcGFuKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoaGlkZVNsaWRlcigpKSB7XG4gICAgICAgICAgICAgIHBvcyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiAoZS50YXJnZXQgPT09IHBhcmVudCB8fCBwYXJlbnQuY29udGFpbnMoZS50YXJnZXQpKSAmJiBzaG93U2xpZGVyQnV0dG9uKHBhcmVudCwgcG9zLCBlKSkge1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICBwb3MgKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5FVlQgPSBlO1xuICAgICAgICAgICAgcy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICAgIHMuYWRkUmFuZ2UobWFrZVJhbmdlKHBhcmVudCwgcG9zKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcGVlck5vdGlmeVNlbGVjdGlvbihwYXJlbnQsIHMudG9TdHJpbmcoKSk7XG4gICAgfVxuICB9O1xuXG4gIG51bWJlckVuZCA9IC8oPzpefC4qW14wLTkuXSkoWzAtOV0rXFwuP1swLTldKnxcXC5bMC05XSopJC87XG5cbiAgbnVtYmVyU3RhcnQgPSAvXihbMC05XStcXC5bMC05XSt8WzAtOV0rfFxcLlswLTldKykvO1xuXG4gIHNsaWRlciA9IFtdO1xuXG4gIHNob3dTbGlkZXJCdXR0b24gPSBmdW5jdGlvbihwYXJlbnQsIHBvcywgZSkge1xuICAgIHZhciBjaGFuZ2VkLCBsZW4sIG0sIG9sZFBvcywgciwgc1BhcmVudCwgc1Bvcywgc1ZhbHVlLCBzcGFuLCB0ZXh0O1xuXG4gICAgaWYgKHNsaWRlci5sZW5ndGgpIHtcbiAgICAgIGhpZGVTbGlkZXIoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGV4dCA9IHBhcmVudC50ZXh0Q29udGVudDtcbiAgICAgIG9sZFBvcyA9IHBvcztcbiAgICAgIGNoYW5nZWQgPSAwO1xuICAgICAgaWYgKG0gPSB0ZXh0LnN1YnN0cmluZygwLCBwb3MpLm1hdGNoKG51bWJlckVuZCkpIHtcbiAgICAgICAgcG9zIC09IG1bMV0ubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKG0gPSB0ZXh0LnN1YnN0cmluZyhwb3MpLm1hdGNoKG51bWJlclN0YXJ0KSkge1xuICAgICAgICBsZW4gPSBtWzFdLmxlbmd0aDtcbiAgICAgICAgaWYgKG9sZFBvcyA8PSBwb3MgKyBsZW4pIHtcbiAgICAgICAgICBzUGFyZW50ID0gc2xpZGVyWzBdLCBzUG9zID0gc2xpZGVyWzFdLCBzVmFsdWUgPSBzbGlkZXJbMl07XG4gICAgICAgICAgaWYgKHBhcmVudCAhPT0gc1BhcmVudCB8fCBwb3MgIT09IHNQb3MgfHwgbVsxXSAhPT0gc1ZhbHVlKSB7XG4gICAgICAgICAgICBoaWRlU2xpZGVyKCk7XG4gICAgICAgICAgICByID0gbWFrZVJhbmdlKHBhcmVudCwgcG9zLCBwb3MgKyBtWzFdLmxlbmd0aCk7XG4gICAgICAgICAgICBzcGFuID0gY3JlYXRlTm9kZShcIjxzcGFuIGNsYXNzPSdsZWlzdXJlUmFuZ2VOdW1iZXIgdWktd2lkZ2V0LWNvbnRlbnQnPjwvc3Bhbj5cIik7XG4gICAgICAgICAgICB3cmFwUmFuZ2Uociwgc3Bhbik7XG4gICAgICAgICAgICBjaGFuZ2VkID0gMTtcbiAgICAgICAgICAgIHNwYW4ubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBzbGlkZXIgPSBbcGFyZW50LCBwb3MsIG1bMV0sIHNwYW5dO1xuICAgICAgICAgICAgY3JlYXRlU2xpZGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGhpZGVTbGlkZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgaXNTbGlkZXIgPSBmdW5jdGlvbihlbCkge1xuICAgIHdoaWxlIChlbCAhPT0gZG9jdW1lbnQpIHtcbiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3NsaWRlcicpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgY3JlYXRlU2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGQsIGRpdiwgaW5zaWRlLCBtYXgsIG1pbiwgcGFyZW50LCBwb3MsIHNsLCBzbGlkaW5nLCBzcGFuLCB2YWx1ZTtcblxuICAgIHBhcmVudCA9IHNsaWRlclswXSwgcG9zID0gc2xpZGVyWzFdLCB2YWx1ZSA9IHNsaWRlclsyXSwgc3BhbiA9IHNsaWRlclszXSwgZGl2ID0gc2xpZGVyWzRdO1xuICAgIGlmIChkaXYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW5zaWRlID0gZmFsc2U7XG4gICAgc2xpZGluZyA9IGZhbHNlO1xuICAgIGQgPSBjcmVhdGVOb2RlKFwiPGRpdiBzdHlsZT0nei1pbmRleDogMTsgcG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMjAwcHg7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXI6IHNvbGlkIGdyZWVuIDFweCcgc2xpZGVyIGNvbnRlbnRFZGl0YWJsZT0nZmFsc2UnPjwvZGl2PlwiKTtcbiAgICBzbGlkZXIucHVzaChkKTtcbiAgICBkLnN0eWxlLnRvcCA9IFwiXCIgKyAoc3Bhbi5vZmZzZXRUb3AgKyBzcGFuLm9mZnNldEhlaWdodCArIDUpICsgXCJweFwiO1xuICAgIGQuc3R5bGUubWluVG9wID0gJzBweCc7XG4gICAgZC5zdHlsZS5sZWZ0ID0gXCJcIiArIChNYXRoLm1heCgwLCAoc3Bhbi5vZmZzZXRMZWZ0ICsgc3Bhbi5vZmZzZXRXaWR0aCkgLyAyIC0gMTAwKSkgKyBcInB4XCI7XG4gICAgZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIWluc2lkZSkge1xuICAgICAgICByZXR1cm4gaW5zaWRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUudG9FbGVtZW50ICE9PSBkICYmICFkLmNvbnRhaW5zKGUudG9FbGVtZW50KSkge1xuICAgICAgICBpbnNpZGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFzbGlkaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGhpZGVTbGlkZXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHZhbHVlID0gTnVtYmVyKHZhbHVlKTtcbiAgICBtaW4gPSB2YWx1ZSA8IDAgPyB2YWx1ZSAqIDIgOiB2YWx1ZSAvIDI7XG4gICAgbWF4ID0gdmFsdWUgPT09IDAgPyAxMCA6IHZhbHVlICogMjtcbiAgICBzbCA9ICQoZCkuc2xpZGVyKHtcbiAgICAgIGFuaW1hdGU6ICdmYXN0JyxcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgc2xpZGluZyA9IHRydWU7XG4gICAgICAgIHJldHVybiBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gYWxsb3dFdmVudHMgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc3RvcDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgIHNldE1pbk1heChzbCk7XG4gICAgICAgIGFsbG93RXZlbnRzID0gdHJ1ZTtcbiAgICAgICAgc2xpZGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAoIWluc2lkZSkge1xuICAgICAgICAgIHJldHVybiBoaWRlU2xpZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgIHZhciBhc3QsIF9yZWYyO1xuXG4gICAgICAgIGlmIChzcGFuLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICBzcGFuLmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gU3RyaW5nKHVpLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNEZWYocGFyZW50KSkge1xuICAgICAgICAgIHBhcmVudC5hc3QgPSBudWxsO1xuICAgICAgICAgIGFjY2VwdENvZGUocGFyZW50KTtcbiAgICAgICAgICBhc3QgPSBnZXRBc3QocGFyZW50KTtcbiAgICAgICAgICBpZiAoKF9yZWYyID0gcGFyZW50LmFzdCkgIT0gbnVsbCA/IF9yZWYyLmxlaXN1cmVOYW1lIDogdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlKFwic2VsLVwiICsgcGFyZW50LmFzdC5sZWlzdXJlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1ha2VJZChwYXJlbnQpO1xuICAgICAgICAgIGlmICghcGFyZW50LmdldEF0dHJpYnV0ZShwYXJlbnQub3V0cHV0LCAnbGVpc3VyZVVwZGF0ZScpKSB7XG4gICAgICAgICAgICBzZXRVcGRhdGUocGFyZW50Lm91dHB1dCwgXCJpZC1cIiArIHBhcmVudC5pZCArIFwiIGNvbXBpbGVcIiwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZShcImlkLVwiICsgcGFyZW50LmlkKTtcbiAgICAgICAgICByZXR1cm4gdXBkYXRlKFwiY29tcGlsZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0pO1xuICAgIHNldE1pbk1heChzbCwgdmFsdWUpO1xuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoZCwgcGFyZW50LmZpcnN0Q2hpbGQpO1xuICAgIHJldHVybiBkLmZvY3VzKCk7XG4gIH07XG5cbiAgcHNnbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICB9O1xuXG4gIHNldE1pbk1heCA9IGZ1bmN0aW9uKHNsLCB2YWx1ZSkge1xuICAgIHZhciBtYXgsIG1pbiwgc3RlcCwgX3JlZjI7XG5cbiAgICB2YWx1ZSA9IHZhbHVlIHx8IHNsLnNsaWRlcihcInZhbHVlXCIpO1xuICAgIG1pbiA9IDA7XG4gICAgbWF4ID0gKDEgPD0gKF9yZWYyID0gTWF0aC5hYnModmFsdWUpKSAmJiBfcmVmMiA8IDUwKSB8fCB2YWx1ZSA9PT0gMCA/IDEwMCAqIHBzZ24odmFsdWUpIDogdmFsdWUgKiAyO1xuICAgIGlmIChNYXRoLnJvdW5kKHZhbHVlKSA9PT0gdmFsdWUpIHtcbiAgICAgIHN0ZXAgPSBNYXRoLnJvdW5kKChtYXggLSBtaW4pIC8gMTAwKTtcbiAgICAgIHN0ZXAgPSBzdGVwIC0gc3RlcCAlIChtYXggLSBtaW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGVwID0gKG1heCAtIG1pbikgLyAxMDA7XG4gICAgfVxuICAgIHNsLnNsaWRlcihcIm9wdGlvblwiLCBcIm1pblwiLCBtaW4pO1xuICAgIHNsLnNsaWRlcihcIm9wdGlvblwiLCBcIm1heFwiLCBtYXgpO1xuICAgIHJldHVybiBzbC5zbGlkZXIoXCJvcHRpb25cIiwgXCJzdGVwXCIsIHN0ZXApO1xuICB9O1xuXG4gIGhpZGVTbGlkZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGl2LCBwYXJlbnQsIHNQb3MsIHNWYWx1ZSwgc3BhbjtcblxuICAgIGlmIChzbGlkZXIubGVuZ3RoKSB7XG4gICAgICBwYXJlbnQgPSBzbGlkZXJbMF0sIHNQb3MgPSBzbGlkZXJbMV0sIHNWYWx1ZSA9IHNsaWRlclsyXSwgc3BhbiA9IHNsaWRlclszXSwgZGl2ID0gc2xpZGVyWzRdO1xuICAgICAgdW53cmFwKHNwYW4pO1xuICAgICAgaWYgKGRpdikge1xuICAgICAgICByZW1vdmUoZGl2KTtcbiAgICAgIH1cbiAgICAgIHBhcmVudC5ub3JtYWxpemUoKTtcbiAgICAgIHNsaWRlciA9IFtdO1xuICAgICAgcmV0dXJuIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfTtcblxuICB3cmFwUmFuZ2UgPSBmdW5jdGlvbihyYW5nZSwgbm9kZSkge1xuICAgIHZhciBjb250ZW50cywgZXJyO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiByYW5nZS5zdXJyb3VuZENvbnRlbnRzKG5vZGUpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgY29udGVudHMgPSByYW5nZS5jbG9uZUNvbnRlbnRzKCk7XG4gICAgICByZXBsYWNlUmFuZ2UocmFuZ2UsIG5vZGUpO1xuICAgICAgcmV0dXJuIG5vZGUuYXBwZW5kQ2hpbGQoY29udGVudHMpO1xuICAgIH1cbiAgfTtcblxuICByZXBsYWNlUmFuZ2UgPSBmdW5jdGlvbihyYW5nZSwgbm9kZSkge1xuICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgcmV0dXJuIHJhbmdlLmluc2VydE5vZGUobm9kZSk7XG4gIH07XG5cbiAgZ2V0UmFuZ2VUZXh0ID0gZnVuY3Rpb24ocikge1xuICAgIHJldHVybiByLmNsb25lQ29udGVudHMoKS50ZXh0Q29udGVudDtcbiAgfTtcblxuICBnZXRCb3ggPSBmdW5jdGlvbihub2RlKSB7XG4gICAgd2hpbGUgKChub2RlICE9IG51bGwpICYmICgodHlwZW9mIG5vZGUuZ2V0QXR0cmlidXRlID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLmdldEF0dHJpYnV0ZSgnTGVpc3VyZUJveCcpIDogdm9pZCAwKSA9PSBudWxsKSkge1xuICAgICAgbm9kZSA9IG5vZGUucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgY2hlY2tNdXRhdGVGcm9tTW9kaWZpY2F0aW9uID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgdmFyIGIsIGIyO1xuXG4gICAgYiA9IGdldEJveChldnQudGFyZ2V0KTtcbiAgICBiMiA9IGdldEJveCh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlKTtcbiAgICBpZiAoYiAmJiBiID09PSBiMikge1xuICAgICAgaWYgKChpc0RlZihiKSkgJiYgYi5jbGFzc0xpc3QuY29udGFpbnMoJ2NvZGVNYWluRXhwcicpKSB7XG4gICAgICAgIHRvRGVmQm94KGIpO1xuICAgICAgfSBlbHNlIGlmICghKGlzRGVmKGIpKSAmJiBiLmNsYXNzTGlzdC5jb250YWlucygnY29kZU1haW4nKSkge1xuICAgICAgICB0b0V4cHJCb3goYik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVwbGljYXRlKGIpO1xuICAgIH1cbiAgfTtcblxuICByZXBsaWNhdGUgPSBmdW5jdGlvbihiKSB7XG4gICAgaWYgKGIucmVwbGljYXRvcikge1xuICAgICAgcmV0dXJuIGRlbGF5KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYi5yZXBsaWNhdG9yLnJlcGxpY2F0ZShiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBidXR0b25DbGFzc2VzID0gJ3VpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLWJ1dHRvbi10ZXh0LW9ubHknLnNwbGl0KCcgJyk7XG5cbiAgYm94Q2xhc3NlcyA9IHtcbiAgICBjb2RlTWFpbkV4cHI6IFsnY29kZU1haW5FeHByJywgJ3VpLXdpZGdldCcsICd1aS13aWRnZXQtY29udGVudCcsICd1aS1jb3JuZXItYWxsJ10sXG4gICAgY29kZU1haW46IFsnY29kZU1haW4nLCAndWktd2lkZ2V0JywgJ3VpLXdpZGdldC1jb250ZW50JywgJ3VpLWNvcm5lci1hbGwnXSxcbiAgICBjb2RlTWFpblRlc3Q6IFsnY29kZU1haW5UZXN0J10sXG4gICAgb3V0cHV0OiBbJ291dHB1dCcsICd1aS1jb3JuZXItYWxsJ11cbiAgfTtcblxuICBhZGRCb3hDbGFzc2VzID0gZnVuY3Rpb24oYm94LCB0eXBlKSB7XG4gICAgdmFyIGNsLCBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuXG4gICAgYm94LnNldEF0dHJpYnV0ZSh0eXBlLCAnJyk7XG4gICAgX3JlZjIgPSBib3hDbGFzc2VzW3R5cGVdO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgY2wgPSBfcmVmMltfaV07XG4gICAgICBfcmVzdWx0cy5wdXNoKGJveC5jbGFzc0xpc3QuYWRkKGNsKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICByZW1vdmVCb3hDbGFzc2VzID0gZnVuY3Rpb24oYm94LCB0eXBlKSB7XG4gICAgdmFyIGNsLCBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuXG4gICAgYm94LnJlbW92ZUF0dHJpYnV0ZSh0eXBlKTtcbiAgICBfcmVmMiA9IGJveENsYXNzZXNbdHlwZV07XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBjbCA9IF9yZWYyW19pXTtcbiAgICAgIF9yZXN1bHRzLnB1c2goYm94LmNsYXNzTGlzdC5yZW1vdmUoY2wpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIHRvRXhwckJveCA9IGZ1bmN0aW9uKGIpIHtcbiAgICB2YXIgbm9kZSwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjIsIF9yZWYzO1xuXG4gICAgcmVtb3ZlQm94Q2xhc3NlcyhiLCAnY29kZU1haW4nKTtcbiAgICBhZGRCb3hDbGFzc2VzKGIsICdjb2RlTWFpbkV4cHInKTtcbiAgICBfcmVmMiA9IGIucXVlcnlTZWxlY3RvckFsbCgnW2NvZGVuYW1lXScpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmMltfaV07XG4gICAgICB1bndyYXAobm9kZSk7XG4gICAgfVxuICAgIF9yZWYzID0gYi5xdWVyeVNlbGVjdG9yQWxsKCcuYXN0YnV0dG9uJyk7XG4gICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjMubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICBub2RlID0gX3JlZjNbX2pdO1xuICAgICAgcmVtb3ZlKG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gbWFrZU91dHB1dEJveChiKTtcbiAgfTtcblxuICB0b0RlZkJveCA9IGZ1bmN0aW9uKGIpIHtcbiAgICBpZiAoYi5vdXRwdXQpIHtcbiAgICAgIHJlbW92ZShiLm91dHB1dCk7XG4gICAgfVxuICAgIHJlbW92ZUJveENsYXNzZXMoYiwgJ2NvZGVNYWluRXhwcicpO1xuICAgIGFkZEJveENsYXNzZXMoYiwgJ2NvZGVNYWluJyk7XG4gICAgcmV0dXJuIGFkZERlZkNvbnRyb2xzKGIpO1xuICB9O1xuXG4gIGFkZERlZkNvbnRyb2xzID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIGJ0bjtcblxuICAgIGJ0biA9IGNyZWF0ZU5vZGUoXCI8YnV0dG9uIG9uY2xpY2s9J05vdGVib29rLnNob3dBc3QodGhpcy5wYXJlbnROb2RlKScgY2xhc3M9J2FzdGJ1dHRvbicgdGl0bGU9J1Nob3cgQVNUJz48L2J1dHRvbj5cIik7XG4gICAgbWFya3VwQnV0dG9uKGJ0bik7XG4gICAgcmV0dXJuIGJveC5hcHBlbmRDaGlsZChidG4pO1xuICB9O1xuXG4gIHJlbW92ZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICByZXR1cm4gKF9yZWYyID0gbm9kZS5wYXJlbnROb2RlKSAhPSBudWxsID8gX3JlZjIucmVtb3ZlQ2hpbGQobm9kZSkgOiB2b2lkIDA7XG4gIH07XG5cbiAgc2hvd0FzdCA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBuYW1lLCBub2RlLCBvdXRwdXQ7XG5cbiAgICBuYW1lID0gKGdldEFzdChib3gpKS5sZWlzdXJlTmFtZTtcbiAgICBpZiAoYm94LmFzdE91dCAhPSBudWxsKSB7XG4gICAgICByZW1vdmUoYm94LmFzdE91dC5vdXRwdXQpO1xuICAgICAgcmVtb3ZlKGJveC5hc3RPdXQpO1xuICAgICAgcmV0dXJuIGJveC5hc3RPdXQgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICBub2RlID0gY29kZUJveCgnY29kZU1haW5FeHByJyk7XG4gICAgICBib3guYXN0T3V0ID0gbm9kZTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdsZWlzdXJlT3V0cHV0JywgJycpO1xuICAgICAgYm94LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIGJveC5uZXh0U2libGluZyk7XG4gICAgICBub2RlLnRleHRDb250ZW50ID0gXCIjQHVwZGF0ZSBzZWwtXCIgKyBuYW1lICsgXCJcXG50cmVlRm9yTm90ZWJvb2sgXCIgKyBuYW1lO1xuICAgICAgb3V0cHV0ID0gbWFrZU91dHB1dEJveChub2RlKTtcbiAgICAgIHRvZ2dsZUVkaXQob3V0cHV0KTtcbiAgICAgIHJldHVybiBldmFsT3V0cHV0KG91dHB1dCwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIGhpZ2hsaWdodE5vdGVib29rRnVuY3Rpb24gPSBmdW5jdGlvbihmdW5jTmFtZSwgc3RhcnQsIHN0b3ApIHtcbiAgICB2YXIgYm94LCBvZmZzZXQsIHNlbDtcblxuICAgIGJveCA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIltsZWlzdXJlZnVuYz1cIiArIGZ1bmNOYW1lICsgXCJdXCIpO1xuICAgIG9mZnNldCA9IDA7XG4gICAgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICByZXR1cm4gc2VsLmFkZFJhbmdlKG1ha2VSYW5nZShib3gsIHN0YXJ0ICsgb2Zmc2V0LCBzdG9wICsgb2Zmc2V0KSk7XG4gIH07XG5cbiAgaXNEZWYgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgZGVmVHlwZSwgbGVhZGluZywgbSwgbWF0Y2hlZCwgbmFtZSwgdHh0O1xuXG4gICAgdHh0ID0gYm94LnRleHRDb250ZW50O1xuICAgIGlmICgobSA9IHR4dC5tYXRjaChMX2RlZlBhdCgpKSkpIHtcbiAgICAgIG1hdGNoZWQgPSBtWzBdLCBsZWFkaW5nID0gbVsxXSwgbmFtZSA9IG1bMl0sIGRlZlR5cGUgPSBtWzNdO1xuICAgICAgcmV0dXJuIChkZWZUeXBlICE9IG51bGwgPyBkZWZUeXBlLmxlbmd0aCA6IHZvaWQgMCkgPiAwO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgaW5pdE5vdGVib29rID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgcGdtO1xuXG4gICAgZWwucmVwbGFjaW5nID0gdHJ1ZTtcbiAgICByZW1vdmVPbGREZWZzKGVsKTtcbiAgICBwZ20gPSBtYXJrdXBEZWZzKGVsLCBmaW5kRGVmcyhlbCkpO1xuICAgIGVsLm5vcm1hbGl6ZSgpO1xuICAgIGVsLnJlcGxhY2luZyA9IGZhbHNlO1xuICAgIGlmICghZWwuaGFzQXR0cmlidXRlKCdub0xlaXN1cmVCYXInKSkge1xuICAgICAgaW5zZXJ0Q29udHJvbHMoZWwpO1xuICAgICAgZWwudGVzdFJlc3VsdHMuaW5uZXJIVE1MID0gcGdtWzJdO1xuICAgIH1cbiAgICBzbmFwc2hvdChlbCwgcGdtKTtcbiAgICByZXR1cm4gcGdtO1xuICB9O1xuXG4gIG1ha2VMYWJlbCA9IGZ1bmN0aW9uKHRleHQsIGMpIHtcbiAgICB2YXIgbm9kZTtcblxuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTUEFOJyk7XG4gICAgbm9kZS5pbm5lckhUTUwgPSB0ZXh0O1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjbGFzcycsIGMpO1xuICAgIHJldHVybiBub2RlO1xuICB9O1xuXG4gIG1ha2VPcHRpb24gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG9wdDtcblxuICAgIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ09QVElPTicpO1xuICAgIG9wdC50ZXh0ID0gbmFtZTtcbiAgICByZXR1cm4gb3B0O1xuICB9O1xuXG4gIGNyZWF0ZU5vZGUgPSBmdW5jdGlvbih0eHQpIHtcbiAgICB2YXIgc2NyYXRjaDtcblxuICAgIHNjcmF0Y2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICBzY3JhdGNoLmlubmVySFRNTCA9IHR4dDtcbiAgICByZXR1cm4gc2NyYXRjaC5maXJzdENoaWxkO1xuICB9O1xuXG4gIGNyZWF0ZUZyYWdtZW50ID0gZnVuY3Rpb24odHh0KSB7XG4gICAgdmFyIGZyYWcsIHNjcmF0Y2g7XG5cbiAgICBzY3JhdGNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgc2NyYXRjaC5pbm5lckhUTUwgPSB0eHQ7XG4gICAgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB3aGlsZSAoc2NyYXRjaC5maXJzdENoaWxkKSB7XG4gICAgICBmcmFnLmFwcGVuZENoaWxkKHNjcmF0Y2guZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnO1xuICB9O1xuXG4gIGluc2VydENvbnRyb2xzID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgY29udHJvbERpdiwgc2F2ZUJ1dHRvbiwgc3BhY2VyLCB0ZXN0QnV0dG9uLCB0aGVtZVNlbGVjdCwgdmlld1NlbGVjdCwgX3JlZjIsIF9yZWYzO1xuXG4gICAgY29udHJvbERpdiA9IGNyZWF0ZU5vZGUoXCI8ZGl2IExlaXN1cmVPdXRwdXQgY29udGVudEVkaXRhYmxlPSdmYWxzZScgY2xhc3M9J2xlaXN1cmVfYmFyJz48ZGl2IGNsYXNzPVxcXCJsZWlzdXJlX2Jhcl9jb250ZW50c1xcXCI+XFxuICA8YnV0dG9uIGxlaXN1cmVJZD0nc2F2ZUJ1dHRvbicgY2xhc3M9XFxcImxlaXN1cmVfc3RhcnRcXFwiPlNhdmU8L2J1dHRvbj5cXG4gIDxidXR0b24gbGVpc3VyZUlkPSd0ZXN0QnV0dG9uJz5SdW4gVGVzdHM8L2J1dHRvbj4gPHNwYW4gbGVpc3VyZUlkPSd0ZXN0UmVzdWx0cycgY2xhc3M9XFxcIm5vdHJ1blxcXCI+PC9zcGFuPlxcbiAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBsZWlzdXJlSWQ9J2F1dG9ydW5UZXN0cyc+PGI+QXV0bzwvYj48L2lucHV0PlxcbiAgPHNwYW4gY2xhc3M9XFxcImxlaXN1cmVfdGhlbWVcXFwiPlRoZW1lOiA8L3NwYW4+XFxuICA8c2VsZWN0IGxlaXN1cmVJZD0ndGhlbWVTZWxlY3QnPlxcbiAgICA8b3B0aW9uIHZhbHVlPXRoaW4+VGhpbjwvb3B0aW9uPlxcbiAgICA8b3B0aW9uIHZhbHVlPWdhdWR5PkdhdWR5PC9vcHRpb24+XFxuICAgIDxvcHRpb24gdmFsdWU9Y3RodWxodT5DdGh1bGh1PC9vcHRpb24+XFxuICA8L3NlbGVjdD5cXG4gIDxzcGFuPlZpZXc6IDwvc3Bhbj5cXG4gIDxzZWxlY3QgbGVpc3VyZUlkPSd2aWV3U2VsZWN0Jz5cXG4gICAgPG9wdGlvbiB2YWx1ZT1jb2Rpbmc+Q29kaW5nPC9vcHRpb24+XFxuICAgIDxvcHRpb24gdmFsdWU9ZGVidWdnaW5nPkRlYnVnZ2luZzwvb3B0aW9uPlxcbiAgICA8b3B0aW9uIHZhbHVlPXRlc3Rpbmc+VGVzdGluZzwvb3B0aW9uPlxcbiAgICA8b3B0aW9uIHZhbHVlPXJ1bm5pbmc+UnVubmluZzwvb3B0aW9uPlxcbiAgPC9zZWxlY3Q+XFxuPC9kaXY+XCIpO1xuICAgIHNwYWNlciA9IGNyZWF0ZU5vZGUoXCI8ZGl2IExlaXN1cmVPdXRwdXQgIGNvbnRlbnRFZGl0YWJsZT0nZmFsc2UnIGNsYXNzPSdsZWlzdXJlX3NwYWNlJz48L2Rpdj5cIik7XG4gICAgZWwuaW5zZXJ0QmVmb3JlKHNwYWNlciwgZWwuZmlyc3RDaGlsZCk7XG4gICAgZWwuaW5zZXJ0QmVmb3JlKGNvbnRyb2xEaXYsIGVsLmZpcnN0Q2hpbGQpO1xuICAgIF9yZWYyID0gZ2V0RWxlbWVudHMoZWwsIFsnZG93bmxvYWRMaW5rJywgJ3ZpZXdMaW5rJywgJ3NhdmVCdXR0b24nLCAndGVzdEJ1dHRvbicsICd0ZXN0UmVzdWx0cycsICdhdXRvcnVuVGVzdHMnLCAndGhlbWVTZWxlY3QnLCAndmlld1NlbGVjdCddKSwgZWwubGVpc3VyZURvd25sb2FkTGluayA9IF9yZWYyWzBdLCBlbC5sZWlzdXJlVmlld0xpbmsgPSBfcmVmMlsxXSwgc2F2ZUJ1dHRvbiA9IF9yZWYyWzJdLCB0ZXN0QnV0dG9uID0gX3JlZjJbM10sIGVsLnRlc3RSZXN1bHRzID0gX3JlZjJbNF0sIGVsLmF1dG9ydW4gPSBfcmVmMls1XSwgdGhlbWVTZWxlY3QgPSBfcmVmMls2XSwgdmlld1NlbGVjdCA9IF9yZWYyWzddO1xuICAgIGNvbnRyb2xEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnaGlkZUNvbnRyb2xzJykpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZUNvbnRyb2xzJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRlQ29udHJvbHMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICByZXR1cm4gc2F2ZVByb2dyYW0oZWwpO1xuICAgIH0pO1xuICAgIHRlc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBydW5UZXN0cyhlbCk7XG4gICAgfSk7XG4gICAgdGhlbWVTZWxlY3QudmFsdWUgPSAoX3JlZjMgPSBlbC5sZWlzdXJlVGhlbWUpICE9IG51bGwgPyBfcmVmMyA6ICd0aGluJztcbiAgICB0aGVtZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VUaGVtZShlbCwgZXZ0LnRhcmdldC52YWx1ZSk7XG4gICAgfSk7XG4gICAgdmlld1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VWaWV3KGVsLCBldnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9KTtcbiAgICBlbC5hdXRvcnVuLmNoZWNrZWQgPSBlbC5hdXRvcnVuU3RhdGU7XG4gICAgZWwuYXV0b3J1bi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIGVsLmF1dG9ydW5TdGF0ZSA9IGVsLmF1dG9ydW4uY2hlY2tlZDtcbiAgICAgIGlmIChlbC5hdXRvcnVuU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHJ1blRlc3RzKGVsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWFya3VwQnV0dG9ucyhjb250cm9sRGl2KTtcbiAgfTtcblxuICBzYXZlUHJvZ3JhbSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3cml0ZShmaWxlbmFtZSwgZ2V0TUREb2N1bWVudCgpLCAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gYWxlcnQoXCJTYXZpbmcgXCIgKyBmaWxlbmFtZSk7XG4gICAgfSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIGFsZXJ0KGVyci5zdGFjayk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG4gIH07XG5cbiAgc2hvd0ZpbGVuYW1lID0gZnVuY3Rpb24oZWwpIHtcbiAgICBpZiAoZWwgJiYgZmlsZW5hbWUpIHtcbiAgICAgIGVsLmlubmVySFRNTCA9IFwiU2F2ZTogXCIgKyAoZmlsZW5hbWUucGF0aE5hbWUoKSk7XG4gICAgICByZXR1cm4gZWwudGl0bGUgPSBmaWxlbmFtZS50b1N0cmluZygpO1xuICAgIH1cbiAgfTtcblxuICBzaG93RmlsZW5hbWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5vZGUsIF9pLCBfbGVuLCBfcmVmMiwgX3Jlc3VsdHM7XG5cbiAgICBfcmVmMiA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvckFsbCgnW2xlaXN1cmVJZD1zYXZlQnV0dG9uXScpO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgbm9kZSA9IF9yZWYyW19pXTtcbiAgICAgIF9yZXN1bHRzLnB1c2goc2hvd0ZpbGVuYW1lKG5vZGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIHNldEZpbGVuYW1lID0gZnVuY3Rpb24obmV3TmFtZSkge1xuICAgIGNvbnNvbGUubG9nKFwiU0VUIEZJTEVOQU1FOiBcIiArIG5ld05hbWUpO1xuICAgIGZpbGVuYW1lID0gbmV3TmFtZSBpbnN0YW5jZW9mIFVSSSA/IG5ld05hbWUgOiBuZXcgVVJJKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsIG5ld05hbWUpO1xuICAgIHJldHVybiBzaG93RmlsZW5hbWVzKCk7XG4gIH07XG5cbiAgbWFya3VwQnV0dG9ucyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGJ0biwgX2ksIF9sZW4sIF9yZWYyLCBfcmVzdWx0cztcblxuICAgIF9yZWYyID0gZWwucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBidG4gPSBfcmVmMltfaV07XG4gICAgICBfcmVzdWx0cy5wdXNoKG1hcmt1cEJ1dHRvbihidG4pKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIG1hcmt1cEJ1dHRvbiA9IGZ1bmN0aW9uKGJ0bikge1xuICAgIHZhciBjbCwgX2ksIF9sZW4sIF9yZXN1bHRzO1xuXG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGJ1dHRvbkNsYXNzZXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGNsID0gYnV0dG9uQ2xhc3Nlc1tfaV07XG4gICAgICBfcmVzdWx0cy5wdXNoKGJ0bi5jbGFzc0xpc3QuYWRkKGNsKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBnZXRFbGVtZW50cyA9IGZ1bmN0aW9uKGVsLCBpZHMpIHtcbiAgICB2YXIgZWxzLCBpZCwgbm9kZSwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZjIsIF9yZXN1bHRzO1xuXG4gICAgZWxzID0ge307XG4gICAgX3JlZjIgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdbbGVpc3VyZUlkXScpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmMltfaV07XG4gICAgICBlbHNbbm9kZS5nZXRBdHRyaWJ1dGUoJ2xlaXN1cmVJZCcpXSA9IG5vZGU7XG4gICAgfVxuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaiA9IDAsIF9sZW4xID0gaWRzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgaWQgPSBpZHNbX2pdO1xuICAgICAgX3Jlc3VsdHMucHVzaChlbHNbaWRdKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIGVzY2FwZUh0bWwgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvWzw+XS9nLCBmdW5jdGlvbihjKSB7XG4gICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgICAgcmV0dXJuICcmbHQ7JztcbiAgICAgICAgICBjYXNlICc+JzpcbiAgICAgICAgICAgIHJldHVybiAnJmd0Oyc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgfTtcblxuICBsb2FkUHJvZ3JhbSA9IGZ1bmN0aW9uKGVsLCBmaWxlcykge1xuICAgIHZhciBmcjtcblxuICAgIGVsID0gZ2V0Qm94O1xuICAgIGZyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICBmci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgIGVsLmlubmVySFRNTCA9IGVzY2FwZUh0bWwoZnIucmVzdWx0KTtcbiAgICAgIHJldHVybiBpbml0Tm90ZWJvb2soZWwpO1xuICAgIH07XG4gICAgcmV0dXJuIGZyLnJlYWRBc0JpbmFyeVN0cmluZyhmaWxlcy5pdGVtKDApKTtcbiAgfTtcblxuICBjb25maWd1cmVTYXZlTGluayA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGJsb2IsIGJ1aWxkZXI7XG5cbiAgICB3aW5kb3cuVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMO1xuICAgIGJ1aWxkZXIgPSBuZXcgV2ViS2l0QmxvYkJ1aWxkZXIoKTtcbiAgICBidWlsZGVyLmFwcGVuZChnZXRFbGVtZW50Q29kZShlbCkpO1xuICAgIGJsb2IgPSBidWlsZGVyLmdldEJsb2IoJ3RleHQvcGxhaW4nKTtcbiAgICBlbC5sZWlzdXJlRG93bmxvYWRMaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICByZXR1cm4gZWwubGVpc3VyZVZpZXdMaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgfTtcblxuICBnZXRFbGVtZW50Q29kZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIHI7XG5cbiAgICByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICByLnNlbGVjdE5vZGUoZWwpO1xuICAgIGMgPSByLmNsb25lQ29udGVudHMoKS5maXJzdENoaWxkO1xuICAgIHJlbW92ZU9sZERlZnMoYyk7XG4gICAgcmV0dXJuIGMudGV4dENvbnRlbnQ7XG4gIH07XG5cbiAgcnVuVGVzdHMgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBmYWlsZWQsIHBhc3NlZCwgcmVzdWx0c0NsYXNzLCB0ZXN0LCBfaSwgX2xlbiwgX3JlZjI7XG5cbiAgICBwYXNzZWQgPSAwO1xuICAgIGZhaWxlZCA9IDA7XG4gICAgX3JlZjIgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuY29kZU1haW5UZXN0Jyk7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgdGVzdCA9IF9yZWYyW19pXTtcbiAgICAgIGlmIChydW5UZXN0KHRlc3QpKSB7XG4gICAgICAgIHBhc3NlZCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbC50ZXN0UmVzdWx0cykge1xuICAgICAgcmVzdWx0c0NsYXNzID0gZWwudGVzdFJlc3VsdHMuY2xhc3NMaXN0O1xuICAgICAgcmVzdWx0c0NsYXNzLnJlbW92ZSgnbm90cnVuJyk7XG4gICAgICBpZiAoIWZhaWxlZCkge1xuICAgICAgICByZXN1bHRzQ2xhc3MucmVtb3ZlKCdmYWlsZWQnKTtcbiAgICAgICAgcmVzdWx0c0NsYXNzLmFkZCgncGFzc2VkJyk7XG4gICAgICAgIHJldHVybiBlbC50ZXN0UmVzdWx0cy5pbm5lckhUTUwgPSBwYXNzZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRzQ2xhc3MucmVtb3ZlKCdwYXNzZWQnKTtcbiAgICAgICAgcmVzdWx0c0NsYXNzLmFkZCgnZmFpbGVkJyk7XG4gICAgICAgIHJldHVybiBlbC50ZXN0UmVzdWx0cy5pbm5lckhUTUwgPSBcIlwiICsgcGFzc2VkICsgXCIvXCIgKyBmYWlsZWQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNoYW5nZVRoZW1lID0gZnVuY3Rpb24oZWwsIHZhbHVlKSB7XG4gICAgdmFyIHRoZW1lO1xuXG4gICAgdGhlbWUgPSB2YWx1ZTtcbiAgICBlbC5sZWlzdXJlVGhlbWUgPSB0aGVtZTtcbiAgICByZXR1cm4gZWwuY2xhc3NOYW1lID0gdGhlbWU7XG4gIH07XG5cbiAgY2hhbmdlVmlldyA9IGZ1bmN0aW9uKGVsLCB2YWx1ZSkge1xuICAgIGRlYnVnID0gdmFsdWUgPT09ICdkZWJ1Z2dpbmcnO1xuICAgIHJldHVybiBhbGVydCgnbmV3IHZpZXc6ICcgKyB2YWx1ZSArIFwiLCBkZWJ1ZzogXCIgKyBkZWJ1Zyk7XG4gIH07XG5cbiAgdW53cmFwID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHZhciBwYXJlbnQ7XG5cbiAgICBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgd2hpbGUgKG5vZGUuZmlyc3RDaGlsZCAhPSBudWxsKSB7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZS5maXJzdENoaWxkLCBub2RlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgfVxuICB9O1xuXG4gIHJlbW92ZU9sZERlZnMgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBleHRyYWN0ZWQsIG0sIG5vZGUsIHR4dCwgX2ksIF9qLCBfaywgX2wsIF9sZW4sIF9sZW4xLCBfbGVuMiwgX2xlbjMsIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG5cbiAgICBlbC5sZWlzdXJlRG93bmxvYWRMaW5rID0gbnVsbDtcbiAgICBlbC5sZWlzdXJlVmlld0xpbmsgPSBudWxsO1xuICAgIGV4dHJhY3RlZCA9IFtdO1xuICAgIF9yZWYyID0gZWwucXVlcnlTZWxlY3RvckFsbChcIltMZWlzdXJlT3V0cHV0XVwiKTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjJbX2ldO1xuICAgICAgcmVtb3ZlKG5vZGUpO1xuICAgIH1cbiAgICBfcmVmMyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZ2VuZXJhdGVkbmxdXCIpO1xuICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgbm9kZSA9IF9yZWYzW19qXTtcbiAgICAgIHR4dCA9IG5vZGUubGFzdENoaWxkO1xuICAgICAgaWYgKHR4dC5ub2RlVHlwZSA9PT0gMyAmJiB0eHQuZGF0YVt0eHQuZGF0YS5sZW5ndGggLSAxXSA9PT0gJ1xcbicpIHtcbiAgICAgICAgdHh0LmRhdGEgPSB0eHQuZGF0YS5zdWJzdHJpbmcoMCwgdHh0LmRhdGEubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgfVxuICAgIF9yZWY0ID0gZWwucXVlcnlTZWxlY3RvckFsbChcIltMZWlzdXJlXVwiKTtcbiAgICBmb3IgKF9rID0gMCwgX2xlbjIgPSBfcmVmNC5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHtcbiAgICAgIG5vZGUgPSBfcmVmNFtfa107XG4gICAgICBpZiAoYWRkc0xpbmUobm9kZSkgJiYgKG5vZGUuZmlyc3RDaGlsZCAhPSBudWxsKSkge1xuICAgICAgICBleHRyYWN0ZWQucHVzaChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgICAgdW53cmFwKG5vZGUpO1xuICAgIH1cbiAgICBmb3IgKF9sID0gMCwgX2xlbjMgPSBleHRyYWN0ZWQubGVuZ3RoOyBfbCA8IF9sZW4zOyBfbCsrKSB7XG4gICAgICBub2RlID0gZXh0cmFjdGVkW19sXTtcbiAgICAgIGlmICgobm9kZS5wYXJlbnROb2RlICE9IG51bGwpICYmICFhZGRzTGluZShub2RlKSAmJiAobm9kZS5wcmV2aW91c1NpYmxpbmcgIT0gbnVsbCkgJiYgIWFkZHNMaW5lKG5vZGUucHJldmlvdXNTaWJsaW5nKSkge1xuICAgICAgICBub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRleHQoJ1xcbicpLCBub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWwudGV4dENvbnRlbnQgPSBlbC50ZXh0Q29udGVudC5yZXBsYWNlKC9cXHVGRUZGL2csICcnKTtcbiAgICB0eHQgPSBlbC5sYXN0Q2hpbGQ7XG4gICAgaWYgKCh0eHQgIT0gbnVsbCA/IHR4dC5ub2RlVHlwZSA6IHZvaWQgMCkgPT09IDMgJiYgKG0gPSB0eHQuZGF0YS5tYXRjaCgvKF58W15cXG5dKShcXG4rKSQvKSkpIHtcbiAgICAgIHJldHVybiB0eHQuZGF0YSA9IHR4dC5kYXRhLnN1YnN0cmluZygwLCB0eHQuZGF0YS5sZW5ndGggLSBtWzJdLmxlbmd0aCk7XG4gICAgfVxuICB9O1xuXG4gIG1hcmt1cERlZnMgPSBmdW5jdGlvbihlbCwgZGVmcykge1xuICAgIHZhciBhdXRvLCBib2QsIGJvZHksIGJ4LCBkZWYsIGksIG1haW4sIG5hbWUsIG5vdGVib29rQXV0b05vZGVzLCBwZ20sIHMsIHRlc3QsIHRlc3RzLCB0b3RhbFRlc3RzLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMiwgX3JlZjM7XG5cbiAgICBwZ20gPSAnJztcbiAgICBhdXRvID0gJyc7XG4gICAgdG90YWxUZXN0cyA9IDA7XG4gICAgbm90ZWJvb2tBdXRvTm9kZXMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGRlZnMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGkgPSBkZWZzW19pXTtcbiAgICAgIG1haW4gPSBpLm1haW4sIG5hbWUgPSBpLm5hbWUsIGRlZiA9IGkuZGVmLCBib2R5ID0gaS5ib2R5LCB0ZXN0cyA9IGkudGVzdHM7XG4gICAgICBpZiAobmFtZSkge1xuICAgICAgICBieCA9IGJveChtYWluLCAnY29kZU1haW4nLCB0cnVlKTtcbiAgICAgICAgYnguYXBwZW5kQ2hpbGQoY29kZVNwYW4obmFtZSwgJ2NvZGVOYW1lJykpO1xuICAgICAgICBieC5hcHBlbmRDaGlsZCh0ZXh0Tm9kZShkZWYpKTtcbiAgICAgICAgYm9kID0gY29kZVNwYW4odGV4dE5vZGUoYm9keSksICdjb2RlQm9keScpO1xuICAgICAgICBib2QuYXBwZW5kQ2hpbGQodGV4dE5vZGUoJ1xcbicpKTtcbiAgICAgICAgYm9kLnNldEF0dHJpYnV0ZSgnZ2VuZXJhdGVkTkwnLCAnJyk7XG4gICAgICAgIGJ4LmFwcGVuZENoaWxkKGJvZCk7XG4gICAgICAgIGJ4LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGV2YWxEb2MoZWwpO1xuICAgICAgICB9KSwgdHJ1ZSk7XG4gICAgICAgIG1hcmtQYXJ0aWFsQXBwbGllcyhieCk7XG4gICAgICAgIGFkZERlZkNvbnRyb2xzKGJ4KTtcbiAgICAgICAgcGdtICs9IFwiXCIgKyBuYW1lICsgXCIgXCIgKyBkZWYgKyBcIiBcIiArIGJvZHkgKyBcIlxcblwiO1xuICAgICAgfSBlbHNlIGlmIChtYWluICE9IG51bGwpIHtcbiAgICAgICAgYnggPSBib3gobWFpbiwgJ2NvZGVNYWluRXhwcicsIHRydWUpO1xuICAgICAgICBzID0gY29kZVNwYW4odGV4dE5vZGUoYm9keSksICdjb2RlRXhwcicpO1xuICAgICAgICBzLnNldEF0dHJpYnV0ZSgnZ2VuZXJhdGVkTkwnLCAnJyk7XG4gICAgICAgIHMuYXBwZW5kQ2hpbGQodGV4dE5vZGUoJ1xcbicpKTtcbiAgICAgICAgYnguYXBwZW5kQ2hpbGQocyk7XG4gICAgICAgIG1hcmtQYXJ0aWFsQXBwbGllcyhieCk7XG4gICAgICAgIGlmICgoKF9yZWYyID0gbWFpbi5sZWlzdXJlQXV0bykgIT0gbnVsbCA/IF9yZWYyLm1vZGUgOiB2b2lkIDApID09PSAnc2lsZW50Jykge1xuICAgICAgICAgIGF1dG8gKz0gXCJcIiArIGJvZHkgKyBcIlxcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICgoKF9yZWYzID0gbWFpbi5sZWlzdXJlQXV0bykgIT0gbnVsbCA/IF9yZWYzLm1vZGUgOiB2b2lkIDApID09PSAnbm90ZWJvb2snKSB7XG4gICAgICAgICAgICBub3RlYm9va0F1dG9Ob2Rlcy5wdXNoKGJ4KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbWFrZU91dHB1dEJveChieCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IHRlc3RzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICB0ZXN0ID0gdGVzdHNbX2pdO1xuICAgICAgICByZXBsYWNlUmFuZ2UodGVzdCwgbWFrZVRlc3RCb3godGVzdC5sZWlzdXJlVGVzdCkpO1xuICAgICAgICB0b3RhbFRlc3RzKys7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbcGdtLCBhdXRvLCB0b3RhbFRlc3RzLCBub3RlYm9va0F1dG9Ob2Rlc107XG4gIH07XG5cbiAgZ2V0RGVmTmFtZSA9IGZ1bmN0aW9uKGFzdCkge1xuICAgIGlmIChhc3QgaW5zdGFuY2VvZiBMZWlzdXJlX2Fubm8gJiYgZ2V0QW5ub05hbWUoYXN0KSA9PT0gJ2RlZmluaXRpb24nKSB7XG4gICAgICByZXR1cm4gZ2V0QW5ub0RhdGEoYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIGdldEFzdCA9IGZ1bmN0aW9uKGJ4LCBkZWYpIHtcbiAgICB2YXIgZGVmTmFtZSwgX3JlZjI7XG5cbiAgICBpZiAoYnguYXN0ICE9IG51bGwpIHtcbiAgICAgIHBhdGNoRnVuY0FzdChieC5hc3QpO1xuICAgICAgYnguc2V0QXR0cmlidXRlKCdsZWlzdXJlRnVuYycsIChfcmVmMiA9IGJ4LmFzdC5sZWlzdXJlTmFtZSkgIT0gbnVsbCA/IF9yZWYyIDogJycpO1xuICAgICAgcmV0dXJuIGJ4LmFzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmID0gZGVmIHx8IGJ4LnRleHRDb250ZW50O1xuICAgICAgZGVmTmFtZSA9IGdldERlZk5hbWUocnVuTW9uYWQoTF9uZXdQYXJzZUxpbmUoKShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE5pbDtcbiAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZGVmO1xuICAgICAgfSkpKTtcbiAgICAgIHNldEFzdChieCwgKGRlZk5hbWUgPyB7XG4gICAgICAgIGxlaXN1cmVOYW1lOiBkZWZOYW1lLFxuICAgICAgICBsZWlzdXJlU291cmNlOiBkZWZcbiAgICAgIH0gOiB7fSkpO1xuICAgICAgcmV0dXJuIGJ4LmFzdDtcbiAgICB9XG4gIH07XG5cbiAgc2V0QXN0ID0gZnVuY3Rpb24oYngsIGFzdCkge1xuICAgIGJ4LmFzdCA9IGFzdDtcbiAgICByZXR1cm4gcGF0Y2hGdW5jQXN0KGFzdCk7XG4gIH07XG5cbiAgcGF0Y2hGdW5jQXN0ID0gZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIHBhcmVudDtcblxuICAgIGlmICgoYXN0ICE9IG51bGwgPyBhc3QubGVpc3VyZU5hbWUgOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgIHBhcmVudCA9IHdpbmRvd1tuYW1lU3ViKGFzdC5sZWlzdXJlTmFtZSldO1xuICAgICAgaWYgKHBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgIHBhcmVudC5hc3QgPSBhc3Q7XG4gICAgICAgIHBhcmVudC5zcmMgPSBhc3QubGVpc3VyZVNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZShcImFzdC1cIiArIGFzdC5sZWlzdXJlTmFtZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG1hcmtQYXJ0aWFsQXBwbGllcyA9IGZ1bmN0aW9uKGJ4LCBkZWYpIHt9O1xuXG4gIHRleHROb2RlID0gZnVuY3Rpb24odGV4dCkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KTtcbiAgfTtcblxuICBub2RlRm9yID0gZnVuY3Rpb24odGV4dCkge1xuICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB0ZXh0Tm9kZSh0ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9O1xuXG4gIGV2YWxPdXRwdXQgPSBmdW5jdGlvbihleEJveCwgbm9mb2N1cywgY29udCkge1xuICAgIHZhciBzZWxlY3Rvciwgc3RvcFVwZGF0ZXMsIHVwZGF0ZVNlbGVjdG9yLCBfcmVmMjtcblxuICAgIGV4Qm94ID0gZ2V0Qm94KGV4Qm94KTtcbiAgICBpZiAoIW5vZm9jdXMpIHtcbiAgICAgIGZvY3VzQm94KGV4Qm94KTtcbiAgICB9XG4gICAgY2xlYW5PdXRwdXQoZXhCb3gsIHRydWUpO1xuICAgIHNlbGVjdG9yID0gZmluZFVwZGF0ZVNlbGVjdG9yKGV4Qm94LnNvdXJjZSk7XG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBleEJveC5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVVcGRhdGUnLCBzZWxlY3Rvcik7XG4gICAgfVxuICAgIG1ha2VPdXRwdXRDb250cm9scyhleEJveCk7XG4gICAgX3JlZjIgPSBnZXRFbGVtZW50cyhleEJveC5maXJzdENoaWxkLCBbJ2Nob29zZVVwZGF0ZScsICdzdG9wVXBkYXRlcyddKSwgdXBkYXRlU2VsZWN0b3IgPSBfcmVmMlswXSwgc3RvcFVwZGF0ZXMgPSBfcmVmMlsxXTtcbiAgICB1cGRhdGVTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgIHJldHVybiBzZXRVcGRhdGUoZXhCb3gsIGV2dC50YXJnZXQudmFsdWUsIHRydWUpO1xuICAgIH0pO1xuICAgIHVwZGF0ZVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7XG4gICAgICBjID0gZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaDtcbiAgICAgIGlmIChjID09PSBFTlRFUikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVTZWxlY3Rvci5ibHVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdXBkYXRlU2VsZWN0b3IudmFsdWUgPSAoZXhCb3guZ2V0QXR0cmlidXRlKCdsZWlzdXJlVXBkYXRlJykpIHx8ICcnO1xuICAgIGV4Qm94LnVwZGF0ZVNlbGVjdG9yID0gdXBkYXRlU2VsZWN0b3I7XG4gICAgcmV0dXJuIGV2YWxCb3goZXhCb3guc291cmNlLCBleEJveCwgY29udCk7XG4gIH07XG5cbiAgZmluZFVwZGF0ZVNlbGVjdG9yID0gZnVuY3Rpb24oYm94KSB7XG4gICAgdmFyIGRlZiwgZGVmVHlwZSwgbGVhZGluZywgbWF0Y2hlZCwgbmFtZSwgdTtcblxuICAgIGlmIChkZWYgPSBib3gudGV4dENvbnRlbnQubWF0Y2goTF9kZWZQYXQoKSkpIHtcbiAgICAgIG1hdGNoZWQgPSBkZWZbMF0sIGxlYWRpbmcgPSBkZWZbMV0sIG5hbWUgPSBkZWZbMl0sIGRlZlR5cGUgPSBkZWZbM107XG4gICAgICBpZiAodSA9IGxlYWRpbmcubWF0Y2godXBkYXRlUGF0KSkge1xuICAgICAgICByZXR1cm4gdVszXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZ2V0RXhwclNvdXJjZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBiLCBzO1xuXG4gICAgcyA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBiID0gZ2V0Qm94KHMuZm9jdXNOb2RlKTtcbiAgICBpZiAoYiAhPT0gYm94IHx8ICFzLnJhbmdlQ291bnQgfHwgcy5nZXRSYW5nZUF0KDApLmNvbGxhcHNlZCkge1xuICAgICAgcmV0dXJuIGJveC50ZXh0Q29udGVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldFJhbmdlVGV4dChzLmdldFJhbmdlQXQoMCkpO1xuICAgIH1cbiAgfTtcblxuICBzZXRVcGRhdGUgPSBmdW5jdGlvbihlbCwgY2hhbm5lbCwgcHJlc2VydmVTb3VyY2UpIHtcbiAgICB2YXIgYXN0LCBkZWYsIGRlZlR5cGUsIGluZGV4LCBsZWFkaW5nLCBtYXRjaGVkLCBuYW1lLCByLCB0eHQsIHU7XG5cbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2xlaXN1cmVVcGRhdGUnLCBjaGFubmVsKTtcbiAgICBpZiAoY2hhbm5lbCkge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgndWktc3RhdGUtaGlnaGxpZ2h0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXN0YXRlLWhpZ2hsaWdodCcpO1xuICAgIH1cbiAgICBhc3QgPSBnZXRBc3QoZWwuc291cmNlKTtcbiAgICB0eHQgPSBlbC5zb3VyY2UudGV4dENvbnRlbnQ7XG4gICAgaWYgKCFwcmVzZXJ2ZVNvdXJjZSAmJiAoZGVmID0gdHh0Lm1hdGNoKExfZGVmUGF0KCkpKSkge1xuICAgICAgbWF0Y2hlZCA9IGRlZlswXSwgbGVhZGluZyA9IGRlZlsxXSwgbmFtZSA9IGRlZlsyXSwgZGVmVHlwZSA9IGRlZlszXTtcbiAgICAgIGluZGV4ID0gZGVmLmluZGV4O1xuICAgICAgaWYgKHUgPSBsZWFkaW5nLm1hdGNoKHVwZGF0ZVBhdCkpIHtcbiAgICAgICAgaW5kZXggKz0gdS5pbmRleCArIHVbMV0ubGVuZ3RoICsgdVsyXS5sZW5ndGg7XG4gICAgICAgIHIgPSBtYWtlUmFuZ2UoZWwuc291cmNlLCBpbmRleCwgaW5kZXggKyB1WzNdLmxlbmd0aCk7XG4gICAgICAgIHIuZGVsZXRlQ29udGVudHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHIgPSBtYWtlUmFuZ2UoZWwuc291cmNlLCBpbmRleCArIGxlYWRpbmcubGVuZ3RoLCBpbmRleCArIGxlYWRpbmcubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHIuaW5zZXJ0Tm9kZSh0ZXh0Tm9kZShjaGFubmVsKSk7XG4gICAgICByZXR1cm4gZWwuc291cmNlLm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfTtcblxuICBoYXNNb25hZE91dHB1dCA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBfcmVmMiwgX3JlZjM7XG5cbiAgICByZXR1cm4gKChfcmVmMiA9IGJveC5maXJzdEVsZW1lbnRDaGlsZCkgIT0gbnVsbCA/IChfcmVmMyA9IF9yZWYyLm5leHRFbGVtZW50U2libGluZykgIT0gbnVsbCA/IF9yZWYzLm5leHRFbGVtZW50U2libGluZyA6IHZvaWQgMCA6IHZvaWQgMCkgIT0gbnVsbDtcbiAgfTtcblxuICBjaGVja0hpZGVTb3VyY2UgPSBmdW5jdGlvbihib3gpIHtcbiAgICB2YXIgaHM7XG5cbiAgICBpZiAoIWJveC5oaWRlT3V0cHV0U291cmNlICYmIGhhc01vbmFkT3V0cHV0KGJveCkpIHtcbiAgICAgIGJveC5oaWRlT3V0cHV0U291cmNlID0gdHJ1ZTtcbiAgICAgIGhzID0gY3JlYXRlTm9kZShcIjxidXR0b24gY2xhc3M9J2VkaXRUb2dnbGUnIHN0eWxlPSdmbG9hdDpyaWdodCc+PC9idXR0b24+XCIpO1xuICAgICAgbWFya3VwQnV0dG9uKGhzKTtcbiAgICAgIGhzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0b2dnbGVFZGl0KGhzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJveC5maXJzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZChocyk7XG4gICAgfVxuICB9O1xuXG4gIG1ha2VPdXRwdXRDb250cm9scyA9IGZ1bmN0aW9uKGV4Qm94KSB7XG4gICAgaWYgKGV4Qm94LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCA9PT0gZXhCb3guZmlyc3RDaGlsZC5sYXN0Q2hpbGQpIHtcbiAgICAgIGV4Qm94LmZpcnN0Q2hpbGQuaW5zZXJ0QmVmb3JlKGNyZWF0ZUZyYWdtZW50KFwiPGJ1dHRvbiBvbmNsaWNrPSdOb3RlYm9vay5jbGVhck91dHB1dEJveCh0aGlzKSc+WDwvYnV0dG9uPlwiKSwgZXhCb3guZmlyc3RDaGlsZC5maXJzdENoaWxkKTtcbiAgICAgIGV4Qm94LmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoY3JlYXRlRnJhZ21lbnQoXCI8YnV0dG9uIG9uY2xpY2s9J05vdGVib29rLm1ha2VUZXN0Q2FzZSh0aGlzKScgbGVpc3VyZUlkPSdtYWtlVGVzdENhc2UnPk1ha2UgdGVzdFxcbmNhc2U8L2J1dHRvbj48Yj5VcGRhdGU6IDwvYj48aW5wdXQgdHlwZT0ndGV4dCdcXG5wbGFjZWhvbGRlcj0nQ2xpY2sgZm9yIHVwZGF0aW5nJyBsaXN0PSdjaGFubmVsTGlzdCcgbGVpc3VyZUlkPSdjaG9vc2VVcGRhdGUnPjwvaW5wdXQ+PGJ1dHRvblxcbm9uY2xpY2s9J05vdGVib29rLmNsZWFyVXBkYXRlcyh0aGlzKScgbGVpc3VyZUlkPSdzdG9wVXBkYXRlcyc+U3RvcCBVcGRhdGVzPC9idXR0b24+XCIpKTtcbiAgICAgIG1hcmt1cEJ1dHRvbnMoZXhCb3gpO1xuICAgICAgcmV0dXJuIGV4Qm94LmNsYXNzTGlzdC5hZGQoJ2ZhdENvbnRyb2xzJyk7XG4gICAgfVxuICB9O1xuXG4gIHNob3dPdXRwdXRTb3VyY2UgPSBmdW5jdGlvbihvdXRwdXQpIHtcbiAgICBvdXRwdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkaW5nU291cmNlJyk7XG4gICAgcmV0dXJuIG91dHB1dC5zb3VyY2Uuc3R5bGUuZGlzcGxheSA9ICcnO1xuICB9O1xuXG4gIGhpZGVPdXRwdXRTb3VyY2UgPSBmdW5jdGlvbihvdXRwdXQpIHtcbiAgICBjb25zb2xlLmxvZyhcIkhJREU6IFwiICsgb3V0cHV0KTtcbiAgICBvdXRwdXQuY2xhc3NMaXN0LmFkZCgnaGlkaW5nU291cmNlJyk7XG4gICAgcmV0dXJuIG91dHB1dC5zb3VyY2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfTtcblxuICB0b2dnbGVFZGl0ID0gZnVuY3Rpb24odG9nZ2xlQnV0dG9uKSB7XG4gICAgdmFyIG91dHB1dDtcblxuICAgIG91dHB1dCA9IGdldEJveCh0b2dnbGVCdXR0b24pO1xuICAgIGlmIChvdXRwdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRpbmdTb3VyY2UnKSkge1xuICAgICAgcmV0dXJuIHNob3dPdXRwdXRTb3VyY2Uob3V0cHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhpZGVPdXRwdXRTb3VyY2Uob3V0cHV0KTtcbiAgICB9XG4gIH07XG5cbiAgY2xlYXJVcGRhdGVzID0gZnVuY3Rpb24od2lkZ2V0LCBwcmVzZXJ2ZVNvdXJjZSkge1xuICAgIHZhciBleEJveDtcblxuICAgIGV4Qm94ID0gZ2V0Qm94KHdpZGdldCk7XG4gICAgZXhCb3gudXBkYXRlU2VsZWN0b3IudmFsdWUgPSAnJztcbiAgICByZXR1cm4gc2V0VXBkYXRlKGV4Qm94LCAnJywgcHJlc2VydmVTb3VyY2UpO1xuICB9O1xuXG4gIHVwZGF0ZSA9IGZ1bmN0aW9uKHR5cGUsIGVudikge1xuICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuXG4gICAgZW52ID0gZW52ICE9IG51bGwgPyBlbnYgOiBkZWZhdWx0RW52O1xuICAgIF9yZWYyID0gZW52Lm93bmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbGVpc3VyZVVwZGF0ZX49J1wiICsgdHlwZSArIFwiJ11cIik7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBub2RlID0gX3JlZjJbX2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaChldmFsT3V0cHV0KG5vZGUsIHRydWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIGNsZWFyT3V0cHV0Qm94ID0gZnVuY3Rpb24oZXhCb3gpIHtcbiAgICBjbGVhclVwZGF0ZXMoZXhCb3gsIHRydWUpO1xuICAgIHJldHVybiBjbGVhbk91dHB1dChleEJveCk7XG4gIH07XG5cbiAgY2xlYW5PdXRwdXQgPSBmdW5jdGlvbihleEJveCwgcHJlc2VydmVDb250cm9scykge1xuICAgIHZhciBmYywgX3Jlc3VsdHM7XG5cbiAgICBleEJveCA9IGdldEJveChleEJveCk7XG4gICAgZXhCb3guY2xhc3NMaXN0LnJlbW92ZSgnZmF0Q29udHJvbHMnKTtcbiAgICBpZiAoIXByZXNlcnZlQ29udHJvbHMpIHtcbiAgICAgIGV4Qm94LmhpZGVPdXRwdXRTb3VyY2UgPSBudWxsO1xuICAgICAgZmMgPSBleEJveC5maXJzdENoaWxkO1xuICAgICAgZmMucmVtb3ZlQ2hpbGQoZmMuZmlyc3RDaGlsZCk7XG4gICAgICB3aGlsZSAoZmMuZmlyc3RDaGlsZCAhPT0gZmMubGFzdENoaWxkKSB7XG4gICAgICAgIGZjLnJlbW92ZUNoaWxkKGZjLmxhc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICAgIF9yZXN1bHRzID0gW107XG4gICAgd2hpbGUgKGV4Qm94LmZpcnN0Q2hpbGQgIT09IGV4Qm94Lmxhc3RDaGlsZCkge1xuICAgICAgX3Jlc3VsdHMucHVzaChleEJveC5yZW1vdmVDaGlsZChleEJveC5sYXN0Q2hpbGQpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIG1ha2VUZXN0Q2FzZSA9IGZ1bmN0aW9uKGV4Qm94KSB7XG4gICAgdmFyIGJveCwgb3V0cHV0LCBzb3VyY2UsIHRlc3Q7XG5cbiAgICBvdXRwdXQgPSBnZXRCb3goZXhCb3gpO1xuICAgIHNvdXJjZSA9IG91dHB1dC5zb3VyY2U7XG4gICAgdGVzdCA9IHtcbiAgICAgIGV4cHI6IHNvdXJjZS50ZXh0Q29udGVudC50cmltKCksXG4gICAgICBleHBlY3RlZDogZXNjYXBlSHRtbChQYXJzZS5wcmludChvdXRwdXQucmVzdWx0KSlcbiAgICB9O1xuICAgIGJveCA9IG1ha2VUZXN0Qm94KHRlc3QsIG93bmVyKGV4Qm94KSk7XG4gICAgc291cmNlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJveCwgc291cmNlKTtcbiAgICByZW1vdmUoc291cmNlKTtcbiAgICByZW1vdmUob3V0cHV0KTtcbiAgICBib3gucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGV4dE5vZGUoJ1xcdUZFRkYnKSwgYm94KTtcbiAgICBib3gucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGV4dE5vZGUoJ1xcdUZFRkYnKSwgYm94Lm5leHRTaWJsaW5nKTtcbiAgICBpZiAob3duZXIoYm94KS5hdXRvcnVuU3RhdGUpIHtcbiAgICAgIHJldHVybiBjbGlja1Rlc3QoYm94KTtcbiAgICB9XG4gIH07XG5cbiAgbWFrZVRlc3RCb3ggPSBmdW5jdGlvbih0ZXN0LCBvd25lciwgc3JjKSB7XG4gICAgdmFyIGJ4LCBzO1xuXG4gICAgc3JjID0gc3JjICE9IG51bGwgPyBzcmMgOiBcIiNAdGVzdCBcIiArIChKU09OLnN0cmluZ2lmeSh0ZXN0LmV4cHIpKSArIFwiXFxuI0BleHBlY3RlZCBcIiArIChKU09OLnN0cmluZ2lmeSh0ZXN0LmV4cGVjdGVkKSk7XG4gICAgcyA9IGNvZGVTcGFuKHNyYywgJ2NvZGVUZXN0Jyk7XG4gICAgcy5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSgnXFxuJykpO1xuICAgIHMuc2V0QXR0cmlidXRlKCdnZW5lcmF0ZWROTCcsICcnKTtcbiAgICBieCA9IGNvZGVCb3goJ2NvZGVNYWluVGVzdCcpO1xuICAgIGJ4LnRlc3RTcmMgPSBzO1xuICAgIGJ4LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29kZU1haW5UZXN0IG5vdHJ1bicpO1xuICAgIGJ4LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ2ZhbHNlJyk7XG4gICAgYnguYXBwZW5kQ2hpbGQocyk7XG4gICAgYnguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY2xpY2tUZXN0KGJ4KTtcbiAgICB9KSwgdHJ1ZSk7XG4gICAgYngudGVzdCA9IHRlc3Q7XG4gICAgcmV0dXJuIGJ4O1xuICB9O1xuXG4gIGNsaWNrVGVzdCA9IGZ1bmN0aW9uKGJ4KSB7XG4gICAgdmFyIGV4cHJCb3gsIHIsIHNwO1xuXG4gICAgaWYgKGJ4LmNsYXNzTGlzdC5jb250YWlucygnbm90cnVuJykpIHtcbiAgICAgIHJldHVybiBydW5UZXN0KGJ4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICByLnNldFN0YXJ0QmVmb3JlKGJ4KTtcbiAgICAgIHIuc2V0RW5kQWZ0ZXIoYngpO1xuICAgICAgci5kZWxldGVDb250ZW50cygpO1xuICAgICAgc3AgPSBjb2RlU3BhbihieC50ZXN0LmV4cHIsICdjb2RlRXhwcicpO1xuICAgICAgc3Auc2V0QXR0cmlidXRlKCdnZW5lcmF0ZWROTCcsICcnKTtcbiAgICAgIGV4cHJCb3ggPSBib3gociwgJ2NvZGVNYWluRXhwcicsIHRydWUpO1xuICAgICAgZXhwckJveC5hcHBlbmRDaGlsZChzcCk7XG4gICAgICByZXR1cm4gbWFrZU91dHB1dEJveChleHByQm94KTtcbiAgICB9XG4gIH07XG5cbiAgcnVuVGVzdCA9IGZ1bmN0aW9uKGJ4KSB7XG4gICAgdmFyIHBhc3NlZCwgdGVzdDtcblxuICAgIHRlc3QgPSBieC50ZXN0O1xuICAgIHBhc3NlZCA9IHRydWU7XG4gICAgcHJvY2Vzc0xpbmUocHJlcEV4cHIodGVzdC5leHByKSwge1xuICAgICAgdmFsdWVzOiB7fSxcbiAgICAgIHJlcXVpcmU6IHJlcSxcbiAgICAgIHdyaXRlOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKHN0cik7XG4gICAgICB9LFxuICAgICAgZGVidWc6IGRlYnVnLFxuICAgICAgcHJvbXB0OiBmdW5jdGlvbihtc2csIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQobnVsbCk7XG4gICAgICB9LFxuICAgICAgcHJvY2Vzc1Jlc3VsdDogZnVuY3Rpb24ocmVzdWx0LCBhc3QpIHtcbiAgICAgICAgcmV0dXJuIHBhc3NlZCA9IHNob3dSZXN1bHQoYngsIGVzY2FwZUh0bWwoU3RyaW5nKHJlc3VsdCkpLCBlc2NhcGVIdG1sKHRlc3QuZXhwZWN0ZWQpKTtcbiAgICAgIH0sXG4gICAgICBlcnI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFzc2VkID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgcHJlc2VudFZhbHVlOiBmdW5jdGlvbih4KSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgICAgfVxuICAgIH0sIGlkZW50aXR5KTtcbiAgICByZXR1cm4gcGFzc2VkO1xuICB9O1xuXG4gIHNob3dSZXN1bHQgPSBmdW5jdGlvbihieCwgYWN0dWFsLCBleHBlY3RlZCkge1xuICAgIHZhciBjbDtcblxuICAgIGNsID0gYnguY2xhc3NMaXN0O1xuICAgIGNsLnJlbW92ZSgnbm90cnVuJyk7XG4gICAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICAgIGNsLnJlbW92ZSgnZmFpbGVkJyk7XG4gICAgICBjbC5hZGQoJ3Bhc3NlZCcpO1xuICAgICAgYngudGVzdFNyYy5pbm5lckhUTUwgPSBcIiNAdGVzdCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cHIpKSArIFwiXFxuI0BleHBlY3RlZCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cGVjdGVkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsLnJlbW92ZSgncGFzc2VkJyk7XG4gICAgICBjbC5hZGQoJ2ZhaWxlZCcpO1xuICAgICAgYngudGVzdFNyYy5pbm5lckhUTUwgPSBcIiNAdGVzdCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cHIpKSArIFwiXFxuI0BleHBlY3RlZCBcIiArIChKU09OLnN0cmluZ2lmeShieC50ZXN0LmV4cGVjdGVkKSkgKyBcIlxcbiNAcmVzdWx0IFwiICsgKEpTT04uc3RyaW5naWZ5KGFjdHVhbCkpO1xuICAgICAgY29uc29sZS5sb2coXCJleHBlY3RlZCA8XCIgKyBleHBlY3RlZCArIFwiPiBidXQgZ290IDxcIiArIGFjdHVhbCArIFwiPlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdHVhbCA9PT0gZXhwZWN0ZWQ7XG4gIH07XG5cbiAgcHJlcEV4cHIgPSBmdW5jdGlvbih0eHQpIHtcbiAgICByZXR1cm4gdHh0O1xuICB9O1xuXG4gIGVudkZvciA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBlbnYsIGV4Qm94LCB3aWRnZXQ7XG5cbiAgICBleEJveCA9IGdldEJveChib3gpO1xuICAgIHdpZGdldCA9IG51bGw7XG4gICAgZW52ID0ge1xuICAgICAgZmlsZVNldHRpbmdzOiB7fSxcbiAgICAgIGRlYnVnOiBkZWJ1ZyxcbiAgICAgIGZpbmlzaGVkRXZlbnQ6IGZ1bmN0aW9uKGV2dCwgY2hhbm5lbCkge1xuICAgICAgICByZXR1cm4gdXBkYXRlKGNoYW5uZWwgIT0gbnVsbCA/IGNoYW5uZWwgOiAnYXBwJywgdGhpcyk7XG4gICAgICB9LFxuICAgICAgb3duZXI6IG93bmVyKGJveCksXG4gICAgICBib3g6IGJveCxcbiAgICAgIHJlcXVpcmU6IHJlcSxcbiAgICAgIHdyaXRlOiBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgdmFyIGRpdjtcblxuICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ291dHB1dERpdicpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gXCJcIiArIG1zZyArIFwiXFxuXCI7XG4gICAgICAgIGV4Qm94LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIGNoZWNrSGlkZVNvdXJjZShleEJveCk7XG4gICAgICAgIHJldHVybiBtYXJrdXBCdXR0b25zKGV4Qm94KTtcbiAgICAgIH0sXG4gICAgICBnZXRXaWRnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXdpZGdldCkge1xuICAgICAgICAgIHdpZGdldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7XG4gICAgICAgICAgZXhCb3guYXBwZW5kQ2hpbGQod2lkZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2lkZ2V0O1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3lXaWRnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAod2lkZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlbW92ZSh3aWRnZXQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvbXB0OiBmdW5jdGlvbihtc2csIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQod2luZG93LnByb21wdChtc2cpKTtcbiAgICAgIH0sXG4gICAgICBwcm9jZXNzUmVzdWx0OiBmdW5jdGlvbihyZXN1bHQsIGFzdCkge1xuICAgICAgICBib3gucmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm4gc2V0QXN0KGJveCwgYXN0KTtcbiAgICAgIH0sXG4gICAgICBwcmVzZW50VmFsdWU6IHByZXNlbnRWYWx1ZSxcbiAgICAgIGVycjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIHZhciBidG4sIF9yZWYyO1xuXG4gICAgICAgIGJ0biA9IGJveC5xdWVyeVNlbGVjdG9yKCdbbGVpc3VyZUlkPVwibWFrZVRlc3RDYXNlXCJdJyk7XG4gICAgICAgIGlmIChidG4pIHtcbiAgICAgICAgICByZW1vdmUoYnRuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy53cml0ZShcIjxkaXYgY2xhc3M9J2Vycm9yRGl2Jz5cIiArIGVzY2FwZUh0bWwoXCJFUlJPUjogXCIgKyAoZXJyLmxlaXN1cmVDb250ZXh0ID8gXCJcIiArIGVyciArIFwiOlxcblwiICsgKGxlaXN1cmVDb250ZXh0U3RyaW5nKGVycikpICsgXCJcXG5cIiA6ICcnKSArICgoX3JlZjIgPSBlcnIuc3RhY2spICE9IG51bGwgPyBfcmVmMiA6IGVycikpICsgXCI8L2Rpdj5cIik7XG4gICAgICB9LFxuICAgICAgY2xlYW51cDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveVdpZGdldCgpO1xuICAgICAgICBpZiAocm9vdC5sYXN0RW52ID09PSBlbnYpIHtcbiAgICAgICAgICByZXR1cm4gcm9vdC5sYXN0RW52ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZW52Ll9fcHJvdG9fXyA9IGRlZmF1bHRFbnY7XG4gICAgZW52LmZpbGVTZXR0aW5ncy51cmkgPSBuZXcgVVJJKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xuICAgIHJvb3QubGFzdEVudiA9IGVudjtcbiAgICByZXR1cm4gZW52O1xuICB9O1xuXG4gIGxlaXN1cmVDb250ZXh0U3RyaW5nID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgdmFyIGZ1bmMsIG9mZnNldDtcblxuICAgIHJldHVybiAoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZXN1bHRzO1xuXG4gICAgICBfcmVmMiA9IGVyci5sZWlzdXJlQ29udGV4dC50b0FycmF5KCk7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBfcmVmMyA9IF9yZWYyW19pXSwgZnVuYyA9IF9yZWYzWzBdLCBvZmZzZXQgPSBfcmVmM1sxXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChsaW5rU291cmNlKGZ1bmMsIG9mZnNldCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH0pKCkpLmpvaW4oJ1xcbicpO1xuICB9O1xuXG4gIGxpbmtTb3VyY2UgPSBmdW5jdGlvbihmdW5jTmFtZSwgb2Zmc2V0KSB7fTtcblxuICBzaG93U291cmNlID0gZnVuY3Rpb24oZnVuY05hbWUsIG9mZnNldCkge307XG5cbiAgbWFrZU91dHB1dEJveCA9IGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgIHZhciBjbCwgbm9kZSwgX2ksIF9sZW4sIF9yZWYyO1xuXG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlT3V0cHV0JywgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlJywgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlQm94JywgJycpO1xuICAgIF9yZWYyID0gYm94Q2xhc3Nlcy5vdXRwdXQ7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgY2wgPSBfcmVmMltfaV07XG4gICAgICBub2RlLmNsYXNzTGlzdC5hZGQoY2wpO1xuICAgIH1cbiAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29udGVudEVkaXRhYmxlJywgJ2ZhbHNlJyk7XG4gICAgbm9kZS5zb3VyY2UgPSBzb3VyY2U7XG4gICAgc291cmNlLm91dHB1dCA9IG5vZGU7XG4gICAgbm9kZS5pbm5lckhUTUwgPSBcIjxkaXYgY2xhc3M9J2NvbnRyb2xzJz48YnV0dG9uIG9uY2xpY2s9J05vdGVib29rLmV2YWxPdXRwdXQodGhpcyknPi0mZ3Q7PC9idXR0b24+PC9kaXY+XCI7XG4gICAgbWFya3VwQnV0dG9ucyhub2RlKTtcbiAgICBzb3VyY2UucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgc291cmNlLm5leHRTaWJsaW5nKTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBjb2RlU3BhbiA9IGZ1bmN0aW9uKHRleHQsIGJveFR5cGUpIHtcbiAgICB2YXIgbm9kZTtcblxuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoYm94VHlwZSwgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdMZWlzdXJlJywgJycpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjbGFzcycsIGJveFR5cGUpO1xuICAgIGlmICh0ZXh0KSB7XG4gICAgICBub2RlLmFwcGVuZENoaWxkKG5vZGVGb3IodGV4dCkpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBjb2RlQm94ID0gZnVuY3Rpb24oYm94VHlwZSkge1xuICAgIHZhciBub2RlO1xuXG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFkZEJveENsYXNzZXMobm9kZSwgYm94VHlwZSk7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ0xlaXN1cmVCb3gnLCAnJyk7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ0xlaXN1cmUnLCAnJyk7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24oZSkge1xuICAgICAgcmV0dXJuIGNoZWNrTXV0YXRlRnJvbU1vZGlmaWNhdGlvbihlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICBib3ggPSBmdW5jdGlvbihyYW5nZSwgYm94VHlwZSwgZW1wdHkpIHtcbiAgICB2YXIgbm9kZTtcblxuICAgIG5vZGUgPSBjb2RlQm94KGJveFR5cGUpO1xuICAgIGlmIChlbXB0eSkge1xuICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5hcHBlbmRDaGlsZChyYW5nZS5leHRyYWN0Q29udGVudHMoKSk7XG4gICAgfVxuICAgIHJhbmdlLmluc2VydE5vZGUobm9kZSk7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgbGluZVBhdCA9IG5ldyBSZWdFeHAoXCIoXCIgKyAoTF9saW5lUGF0KCkuc291cmNlKSArIFwiKVwiKTtcblxuICBmaW5kRGVmcyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgdmFyIGRlZiwgcmFuZ2VzLCByZXN0LCBybmcsIHR4dDtcblxuICAgIHR4dCA9IGVsLnRleHRDb250ZW50O1xuICAgIHJlc3QgPSB0eHQ7XG4gICAgcmFuZ2VzID0gW107XG4gICAgd2hpbGUgKChkZWYgPSByZXN0Lm1hdGNoKExfdW5hbmNob3JlZERlZlBhdCgpKSkgJiYgZGVmWzFdLmxlbmd0aCAhPT0gcmVzdC5sZW5ndGgpIHtcbiAgICAgIHJuZyA9IGdldFJhbmdlcyhlbCwgdHh0LCByZXN0LCBkZWYsIHR4dC5sZW5ndGggLSByZXN0Lmxlbmd0aCk7XG4gICAgICBpZiAocm5nKSB7XG4gICAgICAgIHJlc3QgPSBybmcubmV4dDtcbiAgICAgICAgaWYgKHJuZykge1xuICAgICAgICAgIHJhbmdlcy5wdXNoKHJuZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmFuZ2VzO1xuICB9O1xuXG4gIHRlc3RQYXQgPSAvKCNAdGVzdChbXlxcbl0qKVxcbiNAZXhwZWN0ZWQoW15cXG5dKikpXFxuL207XG5cbiAgZ2V0UmFuZ2VzID0gZnVuY3Rpb24oZWwsIHR4dCwgcmVzdCwgZGVmLCByZXN0T2ZmKSB7XG4gICAgdmFyIGJvZHksIGJvZHlTdGFydCwgZGVmVHlwZSwgZW5kUGF0LCBleCwgZXhFbmQsIGxlYWRPZmYsIGxlYWRpbmcsIGxlYWRpbmdTcGFjZXMsIGxtLCBtLCBtMiwgbWFpbkVuZCwgbWFpblN0YXJ0LCBtYXRjaFN0YXJ0LCBtYXRjaGVkLCBuYW1lLCBuYW1lRW5kLCBuYW1lUmF3LCBuZXh0LCBvdXRlclJhbmdlLCByLCByZXN0MSwgdCwgdE9mZiwgdGVzdHMsIHRleHRTdGFydCwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjU7XG5cbiAgICBfcmVmMiA9IG0gPSBkZWYsIG1hdGNoZWQgPSBfcmVmMlswXSwgbGVhZGluZyA9IF9yZWYyWzFdLCBuYW1lUmF3ID0gX3JlZjJbMl0sIGRlZlR5cGUgPSBfcmVmMlszXTtcbiAgICBpZiAoIXJlc3QudHJpbSgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2UgaWYgKG0gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFttYWtlUmFuZ2UoZWwsIHJlc3RPZmYsIHR4dC5sZW5ndGgpLCBudWxsLCBudWxsLCBbXSwgJyddO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXN0cyA9IFtdO1xuICAgICAgbWF0Y2hTdGFydCA9IHJlc3RPZmYgKyBtLmluZGV4O1xuICAgICAgaWYgKGRlZlR5cGUgPT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAobmFtZVJhd1swXSA9PT0gJyAnKSB7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgICBkZWZUeXBlID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hbWUgPSBuYW1lUmF3LnRyaW0oKSB8fCBudWxsO1xuICAgICAgfVxuICAgICAgcmVzdDEgPSByZXN0LnN1YnN0cmluZygoZGVmVHlwZSA/IG1hdGNoZWQgOiBsZWFkaW5nKS5sZW5ndGgpO1xuICAgICAgZW5kUGF0ID0gcmVzdDEubWF0Y2goL1xcbitbXlxcc118XFxuPyQvKTtcbiAgICAgIG5leHQgPSBlbmRQYXQgPyByZXN0MS5zdWJzdHJpbmcoZW5kUGF0LmluZGV4KSA6IHJlc3QxO1xuICAgICAgbWFpbkVuZCA9IHR4dC5sZW5ndGggLSBuZXh0Lmxlbmd0aDtcbiAgICAgIHQgPSBsZWFkaW5nO1xuICAgICAgbGVhZE9mZiA9IHRPZmYgPSByZXN0T2ZmO1xuICAgICAgd2hpbGUgKG0yID0gdC5tYXRjaCh0ZXN0UGF0KSkge1xuICAgICAgICByID0gbWFrZVJhbmdlKGVsLCB0T2ZmICsgbTIuaW5kZXgsIHRPZmYgKyBtMi5pbmRleCArIG0yWzFdLmxlbmd0aCk7XG4gICAgICAgIHIubGVpc3VyZVRlc3QgPSB7XG4gICAgICAgICAgZXhwcjogSlNPTi5wYXJzZShtMlsyXSksXG4gICAgICAgICAgZXhwZWN0ZWQ6IEpTT04ucGFyc2UobTJbM10pXG4gICAgICAgIH07XG4gICAgICAgIHRlc3RzLnB1c2gocik7XG4gICAgICAgIHRPZmYgKz0gbTIuaW5kZXggKyBtMlsxXS5sZW5ndGg7XG4gICAgICAgIHQgPSBsZWFkaW5nLnN1YnN0cmluZyh0T2ZmIC0gbGVhZE9mZik7XG4gICAgICB9XG4gICAgICBpZiAobmFtZSkge1xuICAgICAgICBtYWluU3RhcnQgPSBtYXRjaFN0YXJ0ICsgKChfcmVmMyA9IGxlYWRpbmcgIT0gbnVsbCA/IGxlYWRpbmcubGVuZ3RoIDogdm9pZCAwKSAhPSBudWxsID8gX3JlZjMgOiAwKTtcbiAgICAgICAgbmFtZUVuZCA9IG1haW5TdGFydCArIG5hbWUubGVuZ3RoO1xuICAgICAgICBsZWFkaW5nU3BhY2VzID0gKHJlc3QxLm1hdGNoKC9eXFxzKi8pKVswXS5sZW5ndGg7XG4gICAgICAgIGJvZHlTdGFydCA9IHR4dC5sZW5ndGggLSAocmVzdDEubGVuZ3RoIC0gbGVhZGluZ1NwYWNlcyk7XG4gICAgICAgIG91dGVyUmFuZ2UgPSBtYWtlUmFuZ2UoZWwsIG1haW5TdGFydCwgbWFpbkVuZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbWFpbjogb3V0ZXJSYW5nZSxcbiAgICAgICAgICBuYW1lOiB0eHQuc3Vic3RyaW5nKG1haW5TdGFydCwgbmFtZUVuZCksXG4gICAgICAgICAgZGVmOiBkZWZUeXBlLFxuICAgICAgICAgIGJvZHk6IHR4dC5zdWJzdHJpbmcoYm9keVN0YXJ0LCBtYWluRW5kKSxcbiAgICAgICAgICB0ZXN0czogdGVzdHMsXG4gICAgICAgICAgbmV4dDogbmV4dFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWFpblN0YXJ0ID0gZGVmVHlwZSA9PT0gJz0nID8gcmVzdE9mZiArIG0uaW5kZXggKyBtWzBdLmxlbmd0aCA6IG1hdGNoU3RhcnQgKyAoKF9yZWY0ID0gbGVhZGluZyAhPSBudWxsID8gbGVhZGluZy5sZW5ndGggOiB2b2lkIDApICE9IG51bGwgPyBfcmVmNCA6IDApO1xuICAgICAgICBleCA9IHR4dC5zdWJzdHJpbmcobWFpblN0YXJ0LCBtYWluRW5kKS5tYXRjaCgvXiguKlteIFxcbl0pWyBcXG5dKiQvKTtcbiAgICAgICAgZXhFbmQgPSBleCA/IG1haW5TdGFydCArIGV4WzFdLmxlbmd0aCA6IG1haW5FbmQ7XG4gICAgICAgIGJvZHkgPSB0eHQuc3Vic3RyaW5nKG1haW5TdGFydCwgZXhFbmQpO1xuICAgICAgICBpZiAoYm9keS50cmltKCkpIHtcbiAgICAgICAgICB0ZXh0U3RhcnQgPSByZXN0T2ZmICsgbS5pbmRleCArICh0ID8gbGVhZGluZy5sZW5ndGggLSB0Lmxlbmd0aCA6IDApO1xuICAgICAgICAgIGlmICgodCAhPSBudWxsKSAmJiAobG0gPSB0Lm1hdGNoKC9eWyBcXG5dKy8pKSkge1xuICAgICAgICAgICAgdGV4dFN0YXJ0ICs9IGxtWzBdLmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG0gPSB0Lm1hdGNoKC8oPzpefFxcbikjQGF1dG8oICtbXlxcbl0qKT8oXFxufCQpLykpIHtcbiAgICAgICAgICAgIG91dGVyUmFuZ2UgPSBtYWtlUmFuZ2UoZWwsIHRleHRTdGFydCwgZXhFbmQpO1xuICAgICAgICAgICAgb3V0ZXJSYW5nZS5sZWlzdXJlQXV0byA9IEpTT04ucGFyc2UoXCJ7XCIgKyAoKF9yZWY1ID0gbVsxXSkgIT0gbnVsbCA/IF9yZWY1IDogJycpICsgXCJ9XCIpO1xuICAgICAgICAgICAgaWYgKG91dGVyUmFuZ2UubGVpc3VyZUF1dG8ubW9kZSA9PT0gJ25vdGVib29rJykge1xuICAgICAgICAgICAgICBvdXRlclJhbmdlLmxlaXN1cmVOb2RlID0gZWw7XG4gICAgICAgICAgICAgIG91dGVyUmFuZ2UubGVpc3VyZVN0YXJ0ID0gdGV4dFN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgbWFpbjogb3V0ZXJSYW5nZSxcbiAgICAgICAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgZGVmOiBudWxsLFxuICAgICAgICAgICAgICBib2R5OiB0eHQuc3Vic3RyaW5nKHRleHRTdGFydCwgZXhFbmQpLFxuICAgICAgICAgICAgICB0ZXN0czogdGVzdHMsXG4gICAgICAgICAgICAgIGZ1bGxUZXh0OiB0eHQuc3Vic3RyaW5nKHRleHRTdGFydCwgZXhFbmQpLFxuICAgICAgICAgICAgICBuZXh0OiBuZXh0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvdXRlclJhbmdlID0gbWFrZVJhbmdlKGVsLCB0ZXh0U3RhcnQsIGV4RW5kKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIG1haW46IG91dGVyUmFuZ2UsXG4gICAgICAgICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgICAgICAgIGRlZjogbnVsbCxcbiAgICAgICAgICAgICAgYm9keTogdHh0LnN1YnN0cmluZyh0ZXh0U3RhcnQsIGV4RW5kKSxcbiAgICAgICAgICAgICAgdGVzdHM6IHRlc3RzLFxuICAgICAgICAgICAgICBuZXh0OiBuZXh0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWFpbjogbnVsbCxcbiAgICAgICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgICAgICBkZWY6IG51bGwsXG4gICAgICAgICAgICBib2R5OiBudWxsLFxuICAgICAgICAgICAgdGVzdHM6IHRlc3RzLFxuICAgICAgICAgICAgbmV4dDogbmV4dFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgbWFrZVJhbmdlID0gZnVuY3Rpb24oZWwsIG9mZjEsIG9mZjIpIHtcbiAgICB2YXIgbm9kZSwgb2Zmc2V0LCByYW5nZSwgX3JlZjIsIF9yZWYzO1xuXG4gICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIF9yZWYyID0gZ3JwKGVsLCBvZmYxLCBmYWxzZSksIG5vZGUgPSBfcmVmMlswXSwgb2Zmc2V0ID0gX3JlZjJbMV07XG4gICAgaWYgKChvZmZzZXQgIT0gbnVsbCkgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgcmFuZ2Uuc2V0U3RhcnQobm9kZSwgb2Zmc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2Uuc2V0U3RhcnRCZWZvcmUobm9kZSk7XG4gICAgfVxuICAgIGlmIChvZmYyICE9IG51bGwpIHtcbiAgICAgIF9yZWYzID0gZ3JwKGVsLCBvZmYyLCB0cnVlKSwgbm9kZSA9IF9yZWYzWzBdLCBvZmZzZXQgPSBfcmVmM1sxXTtcbiAgICAgIGlmIChvZmZzZXQgIT0gbnVsbCkge1xuICAgICAgICByYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmdlLnNldEVuZEFmdGVyKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgZ3JwID0gZnVuY3Rpb24obm9kZSwgY2hhck9mZnNldCwgZW5kKSB7XG4gICAgdmFyIGNoaWxkLCBvZmZzZXQsIHJldCwgX3JlZjI7XG5cbiAgICBfcmVmMiA9IHJldCA9IGdldFJhbmdlUG9zaXRpb24obm9kZS5maXJzdENoaWxkLCBjaGFyT2Zmc2V0LCBlbmQpLCBjaGlsZCA9IF9yZWYyWzBdLCBvZmZzZXQgPSBfcmVmMlsxXTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSBlbHNlIGlmIChub2RlLmxhc3RDaGlsZCkge1xuICAgICAgcmV0dXJuIG5vZGVFbmQobm9kZS5sYXN0Q2hpbGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW25vZGUsIGVuZCA/IDEgOiAwXTtcbiAgICB9XG4gIH07XG5cbiAgZ2V0UmFuZ2VQb3NpdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIGNoYXJPZmZzZXQsIGVuZCkge1xuICAgIHZhciBuZXdOb2RlLCBuZXdPZmYsIHJldCwgX3JlZjI7XG5cbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgIHJldHVybiBbbnVsbCwgY2hhck9mZnNldF07XG4gICAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBpZiAobm9kZS5sZW5ndGggPiAoZW5kID8gY2hhck9mZnNldCAtIDEgOiBjaGFyT2Zmc2V0KSkge1xuICAgICAgICByZXR1cm4gW25vZGUsIGNoYXJPZmZzZXRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gY29udGludWVSYW5nZVBvc2l0aW9uKG5vZGUsIGNoYXJPZmZzZXQgLSBub2RlLmxlbmd0aCwgZW5kKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5vZGUubm9kZU5hbWUgPT09ICdCUicpIHtcbiAgICAgIGlmIChjaGFyT2Zmc2V0ID09PSAoZW5kID8gMSA6IDApKSB7XG4gICAgICAgIHJldHVybiBbbm9kZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29udGludWVSYW5nZVBvc2l0aW9uKG5vZGUsIGNoYXJPZmZzZXQsIGVuZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChub2RlLmZpcnN0Q2hpbGQgIT0gbnVsbCkge1xuICAgICAgX3JlZjIgPSBnZXRSYW5nZVBvc2l0aW9uKG5vZGUuZmlyc3RDaGlsZCwgY2hhck9mZnNldCwgZW5kKSwgbmV3Tm9kZSA9IF9yZWYyWzBdLCBuZXdPZmYgPSBfcmVmMlsxXTtcbiAgICAgIGlmIChuZXdOb2RlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtuZXdOb2RlLCBuZXdPZmZdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnRpbnVlUmFuZ2VQb3NpdGlvbihub2RlLCBuZXdPZmYsIGVuZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb250aW51ZVJhbmdlUG9zaXRpb24obm9kZSwgY2hhck9mZnNldCwgZW5kKTtcbiAgICB9XG4gIH07XG5cbiAgY29udGludWVSYW5nZVBvc2l0aW9uID0gZnVuY3Rpb24obm9kZSwgY2hhck9mZnNldCwgZW5kKSB7XG4gICAgdmFyIG5ld09mZjtcblxuICAgIG5ld09mZiA9IGNoYXJPZmZzZXQgLSAoKGFkZHNMaW5lKG5vZGUpKSB8fCAoKG5vZGUubmV4dFNpYmxpbmcgIT0gbnVsbCkgJiYgKGFkZHNMaW5lKG5vZGUubmV4dFNpYmxpbmcpKSkgPyAxIDogMCk7XG4gICAgaWYgKGVuZCAmJiAobmV3T2ZmID09PSAxIHx8IGNoYXJPZmZzZXQgPT09IDEpKSB7XG4gICAgICByZXR1cm4gbm9kZUVuZChub2RlKTtcbiAgICB9IGVsc2UgaWYgKG5vZGUubmV4dFNpYmxpbmcgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGdldFJhbmdlUG9zaXRpb24obm9kZS5uZXh0U2libGluZywgbmV3T2ZmLCBlbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29udGludWVSYW5nZVBvc2l0aW9uKG5vZGUucGFyZW50Tm9kZSwgbmV3T2ZmLCBlbmQpO1xuICAgIH1cbiAgfTtcblxuICBub2RlRW5kID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBbbm9kZSwgbm9kZS5ub2RlVHlwZSA9PT0gMyA/IG5vZGUubGVuZ3RoIDogbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdO1xuICB9O1xuXG4gIGFkZHNMaW5lID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiAobm9kZSAhPSBudWxsID8gbm9kZS5ub2RlVHlwZSA6IHZvaWQgMCkgPT09IDEgJiYgKG5vZGUubm9kZU5hbWUgPT09ICdCUicgfHwgKGdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZGlzcGxheSA9PT0gJ2Jsb2NrJyAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkpO1xuICB9O1xuXG4gIHJlcSA9IGZ1bmN0aW9uKGZpbGUsIGNvbnQpIHtcbiAgICB2YXIgbmFtZSwgcztcblxuICAgIGlmICghKGZpbGUubWF0Y2goL1xcLmpzJC8pKSkge1xuICAgICAgZmlsZSA9IFwiXCIgKyBmaWxlICsgXCIuanNcIjtcbiAgICB9XG4gICAgbmFtZSA9IGZpbGUuc3Vic3RyaW5nKDAsIGZpbGUubGVuZ3RoIC0gMyk7XG4gICAgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHMuc2V0QXR0cmlidXRlKCdzcmMnLCBmaWxlKTtcbiAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIExlaXN1cmUucHJvY2Vzc0RlZnMoZ2xvYmFsW25hbWVdLCBnbG9iYWwpO1xuICAgICAgaWYgKGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnQoTF9mYWxzZSgpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzKTtcbiAgfTtcblxuICBwb3N0TG9hZFF1ZXVlID0gW107XG5cbiAgbG9hZGVkID0gZmFsc2U7XG5cbiAgcXVldWVBZnRlckxvYWQgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgaWYgKGxvYWRlZCkge1xuICAgICAgcmV0dXJuIGZ1bmMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBvc3RMb2FkUXVldWUucHVzaChmdW5jKTtcbiAgICB9XG4gIH07XG5cbiAgLypcbiAgIyBoYW5kbGUgZm9jdXMgbWFudWFsbHksIGJlY2F1c2UgZ3JhYmJpbmcgZm9jdXMgYW5kIGJsdXIgZXZlbnRzIGRvZXNuJ3Qgc2VlbSB0byB3b3JrIGZvciB0aGUgcGFyZW50XG4gICovXG5cblxuICBkb2NGb2N1cyA9IG51bGw7XG5cbiAgY29kZUZvY3VzID0gbnVsbDtcblxuICBmaW5kQ3VycmVudENvZGVIb2xkZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICByZXR1cm4gZm9jdXNCb3goKF9yZWYyID0gd2luZG93LmdldFNlbGVjdGlvbigpKSAhPSBudWxsID8gX3JlZjIuZm9jdXNOb2RlIDogdm9pZCAwKTtcbiAgfTtcblxuICBmb2N1c0JveCA9IGZ1bmN0aW9uKGJveCkge1xuICAgIHZhciBuZXdDb2RlLCBvbGQsIF9yZWYyO1xuXG4gICAgbmV3Q29kZSA9IG51bGw7XG4gICAgd2hpbGUgKGJveCAmJiAoYm94Lm5vZGVUeXBlICE9PSAxIHx8ICFpc0xlaXN1cmVDb2RlKGJveCkpKSB7XG4gICAgICBpZiAoYm94Lm5vZGVUeXBlID09PSAxICYmICgoYm94LmdldEF0dHJpYnV0ZSgnTGVpc3VyZUJveCcpKSAhPSBudWxsKSkge1xuICAgICAgICBuZXdDb2RlID0gYm94O1xuICAgICAgfVxuICAgICAgYm94ID0gYm94LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIGlmIChib3ggIT09IGRvY0ZvY3VzKSB7XG4gICAgICBpZiAoZG9jRm9jdXMgIT0gbnVsbCkge1xuICAgICAgICBkb2NGb2N1cy5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1c2VkJyk7XG4gICAgICB9XG4gICAgICBkb2NGb2N1cyA9IGJveDtcbiAgICAgIGlmIChib3ggIT0gbnVsbCkge1xuICAgICAgICBpZiAoKF9yZWYyID0gYm94LmNsYXNzTGlzdCkgIT0gbnVsbCkge1xuICAgICAgICAgIF9yZWYyLmFkZCgnZm9jdXNlZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChuZXdDb2RlICE9PSBjb2RlRm9jdXMpIHtcbiAgICAgIG9sZCA9IGNvZGVGb2N1cztcbiAgICAgIGNvZGVGb2N1cyA9IG5ld0NvZGU7XG4gICAgICBpZiAob2xkKSB7XG4gICAgICAgIHJldHVybiBhY2NlcHRDb2RlKG9sZCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG93bmVyID0gZnVuY3Rpb24oYm94KSB7XG4gICAgd2hpbGUgKGJveCAmJiAoYm94Lm5vZGVUeXBlICE9PSAxIHx8ICFpc0xlaXN1cmVDb2RlKGJveCkpKSB7XG4gICAgICBib3ggPSBib3gucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGJveDtcbiAgfTtcblxuICBoaWRkZW5QYXQgPSAvKF58XFxuKSNAaGlkZGVuICooXFxufCQpLztcblxuICBldmFsQm94ID0gZnVuY3Rpb24oYm94LCBlbnZCb3gsIGNvbnQpIHtcbiAgICB2YXIgZW52O1xuXG4gICAgZW52ID0gZW52Qm94ICE9IG51bGwgPyBlbnZGb3IoZW52Qm94KSA6IG51bGw7XG4gICAgcHJvY2Vzc0xpbmUoYm94LnRleHRDb250ZW50LCBlbnYsIGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgaWYgKGVudiAhPSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZW52LmNsZWFudXAgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGVudi5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAoY29udCAhPSBudWxsID8gY29udCA6IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgICB9KShyZXN1bHQpO1xuICAgIH0pO1xuICAgIGdldEFzdChib3gpO1xuICAgIGlmIChib3gub3V0cHV0ICYmIGhhc01vbmFkT3V0cHV0KGJveC5vdXRwdXQpICYmIGJveC50ZXh0Q29udGVudC5tYXRjaChoaWRkZW5QYXQpKSB7XG4gICAgICByZXR1cm4gaGlkZU91dHB1dFNvdXJjZShib3gub3V0cHV0KTtcbiAgICB9IGVsc2UgaWYgKGJveC50ZXh0Q29udGVudC5tYXRjaChoaWRkZW5QYXQpKSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coXCJOTyBNT05BRCwgQlVUIE1BVENIRVMgSElEREVOXCIpO1xuICAgIH1cbiAgfTtcblxuICBhY2NlcHRDb2RlID0gZnVuY3Rpb24oYm94KSB7XG4gICAgaWYgKChib3guZ2V0QXR0cmlidXRlKCdjb2RlbWFpbicpKSAhPSBudWxsKSB7XG4gICAgICBldmFsQm94KGJveCk7XG4gICAgICB1cGRhdGUoJ2NvbXBpbGUnKTtcbiAgICAgIGlmIChvd25lcihib3gpLmF1dG9ydW5TdGF0ZSkge1xuICAgICAgICByZXR1cm4gcnVuVGVzdHMob3duZXIoYm94KSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGVyclN0cmluZyA9IGZ1bmN0aW9uKGVycikge1xuICAgIHJldHVybiBlcnIuc3RhY2s7XG4gIH07XG5cbiAgZXZhbHVhdGluZyA9IGZhbHNlO1xuXG4gIGV2YWx1YXRpb25RdWV1ZSA9IFtdO1xuXG4gIGV2YWxOb2RlcyA9IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgaWYgKGV2YWx1YXRpbmcpIHtcbiAgICAgIHJldHVybiBldmFsdWF0aW9uUXVldWUucHVzaChub2Rlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjaGFpbkV2YWxOb2Rlcyhub2Rlcyk7XG4gICAgfVxuICB9O1xuXG4gIGNoYWluRXZhbE5vZGVzID0gZnVuY3Rpb24obm9kZXMpIHtcbiAgICBldmFsdWF0aW5nID0gdHJ1ZTtcbiAgICByZXR1cm4gcnVuQXV0byhub2RlcywgMCwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZXZhbHVhdGlvblF1ZXVlLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY2hhaW5FdmFsTm9kZXMoZXZhbHVhdGlvblF1ZXVlLnNoaWZ0KCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGV2YWx1YXRpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBldmFsRG9jID0gZnVuY3Rpb24oZWwpIHtcbiAgICB2YXIgYXV0bywgYXV0b05vZGVzLCBlLCBlcnIsIHBnbSwgeCwgX3JlZjI7XG5cbiAgICBfcmVmMiA9IGluaXROb3RlYm9vayhlbCksIHBnbSA9IF9yZWYyWzBdLCBhdXRvID0gX3JlZjJbMV0sIHggPSBfcmVmMlsyXSwgYXV0b05vZGVzID0gX3JlZjJbM107XG4gICAgdHJ5IHtcbiAgICAgIGlmIChhdXRvIHx8IGF1dG9Ob2Rlcykge1xuICAgICAgICBhdXRvID0gXCJkb1xcbiAgXCIgKyAoKGF1dG8gIT0gbnVsbCA/IGF1dG8gOiAnIycpLnRyaW0oKS5yZXBsYWNlKC9cXG4vZywgJ1xcbiAgJykpICsgXCJcXG4gIGRlbGF5XFxuICBmaW5pc2hMb2FkaW5nXCI7XG4gICAgICAgIGdsb2JhbC5ub3JlZGVmcyA9IGZhbHNlO1xuICAgICAgICBOb3RlYm9vay5xdWV1ZUFmdGVyTG9hZChmdW5jdGlvbigpIHtcbiAgICAgICAgICBldmFsRG9jQ29kZShlbCwgcGdtKTtcbiAgICAgICAgICBpZiAoZWwuYXV0b3J1blN0YXRlKSB7XG4gICAgICAgICAgICBydW5UZXN0cyhlbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBldmFsTm9kZXMoYXV0b05vZGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGUgPSBlbnZGb3IoZWwpO1xuICAgICAgICBlLndyaXRlID0gZnVuY3Rpb24oKSB7fTtcbiAgICAgICAgZS5lcnIgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICByZXR1cm4gYWxlcnQoJ2J1YmJhICcgKyBlcnJTdHJpbmcoZXJyKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwcm9jZXNzTGluZShhdXRvLCBlLCBpZGVudGl0eSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZXZhbERvY0NvZGUoZWwsIHBnbSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICByZXR1cm4gc2hvd0Vycm9yKGVyciwgXCJFcnJvciBjb21waWxpbmcgXCIgKyBwZ20pO1xuICAgIH1cbiAgfTtcblxuICBydW5BdXRvID0gZnVuY3Rpb24obm9kZXMsIGluZGV4LCBjb250KSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICBpZiAoaW5kZXggPCBub2Rlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUlVOTklORyBBVVRPOiBcIiArIGluZGV4KTtcbiAgICAgIG5vZGUgPSBub2Rlc1tpbmRleF07XG4gICAgICBjb25zb2xlLmxvZyhcImV2YWxPdXRwdXRcIiwgbm9kZSwgbm9kZS5vdXRwdXQpO1xuICAgICAgcmV0dXJuIGV2YWxPdXRwdXQobm9kZS5vdXRwdXQsIGZhbHNlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHJ1bkF1dG8obm9kZXMsIGluZGV4ICsgMSwgY29udCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChjb250ICE9IG51bGwgPyBjb250IDogZnVuY3Rpb24oKSB7fSkoKTtcbiAgICB9XG4gIH07XG5cbiAgcHJvY2Vzc0xpbmUgPSBmdW5jdGlvbih0ZXh0LCBlbnYsIGNvbnQpIHtcbiAgICB2YXIgZXJyO1xuXG4gICAgaWYgKHRleHQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBydW5Nb25hZChMX25ld1BhcnNlTGluZSgpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBOaWw7XG4gICAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgICB9KSwgZW52LCBmdW5jdGlvbihhc3QpIHtcbiAgICAgICAgICB2YXIgZXJyLCByZXN1bHQ7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGdldFR5cGUoYXN0KSA9PT0gJ3BhcnNlRXJyJykge1xuICAgICAgICAgICAgICBlbnYud3JpdGUoZW52LnByZXNlbnRWYWx1ZShhc3QpKTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnYucHJvY2Vzc1Jlc3VsdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQoYXN0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gY29udChhc3QpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZXZhbChcIihcIiArIChnZW4oYXN0KSkgKyBcIilcIik7XG4gICAgICAgICAgICAgIGVudi53cml0ZShlbnYucHJlc2VudFZhbHVlKHJlc3VsdCkpO1xuICAgICAgICAgICAgICBpZiAoaXNNb25hZChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1vbmFkKHJlc3VsdCwgZW52LCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgIGVudi5wcm9jZXNzUmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gY29udChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZW52LnByb2Nlc3NSZXN1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnQocmVzdWx0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUjogXCIgKyBlcnIuc3RhY2spO1xuICAgICAgICAgICAgZW52LndyaXRlKGVudi5wcmVzZW50VmFsdWUoZXJyLnN0YWNrKSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVudi5wcm9jZXNzUmVzdWx0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgZW52LnByb2Nlc3NSZXN1bHQoZXJyLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250KGVyci5zdGFjayk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICBlcnIgPSBfZXJyb3I7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1I6IFwiICsgZXJyLnN0YWNrKTtcbiAgICAgICAgZW52LndyaXRlKGVudi5wcmVzZW50VmFsdWUoZXJyLnN0YWNrKSk7XG4gICAgICAgIGlmICh0eXBlb2YgZW52LnByb2Nlc3NSZXN1bHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGVudi5wcm9jZXNzUmVzdWx0KGVyci5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnQoZXJyLnN0YWNrKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnQoJycpO1xuICAgIH1cbiAgfTtcblxuICBzaG93RXJyb3IgPSBmdW5jdGlvbihlLCBtc2cpIHtcbiAgICBjb25zb2xlLmxvZyhtc2cpO1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIGNvbnNvbGUubG9nKGUuc3RhY2spO1xuICAgIHJldHVybiBhbGVydChlLnN0YWNrKTtcbiAgfTtcblxuICBldmFsRG9jQ29kZSA9IGZ1bmN0aW9uKGVsLCBwZ20pIHtcbiAgICByZXR1cm4gcnVuTW9uYWQoTF9ydW5GaWxlKCkoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGdtO1xuICAgIH0pLCBkZWZhdWx0RW52LCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuXG4gICAgICBfcmVmMiA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb2RlTWFpbl0nKTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG5vZGUgPSBfcmVmMltfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2goZ2V0QXN0KG5vZGUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KTtcbiAgfTtcblxuICBkZWZpbmUoJ2dldERvY3VtZW50JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gY29udChwZWVyR2V0RG9jdW1lbnQoKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlZmluZSgnZ2V0TGluaycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAwO1xuICB9KTtcblxuICBkZWZpbmUoJ3JlcGxhY2VEb2N1bWVudCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICByZXBsYWNlQ29udGVudHMoc3RyKCkpO1xuICAgICAgICByZXR1cm4gY29udChMX3RydWUoKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2dkcml2ZU9wZW4nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIEdkcml2ZVN0b3JhZ2UucnVuT3BlbihmdW5jdGlvbihqc29uKSB7XG4gICAgICAgIHZhciBfcmVmMjtcblxuICAgICAgICBpZiAoKGpzb24gIT0gbnVsbCA/IGpzb24uYWN0aW9uIDogdm9pZCAwKSA9PT0gJ3BpY2tlZCcgJiYgKChfcmVmMiA9IGpzb24uZG9jcykgIT0gbnVsbCA/IF9yZWYyLmxlbmd0aCA6IHZvaWQgMCkgPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIEdkcml2ZVN0b3JhZ2UubG9hZEZpbGUoanNvbi5kb2NzWzBdLmlkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250KF9zb21lKCkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBqc29uLmRvY3NbMF0udGl0bGU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnQoX25vbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZWZpbmUoJ2dldEZpbGVuYW1lJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICB2YXIgX3JlZjI7XG5cbiAgICAgIHJldHVybiBjb250KChfcmVmMiA9IGZpbGVuYW1lICE9IG51bGwgPyBmaWxlbmFtZS5wYXRoTmFtZSgpIDogdm9pZCAwKSAhPSBudWxsID8gX3JlZjIgOiAnJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlZmluZSgnc2V0VVJJJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHVyaSkge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHNldEZpbGVuYW1lKHVyaSgpKTtcbiAgICAgICAgcmV0dXJuIGNvbnQoTF90cnVlKCkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdnZXRVUkknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHZhciBfcmVmMjtcblxuICAgICAgcmV0dXJuIGNvbnQoKF9yZWYyID0gZmlsZW5hbWUgIT0gbnVsbCA/IGZpbGVuYW1lLnRvU3RyaW5nKCkgOiB2b2lkIDApICE9IG51bGwgPyBfcmVmMiA6ICcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdmaW5pc2hMb2FkaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIHZhciBpLCBfaSwgX2xlbjtcblxuICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gcG9zdExvYWRRdWV1ZS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBpID0gcG9zdExvYWRRdWV1ZVtfaV07XG4gICAgICAgIGkoKTtcbiAgICAgIH1cbiAgICAgIHBvc3RMb2FkUXVldWUgPSBbXTtcbiAgICAgIHJldHVybiBjb250KExfZmFsc2UoKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlZmluZSgnbWFya3VwQnV0dG9ucycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgaWYgKGVudi5ib3gpIHtcbiAgICAgICAgbWFya3VwQnV0dG9ucyhlbnYuYm94KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250KExfZmFsc2UoKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlZmluZSgnYWxlcnQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgd2luZG93LmFsZXJ0KHN0cigpKTtcbiAgICAgICAgcmV0dXJuIGNvbnQoTF9mYWxzZSgpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnYmluZEV2ZW50JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihmdW5jKSB7XG4gICAgICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgICB2YXIgbm9kZTtcblxuICAgICAgICAgICAgbm9kZSA9IGVudi5ib3gucXVlcnlTZWxlY3RvcihzZWxlY3RvcigpKTtcbiAgICAgICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgICBub2RlID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBRERJTkcgRVZFTlQ6IFwiICsgKHNlbGVjdG9yKCkpICsgXCIgXCIgKyAoZXZlbnROYW1lKCkpICsgXCIgTk9ERTogXCIgKyBub2RlKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUoKSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVZFTlQ6IFwiICsgKHNlbGVjdG9yKCkpICsgXCIgXCIgKyAoZXZlbnROYW1lKCkpICsgXCIgXCIgKyAoZnVuYygpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1vbmFkKGZ1bmMoKShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIH0pLCBlbnZGb3IoZS50YXJnZXQpLCBmdW5jdGlvbigpIHt9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udChMX2ZhbHNlKCkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ3F1aXQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2luZG93LmNsb3NlKCk7XG4gIH0pO1xuXG4gIGRlZmluZSgnY29uZmlnJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICBzd2l0Y2ggKGV4cHIoKSkge1xuICAgICAgICAgIGNhc2UgJ2F1dG9UZXN0JzpcbiAgICAgICAgICAgIGF1dG9SdW4oZW52Lm93bmVyLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udChMX2ZhbHNlKCkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdub3RlYm9va1NlbGVjdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgdmFyIGJ4LCBvZmZzZXQsIHAxLCBwMiwgciwgcjIsIHNlbDtcblxuICAgICAgICBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGJ4ID0gZ2V0Qm94KHNlbC5mb2N1c05vZGUpO1xuICAgICAgICBpZiAoKGJ4ICE9IG51bGwpICYmIGhhc0Z1bmMoYngsIGZ1bmMpKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgICByID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgICAgICAgd2luZG93LnIgPSByO1xuICAgICAgICAgIHIyID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICByMi5zZXRTdGFydChieCwgMCk7XG4gICAgICAgICAgcjIuc2V0RW5kKHIuc3RhcnRDb250YWluZXIsIHIuc3RhcnRPZmZzZXQpO1xuICAgICAgICAgIHAxID0gcjIuY2xvbmVDb250ZW50cygpLnRleHRDb250ZW50Lmxlbmd0aCAtIG9mZnNldDtcbiAgICAgICAgICBpZiAoIXIuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICByMi5zZXRFbmQoci5lbmRDb250YWluZXIsIHIuZW5kT2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcDIgPSByMi5jbG9uZUNvbnRlbnRzKCkudGV4dENvbnRlbnQubGVuZ3RoIC0gb2Zmc2V0O1xuICAgICAgICAgIHJldHVybiBjb250KF9zb21lMigpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHAxO1xuICAgICAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHAyO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY29udChfbm9uZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgaGFzRnVuYyA9IGZ1bmN0aW9uKGJ4LCBmdW5jKSB7XG4gICAgdmFyIGFzdDtcblxuICAgIGFzdCA9IGdldEFzdChieCk7XG4gICAgcmV0dXJuIGFzdCA9PT0gZnVuYygpLmFzdCB8fCBhc3QgPT09IGZ1bmMuYXN0O1xuICB9O1xuXG4gIGRlZmluZSgnbm90ZWJvb2tBc3QnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHZhciBhc3QsIG5vZGU7XG5cbiAgICAgICAgaWYgKGZ1bmMubGVpc3VyZU5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW0xlaXN1cmVGdW5jPVwiICsgZnVuYy5sZWlzdXJlTmFtZSArIFwiXVwiKTtcbiAgICAgICAgICBpZiAobm9kZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBhc3QgPSBnZXRBc3Qobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gY29udChfc29tZSgpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gYXN0O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udChfbm9uZSgpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGF1dG9SdW4gPSBmdW5jdGlvbihlbCwgc3RhdGUpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICBlbC5hdXRvcnVuU3RhdGUgPSBzdGF0ZTtcbiAgICByZXR1cm4gKF9yZWYyID0gZWwuYXV0b3J1bikgIT0gbnVsbCA/IF9yZWYyLmNoZWNrZWQgPSBzdGF0ZSA6IHZvaWQgMDtcbiAgfTtcblxuICBoZWFkID0gZnVuY3Rpb24obCkge1xuICAgIHJldHVybiBsKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGhoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0dCkge1xuICAgICAgICAgIHJldHVybiBoaCgpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB0YWlsID0gZnVuY3Rpb24obCkge1xuICAgIHJldHVybiBsKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGhoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0dCkge1xuICAgICAgICAgIHJldHVybiB0dCgpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBpZCA9IGZ1bmN0aW9uKHYpIHtcbiAgICByZXR1cm4gdigpO1xuICB9O1xuXG4gIGdldFN2Z0VsZW1lbnQgPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciBlbCwgc3ZnO1xuXG4gICAgaWYgKChlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSkpIHtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnID0gY3JlYXRlTm9kZShcIjxzdmcgaWQ9J0hJRERFTl9TVkcnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgdmVyc2lvbj0nMS4xJyBzdHlsZT0ndG9wOiAtMTAwMDAwOyBwb3NpdGlvbjogYWJzb2x1dGUnPjx0ZXh0IGlkPSdISURERU5fVEVYVCc+YnViYmE8L3RleHQ+PC9zdmc+XCIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdmcpO1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICB9XG4gIH07XG5cbiAgc3ZnTWVhc3VyZVRleHQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZikge1xuICAgICAgICB2YXIgYngsIHR4dDtcblxuICAgICAgICB0eHQgPSBnZXRTdmdFbGVtZW50KCdISURERU5fVEVYVCcpO1xuICAgICAgICBpZiAoc3R5bGUoKSkge1xuICAgICAgICAgIHR4dC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdHh0Lmxhc3RDaGlsZC50ZXh0Q29udGVudCA9IHRleHQoKTtcbiAgICAgICAgYnggPSB0eHQuZ2V0QkJveCgpO1xuICAgICAgICByZXR1cm4gZigpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBieC53aWR0aDtcbiAgICAgICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGJ4LmhlaWdodDtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG5cbiAgcHJpbWNvbmNhdE5vZGVzID0gZnVuY3Rpb24obm9kZXMpIHtcbiAgICBpZiAobm9kZXMgPT09IF9uaWwoKSkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoaGVhZChub2RlcykpKGlkKSArIGNvbmNhdE5vZGVzKHRhaWwobm9kZXMpKTtcbiAgICB9XG4gIH07XG5cbiAgdHJhbnNmb3JtZWRQb2ludCA9IGZ1bmN0aW9uKHB0LCB4LCB5LCBjdG0sIGljdG0pIHtcbiAgICBwdC54ID0geDtcbiAgICBwdC55ID0geTtcbiAgICByZXR1cm4gcHQubWF0cml4VHJhbnNmb3JtKGN0bSkubWF0cml4VHJhbnNmb3JtKGljdG0pO1xuICB9O1xuXG4gIHN2Z01lYXN1cmUgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgcmV0dXJuIHByaW1TdmdNZWFzdXJlKGNvbnRlbnQsIGJhc2VTdHJva2VXaWR0aCk7XG4gIH07XG5cbiAgc3ZnQmV0dGVyTWVhc3VyZSA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICByZXR1cm4gcHJpbVN2Z01lYXN1cmUoY29udGVudCwgdHJhbnNmb3JtU3Ryb2tlV2lkdGgpO1xuICB9O1xuXG4gIHByaW1TdmdNZWFzdXJlID0gZnVuY3Rpb24oY29udGVudCwgdHJhbnNmb3JtRnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbihmKSB7XG4gICAgICB2YXIgYmJveCwgZywgcGFkLCBzdmc7XG5cbiAgICAgIHN2ZyA9IGNyZWF0ZU5vZGUoXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgdmVyc2lvbj0nMS4xJyBzdHlsZT0ndG9wOiAtMTAwMDAwJz48Zz5cIiArIChjb250ZW50KCkpICsgXCI8L2c+PC9zdmc+XCIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdmcpO1xuICAgICAgZyA9IHN2Zy5maXJzdENoaWxkO1xuICAgICAgYmJveCA9IGcuZ2V0QkJveCgpO1xuICAgICAgcGFkID0gZ2V0TWF4U3Ryb2tlV2lkdGgoZywgZywgc3ZnLCB0cmFuc2Zvcm1GdW5jKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc3ZnKTtcbiAgICAgIHJldHVybiBmKCkoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBiYm94LnggLSBNYXRoLmNlaWwocGFkIC8gMik7XG4gICAgICB9KShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGJib3gueSAtIE1hdGguY2VpbChwYWQgLyAyKTtcbiAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYmJveC53aWR0aCArIHBhZDtcbiAgICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gYmJveC5oZWlnaHQgKyBwYWQ7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIGJhc2VFbGVtZW50cyA9IFsncGF0aCcsICdyZWN0JywgJ2NpcmNsZScsICdlbGxpcHNlJywgJ2xpbmUnLCAncG9seWxpbmUnLCAncG9seWdvbiddO1xuXG4gIGdldE1heFN0cm9rZVdpZHRoID0gZnVuY3Rpb24oZWwsIGJhc2UsIHN2ZywgdHJhbnNmb3JtRnVuYykge1xuICAgIHZhciBfcmVmMiwgX3JlZjM7XG5cbiAgICBpZiAoX3JlZjIgPSBiYXNlLm5vZGVOYW1lLCBfX2luZGV4T2YuY2FsbChiYXNlRWxlbWVudHMsIF9yZWYyKSA+PSAwKSB7XG4gICAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIChfcmVmMyA9IGdldENvbXB1dGVkU3R5bGUoYmFzZSkuc3Ryb2tlV2lkdGgpICE9IG51bGwgPyBfcmVmMyA6ICcwJywgc3ZnKTtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKGVsLCBzdmcud2lkdGguYmFzZVZhbC52YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChiYXNlLm5vZGVOYW1lID09PSAndXNlJykge1xuICAgICAgcmV0dXJuIGdldE1heFN0cm9rZVdpZHRoKGJhc2UsIGJhc2UuaW5zdGFuY2VSb290LmNvcnJlc3BvbmRpbmdFbGVtZW50LCBzdmcsIHRyYW5zZm9ybUZ1bmMpO1xuICAgIH0gZWxzZSBpZiAoYmFzZS5ub2RlTmFtZSA9PT0gJ2cnKSB7XG4gICAgICByZXR1cm4gZm9sZExlZnQoKGZ1bmN0aW9uKHYsIG4pIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHYsIGdldE1heFN0cm9rZVdpZHRoKG4sIG4sIHN2ZywgdHJhbnNmb3JtRnVuYykpO1xuICAgICAgfSksIDAsIGVsLmNoaWxkTm9kZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH07XG5cbiAgYmFzZVN0cm9rZVdpZHRoID0gZnVuY3Rpb24oZWwsIHcpIHtcbiAgICByZXR1cm4gdztcbiAgfTtcblxuICB0cmFuc2Zvcm1TdHJva2VXaWR0aCA9IGZ1bmN0aW9uKGVsLCB3KSB7XG4gICAgdmFyIGN0bSwgdHAxLCB0cDIsIHgsIHk7XG5cbiAgICBpZiAodyA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0bSA9IGVsLmdldFNjcmVlbkNUTSgpO1xuICAgICAgdHAxID0gdHJhbnNmb3JtZWRQb2ludChwdCwgYngueCAtIE1hdGguY2VpbCh3KSwgYngueSAtIE1hdGguY2VpbCh3KSwgY3RtLCBpc2N0bSk7XG4gICAgICB0cDIgPSB0cmFuc2Zvcm1lZFBvaW50KHB0LCBieC54ICsgYngud2lkdGggKyBNYXRoLmNlaWwodyksIGJ4LnkgKyBieC5oZWlnaHQgKyBNYXRoLmNlaWwodyksIGN0bSwgaXNjdG0pO1xuICAgICAgeCA9IHRwMi54IC0gdHAxLng7XG4gICAgICB5ID0gdHAyLnkgLSB0cDEueTtcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgfVxuICB9O1xuXG4gIHByZXZpb3VzU2libGluZyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB3aGlsZSAoKG5vZGUgIT0gbnVsbCA/IG5vZGUucGFyZW50Tm9kZSA6IHZvaWQgMCkgJiYgIW5vZGUucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gbm9kZS5wcmV2aW91c1NpYmxpbmcgOiB2b2lkIDA7XG4gIH07XG5cbiAgbmV4dFNpYmxpbmcgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgd2hpbGUgKChub2RlICE9IG51bGwgPyBub2RlLnBhcmVudE5vZGUgOiB2b2lkIDApICYmICFub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gbm9kZS5uZXh0U2libGluZyA6IHZvaWQgMDtcbiAgfTtcblxuICBoaWRlQ29udHJvbFNlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udHJvbFNlY3Rpb247XG5cbiAgICBjb250cm9sU2VjdGlvbiA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignW2xlaXN1cmVTZWN0aW9uPVwiTGVpc3VyZSBDb250cm9sc1wiXScpO1xuICAgIGlmICghY29udHJvbFNlY3Rpb24pIHtcbiAgICAgIGNvbnRyb2xTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShjb250cm9sU2VjdGlvbiwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICAgIHJvb3QubWFya3VwRWxlbWVudChjb250cm9sU2VjdGlvbiwgXCIjIExlaXN1cmUgQ29udHJvbHNcXG5cXG4jIyBGaWxlIFNhdmUgYW5kIExvYWRcXG5gYGBcXG5zYXZlRmlsZVxcblxcbnNhdmVBcyAnZmlsZW5hbWUnXFxuXFxuc2F2ZUFzIHBpY2tGaWxlXFxuXFxubG9hZEZpbGVcXG5cXG5lbXB0eUZpbGVcXG5gYGBcIik7XG4gICAgICB1bndyYXAoY29udHJvbFNlY3Rpb24pO1xuICAgIH1cbiAgICBjb250cm9sU2VjdGlvbi5jbGFzc0xpc3QuYWRkKGxlaXN1cmVfY29udHJvbHMpO1xuICAgIHJldHVybiBjb250cm9sU2VjdGlvbi5jbGFzc0xpc3QuYWRkKGhpZGRlbik7XG4gIH07XG5cbiAgZGVmaW5lKCdwcmludFZhbHVlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICBpZiAodmFsdWUoKSAhPT0gTF9uaWwoKSkge1xuICAgICAgICAgIGVudi53cml0ZShcIlwiICsgKGVudi5wcmVzZW50VmFsdWUodmFsdWUoKSkpICsgXCJcXG5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnQoTF9mYWxzZSgpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmF1bHRFbnYucmVxdWlyZSA9IHJlcTtcblxuICByb290LnN2Z01lYXN1cmVUZXh0ID0gc3ZnTWVhc3VyZVRleHQ7XG5cbiAgcm9vdC5zdmdNZWFzdXJlID0gc3ZnTWVhc3VyZTtcblxuICByb290LmluaXROb3RlYm9vayA9IGluaXROb3RlYm9vaztcblxuICByb290LmJpbmROb3RlYm9vayA9IGJpbmROb3RlYm9vaztcblxuICByb290LmJpbmRBbGwgPSBiaW5kQWxsO1xuXG4gIHJvb3QuZXZhbE91dHB1dCA9IGV2YWxPdXRwdXQ7XG5cbiAgcm9vdC5tYWtlVGVzdENhc2UgPSBtYWtlVGVzdENhc2U7XG5cbiAgcm9vdC5jbGVhbk91dHB1dCA9IGNsZWFuT3V0cHV0O1xuXG4gIHJvb3QuY2xlYXJPdXRwdXRCb3ggPSBjbGVhck91dHB1dEJveDtcblxuICByb290LmVudkZvciA9IGVudkZvcjtcblxuICByb290LnF1ZXVlQWZ0ZXJMb2FkID0gcXVldWVBZnRlckxvYWQ7XG5cbiAgcm9vdC5ldmFsRG9jID0gZXZhbERvYztcblxuICByb290LmdldEJveCA9IGdldEJveDtcblxuICByb290Lm1ha2VSYW5nZSA9IG1ha2VSYW5nZTtcblxuICByb290LmdycCA9IGdycDtcblxuICByb290LmNoYW5nZVRoZW1lID0gY2hhbmdlVGhlbWU7XG5cbiAgcm9vdC5zZXRTbmFwcGVyID0gc2V0U25hcHBlcjtcblxuICByb290LnVwZGF0ZSA9IHVwZGF0ZTtcblxuICByb290LmNsZWFyVXBkYXRlcyA9IGNsZWFyVXBkYXRlcztcblxuICByb290LnNob3dBc3QgPSBzaG93QXN0O1xuXG4gIHJvb3QudG9nZ2xlRWRpdCA9IHRvZ2dsZUVkaXQ7XG5cbiAgcm9vdC5zaG93U291cmNlID0gc2hvd1NvdXJjZTtcblxuICByb290LmJvb3ROb3RlYm9vayA9IGJvb3ROb3RlYm9vaztcblxuICByb290LmNyZWF0ZU5vZGUgPSBjcmVhdGVOb2RlO1xuXG4gIHJvb3QuRU5URVIgPSBFTlRFUjtcblxuICByb290LnRleHROb2RlID0gdGV4dE5vZGU7XG5cbiAgcm9vdC5jbGVhbkVtcHR5Tm9kZXMgPSBjbGVhbkVtcHR5Tm9kZXM7XG5cbiAgcm9vdC5pc0xlaXN1cmVDb2RlID0gaXNMZWlzdXJlQ29kZTtcblxuICByb290LmdldEVsZW1lbnRDb2RlID0gZ2V0RWxlbWVudENvZGU7XG5cbiAgcm9vdC5ydW5UZXN0cyA9IHJ1blRlc3RzO1xuXG4gIHJvb3QucHJldmlvdXNTaWJsaW5nID0gcHJldmlvdXNTaWJsaW5nO1xuXG4gIHJvb3QubmV4dFNpYmxpbmcgPSBuZXh0U2libGluZztcblxuICByb290LnByZXNlbnRMZWlzdXJlQ29kZSA9IHByZXNlbnRMZWlzdXJlQ29kZTtcblxuICByb290Lm1lcmdlTGVpc3VyZUNvZGUgPSBtZXJnZUxlaXN1cmVDb2RlO1xuXG4gIHJvb3QuaGlnaGxpZ2h0Tm90ZWJvb2tGdW5jdGlvbiA9IGhpZ2hsaWdodE5vdGVib29rRnVuY3Rpb247XG5cbiAgcm9vdC5FU0MgPSBFU0M7XG5cbiAgcm9vdC5IT01FID0gSE9NRTtcblxuICByb290LkVORCA9IEVORDtcblxuICByb290LlBBR0VfVVAgPSBQQUdFX1VQO1xuXG4gIHJvb3QuUEFHRV9ET1dOID0gUEFHRV9ET1dOO1xuXG4gIHJvb3QuTEVGVF9BUlJPVyA9IExFRlRfQVJST1c7XG5cbiAgcm9vdC5VUF9BUlJPVyA9IFVQX0FSUk9XO1xuXG4gIHJvb3QuUklHSFRfQVJST1cgPSBSSUdIVF9BUlJPVztcblxuICByb290LkRPV05fQVJST1cgPSBET1dOX0FSUk9XO1xuXG4gIHJvb3QuYXJyb3dzID0gYXJyb3dzO1xuXG4gIHJvb3QuY2xvc2VXaW5kb3cgPSBjbG9zZVdpbmRvdztcblxuICByb290Lm1hcmt1cEJ1dHRvbiA9IG1hcmt1cEJ1dHRvbjtcblxuICByb290Lm1hcmt1cEJ1dHRvbnMgPSBtYXJrdXBCdXR0b25zO1xuXG4gIHJvb3QuZ2V0QXN0ID0gZ2V0QXN0O1xuXG4gIHJvb3QuaW5zZXJ0Q29udHJvbHMgPSBpbnNlcnRDb250cm9scztcblxuICByb290LmRlbGF5ID0gZGVsYXk7XG5cbiAgcm9vdC5zZXRGaWxlbmFtZSA9IHNldEZpbGVuYW1lO1xuXG4gIHJvb3QudW53cmFwID0gdW53cmFwO1xuXG4gIHJvb3QucmVtb3ZlID0gcmVtb3ZlO1xuXG4gIHJvb3Qud3JhcFJhbmdlID0gd3JhcFJhbmdlO1xuXG4gIHJvb3QucmVwbGFjZUNvbnRlbnRzID0gcmVwbGFjZUNvbnRlbnRzO1xuXG4gIHJvb3QuZXZlbnQgPSBldmVudDtcblxufSkuY2FsbCh0aGlzKTtcblxuLypcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPW5vdGVib29rLm1hcFxuKi9cblxufSkoc2VsZikiLCIoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwpey8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbi8qXG5Db3B5cmlnaHQgKEMpIDIwMTMsIEJpbGwgQnVyZGljaywgVGlueSBDb25jZXB0czogaHR0cHM6Ly9naXRodWIuY29tL3pvdC9MZWlzdXJlXG5cbihsaWNlbnNlZCB3aXRoIFpMSUIgbGljZW5zZSlcblxuVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbndhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cblxuUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG5pbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG5mcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG5cbjEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG5jbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG5hcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuXG4yLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxubWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuXG4zLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuKi9cblxuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBNb25hZCwgTmlsLCBhY3RvcnMsIGFzdDJKc29uLCBhc3luY01vbmFkLCBiYXNpY0NhbGwsIGJvb2xlYW5Gb3IsIGNhbGwsIGNhbGxNb25hZCwgY29ucywgY29uc0Zyb20sIGNvbnRpbnVlTW9uYWRzLCBjdXJyeSwgZGVmYXVsdEVudiwgZGVmaW5lLCBlbnN1cmVMZWlzdXJlQ2xhc3MsIGZ1bmN0aW9uSW5mbywgZ2V0RGF0YVR5cGUsIGdldE1vbmFkU3luY01vZGUsIGdldFR5cGUsIGdldFZhbHVlLCBoZWFkLCBpZGVudGl0eSwgaXNNb25hZCwgbGVmdCwgbWFrZU1vbmFkLCBtYWtlU3luY01vbmFkLCBtb25hZE1vZGVTeW5jLCBuYW1lU3ViLCBuZXdSdW5Nb25hZCwgbmV4dE1vbmFkLCBub25lLCBwYXJlbnNDb250ZW50LCBwYXJlbnNFbmQsIHBhcmVuc1N0YXJ0LCByZWFkRGlyLCByZWFkRmlsZSwgcmVwbGFjZUVyciwgcmlnaHQsIHJvb3QsIHJ1bk1vbmFkLCBzZXREYXRhVHlwZSwgc2V0VHlwZSwgc2V0VmFsdWUsIHNldFdhcm5Bc3luYywgc29tZSwgc3RhdEZpbGUsIHN0ckNvb3JkLCBzdHJGcm9tTGlzdCwgc3RyVG9MaXN0LCBzdWJjdXJyeSwgdGFpbCwgdG9rZW5Qb3MsIHRva2VuU3RyaW5nLCB2YWx1ZXMsIHdhcm5Bc3luYywgd2l0aFN5bmNNb2RlRG8sIF8sIF9mYWxzZSwgX2lkZW50aXR5LCBfcmVmLCBfcmVmMSwgX3RydWUsXG4gICAgX19zbGljZSA9IFtdLnNsaWNlO1xuXG4gIF9yZWYgPSByb290ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Jhc2UnKSwgcmVhZEZpbGUgPSBfcmVmLnJlYWRGaWxlLCBzdGF0RmlsZSA9IF9yZWYuc3RhdEZpbGUsIHJlYWREaXIgPSBfcmVmLnJlYWREaXIsIGRlZmF1bHRFbnYgPSBfcmVmLmRlZmF1bHRFbnY7XG5cbiAgX3JlZjEgPSByZXF1aXJlKCcuL2FzdCcpLCBkZWZpbmUgPSBfcmVmMS5kZWZpbmUsIGNvbnNGcm9tID0gX3JlZjEuY29uc0Zyb20sIGNvbnMgPSBfcmVmMS5jb25zLCBOaWwgPSBfcmVmMS5OaWwsIGhlYWQgPSBfcmVmMS5oZWFkLCB0YWlsID0gX3JlZjEudGFpbCwgZ2V0VHlwZSA9IF9yZWYxLmdldFR5cGUsIGdldERhdGFUeXBlID0gX3JlZjEuZ2V0RGF0YVR5cGUsIGFzdDJKc29uID0gX3JlZjEuYXN0Mkpzb24sIGVuc3VyZUxlaXN1cmVDbGFzcyA9IF9yZWYxLmVuc3VyZUxlaXN1cmVDbGFzcywgc2V0VHlwZSA9IF9yZWYxLnNldFR5cGUsIHNldERhdGFUeXBlID0gX3JlZjEuc2V0RGF0YVR5cGUsIGZ1bmN0aW9uSW5mbyA9IF9yZWYxLmZ1bmN0aW9uSW5mbywgbmFtZVN1YiA9IF9yZWYxLm5hbWVTdWI7XG5cbiAgXyA9IHJlcXVpcmUoJy4vbG9kYXNoLm1pbicpO1xuXG4gIGNhbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncztcblxuICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgIHJldHVybiBiYXNpY0NhbGwoYXJncywgZGVmYXVsdEVudiwgaWRlbnRpdHkpO1xuICB9O1xuXG4gIGNhbGxNb25hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzLCBjb250LCBlbnYsIF9pO1xuXG4gICAgYXJncyA9IDMgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIF9pID0gYXJndW1lbnRzLmxlbmd0aCAtIDIpIDogKF9pID0gMCwgW10pLCBlbnYgPSBhcmd1bWVudHNbX2krK10sIGNvbnQgPSBhcmd1bWVudHNbX2krK107XG4gICAgcmV0dXJuIGJhc2ljQ2FsbChhcmdzLCBlbnYsIGNvbnQpO1xuICB9O1xuXG4gIGJhc2ljQ2FsbCA9IGZ1bmN0aW9uKGFyZ3MsIGVudiwgY29udCkge1xuICAgIHZhciBhcmcsIHJlcywgX2ksIF9sZW4sIF9yZWYyO1xuXG4gICAgcmVzID0gZ2xvYmFsW1wiTF9cIiArIGFyZ3NbMF1dKCk7XG4gICAgX3JlZjIgPSBhcmdzLnNsaWNlKDEpO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGFyZyA9IF9yZWYyW19pXTtcbiAgICAgIHJlcyA9IChmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHJlcyhmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gYXJnO1xuICAgICAgICB9KTtcbiAgICAgIH0pKGFyZyk7XG4gICAgfVxuICAgIHJldHVybiBydW5Nb25hZChyZXMsIGVudiwgY29udCk7XG4gIH07XG5cbiAgaWRlbnRpdHkgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG5cbiAgX2lkZW50aXR5ID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4KCk7XG4gIH07XG5cbiAgX3RydWUgPSBzZXRUeXBlKChmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICAgIHJldHVybiBhKCk7XG4gICAgfTtcbiAgfSksICd0cnVlJyk7XG5cbiAgX2ZhbHNlID0gc2V0VHlwZSgoZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICByZXR1cm4gYigpO1xuICAgIH07XG4gIH0pLCAnZmFsc2UnKTtcblxuICBsZWZ0ID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBzZXRUeXBlKChmdW5jdGlvbihsQ2FzZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJDYXNlKSB7XG4gICAgICAgIHJldHVybiBsQ2FzZSgpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSksICdsZWZ0Jyk7XG4gIH07XG5cbiAgcmlnaHQgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHNldFR5cGUoKGZ1bmN0aW9uKGxDYXNlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ockNhc2UpIHtcbiAgICAgICAgcmV0dXJuIHJDYXNlKCkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSwgJ3JpZ2h0Jyk7XG4gIH07XG5cbiAgc29tZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gc2V0VHlwZSgoZnVuY3Rpb24oc29tZUNhc2UpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihub25lQ2FzZSkge1xuICAgICAgICByZXR1cm4gc29tZUNhc2UoKShmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pLCAnc29tZScpO1xuICB9O1xuXG4gIG5vbmUgPSBzZXRUeXBlKChmdW5jdGlvbihzb21lQ2FzZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihub25lQ2FzZSkge1xuICAgICAgcmV0dXJuIG5vbmVDYXNlKCk7XG4gICAgfTtcbiAgfSksICdub25lJyk7XG5cbiAgYm9vbGVhbkZvciA9IGZ1bmN0aW9uKGJvb2wpIHtcbiAgICBpZiAoYm9vbCkge1xuICAgICAgcmV0dXJuIExfdHJ1ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTF9mYWxzZSgpO1xuICAgIH1cbiAgfTtcblxuICBkZWZpbmUoJ2VxJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiBib29sZWFuRm9yKGEoKSA9PT0gYigpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCc9PScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gYm9vbGVhbkZvcihhKCkgPT09IGIoKSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnaGFzVHlwZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZnVuYykge1xuICAgICAgICByZXR1cm4gYm9vbGVhbkZvcihnZXRUeXBlKGRhdGEoKSkgPT09IGdldERhdGFUeXBlKGZ1bmMoKSkpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJysnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIHgoKSArIHkoKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCctJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICAgIHJldHVybiB4KCkgLSB5KCk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnKicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgICByZXR1cm4geCgpICogeSgpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJy8nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIHgoKSAvIHkoKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCclJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICAgIHJldHVybiB4KCkgJSB5KCk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnPCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgICByZXR1cm4gYm9vbGVhbkZvcih4KCkgPCB5KCkpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJzw9JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICAgIHJldHVybiBib29sZWFuRm9yKHgoKSA8PSB5KCkpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJz4nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIGJvb2xlYW5Gb3IoeCgpID4geSgpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCc+PScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgICByZXR1cm4gYm9vbGVhbkZvcih4KCkgPj0geSgpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdmbG9vcicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcih4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnY2VpbCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gTWF0aC5jZWlsKHgoKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdtaW4nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHgoKSwgeSgpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdtYXgnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHgoKSwgeSgpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdyb3VuZCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZCh4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnYWJzJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBNYXRoLmFicyh4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc3FydCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KHgoKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdhY29zJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBNYXRoLmFjb3MoeCgpKTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2FzaW4nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIE1hdGguYXNpbih4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnYXRhbicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gTWF0aC5hdGFuKHgoKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdhdGFuMicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeSkge1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih4KCksIHkoKSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnY29zJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBNYXRoLmNvcyh4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnbG9nJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBNYXRoLmxvZyh4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc2luJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBNYXRoLnNpbih4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgndGFuJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBNYXRoLnRhbih4KCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgncmFuZCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIGNvbnQoTWF0aC5yYW5kb20oKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlZmluZSgncmFuZEludCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihsb3cpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihoaWdoKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICAgIHJldHVybiBjb250KE1hdGguZmxvb3IobG93KCkgKyBNYXRoLnJhbmRvbSgpICogaGlnaCgpKSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ14nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KHgoKSwgeSgpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdzdHJTdHJpbmcnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIFN0cmluZyhkYXRhKCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc3RyQXQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHN0cigpW3N0ckNvb3JkKHN0cigpLCBpbmRleCgpKV07XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc3RyU3RhcnRzV2l0aCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIGJvb2xlYW5Gb3Ioc3RyKCkuc3Vic3RyaW5nKDAsIHByZWZpeCgpLmxlbmd0aCkgPT09IHByZWZpeCgpKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdzdHJMZW4nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gc3RyKCkubGVuZ3RoO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc3RyVG9Mb3dlckNhc2UnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gc3RyKCkudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ3N0clRvVXBwZXJDYXNlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIHN0cigpLnRvVXBwZXJDYXNlKCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdzdHJSZXBsYWNlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBhdCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVwbCkge1xuICAgICAgICAgIHJldHVybiBzdHIoKS5yZXBsYWNlKHBhdCgpLCByZXBsKCkpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBzdHJDb29yZCA9IGZ1bmN0aW9uKHN0ciwgY29vcmQpIHtcbiAgICBpZiAoY29vcmQgPCAwKSB7XG4gICAgICByZXR1cm4gc3RyLmxlbmd0aCArIGNvb3JkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29vcmQ7XG4gICAgfVxuICB9O1xuXG4gIGRlZmluZSgnc3RyU3Vic3RyaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihlbmQpIHtcbiAgICAgICAgICB2YXIgYSwgYjtcblxuICAgICAgICAgIGEgPSBzdHJDb29yZChzdHIoKSwgc3RhcnQoKSk7XG4gICAgICAgICAgYiA9IHN0ckNvb3JkKHN0cigpLCBlbmQoKSk7XG4gICAgICAgICAgaWYgKGIgPCBhICYmIGVuZCgpID09PSAwKSB7XG4gICAgICAgICAgICBiID0gc3RyKCkubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RyKCkuc3Vic3RyaW5nKGEsIGIpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ3N0clNwbGl0JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBhdCkge1xuICAgICAgICByZXR1cm4gY29uc0Zyb20oc3RyKCkuc3BsaXQocGF0KCkgaW5zdGFuY2VvZiBSZWdFeHAgPyBwYXQoKSA6IG5ldyBSZWdFeHAocGF0KCkpKSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc3RyQ2F0JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGxpc3QpIHtcbiAgICAgIHJldHVybiBfLm1hcChsaXN0KCkudG9BcnJheSgpLCBmdW5jdGlvbihlbCkge1xuICAgICAgICByZXR1cm4gTF9zaG93KCkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGVsO1xuICAgICAgICB9KTtcbiAgICAgIH0pLmpvaW4oJycpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc3RyQWRkJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHMxKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oczIpIHtcbiAgICAgICAgcmV0dXJuIHMxKCkgKyBzMigpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ3N0ck1hdGNoJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBhdCkge1xuICAgICAgICB2YXIgZ3JvdXBzLCBtLCBwb3M7XG5cbiAgICAgICAgbSA9IHN0cigpLm1hdGNoKChwYXQoKSBpbnN0YW5jZW9mIFJlZ0V4cCA/IHBhdCgpIDogbmV3IFJlZ0V4cChwYXQoKSkpKTtcbiAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgICBncm91cHMgPSBbXTtcbiAgICAgICAgICBwb3MgPSAxO1xuICAgICAgICAgIHdoaWxlIChtW3Bvc10pIHtcbiAgICAgICAgICAgIGdyb3Vwcy5wdXNoKG1bcG9zKytdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBtLmluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNGcm9tKFttWzBdLCBjb25zRnJvbShncm91cHMpLCBtLmluZGV4LCBtLmlucHV0XSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zRnJvbShbbVswXSwgY29uc0Zyb20oZ3JvdXBzKV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gTmlsO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc3RyVG9MaXN0JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIHN0clRvTGlzdChzdHIoKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgc3RyVG9MaXN0ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgaWYgKHN0ciA9PT0gJycpIHtcbiAgICAgIHJldHVybiBOaWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb25zKHN0clswXSwgc3RyVG9MaXN0KHN0ci5zdWJzdHJpbmcoMSkpKTtcbiAgICB9XG4gIH07XG5cbiAgZGVmaW5lKCdzdHJGcm9tTGlzdCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihsaXN0KSB7XG4gICAgICByZXR1cm4gc3RyRnJvbUxpc3QobGlzdCgpKTtcbiAgICB9O1xuICB9KTtcblxuICBzdHJGcm9tTGlzdCA9IGZ1bmN0aW9uKGxpc3QpIHtcbiAgICBpZiAobGlzdCBpbnN0YW5jZW9mIExlaXN1cmVfbmlsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBoZWFkKGxpc3QpICsgc3RyRnJvbUxpc3QodGFpbChsaXN0KSk7XG4gICAgfVxuICB9O1xuXG4gIGRlZmluZSgncmVnZXhwJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3RyKCkpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgncmVnZXhwRmxhZ3MnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZmxhZ3MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3RyKCksIGZsYWdzKCkpO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2pzb25QYXJzZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihmYWlsQ29udCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3VjY2Vzc0NvbnQpIHtcbiAgICAgICAgICB2YXIgZXJyLCBwO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHAgPSBKU09OLnBhcnNlKHN0cigpKTtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzQ29udCgpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgICAgICAgcmV0dXJuIGZhaWxDb250KCkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnanNvblN0cmluZ2lmeScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihmYWlsQ29udCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3VjY2Vzc0NvbnQpIHtcbiAgICAgICAgICB2YXIgZXJyLCBzO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHMgPSBKU09OLnN0cmluZ2lmeShvYmooKSk7XG4gICAgICAgICAgICByZXR1cm4gc3VjY2Vzc0NvbnQoKShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBmYWlsQ29udCgpKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2xvZycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coU3RyaW5nKHN0cigpKSk7XG4gICAgICAgIHJldHVybiByZXMoKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSk7XG5cbiAgbWFrZU1vbmFkID0gZnVuY3Rpb24oZ3V0cykge1xuICAgIHZhciBtO1xuXG4gICAgbSA9IGZ1bmN0aW9uKCkge307XG4gICAgbS5fX3Byb3RvX18gPSBNb25hZC5wcm90b3R5cGU7XG4gICAgbS5jbWQgPSBndXRzO1xuICAgIG0udHlwZSA9ICdtb25hZCc7XG4gICAgcmV0dXJuIG07XG4gIH07XG5cbiAgbWFrZVN5bmNNb25hZCA9IGZ1bmN0aW9uKGd1dHMpIHtcbiAgICB2YXIgbTtcblxuICAgIG0gPSBtYWtlTW9uYWQoZ3V0cyk7XG4gICAgbS5zeW5jID0gdHJ1ZTtcbiAgICByZXR1cm4gbTtcbiAgfTtcblxuICBuZXh0TW9uYWQgPSBmdW5jdGlvbihjb250KSB7XG4gICAgcmV0dXJuIGNvbnQ7XG4gIH07XG5cbiAgcmVwbGFjZUVyciA9IGZ1bmN0aW9uKGVyciwgbXNnKSB7XG4gICAgZXJyLm1lc3NhZ2UgPSBtc2c7XG4gICAgcmV0dXJuIGVycjtcbiAgfTtcblxuICBkZWZhdWx0RW52LndyaXRlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHByb2Nlc3Muc3Rkb3V0LndyaXRlKHN0cik7XG4gIH07XG5cbiAgZGVmYXVsdEVudi5lcnIgPSBmdW5jdGlvbihlcnIpIHtcbiAgICB2YXIgX3JlZjI7XG5cbiAgICByZXR1cm4gdGhpcy53cml0ZShcIkVycm9yOiBcIiArICgoX3JlZjIgPSBlcnIuc3RhY2spICE9IG51bGwgPyBfcmVmMiA6IGVycikpO1xuICB9O1xuXG4gIGRlZmF1bHRFbnYucHJvbXB0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRW52aXJvbm1lbnQgZG9lcyBub3Qgc3VwcG9ydCBwcm9tcHRpbmchXCIpO1xuICB9O1xuXG4gIG1vbmFkTW9kZVN5bmMgPSBmYWxzZTtcblxuICBnZXRNb25hZFN5bmNNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG1vbmFkTW9kZVN5bmM7XG4gIH07XG5cbiAgd2l0aFN5bmNNb2RlRG8gPSBmdW5jdGlvbihuZXdNb2RlLCBibG9jaykge1xuICAgIHZhciBvbGRNb2RlO1xuXG4gICAgb2xkTW9kZSA9IG1vbmFkTW9kZVN5bmM7XG4gICAgbW9uYWRNb2RlU3luYyA9IG5ld01vZGU7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBibG9jaygpO1xuICAgIH0gZmluYWxseSB7XG5cbiAgICB9XG4gIH07XG5cbiAgcnVuTW9uYWQgPSBmdW5jdGlvbihtb25hZCwgZW52LCBjb250KSB7XG4gICAgZW52ID0gZW52ICE9IG51bGwgPyBlbnYgOiByb290LmRlZmF1bHRFbnY7XG4gICAgcmV0dXJuIHdpdGhTeW5jTW9kZURvKHRydWUsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ld1J1bk1vbmFkKG1vbmFkLCBlbnYsIGNvbnQsIFtdKTtcbiAgICB9KTtcbiAgfTtcblxuICBpc01vbmFkID0gZnVuY3Rpb24obSkge1xuICAgIHJldHVybiB0eXBlb2YgbSA9PT0gJ2Z1bmN0aW9uJyAmJiAobS5jbWQgIT0gbnVsbCk7XG4gIH07XG5cbiAgY29udGludWVNb25hZHMgPSBmdW5jdGlvbihjb250U3RhY2ssIGVudikge1xuICAgIHJldHVybiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgIHJldHVybiB3aXRoU3luY01vZGVEbyhmYWxzZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXdSdW5Nb25hZChyZXN1bHQsIGVudiwgbnVsbCwgY29udFN0YWNrKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG5cbiAgYXN5bmNNb25hZCA9IHtcbiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCI8YXN5bmNNb25hZFJlc3VsdD5cIjtcbiAgICB9XG4gIH07XG5cbiAgd2FybkFzeW5jID0gZmFsc2U7XG5cbiAgc2V0V2FybkFzeW5jID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICByZXR1cm4gd2FybkFzeW5jID0gc3RhdGU7XG4gIH07XG5cbiAgbmV3UnVuTW9uYWQgPSBmdW5jdGlvbihtb25hZCwgZW52LCBjb250LCBjb250U3RhY2spIHtcbiAgICB2YXIgZXJyLCByZXN1bHQ7XG5cbiAgICBpZiAoY29udCkge1xuICAgICAgY29udFN0YWNrLnB1c2goY29udCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAoaXNNb25hZChtb25hZCkpIHtcbiAgICAgICAgICBpZiAobW9uYWQuYmluZGluZykge1xuICAgICAgICAgICAgY29udFN0YWNrLnB1c2goKGZ1bmN0aW9uKGJuZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBibmQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKG1vbmFkLmJpbmRpbmcoKSkpO1xuICAgICAgICAgICAgbW9uYWQgPSBtb25hZC5tb25hZCgpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIGlmICghbW9uYWQuc3luYykge1xuICAgICAgICAgICAgbW9uYWRNb2RlU3luYyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHdhcm5Bc3luYykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFzeW5jIG1vbmFkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9uYWQuY21kKGVudiwgY29udGludWVNb25hZHMoY29udFN0YWNrLCBlbnYpKTtcbiAgICAgICAgICAgIHJldHVybiBhc3luY01vbmFkO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQgPSBtb25hZC5jbWQoZW52LCBpZGVudGl0eSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9uYWRNb2RlU3luYyA9IHRydWU7XG4gICAgICAgICAgcmVzdWx0ID0gbW9uYWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb250U3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBtb25hZCA9IGNvbnRTdGFjay5wb3AoKShyZXN1bHQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgZXJyID0gcmVwbGFjZUVycihlcnIsIFwiXFxuRVJST1IgUlVOTklORyBNT05BRCwgTU9OQUQ6IFwiICsgbW9uYWQgKyBcIiwgRU5WOiBcIiArIGVudiArIFwiLi4uXFxuXCIgKyBlcnIubWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmxvZyhlcnIuc3RhY2spO1xuICAgICAgcmV0dXJuIChjb250ICE9IG51bGwgPyBjb250IDogaWRlbnRpdHkpKGVycik7XG4gICAgfVxuICB9O1xuXG4gIE1vbmFkID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIE1vbmFkKCkge31cblxuICAgIE1vbmFkLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiTW9uYWQ6IFwiICsgKHRoaXMuY21kLnRvU3RyaW5nKCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTW9uYWQ7XG5cbiAgfSkoKTtcblxuICBnbG9iYWwuTF9ydW5Nb25hZHMgPSBmdW5jdGlvbihtb25hZEFycmF5KSB7XG4gICAgbW9uYWRBcnJheS5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIG5ld1J1bk1vbmFkKDAsIGRlZmF1bHRFbnYsIG51bGwsIG1vbmFkQXJyYXkpO1xuICB9O1xuXG4gIGRlZmluZSgnZGVmaW5lJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihhcml0eSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3JjKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRlZikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgICAgIGRlZmluZShuYW1lKCksIGRlZiwgYXJpdHkoKSwgc3JjKCkpO1xuICAgICAgICAgICAgICByZXR1cm4gY29udCh0eXBlb2YgTF90cnVlICE9PSBcInVuZGVmaW5lZFwiICYmIExfdHJ1ZSAhPT0gbnVsbCA/IExfdHJ1ZSA6IF90cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnYmluZCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihtKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYmluZGluZykge1xuICAgICAgICB2YXIgYmluZE1vbmFkO1xuXG4gICAgICAgIGJpbmRNb25hZCA9IG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHt9KTtcbiAgICAgICAgYmluZE1vbmFkLm1vbmFkID0gbTtcbiAgICAgICAgYmluZE1vbmFkLmJpbmRpbmcgPSBiaW5kaW5nO1xuICAgICAgICByZXR1cm4gYmluZE1vbmFkO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICB2YWx1ZXMgPSB7fTtcblxuICBhY3RvcnMgPSB7fTtcblxuICBkZWZpbmUoJ2FjdG9yJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihmdW5jKSB7XG4gICAgICAgIHJldHVybiBhY3RvcnNbbmFtZV0gPSBmdW5jO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ3NlbmQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG1zZykge1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHJ1bk1vbmFkKGFjdG9yc1tuYW1lXSgpKG1zZykpO1xuICAgICAgICB9KSwgMSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnaGFzVmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHJldHVybiBjb250KGJvb2xlYW5Gb3IodmFsdWVzW25hbWUoKV0gIT0gbnVsbCkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdnZXRWYWx1ZU9yJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgdmFyIF9yZWYyO1xuXG4gICAgICAgICAgcmV0dXJuIGNvbnQoKF9yZWYyID0gdmFsdWVzW25hbWUoKV0pICE9IG51bGwgPyBfcmVmMiA6IGRlZmF1bHRWYWx1ZSgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnZ2V0VmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIGlmICghKG5hbWUoKSBpbiB2YWx1ZXMpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsdWUgbmFtZWQgJ1wiICsgKG5hbWUoKSkgKyBcIidcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnQodmFsdWVzW25hbWUoKV0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdzZXRWYWx1ZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgdmFsdWVzW25hbWUoKV0gPSB2YWx1ZSgpO1xuICAgICAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIHNldFZhbHVlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICB9O1xuXG4gIGdldFZhbHVlID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlc1trZXldO1xuICB9O1xuXG4gIGRlZmluZSgnZW52SGFzJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICByZXR1cm4gY29udChib29sZWFuRm9yKGVudi52YWx1ZXNbbmFtZSgpXSAhPSBudWxsKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2VudkdldE9yJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgdmFyIF9yZWYyO1xuXG4gICAgICAgICAgcmV0dXJuIGNvbnQoKF9yZWYyID0gZW52LnZhbHVlc1tuYW1lKCldKSAhPSBudWxsID8gX3JlZjIgOiBkZWZhdWx0VmFsdWUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2VudkdldCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgaWYgKCEobmFtZSgpIGluIGVudi52YWx1ZXMpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsdWUgbmFtZWQgJ1wiICsgKG5hbWUoKSkgKyBcIidcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnQoZW52LnZhbHVlc1tuYW1lKCldKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnZW52U2V0JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgICBlbnYudmFsdWVzW25hbWUoKV0gPSB2YWx1ZSgpO1xuICAgICAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnY3JlYXRlUycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgcmV0dXJuIGNvbnQoX3RydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZWZpbmUoJ2dldFMnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICByZXR1cm4gY29udChzdGF0ZSgpLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnc2V0UycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICAgIHN0YXRlKCkudmFsdWUgPSB2YWx1ZSgpO1xuICAgICAgICAgIHJldHVybiBjb250KF9mYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBzZXRWYWx1ZSgnbWFjcm9zJywgTmlsKTtcblxuICBkZWZpbmUoJ2RlZk1hY3JvJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgdmFsdWVzLm1hY3JvcyA9IGNvbnMoY29ucyhuYW1lKCksIGRlZigpKSwgdmFsdWVzLm1hY3Jvcyk7XG4gICAgICAgICAgcmV0dXJuIGNvbnQoX2ZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnZnVuY3MnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbWFrZVN5bmNNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTGVpc3VyZSBmdW5jdGlvbnM6XFxuXCIgKyAoXyhnbG9iYWwubGVpc3VyZUZ1bmNOYW1lcy50b0FycmF5KCkpLnNvcnQoKS5qb2luKCdcXG4nKSkpO1xuICAgICAgcmV0dXJuIGNvbnQoX2ZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdmdW5jU3JjJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYygpID09PSAnZnVuY3Rpb24nICYmIGZ1bmMoKS5zcmMpIHtcbiAgICAgICAgcmV0dXJuIHNvbWUoZnVuYygpLnNyYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2FzdDJKc29uJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFzdCkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFzdDJKc29uKGFzdCgpKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdwcmludCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihtc2cpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICB2YXIgbTtcblxuICAgICAgICBtID0gbXNnKCk7XG4gICAgICAgIGVudi53cml0ZShcIlwiICsgKGVudi5wcmVzZW50VmFsdWUobSkpICsgXCJcXG5cIik7XG4gICAgICAgIHJldHVybiBjb250KF9mYWxzZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ3dyaXRlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG1zZykge1xuICAgICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIGVudi53cml0ZShlbnYucHJlc2VudFZhbHVlKG1zZygpKSk7XG4gICAgICAgIHJldHVybiBjb250KF9mYWxzZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ3JlYWRGaWxlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgIHJldHVybiByZWFkRmlsZShuYW1lKCksIGZ1bmN0aW9uKGVyciwgY29udGVudHMpIHtcbiAgICAgICAgICByZXR1cm4gY29udCgoZXJyID8gbGVmdChlcnIuc3RhY2spIDogcmlnaHQoY29udGVudHMpKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdyZWFkRGlyJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRpcikge1xuICAgICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIHJlYWREaXIoZGlyKCksIGZ1bmN0aW9uKGVyciwgZmlsZXMpIHtcbiAgICAgICAgICByZXR1cm4gY29udCgoZXJyID8gbGVmdChlcnIuc3RhY2spIDogcmlnaHQoZmlsZXMpKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdzdGF0RmlsZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihmaWxlKSB7XG4gICAgICByZXR1cm4gbWFrZU1vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICByZXR1cm4gc3RhdEZpbGUoZmlsZSgpLCBmdW5jdGlvbihlcnIsIHN0YXRzKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnQoKGVyciA/IGxlZnQoZXJyLnN0YWNrKSA6IHJpZ2h0KHN0YXRzKSkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgncHJvbXB0JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG1zZykge1xuICAgICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIGVudi5wcm9tcHQoU3RyaW5nKG1zZygpKSwgZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgICByZXR1cm4gY29udChpbnB1dCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdyYW5kJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG1ha2VTeW5jTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICByZXR1cm4gY29udChNYXRoLnJhbmRvbSgpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVmaW5lKCdqcycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiBtYWtlU3luY01vbmFkKGZ1bmN0aW9uKGVudiwgY29udCkge1xuICAgICAgICB2YXIgZXJyLCByZXN1bHQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXN1bHQgPSBldmFsKHN0cigpKTtcbiAgICAgICAgICByZXR1cm4gY29udChyaWdodChyZXN1bHQpKTtcbiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgICAgIHJldHVybiBjb250KGxlZnQoZXJyKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGRlZmluZSgnZGVsYXknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGltZW91dCkge1xuICAgICAgcmV0dXJuIG1ha2VNb25hZChmdW5jdGlvbihlbnYsIGNvbnQpIHtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBjb250KF90cnVlKTtcbiAgICAgICAgfSksIHRpbWVvdXQoKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBkZWZpbmUoJ2FsdERlZicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oYWx0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcml0eSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlTW9uYWQoZnVuY3Rpb24oZW52LCBjb250KSB7XG4gICAgICAgICAgICAgIHZhciBhbHRzLCBpLCBpbmZvLCBuZXdEZWYsIG5tO1xuXG4gICAgICAgICAgICAgIGluZm8gPSBmdW5jdGlvbkluZm9bbmFtZSgpXTtcbiAgICAgICAgICAgICAgaWYgKCFpbmZvKSB7XG4gICAgICAgICAgICAgICAgaW5mbyA9IGZ1bmN0aW9uSW5mb1tuYW1lKCldID0ge1xuICAgICAgICAgICAgICAgICAgc3JjOiAnJyxcbiAgICAgICAgICAgICAgICAgIGFyaXR5OiAtMSxcbiAgICAgICAgICAgICAgICAgIGFsdHM6IHt9LFxuICAgICAgICAgICAgICAgICAgYWx0TGlzdDogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICghaW5mby5hbHRzW2FsdCgpXSkge1xuICAgICAgICAgICAgICAgIGluZm8uYWx0TGlzdC5wdXNoKGFsdCgpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpbmZvLmFsdHNbYWx0KCldID0gZGVmO1xuICAgICAgICAgICAgICBhbHRzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjIsIF9yZXN1bHRzO1xuXG4gICAgICAgICAgICAgICAgX3JlZjIgPSBpbmZvLmFsdExpc3Q7XG4gICAgICAgICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICBpID0gX3JlZjJbX2ldO1xuICAgICAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChpbmZvLmFsdHNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICAgIG5ld0RlZiA9IGN1cnJ5KGFyaXR5KCksIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJnLCBvcHQsIHJlcywgX2ksIF9qLCBfaywgX2xlbiwgX2xlbjEsIF9sZW4yO1xuXG4gICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBhbHRzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICBhbHQgPSBhbHRzW19pXTtcbiAgICAgICAgICAgICAgICAgIG9wdCA9IGFsdCgpO1xuICAgICAgICAgICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gYXJncy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnc1tfal07XG4gICAgICAgICAgICAgICAgICAgIG9wdCA9IG9wdChhcmcpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKGdldFR5cGUob3B0KSA9PT0gJ3NvbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4KCk7XG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9mYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmZvLm1haW5EZWYpIHtcbiAgICAgICAgICAgICAgICAgIHJlcyA9IGluZm8ubWFpbkRlZigpO1xuICAgICAgICAgICAgICAgICAgZm9yIChfayA9IDAsIF9sZW4yID0gYXJncy5sZW5ndGg7IF9rIDwgX2xlbjI7IF9rKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnc1tfa107XG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcyhhcmcpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZGVmYXVsdCBkZWZpbml0aW9uIGZvciBcIiArIChuYW1lKCkpKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIG5tID0gXCJMX1wiICsgKG5hbWVTdWIobmFtZSgpKSk7XG4gICAgICAgICAgICAgIGdsb2JhbFtubV0gPSBnbG9iYWwubGVpc3VyZUZ1bmNOYW1lc1tubV0gPSBuZXdEZWY7XG4gICAgICAgICAgICAgIHJldHVybiBjb250KGRlZik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBjdXJyeSA9IGZ1bmN0aW9uKGFyaXR5LCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHN1YmN1cnJ5KGFyaXR5LCBmdW5jLCBbXSk7XG4gICAgfTtcbiAgfTtcblxuICBzdWJjdXJyeSA9IGZ1bmN0aW9uKGFyaXR5LCBmdW5jLCBhcmdzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgICAgYXJncyA9IGFyZ3MgIT0gbnVsbCA/IGFyZ3MgOiBbXTtcbiAgICAgIGFyZ3MucHVzaChhcmcpO1xuICAgICAgaWYgKGFyaXR5ID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jKGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN1YmN1cnJ5KGFyaXR5IC0gMSwgZnVuYywgYXJncyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3Rva2VuJyk7XG5cbiAgTGVpc3VyZV90b2tlbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJUb2tlbihcIiArIChKU09OLnN0cmluZ2lmeSh0b2tlblN0cmluZyh0aGlzKSkpICsgXCIsIFwiICsgKHRva2VuUG9zKHRoaXMpKSArIFwiKVwiO1xuICB9O1xuXG4gIHRva2VuU3RyaW5nID0gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiB0KGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHR4dCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgICAgcmV0dXJuIHR4dCgpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB0b2tlblBvcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gdChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih0eHQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHBvcykge1xuICAgICAgICAgIHJldHVybiBwb3MoKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdwYXJlbnMnKTtcblxuICBMZWlzdXJlX3BhcmVucy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJQYXJlbnMoXCIgKyAocGFyZW5zU3RhcnQodGhpcykpICsgXCIsIFwiICsgKHBhcmVuc0VuZCh0aGlzKSkgKyBcIiwgXCIgKyAocGFyZW5zQ29udGVudCh0aGlzKSkgKyBcIilcIjtcbiAgfTtcblxuICBwYXJlbnNTdGFydCA9IGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gcChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIHJldHVybiBzKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgcGFyZW5zRW5kID0gZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiBwKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgcmV0dXJuIGUoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBwYXJlbnNDb250ZW50ID0gZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiBwKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgcmV0dXJuIGwoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBlbnN1cmVMZWlzdXJlQ2xhc3MoJ3RydWUnKTtcblxuICBMZWlzdXJlX3RydWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwidHJ1ZVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygnZmFsc2UnKTtcblxuICBMZWlzdXJlX2ZhbHNlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcImZhbHNlXCI7XG4gIH07XG5cbiAgZW5zdXJlTGVpc3VyZUNsYXNzKCdsZWZ0Jyk7XG5cbiAgTGVpc3VyZV9sZWZ0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIkxlZnQoXCIgKyAodGhpcyhmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfaWRlbnRpdHk7XG4gICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX2lkZW50aXR5O1xuICAgIH0pKSArIFwiKVwiO1xuICB9O1xuXG4gIGVuc3VyZUxlaXN1cmVDbGFzcygncmlnaHQnKTtcblxuICBMZWlzdXJlX3JpZ2h0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIlJpZ2h0KFwiICsgKHRoaXMoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX2lkZW50aXR5O1xuICAgIH0pKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9pZGVudGl0eTtcbiAgICB9KSkgKyBcIilcIjtcbiAgfTtcblxuICByb290Ll90cnVlID0gX3RydWU7XG5cbiAgcm9vdC5fZmFsc2UgPSBfZmFsc2U7XG5cbiAgcm9vdC5zdGF0ZVZhbHVlcyA9IHZhbHVlcztcblxuICByb290LnJ1bk1vbmFkID0gcnVuTW9uYWQ7XG5cbiAgcm9vdC5pc01vbmFkID0gaXNNb25hZDtcblxuICByb290LmlkZW50aXR5ID0gaWRlbnRpdHk7XG5cbiAgcm9vdC5zZXRWYWx1ZSA9IHNldFZhbHVlO1xuXG4gIHJvb3QuZ2V0VmFsdWUgPSBnZXRWYWx1ZTtcblxuICByb290Lm1ha2VNb25hZCA9IG1ha2VNb25hZDtcblxuICByb290Lm1ha2VTeW5jTW9uYWQgPSBtYWtlU3luY01vbmFkO1xuXG4gIHJvb3QucmVwbGFjZUVyciA9IHJlcGxhY2VFcnI7XG5cbiAgcm9vdC5sZWZ0ID0gbGVmdDtcblxuICByb290LnJpZ2h0ID0gcmlnaHQ7XG5cbiAgcm9vdC5nZXRNb25hZFN5bmNNb2RlID0gZ2V0TW9uYWRTeW5jTW9kZTtcblxuICByb290LmFzeW5jTW9uYWQgPSBhc3luY01vbmFkO1xuXG4gIHJvb3Quc2V0V2FybkFzeW5jID0gc2V0V2FybkFzeW5jO1xuXG4gIHJvb3QuY2FsbCA9IGNhbGw7XG5cbiAgcm9vdC5jYWxsTW9uYWQgPSBjYWxsTW9uYWQ7XG5cbiAgcm9vdC5iYXNpY0NhbGwgPSBiYXNpY0NhbGw7XG5cbiAgcm9vdC5ib29sZWFuRm9yID0gYm9vbGVhbkZvcjtcblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cgIT09IG51bGwpIHtcbiAgICB3aW5kb3cucnVuTW9uYWQgPSBydW5Nb25hZDtcbiAgICB3aW5kb3cuc2V0VHlwZSA9IHNldFR5cGU7XG4gICAgd2luZG93LnNldERhdGFUeXBlID0gc2V0RGF0YVR5cGU7XG4gICAgd2luZG93LmRlZmF1bHRFbnYgPSBkZWZhdWx0RW52O1xuICAgIHdpbmRvdy5pZGVudGl0eSA9IGlkZW50aXR5O1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1ydW50aW1lLm1hcFxuKi9cblxufSkocmVxdWlyZShcIl9fYnJvd3NlcmlmeV9wcm9jZXNzXCIpLHNlbGYpIiwiTF9ydW5Nb25hZHMoW1xuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaWZcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcImlmID0gaWRcIn0pKExfaWQpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImFjb25zZlwifSkoZnVuY3Rpb24oKXtyZXR1cm4gM30pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYWNvbnNmIGtleSB2YWx1ZSBsaXN0ID0gYWNvbnMga2V5IHZhbHVlIChyZW1vdmVJZiAoXFxcXHBhaXIgLiBwYWlyIFxcXFxoIHQgLiBoID09IGtleSkgbGlzdClcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfa2V5KXtyZXR1cm4gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfYWNvbnMoKShMX2tleSkoTF92YWx1ZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZW1vdmVJZigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfcGFpcil7cmV0dXJuIExfcGFpcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIExfJHAkcCgpKExfaCkoTF9rZXkpfX0pfX0pKCkpfSl9fSkoKSkoTF9saXN0KSl9fSkoKSl9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZNYWNybygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwid2hlblwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saW5lKXtyZXR1cm4gTF9saW5lKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jb25kKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gTF9jb25zKCkoTF9jb25kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImRvXCJ9KShMX3Jlc3QpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIm5pbFwifSkoTF9uaWwpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfYWRkVG9rZW5Hcm91cCgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwianNbXCJ9KShmdW5jdGlvbigpe3JldHVybiBcIl1cIn0pfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZNYWNybygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwianNbXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImpzXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcInN0ckNhdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmbGF0dGVuXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xpc3RpZnkoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX2xpc3QpKX19KSgpKSl9fSkoKSkoTF9uaWwpKX19KSgpKShMX25pbCkpfX0pKCkpKX19KSgpKShMX25pbCkpfX0pKCkpKX19KSgpKShMX25pbCkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaHRtbFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaHRtbCB4ID0gXFxcXGYgLiBmIHhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF94KX0sICdodG1sJyl9LCAnaHRtbCcpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpc3plcm9cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcImlzemVybyA9IGVxIDBcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZXEoKShmdW5jdGlvbigpe3JldHVybiAwfSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInBvc2l0aXZlXCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJwb3NpdGl2ZSA9IDAgPFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8keSgpKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2FkZFRva2VuKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCItLVwifSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2FkZFRva2VuKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCIrK1wifSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLS1cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDB9KShmdW5jdGlvbigpe3JldHVybiBcIi0tID0gKGZsaXAgKC0pKSAxXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZsaXAoKShMXyRfKShmdW5jdGlvbigpe3JldHVybiAxfSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIisrXCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCIrKyA9ICgxICspXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyRvKCkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJpbnRlcmNhbGF0ZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaW50ZXJjYWxhdGUgeCBsID0gY29uY2F0IChpbnRlcnNwZXJzZSB4IGwpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX2NvbmNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaW50ZXJzcGVyc2UoKShMX3gpKExfbCkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInZpc2l0XCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ2aXNpdCBmdW5jIGwgPSBcXFxcXFxcXFxcbiAgcmVzdWx0ID0gZnVuYyBmdW5jIGxcXG4gIC5cXG4gIGlzQ29ucyByZXN1bHRcXG4gICAgcmVzdWx0IFxcXFxoIHQgLiBjb25zICh2aXNpdCBmdW5jIGgpICh2aXNpdCBmdW5jIHQpXFxuICAgIHJlc3VsdFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mdW5jKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3Jlc3VsdDtcblxuTF9yZXN1bHQgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Z1bmMoKShMX2Z1bmMpKExfbCkpfX0pKCk7XG5yZXR1cm4gTF9pc0NvbnMoKShMX3Jlc3VsdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZXN1bHQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Zpc2l0KCkoTF9mdW5jKShMX2gpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Zpc2l0KCkoTF9mdW5jKShMX3QpKX19KSgpKX19KX19KSgpKSl9fSkoKSkoTF9yZXN1bHQpfSkoKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzaW1wbGlmeVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2ltcGxpZnkgZXhwclN0cmluZyA9IGRvXFxuICBsaXN0IDwtIHNjYW5MaW5lTSBleHByU3RyaW5nXFxuICB2aXNpdCAoXFxcXGZ1bmMgeCAuIGlzVG9rZW4geCAodG9rZW5TdHJpbmcgeCkgKChpc1BhcmVucyB4KSAodmlzaXQgZnVuYyAocGFyZW5zQ29udGVudCB4KSkgeCkpIGxpc3RcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZXhwclN0cmluZyl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc2NhbkxpbmVNKCkoTF9leHByU3RyaW5nKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF92aXNpdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfeCl7cmV0dXJuIExfaXNUb2tlbigpKExfeCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90b2tlblN0cmluZygpKExfeCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNQYXJlbnMoKShMX3gpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdmlzaXQoKShMX2Z1bmMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyZW5zQ29udGVudCgpKExfeCkpfX0pKCkpKX19KSgpKShMX3gpKX19KSgpKX19KX19KSgpKShMX2xpc3QpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkb2FsbFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZG9hbGwgPSBmb2xkcjEgKFxcXFxlbCByZXMgLiBiaW5kIGVsIFxcXFxfIC4gcmVzKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mb2xkcjEoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2VsKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXMpe3JldHVybiBMX2JpbmQoKShMX2VsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX18pe3JldHVybiBMX3JlcygpfSl9fSkoKSl9fSl9fSkoKSkpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJlcXVpcmVKU1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVxdWlyZUpTIGZpbGUgPSBiaW5kIChnZXRWYWx1ZSAncmVxdWlyZWRGaWxlcycpXFxuICBcXFxcZmlsZXMgLiBjb250YWlucyBmaWxlcyBmaWxlXFxuICAgIGZhbHNlXFxuICAgIGJpbmQgKGxvYWRKUyBmaWxlKVxcbiAgICAgIFxcXFxyZXN1bHQgLiByZXN1bHRcXG4gICAgICAgIFxcXFx4IC4gbGVmdCB4XFxuICAgICAgICBcXFxcXyAuIGJpbmQgKHNldFZhbHVlICdyZXF1aXJlZEZpbGVzJyAoY29ucyBmaWxlIGZpbGVzKSlcXG4gICAgICAgICAgXFxcXF8gLiByaWdodCB0cnVlXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2ZpbGUpe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2dldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyZXF1aXJlZEZpbGVzXCJ9KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9maWxlcyl7cmV0dXJuIExfY29udGFpbnMoKShMX2ZpbGVzKShMX2ZpbGUpKExfZmFsc2UpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbG9hZEpTKCkoTF9maWxlKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9yZXN1bHQpe3JldHVybiBMX3Jlc3VsdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfeCl7cmV0dXJuIExfbGVmdCgpKExfeCl9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX18pe3JldHVybiBMX2JpbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NldFZhbHVlKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJyZXF1aXJlZEZpbGVzXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2ZpbGUpKExfZmlsZXMpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9fXzApe3JldHVybiBMX3JpZ2h0KCkoTF90cnVlKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKSl9fSkoKSl9KX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImxvYWRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImxvYWQgZmlsZSA9IGJpbmQgKHJlYWRGaWxlIGZpbGUpXFxuICBcXFxccmVzdWx0IC4gcmVzdWx0XFxuICAgIFxcXFxlcnIgLiBlcnJcXG4gICAgXFxcXGNvbnRlbnRzIC4ganMgY29udGVudHNcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZmlsZSl7cmV0dXJuIExfYmluZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcmVhZEZpbGUoKShMX2ZpbGUpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3Jlc3VsdCl7cmV0dXJuIExfcmVzdWx0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9lcnIpe3JldHVybiBMX2VycigpfSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jb250ZW50cyl7cmV0dXJuIExfanMoKShMX2NvbnRlbnRzKX0pfX0pKCkpfSl9fSkoKSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkbGVtcHR5XCJ9KShmdW5jdGlvbigpe3JldHVybiAwfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkbGVtcHR5ID0gaWRcIn0pKExfaWQpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImRsXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkbCBpdGVtID0gXFxcXHJlc3QgLiBpdGVtOnJlc3RcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gTF9jb25zKCkoTF9pdGVtKShMX3Jlc3QpfSwgJ2RsJyl9LCAnZGwnKSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGxQdXNoXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkbFB1c2ggbGlzdCBpdGVtID0gZGxBcHBlbmQgbGlzdCAoZGwgaXRlbSlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIGZ1bmN0aW9uKExfaXRlbSl7cmV0dXJuIExfZGxBcHBlbmQoKShMX2xpc3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZGwoKShMX2l0ZW0pKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkbEFwcGVuZFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGxBcHBlbmQgYSBiID0gXFxcXHJlc3QgLiBhIChiIHJlc3QpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBzZXREYXRhVHlwZShmdW5jdGlvbihMX2Epe3JldHVybiBmdW5jdGlvbihMX2Ipe3JldHVybiBzZXRUeXBlKGZ1bmN0aW9uKExfcmVzdCl7cmV0dXJuIExfYSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYigpKExfcmVzdCkpfX0pKCkpfSwgJ2RsQXBwZW5kJyl9fSwgJ2RsQXBwZW5kJykpfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcInJlbW92ZVwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVtb3ZlIHggbCA9IHJlbW92ZUlmIChlcSB4KSBsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX3JlbW92ZUlmKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9lcSgpKExfeCkpfX0pKCkpKExfbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmVtb3ZlSWZcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInJlbW92ZUlmIGYgbCA9IGZpbHRlciAoY29tcG9zZSBub3QgZikgbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9mKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gTF9maWx0ZXIoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbXBvc2UoKShMX25vdCkoTF9mKSl9fSkoKSkoTF9sKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhbnlcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImFueSBmIGwgPSBmaW5kIGYgbCAoXFxcXGVsIC4gdHJ1ZSkgZmFsc2VcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZil7cmV0dXJuIGZ1bmN0aW9uKExfbCl7cmV0dXJuIExfZmluZCgpKExfZikoTF9sKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2VsKXtyZXR1cm4gTF90cnVlKCl9KX19KSgpKShMX2ZhbHNlKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJhbGxcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImFsbCBmIGwgPSBub3QgYW55IChjb21wb3NlIG5vdCBmKSBsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX25vdCgpKExfYW55KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbXBvc2UoKShMX25vdCkoTF9mKSl9fSkoKSkoTF9sKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0YWtlXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0YWtlIG4gbGlzdCA9IHBvc2l0aXZlIG5cXG4gIGxpc3RcXG4gICAgXFxcXGggdCBEIC4gY29ucyBoICh0YWtlICgtLSBuKSB0KVxcbiAgICBuaWxcXG4gIG5pbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uKXtyZXR1cm4gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gTF9wb3NpdGl2ZSgpKExfbikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9saXN0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rha2UoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyRfJF8oKShMX24pKX19KSgpKShMX3QpKX19KSgpKX19fSl9fSkoKSkoTF9uaWwpKX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidGFrZVdoaWxlXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ0YWtlV2hpbGUgcHJlZGljYXRlIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBwcmVkaWNhdGUgKGhlYWQgbGlzdClcXG4gICAgY29ucyBoICh0YWtlV2hpbGUgcHJlZGljYXRlIHQpXFxuICAgIG5pbFxcbiAgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3ByZWRpY2F0ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfcHJlZGljYXRlKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF9saXN0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rha2VXaGlsZSgpKExfcHJlZGljYXRlKShMX3QpKX19KSgpKSl9fSkoKSkoTF9uaWwpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZHJvcFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZHJvcCB4IGxpc3QgPSBwb3NpdGl2ZSB4XFxuICBsaXN0XFxuICAgIFxcXFxoIHQgRCAuIGRyb3AgKC0tIHgpIHRcXG4gICAgbmlsXFxuICBsaXN0XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2xpc3Qpe3JldHVybiBMX3Bvc2l0aXZlKCkoTF94KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xpc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2Ryb3AoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyRfJF8oKShMX3gpKX19KSgpKShMX3QpfX19KX19KSgpKShMX25pbCkpfX0pKCkpKExfbGlzdCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZHJvcFdoaWxlXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJkcm9wV2hpbGUgcHJlZGljYXRlIGxpc3QgPSBsaXN0XFxuICBcXFxcaCB0IEQgLiBwcmVkaWNhdGUgaFxcbiAgICBkcm9wV2hpbGUgcHJlZGljYXRlIHRcXG4gICAgbGlzdFxcbiAgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3ByZWRpY2F0ZSl7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfbGlzdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfcHJlZGljYXRlKCkoTF9oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Ryb3BXaGlsZSgpKExfcHJlZGljYXRlKShMX3QpKX19KSgpKShMX2xpc3QpfX19KX19KSgpKShMX25pbCl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZHJvcExhc3RcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImRyb3BMYXN0IG4gbGlzdCA9IHJldmVyc2UgKGRyb3AgbiAocmV2ZXJzZSBsaXN0KSlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfcmV2ZXJzZSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZHJvcCgpKExfbikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9yZXZlcnNlKCkoTF9saXN0KSl9fSkoKSkpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImJveFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYm94IG4gbGlzdCA9IGxpc3QgPT0gbmlsXFxuICBuaWxcXG4gIFsodGFrZSBuIGxpc3QpIHwgYm94IG4gKGRyb3AgbiBsaXN0KV1cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfbGlzdCl7cmV0dXJuIExfJHAkcCgpKExfbGlzdCkoTF9uaWwpKExfbmlsKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3Rha2UoKShMX24pKExfbGlzdCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYm94KCkoTF9uKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2Ryb3AoKShMX24pKExfbGlzdCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYXRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImF0IGwgeCA9ICh4ID09IDApIChoZWFkIGwpIChhdCAodGFpbCBsKSAoLS0gKHgpICkgKVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sKXtyZXR1cm4gZnVuY3Rpb24oTF94KXtyZXR1cm4gTF8kcCRwKCkoTF94KShmdW5jdGlvbigpe3JldHVybiAwfSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF9sKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJF8kXygpKExfeCkpfX0pKCkpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzZXJpZXNcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInNlcmllcyBmdW5jIG4gPSBuOihzZXJpZXMgZnVuYyAoZnVuYyBuKSlcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfZnVuYyl7cmV0dXJuIGZ1bmN0aW9uKExfbil7cmV0dXJuIExfY29ucygpKExfbikoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9zZXJpZXMoKShMX2Z1bmMpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZnVuYygpKExfbikpfX0pKCkpKX19KSgpKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmcm9tXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmcm9tIG4gPSBzZXJpZXMgKysgblwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uKXtyZXR1cm4gTF9zZXJpZXMoKShMXyRvJG8pKExfbil9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmcm9tQnlcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcImZyb21CeSBuIGluYyA9IHNlcmllcyAoKCspIGluYykgblwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9uKXtyZXR1cm4gZnVuY3Rpb24oTF9pbmMpe3JldHVybiBMX3NlcmllcygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJG8oKShMX2luYykpfX0pKCkpKExfbil9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZnJvbVRvXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmcm9tVG8gbiBtID0gdGFrZVdoaWxlICgoPikgbSkgKGZyb20gbilcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfbSl7cmV0dXJuIExfdGFrZVdoaWxlKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF8keigpKExfbSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZnJvbSgpKExfbikpfX0pKCkpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImZyb21Ub0J5XCJ9KShmdW5jdGlvbigpe3JldHVybiAzfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJmcm9tVG9CeSBuIG0gaW5jID0gdGFrZVdoaWxlICgoPikgbSkgKGZyb21CeSBuIGluYylcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbil7cmV0dXJuIGZ1bmN0aW9uKExfbSl7cmV0dXJuIGZ1bmN0aW9uKExfaW5jKXtyZXR1cm4gTF90YWtlV2hpbGUoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMXyR6KCkoTF9tKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mcm9tQnkoKShMX24pKExfaW5jKSl9fSkoKSl9fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcImNvdW50XCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb3VudCB4IGwgPSBjb3VudElmIChlcSB4KSBsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX2NvdW50SWYoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2VxKCkoTF94KSl9fSkoKSkoTF9sKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb3VudElmXCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjb3VudElmIGYgbCA9IChlcSBsIG5pbCkgMFxcbiAgKyAoZiAoaGVhZCBsKSAxIDApIChjb3VudElmIGYgKHRhaWwgbCkpXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX2VxKCkoTF9sKShMX25pbCkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfJG8oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2YoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX2wpKX19KSgpKShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gMH0pKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvdW50SWYoKShMX2YpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfbCkpfX0pKCkpKX19KSgpKSl9fSkoKSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY291bnRJZk5vdFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiY291bnRJZk5vdCBmIGwgPSBjb3VudElmIChcXFxceC4gbm90IChmIHgpKSBsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2Ype3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX2NvdW50SWYoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3gpe3JldHVybiBMX25vdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZigpKExfeCkpfX0pKCkpfSl9fSkoKSkoTF9sKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJvZGRzXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJvZGRzIGwgPSBsXFxuICBcXFxcaCB0IEQgLiBbaCB8IGV2ZW5zIHRdXFxuICBuaWxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbCl7cmV0dXJuIExfbCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfaCl7cmV0dXJuIGZ1bmN0aW9uKExfdCl7cmV0dXJuIGZ1bmN0aW9uKExfRCl7cmV0dXJuIExfY29ucygpKExfaCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9ldmVucygpKExfdCkpfX0pKCkpfX19KX19KSgpKShMX25pbCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJldmVuc1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZXZlbnMgbCA9IGxcXG4gIFxcXFxoIHQgRCAuIG9kZHMgdFxcbiAgbmlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2wpe3JldHVybiBMX2woKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX29kZHMoKShMX3QpfX19KX19KSgpKShMX25pbCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJjbGVhdmVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KShmdW5jdGlvbigpe3JldHVybiBcImNsZWF2ZSBsID0gWyhldmVucyBsKSB8IChvZGRzIGwpXVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9sKXtyZXR1cm4gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9ldmVucygpKExfbCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfb2RkcygpKExfbCkpfX0pKCkpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWVyZ2VcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDN9KShmdW5jdGlvbigpe3JldHVybiBcIm1lcmdlIGNtcCBhIGIgPSBhXFxuICBcXFxcYWggYXQgRCAuIGJcXG4gICAgXFxcXGJoIGJ0IEQgLiBjbXAgYWggYmhcXG4gICAgICBbYWggfCAobWVyZ2UgY21wIGF0IGIpXVxcbiAgICAgIFtiaCB8IChtZXJnZSBjbXAgYSBidCldXFxuICAgIGFcXG4gIGJcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY21wKXtyZXR1cm4gZnVuY3Rpb24oTF9hKXtyZXR1cm4gZnVuY3Rpb24oTF9iKXtyZXR1cm4gTF9hKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9haCl7cmV0dXJuIGZ1bmN0aW9uKExfYXQpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2IoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2JoKXtyZXR1cm4gZnVuY3Rpb24oTF9idCl7cmV0dXJuIGZ1bmN0aW9uKExfRF8wKXtyZXR1cm4gTF9jbXAoKShMX2FoKShMX2JoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2FoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX21lcmdlKCkoTF9jbXApKExfYXQpKExfYikpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX2JoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX21lcmdlKCkoTF9jbXApKExfYSkoTF9idCkpfX0pKCkpKX19KSgpKX19fSl9fSkoKSkoTF9hKX19fSl9fSkoKSkoTF9iKX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWVyZ2VTb3J0XCJ9KShmdW5jdGlvbigpe3JldHVybiAyfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtZXJnZVNvcnQgY21wIGwgPSBsXFxuICBcXFxcaCB0IEQgLiBlcSAodGFpbCBsKSBuaWxcXG4gICAgbFxcbiAgICBkb1xcbiAgICAgIGNsID0gY2xlYXZlIGxcXG4gICAgICBlID0gaGVhZCBjbFxcbiAgICAgIG8gPSB0YWlsIGNsXFxuICAgICAgbWVyZ2UgY21wIChtZXJnZVNvcnQgY21wIGUpIChtZXJnZVNvcnQgY21wIG8pXFxuICBuaWxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfY21wKXtyZXR1cm4gZnVuY3Rpb24oTF9sKXtyZXR1cm4gTF9sKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9lcSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfbCkpfX0pKCkpKExfbmlsKShMX2wpKGZ1bmN0aW9uKCl7XG52YXIgTF9vLCBMX2UsIExfY2w7XG5cbkxfbyA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfY2wpKX19KSgpO1xuXG5MX2UgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX2NsKSl9fSkoKTtcblxuTF9jbCA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY2xlYXZlKCkoTF9sKSl9fSkoKTtcbnJldHVybiBMX21lcmdlKCkoTF9jbXApKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWVyZ2VTb3J0KCkoTF9jbXApKExfZSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWVyZ2VTb3J0KCkoTF9jbXApKExfbykpfX0pKCkpfSl9fX0pfX0pKCkpKExfbmlsKX19KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzb3J0XCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzb3J0IGwgPSBzb3J0QnkgbHRlIGxcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfbCl7cmV0dXJuIExfc29ydEJ5KCkoTF9sdGUpKExfbCl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmaW5lKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzb3J0QnlcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KShmdW5jdGlvbigpe3JldHVybiBcInNvcnRCeSBjbXAgbCA9IG1lcmdlU29ydCBjbXAgbFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9jbXApe3JldHVybiBmdW5jdGlvbihMX2wpe3JldHVybiBMX21lcmdlU29ydCgpKExfY21wKShMX2wpfX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9hZGRUb2tlbigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiLT5cIn0pfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIm1rU3RyXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJta1N0ciB0b2sgPSBjb25jYXRbJ1xcXCInICh0b2tlblN0cmluZyB0b2spICdcXFwiJ11cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfdG9rKXtyZXR1cm4gTF9zdHJDYXQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZsYXR0ZW4oKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIlxcXCJcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdG9rZW5TdHJpbmcoKShMX3RvaykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcIlwifSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZNYWNybygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiZGVmQ2FzZVwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9saXN0KXtyZXR1cm4gKGZ1bmN0aW9uKCl7XG5cbnZhciBMX3QzLCBMX2gzLCBMX3QyLCBMX2gyLCBMX3QxLCBMX2gxO1xuXG5MX3QzID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF90YWlsKCkoTF90MikpfX0pKCk7XG5cbkxfaDMgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hlYWQoKShMX3QyKSl9fSkoKTtcblxuTF90MiA9IChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfdGFpbCgpKExfdDEpKX19KSgpO1xuXG5MX2gyID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF90MSkpfX0pKCk7XG5cbkxfdDEgPSAoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3RhaWwoKShMX2xpc3QpKX19KSgpO1xuXG5MX2gxID0gKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oZWFkKCkoTF9saXN0KSl9fSkoKTtcbnJldHVybiBMX2FuZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNDb25zKCkoTF9saXN0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9hbmQoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2lzQ29ucygpKExfdDEpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FuZCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfaXNDb25zKCkoTF90MikpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfYW5kKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9pc1Rva2VuU3RyaW5nKCkoTF9oMikoZnVuY3Rpb24oKXtyZXR1cm4gXCIuXCJ9KSl9fSkoKSkoTF90cnVlKSl9fSkoKSkpfX0pKCkpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX21ha2VDYXNlQXJncygpKExfbGlzdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9ta1N0cigpKExfaDEpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX21rU3RyKCkoTF9oMykpfX0pKCkpKExfdDMpKExfaWQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3BhcnNlRXJyKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJFcnJvciBpbiBjYXNlIGRlZmluaXRpb24gLS0gZXhwZWN0ZWQgZnVuYy5uYW1lIGFyZ3MgfCBjb25kaXRpb24gLT4gYWN0aW9uLCBidXQgZ290IFwifSkoTF9saXN0KSl9fSkoKSl9KSgpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibWFrZUNhc2VBcmdzXCJ9KShmdW5jdGlvbigpe3JldHVybiA1fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWtlQ2FzZUFyZ3Mgb3JpZyBmdW5jTmFtZSBhbHROYW1lIHJlc3QgYXJncyA9IHJlc3RcXG4gIFxcXFxoIHQgRCAuIGlzVG9rZW5TdHJpbmcgaCAnfCdcXG4gICAgbWFrZUNhc2VDb25kaXRpb24gb3JpZyBmdW5jTmFtZSBhbHROYW1lIChhcmdzIG5pbCkgdCBpZFxcbiAgICBtYWtlQ2FzZUFyZ3Mgb3JpZyBmdW5jTmFtZSBhbHROYW1lIHQgKGRsUHVzaCBhcmdzIGgpXFxuICBwYXJzZUVyciBcXFwiRXJyb3IgaW4gY2FzZSBkZWZpbml0aW9uIC0tIGV4cGVjdGVkIGZ1bmMubmFtZSBhcmdzIHwgY29uZGl0aW9uIC0+IGFjdGlvbiwgYnV0IGdvdCBcXFwiIG9yaWdcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfb3JpZyl7cmV0dXJuIGZ1bmN0aW9uKExfZnVuY05hbWUpe3JldHVybiBmdW5jdGlvbihMX2FsdE5hbWUpe3JldHVybiBmdW5jdGlvbihMX3Jlc3Qpe3JldHVybiBmdW5jdGlvbihMX2FyZ3Mpe3JldHVybiBMX3Jlc3QoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2gpe3JldHVybiBmdW5jdGlvbihMX3Qpe3JldHVybiBmdW5jdGlvbihMX0Qpe3JldHVybiBMX2lzVG9rZW5TdHJpbmcoKShMX2gpKGZ1bmN0aW9uKCl7cmV0dXJuIFwifFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9tYWtlQ2FzZUNvbmRpdGlvbigpKExfb3JpZykoTF9mdW5jTmFtZSkoTF9hbHROYW1lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2FyZ3MoKShMX25pbCkpfX0pKCkpKExfdCkoTF9pZCkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFrZUNhc2VBcmdzKCkoTF9vcmlnKShMX2Z1bmNOYW1lKShMX2FsdE5hbWUpKExfdCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9kbFB1c2goKShMX2FyZ3MpKExfaCkpfX0pKCkpKX19KSgpKX19fSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9wYXJzZUVycigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiRXJyb3IgaW4gY2FzZSBkZWZpbml0aW9uIC0tIGV4cGVjdGVkIGZ1bmMubmFtZSBhcmdzIHwgY29uZGl0aW9uIC0+IGFjdGlvbiwgYnV0IGdvdCBcIn0pKExfb3JpZykpfX0pKCkpfX19fX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9kZWZpbmUoKShmdW5jdGlvbigpe3JldHVybiBcIm1ha2VDYXNlQ29uZGl0aW9uXCJ9KShmdW5jdGlvbigpe3JldHVybiA2fSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJtYWtlQ2FzZUNvbmRpdGlvbiBvcmlnIGZ1bmNOYW1lIGFsdE5hbWUgYXJncyByZXN0IGNvbmQgPSByZXN0XFxuICBcXFxcaCB0IEQgLiBpc1Rva2VuU3RyaW5nIGggJy0+J1xcbiAgICBmb2xkcjEgYXBwZW5kIFtbJ2FsdERlZicgZnVuY05hbWUgYWx0TmFtZSAobGVuZ3RoIGFyZ3MpICdcXFxcXFxcXCddIGFyZ3MgWycuJyAoY29uZCBuaWwpIFsnc29tZScgdF0gJ25vbmUnXV1cXG4gICAgbWFrZUNhc2VDb25kaXRpb24gb3JpZyBmdW5jTmFtZSBhbHROYW1lIGFyZ3MgdCAoZGxQdXNoIGNvbmQgaClcXG4gcGFyc2VFcnIgXFxcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXFxcIiBvcmlnXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29yaWcpe3JldHVybiBmdW5jdGlvbihMX2Z1bmNOYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9hbHROYW1lKXtyZXR1cm4gZnVuY3Rpb24oTF9hcmdzKXtyZXR1cm4gZnVuY3Rpb24oTF9yZXN0KXtyZXR1cm4gZnVuY3Rpb24oTF9jb25kKXtyZXR1cm4gTF9yZXN0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9oKXtyZXR1cm4gZnVuY3Rpb24oTF90KXtyZXR1cm4gZnVuY3Rpb24oTF9EKXtyZXR1cm4gTF9pc1Rva2VuU3RyaW5nKCkoTF9oKShmdW5jdGlvbigpe3JldHVybiBcIi0+XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2ZvbGRyMSgpKExfYXBwZW5kKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcImFsdERlZlwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9mdW5jTmFtZSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9hbHROYW1lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2xlbmd0aCgpKExfYXJncykpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXFxcXFwifSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9hcmdzKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIi5cIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29uZCgpKExfbmlsKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzb21lXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShMX3QpKExfbmlsKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwibm9uZVwifSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfbWFrZUNhc2VDb25kaXRpb24oKShMX29yaWcpKExfZnVuY05hbWUpKExfYWx0TmFtZSkoTF9hcmdzKShMX3QpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZGxQdXNoKCkoTF9jb25kKShMX2gpKX19KSgpKSl9fSkoKSl9fX0pfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfcGFyc2VFcnIoKShmdW5jdGlvbigpe3JldHVybiBcIkVycm9yIGluIGNhc2UgZGVmaW5pdGlvbiAtLSBleHBlY3RlZCBmdW5jLm5hbWUgYXJncyB8IGNvbmRpdGlvbiAtPiBhY3Rpb24sIGJ1dCBnb3QgXCJ9KShMX29yaWcpKX19KSgpKX19fX19fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2FsdERlZigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwic2hvd1wifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzb21lXCJ9KShmdW5jdGlvbigpe3JldHVybiAxfSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF9vYmope3JldHVybiBMX2hhc1R5cGUoKShMX29iaikoTF9zb21lKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NvbWUoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZmxhdHRlbigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiU29tZShcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfb2JqKCkoTF9pZCkoTF9mYWxzZSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiKVwifSkoTF9uaWwpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfYWx0RGVmKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzaG93XCJ9KShmdW5jdGlvbigpe3JldHVybiBcIm5vbmVcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29iail7cmV0dXJuIExfaGFzVHlwZSgpKExfb2JqKShMX25vbmUpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc29tZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiTm9uZVwifSkpfX0pKCkpKExfbm9uZSl9KX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfYWx0RGVmKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJzaG93XCJ9KShmdW5jdGlvbigpe3JldHVybiBcImxlZnRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29iail7cmV0dXJuIExfaGFzVHlwZSgpKExfb2JqKShMX2xlZnQpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc29tZSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc3RyQ2F0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9mbGF0dGVuKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJMZWZ0KFwifSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9vYmooKShMX2lkKShMX2lkKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCIpXCJ9KShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkoTF9ub25lKX0pfX0pKCkpfSxcbiAgZnVuY3Rpb24oKXtyZXR1cm4gTF9hbHREZWYoKShmdW5jdGlvbigpe3JldHVybiBcInNob3dcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwicmlnaHRcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDF9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29iail7cmV0dXJuIExfaGFzVHlwZSgpKExfb2JqKShMX3JpZ2h0KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NvbWUoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3N0ckNhdCgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfZmxhdHRlbigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiUmlnaHQoXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX29iaigpKExfaWQpKExfaWQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIilcIn0pKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKSl9fSkoKSkpfX0pKCkpKX19KSgpKShMX25vbmUpfSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2FsdERlZigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmluZFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJvcHRpb25cIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX29wdCl7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIExfb3IoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hhc1R5cGUoKShMX29wdCkoTF9zb21lKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oYXNUeXBlKCkoTF9vcHQpKExfbm9uZSkpfX0pKCkpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfc29tZSgpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfb3B0KCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gZnVuY3Rpb24oTF92YWx1ZSl7cmV0dXJuIExfY29udCgpKExfdmFsdWUpfSl9fSkoKSkoTF9ub25lKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2FsdERlZigpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiYmluZFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gXCJlaXRoZXJcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIDJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX2VpdGhlcil7cmV0dXJuIGZ1bmN0aW9uKExfY29udCl7cmV0dXJuIExfb3IoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2hhc1R5cGUoKShMX2VpdGhlcikoTF9sZWZ0KSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9oYXNUeXBlKCkoTF9laXRoZXIpKExfcmlnaHQpKX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX3NvbWUoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2VpdGhlcigpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IGZ1bmN0aW9uKExfXyl7cmV0dXJuIExfZWl0aGVyKCl9KX19KSgpKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBmdW5jdGlvbihMX3ZhbHVlKXtyZXR1cm4gTF9jb250KCkoTF92YWx1ZSl9KX19KSgpKSl9fSkoKSkpfX0pKCkpKExfbm9uZSl9fSl9fSkoKSl9LFxuICBmdW5jdGlvbigpe3JldHVybiBMX2RlZmluZSgpKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaHRtbFwifSkoZnVuY3Rpb24oKXtyZXR1cm4gMX0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiaHRtbCB4ID0gXFxcXGYgLiBmIHhcIn0pKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IHNldERhdGFUeXBlKGZ1bmN0aW9uKExfeCl7cmV0dXJuIHNldFR5cGUoZnVuY3Rpb24oTF9mKXtyZXR1cm4gTF9mKCkoTF94KX0sICdodG1sJyl9LCAnaHRtbCcpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfZGVmVG9rZW5QYWNrKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJ1dGlsXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIi0+XCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIi0tXCJ9KSgoZnVuY3Rpb24oKXt2YXIgJG07IHJldHVybiBmdW5jdGlvbigpe3JldHVybiAkbSB8fCAoJG0gPSBMX2NvbnMoKShmdW5jdGlvbigpe3JldHVybiBcIisrXCJ9KShMX25pbCkpfX0pKCkpKX19KSgpKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoZnVuY3Rpb24oKXtyZXR1cm4gXCJqc1tcIn0pKGZ1bmN0aW9uKCl7cmV0dXJuIFwiXVwifSkpfX0pKCkpKExfbmlsKSl9fSkoKSkoKGZ1bmN0aW9uKCl7dmFyICRtOyByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gJG0gfHwgKCRtID0gTF9jb25zKCkoTF9uaWwpKExfbmlsKSl9fSkoKSkpfX0pKCkpKX19KSgpKX0sXG4gIGZ1bmN0aW9uKCl7cmV0dXJuIExfYWRkU3RkVG9rZW5QYWNrcygpKChmdW5jdGlvbigpe3ZhciAkbTsgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICRtIHx8ICgkbSA9IExfY29ucygpKGZ1bmN0aW9uKCl7cmV0dXJuIFwidXRpbFwifSkoTF9uaWwpKX19KSgpKX1dKTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbnByb2Nlc3MubmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYW5TZXRJbW1lZGlhdGUgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5zZXRJbW1lZGlhdGU7XG4gICAgdmFyIGNhblBvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5wb3N0TWVzc2FnZSAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lclxuICAgIDtcblxuICAgIGlmIChjYW5TZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGYpIH07XG4gICAgfVxuXG4gICAgaWYgKGNhblBvc3QpIHtcbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBpZiAoZXYuc291cmNlID09PSB3aW5kb3cgJiYgZXYuZGF0YSA9PT0gJ3Byb2Nlc3MtdGljaycpIHtcbiAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgncHJvY2Vzcy10aWNrJywgJyonKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgfTtcbn0pKCk7XG5cbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn1cblxuLy8gVE9ETyhzaHR5bG1hbilcbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuIl19
;